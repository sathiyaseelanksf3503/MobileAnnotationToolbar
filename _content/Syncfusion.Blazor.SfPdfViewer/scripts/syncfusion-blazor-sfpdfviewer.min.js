/*!*  filename: syncfusion-blazor-sfpdfviewer.min.js 
*     version : 30.1.38 
*     Copyright Syncfusion Inc. 2001 - 2025. All rights reserved. 
*     Use of this code is subject to the terms of our license.
*     A copy of the current license can be obtained at any time by e-mailing 
*     licensing@syncfusion.com. Any infringement will be prosecuted under 
*     applicable laws. 
*/
!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="./single-sfpdfviewer-bundle.js")}({"./modules/base.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{},window.sf.base=function(e){"use strict";var t=0,n=!1;function o(e,t){var i=t;return i.unshift(void 0),new(Function.prototype.bind.apply(e,i))}function s(e){var t,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(e){for(var t="",i=0;i<5;i++)t+=(i?",":"")+e[parseInt(i.toString(),10)];return t}(i),o=function(i){i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===n&&(e(),t())};return window.addEventListener("message",o,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",o),e=o=n=void 0}}function a(e,t){for(var i=t,n=e.replace(/\[/g,".").replace(/\]/g,"").split("."),o=0;o<n.length&&!f(i);o++)i=i[n[parseInt(o.toString(),10)]];return i}function r(e,t,i){var n,o,s=e.replace(/\[/g,".").replace(/\]/g,"").split("."),a=i||{},r=a,l=s.length;for(n=0;n<l;n++)o=s[parseInt(n.toString(),10)],n+1===l?r[""+o]=void 0===t?{}:t:u(r[""+o])&&(r[""+o]={}),r=r[""+o];return a}function l(e,t){delete e[""+t]}var d="undefined"!=typeof window?window:{};function h(e){return!u(e)&&e.constructor==={}.constructor}function p(e,t){if(!u(t))for(var i=e,n=t,o=0,s=Object.keys(t);o<s.length;o++){var a=s[o];u(i.deepMerge)||-1===i.deepMerge.indexOf(a)||!h(n[""+a])&&!Array.isArray(n[""+a])?i[""+a]=n[""+a]:c(i[""+a],i[""+a],n[""+a],!0)}}function c(e,t,n,o){var s=e&&"object"===i(e)?e:{},a=arguments.length;o&&(a-=1);for(var r=function(e){if(!l[e])return"continue";var t=l[e];Object.keys(t).forEach((function(e){var i,n=s[""+e],a=t[""+e],r=Array.isArray(a)&&Array.isArray(n)&&a.length!==n.length,l=!y()||!(n instanceof Event||r);o&&l&&(h(a)||Array.isArray(a))?h(a)?(i=n||{},Array.isArray(i)&&i.hasOwnProperty("isComplexArray")?c(i,{},a,o):s[""+e]=c(i,{},a,o)):(i=y()?n&&Object.keys(a).length:n||[],s[""+e]=c([],i,a,i&&i.length||a&&a.length)):s[""+e]=a}))},l=arguments,d=1;d<a;d++)r(d);return s}function u(e){return null==e}function f(e){return void 0===e}function m(e,t){var i;return function(){var n=this,o=arguments,s=function(){return i=null,e.apply(n,o)};clearTimeout(i),i=setTimeout(s,t)}}function g(e,t){return e===t||!(e===document||!e)&&g(e.parentNode,t)}function w(e){try{throw new Error(e)}catch(e){throw e.message+"\n"+e.stack}}function y(){return n}function v(){if("undefined"!=typeof window){var e=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(e)}}var b,S,A={latn:{_digits:"0123456789",_type:"numeric"}},x={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"∞",nan:"NaN",exponential:"E"},V=[0,1,2,3,4,5,6,7,8,9],C=function(){function e(){}return e.getMainObject=function(e,t){return a(y()?t:"main."+t,e)},e.getNumberingSystem=function(e){return a("supplemental.numberingSystems",e)||this.numberingSystems},e.reverseObject=function(e,t){for(var i={},n=0,o=t||Object.keys(e);n<o.length;n++){var s=o[n];i.hasOwnProperty(e[s])||(i[e[s]]=s)}return i},e.getSymbolRegex=function(e){var t=e.map((function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")})).join("|");return new RegExp(t,"g")},e.getSymbolMatch=function(e){for(var t={},i=0,n=Object.keys(x);i<n.length;i++){var o=n[i];t[e[o]]=x[o]}return t},e.constructRegex=function(e){for(var t=e.length,i="",n=0;n<t;n++)i+=n!==t-1?e[parseInt(n.toString(),10)]+"|":e[parseInt(n.toString(),10)];return i},e.convertValueParts=function(e,t,i){return e.replace(t,(function(e){return i[e]}))},e.getDefaultNumberingSystem=function(e){var t={};return t.obj=a("numbers",e),t.nSystem=a("defaultNumberingSystem",t.obj),t},e.getCurrentNumericOptions=function(e,t,i,n){var o={},s=this.getDefaultNumberingSystem(e);if(!f(s.nSystem)||n){var r=n?a("obj.mapperDigits",s):a(s.nSystem+"._digits",t);if(!f(r)){o.numericPair=this.reverseObject(r,V);var l=RegExp;o.numberParseRegex=new l(this.constructRegex(r),"g"),o.numericRegex="["+r[0]+"-"+r[9]+"]",i&&(o.numericRegex=r[0]+"-"+r[9],o.symbolNumberSystem=a(n?"numberSymbols":"symbols-numberSystem-"+s.nSystem,s.obj),o.symbolMatch=this.getSymbolMatch(o.symbolNumberSystem),o.numberSystem=s.nSystem)}}return o},e.getNumberMapper=function(e,t,i){var n={mapper:{}},o=this.getDefaultNumberingSystem(e);if(!f(o.nSystem)){n.numberSystem=o.nSystem,n.numberSymbols=a("symbols-numberSystem-"+o.nSystem,o.obj),n.timeSeparator=a("timeSeparator",n.numberSymbols);var s=a(o.nSystem+"._digits",t);if(!f(s))for(var r=0,l=V;r<l.length;r++){var d=l[r];n.mapper[d]=s[d]}}return n},e.nPair="numericPair",e.nRegex="numericRegex",e.numberingSystems=A,e}(),I={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH₵",XDR:"XDR",AED:"د.إ.",BHD:"د.ب.",DZD:"د.ج.",EGP:"ج.م.",ILS:"₪",IQD:"د.ع.",JOD:"د.ا.",KMF:"CF",KWD:"د.ك.",LBP:"ل.ل.",LYD:"د.ل.",MAD:"د.م.",MRU:"أ.م.",OMR:"ر.ع.",QAR:"ر.ق.",SAR:"ر.س.",SDG:"ج.س.",SOS:"S",SSP:"£",SYP:"ل.س.",TND:"د.ت.",YER:"ر.ي.",CLP:"$",INR:"₹",TZS:"TSh",EUR:"€",AZN:"₼",RUB:"₽",BYN:"Br",ZMW:"K",BGN:"лв.",NGN:"₦",XOF:"CFA",BDT:"৳",CNY:"¥",BAM:"КМ",UGX:"USh",USD:"$",CZK:"Kč",GBP:"£",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"ރ.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"£",GIP:"£",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"₱",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"₡",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"₲",UYU:"$",VES:"Bs.S",IRR:"ريال",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"֏",ISK:"kr",JPY:"¥",GEL:"₾",CVE:"​",KZT:"₸",KHR:"៛",KPW:"₩",KRW:"₩",KGS:"сом",AOA:"Kz",LAK:"₭",MZN:"MTn",MKD:"ден",MNT:"₮",BND:"$",MMK:"K",NOK:"kr",NPR:"रु",AWG:"Afl.",SRD:"$",PLN:"zł",AFN:"؋",STN:"Db",MDL:"L",RON:"lei",UAH:"₴",LKR:"රු.",ALL:"Lekë",RSD:"дин.",TJS:"смн",THB:"฿",TMT:"m.",TRY:"₺",UZS:"сўм",VND:"₫",TWD:"NT$"};b=e.HijriParser||(e.HijriParser={}),S=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],b.getHijriDate=function(e){var t=e.getDate(),i=e.getMonth(),n=e.getFullYear(),o=i+1,s=n;o<3&&(s-=1,o+=12);var a=Math.floor(s/100),r=a-Math.floor(a/4)-2,l=Math.floor(365.25*(s+4716))+Math.floor(30.6001*(o+1))+t-r-1524,d=l+(r=(a=Math.floor((l-1867216.25)/36524.25))-Math.floor(a/4)+1)+1524,h=Math.floor((d-122.1)/365.25),p=Math.floor(365.25*h),c=Math.floor((d-p)/30.6001);t=d-p-Math.floor(30.6001*c),(i=Math.floor((d-p)/20.6001))>13&&(h+=1,i-=12),i-=1,n=h-4716;var u=l-24e5,f=l-1948084,m=Math.floor(f/10631);f-=10631*m;var g=Math.floor((f-.1335)/(10631/30)),w=30*m+g;f-=Math.floor(g*(10631/30)+.1335);var y=Math.floor((f+28.5001)/29.5);13===y&&(y=12);for(var v=f-Math.floor(29.5001*y-29),b=0;b<S.length&&!(S[parseInt(b.toString(),10)]>u);b++);var A=b+16260,x=Math.floor((A-1)/12),V=x+1,C=A-12*x,I=u-S[b-1]+1;return(I+"").length>2&&(I=v,C=y,V=w),{year:V,month:C,date:I}},b.toGregorian=function(e,t,i){var n=i+S[12*(e-1)+1+(t-1)-16260-1]-1+24e5,o=Math.floor(n+.5),s=Math.floor((o-1867216.25)/36524.25),a=1524+(s=o+1+s-Math.floor(s/4)),r=Math.floor((a-122.1)/365.25),l=Math.floor(365.25*r),d=Math.floor((a-l)/30.6001),h=a-l-Math.floor(30.6001*d),p=d-(d>13.5?13:1),c=r-(p>2.5?4716:4715);return c<=0&&p--,new Date(c+"/"+p+"/"+h)};var k=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,M=["sun","mon","tue","wed","thu","fri","sat"],T={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},E={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},B=function(){function t(){}return t.dateFormat=function(t,i,n){var o=this,s=e.IntlBase.getDependables(n,t,i.calendar),r=a("parserObject.numbers",s),l=s.dateObject,d={isIslamic:e.IntlBase.islamicRegex.test(i.calendar)};y()&&i.isServerRendered&&(i=e.IntlBase.compareBlazorDateFormats(i,t));var h=i.format||e.IntlBase.getResultantPattern(i.skeleton,s.dateObject,i.type,!1,y()?t:"");if(d.dateSeperator=y()?a("dateSeperator",l):e.IntlBase.getDateSeparator(s.dateObject),f(h))w("Format options or type given must be invalid");else{h=e.IntlBase.ConvertDateToWeekFormat(h),y()&&(h=h.replace(/tt/,"a")),d.pattern=h,d.numMapper=y()?c({},r):C.getNumberMapper(s.parserObject,C.getNumberingSystem(n));for(var p=0,u=h.match(k)||[];p<u.length;p++){var m=u[p],g=m.length,v=m[0];switch("K"===v&&(v="h"),v){case"E":case"c":y()?d.weekday=a("days."+e.IntlBase.monthIndex[g],l):d.weekday=s.dateObject[e.IntlBase.days]["stand-alone"][e.IntlBase.monthIndex[g]];break;case"M":case"L":y()?d.month=a("months."+e.IntlBase.monthIndex[g],l):d.month=s.dateObject[e.IntlBase.month]["stand-alone"][e.IntlBase.monthIndex[g]];break;case"a":d.designator=y()?a("dayPeriods",l):a("dayPeriods.format.wide",l);break;case"G":var b=g<=3?"eraAbbr":4===g?"eraNames":"eraNarrow";d.era=y()?a("eras",l):a("eras."+b,s.dateObject);break;case"z":d.timeZone=a("dates.timeZoneNames",s.parserObject)}}}return function(e){return isNaN(e.getDate())?null:o.intDateFormatter(e,d)}},t.intDateFormatter=function(t,i){for(var n="",o=i.pattern.match(e.IntlBase.dateParseRegex),s=this.getCurrentDateValue(t,i.isIslamic),a=0,r=o;a<r.length;a++){var l=r[a],d=l.length,h=l[0];"K"===h&&(h="h");var p=void 0,c="",f=void 0,m=void 0,g="";switch(h){case"M":case"L":p=s.month,d>2?n+=i.month[p]:f=!0;break;case"E":case"c":n+=i.weekday[M[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(f=!0,"d"===h)p=s.date;else if("f"===h){f=!1,m=!0;var w=(c=(c=t[T[h]]().toString()).substring(0,d)).length;if(d!==w){if(d>3)continue;for(var y=0;y<d-w;y++)c="0"+c.toString()}g+=c}else p=t[T[h]]();"h"===h&&(p=p%12||12);break;case"y":m=!0,g+=s.year,2===d&&(g=g.substring(g.length-2));break;case"a":var v=t.getHours()<12?"am":"pm";n+=i.designator[v];break;case"G":var b=t.getFullYear()<0?0:1,S=i.era[b];u(S)&&(S=i.era[b?0:1]),n+=S||"";break;case"'":n+="''"===l?"'":l.replace(/'/g,"");break;case"z":var A=t.getTimezoneOffset(),x=d<4?"+H;-H":i.timeZone.hourFormat;x=x.replace(/:/g,i.numMapper.timeSeparator),0===A?n+=i.timeZone.gmtZeroFormat:(m=!0,g=this.getTimeZoneValue(A,x)),g=i.timeZone.gmtFormat.replace(/\{0\}/,g);break;case":":n+=i.numMapper.numberSymbols.timeSeparator;break;case"/":n+=i.dateSeperator;break;case"W":f=!0,p=e.IntlBase.getWeekOfYear(t);break;default:n+=l}f&&(m=!0,g=this.checkTwodigitNumber(p,d)),m&&(n+=C.convertValueParts(g,e.IntlBase.latnParseRegex,i.numMapper.mapper))}return n},t.getCurrentDateValue=function(t,i){return i?e.HijriParser.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},t.checkTwodigitNumber=function(e,t){var i=e+"";return 2===t&&2!==i.length?"0"+i:i},t.getTimeZoneValue=function(e,t){var i=this,n=t.split(";")[e>0?1:0],o=Math.abs(e);return n.replace(/HH?|mm/g,(function(e){var t=e.length,n=-1!==e.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?o/60:o%60),t)}))},t}(),P={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},D=["infinity","nan","group","decimal","exponential"],N=function(){function t(){}return t.numberFormatter=function(t,i,n){var o,s=this,r=c({},i),l={},d={},h=e.IntlBase.getDependables(n,t,"",!0),p=h.numericObject;d.numberMapper=y()?c({},p):C.getNumberMapper(h.parserObject,C.getNumberingSystem(n),!0),d.currencySymbol=y()?a("currencySymbol",p):e.IntlBase.getCurrencySymbol(h.numericObject,r.currency||e.defaultCurrencyCode,i.altSymbol),d.percentSymbol=y()?a("numberSymbols.percentSign",p):d.numberMapper.numberSymbols.percentSign,d.minusSymbol=y()?a("numberSymbols.minusSign",p):d.numberMapper.numberSymbols.minusSign;var u=d.numberMapper.numberSymbols;if(i.format&&!e.IntlBase.formatRegex.test(i.format))l=e.IntlBase.customFormat(i.format,d,h.numericObject);else{if(c(r,e.IntlBase.getProperNumericSkeleton(i.format||"N")),r.isCurrency="currency"===r.type,r.isPercent="percent"===r.type,y()||(o=e.IntlBase.getSymbolPattern(r.type,d.numberMapper.numberSystem,h.numericObject,r.isAccount)),r.groupOne=this.checkValueRange(r.maximumSignificantDigits,r.minimumSignificantDigits,!0),this.checkValueRange(r.maximumFractionDigits,r.minimumFractionDigits,!1,!0),f(r.fractionDigits)||(r.minimumFractionDigits=r.maximumFractionDigits=r.fractionDigits),f(r.useGrouping)&&(r.useGrouping=!0),r.isCurrency&&!y()&&(o=o.replace(/\u00A4/g,e.IntlBase.defaultCurrency)),y())l.nData=c({},{},a(r.type+"nData",p)),l.pData=c({},{},a(r.type+"pData",p)),"currency"===r.type&&i.currency&&e.IntlBase.replaceBlazorCurrency([l.pData,l.nData],d.currencySymbol,i.currency);else{var m=o.split(";");l.nData=e.IntlBase.getFormatData(m[1]||"-"+m[0],!0,d.currencySymbol),l.pData=e.IntlBase.getFormatData(m[0],!1,d.currencySymbol),r.useGrouping&&(r.groupSeparator=u[D[2]],r.groupData=this.getGroupingDetails(m[0]))}if(f(r.minimumFractionDigits)&&(r.minimumFractionDigits=l.nData.minimumFraction),f(r.maximumFractionDigits)){var g=l.nData.maximumFraction;r.maximumFractionDigits=f(g)&&r.isPercent?0:g}var w=r.minimumFractionDigits,v=r.maximumFractionDigits;f(w)||f(v)||w>v&&(r.maximumFractionDigits=w)}return c(l.nData,r),c(l.pData,r),function(e){return isNaN(e)?u[D[1]]:isFinite(e)?s.intNumberFormatter(e,l,d,i):u[D[0]]}},t.getGroupingDetails=function(t){var i={},n=t.match(e.IntlBase.negativeDataRegex);if(n&&n[4]){var o=n[4],s=o.lastIndexOf(",");if(-1!==s){var a=o.split(".")[0];i.primary=a.length-s-1;var r=o.lastIndexOf(",",s-1);-1!==r&&(i.secondary=s-1-r)}}return i},t.checkValueRange=function(e,t,i,n){var o=n?"f":"s",s=0,a=P["l"+o],r=P["m"+o];if(f(e)||(this.checkRange(e,a,n),s++),f(t)||(this.checkRange(t,r,n),s++),2===s){if(!(e<t))return!0;w(r+"specified must be less than the"+a)}else i&&1===s&&w("Both"+r+"and"+r+"must be present");return!1},t.checkRange=function(e,t,i){var n=i?[0,20]:[1,21];(e<n[0]||e>n[1])&&w(t+"value must be within the range"+n[0]+"to"+n[1])},t.intNumberFormatter=function(t,i,n,o){var s;if(!f(i.nData.type)){t<0?(t*=-1,s=i.nData):s=0===t&&i.zeroData||i.pData;var a="";if(s.isPercent&&(t*=100),s.groupOne)a=this.processSignificantDigits(t,s.minimumSignificantDigits,s.maximumSignificantDigits);else if(a=this.processFraction(t,s.minimumFractionDigits,s.maximumFractionDigits,o),s.minimumIntegerDigits&&(a=this.processMinimumIntegers(a,s.minimumIntegerDigits)),n.isCustomFormat&&s.minimumFractionDigits<s.maximumFractionDigits&&/\d+\.\d+/.test(a)){for(var r=a.split("."),l=r[1],d=l.length-1;d>=0&&("0"===l[""+d]&&d>=s.minimumFractionDigits);d--)l=l.slice(0,d);a=r[0]+"."+l}return"scientific"===s.type&&(a=(a=t.toExponential(s.maximumFractionDigits)).replace("e",n.numberMapper.numberSymbols[D[4]])),a=a.replace(".",n.numberMapper.numberSymbols[D[3]]),a="#,###,,;(#,###,,)"===s.format?this.customPivotFormat(parseInt(a,10)):a,s.useGrouping&&(a=this.groupNumbers(a,s.groupData.primary,s.groupSeparator||",",n.numberMapper.numberSymbols[D[3]]||".",s.groupData.secondary)),a=C.convertValueParts(a,e.IntlBase.latnParseRegex,n.numberMapper.mapper),"N/A"===s.nlead?s.nlead:"0"===a&&o&&"0"===o.format?a+s.nend:s.nlead+a+s.nend}},t.processSignificantDigits=function(e,t,i){var n=e+"";return n.length<t?e.toPrecision(t):+(n=e.toPrecision(i))+""},t.groupNumbers=function(e,t,i,n,o){for(var s=!u(o)&&0!==o,a=e.split(n),r=a[0],l=r.length,d="";l>t;)d=r.slice(l-t,l)+(d.length?i+d:""),l-=t,s&&(t=o,s=!1);return a[0]=r.slice(0,l)+(d.length?i:"")+d,a.join(n)},t.processFraction=function(e,t,i,n){var o=(e+"").split(".")[1],s=o?o.length:0;if(t&&s<t){var a="";if(0!==s){a+=e;for(var r=0;r<t-s;r++)a+="0";return a}return a=e.toFixed(t),e.toFixed(t)}if(!u(i)&&(s>i||0===i))return e.toFixed(i);var l=e+"";return"0"===l[0]&&n&&"###.00"===n.format&&(l=l.slice(1)),l},t.processMinimumIntegers=function(e,t){var i=e.split("."),n=i[0],o=n.length;if(o<t){for(var s=0;s<t-o;s++)n="0"+n;i[0]=n}return i.join(".")},t.customPivotFormat=function(e){if(e>=5e5){var t=(e/=1e6).toString().split("."),i=(t[0],t[1]);return i&&+i.substring(0,1)>=5?Math.ceil(e).toString():Math.floor(e).toString()}return""},t}(),F=/^[0-9]*$/,L={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},O=function(){function t(){}return t.dateParser=function(t,i,n){var o=this,s=e.IntlBase.getDependables(n,t,i.calendar),r=C.getCurrentNumericOptions(s.parserObject,C.getNumberingSystem(n),!1,y()),l={};y()&&i.isServerRendered&&(i=e.IntlBase.compareBlazorDateFormats(i,t));var d,h=i.format||e.IntlBase.getResultantPattern(i.skeleton,s.dateObject,i.type,!1,y()?t:""),p="";if(f(h))w("Format options or type given must be invalid");else{h=e.IntlBase.ConvertDateToWeekFormat(h),l={isIslamic:e.IntlBase.islamicRegex.test(i.calendar),pattern:h,evalposition:{},culture:t};for(var c=h.match(e.IntlBase.dateParseRegex)||[],m=c.length,g=0,v=0,b=!1,S=r.numericRegex,A=y()?s.parserObject.numbers:C.getNumberMapper(s.parserObject,C.getNumberingSystem(n)),x=0;x<m;x++){var V=c[parseInt(x.toString(),10)],I=V.length,k="K"===V[0]?"h":V[0],M=void 0,T=void 0,B=E[k],P=2===I?"":"?";switch(b&&(g=v,b=!1),k){case"E":case"c":var D=void 0;D=y()?a("days."+e.IntlBase.monthIndex[I],s.dateObject):s.dateObject[e.IntlBase.days]["stand-alone"][e.IntlBase.monthIndex[I]];var N=C.reverseObject(D);p+="("+Object.keys(N).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(T=!0,("M"===k||"L"===k)&&I>2){var F=void 0;F=y()?a("months."+e.IntlBase.monthIndex[I],s.dateObject):s.dateObject.months["stand-alone"][e.IntlBase.monthIndex[I]],l[B]=C.reverseObject(F),p+="("+Object.keys(l[B]).join("|")+")"}else if("f"===k){if(I>3)continue;M=!0,p+="("+S+S+"?"+S+"?)"}else M=!0,p+="("+S+S+P+")";"h"===k&&(l.hour12=!0);break;case"W":p+="("+S+(1===I?"?":"")+S+")";break;case"y":T=M=!0,p+=2===I?"("+S+S+")":"("+S+"{"+I+",})";break;case"a":T=!0;var L=y()?a("dayPeriods",s.dateObject):a("dayPeriods.format.wide",s.dateObject);l[B]=C.reverseObject(L),p+="("+Object.keys(l[B]).join("|")+")";break;case"G":T=!0;var O=I<=3?"eraAbbr":4===I?"eraNames":"eraNarrow";l[B]=C.reverseObject(y()?a("eras",s.dateObject):a("eras."+O,s.dateObject)),p+="("+Object.keys(l[B]).join("|")+"?)";break;case"z":T=0!==(new Date).getTimezoneOffset(),l[B]=a("dates.timeZoneNames",s.parserObject);var R=l[B],z=(d=I<4)?"+H;-H":R.hourFormat;z=z.replace(/:/g,A.timeSeparator),p+="("+this.parseTimeZoneRegx(z,R,S)+")?",b=!0,v=d?6:12;break;case"'":p+="("+V.replace(/'/g,"")+")?";break;default:p+="([\\D])"}if(T&&(l.evalposition[""+B]={isNumber:M,pos:x+1+g,hourOnly:d}),x===m-1&&!u(p)){var H=RegExp;l.parserRegex=new H("^"+p+"$","i")}}}return function(t){var i=o.internalDateParse(t,l,r);if(u(i)||!Object.keys(i).length)return null;if(l.isIslamic){var n={},s=i.year,a=i.day,d=i.month,h=s?s+"":"",p=2===h.length;s&&d&&a&&!p||(n=e.HijriParser.getHijriDate(new Date)),p&&(s=parseInt((n.year+"").slice(0,2)+h,10));var c=e.HijriParser.toGregorian(s||n.year,d||n.month,a||n.date);i.year=c.getFullYear(),i.month=c.getMonth()+1,i.day=c.getDate()}return o.getDateObject(i)}},t.getDateObject=function(e,t){var i=t||new Date;i.setMilliseconds(0);var n=e.year,o=e.designator,s=e.timeZone;if(!f(n)){if((n+"").length<=2)n+=100*Math.floor(i.getFullYear()/100);i.setFullYear(n)}for(var a=0,r=["hour","minute","second","milliseconds","month","day"];a<r.length;a++){var l=r[a],d=e[l];if(f(d)&&"day"===l&&i.setDate(1),!f(d))if("month"===l){if((d-=1)<0||d>11)return new Date("invalid");var h=i.getDate();i.setDate(1),i[L[l]](d);var p=new Date(i.getFullYear(),d+1,0).getDate();i.setDate(h<p?h:p)}else{if("day"===l){var c=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(d<1||d>c)return null}i[L[l]](d)}}if(!f(o)){var u=i.getHours();"pm"===o?i.setHours(u+(12===u?0:12)):12===u&&i.setHours(0)}if(!f(s)){var m=s-i.getTimezoneOffset();0!==m&&i.setMinutes(i.getMinutes()+m)}return i},t.internalDateParse=function(e,t,i){var n=e.match(t.parserRegex),o={hour:0,minute:0,second:0};if(u(n))return null;for(var s=0,a=Object.keys(t.evalposition);s<a.length;s++){var r=a[s],l=t.evalposition[""+r],d=n[l.pos];if(l.isNumber)o[r]=this.internalNumberParser(d,i);else if("timeZone"!==r||f(d)){d="month"!==r||t.isIslamic||"en"!==t.culture&&"en-GB"!==t.culture&&"en-US"!==t.culture?d:d[0].toUpperCase()+d.substring(1).toLowerCase(),d="month"!==r&&"designator"===r&&t.culture&&-1!==t.culture.indexOf("en-")&&-1===["en-US","en-MH","en-MP"].indexOf(t.culture)?d.toLowerCase():d,o[r]=t[r][d]}else{var h=l.pos,p=void 0,c=n[h+1],m=!f(c);l.hourOnly?p=60*this.getZoneValue(m,c,n[h+4],i):(p=60*this.getZoneValue(m,c,n[h+7],i),p+=this.getZoneValue(m,n[h+4],n[h+10],i)),u(p)||(o[""+r]=p)}}return t.hour12&&(o.hour12=!0),o},t.internalNumberParser=function(e,t){return e=C.convertValueParts(e,t.numberParseRegex,t.numericPair),F.test(e)?+e:null},t.parseTimeZoneRegx=function(e,t,i){var n,o,s=t.gmtFormat,a="("+i+")("+i+")";return n=e.replace("+","\\+"),o=(n=-1!==e.indexOf("HH")?n.replace(/HH|mm/g,"("+a+")"):n.replace(/H|m/g,"("+a+"?)")).split(";").map((function(e){return s.replace("{0}",e)})),n=o.join("|")+"|"+t.gmtZeroFormat},t.getZoneValue=function(e,t,i,n){var o=e?t:i;if(!o)return 0;var s=this.internalNumberParser(o,n);return e?-s:s},t}(),R=new RegExp("^([^0-9]*)(([0-9,]*[0-9]+)(.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$"),z=/,/g,H=["minusSign","infinity"],U=function(){function t(){}return t.numberParser=function(t,i,n){var o,s=this,r=e.IntlBase.getDependables(n,t,"",!0),l={custom:!0};e.IntlBase.formatRegex.test(i.format)||!i.format?(c(l,e.IntlBase.getProperNumericSkeleton(i.format||"N")),l.custom=!1,l.fractionDigits||i.maximumFractionDigits&&(l.maximumFractionDigits=i.maximumFractionDigits)):c(l,e.IntlBase.customFormat(i.format,null,null));var d,h=a("numbers",r.parserObject);if(o=C.getCurrentNumericOptions(r.parserObject,C.getNumberingSystem(n),!0,y()),l.symbolRegex=C.getSymbolRegex(Object.keys(o.symbolMatch)),l.infinity=o.symbolNumberSystem[H[1]],y())l.nData=c({},{},a(l.type+"nData",h)),l.pData=c({},{},a(l.type+"pData",h)),"currency"===l.type&&i.currency&&e.IntlBase.replaceBlazorCurrency([l.pData,l.nData],a("currencySymbol",h),i.currency);else if(d=e.IntlBase.getSymbolPattern(l.type,o.numberSystem,r.numericObject,l.isAccount)){var p=(d=d.replace(/\u00A4/g,e.IntlBase.defaultCurrency)).split(";");l.nData=e.IntlBase.getFormatData(p[1]||"-"+p[0],!0,""),l.pData=e.IntlBase.getFormatData(p[0],!0,"")}return function(e){return s.getParsedNumber(e,l,o)}},t.getParsedNumber=function(e,t,i){var n,o,s,a,r,l;if(-1!==e.indexOf(t.infinity))return 1/0;e=C.convertValueParts(e,t.symbolRegex,i.symbolMatch),0===(e=-1!==(e=C.convertValueParts(e,i.numberParseRegex,i.numericPair)).indexOf("-")?e.replace("-.","-0."):e).indexOf(".")&&(e="0"+e);var d=e.match(R);if(u(d))return NaN;a=d[1],s=d[2];var h=d[5];return r=d[6],o=(n=t.custom?a===t.nData.nlead&&r===t.nData.nend:-1!==a.indexOf(t.nData.nlead)&&-1!==r.indexOf(t.nData.nend))?t.nData.isPercent:t.pData.isPercent,s=s.replace(z,""),h&&(s+=h),l=+s,("percent"===t.type||o)&&(l/=100),(t.custom||t.fractionDigits)&&(l=parseFloat(l.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.fractionDigits))),t.maximumFractionDigits&&(l=this.convertMaxFracDigits(s,t,l,n)),n&&(l*=-1),l},t.convertMaxFracDigits=function(e,t,i,n){var o=e.split(".");return o[1]&&o[1].length>t.maximumFractionDigits&&(i=+i.toFixed(t.custom?n?t.nData.maximumFractionDigits:t.pData.maximumFractionDigits:t.maximumFractionDigits)),i},t}(),j=function(){function e(e){this.ranArray=[],this.boundedEvents={},u(e)||(this.context=e)}return e.prototype.on=function(e,t,i,n){if(!u(t)){var o=i||this.context;this.notExist(e)?this.boundedEvents[""+e]=[{handler:t,context:o,id:n}]:u(n)?this.isHandlerPresent(this.boundedEvents[""+e],t)||this.boundedEvents[""+e].push({handler:t,context:o}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[""+e].push({handler:t,context:o,id:n}))}},e.prototype.off=function(e,t,i){if(!this.notExist(e)){var n=a(e,this.boundedEvents);if(t){for(var o=0;o<n.length;o++)if(i){if(n[parseInt(o.toString(),10)].id===i){n.splice(o,1);var s=this.ranArray.indexOf(i);-1!==s&&this.ranArray.splice(s,1);break}}else if(t===n[parseInt(o.toString(),10)].handler){n.splice(o,1);break}}else delete this.boundedEvents[""+e]}},e.prototype.notify=function(e,t,i,n){if(this.notExist(e))i&&i.call(this,t);else{t&&(t.name=e);var o=a(e,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,t,i,n,0);for(var s=0,r=o;s<r.length;s++){var l=r[s];l.handler.call(l.context,t)}i&&i.call(this,t)}},e.prototype.blazorCallback=function(e,t,i,n,o){var s=this,a=o===e.length-1;if(o<e.length){var r=e[parseInt(o.toString(),10)],l=r.handler.call(r.context,t);if(l&&"function"==typeof l.then){if(!i)return l;l.then((function(l){if(l="string"==typeof l&&s.isJson(l)?JSON.parse(l,s.dateReviver):l,c(t,t,l,!0),!i||!a)return s.blazorCallback(e,t,i,n,o+1);i.call(r.context,t)})).catch((function(e){n&&n.call(r.context,"string"==typeof e&&s.isJson(e)?JSON.parse(e,s.dateReviver):e)}))}else{if(!i||!a)return this.blazorCallback(e,t,i,n,o+1);i.call(r.context,t)}}},e.prototype.dateReviver=function(e,t){return y&&"string"==typeof t&&null!==t.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(t):t},e.prototype.isJson=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.prototype.destroy=function(){this.boundedEvents=this.context=void 0},e.prototype.offIntlEvents=function(){var e=this.boundedEvents.notifyExternalChange;if(e){for(var t=0;t<e.length;t++){var i=e[""+t].context;i&&i.detectFunction&&i.randomId&&!i.isRendered&&(this.off("notifyExternalChange",i.detectFunction,i.randomId),t--)}this.boundedEvents.notifyExternalChange.length||delete this.boundedEvents.notifyExternalChange}},e.prototype.notExist=function(e){return!1===this.boundedEvents.hasOwnProperty(e)||this.boundedEvents[e].length<=0},e.prototype.isHandlerPresent=function(e,t){for(var i=0,n=e;i<n.length;i++){if(n[i].handler===t)return!0}return!1},e}(),_=new j;e.rightToLeft=!1;var W={};e.defaultCulture="en-US",e.defaultCurrencyCode="USD";var q=function(){function t(e){e&&(this.culture=e)}return t.prototype.getDateFormat=function(e){return B.dateFormat(this.getCulture(),e||{type:"date",skeleton:"short"},W)},t.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=e.defaultCurrencyCode),y()&&t&&!t.format&&(t.minimumFractionDigits=0),N.numberFormatter(this.getCulture(),t||{},W)},t.prototype.getDateParser=function(e){return O.dateParser(this.getCulture(),e||{skeleton:"short",type:"date"},W)},t.prototype.getNumberParser=function(e){return y()&&e&&!e.format&&(e.minimumFractionDigits=0),U.numberParser(this.getCulture(),e||{format:"N"},W)},t.prototype.formatNumber=function(e,t){return this.getNumberFormat(t)(e)},t.prototype.formatDate=function(e,t){return this.getDateFormat(t)(e)},t.prototype.parseDate=function(e,t){return this.getDateParser(t)(e)},t.prototype.parseNumber=function(e,t){return this.getNumberParser(t)(e)},t.prototype.getDatePattern=function(t,i){return e.IntlBase.getActualDateTimeFormat(this.getCulture(),t,W,i)},t.prototype.getNumberPattern=function(t,i){return e.IntlBase.getActualNumberFormat(this.getCulture(),t,W,i)},t.prototype.getFirstDayOfWeek=function(){return e.IntlBase.getWeekData(this.getCulture(),W)},t.prototype.getCulture=function(){return this.culture||e.defaultCulture},t}();var Z=RegExp,Y={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(t){t.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var i=/[0-9]/g;t.defaultCurrency="$";var n=["infinity","nan","group","decimal"],o=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,s={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};t.dateConverterMapper=/dddd|ddd/gi;t.islamicRegex=/^islamic/;var r={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};t.formatRegex=new Z("(^[ncpae]{1})([0-1]?[0-9]|20)?$","i"),t.currencyFormatRegex=new Z("(^[ca]{1})([0-1]?[0-9]|20)?$","i");var l={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function d(e,i,n,o,s){var r,l=n||"date";if(s)r=g({skeleton:e},s).format||g({skeleton:"d"},"en-US").format;else{if(-1!==t.basicPatterns.indexOf(e)){if(r=a(l+"Formats."+e,i),"dateTime"===l){var d=a("dateFormats."+e,i),h=a("timeFormats."+e,i);r=r.replace("{1}",d).replace("{0}",h)}}else r=a("dateTimeFormats.availableFormats."+e,i);f(r)&&"yMd"===e&&(r="M/d/y")}return r}function h(e,i,n,o){var s={},r=n||"gregorian";if(s.parserObject=C.getMainObject(e,i)||(y()?t.blazorDefaultObject:t.defaultObject),o)s.numericObject=a("numbers",s.parserObject);else{var l=y()?"dates":"dates.calendars."+r;s.dateObject=a(l,s.parserObject)}return s}function p(e,t,i,n){return a(e+"Formats-numberSystem-"+t+(n?".accounting":".standard"),i)||(n?a(e+"Formats-numberSystem-"+t+".standard",i):"")}function m(e){var i=e.match(t.dateConverterMapper);if(i&&y()){var n=3===i[0].length?"EEE":"EEEE";return e.replace(t.dateConverterMapper,n)}return e}function g(e,t){var i=e.format||e.skeleton,n=a((t||"en-US")+"."+i,Y);return n||(n=a("en-US."+i,Y)),n&&(n=m(n),e.format=n.replace(/tt/,"a")),e}function w(e){var i=e.match(t.formatRegex),n={},o=i[1].toUpperCase();return n.isAccount="A"===o,n.type=t.patternMatcher[o],e.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function v(e,n,o,s){var a=s?{}:{nlead:"",nend:""},r=e.match(t.customRegex);if(r){s||(a.nlead=b(r[1],o),a.nend=b(r[10],o),a.groupPattern=r[4]);var l=r[7];if(l&&n){var d=l.match(i);u(d)?a.minimumFraction=0:a.minimumFraction=d.length,a.maximumFraction=l.length-1}}return a}function b(e,i){return e?(e=e.replace(t.defaultCurrency,i),""===i?e.trim():e):""}function S(e,t,i){return a("currencies."+t+(i?"."+i:".symbol"),e)||a("currencies."+t+".symbol-alt-narrow",e)||"$"}function A(e,i,o){var s={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},a=e.match(t.customRegex);if(u(a)||""===a[5]&&"N/A"!==e)return s.type=void 0,s;s.nlead=a[1],s.nend=a[10];var r=a[6],l=!!r.match(/\ $/g),d=-1!==r.replace(/\ $/g,"").indexOf(" ");s.useGrouping=-1!==r.indexOf(",")||d,r=r.replace(/,/g,"");var h=a[7];if(-1!==r.indexOf("0")&&(s.minimumIntegerDigits=r.length-r.indexOf("0")),u(h)||(s.minimumFractionDigits=h.lastIndexOf("0"),s.maximumFractionDigits=h.lastIndexOf("#"),-1===s.minimumFractionDigits&&(s.minimumFractionDigits=0),(-1===s.maximumFractionDigits||s.maximumFractionDigits<s.minimumFractionDigits)&&(s.maximumFractionDigits=s.minimumFractionDigits)),u(i)?c(s,x([s.nlead,s.nend],"%","%")):(i.isCustomFormat=!0,c(s,x([s.nlead,s.nend],"$",i.currencySymbol)),s.isCurrency||c(s,x([s.nlead,s.nend],"%",i.percentSymbol))),!u(o)){var f=p(s.type,i.numberMapper.numberSystem,o,!1);s.useGrouping&&(s.groupSeparator=d?" ":i.numberMapper.numberSymbols[n[2]],s.groupData=N.getGroupingDetails(f.split(";")[0])),s.nlead=s.nlead.replace(/'/g,""),s.nend=l?" "+s.nend.replace(/'/g,""):s.nend.replace(/'/g,"")}return s}function x(e,t,i){for(var n={nlead:e[0],nend:e[1]},o=0;o<2;o++){var s=e[parseInt(o.toString(),10)],a=s.indexOf(t);if(-1!==a&&(a<s.indexOf("'")||a>s.lastIndexOf("'"))){n[l[o]]=s.substring(0,a)+i+s.substring(a+1),n[l[t]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}function V(e,t,i){e+=".";for(var n=0;n<t;n++)e+="0";if(t<i)for(var o=i-t,s=0;s<o;s++)e+="#";return e}function k(e,t){for(var i=e.split("."),n="",o=0;o<t;o++)n+="0";return i[1]?n+"."+i[1]:n}function M(e){var t=e.split("."),i=t[0],n=3-i.length%3;e="";for(var o=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;o>0;o-=3)e=","+i[o-2]+i[o-1]+i[parseInt(o.toString(),10)]+e;return e=e.slice(1),t[1]?e+"."+t[1]:e}t.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,t.basicPatterns=["short","medium","long","full"],t.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhuʻl-Q.",12:"Dhuʻl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabiʻ I",4:"Rabiʻ II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Shaʻban",9:"Ramadan",10:"Shawwal",11:"Dhuʻl-Qiʻdah",12:"Dhuʻl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"€","symbol-alt-narrow":"€"},GBP:{displayName:"British Pound","symbol-alt-narrow":"£"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"¤#,##0.00",accounting:"¤#,##0.00;(¤#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},t.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"∞"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},numberSystem:"latn","decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"¤#,##0.00",accounting:"¤#,##0.00;(¤#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},t.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},t.month="months",t.days="days",t.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},t.getResultantPattern=d,t.getDependables=h,t.getSymbolPattern=p,t.ConvertDateToWeekFormat=m,t.compareBlazorDateFormats=g,t.getProperNumericSkeleton=w,t.getFormatData=v,t.changeCurrencySymbol=b,t.getCurrencySymbol=S,t.customFormat=function(e,t,i){for(var n={},o=e.split(";"),s=["pData","nData","zeroData"],a=0;a<o.length;a++)n[s[a]]=A(o[a],t,i);return u(n.nData)&&(n.nData=c({},n.pData),n.nData.nlead=u(t)?"-"+n.nData.nlead:t.minusSymbol+n.nData.nlead),n},t.customNumberFormat=A,t.isCurrencyPercent=x,t.getDateSeparator=function(e){var t=(a("dateFormats.short",e)||"").match(/[d‏M‏]([^d‏M])[d‏M‏]/i);return t?t[1]:"/"},t.getActualDateTimeFormat=function(e,t,i,n){var r=h(i,e,t.calendar);y()&&(t=g(t,e));var l=t.format||d(t.skeleton,r.dateObject,t.type);if(n){if(-1!==(l=l.replace(o,(function(e){return s[e]}))).indexOf("z")){var p=l.match(/z/g).length,c=void 0,u={timeZone:{}};u.numMapper=C.getNumberMapper(r.parserObject,C.getNumberingSystem(i)),u.timeZone=a("dates.timeZoneNames",r.parserObject);var f=(new Date).getTimezoneOffset(),m=p<4?"+H;-H":u.timeZone.hourFormat;m=m.replace(/:/g,u.numMapper.timeSeparator),0===f?c=u.timeZone.gmtZeroFormat:(c=B.getTimeZoneValue(f,m),c=u.timeZone.gmtFormat.replace(/\{0\}/,c)),l=l.replace(/[z]+/,'"'+c+'"')}l=l.replace(/ $/,"")}return l},t.getActualNumberFormat=function(i,n,o,s){var r,l,d=h(o,i,"",!0),u={custom:!0},f=d.numericObject,m={},g=(n.format||"").match(t.currencyFormatRegex),b=t.formatRegex.test(n.format)?w(n.format||"N"):{},A={};if(g){A.numberMapper=y()?c({},d.numericObject):C.getNumberMapper(d.parserObject,C.getNumberingSystem(o),!0);var x=y()?a("currencySymbol",d.numericObject):S(d.numericObject,n.currency||e.defaultCurrencyCode,n.altSymbol),I=p("currency",A.numberMapper.numberSystem,d.numericObject,/a/i.test(n.format)),T=(I=I.replace(/\u00A4/g,x)).split(";");m.hasNegativePattern=!!y()||T.length>1,m.nData=y()?a(b.type+"nData",f):v(T[1]||"-"+T[0],!0,x),m.pData=y()?a(b.type+"pData",f):v(T[0],!1,x),g[2]||n.minimumFractionDigits||n.maximumFractionDigits||(r=v(I.split(";")[0],!0,"",!0).minimumFraction)}if(t.formatRegex.test(n.format)||!n.format){if(c(u,w(n.format||"N")),u.custom=!1,l="###0",u.fractionDigits||n.minimumFractionDigits||n.maximumFractionDigits||r){u.fractionDigits&&(n.minimumFractionDigits=n.maximumFractionDigits=u.fractionDigits),l=V(l,r||u.fractionDigits||n.minimumFractionDigits||0,n.maximumFractionDigits||0)}if(n.minimumIntegerDigits&&(l=k(l,n.minimumIntegerDigits)),n.useGrouping&&(l=M(l)),"currency"===u.type||u.type&&y()){y()&&"currency"!==u.type&&(m.pData=a(u.type+"pData",f),m.nData=a(u.type+"nData",f));var E=l;l=m.pData.nlead+E+m.pData.nend,(m.hasNegativePattern||y())&&(l+=";"+m.nData.nlead+E+m.nData.nend)}"percent"!==u.type||y()||(l+=" %")}else l=n.format.replace(/'/g,'"');return Object.keys(A).length>0&&(l=s?l:function(e,t){if(-1!==e.indexOf(",")){var i=e.split(",");e=i[0]+a("numberMapper.numberSymbols.group",t)+i[1].replace(".",a("numberMapper.numberSymbols.decimal",t))}else e=e.replace(".",a("numberMapper.numberSymbols.decimal",t));return e}(l,A)),l},t.fractionDigitsPattern=V,t.minimumIntegerPattern=k,t.groupingPattern=M,t.getWeekData=function(e,t){var i="sun",n=a("supplemental.weekData.firstDay",t),o=e;return/en-/.test(o)&&(o=o.slice(3)),o=o.slice(0,2).toUpperCase()+o.substring(2),n&&(i=n[""+o]||n[o.slice(0,2)]||"sun"),r[""+i]},t.replaceBlazorCurrency=function(e,t,i){var n=a(i||"",I);if(t!==n)for(var o=0,s=e;o<s.length;o++){var r=s[o];r.nend=r.nend.replace(t,n),r.nlead=r.nlead.replace(t,n)}},t.getWeekOfYear=function(e){var t,i=new Date(e.getFullYear(),0,1),n=i.getDay();n=n>=0?n:n+7;var o=Math.floor((e.getTime()-i.getTime()-6e4*(e.getTimezoneOffset()-i.getTimezoneOffset()))/864e5)+1;if(n<4){if((t=Math.floor((o+n-1)/7)+1)>52){var s=new Date(e.getFullYear()+1,0,1).getDay();t=(s=s>=0?s:s+7)<4?1:53}}else t=Math.floor((o+n-1)/7);return t}}(e.IntlBase||(e.IntlBase={}));var X=/^(.*?):[ \t]*([^\r\n]*)$/gm,G=function(){function e(e,t,n,o){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof e?(this.url=e,this.type=t?t.toUpperCase():"GET",this.mode=!!u(n)||n):"object"===i(e)&&(this.options=e,p(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:o}return e.prototype.send=function(e){var t=this;this.data=u(e)?this.data:e;var i={cancel:!1,httpRequest:null};return new Promise((function(e,n){t.httpRequest=new XMLHttpRequest,t.httpRequest.onreadystatechange=function(){t.stateChange(e,n)},u(t.onLoad)||(t.httpRequest.onload=t.onLoad),u(t.onProgress)||(t.httpRequest.onprogress=t.onProgress),u(t.onAbort)||(t.httpRequest.onabort=t.onAbort),u(t.onError)||(t.httpRequest.onerror=t.onError),u(t.onUploadProgress)||(t.httpRequest.upload.onprogress=t.onUploadProgress),t.httpRequest.open(t.type,t.url,t.mode),u(t.data)||null===t.contentType||t.httpRequest.setRequestHeader("Content-Type",t.contentType||"application/json; charset=utf-8"),t.beforeSend&&(i.httpRequest=t.httpRequest,t.beforeSend(i)),i.cancel||t.httpRequest.send(u(t.data)?null:t.data)}))},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e,this),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(this.httpRequest),e},e.prototype.stateChange=function(e,t){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(e){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?e(this.successHandler(i)):this.emitError?t(new Error(this.failureHandler(this.httpRequest.statusText))):e())},e.prototype.getResponseHeader=function(e){var t,i;t={};for(var n=X.exec(this.httpRequest.getAllResponseHeaders());n;)t[n[1].toLowerCase()]=n[2],n=X.exec(this.httpRequest.getAllResponseHeaders());return u(i=t[e.toLowerCase()])?null:i},e}(),J=function(){function e(e,t,i){this.type="GET",this.emitError=!0,"string"==typeof e?(this.url=e,this.type=u(t)?this.type:t.toUpperCase(),this.contentType=i):h(e)&&Object.keys(e).length>0&&p(this,e),this.contentType=u(this.contentType)?"application/json; charset=utf-8":this.contentType}return e.prototype.send=function(e){var t=this,i={"application/json":"json","multipart/form-data":"formData","application/octet-stream":"blob","application/x-www-form-urlencoded":"formData"};try{u(this.fetchRequest)&&"GET"===this.type?this.fetchRequest=new Request(this.url,{method:this.type}):u(this.fetchRequest)&&(this.data=u(e)?this.data:e,this.fetchRequest=new Request(this.url,{method:this.type,headers:{"Content-Type":this.contentType},body:this.data}));var n={cancel:!1,fetchRequest:this.fetchRequest};return this.triggerEvent(this.beforeSend,n),n.cancel?null:(this.fetchResponse=fetch(this.fetchRequest),this.fetchResponse.then((function(e){if(t.triggerEvent(t.onLoad,e),!e.ok)throw e;for(var n="text",o=0,s=Object.keys(i);o<s.length;o++){var a=s[o];e.headers.get("Content-Type")&&-1!==e.headers.get("Content-Type").indexOf(a)&&(n=i[a])}return e[n]()})).then((function(e){return t.triggerEvent(t.onSuccess,e,t),e})).catch((function(e){var i={};return t.emitError&&(t.triggerEvent(t.onFailure,e),i=Promise.reject(e)),i})))}catch(e){return e}},e.prototype.triggerEvent=function(e,t,i){u(e)||"function"!=typeof e||e(t,i)},e}(),K=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,Q=/msie|trident/i,$=/Trident\/7\./,ee=/(ipad|iphone|ipod touch)/i,te=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,ie=/android/i,ne=/trident|windows phone|edge/i,oe=/(version)[ /]([\w.]+)/i,se={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var ae=function(){function e(){}return e.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,o=Object.keys(se);n<o.length;n++){var s=o[n];if(i=e.userAgent.match(se[""+s])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,e.userAgent.match($)){t.name="msie";break}var a=e.userAgent.match(oe);"safari"===t.name&&a&&(t.version=a[2]);break}}return t},e.getEvent=function(t){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return e.isPointer?i[""+t].isPointer:e.isTouch?i[""+t].isTouch+(e.isDevice?"":" "+i[""+t].isDevice):i[""+t].isDevice},e.getTouchStartEvent=function(){return e.getEvent("start")},e.getTouchEndEvent=function(){return e.getEvent("end")},e.getTouchMoveEvent=function(){return e.getEvent("move")},e.getTouchCancelEvent=function(){return e.getEvent("cancel")},e.isSafari=function(){return e.isDevice&&e.isIos&&e.isTouch&&"undefined"!=typeof window&&-1===window.navigator.userAgent.toLowerCase().indexOf("iphone")&&window.navigator.userAgent.toLowerCase().indexOf("safari")>-1},e.getValue=function(t,i){var n="undefined"!=typeof window?window.browserDetails:{};return"undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Mac")&&navigator.maxTouchPoints>1&&!0===e.isTouch&&!se.CHROME.test(navigator.userAgent)&&(n.isIos=!0,n.isDevice=!0,n.isTouch=!0,n.isPointer="pointerEnabled"in window.navigator),void 0===n[""+t]?n[""+t]=i.test(e.userAgent):n[""+t]},Object.defineProperty(e,"userAgent",{get:function(){return e.uA},set:function(t){e.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"info",{get:function(){return f(window.browserDetails.info)?window.browserDetails.info=e.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIE",{get:function(){return e.getValue("isIE",Q)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isTouch",{get:function(){return f(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isPointer",{get:function(){return f(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMSPointer",{get:function(){return f(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isDevice",{get:function(){return e.getValue("isDevice",K)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos",{get:function(){return e.getValue("isIos",ee)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIos7",{get:function(){return e.getValue("isIos7",te)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return e.getValue("isAndroid",ie)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWebView",{get:function(){return f(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(f(window.cordova)&&f(window.PhoneGap)&&f(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindows",{get:function(){return e.getValue("isWindows",ne)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchStartEvent",{get:function(){return f(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=e.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchMoveEvent",{get:function(){return f(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=e.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchEndEvent",{get:function(){return f(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=e.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(e,"touchCancelEvent",{get:function(){return f(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=e.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),e.uA="undefined"!=typeof navigator?navigator.userAgent:"",e}(),re=function(){function e(){}return e.addOrGetEventData=function(e){return"__eventList"in e?e.__eventList.events:(e.__eventList={},e.__eventList.events=[])},e.add=function(t,i,n,o,s){var a,r=e.addOrGetEventData(t);a=s?m(n,s):n,o&&(a=a.bind(o));for(var l=i.split(" "),d=0;d<l.length;d++)r.push({name:l[parseInt(d.toString(),10)],listener:n,debounce:a}),ae.isIE?t.addEventListener(l[parseInt(d.toString(),10)],a):t.addEventListener(l[parseInt(d.toString(),10)],a,{passive:!1});return a},e.remove=function(t,i,n){for(var o=e.addOrGetEventData(t),s=i.split(" "),a=function(e){var i,a=-1;o&&0!==o.length&&o.some((function(t,o){return t.name===s[parseInt(e.toString(),10)]&&t.listener===n&&(a=o,i=t.debounce,!0)})),-1!==a&&o.splice(a,1),i&&t.removeEventListener(s[parseInt(e.toString(),10)],i)},r=0;r<s.length;r++)a(r)},e.clearEvents=function(t){var i,n;n=c([],n,i=e.addOrGetEventData(t));for(var o=0;o<n.length;o++){var s=n[parseInt(o.toString(),10)];t.removeEventListener(s.name,s.debounce),i.shift()}},e.trigger=function(t,i,n){for(var o=0,s=e.addOrGetEventData(t);o<s.length;o++){var a=s[o];a.name===i&&a.debounce.call(this,n)}},e}(),le=/^svg|^path|^g/;function de(e,t){var i=le.test(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return void 0===t||(i.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(i.className=t.className),void 0!==t.id&&(i.id=t.id),void 0!==t.styles&&(i.style.cssText=t.styles),void 0!==t.attrs&&ge(i,t.attrs)),i}function he(e,t){for(var i=ce(t),n=RegExp,o=0,s=e;o<s.length;o++)for(var l=s[o],d=0,p=i;d<p.length;d++){var c=p[d];if(h(l)){var f=a("attributes.className",l);u(f)?r("attributes.className",c,l):new n("\\b"+c+"\\b","i").test(f)||r("attributes.className",f+" "+c,l)}else l.classList.contains(c)||l.classList.add(c)}return e}function pe(e,t){for(var i=ce(t),n=0,o=e;n<o.length;n++){var s=o[n],l=h(s);if(l?a("attributes.className",s):""!==s.className)for(var d=0,p=i;d<p.length;d++){var c=p[d];if(l){var u=a("attributes.className",s).split(" "),f=u.indexOf(c);-1!==f&&u.splice(f,1),r("attributes.className",u.join(" "),s)}else s.classList.remove(c)}}return e}function ce(e){var t=[];return"string"==typeof e?t.push(e):t=e,t}function ue(e){var t=e;return""===t.style.visibility&&t.offsetWidth>0}function fe(e){e.querySelectorAll("script").forEach((function(e){var t=document.createElement("script");t.text=e.innerHTML,document.head.appendChild(t),me(t)}))}function me(e){var t=e.parentNode;if(t)return t.removeChild(e)}function ge(e,t){for(var i=e,n=0,o=Object.keys(t);n<o.length;n++){var s=o[n];if(h(i)){var a=s;"tabindex"===s&&(a="tabIndex"),i.attributes[""+a]=t[""+s]}else i.setAttribute(s,t[""+s])}return i}function we(e,t){return void 0===t&&(t=document),e=ve(e),t.querySelector(e)}function ye(e,t){return void 0===t&&(t=document),e=ve(e),t.querySelectorAll(e)}function ve(e){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(e.match(/#[0-9]/g)||e.match(t)){for(var i=e.split(","),n=0;n<i.length;n++){for(var o=i[parseInt(n.toString(),10)].split(" "),s=0;s<o.length;s++)if(o[parseInt(s.toString(),10)].indexOf("#")>-1&&!o[parseInt(s.toString(),10)].match(/\[.*\]/)){var a=o[parseInt(s.toString(),10)].split("#");if(a[1].match(/^\d/)||a[1].match(t)){var r=o[parseInt(s.toString(),10)].split(".");r[0]=r[0].replace(/#/,"[id='")+"']",o[parseInt(s.toString(),10)]=r.join(".")}}i[parseInt(n.toString(),10)]=o.join(" ")}return i.join(",")}return e}function be(e,t){var i=e;if("function"==typeof i.closest)return i.closest(t);for(;i&&1===i.nodeType;){if(Ae(i,t))return i;i=i.parentNode}return null}function Se(e,t){void 0!==t&&Object.keys(t).forEach((function(i){e.style[i]=t[i]}))}function Ae(e,t){var i=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return i?i.call(e,t):-1!==[].indexOf.call(document.querySelectorAll(t),e)}var xe=new RegExp("]"),Ve=function(){function t(e,t){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new j(this),f(t)||(this.element="string"==typeof t?document.querySelector(t):t,u(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),f(e)||this.setProperties(e,!0),this.isDestroyed=!1}return t.prototype.setProperties=function(e,t){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!t,p(this,e),!0!==t?(p(this.changedProperties,e),this.dataBind()):y()&&this.isRendered&&this.serverDataBind(e),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},t.callChildDataBind=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];if(t[""+o]instanceof Array)for(var s=0,a=t[""+o];s<a.length;s++){var r=a[s];void 0!==r.dataBind&&r.dataBind()}else t[""+o].dataBind()}},t.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},t.prototype.dataBind=function(){if(t.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var e=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=e}},t.prototype.serverDataBind=function(e){if(y()){e=e||{},c(this.bulkChanges,{},e,!0);this.allowServerDataBinding&&window.sfBlazor.updateModel&&(window.sfBlazor.updateModel(this),this.bulkChanges={})}},t.prototype.saveChanges=function(e,t,i){if(y()){var n={};n[""+e]=t,this.serverDataBind(n)}this.isProtectedOnChange||(this.oldProperties[""+e]=i,this.changedProperties[""+e]=t,this.finalUpdate(),this.finalUpdate=s(this.dataBind.bind(this)))},t.prototype.addEventListener=function(e,t){this.modelObserver.on(e,t)},t.prototype.removeEventListener=function(e,t){this.modelObserver.off(e,t)},t.prototype.trigger=function(e,t,i,n){var o=this;if(!0!==this.isDestroyed){var s=this.isProtectedOnChange;this.isProtectedOnChange=!1;var r=this.modelObserver.notify(e,t,i,n);if(xe.test(e)){var l=a(e,this);if(l){if(window.Blazor){var d=l.call(this,t);d&&"function"==typeof d.then?i?d.then((function(e){i&&(e="string"==typeof e&&o.modelObserver.isJson(e)?JSON.parse(e):e,i.call(o,e))})).catch((function(e){n&&(e="string"==typeof e&&o.modelObserver.isJson(e)?JSON.parse(e):e,n.call(o,e))})):r=d:i&&i.call(this,t)}else l.call(this,t),i&&i.call(this,t)}else i&&i.call(this,t)}return this.isProtectedOnChange=s,r}},t.prototype.addInstance=function(){var e="e-"+this.getModuleName().toLowerCase();he([this.element],["e-lib",e]),u(this.element.ej2_instances)?r("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},t.prototype.destroy=function(){var t=this;this.element.ej2_instances=this.element.ej2_instances?this.element.ej2_instances.filter((function(i){return e.proxyToRaw?e.proxyToRaw(i)!==e.proxyToRaw(t):i!==t})):[],pe([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&pe([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},t}();function Ce(e,t,i,n){return e.properties.hasOwnProperty(t)&&e.properties[t]instanceof n||(e.properties[""+t]=o(n,[e,t,i])),e.properties[""+t]}function Ie(e,t,i,n,s,a){for(var r=[],l=i?i.length:0,d=0;d<l;d++){var h=n;if(a&&(h=n(i[parseInt(d.toString(),10)],e)),s){var p=o(h,[e,t,{},!0]);p.setProperties(i[parseInt(d.toString(),10)],!0),r.push(p)}else r.push(o(h,[e,t,i[parseInt(d.toString(),10)],!1]))}return r}function ke(e,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[""+t]=e),this.properties[""+t]}}function Me(e,t){return function(i){if(this.properties[""+t]!==i){var n=this.properties.hasOwnProperty(t)?this.properties[t]:e;this.saveChanges(t,i,n),this.properties[""+t]=i}}}function Te(e,t,i){return function(){return Ce(this,t,e,i)}}function Ee(e,t,i){return function(n){Ce(this,t,e,i).setProperties(n)}}function Be(e,t,i){return function(){var n=i({});return this.properties.hasOwnProperty(t)?this.properties[""+t]:Ce(this,t,e,n)}}function Pe(e,t,i){return function(n){var o=i(n,this);Ce(this,t,e,o).setProperties(n)}}function De(e,t,i){return function(){var n=this;if(!this.properties.hasOwnProperty(t)){var o=Ie(this,t,e,i,!1);this.properties[""+t]=o}var s=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return this.properties[t].hasOwnProperty("push")||s||["push","pop"].forEach((function(e){var o={value:Oe(e,t,i,n.properties[""+t]).bind(n),configurable:!0};Object.defineProperty(n.properties[""+t],e,o)})),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[""+t],"isComplexArray",{value:!0}),this.properties[""+t]}}function Ne(e,t,i){return function(n){this.isComplexArraySetter=!0;var o=Ie(this,t,e,i,!1),s=Ie(this,t,n,i,!0);this.isComplexArraySetter=!1,this.saveChanges(t,s,o),this.properties[""+t]=s}}function Fe(e,t,i){return function(n){var o=this.properties.hasOwnProperty(t)?this.properties[t]:e,s=Ie(this,t,n,i,!0,!0);this.saveChanges(t,s,o),this.properties[""+t]=s}}function Le(e,t,i){return function(){var n=i({});if(!this.properties.hasOwnProperty(t)){var o=Ie(this,t,e,n,!1);this.properties[""+t]=o}return this.properties[""+t]}}function Oe(e,t,i,n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(e){case"push":for(var a=0;a<i.length;a++){var r=i[parseInt(a.toString(),10)];Array.prototype[""+e].apply(n,[r]);var l=Re(s+(n.length-1),r,!this.controlParent,e);this.serverDataBind(l,i[parseInt(a.toString(),10)],!1,e)}break;case"pop":Array.prototype[""+e].apply(n);var d=Re(s+n.length,null,!this.controlParent,e);this.serverDataBind(d,{ejsAction:"pop"},!1,e)}return n}}function Re(e,t,n,o){var s=e;if(n&&((s={})[""+e]=t,t&&"object"===i(t))){s[""+e].ejsAction=o}return s}function ze(e){return function(t,i){var n={set:Me(e,i),get:ke(e,i),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),_e(t,i,"prop",e)}}function He(e,t){return function(i,n){var o={set:Ee(e,n,t),get:Te(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,o),_e(i,n,"complexProp",e,t)}}function Ue(){return function(e,t){var i={set:function(e){var i=this.properties[""+t];if(i!==e){var n=function e(t,i){if(!1===t.hasOwnProperty("parentObj"))return{context:t,prefix:i};var n=a("propName",t);return n&&(i=n+"-"+i),e(a("parentObj",t),i)}(this,t);!1===f(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,e),this.properties[""+t]=e}},get:ke(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(e,t,i),_e(e,t,"event")}}function je(e){}function _e(e,t,i,n,o){f(e.propList)&&(e.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),e.propList[i+"s"].push({propertyName:t,defaultValue:n,type:o}),e.propList[i+"Names"].push(t)}var We,qe,Ze=(We=function(e,t){return(We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}We(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ye=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Xe=function(t){function i(e){var i=t.call(this,e,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var n;return Ze(i,t),n=i,i.prototype.animate=function(e,t){t=t||{};var i=this.getModel(t);if("string"==typeof e)for(var o=0,s=Array.prototype.slice.call(ye(e,document));o<s.length;o++){var a=s[o];i.element=a,n.delayAnimation(i)}else i.element=e,n.delayAnimation(i)},i.stop=function(e,t){e.style.animation="",e.removeAttribute("e-animate");var i=e.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),e.removeAttribute("e-animation-id")}t&&t.end&&t.end.call(this,t)},i.delayAnimation=function(t){"Disable"===e.animationMode||e.animationMode===e.GlobalAnimationMode.Disable?(t.begin&&t.begin.call(this,t),t.end&&t.end.call(this,t)):t.delay?setTimeout((function(){n.applyAnimation(t)}),t.delay):n.applyAnimation(t)},i.applyAnimation=function(e){var t=this;e.timeStamp=0;var i=0,n=0,o=0,s=e.duration;e.element.setAttribute("e-animate","true");var a=function(r){try{if(r){o=0===o?r:o,e.timeStamp=r+e.timeStamp-o,o=r,!i&&e.begin&&e.begin.call(t,e),i+=1;var l=e.timeStamp/i;e.timeStamp<s&&e.timeStamp+l<s&&e.element.getAttribute("e-animate")?(e.element.style.animation=e.name+" "+e.duration+"ms "+e.timingFunction,e.progress&&e.progress.call(t,e),requestAnimationFrame(a)):(cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.element.removeAttribute("e-animate"),e.element.style.animation="",e.end&&e.end.call(t,e))}else n=requestAnimationFrame(a),e.element.setAttribute("e-animation-id",n.toString())}catch(i){cancelAnimationFrame(n),e.element.removeAttribute("e-animation-id"),e.fail&&e.fail.call(t,i)}};a()},i.prototype.getModel=function(e){return{name:e.name||this.name,delay:e.delay||this.delay,duration:void 0!==e.duration?e.duration:this.duration,begin:e.begin||this.begin,end:e.end||this.end,fail:e.fail||this.fail,progress:e.progress||this.progress,timingFunction:this.easing[e.timingFunction]?this.easing[e.timingFunction]:e.timingFunction||this.easing[this.timingFunction]}},i.prototype.onPropertyChanged=function(e,t){},i.prototype.getModuleName=function(){return"animation"},i.prototype.destroy=function(){},Ye([ze("FadeIn")],i.prototype,"name",void 0),Ye([ze(400)],i.prototype,"duration",void 0),Ye([ze("ease")],i.prototype,"timingFunction",void 0),Ye([ze(0)],i.prototype,"delay",void 0),Ye([Ue()],i.prototype,"progress",void 0),Ye([Ue()],i.prototype,"begin",void 0),Ye([Ue()],i.prototype,"end",void 0),Ye([Ue()],i.prototype,"fail",void 0),i=n=Ye([je],i)}(Ve);function Ge(e){var t=e.target,i=this.rippleOptions.selector,n=i?be(t,i):t;if(!(!n||this.rippleOptions&&be(t,this.rippleOptions.ignore))){var o=n.getBoundingClientRect(),s=e.pageX-document.body.scrollLeft,a=e.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),r=Math.max(Math.abs(s-o.left),Math.abs(s-o.right)),l=Math.max(Math.abs(a-o.top),Math.abs(a-o.bottom)),d=Math.sqrt(r*r+l*l),h=2*d+"px",p=s-o.left-d,c=a-o.top-d;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(p=0,c=0,h="100%"),n.classList.add("e-ripple");var u=de("div",{className:"e-ripple-element",styles:"width: "+h+";height: "+h+";left: "+p+"px;top: "+c+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",n!==this.parent&&re.add(n,"mouseleave",Ke,{parent:this.parent,rippleOptions:this.rippleOptions})}}function Je(e){Qe(e,this)}function Ke(e){Qe(e,this)}function Qe(e,t){var i=t.rippleOptions.duration,n=e.target,o=t.rippleOptions.selector,s=o?be(n,o):n;if(s&&(!s||-1!==s.className.indexOf("e-ripple"))){var a=ye(".e-ripple-element",s),r=a[a.length-1];r&&(r.style.opacity="0.5"),t.parent!==s&&re.remove(s,"mouseleave",Ke),setTimeout((function(){r&&r.parentNode&&r.parentNode.removeChild(r),s.getElementsByClassName("e-ripple-element").length||s.classList.remove("e-ripple"),t.done&&t.done(e)}),i)}}e.isRippleEnabled=!1,(qe=e.GlobalAnimationMode||(e.GlobalAnimationMode={})).Default="Default",qe.Enable="Enable",qe.Disable="Disable";var $e=function(){function e(e){this.loadedModules=[],this.parent=e}return e.prototype.inject=function(e,t){var i=e.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(e);for(var n=0;n<i;n++)for(var s=e[parseInt(n.toString(),10)],a=0,l=t;a<l.length;a++){var d=l[a],h=s.member;if(d&&d.prototype.getModuleName()===s.member&&!this.isModuleLoaded(h)){var p=o(d,s.args),c=this.getMemberName(h);s.isProperty?r(c,d,this.parent):r(c,p,this.parent);var u=s;u.member=c,this.loadedModules.push(u)}}}else this.clean()},e.prototype.clean=function(){for(var e=0,t=this.loadedModules;e<t.length;e++){var i=t[e];i.isProperty||a(i.member,this.parent).destroy()}this.loadedModules=[]},e.prototype.getNonInjectedModules=function(e){var t=this;return e.filter((function(e){return!t.isModuleLoaded(e.member)}))},e.prototype.clearUnusedModule=function(e){for(var t=this,i=e.map((function(e){return t.getMemberName(e.member)})),n=0,o=this.loadedModules.filter((function(e){return-1===i.indexOf(e.member)}));n<o.length;n++){var s=o[n];s.isProperty||a(s.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(s),1),l(this.parent,s.member)}},e.prototype.getMemberName=function(e){return e[0].toLowerCase()+e.substring(1)+"Module"},e.prototype.isModuleLoaded=function(e){for(var t=0,i=this.loadedModules;t<i.length;t++){if(i[t].member===this.getMemberName(e))return!0}return!1},e}(),et=function(){function e(e,t,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=a("callChildDataBind",Ve),this.parentObj=e,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=t,this.isParentArray=n,this.setProperties(i,!0)}return e.prototype.updateChange=function(e,t){!0===e?this.parentObj.childChangedProperties[""+t]=e:delete this.parentObj.childChangedProperties[""+t],this.parentObj.updateChange&&this.parentObj.updateChange(e,this.parentObj.propName)},e.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var e=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(e)}}},e.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},e.prototype.setProperties=function(e,t){!0===t?(p(this,e),this.updateChange(!1,this.propName),this.clearChanges()):p(this,e)},e.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var e=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(r(this.propName+"."+e,this.changedProperties,this.parentObj.changedProperties),r(this.propName+"."+e,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},e.prototype.saveChanges=function(e,t,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(e,t,!0),this.oldProperties[""+e]=i,this.changedProperties[""+e]=t,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},e.prototype.serverDataBind=function(e,t,i,n){if(y()&&!this.parentObj.isComplexArraySetter){var o,s={},a=i?this.getParentKey(!0)+"."+e:e;if(-1!==a.indexOf(".")){var r=a.split(".");o=s;for(var l=0;l<r.length;l++){var d=l===r.length-1;o[r[parseInt(l.toString(),10)]]=d?t:{},o=d?o:o[r[parseInt(l.toString(),10)]]}}else s[""+a]={},o=s[""+a],s[""+a][""+e]=t;if(this.isParentArray){o.ejsAction=n||"none"}this.controlParent.serverDataBind(s)}},e.prototype.getParentKey=function(e){var t="",i=this.propName;if(this.isParentArray){t=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=e?n:n>0?n-1:0,i+=t=-1!==t?"-"+t:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+t),i},e}();var tt,it,nt=(tt=function(e,t){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}tt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ot=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},st=0,at=0;e.versionBasedStatePersistence=!1;var rt=function(t){function n(i,n){var o=t.call(this,i,n)||this;return o.randomId=v(),o.isStringTemplate=!1,o.needsID=!1,o.isReactHybrid=!1,u(o.enableRtl)&&o.setProperties({enableRtl:e.rightToLeft},!0),u(o.locale)&&o.setProperties({locale:e.defaultCulture},!0),o.moduleLoader=new $e(o),o.localObserver=new j(o),_.on("notifyExternalChange",o.detectFunction,o,o.randomId),f(n)||o.appendTo(),o}return nt(n,t),n.prototype.requiredModules=function(){return[]},n.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&(this.setPersistData(),this.detachUnloadEvent()),this.localObserver.destroy(),this.refreshing||(pe([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),t.prototype.destroy.call(this),this.moduleLoader.clean(),_.off("notifyExternalChange",this.detectFunction,this.randomId)))},n.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new j(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},n.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},n.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},n.prototype.getLocalData=function(){var t=this.getModuleName()+this.element.id;return e.versionBasedStatePersistence?window.localStorage.getItem(t+this.ej2StatePersistenceVersion):window.localStorage.getItem(t)},n.prototype.attachUnloadEvent=function(){this.handleUnload=this.handleUnload.bind(this),window.addEventListener("unload",this.handleUnload)},n.prototype.handleUnload=function(){this.setPersistData()},n.prototype.detachUnloadEvent=function(){window.removeEventListener("unload",this.handleUnload)},n.prototype.appendTo=function(e){if(u(e)||"string"!=typeof e?u(e)||(this.element=e):this.element=we(e,document),!u(this.element)){var i="e-"+this.getModuleName().toLowerCase();he([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),this.attachUnloadEvent());var n=a("ej2_instances",this.element);n&&-1!==n.indexOf(this)||t.prototype.addInstance.call(this),this.preRender(),this.injectModules();var o={schedule:"all",diagram:"all",PdfViewer:"all",grid:["logger"],richtexteditor:["link","table","image","audio","video","formatPainter","emojiPicker","pasteCleanup","htmlEditor","toolbar"],treegrid:["filter"],gantt:["tooltip"],chart:["Export","Zoom"]},s=this.getModuleName();if(this.requiredModules&&(!o[""+s]||"all"!==o[""+s]))for(var r=this.requiredModules(),l=0,d=this.moduleLoader.getNonInjectedModules(r);l<d.length;l++){var h=d[l],p=h.name?h.name:h.member;if(!o[""+s]||-1===o[""+s].indexOf(h.member)){var c=s.charAt(0).toUpperCase()+s.slice(1);console.warn('[WARNING] :: Module "'+p+'" is not available in '+c+" component! You either misspelled the module name or forgot to load it.")}}this.render(),this.mount?this.accessMount():this.trigger("created")}},n.prototype.renderComplete=function(e){if(y()){window.sfBlazor.renderComplete(this.element,e)}this.isRendered=!0},n.prototype.dataBind=function(){this.injectModules(),t.prototype.dataBind.call(this)},n.prototype.on=function(e,t,i){if("string"==typeof e)this.localObserver.on(e,t,i);else for(var n=0,o=e;n<o.length;n++){var s=o[n];this.localObserver.on(s.event,s.handler,s.context)}},n.prototype.off=function(e,t){if("string"==typeof e)this.localObserver.off(e,t);else for(var i=0,n=e;i<n.length;i++){var o=n[i];this.localObserver.off(o.event,o.handler)}},n.prototype.notify=function(e,t){!0!==this.isDestroyed&&this.localObserver.notify(e,t)},n.prototype.getInjectedModules=function(){return this.injectedModules},n.Inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<e.length;i++)-1===this.prototype.injectedModules.indexOf(e[parseInt(i.toString(),10)])&&this.prototype.injectedModules.push(e[parseInt(i.toString(),10)])},n.prototype.createElement=function(e,t,i){return de(e,t)},n.prototype.triggerStateChange=function(e,t){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:t})},n.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},n.prototype.detectFunction=function(e){var t=Object.keys(e);t.length&&(this[t[0]]=e[t[0]])},n.prototype.mergePersistData=function(){var t;u(t=e.versionBasedStatePersistence?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===t||this.setProperties(JSON.parse(t),!0)},n.prototype.setPersistData=function(){this.isDestroyed||(e.versionBasedStatePersistence?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},n.prototype.renderReactTemplates=function(e){u(e)||e()},n.prototype.clearTemplate=function(e,t){},n.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(st=0),it=this.pageID(location.href),at=history.length,e+"_"+it+"_"+st++},n.prototype.pageID=function(e){var t=0;if(0===e.length)return t;for(var i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return Math.abs(t)},n.prototype.isHistoryChanged=function(){return it!==this.pageID(location.href)||at!==history.length},n.prototype.addOnPersist=function(e){for(var t=this,i={},n=0,o=e;n<o.length;n++){var s,l=o[n];f(s=a(l,this))||r(l,this.getActualProperties(s),i)}return JSON.stringify(i,(function(e,i){return t.getActualProperties(i)}))},n.prototype.getActualProperties=function(e){return e instanceof et?a("properties",e):e},n.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},n.prototype.iterateJsonProperties=function(e,t){for(var n={},o=function(o){if(-1===t.indexOf(o)){var a=e[o];if("object"!==i(a)||a instanceof Array)n[""+o]=a;else{var r=t.filter((function(e){return new RegExp(o+".").test(e)})).map((function(e){return e.replace(o+".","")}));n[""+o]=s.iterateJsonProperties(s.getActualProperties(a),r)}}},s=this,a=0,r=Object.keys(e);a<r.length;a++){o(r[a])}return n},ot([ze(!1)],n.prototype,"enablePersistence",void 0),ot([ze()],n.prototype,"enableRtl",void 0),ot([ze()],n.prototype,"locale",void 0),n=ot([je],n)}(Ve);"undefined"!=typeof window&&window.addEventListener("popstate",(function(){st=0}));var lt,dt,ht,pt,ct=(lt=function(e,t){return(lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}lt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ut=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},ft={left:0,top:0,bottom:0,right:0},mt={isDragged:!1},gt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ct(t,e),ut([ze(0)],t.prototype,"left",void 0),ut([ze(0)],t.prototype,"top",void 0),t}(et),wt=function(e){function t(t,i){var o=e.call(this,i,t)||this;return o.dragLimit=n.getDefaultPosition(),o.borderWidth=n.getDefaultPosition(),o.padding=n.getDefaultPosition(),o.diffX=0,o.prevLeft=0,o.prevTop=0,o.dragProcessStarted=!1,o.eleTop=0,o.tapHoldTimer=0,o.externalInitialize=!1,o.diffY=0,o.parentScrollX=0,o.parentScrollY=0,o.droppables={},o.bind(),o}var n;return ct(t,e),n=t,t.prototype.bind=function(){this.toggleEvents(),ae.isIE&&he([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return c({},ft)},t.prototype.toggleEvents=function(e){var t;f(this.handle)||(t=we(this.handle,this.element));var i=this.enableTapHold&&ae.isDevice&&ae.isTouch?this.mobileInitialize:this.initialize;e?re.remove(t||this.element,ae.isSafari()?"touchstart":ae.touchStartEvent,i):re.add(t||this.element,ae.isSafari()?"touchstart":ae.touchStartEvent,i,this)},t.prototype.mobileInitialize=function(e){var t=this,i=e.currentTarget;this.tapHoldTimer=setTimeout((function(){t.externalInitialize=!0,t.removeTapholdTimer(),t.initialize(e,i)}),this.tapHoldThreshold),re.add(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.removeTapholdTimer,this),re.add(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),re.remove(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.removeTapholdTimer),re.remove(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(e,t){return u(e)?null:e[{vertical:"scrollHeight",horizontal:"scrollWidth"}[""+t]]>e[{vertical:"clientHeight",horizontal:"clientWidth"}[""+t]]&&("vertical"===t?e.scrollTop>0:e.scrollLeft>0)?("vertical"===t?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?e.scrollTop:e.scrollTop-this.parentScrollY),this.tempScrollHeight=e.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?e.scrollLeft:e.scrollLeft-this.parentScrollX),this.tempScrollWidth=e.scrollWidth),u(e)?e:this.getScrollableParent(e.parentNode,t)):this.getScrollableParent(e.parentNode,t)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(e,t){if(this.currentStateTarget=e.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=e.currentTarget||t,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"==typeof i&&(i=[i]);for(var n=0;n<i.length;n++)if(!u(be(e.target,i[parseInt(n.toString(),10)])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!f(e.changedTouches)&&"touchstart"!==e.type&&e.preventDefault(),this.element.setAttribute("aria-grabbed","true");var o=this.getCoordinates(e);if(this.initialPosition={x:o.pageX,y:o.pageY},!this.clone){var s=this.element.getBoundingClientRect();this.getScrollableValues(),e.clientX===e.pageX&&(this.parentScrollX=0),e.clientY===e.pageY&&(this.parentScrollY=0),this.relativeXPosition=o.pageX-(s.left+this.parentScrollX),this.relativeYPosition=o.pageY-(s.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(e):(re.add(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.intDragStart,this),re.add(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==e.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,re.trigger(document.documentElement,ae.isSafari()?"touchstart":ae.touchStartEvent,e)}},t.prototype.intDragStart=function(e){this.removeTapholdTimer();var t=!f(e.changedTouches);if(!t||1===e.changedTouches.length){var i,n=this.getCoordinates(e),o=getComputedStyle(this.element);this.margin={left:parseInt(o.marginLeft,10),top:parseInt(o.marginTop,10),right:parseInt(o.marginRight,10),bottom:parseInt(o.marginBottom,10)};var s=this.element;if(this.clone&&this.dragTarget){var a=be(e.target,this.dragTarget);u(a)||(s=a)}this.isReplaceDragEle&&(s=this.currentStateCheck(e.target,s)),this.offset=this.calculateParentPosition(s),this.position=this.getMousePosition(e,this.isDragScroll);var r=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(r*r+l*l)>=this.distance||this.externalInitialize){var d=this.getHelperElement(e);if(!d||u(d))return;t&&e.preventDefault();var h=this.helperElement=d;if(this.parentClientRect=this.calculateParentPosition(h.offsetParent),this.dragStart){var p={event:e,element:s,target:this.getProperTargetElement(e),bindEvents:y()?this.bindDragEvents.bind(this):null,dragElement:h};this.trigger("dragStart",p)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var c=getComputedStyle(s),m=parseFloat(c.marginTop);this.clone&&0!==m&&(i.top+=m),this.eleTop=isNaN(parseFloat(c.top))?0:parseFloat(c.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(i.top-=this.parentScrollY,i.left-=this.parentScrollX);var g=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(i.top+=this.dragArea.scrollTop),this.dragElePosition={top:i.top,left:i.left},Se(h,this.getDragPosition({position:"absolute",left:g.left,top:g.top})),re.remove(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.intDragStart),re.remove(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDestroy),y()||this.bindDragEvents(h)}}},t.prototype.bindDragEvents=function(e){ue(e)?(re.add(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.intDrag,this),re.add(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,e)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(e){for(this.top=e.offsetTop,this.left=e.offsetLeft,this.width=e.offsetWidth,this.height=e.offsetHeight;e.offsetParent;)e=e.offsetParent,this.top+=e.offsetTop,this.left+=e.offsetLeft;return this.top>=window.scrollY&&this.left>=window.scrollX&&this.top+this.height<=window.scrollY+window.innerHeight&&this.left+this.width<=window.scrollX+window.innerWidth},t.prototype.getProcessedPositionValue=function(e){return this.queryPositionInfo?this.queryPositionInfo(e):e},t.prototype.calculateParentPosition=function(e){if(u(e))return{left:0,top:0};var t=e.getBoundingClientRect(),i=getComputedStyle(e);return{left:t.left+window.scrollX-parseInt(i.marginLeft,10),top:t.top+window.scrollY-parseInt(i.marginTop,10)}},t.prototype.intDrag=function(e){if(f(e.changedTouches)||1===e.changedTouches.length){var t,i;this.clone&&e.changedTouches&&ae.isDevice&&ae.isTouch&&e.cancelable&&e.preventDefault(),this.position=this.getMousePosition(e,this.isDragScroll);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var o=this.getDocumentWidthHeight("Width");if(o<this.position.left&&(this.position.left=o),this.drag){var s=this.getProperTargetElement(e);this.trigger("drag",{event:e,element:this.element,target:s})}var a=this.checkTargetElement(e);if(a.target&&a.instance){var r=!0;this.hoverObject&&(this.hoverObject.instance!==a.instance?this.triggerOutFunction(e,a):r=!1),r&&(a.instance.dragData[this.scope]=this.droppables[this.scope],a.instance.intOver(e,a.target),this.hoverObject=a)}else this.hoverObject&&this.triggerOutFunction(e,a);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var d=this.parentClientRect.left,h=this.parentClientRect.top,p=this.getCoordinates(e),c=p.pageX,m=p.pageY,g=this.position.left-this.diffX,w=this.position.top-this.diffY,y=getComputedStyle(l);if(this.dragArea){if(this.enableAutoScroll&&this.setDragArea(),this.pageX!==c||this.skipDistanceCheck){var v=l.offsetWidth+(parseFloat(y.marginLeft)+parseFloat(y.marginRight));t=this.dragLimit.left>g&&g>0?this.dragLimit.left:this.dragLimit.right+window.scrollX<g+v&&g>0?g-(g-this.dragLimit.right)+window.scrollX-v:g<0?this.dragLimit.left:g}if(this.pageY!==m||this.skipDistanceCheck){var b=l.offsetHeight+(parseFloat(y.marginTop)+parseFloat(y.marginBottom));i=this.dragLimit.top>w&&w>0?this.dragLimit.top:this.dragLimit.bottom+window.scrollY<w+b&&w>0?w-(w-this.dragLimit.bottom)+window.scrollY-b:w<0?this.dragLimit.top:w}}else t=g,i=w;var S,A,x=h+this.borderWidth.top,V=d+this.borderWidth.left;if(this.dragProcessStarted&&(u(i)&&(i=this.prevTop),u(t)&&(t=this.prevLeft)),this.helperElement.classList.contains("e-treeview"))this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,S=i-x<0?this.dragLimit.top:i-this.borderWidth.top,A=t-V<0?this.dragLimit.left:t-this.borderWidth.left):(S=i-this.borderWidth.top,A=t-this.borderWidth.left);else if(this.dragArea){var C=this.helperElement.classList.contains("e-dialog");this.dragLimit.top=this.clone?this.dragLimit.top:0,S=i-x<0?this.dragLimit.top:i-x,A=t-V<0?C?t-(V-this.borderWidth.left):this.dragElePosition.left:t-V}else S=i-x,A=t-V;var I=parseFloat(getComputedStyle(this.element).marginTop);if(I>0&&(this.clone&&(S+=I,w<0&&(I+w>=0?S=I+w:S-=I),this.dragArea&&(S=this.dragLimit.bottom<S?this.dragLimit.bottom:S)),i-x<0))if(w+I+(l.offsetHeight-x)>=0){var k=this.dragLimit.top+w-x;k+I+x<0?S-=I+x:S=k}else S-=I+x;if(this.dragArea&&this.helperElement.classList.contains("e-treeview"))S=S+(b=l.offsetHeight+(parseFloat(y.marginTop)+parseFloat(y.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-b:S;this.enableScrollHandler&&!this.clone&&(S-=this.parentScrollY,A-=this.parentScrollX),this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(S+=this.dragArea.scrollTop),this.helperElement.classList.contains("e-grid")&&(S=this.position.top-this.parentClientRect.top-2,A=this.position.left-this.parentClientRect.left-2);var M=this.getProcessedPositionValue({top:S+"px",left:A+"px"});Se(l,this.getDragPosition(M)),this.elementInViewport(l)||!this.enableAutoScroll||this.helperElement.classList.contains("e-treeview")||this.helperElement.scrollIntoView();var T=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===T.length&&(T=this.getPathElements(e));var E=this.getScrollParent(T,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(E,S):this.elementInViewport(this.helperElement)||(0===(T=[].slice.call(document.querySelectorAll(":hover"))).length&&(T=this.getPathElements(e)),E=this.getScrollParent(T,!0),this.getScrollPosition(E,S))}this.dragProcessStarted=!0,this.prevLeft=t,this.prevTop=i,this.position.left=t,this.position.top=i,this.pageX=c,this.pageY=m}},t.prototype.getScrollParent=function(e,t){for(var i,n=t?e.reverse():e,o=n.length-1;o>=0;o--)if(("auto"===(i=window.getComputedStyle(n[parseInt(o.toString(),10)])["overflow-y"])||"scroll"===i)&&n[parseInt(o.toString(),10)].scrollHeight>n[parseInt(o.toString(),10)].clientHeight)return n[parseInt(o.toString(),10)];if("visible"===(i=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(e,t){if(e&&e===document.scrollingElement)e.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<t&&e.getBoundingClientRect().height+this.parentClientRect.top>t?e.scrollTop+=this.helperElement.clientHeight:e.scrollTop>t-this.helperElement.clientHeight&&(e.scrollTop-=this.helperElement.clientHeight);else if(e&&e!==document.scrollingElement){var i=document.scrollingElement.scrollTop,n=this.helperElement.clientHeight;e.clientHeight+e.getBoundingClientRect().top-n+i<t?e.scrollTop+=this.helperElement.clientHeight:e.getBoundingClientRect().top>t-n-i&&(e.scrollTop-=this.helperElement.clientHeight)}},t.prototype.getPathElements=function(e){var t=e.clientX>0?e.clientX:0,i=e.clientY>0?e.clientY:0;return document.elementsFromPoint(t,i)},t.prototype.triggerOutFunction=function(e,t){this.hoverObject.instance.intOut(e,t.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(e){var t=c({},e);return this.axis&&("x"===this.axis?delete t.top:"y"===this.axis&&delete t.left),t},t.prototype.getDocumentWidthHeight=function(e){var t=document.body,i=document.documentElement;return Math.max(t["scroll"+e],i["scroll"+e],t["offset"+e],i["offset"+e],i["client"+e])},t.prototype.intDragStop=function(e){if(this.dragProcessStarted=!1,f(e.changedTouches)||1===e.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(e.type)){if(this.dragStop){var t=this.getProperTargetElement(e);this.trigger("dragStop",{event:e,element:this.element,target:t,helper:this.helperElement})}this.intDestroy(e)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(e);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(e,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(e){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),re.remove(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.intDragStart),re.remove(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDragStop),re.remove(document,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDestroy),re.remove(document,ae.isSafari()?"touchmove":ae.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(e){return e&&(mt.isDragged=!mt.isDragged),mt.isDragged},t.prototype.setDragArea=function(){var e,t,n,o=0,s=0;if(n="string"===i(this.dragArea)?we(this.dragArea):this.dragArea){var a=n.getBoundingClientRect();e=n.scrollWidth?n.scrollWidth:a.right-a.left,t=n.scrollHeight?this.dragArea&&!u(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?n.clientHeight:n.scrollHeight:a.bottom-a.top;for(var r=["Top","Left","Bottom","Right"],l=getComputedStyle(n),d=0;d<r.length;d++){var h=r[parseInt(d.toString(),10)],p=l["border"+h+"Width"],c=l["padding"+h],f=h.toLowerCase();this.borderWidth[""+f]=isNaN(parseFloat(p))?0:parseFloat(p),this.padding[""+f]=isNaN(parseFloat(c))?0:parseFloat(c)}o=this.dragArea&&!u(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?a.top+document.scrollingElement.scrollTop:a.top,s=a.left,this.dragLimit.left=s+this.borderWidth.left+this.padding.left,this.dragLimit.top=n.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=s+e-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=o+t-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(e){var t,i=this.getCoordinates(e),n=this.helperElement.style.pointerEvents||"",o=-1!==e.type.indexOf("pointer")&&"safari"===ae.info.name&&parseInt(ae.info.version,10)>12;return g(e.target,this.helperElement)||-1!==e.type.indexOf("touch")||o?(this.helperElement.style.pointerEvents="none",t=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):t=e.target,t},t.prototype.currentStateCheck=function(e,t){return u(this.currentStateTarget)||this.currentStateTarget===e?u(t)?e:t:this.currentStateTarget},t.prototype.getMousePosition=function(e,t){var i,n,o=void 0!==e.srcElement?e.srcElement:e.target,s=this.getCoordinates(e),a=u(o.offsetParent);if(t?(i=this.clone?s.pageX:s.pageX+(a?0:o.offsetParent.scrollLeft)-this.relativeXPosition,n=this.clone?s.pageY:s.pageY+(a?0:o.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?s.pageX:s.pageX+window.scrollX-this.relativeXPosition,n=this.clone?s.pageY:s.pageY+window.scrollY-this.relativeYPosition),document.scrollingElement&&!t&&!this.clone){var r=document.scrollingElement,l=r.scrollHeight>0&&r.scrollHeight>r.clientHeight&&r.scrollTop>0;i=r.scrollWidth>0&&r.scrollWidth>r.clientWidth&&r.scrollLeft>0?i-r.scrollLeft:i,n=l?n-r.scrollTop:n}return{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(e){return e.type.indexOf("touch")>-1?e.changedTouches[0]:e},t.prototype.getHelperElement=function(e){var t;return this.clone?this.helper?t=this.helper({sender:e,element:this.target,currentTargetElement:this.currentStateTarget}):(t=de("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(t)):t=this.element,t},t.prototype.setGlobalDroppables=function(e,t,i){this.droppables[this.scope]=e?null:{draggable:t,helper:i,draggedElement:this.element}},t.prototype.checkTargetElement=function(e){var t=this.getProperTargetElement(e),i=this.getDropInstance(t);if(!i&&t&&!u(t.parentNode)){var n=be(t.parentNode,".e-droppable")||t.parentElement;n&&(i=this.getDropInstance(n))}return{target:t,instance:i}},t.prototype.getDropInstance=function(e){var t,i=e&&e.ej2_instances;if(i)for(var n=0,o=i;n<o.length;n++){var s=o[n];if("droppable"===s.getModuleName()){t=s;break}}return t},t.prototype.destroy=function(){this.toggleEvents(!0),e.prototype.destroy.call(this)},ut([He({},gt)],t.prototype,"cursorAt",void 0),ut([ze(!0)],t.prototype,"clone",void 0),ut([ze()],t.prototype,"dragArea",void 0),ut([ze()],t.prototype,"isDragScroll",void 0),ut([ze()],t.prototype,"isReplaceDragEle",void 0),ut([ze(!0)],t.prototype,"isPreventSelect",void 0),ut([Ue()],t.prototype,"drag",void 0),ut([Ue()],t.prototype,"dragStart",void 0),ut([Ue()],t.prototype,"dragStop",void 0),ut([ze(1)],t.prototype,"distance",void 0),ut([ze()],t.prototype,"handle",void 0),ut([ze()],t.prototype,"abort",void 0),ut([ze()],t.prototype,"helper",void 0),ut([ze("default")],t.prototype,"scope",void 0),ut([ze("")],t.prototype,"dragTarget",void 0),ut([ze()],t.prototype,"axis",void 0),ut([ze()],t.prototype,"queryPositionInfo",void 0),ut([ze(!1)],t.prototype,"enableTailMode",void 0),ut([ze(!1)],t.prototype,"skipDistanceCheck",void 0),ut([ze(!0)],t.prototype,"preventDefault",void 0),ut([ze(!1)],t.prototype,"enableAutoScroll",void 0),ut([ze(!1)],t.prototype,"enableTapHold",void 0),ut([ze(750)],t.prototype,"tapHoldThreshold",void 0),ut([ze(!1)],t.prototype,"enableScrollHandler",void 0),t=n=ut([je],t)}(Ve),yt=(dt=function(e,t){return(dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}dt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),vt=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},bt=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return yt(t,e),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){re.add(this.element,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,t){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:e,target:t,dragData:i}),this.mouseOver=!0}},t.prototype.intOut=function(e,t){this.mouseOver&&(this.trigger("out",{evt:e,target:t}),this.mouseOver=!1)},t.prototype.intDrop=function(e,t){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,o=this.dragData[this.scope],s=!!o&&(o.helper&&ue(o.helper));s&&(i=this.isDropArea(e,o.helper,t),this.accept&&(n=Ae(o.helper,this.accept))),s&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:e,target:i.target,droppedElement:o.helper,dragData:o}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,t,i){var n={canDrop:!0,target:i||e.target},o="touchend"===e.type;if(o||n.target===t){t.style.display="none";var s=o?e.changedTouches[0]:e,a=document.elementFromPoint(s.clientX,s.clientY);n.canDrop=!1,n.canDrop=g(a,this.element),n.canDrop&&(n.target=a),t.style.display=""}return n},t.prototype.destroy=function(){re.remove(this.element,ae.isSafari()?"touchend":ae.touchEndEvent,this.intDrop),e.prototype.destroy.call(this)},vt([ze()],t.prototype,"accept",void 0),vt([ze("default")],t.prototype,"scope",void 0),vt([Ue()],t.prototype,"drop",void 0),vt([Ue()],t.prototype,"over",void 0),vt([Ue()],t.prototype,"out",void 0),t=vt([je],t)}(Ve),St=(ht=function(e,t){return(ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ht(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),At=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},xt={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Vt=function(e){function t(t,n){var o=e.call(this,n,t)||this;return o.keyPressHandler=function(e){for(var t=e.altKey,n=e.ctrlKey,s=e.shiftKey,a=e.which,r=0,l=Object.keys(o.keyConfigs);r<l.length;r++)for(var d=l[r],h=0,p=o.keyConfigs[""+d].split(",");h<p.length;h++){var c=p[h],u=i.getKeyConfigData(c.trim());t===u.altKey&&n===u.ctrlKey&&s===u.shiftKey&&a===u.keyCode&&(e.action=d,o.keyAction&&o.keyAction(e))}},o.bind(),o}var i;return St(t,e),i=t,t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(e){if(e in this.configCache)return this.configCache[""+e];var t=e.toLowerCase().split("+"),n={altKey:-1!==t.indexOf("alt"),ctrlKey:-1!==t.indexOf("ctrl"),shiftKey:-1!==t.indexOf("shift"),keyCode:null};return t[t.length-1].length>1&&Number(t[t.length-1])?n.keyCode=Number(t[t.length-1]):n.keyCode=i.getKeyCode(t[t.length-1]),i.configCache[""+e]=n,n},t.getKeyCode=function(e){return xt[""+e]||e.toUpperCase().charCodeAt(0)},t.configCache={},At([ze({})],t.prototype,"keyConfigs",void 0),At([ze("keyup")],t.prototype,"eventName",void 0),At([Ue()],t.prototype,"keyAction",void 0),t=i=At([je],t)}(Ve),Ct=function(){function t(t,i,n){this.controlName=t,this.localeStrings=i,this.setLocale(n||e.defaultCulture)}return t.prototype.setLocale=function(e){var i=this.intGetControlConstant(t.locale,e);this.currentLocale=i||this.localeStrings},t.load=function(e){this.locale=c(this.locale,e,{},!0)},t.prototype.getConstant=function(e){return u(this.currentLocale[""+e])?this.localeStrings[""+e]||"":this.currentLocale[""+e]},t.prototype.intGetControlConstant=function(e,t){return e[""+t]?e[""+t][this.controlName]:null},t.locale={},t}(),It=(pt=function(e,t){return(pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}pt(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),kt=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return It(t,e),kt([ze(50)],t.prototype,"swipeThresholdDistance",void 0),t}(et),Tt=/(Up|Down)/,Et=function(e){function t(t,i){var n=e.call(this,i,t)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(e){if(!0===n.touchAction){var t=n.updateChangeTouches(e);void 0!==e.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY},n.startEventData=t,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout((function(){n.tapHoldEvent(e)}),n.tapHoldThreshold),re.add(n.element,ae.touchMoveEvent,n.moveEvent,n),re.add(n.element,ae.touchEndEvent,n.endEvent,n),re.add(n.element,ae.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(e){var t=n.updateChangeTouches(e);n.movedPoint=t,n.isTouchMoved=!(t.clientX===n.startPoint.clientX&&t.clientY===n.startPoint.clientY);var i={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(e),i=c(i,{},{startEvents:n.startEventData,originalEvent:e,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(t)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:t.clientX,clientY:t.clientY})},n.cancelEvent=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(e),re.remove(n.element,ae.touchCancelEvent,n.cancelEvent)},n.endEvent=function(e){n.swipeFn(e),n.isTouchMoved||"function"==typeof n.tap&&(n.trigger("tap",{originalEvent:e,tapCount:++n.tapCount}),n.timeOutTap=setTimeout((function(){n.tapCount=0}),n.tapThreshold)),n.modeclear()},n.swipeFn=function(e){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var t=n.updateChangeTouches(e),i=t.clientX-n.startPoint.clientX,o=t.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),o=Math.floor(o<0?-1*o:i),n.isTouchMoved=i>1||o>1,/Firefox/.test(ae.userAgent)&&0===t.clientX&&0===t.clientY&&"mouseup"===e.type&&(n.isTouchMoved=!1),n.endPoint=t,n.calcPoints(e);var s={originalEvent:e,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(t)};if(n.isTouchMoved){var a=void 0,r=n.swipeSettings.swipeThresholdDistance;a=c(a,n.defaultArgs,s);var l=!1,d=n.element,h=n.isScrollable(d),p=Tt.test(n.movedDirection);(r<n.distanceX&&!p||r<n.distanceY&&p)&&(l=!h||n.checkSwipe(d,p)),l&&n.trigger("swipe",a)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout((function(){n.touchAction=!0}),"function"!=typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),re.remove(n.element,ae.touchMoveEvent,n.moveEvent),re.remove(n.element,ae.touchEndEvent,n.endEvent),re.remove(n.element,ae.touchCancelEvent,n.cancelEvent)},n.bind(),n}return It(t,e),t.prototype.onPropertyChanged=function(e,t){},t.prototype.bind=function(){this.wireEvents(),ae.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),e.prototype.destroy.call(this)},t.prototype.wireEvents=function(){re.add(this.element,ae.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){re.remove(this.element,ae.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var t=getComputedStyle(e),i=t.overflow+t.overflowX+t.overflowY;return!!/(auto|scroll)/.test(i)},t.prototype.tapHoldEvent=function(e){var t;this.tapCount=0,this.touchAction=!0,re.remove(this.element,ae.touchMoveEvent,this.moveEvent),re.remove(this.element,ae.touchEndEvent,this.endEvent),t={originalEvent:e},this.trigger("tapHold",t),re.remove(this.element,ae.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=t.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=t.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var t=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(t.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(t.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=t.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=t.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var t=e.clientX,i=e.clientY,n=Date.now(),o=t-this.startPoint.clientX,s=i-this.startPoint.clientX,a=n-this.tStampStart;return Math.sqrt(o*o+s*s)/a},t.prototype.checkSwipe=function(e,t){var i=["scroll","offset"],n=t?["Height","Top"]:["Width","Left"];return e[i[0]+n[0]]<=e[i[1]+n[0]]||(0===e[i[0]+n[1]]||e[i[1]+n[0]]+e[i[0]+n[1]]>=e[i[0]+n[0]])},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},kt([Ue()],t.prototype,"tap",void 0),kt([Ue()],t.prototype,"tapHold",void 0),kt([Ue()],t.prototype,"swipe",void 0),kt([Ue()],t.prototype,"scroll",void 0),kt([ze(350)],t.prototype,"tapThreshold",void 0),kt([ze(750)],t.prototype,"tapHoldThreshold",void 0),kt([He({},Mt)],t.prototype,"swipeSettings",void 0),t=kt([je],t)}(Ve),Bt=new RegExp("\\n|\\r|\\s\\s+","g"),Pt=new RegExp(/'|"/g),Dt=new RegExp("if ?\\("),Nt=new RegExp("else if ?\\("),Ft=new RegExp("else"),Lt=new RegExp("for ?\\("),Ot=new RegExp("(/if|/for)"),Rt=new RegExp("\\((.*)\\)",""),zt=new RegExp("^[0-9]+$","g"),Ht=new RegExp("[\\w\"'.\\s+]+","g"),Ut=new RegExp('"(.*?)"',"g"),jt=new RegExp("[\\w\"'@#$.\\s-+]+","g"),_t=new RegExp("\\${([^}]*)}","g"),Wt=/^\..*/gm,qt=/\\/gi,Zt=/\\\\/gi,Yt=new RegExp("[\\w\"'@#$.\\s+]+","g"),Xt=/\window\./gm;function Gt(e,t,i){if("function"==typeof e)return e;var n=function(e,t,i,n){var o=0,s=[],a=e.match(/class="([^"]+|)\s{2}/g),r="";a&&a.forEach((function(t){r=t.replace(/\s\s+/g," "),e=e.replace(t,r)}));if(_t.test(e)){for(var l=!1,d="",h=0;h<e.length;h++)"$"===e[h+""]&&"{"===e[h+1]?l=!0:"}"===e[h+""]&&(l=!1),d+='"'!==e[h+""]||l?e[h+""]:'\\"';e=d}else e=e.replace(/\\?"/g,'\\"');return e.replace(Bt,"").replace(Ut,"'$1'").replace(_t,(function(e,a,r,l){var d=a.match(Rt);if(d){var h=d[1];if(Nt.test(a))a='";} '+a.replace(d[1],h.replace(Ht,(function(e){return Jt(e=e.trim(),!Pt.test(e)&&-1===s.indexOf(e),t,s,n)})))+'{ \n str = str + "';else if(Dt.test(a))a='"; '+a.replace(d[1],h.replace(jt,(function(e){return $t(e,t,s,n)})))+'{ \n str = str + "';else if(Lt.test(a)){var p=d[1].split(" of ");a='"; '+a.replace(d[1],(function(e){return s.push(p[0]),s.push(p[0]+"Index"),"var i"+(o+=1)+"=0; i"+o+" < "+Jt(p[1],!0,t,s,n)+".length; i"+o+"++"}))+"{ \n "+p[0]+"= "+Jt(p[1],!0,t,s,n)+"[i"+o+"]; \n var "+p[0]+"Index=i"+o+'; \n str = str + "'}else{var c=a.split("("),u=i&&i.hasOwnProperty(c[0])?"this.":"global";u=/\./.test(c[0])?"":u;var f=d[1].split(",");0===d[1].length||/data/.test(f[0])||/window./.test(f[0])||(d[1]="global"===u?t+"."+d[1]:d[1]);if(Xt.test(a)&&/\]\./gm.test(a)||/@|\$|#/gm.test(a)){/@|\$|#|\]\./gm.test(a)&&(a='"+ '+("global"===u?"":u)+a.replace(d[1],h.replace(Yt,(function(e){return $t(e,t,s,n)})))+'+ "')}else a='" + '+("global"===u?"":u)+a.replace(h,Jt(d[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==u,t,s,n))+'+"'}}else Ft.test(a)?a='"; '+a.replace(Ft,'} else { \n str = str + "'):a.match(Ot)?a=a.replace(Ot,'"; \n } \n str = str + "'):/@|#|\$/gm.test(a)?(a.match(qt)&&(a=Qt(a)),a='"+'+Kt(a,-1===s.indexOf(a),t,s)+'"]+"'):a=a.match(qt)?'"+'+Kt(a=Qt(a),-1===s.indexOf(a),t,s)+'"]+"':""!==a?'"+'+Jt(a.replace(/,/gi,"+"+t+"."),-1===s.indexOf(a),t,s,n)+'+"':"${}";return a}))}(e,"data",t,i);return new Function("data",'var str="'+n+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-■\\s]+)['])/g);\n        var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-■\\s]+)['])/g);\n        if(str.match(valueRegEx)){\n            var check = str.match(valueRegEx);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(valueRegEx)[i].split('value=')[1];\n                var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                str1 = str1.replace(check1, change);\n            }\n            str = str.replace(str, str1);\n        }\n        else if (str.match(/(?:href='')/) === null) {\n            if(str.match(hrefRegex)) {\n                var check = str.match(hrefRegex);\n                var str1 = str;\n                for (var i=0; i < check.length; i++) {\n                    var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                    if (check1) {\n                        var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                        change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                        str1 = str1.replace(check1, change);\n                    }\n                }\n                str = str.replace(str, str1);\n            }\n        }\n         return str;").bind(t)}function Jt(e,t,i,n,o){return!t||zt.test(e)||-1!==n.indexOf(e.split(".")[0])||o||"true"===e||"false"===e?e:i+"."+e}function Kt(e,t,i,n){return t&&!zt.test(e)&&-1===n.indexOf(e.split(".")[0])?i+'["'+e:e}function Qt(e){return e=e.match(Zt)?e:e.replace(qt,"\\\\")}function $t(e,t,i,n){e=e.trim();if(/\window\./gm.test(e))return e;var o=/'|"/gm;return/@|\$|#/gm.test(e)&&(e=Kt(e,-1===i.indexOf(e),t,i)+'"]'),Wt.test(e)?function(e,t,i,n){return!t||zt.test(e)||-1!==n.indexOf(e.split(".")[0])||/^\..*/gm.test(e)?e:i+"."+e}(e,!o.test(e)&&-1===i.indexOf(e),t,i):Jt(e,!o.test(e)&&-1===i.indexOf(e),t,i,n)}var ei=/^[\n\r.]+<tr|^<tr/,ti=/^[\n\r.]+<svg|^<path|^<g/,ii={};function ni(){return"-"+Math.random().toString(36).substring(2,5)}var oi={compile:(new(function(){function e(){}return e.prototype.compile=function(e,t,i){return void 0===t&&(t={}),Gt(e,t)},e}())).compile},si=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],ai=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],ri=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","oncanplay","oncanplaythrough","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeypress","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onstart","onpropertychange","oncopy","ontoggle","onpointerout","onpointermove","onpointerleave","onpointerenter","onpointerrawupdate","onpointerover","onbeforecopy","onbeforecut","onbeforeinput"],li=function(){function e(){}return e.beforeSanitize=function(){return{selectors:{tags:si,attributes:ai}}},e.sanitize=function(e){if(u(e))return e;var t=this.beforeSanitize();return this.serializeValue(t,e)},e.serializeValue=function(e,t){this.removeAttrs=e.selectors.attributes,this.removeTags=e.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=t,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),this.wrapElement=null,i.replace(/&amp;/g,"&")},e.removeElement=function(){for(var e=this.wrapElement.children,t=0;t<e.length;t++)for(var i=e[parseInt(t.toString(),10)].attributes,n=0;n<i.length;n++)this.wrapElement.children[parseInt(t.toString(),10)].removeAttribute(i[parseInt(n.toString(),10)].localName)},e.removeXssTags=function(){var e=this.wrapElement.querySelectorAll(this.removeTags.join(","));e.length>0&&e.forEach((function(e){me(e)}))},e.removeJsEvents=function(){var e=this.wrapElement.querySelectorAll("["+ri.join("],[")+"]");e.length>0&&e.forEach((function(e){ri.forEach((function(t){e.hasAttribute(t)&&e.removeAttribute(t)}))}))},e.removeXssAttrs=function(){var e=this;this.removeAttrs.forEach((function(t,i){var n=e.wrapElement.querySelectorAll(t.selector);n.length>0&&n.forEach((function(e){e.removeAttribute(t.attribute)}))}))},e}();return e.blazorCultureFormats=Y,e.Ajax=G,e.Fetch=J,e.Animation=Xe,e.rippleEffect=function(t,i,n){var o=function(e){return{selector:e&&e.selector?e.selector:null,ignore:e&&e.ignore?e.ignore:null,rippleFlag:e&&e.rippleFlag,isCenterRipple:e&&e.isCenterRipple,duration:e&&e.duration?e.duration:350}}(i);return!1===o.rippleFlag||void 0===o.rippleFlag&&!e.isRippleEnabled?function(){}:(t.setAttribute("data-ripple","true"),re.add(t,"mousedown",Ge,{parent:t,rippleOptions:o}),re.add(t,"mouseup",Je,{parent:t,rippleOptions:o,done:n}),re.add(t,"mouseleave",Ke,{parent:t,rippleOptions:o}),ae.isPointer&&re.add(t,"transitionend",Ke,{parent:t,rippleOptions:o}),function(){t.removeAttribute("data-ripple"),re.remove(t,"mousedown",Ge),re.remove(t,"mouseup",Je),re.remove(t,"mouseleave",Ke),re.remove(t,"transitionend",Ke)})},e.enableRipple=function(t){return e.isRippleEnabled=t,e.isRippleEnabled},e.setGlobalAnimation=function(t){e.animationMode=t},e.Base=Ve,e.getComponent=function(e,t){var i,n,o="string"==typeof e?document.getElementById(e):e;for(n=0;n<o.ej2_instances.length;n++){if(i=o.ej2_instances[parseInt(n.toString(),10)],"string"==typeof t){if(t===i.getModuleName())return i}else if(i instanceof t)return i}},e.Browser=ae,e.Component=rt,e.ChildProperty=et,e.Position=gt,e.Draggable=wt,e.Droppable=bt,e.EventHandler=re,e.onIntlChange=_,e.cldrData=W,e.Internationalization=q,e.setCulture=function(t){e.defaultCulture=t,_.notify("notifyExternalChange",{locale:e.defaultCulture})},e.loadCldr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=e;i<n.length;i++){var o=n[i];c(W,o,{},!0)}},e.enableRtl=function(t){void 0===t&&(t=!0),e.rightToLeft=t,_.notify("notifyExternalChange",{enableRtl:e.rightToLeft})},e.KeyboardEvents=Vt,e.L10n=Ct,e.ModuleLoader=$e,e.Property=ze,e.Complex=He,e.ComplexFactory=function(e){return function(t,i){var n={set:Pe({},i,e),get:Be({},i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),_e(t,i,"complexProp",{},e)}},e.Collection=function(e,t){return function(i,n){var o={set:Ne(e,n,t),get:De(e,n,t),enumerable:!0,configurable:!0};Object.defineProperty(i,n,o),_e(i,n,"colProp",e,t)}},e.CollectionFactory=function(e){return function(t,i){var n={set:Fe([],i,e),get:Le([],i,e),enumerable:!0,configurable:!0};Object.defineProperty(t,i,n),_e(t,i,"colProp",{},e)}},e.Event=Ue,e.NotifyPropertyChanges=je,e.SwipeSettings=Mt,e.Touch=Et,e.blazorTemplates=ii,e.getRandomId=ni,e.compile=function(e,t,i){var n=oi.compile(e,t,i);return function(e,t,i,o,s,a,r,l){var d=n(e,t,i,r,l);if(y()&&!s){var h=o+ni();if(ii[""+o]||(ii[""+o]=[]),u(a))e.BlazorTemplateId=h,ii[""+o].push(e);else for(var p=0,c=Object.keys(ii[""+o][parseInt(a.toString(),10)]);p<c.length;p++){var f=c[p];"BlazorTemplateId"!==f&&e[""+f]&&(ii[""+o][parseInt(a.toString(),10)][""+f]=e[""+f]),"BlazorTemplateId"===f&&(h=ii[""+o][parseInt(a.toString(),10)][""+f])}return"rowTemplate"===i?[de("tr",{id:h,className:"e-blazor-template"})]:[de("div",{id:h,className:"e-blazor-template"})]}return"string"==typeof d?ti.test(d)?de("svg",{innerHTML:d}).childNodes:de(ei.test(d)?"table":"div",{innerHTML:d}).childNodes:d}},e.updateBlazorTemplate=function(e,t,i,n,o){if(y()){window.sfBlazor.updateTemplate(t,ii[""+e],e,i,o),!1!==n&&(ii[""+e]=[])}},e.resetBlazorTemplate=function(e,t,i){var n=document.getElementById(e);if(n)for(var o=n.getElementsByClassName("blazor-inner-template"),s=0;s<o.length;s++){var a=" ";a=u(i)?o[parseInt(s.toString(),10)].getAttribute("data-templateId"):o[parseInt(i.toString(),10)].getAttribute("data-templateId");var r=document.getElementById(a);if(r)for(var l=r.childNodes.length,d=0;d<l;d++)u(i)?o[parseInt(s.toString(),10)].appendChild(r.childNodes[0]):(o[parseInt(i.toString(),10)].appendChild(r.childNodes[0]),s=o.length)}},e.initializeCSPTemplate=function(e,t){var i;return e.prototype.CSPTemplate=!0,u(t)?i=e:(i=e.bind(t)).prototype=Object.create(e.prototype),i},e.createInstance=o,e.setImmediate=s,e.getValue=a,e.setValue=r,e.deleteObject=l,e.containerObject=d,e.isObject=h,e.merge=p,e.extend=c,e.isNullOrUndefined=u,e.isUndefined=f,e.getUniqueID=function(e){return e+"_"+t++},e.debounce=m,e.compareElementParent=g,e.throwError=w,e.print=function(e,t){var i=document.createElement("div"),n=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),o=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(o.length)for(var s=0,a=o.length;s<a;s++)n.push(o[parseInt(s.toString(),10)]);var r="";u(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),i.appendChild(e.cloneNode(!0));var l=0;for(a=n.length;l<a;l++)r+=n[parseInt(l.toString(),10)].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+r+"</head><body>"+i.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var d=setInterval((function(){t.ready&&(t.print(),t.close(),clearInterval(d))}),500);return t},e.formatUnit=function(e){var t=e+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"},e.enableBlazorMode=function(){n=!0},e.isBlazor=y,e.getElement=function(e){return e instanceof Node||!y()||u(e.xPath)?e:document.evaluate(e.xPath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},e.getInstance=function(e,t){var i="string"==typeof e?document.querySelector(e):e;if(i.ej2_instances)for(var n=0,o=i.ej2_instances;n<o.length;n++){var s=o[n];if(s instanceof t)return s}return null},e.uniqueID=v,e.createElement=de,e.addClass=he,e.removeClass=pe,e.isVisible=ue,e.prepend=function(e,t,i){for(var n=document.createDocumentFragment(),o=0,s=e;o<s.length;o++){var a=s[o];n.appendChild(a)}return t.insertBefore(n,t.firstElementChild),i&&fe(t),e},e.append=function(e,t,i){var n=document.createDocumentFragment();if(e instanceof NodeList)for(;e.length>0;)n.appendChild(e[0]);else for(var o=0,s=e;o<s.length;o++){var a=s[o];n.appendChild(a)}return t.appendChild(n),i&&fe(t),e},e.detach=me,e.remove=function(e){var t=e.parentNode;re.clearEvents(e),t.removeChild(e)},e.attributes=ge,e.select=we,e.selectAll=ye,e.closest=be,e.getAttributeOrDefault=function(e,t,i){var n,o=h(e);return u(n=o?a("attributes."+t,e):e.getAttribute(t))&&i&&(o?e.attributes[""+t]=i:e.setAttribute(t,i.toString()),n=i),n},e.setStyleAttribute=Se,e.classList=function(e,t,i){he([e],t),pe([e],i)},e.matches=Ae,e.Observer=j,e.SanitizeHtmlHelper=li,e.componentList=["grid","pivotview","treegrid","spreadsheet","rangeNavigator","DocumentEditor","listbox","inplaceeditor","PdfViewer","richtexteditor","DashboardLayout","chart","stockChart","circulargauge","diagram","heatmap","lineargauge","maps","slider","smithchart","barcode","sparkline","treemap","bulletChart","kanban","daterangepicker","schedule","gantt","signature","query-builder","drop-down-tree","carousel","filemanager","uploader","accordion","tab","treeview"],e.updateCSSText=function(e,t){var i=e.style.cssText.split(";").reduce((function(e,t){var i=t.split(":");return 2===i.length&&(e[i[0].trim()]=i[1].trim()),e}),{}),n=t.split(";").reduce((function(e,t){var i=t.split(":");return 2===i.length&&(e[i[0].trim()]=i[1].trim()),e}),{}),o=document.createElement("div");Object.keys(i).concat(Object.keys(n)).forEach((function(e){n[e]?o.style.setProperty(e,n[e]):o.style.setProperty(e,i[e])})),e.style.cssText=o.style.cssText},e}({})},"./modules/drawings.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{},window.sf.drawings=function(e){"use strict";var t,n,o,s,a,r,l,d=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),h=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},p=function(e){switch(e.type){case"Linear":return g;case"Radial":return w;default:return g}},c=function(e,t,i,n){this.left=e,this.right=t,this.top=i,this.bottom=n},u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),h([sf.base.Property(0)],t.prototype,"left",void 0),h([sf.base.Property(0)],t.prototype,"right",void 0),h([sf.base.Property(0)],t.prototype,"top",void 0),h([sf.base.Property(0)],t.prototype,"bottom",void 0),t}(sf.base.ChildProperty),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),t.prototype.getClassName=function(){return"Stop"},h([sf.base.Property("")],t.prototype,"color",void 0),h([sf.base.Property(0)],t.prototype,"offset",void 0),h([sf.base.Property(1)],t.prototype,"opacity",void 0),t}(sf.base.ChildProperty),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),h([sf.base.Collection([],f)],t.prototype,"stops",void 0),h([sf.base.Property("None")],t.prototype,"type",void 0),h([sf.base.Property("")],t.prototype,"id",void 0),t}(sf.base.ChildProperty),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),h([sf.base.Property(0)],t.prototype,"x1",void 0),h([sf.base.Property(0)],t.prototype,"x2",void 0),h([sf.base.Property(0)],t.prototype,"y1",void 0),h([sf.base.Property(0)],t.prototype,"y2",void 0),t}(m),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),h([sf.base.Property(0)],t.prototype,"cx",void 0),h([sf.base.Property(0)],t.prototype,"cy",void 0),h([sf.base.Property(0)],t.prototype,"fx",void 0),h([sf.base.Property(0)],t.prototype,"fy",void 0),h([sf.base.Property(50)],t.prototype,"r",void 0),t}(m),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),h([sf.base.Property("white")],t.prototype,"fill",void 0),h([sf.base.Property("black")],t.prototype,"strokeColor",void 0),h([sf.base.Property("")],t.prototype,"strokeDashArray",void 0),h([sf.base.Property(1)],t.prototype,"strokeWidth",void 0),h([sf.base.Property(1)],t.prototype,"opacity",void 0),h([sf.base.ComplexFactory(p)],t.prototype,"gradient",void 0),t}(sf.base.ChildProperty),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),h([sf.base.Property("transparent")],t.prototype,"fill",void 0),t}(y),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return d(t,e),h([sf.base.Property("black")],t.prototype,"color",void 0),h([sf.base.Property("Arial")],t.prototype,"fontFamily",void 0),h([sf.base.Property(12)],t.prototype,"fontSize",void 0),h([sf.base.Property(!1)],t.prototype,"italic",void 0),h([sf.base.Property(!1)],t.prototype,"bold",void 0),h([sf.base.Property("CollapseSpace")],t.prototype,"whiteSpace",void 0),h([sf.base.Property("WrapWithOverflow")],t.prototype,"textWrapping",void 0),h([sf.base.Property("Center")],t.prototype,"textAlign",void 0),h([sf.base.Property("None")],t.prototype,"textDecoration",void 0),h([sf.base.Property("Wrap")],t.prototype,"textOverflow",void 0),h([sf.base.Property("transparent")],t.prototype,"fill",void 0),t}(y);(n=e.RotateTransform||(e.RotateTransform={}))[n.Self=1]="Self",n[n.Parent=2]="Parent",(o=e.ElementAction||(e.ElementAction={}))[o.None=0]="None",o[o.ElementIsPort=2]="ElementIsPort",o[o.ElementIsGroup=4]="ElementIsGroup",(s=e.ConnectorConstraints||(e.ConnectorConstraints={}))[s.None=1]="None",s[s.Select=2]="Select",s[s.Delete=4]="Delete",s[s.Drag=8]="Drag",s[s.DragSourceEnd=16]="DragSourceEnd",s[s.DragTargetEnd=32]="DragTargetEnd",s[s.DragSegmentThumb=64]="DragSegmentThumb",s[s.AllowDrop=128]="AllowDrop",s[s.Bridging=256]="Bridging",s[s.BridgeObstacle=512]="BridgeObstacle",s[s.InheritBridging=1024]="InheritBridging",s[s.PointerEvents=2048]="PointerEvents",s[s.Tooltip=4096]="Tooltip",s[s.InheritTooltip=8192]="InheritTooltip",s[s.Interaction=4218]="Interaction",s[s.ReadOnly=16384]="ReadOnly",s[s.Default=11838]="Default",(a=e.ThumbsConstraints||(e.ThumbsConstraints={}))[a.Rotate=2]="Rotate",a[a.ConnectorSource=4]="ConnectorSource",a[a.ConnectorTarget=8]="ConnectorTarget",a[a.ResizeNorthEast=16]="ResizeNorthEast",a[a.ResizeEast=32]="ResizeEast",a[a.ResizeSouthEast=64]="ResizeSouthEast",a[a.ResizeSouth=128]="ResizeSouth",a[a.ResizeSouthWest=256]="ResizeSouthWest",a[a.ResizeWest=512]="ResizeWest",a[a.ResizeNorthWest=1024]="ResizeNorthWest",a[a.ResizeNorth=2048]="ResizeNorth",a[a.Default=4094]="Default",(r=e.SelectorConstraints||(e.SelectorConstraints={}))[r.None=1]="None",r[r.ConnectorSourceThumb=2]="ConnectorSourceThumb",r[r.ConnectorTargetThumb=4]="ConnectorTargetThumb",r[r.ResizeSouthEast=8]="ResizeSouthEast",r[r.ResizeSouthWest=16]="ResizeSouthWest",r[r.ResizeNorthEast=32]="ResizeNorthEast",r[r.ResizeNorthWest=64]="ResizeNorthWest",r[r.ResizeEast=128]="ResizeEast",r[r.ResizeWest=256]="ResizeWest",r[r.ResizeSouth=512]="ResizeSouth",r[r.ResizeNorth=1024]="ResizeNorth",r[r.Rotate=2048]="Rotate",r[r.UserHandle=4096]="UserHandle",r[r.ToolTip=8192]="ToolTip",r[r.ResizeAll=2046]="ResizeAll",r[r.All=16382]="All",(l=e.NoOfSegments||(e.NoOfSegments={}))[l.Zero=0]="Zero",l[l.One=1]="One",l[l.Two=2]="Two",l[l.Three=3]="Three",l[l.Four=4]="Four",l[l.Five=5]="Five";var S,A=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.clone=function(){return new e(this.width,this.height)},e}(),x=function(){function e(e,t,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===e||void 0===t?(e=t=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=e,this.y=t,this.width=i,this.height=n}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!1,configurable:!0}),e.prototype.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},e.prototype.uniteRect=function(e){var t=Math.max(Number.NaN===this.right||this.x===Number.MAX_VALUE?e.right:this.right,e.right),i=Math.max(Number.NaN===this.bottom||this.y===Number.MAX_VALUE?e.bottom:this.bottom,e.bottom);return this.x=Math.min(this.left,e.left),this.y=Math.min(this.top,e.top),this.width=t-this.x,this.height=i-this.y,this},e.prototype.unitePoint=function(e){if(this.x===Number.MAX_VALUE)return this.x=e.x,void(this.y=e.y);var t=Math.min(this.left,e.x),i=Math.min(this.top,e.y),n=Math.max(this.right,e.x),o=Math.max(this.bottom,e.y);this.x=t,this.y=i,this.width=n-this.x,this.height=o-this.y},e.prototype.intersection=function(t){if(this.intersects(t)){var i=Math.max(this.left,t.left),n=Math.max(this.top,t.top);return new e(i,n,Math.min(this.right,t.right)-i,Math.min(this.bottom,t.bottom)-n)}return e.empty},e.prototype.Inflate=function(e){return this.x-=e,this.y-=e,this.width+=2*e,this.height+=2*e,this},e.prototype.intersects=function(e){return!(this.right<e.left||this.left>e.right||this.top>e.bottom||this.bottom<e.top)},e.prototype.containsRect=function(e){return this.left<=e.left&&this.right>=e.right&&this.top<=e.top&&this.bottom>=e.bottom},e.prototype.containsPoint=function(e,t){return void 0===t&&(t=0),this.left-t<=e.x&&this.right+t>=e.x&&this.top-t<=e.y&&this.bottom+t>=e.y},e.prototype.toPoints=function(){var e=[];return e.push(this.topLeft),e.push(this.topRight),e.push(this.bottomLeft),e.push(this.bottomRight),e},e.toBounds=function(t){for(var i=new e,n=0,o=t;n<o.length;n++){var s=o[n];i.unitePoint(s)}return i},e.prototype.scale=function(e,t){this.width*=e,this.height*=t},e.prototype.offset=function(e,t){this.x+=e,this.y+=t},e.empty=new e(Number.MAX_VALUE,Number.MIN_VALUE,0,0),e}();(S=e.MatrixTypes||(e.MatrixTypes={}))[S.Identity=0]="Identity",S[S.Translation=1]="Translation",S[S.Scaling=2]="Scaling",S[S.Unknown=4]="Unknown";var V=function(e,t,i,n,o,s,a){this.m11=e,this.m12=t,this.m21=i,this.m22=n,this.offsetX=o,this.offsetY=s,this.type=a};function C(){return new V(1,0,0,1,0,0,e.MatrixTypes.Identity)}function I(t,i){var n=function(t,i,n){switch(t.type){case e.MatrixTypes.Identity:break;case e.MatrixTypes.Translation:i+=t.offsetX,n+=t.offsetY;break;case e.MatrixTypes.Scaling:i*=t.m11,n*=t.m22;break;case e.MatrixTypes.Translation|e.MatrixTypes.Scaling:i*=t.m11,i+=t.offsetX,n*=t.m22,n+=t.offsetY;break;default:var o=n*t.m21+t.offsetX,s=i*t.m12+t.offsetY;i*=t.m11,i+=o,n*=t.m22,n+=s}return{x:i,y:n}}(t,i.x,i.y);return{x:Math.round(100*n.x)/100,y:Math.round(100*n.y)/100}}function k(t,i,n,o){M(t,function(t,i,n){var o=C(),s=Math.sin(t),a=Math.cos(t),r=i*(1-a)+n*s,l=n*(1-a)-i*s;return o.type=e.MatrixTypes.Unknown,T(o,a,s,-s,a,r,l),o}(.017453292519943295*(i%=360),n||0,o||0))}function M(t,i){var n=t.type,o=i.type;if(o!==e.MatrixTypes.Identity){if(n===e.MatrixTypes.Identity)return E(t,i),void(t.type=i.type);if(o===e.MatrixTypes.Translation)return t.offsetX+=i.offsetX,t.offsetY+=i.offsetY,void(n!==e.MatrixTypes.Unknown&&(t.type|=e.MatrixTypes.Translation));if(n!==e.MatrixTypes.Translation){var s=n<<4|o;switch(s){case 34:return t.m11*=i.m11,void(t.m22*=i.m22);case 35:return t.m11*=i.m11,t.m22*=i.m22,t.offsetX=i.offsetX,t.offsetY=i.offsetY,void(t.type=e.MatrixTypes.Translation|e.MatrixTypes.Scaling);case 36:break;default:switch(s){case 50:return t.m11*=i.m11,t.m22*=i.m22,t.offsetX*=i.m11,void(t.offsetY*=i.m22);case 51:return t.m11*=i.m11,t.m22*=i.m22,t.offsetX=i.m11*t.offsetX+i.offsetX,void(t.offsetY=i.m22*t.offsetY+i.offsetY);case 52:break;default:switch(s){case 66:case 67:case 68:break;default:return}}}var a=C();return T(a,t.m11*i.m11+t.m12*i.m21,t.m11*i.m12+t.m12*i.m22,t.m21*i.m11+t.m22*i.m21,t.m21*i.m12+t.m22*i.m22,t.offsetX*i.m11+t.offsetY*i.m21+i.offsetX,t.offsetX*i.m12+t.offsetY*i.m22+i.offsetY),a.m21||a.m12?a.type=e.MatrixTypes.Unknown:((a.m11&&1!==a.m11||a.m22&&1!==a.m22)&&(a.type=e.MatrixTypes.Scaling),(a.offsetX||a.offsetY)&&(a.type|=e.MatrixTypes.Translation),(a.type&(e.MatrixTypes.Translation|e.MatrixTypes.Scaling))===e.MatrixTypes.Identity&&(a.type=e.MatrixTypes.Identity),a.type=e.MatrixTypes.Scaling|e.MatrixTypes.Translation),E(t,a),void(t.type=a.type)}var r=t.offsetX,l=t.offsetY;t.offsetX=r*i.m11+l*i.m21+i.offsetX,t.offsetY=r*i.m12+l*i.m22+i.offsetY,o!==e.MatrixTypes.Unknown?t.type=e.MatrixTypes.Translation|e.MatrixTypes.Scaling:t.type=e.MatrixTypes.Unknown}}function T(e,t,i,n,o,s,a){e.m11=t,e.m12=i,e.m21=n,e.m22=o,e.offsetX=s,e.offsetY=a}function E(e,t){e.m11=t.m11,e.m12=t.m12,e.m21=t.m21,e.m22=t.m22,e.offsetX=t.offsetX,e.offsetY=t.offsetY,e.type=t.type}function B(e){var t,i=[];if("msie"===sf.base.Browser.info.name||"edge"===sf.base.Browser.info.name)for(var n=0;n<e.childNodes.length;n++)1===(t=e.childNodes[parseInt(n.toString(),10)]).nodeType&&i.push(t);else i=e.children;return i}function P(e){var t="pathTable";if(window[t]||(window[t]={}),e){window.measureElement.style.visibility="visible";var i=B(window.measureElement.children[2])[0];i.setAttribute("d",e);var n=void 0;window[t][e]?n=window[t][e]:(window[t][e]=n=i.getBBox(),0!==n.x&&0!==n.y||0!==n.width&&0!==n.height||(window[t][e]=n=function(e){var t,i=0,n=0,o=0,s=0,a=e;a=a.replace(/[a-z].*/g," ").replace(/[\sA-Z]+/gi," ").trim().split(" ");for(var r=0;r<a.length;r++)a[parseInt(r.toString(),10)].length>1&&(t=a[parseInt(r.toString(),10)].split(","),i=n=t[0],o=s=t[1]);for(r=0;r<a.length;r++)(t=a[parseInt(r.toString(),10)].split(","))[1]||(t[0]=i,t[1]=o),i=Math.min(i,t[0]),n=Math.max(n,t[0]),o=Math.min(o,t[1]),s=Math.max(s,t[1]);return{x:i,y:o,width:n-i,height:s-o}}(e)));var o=new x(n.x,n.y,n.width,n.height);return window.measureElement.style.visibility="hidden",o}return new x(0,0,0,0)}function D(e,t,i){var n,o,s=[],a=0,r=t||e.content;if("nowrap"!==e.whiteSpace&&"pre"!==e.whiteSpace)if("breakall"===e.breakWord)for(n="",n+=r[0],a=0;a<r.length;a++)if((o=Z(n,e))>=e.width&&n.length>0)s[s.length]={text:n,x:0,dy:0,width:o},n="";else{var l=Z(n+=r[a+1]||"",e);(Math.ceil(l)+2>=e.width&&n.length>0||n.indexOf("\n")>-1)&&(s[s.length]={text:n,x:0,dy:0,width:l},n=""),a===r.length-1&&n.length>0&&(s[s.length]={text:n,x:0,dy:0,width:l},n="")}else s=function(e,t,i){var n,o,s,a,r=[],l="",d=0,h=0,p="nowrap"!==e.whiteSpace,c=(t||e.content).split("\n");for(d=0;d<c.length;d++)for(n="NoWrap"!==e.textWrapping?c[parseInt(d.toString(),10)].split(" "):c,h=0;h<n.length;h++)if(Z(n[parseInt(h.toString(),10)],e)>e.width&&n[parseInt(h.toString(),10)].length>0&&"NoWrap"!==e.textWrapping)c.length>1&&(n[parseInt(h.toString(),10)]=n[parseInt(h.toString(),10)]+"\n"),e.content=n[parseInt(h.toString(),10)],r=N(e,l,r,i);else{l+=((0!==h||1===n.length)&&p&&l.length>0?" ":"")+n[parseInt(h.toString(),10)];var u=Z(o=l+(n[h+1]||""),e);c.length>1&&h===n.length-1&&(l+="\n"),Math.floor(u)>e.width-2&&l.length>0?(t=l,r[r.length]={text:-1===l.indexOf("\n")&&h!==n.length-1?l+" ":t,x:0,dy:0,width:o===l?u:l===a?s:Z(l,e)},l=""):h===n.length-1&&(r[r.length]={text:l,x:0,dy:0,width:u},l=""),a=o,s=u}return r}(e,t,i);else s[s.length]={text:r,x:0,dy:0,width:Z(r,e)};return s}function N(e,t,i,n){var o,s,a=0,r=t||e.content;o="";var l,d=0;for(o+=r[0],a=0;a<r.length;a++)if((s=Z(o,e))>=e.width&&o.length>0)i[i.length]={text:o,x:0,dy:0,width:s},o="";else{var h=Z(o+=r[a+1]||"",e);(Math.ceil(h)+2>=e.width&&o.length>0||o.indexOf("\n")>-1)&&(d+=Y(o=o.slice(0,-1),e),h=Z(o,e),(l=null==n||d<=n)&&(i[i.length]={text:o,x:0,dy:0,width:h}),o=r[a+1]||""),l=null==n||d<=n,a===r.length-1&&o.length>0&&l&&(i[i.length]={text:o,x:0,dy:0,width:h},o="")}return i}function F(e,t,i,n,o,s){var a,r,l=new A(0,0),d=function(e,t){var i={fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray,opacity:e.style.opacity,visible:e.visible,id:e.id,width:t||e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5};return i.fontSize=e.style.fontSize,i.fontFamily=e.style.fontFamily,i.textOverflow=e.style.textOverflow,i.textDecoration=e.style.textDecoration,i.doWrap=e.doWrap,i.whiteSpace=X(e.style.whiteSpace,e.style.textWrapping),i.content=e.content,i.textWrapping=e.style.textWrapping,i.breakWord=q(e.style.textWrapping),i.textAlign=W(e.style.textAlign),i.color=e.style.color,i.italic=e.style.italic,i.bold=e.style.bold,i.dashArray="",i.strokeWidth=0,i.fill="",i}(e,n);return e.childNodes=a=D(d,s,o),e.wrapBounds=r=function(e,t){var i,n,o={x:0,width:0},s=0;for(s=0;s<t.length;s++)n=i=t[parseInt(s.toString(),10)].width,i="left"===e.textAlign?0:"center"===e.textAlign?i>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:-i/2:"right"===e.textAlign?-i:t.length>1?0:-i/2,t[parseInt(s.toString(),10)].dy=1.2*e.fontSize,t[parseInt(s.toString(),10)].x=i,o?(o.x=Math.min(o.x,i),o.width=Math.max(o.width,n)):o={x:i,width:n};return o}(d,a),l.width=r.width,e.wrapBounds.width>=n&&"Wrap"!==d.textOverflow&&(l.width=n),l.height=a.length*e.style.fontSize*1.2,l}function L(e,t){var i;return t&&"undefined"!=typeof document&&(i=document.getElementById(t)),i?i.querySelector("#"+e):"undefined"!=typeof document?document.getElementById(e):null}function O(e,t){var i=sf.base.createElement(e);return R(i,t),i}function R(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"===i[parseInt(n.toString(),10)]?e.style.cssText=t[i[parseInt(n.toString(),10)]]:e.setAttribute(i[parseInt(n.toString(),10)],t[i[parseInt(n.toString(),10)]])}function z(e,t){var i=null,n=L(e+t+"_diagramAdornerLayer");return n&&(i=n.getElementsByClassName("e-adorner-layer"+t)[0]),i}function H(e,t){window.measureElement.style.visibility="visible";var i=window.measureElement.children[1];i.setAttribute("src",e);var n=i.getBoundingClientRect(),o=n.width,s=n.height;return t=new A(o,s),window.measureElement.style.visibility="hidden",t}function U(e){new x;var t=e.offsetY-e.actualSize.height*e.pivot.y,i=e.offsetY+e.actualSize.height*(1-e.pivot.y),n=e.offsetX-e.actualSize.width*e.pivot.x,o=e.offsetX+e.actualSize.width*(1-e.pivot.x),s={x:n,y:t},a={x:o,y:t},r={x:n,y:i},l={x:o,y:i};return x.toBounds([s,a,r,l])}function j(e,t){var i=C();k(i,t,0,0);var n=I(i,{x:0,y:0}),o=I(i,{x:e.width,y:0}),s=I(i,{x:0,y:e.height}),a=I(i,{x:e.width,y:e.height}),r=Math.min(n.x,o.x,s.x,a.x),l=Math.min(n.y,o.y,s.y,a.y),d=Math.max(n.x,o.x,s.x,a.x),h=Math.max(n.y,o.y,s.y,a.y);return new A(d-r,h-l)}function _(e){var t,i=new x,n=(t=U(e)).middleLeft,o=t.topCenter,s=t.bottomCenter,a=t.middleRight,r=t.topLeft,l=t.topRight,d=t.bottomLeft,h=t.bottomRight;if(e.corners={topLeft:r,topCenter:o,topRight:l,middleLeft:n,middleRight:a,bottomLeft:d,bottomCenter:s,bottomRight:h},0!==e.rotateAngle||0!==e.parentTransform){var p=C();k(p,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=r=I(p,r),e.corners.topCenter=o=I(p,o),e.corners.topRight=l=I(p,l),e.corners.middleLeft=n=I(p,n),e.corners.middleRight=a=I(p,a),e.corners.bottomLeft=d=I(p,d),e.corners.bottomCenter=s=I(p,s),e.corners.bottomRight=h=I(p,h)}return i=x.toBounds([r,l,d,h]),e.corners.left=i.left,e.corners.right=i.right,e.corners.top=i.top,e.corners.bottom=i.bottom,e.corners.center=i.center,e.corners.width=i.width,e.corners.height=i.height,i}function W(e){var t="";switch(e){case"Center":t="center";break;case"Left":t="left";break;case"Right":t="right"}return t}function q(e){var t="";switch(e){case"Wrap":t="breakall";break;case"NoWrap":t="keepall";break;case"WrapWithOverflow":t="normal";break;case"LineThrough":t="line-through"}return t}function Z(e,t){window.measureElement.style.visibility="visible";var i=B(window.measureElement.children[2])[1];i.textContent=e,i.style.cssText="font-size: "+t.fontSize+"px; font-family: "+t.fontFamily+";\n    font-weight: "+(t.bold?"bold":"normal");var n=i.getBBox().width;return window.measureElement.style.visibility="hidden",n}function Y(e,t){window.measureElement.style.visibility="visible";var i=B(window.measureElement.children[2])[1];i.textContent=e,i.style.cssText="font-size: "+t.fontSize+"px; font-family: "+t.fontFamily+";\n    font-weight: "+(t.bold?"bold":"normal");var n=i.getBBox().height;return window.measureElement.style.visibility="hidden",n}function X(e,t){if("NoWrap"===t&&"PreserveAll"===e)return"pre";var i="";switch(e){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i}function G(e,t,i,n){if(0!==e){var o=C();return k(o,e,t,i),I(o,n)}return n}function J(e,t){return{x:e.x+t.desiredSize.width*t.pivot.x,y:e.y+t.desiredSize.height*t.pivot.y}}var K,Q,$,ee,te=function(){function t(){this.pivot={x:.5,y:.5},this.rotateValue={x:0,y:0,angle:0},this.isDirt=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.visible=!0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.relativeMode="Point",this.transform=e.RotateTransform.Self|e.RotateTransform.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new A,this.actualSize=new A,this.parentTransform=0,this.preventContainer=!1,this.bounds=new x(0,0,0,0),this.staticSize=!1,this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.elementActions=e.ElementAction.None,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return t.prototype.setOffsetWithRespectToBounds=function(e,t,i){this.unitMode=i,this.position={x:e,y:t}},t.prototype.getAbsolutePosition=function(e){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*e.width,y:this.position.y*e.height}},Object.defineProperty(t.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(e){this.floatingBounds=e},enumerable:!1,configurable:!0}),t.prototype.measure=function(e){var t=void 0!==this.width?this.width:(e.width||0)-this.margin.left-this.margin.right,i=void 0!==this.height?this.height:(e.height||0)-this.margin.top-this.margin.bottom;return this.desiredSize=new A(t,i),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,e)),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=e,this.updateBounds(),this.actualSize},t.prototype.updateBounds=function(){this.bounds=_(this)},t.prototype.validateDesiredSize=function(e,t){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(e.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(e.height=50),(void 0===e||void 0!==this.width&&void 0!==this.height)&&((e=e||new A).width=void 0===this.width?(t.width||0)-this.margin.left-this.margin.right:this.width,e.height=void 0===this.height?(t.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(e.width=Math.max(e.width,this.minWidth)),void 0!==this.minHeight&&(e.height=Math.max(e.height,this.minHeight)),void 0!==this.maxWidth&&(e.width=Math.min(e.width,this.maxWidth)),void 0!==this.maxHeight&&(e.height=Math.min(e.height,this.maxHeight)),e},t}(),ie=(K=function(e,t){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}K(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),ne=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.desiredBounds=void 0,t.measureChildren=!0,t.prevRotateAngle=0,t}return ie(t,e),t.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},t.prototype.measure=function(e){this.desiredBounds=void 0;var i,n,o=void 0;if(this.hasChildren()){for(var s=0;s<this.children.length;s++){"Stretch"!==(i=this.children[parseInt(s.toString(),10)]).horizontalAlignment||e.width||(e.width=i.bounds.width),"Stretch"!==i.verticalAlignment||e.height||(e.height=i.bounds.height);var a="Stretch"===i.horizontalAlignment||"Stretch"===i.verticalAlignment;(this.measureChildren||a||i instanceof t&&void 0!==i.measureChildren)&&i.measure(e),n=this.GetChildrenBounds(i),"Stretch"!==i.horizontalAlignment&&"Stretch"!==i.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=n:this.desiredBounds.uniteRect(n):!this.actualSize||this.actualSize.width||this.actualSize.height||i.preventContainer||"Stretch"!==i.horizontalAlignment||"Stretch"!==i.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=i.bounds:this.desiredBounds.uniteRect(i.bounds))}if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var r={x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y},l=G(this.rotateAngle,void 0,void 0,r);this.desiredBounds.x=l.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=l.y-this.desiredBounds.height*this.pivot.y}this.desiredBounds&&(o=new A(this.desiredBounds.width,this.desiredBounds.height))}return o=this.validateDesiredSize(o,e),this.stretchChildren(o),this.desiredSize=o,o},t.prototype.arrange=function(e){var i,n=this.desiredBounds;if(n){this.offsetX,this.offsetY;if(this.offsetX=n.x+n.width*this.pivot.x,this.offsetY=n.y+n.height*this.pivot.y,this.hasChildren())for(var o=0;o<this.children.length;o++){var s=!1;"Stretch"===(i=this.children[parseInt(o.toString(),10)]).horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,s=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,s=!0),(s||this.measureChildren||i instanceof t&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize)}}return this.actualSize=e,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,e},t.prototype.stretchChildren=function(e){if(this.hasChildren())for(var i=0,n=this.children;i<n.length;i++){var o=n[i];"Stretch"!==o.horizontalAlignment&&void 0!==o.desiredSize.width||(o.desiredSize.width=e.width-o.margin.left-o.margin.right),"Stretch"!==o.verticalAlignment&&void 0!==o.desiredSize.height||(o.desiredSize.height=e.height-o.margin.top-o.margin.bottom),o instanceof t&&o.stretchChildren(o.desiredSize)}},t.prototype.findChildOffsetFromCenter=function(e,t){var i=J({x:t.x-e.desiredSize.width/2,y:t.y-e.desiredSize.height/2},e);i=G(e.rotateAngle,t.x,t.y,i),i=G(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,i),e.offsetX=i.x,e.offsetY=i.y},t.prototype.GetChildrenBounds=function(e){var t;t=e.desiredSize.clone();e.rotateAngle,this.rotateAngle;var i=e.offsetX,n=e.offsetY,o=i-t.width*e.pivot.x,s=n-t.height*e.pivot.y,a=o+t.width,r=s+t.height,l={x:o,y:s},d={x:a,y:s},h={x:o,y:r},p={x:a,y:r};return l=G(e.rotateAngle,e.offsetX,e.offsetY,l),d=G(e.rotateAngle,e.offsetX,e.offsetY,d),h=G(e.rotateAngle,e.offsetX,e.offsetY,h),p=G(e.rotateAngle,e.offsetX,e.offsetY,p),0!==this.rotateAngle&&(l=G(-this.rotateAngle,void 0,void 0,l),d=G(-this.rotateAngle,void 0,void 0,d),h=G(-this.rotateAngle,void 0,void 0,h),p=G(-this.rotateAngle,void 0,void 0,p)),x.toBounds([l,d,h,p])},t}(te),oe=(Q=function(e,t){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Q(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),se=function(e){function t(){var t=e.call(this)||this;return t.textContent="",t.canMeasure=!0,t.canConsiderBounds=!0,t.doWrap=!0,t.textNodes=[],t.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:1,textOverflow:"Wrap"},t.style.fill="transparent",t.style.strokeColor="transparent",t}return oe(t,e),Object.defineProperty(t.prototype,"content",{get:function(){return this.textContent},set:function(e){this.textContent!==e&&(this.textContent=e,this.isDirt=!0,this.doWrap=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.textNodes},set:function(e){this.textNodes=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(e){this.textWrapBounds=e},enumerable:!1,configurable:!0}),t.prototype.refreshTextElement=function(){this.isDirt=!0},t.prototype.measure=function(e){var t;return t=this.isDirt&&this.canMeasure?F(this,this.style,this.content,this.width||e.width,e.height):this.desiredSize,void 0===this.width||void 0===this.height?this.desiredSize=new A(t.width,t.height):this.desiredSize=new A(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return(e.width!==this.actualSize.width||e.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=e,this.updateBounds(),this.isDirt=!1,this.actualSize},t}(te),ae=($=function(e,t){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}$(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),re=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.measureChildren=void 0,e}return ae(i,t),i.prototype.measure=function(e){var i=void 0,n=void 0;if(this.hasChildren()){for(var o=0,s=this.children;o<s.length;o++){var a=s[o];if(a instanceof se){if(!a.canMeasure)break;e.width=e.width||this.maxWidth||this.minWidth,a.measure(e)}else a instanceof se||a.measure(e);var r=a.desiredSize.clone();0!==a.rotateAngle&&(r=j(r,a.rotateAngle));var l=r.width+a.margin.right,d=r.height+a.margin.bottom,h=new x(a.margin.left,a.margin.top,l,d);if(a.float)if(void 0!==a.getAbsolutePosition(r))continue;a instanceof se&&!(a instanceof se&&a.canConsiderBounds)||(void 0===n?n=h:n.uniteRect(h))}if(n){var p,c;p=Math.max(n.left,0),c=Math.max(n.top,0),i=new A(n.width+p,n.height+c)}}return i=t.prototype.validateDesiredSize.call(this,i,e),t.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},i.prototype.arrange=function(i){if(this.outerBounds=new x,this.hasChildren()){var n,o;n=this.offsetY-i.height*this.pivot.y,o=this.offsetX-i.width*this.pivot.x;for(var s=0,a=this.children;s<a.length;s++){var r=a[s];if(0!=(r.transform&e.RotateTransform.Parent)){r.parentTransform=this.parentTransform+this.rotateAngle;var l=r.desiredSize.clone(),d=void 0,h={x:0,y:0},p=o,c=n;if("Point"===r.relativeMode){var u=r.getAbsolutePosition(i);void 0!==u&&(p+=u.x,c+=u.y)}if(h={x:(d="Object"===r.relativeMode?this.alignChildBasedOnParent(r,l,i,p,c):this.alignChildBasedOnaPoint(r,p,c)).x+l.width/2,y:d.y+l.height/2},r.rotateValue){var f={x:this.offsetX+(r.rotateValue.x||0),y:this.offsetY+(r.rotateValue.y||0)},m={x:this.offsetX,y:this.offsetY},g=0|r.rotateValue.angle,w=C();k(w,g,m.x,m.y),h=I(w,f)}t.prototype.findChildOffsetFromCenter.call(this,r,h)}"Stretch"===r.horizontalAlignment||"Stretch"===r.verticalAlignment?r.arrange(i):r instanceof se&&r.canMeasure?(r.arrange(r.desiredSize),this.outerBounds.uniteRect(r.outerBounds)):r instanceof se||(r.arrange(r.desiredSize),this.outerBounds.uniteRect(r.outerBounds))}}return this.actualSize=i,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),i},i.prototype.alignChildBasedOnParent=function(e,t,i,n,o){switch(e.horizontalAlignment){case"Auto":case"Left":n+=e.margin.left;break;case"Right":n+=i.width-t.width-e.margin.right;break;case"Stretch":case"Center":n+=i.width/2-t.width/2}switch(e.verticalAlignment){case"Auto":case"Top":o+=e.margin.top;break;case"Bottom":o+=i.height-t.height-e.margin.bottom;break;case"Stretch":case"Center":o+=i.height/2-t.height/2}return{x:n,y:o}},i.prototype.alignChildBasedOnaPoint=function(e,t,i){switch(t+=e.margin.left-e.margin.right,i+=e.margin.top-e.margin.bottom,e.horizontalAlignment){case"Auto":case"Left":t=t;break;case"Stretch":case"Center":t-=e.desiredSize.width*e.pivot.x;break;case"Right":t-=e.desiredSize.width}switch(e.verticalAlignment){case"Auto":case"Top":i=i;break;case"Stretch":case"Center":i-=e.desiredSize.height*e.pivot.y;break;case"Bottom":i-=e.desiredSize.height}return{x:t,y:i}},i}(ne),le=(ee=function(e,t){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),de=function(e){function t(){var t=e.call(this)||this;return t.imageSource="",t.printID="",t.imageScale="None",t.imageAlign="None",t.stretch="Stretch",t}return le(t,e),Object.defineProperty(t.prototype,"source",{get:function(){return this.imageSource},set:function(e){this.imageSource=e,this.isDirt=!0},enumerable:!1,configurable:!0}),t.prototype.measure=function(e){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=H(this.source,this.contentSize),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new A(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.desiredSize},t.prototype.arrange=function(e){return this.actualSize=new A(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},t}(te);function he(e){var t,i=[],n=pe(e);if(n.length>0)for(var o=0;o<n.length;o++){var s=n[parseInt(o.toString(),10)],a="";switch((a=s[0]).toLowerCase()){case"m":for(t=1;t<s.length;t++)i.push({command:a,x:s[parseInt(t.toString(),10)],y:s[t+1]}),t+=1,"m"===a?a="l":"M"===a&&(a="L");break;case"l":case"t":for(t=1;t<s.length;t++)i.push({command:a,x:s[parseInt(t.toString(),10)],y:s[t+1]}),t+=1;break;case"h":for(t=1;t<s.length;t++)i.push({command:a,x:s[parseInt(t.toString(),10)]});break;case"v":for(t=1;t<s.length;t++)i.push({command:a,y:s[parseInt(t.toString(),10)]});break;case"z":i.push({command:a});break;case"c":for(t=1;t<s.length;t++)i.push({command:a,x1:s[parseInt(t.toString(),10)],y1:s[t+1],x2:s[t+2],y2:s[t+3],x:s[t+4],y:s[t+5]}),t+=5;break;case"s":for(t=1;t<s.length;t++)i.push({command:a,x2:s[parseInt(t.toString(),10)],y2:s[t+1],x:s[t+2],y:s[t+3]}),t+=3;break;case"q":for(t=1;t<s.length;t++)i.push({command:a,x1:s[parseInt(t.toString(),10)],y1:s[t+1],x:s[t+2],y:s[t+3]}),t+=3;break;case"a":for(t=1;t<s.length;t++)i.push({command:a,r1:s[parseInt(t.toString(),10)],r2:s[t+1],angle:s[t+2],largeArc:s[t+3],sweep:s[t+4],x:s[t+5],y:s[t+6]}),t+=6}}return i}function pe(e){var t=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,i=[],n=[],o={};t.lastIndex=0;var s=!1;for(o=t.exec(e);o;)"e"===o[1]?s=!0:o[1]?("zm"===o[1].toLowerCase()?(i.length&&n.push(i),n.push(["Z"]),i=[o[1].substring(1,2)]):(i.length&&n.push(i),i=[o[1]]),s=!1):(i.length||(i=[]),s||i.push(Number(o[2])),s=!1),o=t.exec(e);return i.length&&n.push(i),n}function ce(e,t,i){e>t/2&&(e=t/2),e>i/2&&(e=i/2);var n,o,s,a="",r=[{x:0+e,y:0},{x:0+i-e,y:0},{x:0+i,y:0+e},{x:0+i,y:0+t-e},{x:0+i-e,y:0+t},{x:0+e,y:0+t},{x:0,y:0+t-e},{x:0,y:0+e}],l=[{x:0+i,y:0},{x:0+i,y:0+t},{x:0,y:0+t},{x:0,y:0}],d=0;for(a="M"+r[0].x+" "+r[0].y,s=0;s<r.length;s+=2)a+="L"+(n=r[s+1]).x+" "+n.y,o=r[s+2]||r[0],a+="Q"+l[d].x+" "+l[d].y+" "+o.x+" "+o.y,d++;return a}function ue(e){var t,i,n,o,s,a,r,l,d,h,p=[];for(r=0,l=0,h=0,d=e.length;h<d;++h){var c,u=e[parseInt(h.toString(),10)];c=u.command,"y1"in u&&(o=u.y1),"y2"in u&&(a=u.y2),"x1"in u&&(n=u.x1),"x2"in u&&(s=u.x2),"x"in u&&(r=u.x),"y"in u&&(l=u.y);var f=p[p.length-1];switch(c){case"M":p.push({command:"M",x:r,y:l});break;case"L":p.push({command:"L",x0:t,y0:i,x:r,y:l});break;case"H":p.push({command:"L",x0:t,y0:i,x:r,y:i});break;case"V":p.push({command:"L",x0:t,y0:i,x:t,y:l});break;case"C":p.push({command:"C",x0:t,y0:i,x1:n,y1:o,x2:s,y2:a,x:r,y:l});break;case"S":if(f){var m=void 0,g={x:2*t-(m="C"===f.command||"S"===f.command?{x:f.x2,y:f.y2}:{x:t,y:i}).x,y:2*i-m.y};p.push({command:"C",x0:t,y0:i,x1:g.x,y1:g.y,x2:s,y2:a,x:r,y:l})}break;case"Q":p.push({command:"Q",x0:t,y0:i,x1:n,y1:o,x:r,y:l});break;case"T":if(f){m=void 0,g={x:2*t-(m="Q"===f.command?{x:f.x1,y:f.y1}:{x:t,y:i}).x,y:2*i-m.y};p.push({command:"Q",x0:t,y0:i,x1:g.x,y1:g.y,x:r,y:l})}break;case"A":var w=u;w.command="A",p.push(w);break;case"Z":case"z":p.push({command:"Z"}),r=t,l=i}t=r,i=l}return p}function fe(e,t,i,n,o,s,a,r){var l,d,h,p,c,u,f,m,g;for(c=0,u=0,m=0,f=e.length;m<f;++m){var w=e[parseInt(m.toString(),10)],y=w.command;"x"in w&&(c=w.x),"y"in w&&(u=w.y),"y1"in w&&(d=w.y1),"y2"in w&&(p=w.y2),"x1"in w&&(l=w.x1),"x2"in w&&(h=w.x2),n?(void 0!==c&&(c=ge(c,t,o,a)),void 0!==u&&(u=ge(u,i,s,r)),void 0!==l&&(l=ge(l,t,o,a)),void 0!==d&&(d=ge(d,i,s,r)),void 0!==h&&(h=ge(h,t,o,a)),void 0!==p&&(p=ge(p,i,s,r))):(void 0!==c&&(c=Number((c+t).toFixed(2))),void 0!==u&&(u=Number((u+i).toFixed(2))),void 0!==l&&(l=Number((l+t).toFixed(2))),void 0!==d&&(d=Number((d+i).toFixed(2))),void 0!==h&&(h=Number((h+t).toFixed(2))),void 0!==p&&(p=Number((p+i).toFixed(2)))),(g=me(w,y,{x:c,y:u,x1:l,y1:d,x2:h,y2:p,r1:w.r1,r2:w.r2},n,t,i))&&(e[parseInt(m.toString(),10)]=g)}return ye(e)}function me(e,t,i,n,o,s){switch(t){case"M":case"L":e.x=i.x,e.y=i.y;break;case"H":e.x=i.x;break;case"V":e.y=i.y;break;case"C":e.x=i.x,e.y=i.y,e.x1=i.x1,e.y1=i.y1,e.x2=i.x2,e.y2=i.y2;break;case"S":e.x=i.x,e.y=i.y,e.x2=i.x2,e.y2=i.y2;break;case"Q":e.x=i.x,e.y=i.y,e.x1=i.x1,e.y1=i.y1;break;case"T":e.x=i.x,e.y=i.y;break;case"A":var a=i.r1,r=i.r2;n&&(i.r1=a*=o,i.r2=r*=s),e.x=i.x,e.y=i.y,e.r1=i.r1,e.r2=i.r2;break;case"z":case"Z":e={command:"Z"}}return e}function ge(e,t,i,n){return e!==i?e=n!==i?e*t-(Number(i)*t-Number(i))+(n-Number(i)):Number(e)*t-(Number(i)*t-Number(i)):n!==i&&(e=n),Number(e.toFixed(2))}function we(e){var t,i,n,o,s,a,r,l,d,h;for(r=0,l=0,h=0,d=e.length;h<d;++h){var p=e[parseInt(h.toString(),10)],c=p.command;if(/[MLHVCSQTA]/.test(c))"x"in p&&(p.x=r=p.x),"y"in p&&(p.y=l=p.y);else{"x1"in p&&(p.x1=n=r+p.x1),"x2"in p&&(p.x2=s=r+p.x2),"y1"in p&&(p.y1=o=l+p.y1),"y2"in p&&(p.y2=a=l+p.y2),"x"in p&&(p.x=r+=p.x),"y"in p&&(p.y=l+=p.y);var u=void 0;switch(c){case"m":case"M":u={command:"M",x:r,y:l};break;case"l":case"L":u={command:"L",x:r,y:l};break;case"h":case"H":u={command:"H",x:r};break;case"v":case"V":u={command:"V",y:l};break;case"c":case"C":u={command:"C",x:r,y:l,x1:n,y1:o,x2:s,y2:a};break;case"s":case"S":u={command:"S",x:r,y:l,x2:s,y2:a};break;case"q":case"Q":u={command:"Q",x:r,y:l,x1:n,y1:o};break;case"t":case"T":u={command:"T",x:r,y:l};break;case"a":case"A":(u={command:"A",x:r,y:l}).r1=p.r1,u.r2=p.r2,u.angle=p.angle,u.largeArc=p.largeArc,u.sweep=p.sweep;break;case"z":case"Z":u={command:"Z"},r=t,l=i,u=e[parseInt(h.toString(),10)]}u&&(e[parseInt(h.toString(),10)]=u)}"M"!==c&&"m"!==c||(t=r,i=l)}return e}function ye(e){var t,i="";for(t=0;t<e.length;t++)i+=0===t?ve(e[parseInt(t.toString(),10)]):" "+ve(e[parseInt(t.toString(),10)]);return i}function ve(e){var t="";switch(e.command){case"Z":case"z":t=e.command;break;case"M":case"m":case"L":case"l":t=e.command+" "+e.x+" "+e.y;break;case"C":case"c":t=e.command+" "+e.x1+" "+e.y1+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"Q":case"q":t=e.command+" "+e.x1+" "+e.y1+" "+e.x+" "+e.y;break;case"A":case"a":var i=e.command,n=e.angle,o=e.largeArc?"1":"0",s=e.sweep?"1":"0";t=i+" "+e.r1+" "+e.r2+" "+n+" "+o+" "+s+" "+e.x+" "+e.y;break;case"H":case"h":t=e.command+" "+e.x;break;case"V":case"v":t=e.command+" "+e.y;break;case"S":case"s":t=e.command+" "+e.x2+" "+e.y2+" "+e.x+" "+e.y;break;case"T":case"t":t=e.command+" "+e.x+" "+e.y}return t}var be,Se,Ae=(be=function(e,t){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}be(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),xe=function(e){function t(){var t=e.call(this)||this;return t.pathData="",t.transformPath=!0,t.absolutePath="",t.canMeasurePath=!1,t.absoluteBounds=new x,t}return Ae(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.pathData},set:function(e){this.pathData!==e&&(this.pathData=e,this.isDirt=!0)},enumerable:!1,configurable:!0}),t.prototype.measure=function(e){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new x(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=P(this.data?this.data:"")),void 0===this.width?this.desiredSize=new A(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?this.desiredSize=new A(this.width||this.absoluteBounds.width,this.absoluteBounds.height):this.desiredSize=new A(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,e),this.canMeasurePath=!1,this.desiredSize},t.prototype.arrange=function(e){return(this.isDirt||this.actualSize.width!==e.width||this.actualSize.height!==e.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,e),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},t.prototype.updatePath=function(e,t,i){var n=!1,o="",s=-t.x,a=-t.y,r=[];return i.width===t.width&&i.height===t.height||(s=i.width/Number(t.width?t.width:1),a=i.height/Number(t.height?t.height:1),n=!0),r=we(r=he(e)),o=(n||this.isDirt)&&this.transformPath?fe(r,s,a,n,t.x,t.y,0,0):ye(r),n=!1,o},t}(te),Ve=(Se=function(e,t){return(Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}Se(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Ce=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ve(t,e),t.equals=function(e,t){return e===t||!(!e||!t)&&(!e||!t||e.x===t.x&&e.y===t.y)},t.isEmptyPoint=function(e){return!e.x||!e.y},t.transform=function(e,t,i){var n={x:0,y:0};return n.x=Math.round(100*(e.x+i*Math.cos(t*Math.PI/180)))/100,n.y=Math.round(100*(e.y+i*Math.sin(t*Math.PI/180)))/100,n},t.findLength=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.findAngle=function(e,t){var i=Math.atan2(t.y-e.y,t.x-e.x);return i=180*i/Math.PI,(i%=360)<0&&(i+=360),i},t.distancePoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.getLengthFromListOfPoints=function(e){for(var t=0,i=0;i<e.length-1;i++)t+=this.distancePoints(e[parseInt(i.toString(),10)],e[i+1]);return t},t.adjustPoint=function(e,t,i,n){var o,s=i?{x:e.x,y:e.y}:{x:t.x,y:t.y};return e.x===t.x?e.y<t.y&&i||e.y>t.y&&!i?s.y+=n:s.y-=n:e.y===t.y?e.x<t.x&&i||e.x>t.x&&!i?s.x+=n:s.x-=n:i?(o=this.findAngle(e,t),s=this.transform(e,o,n)):(o=this.findAngle(t,e),s=this.transform(t,o,n)),s},t.direction=function(e,t){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"Right":"Left":e.y<t.y?"Bottom":"Top"},t.prototype.getClassName=function(){return"Point"},Ce([sf.base.Property(0)],t.prototype,"x",void 0),Ce([sf.base.Property(0)],t.prototype,"y",void 0),t}(sf.base.ChildProperty),ke=function(){function e(){this.imageList={}}return e.getContext=function(e){return e.getContext("2d")},e.prototype.setStyle=function(t,i){var n=e.getContext(t);"none"===i.fill&&(i.fill="transparent"),"none"===i.stroke&&(i.stroke="transparent"),n.strokeStyle=i.stroke,n.lineWidth=i.strokeWidth,0===i.strokeWidth&&(n.strokeStyle="transparent"),n.globalAlpha=i.opacity;var o=[];i.dashArray&&(o=this.parseDashArray(i.dashArray)),n.setLineDash(o),n.fillStyle=i.fill},e.prototype.rotateContext=function(t,i,n,o){var s=e.getContext(t);s.translate(n,o),s.rotate(i*Math.PI/180),s.translate(-n,-o)},e.prototype.setFontStyle=function(t,i){var n=e.getContext(t),o="";i.italic&&(o+="italic "),i.bold&&(o+="bold "),o+=i.fontSize+"px ",o+=i.fontFamily,n.font=o},e.prototype.parseDashArray=function(e){for(var t=[],i=-1!==e.indexOf(" ")?" ":",",n=0,o=e.split(i);n<o.length;n++){var s=o[n];t.push(Number(s))}return t},e.prototype.drawRectangle=function(t,i){if(!0===i.visible)if(i.cornerRadius)i.data=ce(i.cornerRadius,i.height,i.width),this.drawPath(t,i);else{var n=e.getContext(t);n.save(),n.beginPath();i.cornerRadius;var o=i.x+i.width*i.pivotX,s=i.y+i.height*i.pivotY;this.rotateContext(t,i.angle,o,s),this.setStyle(t,i),n.rect(i.x,i.y,i.width,i.height),n.fillRect(i.x,i.y,i.width,i.height),n.fill(),n.stroke(),n.closePath(),n.restore()}},e.prototype.drawPath=function(t,i){var n=[];n=ue(n=he(i.data));var o=e.getContext(t);o.save(),o.beginPath();var s=i.y+i.height*i.pivotY,a=i.x+i.width*i.pivotX;this.rotateContext(t,i.angle,a,s),this.setStyle(t,i),o.translate(i.x,i.y),this.renderPath(t,i,n),o.fill(),o.translate(-i.x,-i.y),o.stroke(),o.restore()},e.prototype.renderPath=function(t,i,n){if(!0===i.visible){var o,s=e.getContext(t),a=void 0,r=void 0,l=void 0,d=void 0,h=void 0,p=void 0,c=void 0,u=void 0,f=void 0,m=n;for(c=0,u=0,f=0,o=m.length;f<o;++f){var g=m[parseInt(f.toString(),10)],w=g.command;switch("x1"in g&&(l=g.x1),"x2"in g&&(h=g.x2),"y1"in g&&(d=g.y1),"y2"in g&&(p=g.y2),"x"in g&&(c=g.x),"y"in g&&(u=g.y),w){case"M":s.moveTo(c,u),g.x=c,g.y=u;break;case"L":s.lineTo(c,u),g.x=c,g.y=u;break;case"C":s.bezierCurveTo(l,d,h,p,c,u),g.x=c,g.y=u,g.x1=l,g.y1=d,g.x2=h,g.y2=p;break;case"Q":s.quadraticCurveTo(l,d,c,u),g.x=c,g.y=u,g.x1=l,g.y1=d;break;case"A":var y={x:a,y:r},v=g.r1,b=g.r2,S=g.angle*(Math.PI/180),A=g.largeArc,x=g.sweep,V={x:c,y:u},C={x:Math.cos(S)*(y.x-V.x)/2+Math.sin(S)*(y.y-V.y)/2,y:-Math.sin(S)*(y.x-V.x)/2+Math.cos(S)*(y.y-V.y)/2},I=Math.pow(C.x,2)/Math.pow(v,2)+Math.pow(C.y,2)/Math.pow(b,2);I>1&&(v*=Math.sqrt(I),b*=Math.sqrt(I));var k=Math.pow(b,2)*Math.pow(C.x,2),M=(A===x?-1:1)*Math.sqrt((Math.pow(v,2)*Math.pow(b,2)-Math.pow(v,2)*Math.pow(C.y,2)-k)/(Math.pow(v,2)*Math.pow(C.y,2)+Math.pow(b,2)*Math.pow(C.x,2)));isNaN(M)&&(M=0);var T={x:M*v*C.y/b,y:M*-b*C.x/v},E={x:(y.x+V.x)/2+Math.cos(S)*T.x-Math.sin(S)*T.y,y:(y.y+V.y)/2+Math.sin(S)*T.x+Math.cos(S)*T.y},B=this.a([1,0],[(C.x-T.x)/v,(C.y-T.y)/b]),P=[(C.x-T.x)/v,(C.y-T.y)/b],D=[(-C.x-T.x)/v,(-C.y-T.y)/b],N=this.a(P,D);this.r(P,D)<=-1&&(N=Math.PI),this.r(P,D)>=1&&(N=0);var F=B+(x?1:-1)*(N/2);Math.cos(F),Math.sin(F);if(g.centp=E,g.xAxisRotation=S,g.rx=v,g.ry=b,g.a1=B,g.ad=N,g.sweep=x,null!=s){var L=v>b?v:b,O=v>b?1:v/b,R=v>b?b/v:1;s.save(),s.translate(E.x,E.y),s.rotate(S),s.scale(O,R),s.arc(0,0,L,B,B+N,!x),s.scale(1/O,1/R),s.rotate(-S),s.translate(-E.x,-E.y),s.restore()}break;case"Z":case"z":s.closePath(),c=a,u=r}a=c,r=u}}},e.prototype.drawText=function(t,i){if(i.content&&!0===i.visible){var n=e.getContext(t);n.save(),this.setStyle(t,i);var o=i.x+i.width*i.pivotX,s=i.y+i.height*i.pivotY;this.rotateContext(t,i.angle,o,s),this.setFontStyle(t,i);var a,r=0;a=i.childNodes;var l=i.wrapBounds;if(n.fillStyle=i.color,l){var d=this.labelAlign(i,l,a);for(r=0;r<a.length;r++){var h=a[parseInt(r.toString(),10)];if("\n"!==h.text){var p=d.x+h.x-l.x,c=d.y+h.dy*r+.8*i.fontSize;if(n.fillText(h.text,p,c),"Underline"===i.textDecoration||"Overline"===i.textDecoration||"LineThrough"===i.textDecoration){var u=p,f=void 0,m=p+n.measureText(h.text).width,g=void 0;switch(i.textDecoration){case"Underline":f=c+2,g=c+2;break;case"Overline":f=d.y+h.dy*r,g=d.y+h.dy*r;break;case"LineThrough":f=(c+d.y+h.dy*r)/2+2,g=(c+d.y+h.dy*r)/2+2}n.beginPath(),n.moveTo(u,f),n.lineTo(m,g),n.strokeStyle=i.color,n.lineWidth=.08*i.fontSize,n.globalAlpha=i.opacity,n.stroke()}}}}n.restore()}},e.prototype.m=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},e.prototype.r=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(this.m(e)*this.m(t))},e.prototype.a=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(this.r(e,t))},e.prototype.getMeetOffset=function(e,t,i){var n=Math.max(t,i),o=Math.min(t,i);switch(e){case"min":return 0;case"mid":return(n-o)/2;case"max":return n-o;default:return 0}},e.prototype.getSliceOffset=function(e,t,i,n){switch(e){case"min":return 0;case"mid":return(t-i)/2*n/t;case"max":return(t-i)*n/t;default:return 0}},e.prototype.image=function(e,t,i,n,o,s,a,r){e.beginPath();var l=t.width,d=t.height,h=o,p=s,c=0,u=0;if(e.globalAlpha=a.opacity,a&&"None"!==a.alignment){var f=a.alignment.toLowerCase().substr(1,3),m=a.alignment.toLowerCase().substr(5,3);if("Slice"===a.scale){var g=function(){c=h,u=d*h/l},w=function(){c=l*p/d,u=p};h>p?(g(),p>u&&w()):h===p?l>d?w():g():(w(),h>c&&g());var y=this.getSliceOffset(f,c,h,l),v=this.getSliceOffset(m,u,p,d),b=l-y,S=d-v,A=c-y*(c/l),x=u-v*(u/d),V=O("canvas",{width:o.toString(),height:s.toString()}),C=V.getContext("2d");e.clearRect(i,n,A,x),C.drawImage(t,y,v,b,S,0,0,A,x),e.clearRect(i,n,o,s),e.drawImage(V,i,n,o,s)}else if("Meet"===a.scale){var I=d/l,k=p/h;c=k>I?h:p/I,u=k>I?h*I:p,i+=this.getMeetOffset(f,c,h),n+=this.getMeetOffset(m,u,p),e.clearRect(i,n,c,u),e.drawImage(t,0,0,l,d,i,n,c,u)}else e.clearRect(i,n,o,s),e.drawImage(t,i,n,o,s)}else if(t.complete){var M=e.canvas.id;if(this.imageList[M])-1!==(B=this.isExistingImage(M,this.imageList,a))&&this.updateImageList(B,this.imageList,M),this.updateCanvasList(this.imageList,M);e.drawImage(t,i,n,o,s)}else{var T=this,E=e.getTransform();t.onload=null;M=e.canvas.id;this.imageList[M]||(this.imageList[M]=[]);var B=this.isExistingImage(M,this.imageList,a),P={id:a.id,image:t,canvasId:M};-1!==B&&this.updateImageList(B,this.imageList,M),this.imageList[M].push(P),t.onload=function(){var l=a.id.lastIndexOf("_content"),d=-1!==l?a.id.substring(0,l):a.id,h=!0;if(void 0===r||r(d)||(h=!1),h){e.setTransform(E.a,E.b,E.c,E.d,E.e,E.f);var p=e.canvas.id;if(T.imageList[p]){var c=T.isExistingImage(p,T.imageList,a);-1!==c&&(T.updateImageList(c,T.imageList,p),e.drawImage(t,i,n,o,s)),T.updateCanvasList(T.imageList,p)}}}}e.closePath()},e.prototype.isExistingImage=function(e,t,i){return t[e].findIndex((function(e){return e.id===i.id}))},e.prototype.updateImageList=function(e,t,i){t[i][e].image.onload=null,t[i].splice(e,1)},e.prototype.updateCanvasList=function(e,t){e[t]&&0===e[t].length&&delete e[t]},e.prototype.loadImage=function(e,t,i,n,o,s,a){var r;this.rotateContext(i,t.angle,n,o),window.customStampCollection&&window.customStampCollection.get(t.printID)?r=window.customStampCollection.get(t.printID):window.signatureCollection&&window.signatureCollection.get(t.printID)?r=window.signatureCollection.get(t.printID):window&&window.stickyNote&&window.stickyNote.src&&a&&"StickyNotes"==a?r=window.stickyNote:(r=new Image).src=t.source,this.image(e,r,t.x,t.y,t.width,t.height,t,s)},e.prototype.drawImage=function(t,i,n,o,s,a){var r=this;if(i.visible){var l=e.getContext(t);l.save();var d=i.x+i.width*i.pivotX,h=i.y+i.height*i.pivotY,p=new Image;p.src=i.source;var c=l.canvas.id.split("_");c[c.length-1];o?p.onload=function(){r.loadImage(l,i,t,d,h)}:this.loadImage(l,i,t,d,h,s,a),l.restore()}},e.prototype.labelAlign=function(e,t,i){var n=new A(t.width,i.length*(1.2*e.fontSize)),o={x:0,y:0},s=e.x,a=e.y,r=.5*e.width,l=.5*e.height;return"left"===e.textAlign?r=0:"center"===e.textAlign?r=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:.5*e.width:"right"===e.textAlign&&(r=1*e.width),o.x=s+r+(t?t.x:0),o.y=a+l-n.height/2,o},e}();var Me=function(){function e(e,t){this.renderer=null,this.isSvgMode=!0,this.diagramId=e,this.element=L(this.diagramId),this.isSvgMode=t,this.renderer=new ke}return e.prototype.renderElement=function(e,t,i,n,o,s,a,r,l,d){e instanceof ne?this.renderContainer(e,t,i,n,o,s,a,r,l,d):e instanceof de?this.renderImageElement(e,t,n,o,a,l,d):e instanceof xe?this.renderPathElement(e,t,n,o,a):e instanceof se?this.renderTextElement(e,t,n,o,a):this.renderRect(e,t,n,o)},e.prototype.renderImageElement=function(e,t,i,n,o,s,a){var r,l,d,h,p=this.getBaseAttributes(e,i);if(p.cornerRadius=0,this.renderer.drawRectangle(t,p),"Stretch"===e.stretch)r=e.actualSize.width,l=e.actualSize.height;else{var c=e.contentSize.width,u=e.contentSize.height,f=p.width/c,m=p.height/u,g=void 0;switch(e.stretch){case"Meet":r=c*(g=Math.min(f,m)),l=u*g,p.x+=Math.abs(p.width-r)/2,p.y+=Math.abs(p.height-l)/2;break;case"Slice":f=p.width/c,m=p.height/u,r=c*(g=Math.max(f,m)),l=u*g,d=p.width/r*c,h=p.height/l*u;break;case"None":r=c,l=u}}p.width=r,p.height=l,p.sourceWidth=d,p.sourceHeight=h,p.source=e.source,p.alignment=e.imageAlign,p.scale=e.imageScale,p.printID=e.printID,this.renderer.drawImage(t,p,n,o,s,a)},e.prototype.renderPathElement=function(e,t,i,n,o){var s=this.getBaseAttributes(e,i);s.data=e.absolutePath,s.data=e.absolutePath;e.id;this.isSvgMode||(s.x=s.x,s.y=s.y),this.renderer.drawPath(t,s)},e.prototype.renderTextElement=function(e,t,i,n,o){var s=this.getBaseAttributes(e,i);s.cornerRadius=0,s.whiteSpace=X(e.style.whiteSpace,e.style.textWrapping),s.content=e.content,s.breakWord=q(e.style.textWrapping),s.textAlign=W(e.style.textAlign),s.color=e.style.color,s.italic=e.style.italic,s.bold=e.style.bold,s.fontSize=e.style.fontSize,s.fontFamily=e.style.fontFamily,s.textOverflow=e.style.textOverflow,s.textDecoration=e.style.textDecoration,s.doWrap=e.doWrap,s.wrapBounds=e.wrapBounds,s.childNodes=e.childNodes,s.dashArray="",s.strokeWidth=0,s.fill=e.style.fill;e.content?e.content:e.id;this.renderer.drawRectangle(t,s),this.renderer.drawText(t,s)},e.prototype.renderContainer=function(e,t,i,n,o,s,a,r,l,d){if(n={tx:0,ty:0,scale:1},this.diagramId&&(o=o),this.renderRect(e,t,n,o),e.hasChildren())for(var h=0,p=e.children;h<p.length;h++){var c=p[h];this.renderElement(c,t,i,n,o,!0,a,r,l,d)}},e.prototype.renderRect=function(e,t,i,n){var o=this.getBaseAttributes(e,i);o.cornerRadius=e.cornerRadius||0;e.id;this.renderer.drawRectangle(t,o)},e.prototype.getBaseAttributes=function(e,t){var i={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,fill:e.style.fill,stroke:e.style.strokeColor,angle:e.rotateAngle+e.parentTransform,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:e.style.strokeWidth,dashArray:e.style.strokeDashArray||"",opacity:e.style.opacity,visible:e.visible,id:e.id,gradient:e.style.gradient};return t&&(i.x+=t.tx,i.y+=t.ty),i},e}(),Te=function(){function e(){}return e.prototype.parseDashArray=function(e){return[]},e.prototype.drawRectangle=function(e,t,i,n,o,s,a){var r,l;r=t.id===e.id?t.id+"_container":t.id,l&&!o||(l=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(l));var d={id:r,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),visibility:t.visible?"visible":"hidden",transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",rx:t.cornerRadius||0,ry:t.cornerRadius||0,opacity:t.opacity,"aria-label":a||""};t.class&&(d.class=t.class);a||(d["pointer-events"]="none"),Ee(l,d),this.setSvgStyle(l,t,i)},e.prototype.updateSelectionRegion=function(e,t){var i,n;i=e.parentNode.getElementById(t.id),n={id:t.id,x:t.x.toString(),y:t.y.toString(),width:t.width.toString(),height:t.height.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")",class:"e-diagram-selected-region"},i||(i=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.appendChild(i)),this.setSvgStyle(i,t),Ee(i,n)},e.prototype.createGElement=function(e,t){return Be(e,t)},e.prototype.drawCircle=function(e,t,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(o,t);var s=t.class||"";i||(s+=" e-disabled");var a={id:t.id,cx:t.centerX,cy:t.centerY,r:t.radius,visibility:t.visible?"visible":"hidden",class:s,"aria-label":n?n["aria-label"]:""};""===a["aria-label"]&&(a["pointer-events"]="none"),o.style.display=t.visible?"block":"none",Ee(o,a),e.appendChild(o)},e.prototype.setSvgStyle=function(e,t,i){if(t.canApplyStyle||void 0===t.canApplyStyle){"none"===t.fill&&(t.fill="transparent"),"none"===t.stroke&&(t.stroke="transparent");var n,o=[];if(void 0!==t.dashArray)o=(new ke).parseDashArray(t.dashArray);n=t.fill,t.stroke&&e.setAttribute("stroke",t.stroke),void 0!==t.strokeWidth&&null!==t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),o&&e.setAttribute("stroke-dasharray",o.toString()),n&&e.setAttribute("fill",n)}},e.prototype.svgLabelAlign=function(e,t,i){var n=new A(t.width,i.length*(1.2*e.fontSize)),o={x:0,y:0},s=.5*e.width,a=.5*e.height;return"left"===e.textAlign?s=0:"center"===e.textAlign?s=t.width>e.width&&("Ellipsis"===e.textOverflow||"Clip"===e.textOverflow)?0:.5*e.width:"right"===e.textAlign&&(s=1*e.width),o.x=0+s+(t?t.x:0),o.y=1.2+a-n.height/2,o},e.prototype.drawLine=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(i,t);var n=t.x+t.width*t.pivotX,o=t.y+t.height*t.pivotY,s={id:t.id,x1:t.startPoint.x+t.x,y1:t.startPoint.y+t.y,x2:t.endPoint.x+t.x,y2:t.endPoint.y+t.y,stroke:t.stroke,"stroke-width":t.strokeWidth.toString(),opacity:t.opacity.toString(),transform:"rotate("+t.angle+" "+n+" "+o+")",visibility:t.visible?"visible":"hidden"};t.class&&(s.class=t.class),Ee(i,s),e.appendChild(i)},e.prototype.drawPath=function(e,t,i,n,o,s){var a=Math.floor(10*Math.random()+1);e.id,a.toString();var r,l,d=[];d=ue(d=he(t.data)),o&&(r=o.getElementById(t.id+"_groupElement_shadow"))&&r.parentNode.removeChild(r),o&&(l=o.getElementById(t.id)),l&&!n||(l=document.createElementNS("http://www.w3.org/2000/svg","path"),e.appendChild(l)),this.renderPath(l,t,d);var h={id:t.id,transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+t.x+","+t.y+")",visibility:t.visible?"visible":"hidden",opacity:t.opacity,"aria-label":s||""};t.class&&(h.class=t.class),Ee(l,h),this.setSvgStyle(l,t,i)},e.prototype.renderPath=function(e,t,i){var n,o,s,a,r,l,d,h,p=i,c="";for(r=0,l=0,h=0,d=p.length;h<d;++h){var u=p[parseInt(h.toString(),10)],f=u.command;switch("x1"in u&&(n=u.x1),"x2"in u&&(s=u.x2),"y1"in u&&(o=u.y1),"y2"in u&&(a=u.y2),"x"in u&&(r=u.x),"y"in u&&(l=u.y),f){case"M":c=c+"M"+r.toString()+","+l.toString()+" ";break;case"L":c=c+"L"+r.toString()+","+l.toString()+" ";break;case"C":c=c+"C"+n.toString()+","+o.toString()+","+s.toString()+","+a.toString()+",",c+=r.toString()+","+l.toString()+" ";break;case"Q":c=c+"Q"+n.toString()+","+o.toString()+","+r.toString()+","+l.toString()+" ";break;case"A":c=c+"A"+u.r1.toString()+","+u.r2.toString()+","+u.angle.toString()+",",c+=u.largeArc.toString()+","+u.sweep+","+r.toString()+","+l.toString()+" ";break;case"Z":case"z":c+="Z "}}e.setAttribute("d",c)},e}();function Ee(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"===i[parseInt(n.toString(),10)]?e.style.cssText=t[i[parseInt(n.toString(),10)]]:e.setAttribute(i[parseInt(n.toString(),10)],t[i[parseInt(n.toString(),10)]])}function Be(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg",e);return Ee(i,t),i}function Pe(e,t,i){for(var n=e.children.length-1;n>=0;n--){var o=e.children[parseInt(n.toString(),10)];if(o&&o.bounds.containsPoint(t,0)){if(o instanceof ne){var s=this.findTargetElement(o,t);if(s)return s}if(o.bounds.containsPoint(t,0))return o}}return e.bounds.containsPoint(t,i)&&"none"!==e.style.fill?e:null}function De(e,t){var i={x:0,y:0},n=e,o=t,s=(o.y2-o.y1)*(n.x2-n.x1)-(o.x2-o.x1)*(n.y2-n.y1),a=(o.x2-o.x1)*(n.y1-o.y1)-(o.y2-o.y1)*(n.x1-o.x1),r=(n.x2-n.x1)*(n.y1-o.y1)-(n.y2-n.y1)*(n.x1-o.x1);if(0===s)return{enabled:!1,intersectPt:i};var l=a/s,d=r/s;return l>=0&&l<=1&&d>=0&&d<=1?(i.x=n.x1+l*(n.x2-n.x1),i.y=n.y1+l*(n.y2-n.y1),{enabled:!0,intersectPt:i}):{enabled:!1,intersectPt:i}}function Ne(e,t,i,n){return{x1:Number(e)||0,y1:Number(t)||0,x2:Number(i)||0,y2:Number(n)||0}}return e.Canvas=re,e.CanvasRenderer=ke,e.Container=ne,e.DrawingElement=te,e.DrawingRenderer=Me,e.Gradient=m,e.ImageElement=de,e.LinearGradient=g,e.Margin=u,e.Matrix=V,e.PathElement=xe,e.Point=Ie,e.RadialGradient=w,e.Rect=x,e.ShapeStyle=y,e.Size=A,e.Stop=f,e.StrokeStyle=v,e.SvgRenderer=Te,e.TextElement=se,e.TextStyle=b,e.Thickness=c,e.bBoxText=Z,e.bBoxTextHeight=Y,e.contains=function(e,t,i){return e.x>=t.x-i&&e.x<=t.x+i&&e.y>=t.y-i&&e.y<=t.y+i},e.cornersPointsBeforeRotation=U,e.createHtmlElement=O,e.createMeasureElements=function(){if(window.measureElement)window.measureElement.usageCount+=1;else{var e=O("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),t=O("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(t);var i;if(i=O("img",{}),e.appendChild(i),"undefined"!=typeof document){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.appendChild(n);var o=document.createElementNS("http://www.w3.org/2000/svg","path");n.appendChild(o);document.createTextNode("");var s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.appendChild(s),window.measureElement=e,window.measureElement.usageCount=1,document.body.appendChild(e)}}},e.createSvg=function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return Ee(n,{id:e,width:t,height:i}),n},e.createSvgElement=Be,e.findElementUnderMouse=function(e,t,i){return Pe(e.wrapper,t,i)},e.findNearestPoint=function(e,t,i){var n;n=Ie.findLength(t,e)>Ie.findLength(i,e)?i:t;var o=Ie.findAngle(t,i),s=Ie.findAngle(n,e),a=Ie.findLength(n,e),r=s+2*(o-s);return{x:n.x+a*Math.cos(r*Math.PI/180),y:n.y+a*Math.sin(r*Math.PI/180)}},e.findTargetElement=Pe,e.getAdornerLayerSvg=z,e.getBezierDirection=function(e,t){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?e.x<t.x?"right":"left":e.y<t.y?"bottom":"top"},e.getBounds=_,e.getChildNode=B,e.getDiagramElement=L,e.getLineSegment=Ne,e.getOffset=J,e.getParentSvg=function(e,t,i){return e&&e.id&&t&&"selector"===t?this.pdfViewer.adornerSvgLayer:i},e.getPathString=ye,e.getPoint=function(e,t,i,n,o,s,a,r){var l={x:0,y:0},d=C();switch(k(d,o,s,a),r.x){case 0:switch(r.y){case 0:l=I(d,{x:e,y:t});break;case.5:l=I(d,{x:e,y:t+n/2});break;case 1:l=I(d,{x:e,y:t+n})}break;case.5:switch(r.y){case 0:l=I(d,{x:e+i/2,y:t});break;case.5:l=I(d,{x:e+i/2,y:t+n/2});break;case 1:l=I(d,{x:e+i/2,y:t+n})}break;case 1:switch(r.y){case 0:l=I(d,{x:e+i,y:t});break;case.5:l=I(d,{x:e+i,y:t+n/2});break;case 1:l=I(d,{x:e+i,y:t+n})}}return{x:l.x,y:l.y}},e.getPoints=function(e,t,i){var n=[];i=i||0;var o={x:t.topLeft.x-i,y:t.topLeft.y},s={x:t.topRight.x+i,y:t.topRight.y},a={x:t.bottomRight.x,y:t.bottomRight.y-i},r={x:t.bottomLeft.x,y:t.bottomLeft.y+i};return n.push(o),n.push(s),n.push(a),n.push(r),n},e.getRectanglePath=ce,e.getSelectorElement=function(e,t){var i=null,n=z(e,t);return n&&(i=n.getElementById(e+"_SelectorElement")),i},e.getString=ve,e.identityMatrix=C,e.intersect2=function(e,t,i,n){var o=De(Ne(e.x,e.y,t.x,t.y),Ne(i.x,i.y,n.x,n.y));return o.enabled?o.intersectPt:{x:0,y:0}},e.intersect3=De,e.measureImage=H,e.measurePath=P,e.measureText=F,e.middleElement=function(e,t){return(e+t)/2},e.multiplyMatrix=M,e.parsePathData=pe,e.pathSegmentCollection=ue,e.processPathData=he,e.randomId=function(){for(var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<5;n++){if("crypto"in window&&"getRandomValues"in crypto){var o=new Uint16Array(1);e=(window.msCrypto||window.crypto).getRandomValues(o)[0]%(t.length-1)}else e=Math.floor(Math.random()*t.length);0===n&&e<10?n--:i+=t.substring(e,e+1)}return i},e.refreshDiagramElements=function(e,t,i,n,o){for(var s=0;s<t.length;s++)i.renderElement(t[parseInt(s.toString(),10)],e,void 0,void 0,void 0,void 0,void 0,void 0,n,o)},e.rotateMatrix=k,e.rotatePoint=G,e.rotateSize=j,e.scaleElement=function e(t,i,n,o){if(void 0!==t.width&&void 0!==t.height&&(t.width*=i,t.height*=n),t instanceof ne){var s=C(),a=o.width||o.actualSize.width,r=o.height||o.actualSize.height;if(void 0!==a&&void 0!==r){var l=o.offsetX-a*o.pivot.x,d=o.offsetY-r*o.pivot.y,h={x:l+a*o.pivot.x,y:d+r*o.pivot.y};h=G(o.rotateAngle,o.offsetX,o.offsetY,h),k(s,-o.rotateAngle,h.x,h.y),k(s,o.rotateAngle,h.x,h.y);for(var p=0,c=t.children;p<c.length;p++){var u=c[p];if(void 0!==u.width&&void 0!==u.height){var f=I(s,{x:u.offsetX,y:u.offsetY});u.offsetX=f.x,u.offsetY=f.y,e(u,i,n,o)}}}}},e.scaleMatrix=function(t,i,n,o,s){void 0===o&&(o=0),void 0===s&&(s=0),M(t,function(t,i,n,o){var s=C();return s.type=n||o?e.MatrixTypes.Scaling|e.MatrixTypes.Translation:e.MatrixTypes.Scaling,T(s,t,0,0,i,n-t*n,o-i*o),s}(i,n,o,s))},e.scalePathData=ge,e.setAttributeHtml=R,e.setAttributeSvg=Ee,e.splitArrayCollection=we,e.textAlignToString=W,e.transformPath=fe,e.transformPointByMatrix=I,e.transformPointsByMatrix=function(e,t){for(var i=[],n=0,o=t;n<o.length;n++){var s=o[n];i.push(I(e,s))}return i},e.translateMatrix=function(t,i,n){return t.type&e.MatrixTypes.Identity?(t.type=e.MatrixTypes.Translation,void T(t,1,0,0,1,i,n)):t.type&e.MatrixTypes.Unknown?(t.offsetX+=i,void(t.offsetY+=n)):(t.offsetX+=i,t.offsetY+=n,void(t.type|=e.MatrixTypes.Translation))},e.translatePoints=function(e,t){for(var i=[],n=0,o=t;n<o.length;n++){var s=o[n],a={x:e.offsetX-e.actualSize.width*e.pivot.x+s.x,y:e.offsetY-e.actualSize.height*e.pivot.y+s.y},r=void 0,l=e.rotateAngle+e.parentTransform;l&&k(r=C(),l,e.offsetX,e.offsetY),r&&(a=I(r,a)),i.push(a)}return i},e.updateStyle=function(e,t){for(var i=t.style,n=t,o=0,s=Object.keys(e);o<s.length;o++){switch(s[o]){case"fill":i.fill=e.fill,i instanceof v&&(i.fill="transparent");break;case"textOverflow":i.textOverflow=e.textOverflow;break;case"opacity":i.opacity=e.opacity;break;case"strokeColor":i.strokeColor=e.strokeColor;break;case"strokeDashArray":i.strokeDashArray=e.strokeDashArray;break;case"strokeWidth":i.strokeWidth=e.strokeWidth;break;case"bold":i.bold=e.bold;break;case"color":i.color=e.color;break;case"textWrapping":i.textWrapping=e.textWrapping;break;case"fontFamily":i.fontFamily=e.fontFamily;break;case"fontSize":i.fontSize=e.fontSize;break;case"italic":i.italic=e.italic;break;case"textAlign":i.textAlign=e.textAlign;break;case"whiteSpace":i.whiteSpace=e.whiteSpace;break;case"textDecoration":i.textDecoration=e.textDecoration}}t instanceof se&&n.refreshTextElement()},e.updatedSegment=me,e.whiteSpaceToString=X,e.wordBreakToString=q,e},sf.drawings=sf.drawings({})},"./modules/navigationsbase.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};window.sf.navigations=window.sf.base.extend({},window.sf.navigations,function(e){"use strict";var t,n,o=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),s=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=function(e){function t(t,i){return e.call(this,t,i)||this}return o(t,e),t.prototype.preRender=function(){this.browser=sf.base.Browser.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=sf.base.Browser.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=sf.base.getUniqueID("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new sf.base.Touch(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),sf.base.EventHandler.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){sf.base.isNullOrUndefined(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),t=this.createElement("div",{className:"e-hscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,o=[].slice.call(i.children);n<o.length;n++){var s=o[n];e.appendChild(s)}t.appendChild(e),i.appendChild(t),t.style.overflowX="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",t.classList.remove("e-hscroll"),t.classList.remove("e-scroll-device"),t.classList.remove("e-rtl");var i=sf.base.selectAll(".e-"+t.id+"_nav.e-scroll-nav",t),n=sf.base.selectAll(".e-scroll-overlay",t);[].slice.call(n).forEach((function(e){sf.base.detach(e)}));for(var o=0,s=[].slice.call(this.scrollItems.children);o<s.length;o++){var a=s[o];t.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),sf.base.detach(this.scrollEle),i.length>0&&(sf.base.detach(i[0]),sf.base.isNullOrUndefined(i[1])||sf.base.detach(i[1])),sf.base.EventHandler.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=sf.base.selectAll(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlay=function(e){var t=e.id.concat("_nav"),i=this.createElement("div",{className:"e-scroll-overlay e-scroll-right-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),o=this.createElement("div",{id:t.concat("_right"),className:n}),s=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"});o.appendChild(s);var a=this.createElement("div",{className:"e-scroll-overlay e-scroll-left-overlay"});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(o),e.insertBefore(a,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-right-nav"),n={role:"button",id:t.concat("_right"),"aria-label":"Scroll right"},o=this.createElement("div",{className:i,attrs:n});o.setAttribute("aria-disabled","false");var s=this.createElement("div",{className:"e-nav-right-arrow e-nav-arrow e-icons"}),a="e-"+e.id.concat("_nav e-scroll-nav e-scroll-left-nav"),r={role:"button",id:t.concat("_left"),"aria-label":"Scroll left"},l=this.createElement("div",{className:a+" e-overlay",attrs:r});l.setAttribute("aria-disabled","true");var d=this.createElement("div",{className:"e-nav-left-arrow e-nav-arrow e-icons"});l.appendChild(d),o.appendChild(s),e.appendChild(o),e.insertBefore(l,e.firstChild),this.ieCheck&&(o.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([o,l])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new sf.base.Touch(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),sf.base.EventHandler.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=this.element,o=t.classList;o.contains("e-scroll-nav")&&(o=t.querySelector(".e-nav-arrow").classList),this.contains(n,"e-rtl")&&this.browserCheck&&(e=-e),!this.contains(n,"e-rtl")||this.browserCheck||this.ieCheck?o.contains("e-nav-right-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i):o.contains("e-nav-left-arrow")?this.frameScrollRequest(e,"add",i):this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var n=.5,o=function(){var s=Math.sin(n);s<=0?window.cancelAnimationFrame(s):("Left"===e.swipeDirection?i.scrollLeft+=t*s:"Right"===e.swipeDirection&&(i.scrollLeft-=t*s),n-=.5,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(sf.base.selectAll(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetWidth}));var o=function(){var i,s;n.contains(n.element,"e-rtl")&&n.browserCheck?(i=-e,s=-10):(i=e,s=10),i<10?window.cancelAnimationFrame(s):(n.scrollUpdating(s,t),e-=s,window.requestAnimationFrame(o))};o()}},t.prototype.touchHandler=function(e){var t=this.scrollEle,i=e.distanceX;this.ieCheck&&this.contains(this.element,"e-rtl")&&(i=-i),"Left"===e.scrollDirection?t.scrollLeft=t.scrollLeft+i:"Right"===e.scrollDirection&&(t.scrollLeft=t.scrollLeft-i)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(sf.base.isNullOrUndefined(e)?t:e).querySelector(".e-nav-arrow");sf.base.isNullOrUndefined(e)?sf.base.classList(i,["e-nav-right-arrow"],["e-nav-left-arrow"]):sf.base.classList(i,["e-nav-left-arrow"],["e-nav-right-arrow"])}else e&&t&&(e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var t=e.target,i=t.offsetWidth,n=(this.element,this.element.querySelector(".e-scroll-left-nav")),o=this.element.querySelector(".e-scroll-right-nav"),s=this.element.querySelector(".e-scroll-left-overlay"),a=this.element.querySelector(".e-scroll-right-overlay"),r=t.scrollLeft;if(r<=0&&(r=-r),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(s=this.element.querySelector(".e-scroll-right-overlay"),a=this.element.querySelector(".e-scroll-left-overlay")),s.style.width=r<40?r+"px":"40px",t.scrollWidth-Math.ceil(i+r)<40?a.style.width=t.scrollWidth-Math.ceil(i+r)+"px":a.style.width="40px"),0===r)this.arrowDisabling(n,o);else if(Math.ceil(i+r+.1)>=t.scrollWidth)this.arrowDisabling(o,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},s([sf.base.Property(null)],t.prototype,"scrollStep",void 0),t=s([sf.base.NotifyPropertyChanges],t)}(sf.base.Component),r=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),l=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},d=function(e){function t(t,i){return e.call(this,t,i)||this}return r(t,e),t.prototype.preRender=function(){this.browser=sf.base.Browser.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=sf.base.Browser.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=sf.base.getUniqueID("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add("e-rtl")},t.prototype.render=function(){this.touchModule=new sf.base.Touch(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),sf.base.EventHandler.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add("e-scroll-device"),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),sf.base.EventHandler.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){sf.base.isNullOrUndefined(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=sf.base.createElement("div",{className:"e-vscroll-content"}),t=sf.base.createElement("div",{className:"e-vscroll-bar"});t.setAttribute("tabindex","-1");for(var i=this.element,n=0,o=[].slice.call(i.children);n<o.length;n++){var s=o[n];e.appendChild(s)}t.appendChild(e),i.appendChild(t),t.style.overflow="hidden",this.scrollEle=t,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var t=this.element;t.style.display="",sf.base.removeClass([this.element],["e-vscroll","e-scroll-device","e-rtl"]);var i=sf.base.selectAll(".e-"+t.id+"_nav.e-scroll-nav",t),n=sf.base.selectAll(".e-scroll-overlay",t);[].slice.call(n).forEach((function(e){sf.base.detach(e)}));for(var o=0,s=[].slice.call(this.scrollItems.children);o<s.length;o++){var a=s[o];t.appendChild(a)}this.uniqueId&&this.element.removeAttribute("id"),sf.base.detach(this.scrollEle),i.length>0&&(sf.base.detach(i[0]),sf.base.isNullOrUndefined(i[1])||sf.base.detach(i[1])),sf.base.EventHandler.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,e.prototype.destroy.call(this)},t.prototype.disable=function(e){var t=sf.base.selectAll(".e-scroll-nav:not(.e-overlay)",this.element);e?this.element.classList.add("e-overlay"):this.element.classList.remove("e-overlay"),[].slice.call(t).forEach((function(t){t.setAttribute("tabindex",e?"-1":"0")}))},t.prototype.createOverlayElement=function(e){var t=e.id.concat("_nav"),i=sf.base.createElement("div",{className:"e-scroll-overlay e-scroll-down-overlay"}),n="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),o=sf.base.createElement("div",{id:t.concat("down"),className:n}),s=sf.base.createElement("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"});o.appendChild(s);var a=sf.base.createElement("div",{className:"e-scroll-overlay e-scroll-up-overlay"});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(i),e.appendChild(o),e.insertBefore(a,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-scroll-nav e-scroll-down-nav"),n=sf.base.createElement("div",{id:t.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var o=sf.base.createElement("div",{className:"e-nav-down-arrow e-nav-arrow e-icons"}),s="e-"+e.id.concat("_nav e-scroll-nav e-scroll-up-nav"),a=sf.base.createElement("div",{id:t.concat("_up"),className:s+" e-overlay"});a.setAttribute("aria-disabled","true");var r=sf.base.createElement("div",{className:"e-nav-up-arrow e-nav-arrow e-icons"});a.appendChild(r),n.appendChild(o),n.setAttribute("tabindex","0"),e.appendChild(n),e.insertBefore(a,e.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),a.classList.add("e-ie-align")),this.eventBinding([n,a])},t.prototype.onKeyPress=function(e){var t=this;if("Enter"===e.key){this.keyTimer=window.setTimeout((function(){t.keyTimeout=!0,t.eleScrolling(10,e.target,!0)}),100)}},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var t=this;[].slice.call(e).forEach((function(e){new sf.base.Touch(e,{tapHold:t.tabHoldHandler.bind(t),tapHoldThreshold:500}),e.addEventListener("keydown",t.onKeyPress.bind(t)),e.addEventListener("keyup",t.onKeyUp.bind(t)),e.addEventListener("mouseup",t.repeatScroll.bind(t)),e.addEventListener("touchend",t.repeatScroll.bind(t)),e.addEventListener("contextmenu",(function(e){e.preventDefault()})),sf.base.EventHandler.add(e,"click",t.clickEventHandler,t)}))},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var t=this,i=e.originalEvent.target;i=this.contains(i,"e-scroll-nav")?i.firstElementChild:i;this.timeout=window.setInterval((function(){t.eleScrolling(10,i,!0)}),50)},t.prototype.contains=function(e,t){return e.classList.contains(t)},t.prototype.eleScrolling=function(e,t,i){var n=t.classList;n.contains("e-scroll-nav")&&(n=t.querySelector(".e-nav-arrow").classList),n.contains("e-nav-down-arrow")?this.frameScrollRequest(e,"add",i):n.contains("e-nav-up-arrow")&&this.frameScrollRequest(e,"",i)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var t,i=this.scrollEle;t=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var n=.5,o=function(){var s=Math.sin(n);s<=0?window.cancelAnimationFrame(s):("Up"===e.swipeDirection?i.scrollTop+=t*s:"Down"===e.swipeDirection&&(i.scrollTop-=t*s),n-=.02,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,t){"add"===t?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,t,i){var n=this;if(i)this.scrollUpdating(e,t);else{this.customStep||[].slice.call(sf.base.selectAll(".e-scroll-overlay",this.element)).forEach((function(t){e-=t.offsetHeight}));var o=function(){e<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,t),e-=10,window.requestAnimationFrame(o))};o()}},t.prototype.touchHandler=function(e){var t=this.scrollEle,i=e.distanceY;"Up"===e.scrollDirection?t.scrollTop=t.scrollTop+i:"Down"===e.scrollDirection&&(t.scrollTop=t.scrollTop-i)},t.prototype.arrowDisabling=function(e,t){if(this.isDevice){var i=(sf.base.isNullOrUndefined(e)?t:e).querySelector(".e-nav-arrow");sf.base.isNullOrUndefined(e)?sf.base.classList(i,["e-nav-down-arrow"],["e-nav-up-arrow"]):sf.base.classList(i,["e-nav-up-arrow"],["e-nav-down-arrow"])}else e.classList.add("e-overlay"),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),t.classList.remove("e-overlay"),t.setAttribute("aria-disabled","false"),t.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var t=e.target,i=t.offsetHeight,n=this.element.querySelector(".e-scroll-up-nav"),o=this.element.querySelector(".e-scroll-down-nav"),s=this.element.querySelector(".e-scroll-up-overlay"),a=this.element.querySelector(".e-scroll-down-overlay"),r=t.scrollTop;if(r<=0&&(r=-r),this.isDevice&&(s.style.height=r<40?r+"px":"40px",t.scrollHeight-Math.ceil(i+r)<40?a.style.height=t.scrollHeight-Math.ceil(i+r)+"px":a.style.height="40px"),0===r)this.arrowDisabling(n,o);else if(Math.ceil(i+r+.1)>=t.scrollHeight)this.arrowDisabling(o,n);else{var l=this.element.querySelector(".e-scroll-nav.e-overlay");l&&(l.classList.remove("e-overlay"),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")}}},l([sf.base.Property(null)],t.prototype,"scrollStep",void 0),t=l([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);function h(e,t,i,n,o,s){var r=e("div",{className:"e-menu-"+n});return t.appendChild(r),r.appendChild(i),s?(r.style.overflow="hidden",r.style.height=s+"px"):(r.style.maxHeight=t.style.maxHeight,t.style.overflow="hidden"),"vscroll"===n?new d({enableRtl:o},r).scrollStep=sf.base.select(".e-"+n+"-bar",t).offsetHeight/2:new a({enableRtl:o},r).scrollStep=sf.base.select(".e-"+n+"-bar",t).offsetWidth,r}return e.HScroll=a,e.VScroll=d,e.addScrolling=function(e,t,i,n,o,s){var a,r,l=t.parentElement;if("vscroll"===n?(a=s||t.getBoundingClientRect().height,r=i.getBoundingClientRect().height):(a=t.getBoundingClientRect().width,r=i.getBoundingClientRect().width),a<r)return h(e,t,i,n,o,s);if(l){var d=l.getBoundingClientRect().width;return d<a&&"hscroll"===n?(r=d,t.style.maxWidth=d+"px",h(e,t,i,n,o,s)):i}return i},e.destroyScroll=function(e,t,i){if(e){var n=sf.base.select(".e-menu-parent",t);n?i&&i!==n||(e.destroy(),t.parentElement.appendChild(n),sf.base.detach(t)):(e.destroy(),sf.base.detach(t))}},e}({}))},"./modules/popup.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};sf.popups=sf.base.extend({},sf.popups,function(e){"use strict";var t,n=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),o=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([sf.base.Property("left")],t.prototype,"X",void 0),o([sf.base.Property("top")],t.prototype,"Y",void 0),t}(sf.base.ChildProperty),a="e-popup",r="e-rtl",l="e-popup-open",d="e-popup-close",h=function(e){function t(t,i){return e.call(this,i,t)||this}return n(t,e),t.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){switch(n[i]){case"width":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(e.width)});break;case"height":sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(e.height)});break;case"zIndex":sf.base.setStyleAttribute(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var o=e.offsetX-t.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+o).toString()+"px";break;case"offsetY":var s=e.offsetY-t.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+s).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove(a,r,l,d),this.content=null,this.relateTo=null,sf.popups.destroy(),e.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(a);var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=sf.base.formatUnit(this.width)),"auto"!==this.height&&(e.height=sf.base.formatUnit(this.height)),sf.base.setStyleAttribute(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){sf.base.Browser.isDevice&&sf.base.EventHandler.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];sf.base.EventHandler.add(i,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){sf.base.Browser.isDevice&&sf.base.EventHandler.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,t=this.getScrollableParent(this.getRelateToElement());e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||sf.base.isNullOrUndefined(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?sf.base.isNullOrUndefined(this.element)||this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var t=this.isElementOnViewport(this.getRelateToElement(),e.target);t||this.targetInvisibleStatus?t&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,t){for(var i=this.getScrollableParent(e),n=0;n<i.length;n++)if(!this.isElementVisible(e,i[n]))return!1;return!0},t.prototype.isElementVisible=function(e,t){var i=this.checkGetBoundingClientRect(e);if(!i.height||!i.width)return!1;if(sf.base.isNullOrUndefined(this.checkGetBoundingClientRect(t))){var n=window,o={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},s=sf.popups.calculatePosition(e),a={top:s.top,left:s.left,right:s.left+i.width,bottom:s.top+i.height},r={top:o.bottom-a.top,left:o.right-a.left,bottom:a.bottom-o.top,right:a.right-o.left};return r.top>0&&r.left>0&&r.right>0&&r.bottom>0}var l=t.getBoundingClientRect();return!(i.bottom<l.top||i.bottom>l.bottom||i.right>l.right||i.left<l.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(r):this.element.classList.remove(r)},t.prototype.setContent=function(){if(!sf.base.isNullOrUndefined(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var e=this.getRelateToElement(),t=this.content.props;e.classList.contains("e-dropdown-btn")&&!sf.base.isNullOrUndefined(t)||this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout((function(){e.refreshPosition()}),200)},t.prototype.refreshPosition=function(e,t){sf.base.isNullOrUndefined(e)||this.checkFixedParent(e),this.reposition(),t||this.checkCollision()},t.prototype.reposition=function(){var e,t,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var n=void 0,o=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:t.left,top:this.position.Y}:{left:this.position.X,top:t.top},this.element.style.display=o,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(i){var s=this.element.clientHeight;o=this.element.style.display;this.element.style.display="block",e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY,s),this.element.style.display=o}else e={left:0,top:0};sf.base.isNullOrUndefined(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return null}},t.prototype.getAnchorPosition=function(e,t,i,n,o,s){void 0===s&&(s=0);var a=this.checkGetBoundingClientRect(t),r=this.checkGetBoundingClientRect(e);if(sf.base.isNullOrUndefined(a)||sf.base.isNullOrUndefined(r))return null;var l=e,d={left:0,top:0};switch(t.offsetParent&&"BODY"===t.offsetParent.tagName&&"BODY"===e.tagName?d=sf.popups.calculatePosition(e):(t.classList.contains("e-dlg-modal")&&"BODY"!==l.tagName&&(t=t.parentElement),d=sf.popups.calculateRelativeBasedPosition(l,t)),i.X){default:case"left":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?d.left+=window.innerWidth/2-a.width/2:"container"===this.targetType?d.left+=r.width/2-a.width/2:d.left+=r.width/2;break;case"right":if(t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType)d.left+=window.innerWidth-a.width;else if("container"===this.targetType){var h=1,p=sf.popups.getTransformElement(t);if(p){var c=getComputedStyle(p).transform;if("none"!==c)h=new DOMMatrix(c).a;if("none"!==getComputedStyle(p).zoom)h*=sf.popups.getZoomValue(document.body)}d.left+=(r.width-a.width)/h}else d.left+=r.width}switch(i.Y){default:case"top":break;case"center":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?d.top+=window.innerHeight/2-a.height/2:"container"===this.targetType?d.top+=r.height/2-a.height/2:d.top+=r.height/2;break;case"bottom":t.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?d.top+=window.innerHeight-a.height:"container"!==this.targetType||t.classList.contains("e-dialog")?"container"===this.targetType&&t.classList.contains("e-dialog")?d.top+=r.height-s:d.top+=r.height:d.top+=r.height-a.height}return d.left+=n,d.top+=o,d},t.prototype.callFlip=function(e){var t=this.getRelateToElement();sf.popups.flip(this.element,t,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==sf.popups.isCollide(this.element,this.viewPortElement).length)if(sf.base.isNullOrUndefined(this.viewPortElement)){var t=sf.popups.fit(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=t.left+"px"),e.Y&&(this.element.style.top=t.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(n))return null;e&&!0===e.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),e&&!0===e.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,t=this.collision.Y;"none"===e&&"none"===t||("flip"===e&&"flip"===t?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===t?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===t&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===t&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,t){var n=this;if(this.wireEvents(),1e3===this.zIndex||!sf.base.isNullOrUndefined(t)){var o=sf.base.isNullOrUndefined(t)?this.element:t;this.zIndex=c(o),sf.base.setStyleAttribute(this.element,{zIndex:this.zIndex})}e=sf.base.isNullOrUndefined(e)||"object"!==i(e)?this.showAnimation:e,"none"===this.collision.X&&"none"===this.collision.Y||(sf.base.removeClass([this.element],d),sf.base.addClass([this.element],l),this.checkCollision(),sf.base.removeClass([this.element],l),sf.base.addClass([this.element],d)),sf.base.isNullOrUndefined(e)?(sf.base.removeClass([this.element],d),sf.base.addClass([this.element],l),this.trigger("open")):(e.begin=function(){n.isDestroyed||(sf.base.removeClass([n.element],d),sf.base.addClass([n.element],l))},e.end=function(){n.isDestroyed||n.trigger("open")},new sf.base.Animation(e).animate(this.element))},t.prototype.hide=function(e){var t=this;e=sf.base.isNullOrUndefined(e)||"object"!==i(e)?this.hideAnimation:e,sf.base.isNullOrUndefined(e)?(sf.base.removeClass([this.element],l),sf.base.addClass([this.element],d),this.trigger("close")):(e.end=function(){t.isDestroyed||(sf.base.removeClass([t.element],l),sf.base.addClass([t.element],d),t.trigger("close"))},new sf.base.Animation(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),p(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var t=e.parentElement;t&&"HTML"!==t.tagName;){var i=getComputedStyle(t);"fixed"!==i.position&&"sticky"!==i.position||sf.base.isNullOrUndefined(this.element)||!this.element.offsetParent||"BODY"!==this.element.offsetParent.tagName||"hidden"===getComputedStyle(this.element.offsetParent).overflow||(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?sf.base.formatUnit(window.scrollY-parseInt(this.element.style.top,10)):sf.base.formatUnit(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),t=t.parentElement,!sf.base.isNullOrUndefined(this.element)&&sf.base.isNullOrUndefined(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},o([sf.base.Property("auto")],t.prototype,"height",void 0),o([sf.base.Property("auto")],t.prototype,"width",void 0),o([sf.base.Property(null)],t.prototype,"content",void 0),o([sf.base.Property("container")],t.prototype,"targetType",void 0),o([sf.base.Property(null)],t.prototype,"viewPortElement",void 0),o([sf.base.Property({X:"none",Y:"none"})],t.prototype,"collision",void 0),o([sf.base.Property("")],t.prototype,"relateTo",void 0),o([sf.base.Complex({},s)],t.prototype,"position",void 0),o([sf.base.Property(0)],t.prototype,"offsetX",void 0),o([sf.base.Property(0)],t.prototype,"offsetY",void 0),o([sf.base.Property(1e3)],t.prototype,"zIndex",void 0),o([sf.base.Property(!1)],t.prototype,"enableRtl",void 0),o([sf.base.Property("reposition")],t.prototype,"actionOnScroll",void 0),o([sf.base.Property(null)],t.prototype,"showAnimation",void 0),o([sf.base.Property(null)],t.prototype,"hideAnimation",void 0),o([sf.base.Event()],t.prototype,"open",void 0),o([sf.base.Event()],t.prototype,"close",void 0),o([sf.base.Event()],t.prototype,"targetExitViewport",void 0),t=o([sf.base.NotifyPropertyChanges],t)}(sf.base.Component);function p(e,t){for(var i=getComputedStyle(e),n=[],o=/(auto|scroll)/,s=e.parentElement;s&&"HTML"!==s.tagName;){var a=getComputedStyle(s);"absolute"===i.position&&"static"===a.position||!o.test(a.overflow+a.overflowY+a.overflowX)||n.push(s),s=s.parentElement}return t||n.push(document),n}function c(e){for(var t=e.parentElement,i=[];t&&"BODY"!==t.tagName;){var n=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==n&&"static"!==o&&i.push(n),t=t.parentElement}for(var s=[],a=0;a<document.body.children.length;a++)if(!e.isEqualNode(document.body.children[a])){n=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(document.body.children[a],null).getPropertyValue("position");"auto"!==n&&"static"!==o&&s.push(n)}s.push("999");var r=[];if(!sf.base.isNullOrUndefined(e.parentElement)&&"BODY"!==e.parentElement.tagName){var l=[].slice.call(e.parentElement.children);for(a=0;a<l.length;a++)if(!e.isEqualNode(l[a])){n=document.defaultView.getComputedStyle(l[a],null).getPropertyValue("z-index"),o=document.defaultView.getComputedStyle(l[a],null).getPropertyValue("position");"auto"!==n&&"static"!==o&&r.push(n)}}var d=i.concat(s,r),h=Math.max.apply(Math,d)+1;return h>2147483647?2147483647:h}return e.Popup=h,e.PositionData=s,e.getMaxZindex=function(e){void 0===e&&(e=["*"]);for(var t=[],i=0;i<e.length;i++)for(var n=document.getElementsByTagName(e[i]),o=0;o<n.length;o++){var s=document.defaultView.getComputedStyle(n[o],null).getPropertyValue("z-index"),a=document.defaultView.getComputedStyle(n[o],null).getPropertyValue("position");"auto"!==s&&"static"!==a&&t.push(s)}var r=Math.max.apply(Math,t)+1;return r>2147483647?2147483647:r},e.getScrollableParent=p,e.getZindexPartial=c,e}({}))},"./modules/popupsbase.js":function(e,t){window.sf=window.sf||{};window.sf.popups=window.sf.base.extend({},window.sf.popups,function(e){"use strict";var t,i,n,o,s,a,r=!1;function l(e,s,a,l,p){if(i=void 0,i=p,r=!!l,!e)return{left:0,top:0};s||(s="left"),a||(a="top"),o=e.ownerDocument,n=e;return function(e,i,o){switch(t=n.getBoundingClientRect(),i+e){case"topcenter":d(y(),o),h(m(),o);break;case"topright":d(w(),o),h(m(),o);break;case"centercenter":d(y(),o),h(f(),o);break;case"centerright":d(w(),o),h(f(),o);break;case"centerleft":d(g(),o),h(f(),o);break;case"bottomcenter":d(y(),o),h(u(),o);break;case"bottomright":d(w(),o),h(u(),o);break;case"bottomleft":d(g(),o),h(u(),o);break;default:case"topleft":d(g(),o),h(m(),o)}return n=null,o}(s.toLowerCase(),a.toLowerCase(),{left:0,top:0})}function d(e,t){t.left=e}function h(e,t){t.top=e}function p(){return o.documentElement.scrollTop||o.body.scrollTop}function c(){return o.documentElement.scrollLeft||o.body.scrollLeft}function u(){return r?t.bottom:t.bottom+p()}function f(){return m()+t.height/2}function m(){return r?t.top:t.top+p()}function g(){return t.left+c()}function w(){var e=n&&((n.classList.contains("e-date-wrapper")||n.classList.contains("e-datetime-wrapper"))&&n.classList.contains("e-rtl")||n.classList.contains("e-ddl")&&n.classList.contains("e-rtl")||n.classList.contains("e-date-range-wrapper"))?i?i.width:0:i&&t.width>=i.width?i.width:0;return n&&n.classList.contains("e-rtl")&&n.classList.contains("e-multiselect")&&(e=i.width),t.right+c()-e}function y(){return g()+t.width/2}function v(e){var t=getComputedStyle(e).zoom;return parseFloat(t)||1}function b(e){for(;e;){var t=window.getComputedStyle(e).transform,i=v(document.body);if(t&&"none"!==t||i&&1!==i)return e;if(e===document.body)return null;e=e.offsetParent||e.parentElement}return null}function S(e,t,i){e.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},e.TR={top:e.TL.top,left:e.TL.left+i.width},e.BL={top:e.TL.top+i.height,left:e.TL.left},e.BR={top:e.TL.top+i.height,left:e.TL.left+i.width}}function A(e,t){var i=!1,n=!1;return e-D()<T()&&(i=!0),t>E()&&(n=!0),{leftSide:i,rightSide:n}}function x(e,t){var i=!1,n=!1;return e-P()<M()&&(i=!0),t>B()&&(n=!0),{topSide:i,bottomSide:n}}function V(){return a.getBoundingClientRect().width}function C(){return a.getBoundingClientRect().height}function I(){return a.getBoundingClientRect().left}function k(){return a.getBoundingClientRect().top}function M(){return a?k():0}function T(){return a?I():0}function E(){return a?D()+I()+V():D()+F()}function B(){return a?P()+k()+C():P()+N()}function P(){return s.documentElement.scrollTop||s.body.scrollTop}function D(){return s.documentElement.scrollLeft||s.body.scrollLeft}function N(){return window.innerHeight}function F(){var e=window.innerWidth,t=document.documentElement.getBoundingClientRect();return e-(e-(sf.base.isNullOrUndefined(document.documentElement)?0:t.width))}var L,O,R,z,H,U,j,_,W=["north-west","north","north-east","west","east","south-west","south","south-east"],q=["e-restrict-left"],Z=["north","west","east","south"],Y=0,X=0,G=0,J=0,K=0,Q=0,$=null,ee=null,te=null,ie=!0,ne=0,oe=!0;function se(e){pe();var t=sf.base.createElement("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+e),"south"===e&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===e&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===e&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===e&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),L.appendChild(t)}function ae(e){var t;return sf.base.isNullOrUndefined(e)||(t="string"==typeof e?document.querySelector(e):e),t}function re(e){for(var t=e||this,i=L.querySelectorAll(".e-resize-handle"),n=0;n<i.length;n++){O=i[n],sf.base.EventHandler.add(O,"mousedown",de,t);var o="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.add(O,o,ce,t)}var s=L.querySelectorAll(".e-dialog-border-resize");if(!sf.base.isNullOrUndefined(s))for(n=0;n<s.length;n++){O=s[n],sf.base.EventHandler.add(O,"mousedown",de,t);o="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";sf.base.EventHandler.add(O,o,ce,t)}}function le(e){return e.indexOf("mouse")>-1?"mouse":"touch"}function de(e){if(e.preventDefault(),L=e.target.parentElement,pe(),K=e.pageX,Q=e.pageY,e.target.classList.add("e-focused-handle"),!sf.base.isNullOrUndefined($)){if(!0===$(e,this))return}this.targetEle&&L&&L.querySelector(".e-dlg-resizable")&&(j="body"===this.target?null:this.targetEle,U=this.targetEle.clientWidth,z=this.targetEle.clientHeight);var t=sf.base.isNullOrUndefined(j)?document:j;sf.base.EventHandler.add(t,"mousemove",ue,this),sf.base.EventHandler.add(document,"mouseup",he,this);for(var i=0;i<q.length;i++)ie=!L.classList.contains(q[i])}function he(e){var t="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",i="msie"===sf.base.Browser.info.name?"pointerup":"touchend",n=sf.base.isNullOrUndefined(j)?document:j,o="msie"===sf.base.Browser.info.name?"pointerdown":"touchstart";if(sf.base.EventHandler.remove(n,"mousemove",ue),sf.base.EventHandler.remove(n,t,ue),sf.base.EventHandler.remove(n,o,ue),sf.base.isNullOrUndefined(document.body.querySelector(".e-focused-handle"))||document.body.querySelector(".e-focused-handle").classList.remove("e-focused-handle"),!sf.base.isNullOrUndefined(te)){te(e,this)}sf.base.EventHandler.remove(document,"mouseup",he),sf.base.EventHandler.remove(document,i,he)}function pe(){Y=parseFloat(getComputedStyle(L,null).getPropertyValue("width").replace("px","")),X=parseFloat(getComputedStyle(L,null).getPropertyValue("height").replace("px","")),G=L.getBoundingClientRect().left,J=L.getBoundingClientRect().top}function ce(e){L=e.target.parentElement,pe();var t=L.classList.contains("e-dialog");(e.target.classList.contains("e-resize-handle")||e.target.classList.contains("e-dialog-border-resize"))&&t&&e.target.classList.add("e-focused-handle");var i=e.touches?e.changedTouches[0]:e;if(K=i.pageX,Q=i.pageY,!sf.base.isNullOrUndefined($)){if(!0===$(e,this))return}var n="msie"===sf.base.Browser.info.name?"pointermove":"touchmove",o="msie"===sf.base.Browser.info.name?"pointerup":"touchend",s=sf.base.isNullOrUndefined(j)?document:j;sf.base.EventHandler.add(s,n,ue,this),sf.base.EventHandler.add(document,o,he,this)}function ue(e){if(e.target.classList.contains("e-resize-handle")&&e.target.classList.contains("e-focused-handle")?O=e.target:sf.base.isNullOrUndefined(document.body.querySelector(".e-focused-handle"))||(O=document.body.querySelector(".e-focused-handle")),!sf.base.isNullOrUndefined(O)){for(var t="",i=0;i<W.length;i++)O.classList.contains("e-"+W[i])&&(t=W[i]);if(!sf.base.isNullOrUndefined(ee)){ee(e,this)}switch(t){case"south":me(e);break;case"north":ge(e);break;case"west":we(e);break;case"east":ye(e);break;case"south-east":me(e),ye(e);break;case"south-west":me(e),we(e);break;case"north-east":ge(e),ye(e);break;case"north-west":ge(e),we(e)}}}function fe(e){return e.getBoundingClientRect()}function me(e){var t,i=document.documentElement.clientHeight,n=!1,o=(e.touches?e.changedTouches[0]:e).pageY,s=fe(L);sf.base.isNullOrUndefined(j)||(t=fe(j)),sf.base.isNullOrUndefined(j)?sf.base.isNullOrUndefined(j)&&(i-o>=0||s.top<0)&&(n=!0):n=!0;var a=X+(o-Q);a=a>R?a:R;var r=0;sf.base.isNullOrUndefined(j)||(r=t.top);var l=sf.base.isNullOrUndefined(j)?0:j.offsetHeight-j.clientHeight,d=s.top-r-l/2;if(d=d<0?0:d,s.top>0&&d+a>z){if(n=!1,L.classList.contains("e-resize-viewport"))return;L.style.height=z-parseInt(d.toString(),10)+"px"}else{var h=0;if(n){s.top<0&&i+(s.height+s.top)>0&&a+(h=s.top)<=30&&(a=s.height-(s.height+s.top)+30),a+s.top>=z&&(L.style.height=s.height+(i-(s.height+s.top))+"px");var p=sf.base.isNullOrUndefined(j)?h:d;a>=R&&a+p<=z&&(L.style.height=a+"px")}}}function ge(e){var t,i=!1,n="mouse"===le(e.type)?e.pageY:e.touches[0].pageY,o=fe(L),s=sf.base.isNullOrUndefined(j)?0:j.offsetHeight-j.clientHeight;sf.base.isNullOrUndefined(j)||(t=fe(j)),(!sf.base.isNullOrUndefined(j)&&o.top-t.top>0||sf.base.isNullOrUndefined(j)&&n>0||!sf.base.isNullOrUndefined(j)&&Math.floor(o.top-t.top+o.height+(t.bottom-o.bottom))-s<=z)&&(i=!0);var a=X-(n-Q);if(i&&a>=R&&a<=z){var r=0;sf.base.isNullOrUndefined(j)||(r=t.top);var l=J-r+(n-Q);l=l>0?l:1,L.style.height=a+"px",L.style.top=l+"px"}}function we(e){var t,i=document.documentElement.clientWidth,n=!1;sf.base.isNullOrUndefined(j)||(t=fe(j));var o="mouse"===le(e.type)?e.pageX:e.touches[0].pageX,s=fe(L),a=sf.base.isNullOrUndefined(j)?0:j.offsetWidth-j.clientWidth,r=sf.base.isNullOrUndefined(j)?0:t.left,l=sf.base.isNullOrUndefined(j)?0:t.width;sf.base.isNullOrUndefined(_)&&(sf.base.isNullOrUndefined(j)?_=i:(_=s.left-r-a/2+s.width,_+=l-a-_)),(!sf.base.isNullOrUndefined(j)&&Math.floor(s.left-t.left+s.width+(t.right-s.right))-a<=U||sf.base.isNullOrUndefined(j)&&o>=0)&&(n=!0);var d=Y-(o-K);if(ie&&(d=d>_?_:d),n&&d>=H&&d<=U){var h=0;sf.base.isNullOrUndefined(j)||(h=t.left);var p=G-h+(o-K);p=p>0?p:1,d!==ne&&oe&&(L.style.width=d+"px"),ie&&(L.style.left=p+"px",oe=1!==p)}ne=d}function ye(e){var t,i=document.documentElement.clientWidth,n=!1;sf.base.isNullOrUndefined(j)||(t=fe(j));var o=(e.touches?e.changedTouches[0]:e).pageX,s=fe(L);(!sf.base.isNullOrUndefined(j)&&(s.left-t.left+s.width<=U||s.right-t.left>=s.width)||sf.base.isNullOrUndefined(j)&&i-o>0)&&(n=!0);var a=Y+(o-K),r=0;if(sf.base.isNullOrUndefined(j)||(r=t.left),s.left-r+a>U){if(n=!1,L.classList.contains("e-resize-viewport"))return;L.style.width=U-(s.left-r)+"px"}n&&a>=H&&a<=U&&(L.style.width=a+"px")}return e.calculatePosition=l,e.calculateRelativeBasedPosition=function(e,t){var i=!1,n={left:0,top:0},o=e;if(!e||!t)return n;for(sf.base.isNullOrUndefined(t.offsetParent)&&"fixed"===t.style.position&&(i=!0);(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;for(e=o;(t.offsetParent||i)&&e&&t.offsetParent!==e;)n.left-=e.scrollLeft,n.top-=e.scrollTop,e=e.parentElement;return n},e.createResize=function(e){$=e.resizeBegin,ee=e.resizing,te=e.resizeComplete,L=ae(e.element),j=ae(e.boundary);for(var t=e.direction.split(" "),i=0;i<t.length;i++)if(Z.indexOf(t[i])>=0&&t[i])se(t[i]);else if(""!==t[i].trim()){var n=sf.base.createElement("div",{className:"e-icons e-resize-handle e-"+t[i]});L.appendChild(n)}R=e.minHeight,H=e.minWidth,U=e.maxWidth,z=e.maxHeight,e.proxy&&e.proxy.element&&e.proxy.element.classList.contains("e-dialog")?re(e.proxy):re()},e.destroy=function(){a=null,s=null},e.fit=function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var o=e.getBoundingClientRect();if(a=t,s=e.ownerDocument,n||(n=l(e,"left","top")),i.X){var r=a?V():F(),d=T(),h=E(),p=d-n.left,c=n.left+o.width-h;o.width>r?n.left=p>0&&c<=0?h-o.width:c>0&&p<=0?d:p>c?h-o.width:d:p>0?n.left+=p:c>0&&(n.left-=c)}if(i.Y){var u=a?C():N(),f=M(),m=B(),g=f-n.top,w=n.top+o.height-m;o.height>u?n.top=g>0&&w<=0?m-o.height:w>0&&g<=0?f:g>w?m-o.height:f:g>0?n.top+=g:w>0&&(n.top-=w)}return n},e.flip=function(e,t,i,n,o,r,d,h,p){if(void 0===d&&(d=null),void 0===h&&(h={X:!0,Y:!0}),t&&e&&o&&r&&(h.X||h.Y)){var c,u={TL:null,TR:null,BL:null,BR:null},f={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(e).display){var m=e.style.visibility;e.style.visibility="hidden",e.style.display="block",c=e.getBoundingClientRect(),e.style.removeProperty("display"),e.style.visibility=m}else c=e.getBoundingClientRect();var g={posX:o,posY:r,offsetX:i,offsetY:n,position:{left:0,top:0}};a=d,s=t.ownerDocument,function(e,t,i,n,o){i.position=l(e,i.posX,i.posY,n,o),t.TL=l(e,"left","top",n,o),t.TR=l(e,"right","top",n,o),t.BR=l(e,"left","bottom",n,o),t.BL=l(e,"right","bottom",n,o)}(t,u,g,p,c),S(f,g,c),h.X&&function e(t,i,n,o,s,a){var r=A(i.TL.left,i.TR.left);n.TL.left-D()<=T()&&(r.leftSide=!1);n.TR.left>E()&&(r.rightSide=!1);(r.leftSide&&!r.rightSide||!r.leftSide&&r.rightSide)&&("right"===o.posX?o.posX="left":o.posX="right",o.offsetX=o.offsetX+s.width,o.offsetX=-1*o.offsetX,o.position=l(t,o.posX,o.posY,!1),S(i,o,s),a&&e(t,i,n,o,s,!1))}(t,f,u,g,c,!0),h.Y&&u.TL.top>-1&&function e(t,i,n,o,s,a){var r=x(i.TL.top,i.BL.top);n.TL.top-P()<=M()&&(r.topSide=!1);n.BL.top>=B()&&t.getBoundingClientRect().bottom<window.innerHeight&&(r.bottomSide=!1);(r.topSide&&!r.bottomSide||!r.topSide&&r.bottomSide)&&("top"===o.posY?o.posY="bottom":o.posY="top",o.offsetY=o.offsetY+s.height,o.offsetY=-1*o.offsetY,o.position=l(t,o.posX,o.posY,!1,s),S(i,o,s),a&&e(t,i,n,o,s,!1))}(t,f,u,g,c,!0),function(e,t,i){var n=0,o=0;if(null!=e.offsetParent&&("absolute"===getComputedStyle(e.offsetParent).position||"relative"===getComputedStyle(e.offsetParent).position)){var s=l(e.offsetParent,"left","top",!1,i);n=s.left,o=s.top}var a=1,r=1,d=b(e);if(d){var h=getComputedStyle(d).transform;if("none"!==h){var p=new DOMMatrix(h);a=p.a,r=p.d}if("none"!==getComputedStyle(d).zoom){var c=v(document.body);a*=c,r*=c}}e.style.top=t.position.top/r+t.offsetY-o/r+"px",e.style.left=t.position.left/a+t.offsetX-n/a+"px"}(e,g,c)}},e.getTransformElement=b,e.getZoomValue=v,e.isCollide=function(e,t,i,n){void 0===t&&(t=null);var o=l(e,"left","top");i&&(o.left=i),n&&(o.top=n);var r=[];a=t,s=e.ownerDocument;var d=e.getBoundingClientRect(),h=o.top,p=o.left,c=o.left+d.width,u=x(h,o.top+d.height),f=A(p,c);return u.topSide&&r.push("top"),f.rightSide&&r.push("right"),f.leftSide&&r.push("left"),u.bottomSide&&r.push("bottom"),r},e.removeResize=function(){for(var e=L.querySelectorAll(".e-resize-handle"),t=0;t<e.length;t++)sf.base.detach(e[t]);var i=L.querySelectorAll(".e-dialog-border-resize");if(!sf.base.isNullOrUndefined(i))for(t=0;t<i.length;t++)sf.base.detach(i[t])},e.resizeDestroy=function(){L=null,O=null,j=null,_=null,$=null,ee=null,te=null},e.setMaxHeight=function(e){z=e},e.setMaxWidth=function(e){U=e},e.setMinHeight=function(e){R=e},e}({}))},"./modules/sf-colorpicker.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ColorPicker=function(){"use strict";var e=function(){function e(e,t,i,n){this.dataId=e,this.element=t,this.dotnetRef=i,this.inline=n,window.sfBlazor.setCompInstance(this),n&&(this.addScrollEvents(!0),this.setPaletteWidth(this.element.querySelector(".e-container"),!1))}return e.prototype.getOffset=function(e){var t=e.querySelector(".e-hsv-container");if(!t)return{IsDevice:sf.base.Browser.isDevice};var i=t.getBoundingClientRect(),n=t.querySelector(".e-hsv-color"),o=t.querySelector(".e-handler");return o&&o.focus(),{Left:i.left,Top:i.top,Width:i.width,Height:i.height,Right:i.right,ClientLeft:n.offsetLeft,ClientTop:n.offsetTop,ClientWidth:n.offsetWidth-o.offsetWidth/2.5,ClientHeight:n.offsetHeight-o.offsetHeight/2.5,IsDevice:sf.base.Browser.isDevice}},e.prototype.setOffset=function(e,t){var i=this.getOffset(e);t&&!sf.base.Browser.isDevice&&(this.setZIndex(this.element,t,".e-split-colorpicker"),this.setZIndex(this.element,t,".e-dropdown-btn")),i&&this.dotnetRef.invokeMethodAsync("SetOffset",i)},e.prototype.setZIndex=function(e,t,i){var n=e.querySelector(i);n&&(n.style.zIndex=t+1+"")},e.prototype.removeZIndex=function(){var e=this.element.querySelector(".e-split-colorpicker"),t=this.element.querySelector(".e-dropdown-btn");e&&(e.style.zIndex=""),t&&(t.style.zIndex="")},e.prototype.setPaletteWidth=function(e,t,i){if(sf.base.Browser.isDevice&&!sf.base.isNullOrUndefined(i)){var n=e.querySelector(".e-colorpicker.e-modal");n&&(n.style.zIndex=i-1+"",document.body.insertBefore(n,e.parentElement),n.style.display="")}if(e.querySelector(".e-hsv-container"))e.style.width="";else{var o=parseInt(getComputedStyle(e).borderBottomWidth,10);e.style.width=e.children[0].offsetWidth+o+o+"px";var s=e.querySelector(".e-selected-value");s&&(s.style.width="100%",(s=e.querySelector(".e-switch-ctrl-btn"))&&(s.style.width="100%"))}if(t){var a=window.sfBlazor.getCompInstance(this.dataId);a.element.querySelector(".sf-colorpicker")&&sf.base.Browser.isDevice&&(a=window.sfBlazor.getCompInstance(a.element.parentElement.getAttribute("dataid")))&&a.setPosition(-1===a.element.id.indexOf("imageEditor"))}},e.prototype.scrollHandler=function(e){this.element.parentElement?this.setOffset(this.element):sf.base.EventHandler.remove(e.target,"scroll",this.scrollHandler)},e.prototype.addScrollEvents=function(e){for(var t=0,i=sf.popups.getScrollableParent(this.element);t<i.length;t++){var n=i[t];e?sf.base.EventHandler.add(n,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(n,"scroll",this.scrollHandler)}e?sf.base.EventHandler.add(this.element,"keydown",this.paletteKeyDown,this):sf.base.EventHandler.remove(this.element,"keydown",this.paletteKeyDown)},e.prototype.focusIn=function(e,t){if(t){var i=e.querySelector(".e-container");i&&(i.classList.contains("e-color-palette")?this.setFocus(".e-palette"):this.setFocus(".e-handler"))}else this.setFocus(".e-split-colorpicker")},e.prototype.setFocus=function(e){var t=this.element.querySelector(e);if(this.element&&this.element.parentElement){var i=window.sfBlazor.getCompInstance(this.element.parentElement.getAttribute("dataid"));i&&i.element.classList.contains("e-dropdown-btn")&&(t=i.element)}t&&t.focus()},e.prototype.paletteKeyDown=function(e,t){var i=e.target;if(i.classList.contains("e-palette")||i.classList.contains("e-tile")){var n=void 0,o=void 0,s=void 0;i.classList.contains("e-tile")&&"SPAN"===i.tagName&&(i=i.offsetParent.querySelector(".e-palette"));var a=[].slice.call(sf.base.selectAll(".e-tile",i)),r=a.filter((function(e){return e.classList.contains("e-selected")})).pop(),l=i.parentElement;switch(!e.altKey&&e.keyCode){case 39:e.preventDefault(),s=(n=r?a[this.tilePosition(a,r,t?-1:1)]:a[t?a.length-1:0]).getAttribute("aria-label"),this.keySelectionChanges(n,l,s);break;case 37:e.preventDefault(),s=(n=r?a[this.tilePosition(a,r,t?1:-1)]:a[t?0:a.length-1]).getAttribute("aria-label"),this.keySelectionChanges(n,l,s);break;case 38:e.preventDefault(),o=r?this.tilePosition(a,r,-10):0,s=(n=a[parseInt(o.toString(),10)]?a[parseInt(o.toString(),10)]:a[o-10]).getAttribute("aria-label"),this.keySelectionChanges(n,l,s);break;case 40:e.preventDefault(),o=r?this.tilePosition(a,r,10):a.length-1,a[parseInt(o.toString(),10)]||(o%=a.length,o+=a[a.length-1].parentElement.childElementCount),s=(n=a[parseInt(o.toString(),10)]).getAttribute("aria-label"),this.keySelectionChanges(n,l,s);break;case 13:e.preventDefault(),r&&(this.dotnetRef.invokeMethodAsync("Close"),this.dotnetRef.invokeMethodAsync("Focus"))}}},e.prototype.tilePosition=function(e,t,i){var n=(e=Array.prototype.slice.call(e)).length,o=10-e[n-1].parentElement.childElementCount,s=e.indexOf(t);return(s+=i)<0?s+=n+o:s%=n+o,s},e.prototype.keySelectionChanges=function(e,t,i){this.removeTileSelection(t),this.addTileSelection(e),this.dotnetRef.invokeMethodAsync("Click",i)},e.prototype.removeTileSelection=function(e){[].slice.call(sf.base.selectAll(".e-selected",sf.base.closest(e,".sf-colorpicker"))).forEach((function(e){e.classList.remove("e-selected"),e.setAttribute("aria-selected","false")}))},e.prototype.addTileSelection=function(e){e.classList.add("e-selected"),e.setAttribute("aria-selected","true")},e}();return{initialize:function(t,i,n,o){return sf.base.isNullOrUndefined(i)?null:(new e(t,i,n,o),window.sfBlazor.getCompInstance(t).getOffset(i))},getOffset:function(e,t){var i=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(i)?null:(i.setPaletteWidth(t,!0),i.getOffset(t))},focusIn:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.focusIn(t,i)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.addScrollEvents(!1)}}}()},"./modules/sf-contextmenu.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ContextMenu=function(){"use strict";var e="e-menu-item";function t(e,i,n,o){void 0===o&&(o=0);var s=e.children[parseInt(i.toString(),10)];return o===e.childElementCount?-1:((s.classList.contains("e-separator")||s.classList.contains("e-disabled")||s.classList.contains("e-menu-hide"))&&(i=n?i===e.childElementCount-1?0:i+1:0===i?e.childElementCount-1:i-1,o++),((s=e.children[parseInt(i.toString(),10)]).classList.contains("e-separator")||s.classList.contains("e-disabled")||s.classList.contains("e-menu-hide"))&&(i=t(e,i,n)),i)}var i="e-menu-parent",n="CloseMenuAsync",o="mousedown touchstart",s=function(){function s(e,t,i,n,o,s,a,r,l){this.animation=new sf.base.Animation({}),this.dataId=e,this.element=t,this.target=i,this.filter=n,this.showOn=o,this.closeOn=s,this.dotnetRef=r,this.enableScrolling=a,this.animationSettings=l,window.sfBlazor.setCompInstance(this),this.addContextMenuEvent(),this.addEventListener()}return s.prototype.addContextMenuEvent=function(e){var t;if(void 0===e&&(e=!0),this.target){var i=sf.base.selectAll(this.target);if(i.length){for(var n=0,o=i.length;n<o;n++)if(t=i[parseInt(n.toString(),10)],e)sf.base.Browser.isIos?new sf.base.Touch(t,{tapHold:this.touchHandler.bind(this)}):sf.base.EventHandler.add(t,this.showOn,this.cmenuHandler,this);else if(sf.base.Browser.isIos){var s=sf.base.getInstance(t,sf.base.Touch);s&&s.destroy()}else sf.base.EventHandler.remove(t,this.showOn,this.cmenuHandler);if(sf.base.isNullOrUndefined(this.targetElement)&&(this.targetElement=t),e){sf.base.EventHandler.add(this.targetElement,"scroll",this.scrollHandler,this);for(var a=0,r=sf.popups.getScrollableParent(this.targetElement);a<r.length;a++){var l=r[a];sf.base.EventHandler.add(l,"scroll",this.scrollHandler,this)}}else{var d=void 0;this.targetElement.parentElement?(sf.base.EventHandler.remove(this.targetElement,"scroll",this.scrollHandler),d=sf.popups.getScrollableParent(this.targetElement)):d=sf.popups.getScrollableParent(t);for(var h=0,p=d;h<p.length;h++){var c=p[h];sf.base.EventHandler.remove(c,"scroll",this.scrollHandler)}this.targetElement=null}}}},s.prototype.scrollHandler=function(){if(sf.base.select("."+i,this.element)&&(this.dotnetRef.invokeMethodAsync(n,0,!1,!0,!1),this.enableScrolling)){var e=this;setTimeout((function(){e.destroyScroll()}),100)}},s.prototype.vscrollHandler=function(){var e=this.element.querySelector(".e-menu-parent");null!=e&&e.classList.contains("e-transparent")&&e.classList.remove("e-transparent")},s.prototype.touchHandler=function(e){this.cmenuHandler(e.originalEvent)},s.prototype.keyDownHandler=function(n){var o=n.target.classList;(o.contains("e-menu-item")||o.contains(i))&&n.preventDefault(),function(i,n,o,s){if(9===o&&s&&(o=39),40===o||38===o){var a=void 0,r=void 0,l=void 0;n.classList.contains("e-menu-parent")?((l=(r=n).querySelector("."+e+".e-focused"))?(a=Array.prototype.indexOf.call(r.children,l),a=40===o?a===r.childElementCount-1?0:a+1:0===a?r.childElementCount-1:a-1):a=0,a=t(r,a,40===o)):n.classList.contains(e)&&(l=(r=n.parentElement).querySelector("."+e+".e-focused"),a=Array.prototype.indexOf.call(r.children,l||n),a=t(r,a=40===o?a===r.childElementCount-1?0:a+1:0===a?r.childElementCount-1:a-1,40===o)),r&&-1!==a&&r.children[parseInt(a.toString(),10)].focus()}else if(((i.classList.contains("e-rtl")?39===o:37===o)||27===o||39===o&&!n.classList.contains("e-menu-caret-icon")&&s||13===o&&sf.base.closest(n,".e-menu-container"))&&(n.classList.contains("e-ul")||n.classList.contains(e)&&!n.parentElement.classList.contains("e-contextmenu"))){var d=void 0;s&&(d=sf.base.select(s));r=n.classList.contains("e-ul")?n:n.parentElement;var h=sf.base.closest(r,".e-menu-vscroll"),p=void 0,c=h?h.previousElementSibling:r.previousElementSibling;if(!d||c&&13!==o){var u=sf.base.closest(r,".e-hamburger");p=u?sf.base.select("."+e+".e-selected",u):sf.base.select("."+e+".e-selected",c)}else p=sf.base.select("."+e+".e-selected",d),(h=sf.base.select(".e-menu-vscroll",i))&&d.blazor__instance.destroyScroll("none");p&&p.focus()}}(this.element,n.target,n.keyCode,this.menuId)},s.prototype.cmenuHandler=function(e){if(this.cmTarget=e.target,this.filter){for(var t=!1,i=this.filter.split(" "),n=0,s=i.length;n<s;n++)if(sf.base.closest(e.target,i[parseInt(n.toString(),10)])){t=!0;break}if(!t)return}e.preventDefault(),e.stopPropagation();var a=e.changedTouches?e.changedTouches[0].clientX:e.clientX,r=e.changedTouches?e.changedTouches[0].clientY:e.clientY;if("mouseover"===this.showOn){var l=this.cmTarget.getBoundingClientRect();l.right>a&&a>l.right-5&&(a-=10),l.bottom>r&&r>l.bottom-5&&(r-=10)}this.closeOn!==o&&(sf.base.EventHandler.remove(e.target,this.showOn,this.cmenuHandler),"mouseleave"===this.closeOn?sf.base.EventHandler.add(e.target,this.closeOn,this.mouseLeaveHandler,this):sf.base.EventHandler.add(document,this.closeOn,this.delegateMouseDownHandler,this)),this.dotnetRef.invokeMethodAsync("OpenContextMenuAsync",Math.ceil(a),Math.ceil(r),this.cmTarget.id)},s.prototype.mouseLeaveHandler=function(e,t){var i=this.cmTarget.getBoundingClientRect(),o=i.top<e.clientY&&i.bottom-3>e.clientY;if(!(i.left<e.clientX&&i.right>e.clientX)||!o||t){if(this.dotnetRef.invokeMethodAsync(n,0,!1,!0,!1),this.enableScrolling){var s=this;setTimeout((function(){s.destroyScroll()}),100)}sf.base.EventHandler.remove(this.cmTarget,this.closeOn,this.mouseLeaveHandler),sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this)}},s.prototype.clickHandler=function(e){e&&(sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this),"mouseleave"===this.closeOn?sf.base.EventHandler.remove(this.cmTarget,this.closeOn,this.mouseLeaveHandler):sf.base.EventHandler.remove(document,this.closeOn,this.delegateMouseDownHandler)),this.enableScrolling&&this.destroyScroll(null,!0)},s.prototype.contextMenuPosition=function(e,t,i,n,o,s,a){var r=this.hideMenu(!0);if(r){this.subMenuOpen=!1,this.setBlankIconStyle(r,i);var l=r.getBoundingClientRect(),d=this.getMenuWidth(r,l.width,i);if(n&&a)return r.style.width=Math.ceil(d)+"px",void(r.style.visibility="");if(o){if(t+l.height>document.documentElement.clientHeight){var h=document.documentElement.clientHeight-l.height-20;h>document.documentElement.clientTop&&(t=h)}if(e+d>document.documentElement.clientWidth){var p=document.documentElement.clientWidth-d-20;p>document.documentElement.clientLeft&&(e=p)}}var c=(r=this.updateScroll(s,r)).classList.contains("e-menu-parent")?r:sf.base.select(".e-menu-parent",r);this.element.style.top=Math.ceil(t+1)+scrollY+"px",this.element.style.left=Math.ceil(e+1)+scrollX+"px",r.style.width=Math.ceil(d)+"px",this.element.style.zIndex=sf.popups.getZindexPartial(this.element).toString(),r.style.visibility="",c.style.visibility="",r.focus()}},s.prototype.setBlankIconStyle=function(e,t){var i=[].slice.call(e.getElementsByClassName("e-blankicon")),n=t?{padding:"paddingRight",cssSelector:"padding-right",margin:"marginLeft"}:{padding:"paddingLeft",cssSelector:"padding-left",margin:"marginRight"};if([].slice.call(e.querySelectorAll('.e-menu-item[style*="'+n.cssSelector+'"]:not(.e-blankicon)')).forEach((function(e){e.style[n.padding]=""})),i.length){var o=e.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)"),s=o.querySelector(".e-menu-icon");if(s){var a=getComputedStyle(s),r=parseInt(a.fontSize,10);parseInt(a.width,10)&&parseInt(a.width,10)>r&&(r=parseInt(a.width,10));var l=r+parseInt(a[n.margin],10)+parseInt(getComputedStyle(o)[n.padding],10)+"px";i.forEach((function(e){e.style[n.padding]=l}))}}},s.prototype.getMenuWidth=function(e,t,i){var n=e.getElementsByClassName("e-caret")[0];return n&&(t+=parseInt(getComputedStyle(n)[i?"marginRight":"marginLeft"],10)),t<120?120:t},s.prototype.addEventListener=function(){this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),this.delegateMouseOverHandler=this.mouseOverHandler.bind(this),this.closeOn===o&&sf.base.EventHandler.add(document,o,this.delegateMouseDownHandler,this),sf.base.EventHandler.add(document,"mouseover",this.delegateMouseOverHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this)},s.prototype.removeEventListener=function(){sf.base.EventHandler.remove(document,o,this.delegateMouseDownHandler),sf.base.EventHandler.remove(document,"mouseover",this.delegateMouseOverHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler)},s.prototype.mouseDownHandler=function(e){this.isShowItemOnClick&&this.animationElement&&sf.base.closest(e.target,"#"+this.element.id)&&sf.base.Animation.stop(this.animationElement);var t=e.target;if("DIV"!==t.tagName&&"SPAN"!==t.tagName||!t.classList.contains("scroll")&&!t.classList.contains("arrow"))if(document.getElementById(this.element.id)){if(!(/^\d+$/.test(this.element.id)||!this.element.id.includes("sfcontextmenu")?this.getClosest(e.target,this.element.id):sf.base.closest(e.target,"#"+this.element.id))&&(sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(e.target,this.menuId))&&sf.base.select("."+i,this.element)){if(sf.base.closest(sf.base.select("."+i,this.element),".e-dropdown-popup")||this.dotnetRef.invokeMethodAsync(n,0,!1,!0,!1),this.enableScrolling){var s=this;setTimeout((function(){s.destroyScroll()}),100)}this.closeOn!==o&&(sf.base.EventHandler.remove(document,this.closeOn,this.delegateMouseDownHandler),sf.base.EventHandler.add(this.cmTarget,this.showOn,this.cmenuHandler,this))}}else this.removeEventListener()},s.prototype.getClosest=function(e,t){for(var i=null,n=e;n;){if(n.id===t){i=n;break}n=n.parentElement}return i},s.prototype.isHavingChild=function(e){return e&&"LI"===e.tagName&&e.className.indexOf("e-menu-item")<0&&(e=e.closest(".e-menu-item")),!!(e&&"LI"===e.tagName&&e.className.indexOf("e-menu-item")>-1&&e.className.indexOf("e-menu-caret-icon")>-1)},s.prototype.mouseOverHandler=function(e){var t=e.target;if("DIV"!==t.tagName&&"SPAN"!==t.tagName||!(t.className.indexOf("scroll")>-1||t.className.indexOf("arrow")>-1))if(document.getElementById(this.element.id)){var o=[].slice.call(sf.base.selectAll("."+i,this.element));if(o.length){var s=sf.base.closest(t,".e-scroll-nav");if(this.enableScrolling&&!this.isHavingChild(t)){var a=this;setTimeout((function(){for(var e=[].slice.call(sf.base.selectAll(".e-menu-vscroll",this.element)),i=0;i<e.length;i++)t&&"LI"===t.tagName&&t.className.indexOf("e-menu-item")<0&&(t=t.closest(".e-menu-item")),t&&t.parentElement!==e[parseInt(i.toString(),10)].querySelectorAll(".e-menu-parent")[0]&&i===e.length-1&&a.destroyScroll(e[parseInt(i.toString(),10)])}),100)}if(this.subMenuOpen&&(o.length>1||!sf.base.isNullOrUndefined(this.menuId)&&!s)){if(!(/^\d+$/.test(this.element.id)||!this.element.id.includes("sfcontextmenu")?this.getClosest(t,this.element.id):sf.base.closest(t,"#"+this.element.id))&&(sf.base.isNullOrUndefined(this.menuId)||!sf.base.closest(t,this.menuId))||s){var r=1;if(!sf.base.isNullOrUndefined(this.menuId)&&(r=0,s&&(r=o.indexOf(sf.base.select("."+i,s.parentElement))+1)===o.length))return;if(this.dotnetRef.invokeMethodAsync(n,r,!1,!0,!1),this.enableScrolling){var l=this;setTimeout((function(){for(var e=r;e<o.length;e++)l.destroyScroll(o[parseInt(e.toString(),10)])}),100)}"mouseleave"===this.closeOn&&(this.mouseLeaveHandler(e),sf.base.EventHandler.remove(this.menuTarget,this.closeOn,this.menuMouseLeave)),sf.base.isNullOrUndefined(this.menuId)||sf.base.closest(t,".e-scroll-nav")||this.destroyMenuScroll(null)}var d=void 0;d=/^\d+$/.test(this.element.id)||!this.element.id.includes("sfcontextmenu")?this.getClosest(t,this.element.id):sf.base.closest(t,"#"+this.element.id),sf.base.isNullOrUndefined(this.menuId)||!d&&!sf.base.closest(t,this.menuId)||!sf.base.closest(t,".e-menu-item")||sf.base.closest(t,".e-selected")||this.destroyMenuScroll(sf.base.closest(t,"."+i))}else"mouseleave"===this.closeOn&&t.classList.contains("e-menu-item")&&(this.menuTarget=t.parentElement,sf.base.EventHandler.add(this.menuTarget,this.closeOn,this.menuMouseLeave,this));if(!this.openAsMenu){var h=document.activeElement;d=void 0;if(!(d=/^\d+$/.test(this.element.id)||!this.element.id.includes("sfcontextmenu")?this.getClosest(h,this.element.id):sf.base.closest(h,"#"+this.element.id))&&o.length&&"BODY"===h.tagName){var p=this.getLastMenu();p&&p.focus()}}}}else this.removeEventListener()},s.prototype.menuMouseLeave=function(e){var t=this.menuTarget.getBoundingClientRect(),i=t.top<e.clientY&&t.bottom>e.clientY;t.left<e.clientX&&t.right>e.clientX&&i||(this.mouseLeaveHandler(e,!0),sf.base.EventHandler.remove(this.menuTarget,this.closeOn,this.menuMouseLeave))},s.prototype.destroyMenuScroll=function(e){if(sf.base.select(".e-menu-vscroll",this.element)){var t=window.sfBlazor.getCompInstance(this.dataId);sf.base.isNullOrUndefined(t)||t.destroyScroll("none",e)}},s.prototype.hideMenu=function(e){var t;if(e){if(!(t=sf.base.select("."+i,this.element))||sf.base.isNullOrUndefined(this.element.parentElement))return null;this.element.parentElement===document.body||this.element.parentElement.classList.contains("e-dropDown-button")||document.body.appendChild(this.element)}else{var n=sf.base.selectAll("."+i,this.element);if(n.length<2)return null;t=n[n.length-1]}return t.style.width="",t.style.visibility="hidden",t.classList.remove("e-transparent"),t},s.prototype.subMenuPosition=function(e,t,n,o,s,a,r){if(e){var l=sf.base.selectAll("."+i,this.element),d=l[l.length-2].querySelector(".e-menu-item.e-selected").getBoundingClientRect(),h=this.element.getBoundingClientRect(),p=e.classList.contains(i)?e:sf.base.select("."+i,e);this.setBlankIconStyle(p,t);var c,u,f=p.getBoundingClientRect(),m=this.getMenuWidth(p,f.width,t);t?(u=parseInt(getComputedStyle(p).borderWidth,10),c=d.left-m-h.left):c="mouseleave"===this.closeOn?d.right-h.left-10:d.right-h.left;var g=d.top-h.top;if(t)d.left-u-m<document.documentElement.clientLeft&&d.right+m<document.documentElement.clientWidth&&(c=d.right-h.left);else if(d.right+m>document.documentElement.clientWidth){var w=d.left-m;w>document.documentElement.clientLeft&&(c=w-h.left,"mouseleave"===this.closeOn&&(c=w-h.left+10))}var y=s||f.height;if(d.top+y>document.documentElement.clientHeight){var v=document.documentElement.clientHeight-y-20;v>document.documentElement.clientTop&&(g=v-h.top)}a&&(e=this.updateScroll(s,e)).className.indexOf("scroll")>-1&&(p.style.left="0px",p.style.top="0px"),this.subMenuOpen=!n,e.style.left=Math.ceil(c)+"px",e.style.top=Math.ceil(g)+"px",e.style.width=Math.ceil(m)+"px",p.style.visibility="";var b=p.querySelector(".e-menu-item.e-focused");b?b.focus():r&&p.focus(),o&&(this.openAsMenu=!0)}},s.prototype.updateScroll=function(e,t){if(this.enableScrolling){this.destroyScroll(t),e>0&&t&&(t=sf.navigations.addScrolling(sf.base.createElement,this.element,t,"vscroll",!1,e));var i=this.element.querySelector(".e-vscroll-bar");i&&sf.base.EventHandler.add(i,"scroll",this.vscrollHandler,this)}return t},s.prototype.destroyScroll=function(e,t){sf.base.selectAll(".e-menu-vscroll",this.element).forEach((function(i){(t&&!i.querySelector("ul")||!t)&&sf.navigations.destroyScroll(sf.base.getInstance(i,sf.navigations.VScroll),i,e)}))},s.prototype.getLastMenu=function(){var e=sf.base.selectAll("."+i,this.element);return e.length?e[e.length-1]:null},s.prototype.onPropertyChanged=function(e,t){switch(e){case"Target":this.addContextMenuEvent(!1),this.target=t,this.addContextMenuEvent();break;case"Filter":this.filter=t;break;case"ShowOn":this.addContextMenuEvent(!1),this.showOn=t,this.addContextMenuEvent()}},s.prototype.destroy=function(e){this.removeEventListener(),this.addContextMenuEvent(!1),e&&e.parentElement&&e.previousElementSibling!==this.element&&e.parentElement.insertBefore(this.element,e),e&&e.parentElement||!this.element.parentElement||this.element.parentElement!==document.body||document.body.removeChild(this.element)},s.prototype.updateProperty=function(e,t){t&&(this.menuId="#"+t.id),this.subMenuOpen=!e},s.prototype.toggleContextMenuAnimation=function(e,t){"None"!==t.effect&&(this.animationElement=e,this.animation.animate(e,{name:t.effect,duration:t.duration,timingFunction:t.easing,begin:function(e){e.element&&e.element.parentElement&&(e.element.parentElement.style.height=e.element.offsetHeight+"px")},end:function(e){e.element&&e.element.parentElement&&(e.element.parentElement.style.height="")}}))},s}();return{initialize:function(e,t,i,n,o,a,r,l,d){sf.base.isNullOrUndefined(t)||new s(e,t,i,n,o,a,r,l,d)},contextMenuPosition:function(e,t,i,n,o,s,a,r){var l=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(l)&&(l.contextMenuPosition(t,i,n,o,s,a,r),null!=l.animationSettings)){var d=sf.base.select(".e-contextmenu.e-menu-parent",l.element);l.animationSettings=l.animationSettings,l.enableScrolling&&d&&sf.base.closest(d,".e-menu-vscroll")&&(d=sf.base.closest(d,".e-menu-vscroll")),l.toggleContextMenuAnimation(d,l.animationSettings)}},subMenuPosition:function(e,t,i,n,o){var s=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(s)){s.animationElement&&s.animationSettings&&sf.base.Animation.stop(s.animationElement),s.isShowItemOnClick=i;var a=s.hideMenu();if(s.subMenuPosition(a,t,i,n,o,!0),null!=s.animationSettings){var r=a;s.enableScrolling&&a&&sf.base.closest(a,".e-menu-vscroll")&&(r=sf.base.closest(a,".e-menu-vscroll")),s.toggleContextMenuAnimation(r,s.animationSettings)}}},toggleAnimation:function(e){var t=window.sfBlazor.getCompInstance(e);t&&null!=t.animationSettings&&t.animationElement&&t.toggleContextMenuAnimation(t.animationElement,t.animationSettings)},onPropertyChanged:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.onPropertyChanged(t,i)},click:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.clickHandler(t)},destroy:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.destroy(t)}}}()},"./modules/sf-dialog.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Dialog=function(){"use strict";var e="e-dlg-target",t=function(){function t(e){this.popupObj=null,this.zIndex=1e3,this.height="auto",this.width="100%",this.resizeIconDirection="SouthEast",this.visible=!0,this.isModal=!1,this.enableRtl=!1,this.enableResize=!1,this.closeOnEscape=!0,this.allowDragging=!1,this.allowMaxHeight=!0,this.allowPrerender=!1,this.hasFocusableNode=!1,this.openedEnabled=!1,this.closedEnabled=!1,this.onDragEnabled=!1,this.onDragStartEnabled=!1,this.onDragStopEnabled=!1,this.resizingEnabled=!1,this.onResizeStartEnabled=!1,this.onResizeStopEnabled=!1,this.isOpenFullScreen=!1,this.enablePersistence=!1,this.isModelResize=!1,this.dlgContainer=void 0,this.animationSettings={delay:0,duration:400,effect:"Fade"},this.position={X:"center",Y:"center"},window.sfBlazor=window.sfBlazor,this.updateContext(e),this.isInitialLoad=e.isInitial,window.sfBlazor.setCompInstance(this),this.initialize()}return t.prototype.updateContext=function(e){sf.base.extend(this,this,e)},t.prototype.initialize=function(){this.calculatezIndex=1e3===this.zIndex,(this.element instanceof Element||this.element instanceof HTMLElement)&&(this.render(),this.element.classList.remove("e-blazor-hidden"),this.setWidth(),this.setMinHeight(),this.enableResize&&(this.setResize(!0),this.isModal&&(this.isModelResize=!0),("None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&this.getMinHeight()),this.bindEvent(this.element))},t.prototype.setWidth=function(){"100%"===this.width?this.element.style.width="":(sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)}),"auto"===this.width&&this.refreshPosition())},t.prototype.setHeight=function(){sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.height)})},t.prototype.setMinHeight=function(){""!==this.minHeight&&sf.base.setStyleAttribute(this.element,{minHeight:sf.base.formatUnit(this.minHeight)})},t.prototype.render=function(){var e=this;if(this.checkPositionData(),this.targetEle=this.getTargetEle(this.target),sf.base.Browser.isDevice&&sf.base.addClass([this.element],"e-device"),sf.base.isNullOrUndefined(this.headerContent)&&(this.headerContent=this.element.querySelector(".e-dlg-header-content")),sf.base.isNullOrUndefined(this.contentEle)&&(this.contentEle=this.element.querySelector(".e-dlg-content")),this.setMaxHeight(),1e3===this.zIndex&&this.setzIndex(this.element,!1),this.allowDragging&&!sf.base.isNullOrUndefined(this.headerContent)&&this.setAllowDragging(),this.isModal&&sf.base.isNullOrUndefined(this.dlgContainer)&&(this.dlgContainer=this.element.parentElement,this.dlgOverlay=this.element.parentElement.getElementsByClassName("e-dlg-overlay")[0]),!sf.base.isNullOrUndefined(this.element.parentElement)&&(this.allowPrerender||!this.allowPrerender&&(!this.isInitialLoad||this.visible&&this.isInitialLoad))){var t=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=sf.base.createElement("div",{className:"e-dlg-ref-element"}),t.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}sf.base.isNullOrUndefined(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new sf.popups.Popup(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.targetEle,actionOnScroll:"none",enableRtl:this.enableRtl,position:{X:this.position.X,Y:this.position.Y},open:function(){e.enableResize&&e.resetResizeIcon(),e.openedEnabled?e.dotNetRef.invokeMethodAsync("OpenEvent",e.element.classList.toString()):e.focusContent()},close:function(){e.isModal&&(sf.base.addClass([e.dlgOverlay],"e-fade"),e.dlgContainer.style.display="none"),e.hasFocusableNode=!1,e.closedEnabled&&e.dotNetRef.invokeMethodAsync("CloseEvent",e.element.classList.toString()),e.popupCloseHandler()}}),this.isModal&&this.positionChange()},t.prototype.checkPositionData=function(){sf.base.isNullOrUndefined(this.position)||(this.isNumberString(this.position.X)&&(this.position.X=parseFloat(this.position.X)),this.isNumberString(this.position.Y)&&(this.position.Y=parseFloat(this.position.Y)))},t.prototype.isNumberString=function(e){return!sf.base.isNullOrUndefined(e)&&"number"!=typeof e&&/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.getTargetEle=function(e){var t;return sf.base.isNullOrUndefined(e)||"string"!=typeof e||(t=document.querySelector(e)),sf.base.isNullOrUndefined(t)?document.body:t},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight&&!sf.base.isNullOrUndefined(this.element)){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!sf.base.isNullOrUndefined(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,sf.base.Browser.isIE&&"auto"===this.height&&!sf.base.isNullOrUndefined(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setzIndex=function(e,t){this.zIndex=sf.popups.getZindexPartial(e),t&&(this.popupObj.zIndex=this.zIndex)},t.prototype.updatezIndex=function(){this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.calculatezIndex=this.element.style.zIndex===this.zIndex.toString()},t.prototype.updateTarget=function(){this.targetEle=this.getTargetEle(this.target),this.popupObj.relateTo=this.targetEle,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.targetEle.appendChild(this.dlgContainer),this.enableResize&&this.setResize(!1)},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var t=this.element.querySelector("."+this.resizeIconDirection);sf.base.isNullOrUndefined(t)||(t.style.bottom="-"+e.toString()+"px")}},t.prototype.getMouseEvtArgs=function(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type}},t.prototype.setAllowDragging=function(){var e=this,t=this;this.dragObj=new sf.base.Draggable(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(i){e.onDragStartEnabled&&t.dotNetRef.invokeMethodAsync("DragStartEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)}),i.bindEvents(i.dragElement)},drag:function(i){e.onDragEnabled&&t.dotNetRef.invokeMethodAsync("DragEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)})},dragStop:function(i){if(t.isModal){sf.base.isNullOrUndefined(t.position)||t.dlgContainer.classList.remove("e-dlg-"+t.position.X+"-"+t.position.Y);var n=document.querySelector("html").getAttribute("dir");t.element.style.position=sf.base.isNullOrUndefined(n)||"rtl"!==n?"relative":t.element.style.position}e.onDragStopEnabled&&t.dotNetRef.invokeMethodAsync("DragStopEvent",{target:{ID:i.target.id},event:t.getMouseEvtArgs(i.event)}),e.isModelResize=!1,t.element.classList.remove("e-restrict-left"),e.updatePersistData()}}),sf.base.isNullOrUndefined(this.targetEle)||(this.dragObj.dragArea=this.targetEle)},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setEnableRTL=function(){var e=this.element.querySelector(".e-resize-handle");sf.base.isNullOrUndefined(e)||e.parentElement!==this.element||(sf.popups.removeResize(),this.setResize(!1))},t.prototype.setResize=function(e){if(this.enableResize){if(!sf.base.isNullOrUndefined(this.element.querySelector(".e-icons.e-resize-handle")))return;var t=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth;this.isModal&&this.enableRtl?this.element.classList.add("e-restrict-left"):!this.isModal||this.target!==document.body&&"body"!==this.target||this.element.classList.add("e-resize-viewport"),sf.popups.createResize({element:this.element,direction:this.resizeIconDirection,minHeight:parseInt(t.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:"body"===this.target||"document.body"===this.target?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else{if(e)return;sf.popups.removeResize(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove("e-restrict-left"):this.element.classList.remove("e-resize-viewport")}},t.prototype.getMinHeight=function(){var e="0px",t="0px";sf.base.isNullOrUndefined(this.element.querySelector(".e-dlg-header-content"))||(e=getComputedStyle(this.headerContent).height);var i=sf.base.select(".e-footer-content",this.element);sf.base.isNullOrUndefined(i)||(t=getComputedStyle(i).height);var n=parseInt(e.slice(0,e.indexOf("p")),10),o=parseInt(t.slice(0,t.indexOf("p")),10);return sf.popups.setMinHeight(n+30+(isNaN(o)?0:o)),n+30+o},t.prototype.changePosition=function(e){this.isModal&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)&&this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y),this.updateContext(e),this.checkPositionData(),this.positionChange(),this.updatePersistData()},t.prototype.setOverlayZindex=function(e){var t;t=sf.base.isNullOrUndefined(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(t-1).toString(),this.dlgContainer.style.zIndex=t.toString()},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element);(sf.base.isNullOrUndefined(e)?this.element:e).focus(),this.hasFocusableNode=!0},t.prototype.getAutoFocusNode=function(e){var t=e.querySelector(".e-dlg-closeicon-btn"),i=e.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0],sf.base.isNullOrUndefined(n)){if(n=this.focusableElements(this.contentEle),!sf.base.isNullOrUndefined(n))return n;if(!sf.base.isNullOrUndefined(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else t=n;return t},t.prototype.getValidFocusNode=function(e){for(var t,i=0;i<e.length;i++){if(((t=e[i]).clientHeight>0||"a"===t.tagName.toLowerCase()&&t.hasAttribute("href"))&&t.tabIndex>-1&&!t.disabled&&!this.disableElement(t,'[disabled],[aria-disabled="true"],[type="hidden"]'))return t;t=null}return t},t.prototype.disableElement=function(e,t){var i=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(i)for(;e;e=e.parentNode)if(e instanceof Element&&i.call(e,t))return e;return null},t.prototype.focusableElements=function(e){if(!sf.base.isNullOrUndefined(e)){var t=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(t)}return null},t.prototype.getMaxHeight=function(){return sf.base.isNullOrUndefined(this.element)||sf.base.isNullOrUndefined(this.element.style)?null:this.element.style.maxHeight},t.prototype.OnPropertyChanged=function(e){this.updateContext(e);for(var t=0,i=Object.keys(e);t<i.length;t++){switch(i[t]){case"width":sf.base.setStyleAttribute(this.element,{width:sf.base.formatUnit(this.width)}),this.refreshPosition(),this.updatePersistData();break;case"height":this.setHeight(),this.refreshPosition(),this.updatePersistData();break;case"minHeight":this.setMinHeight();break;case"target":this.updateTarget();break;case"zIndex":this.updatezIndex();break;case"allowDragging":this.allowDragging?this.setAllowDragging():this.destroyDraggable();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize(!1)}}},t.prototype.fullScreen=function(t){if(t){sf.base.addClass([this.element],"e-dlg-fullscreen"),this.isModal||(this.element.style.top=document.scrollingElement.scrollTop+"px");var i=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=sf.base.isNullOrUndefined(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=i,sf.base.addClass([document.body],[e,"e-scroll-disabled"]),this.allowDragging&&!sf.base.isNullOrUndefined(this.dragObj)&&(this.dragObj.destroy(),this.dragObj=void 0)}else sf.base.removeClass([this.element],"e-dlg-fullscreen"),sf.base.removeClass([document.body],[e,"e-scroll-disabled"]),this.allowDragging&&!sf.base.isNullOrUndefined(this.headerContent)&&sf.base.isNullOrUndefined(this.dragObj)&&this.setAllowDragging()},t.prototype.show=function(t,i){if(this.isOpenFullScreen=t,!this.element.classList.contains("e-popup-open")||!sf.base.isNullOrUndefined(t)){sf.base.isNullOrUndefined(t)||this.fullScreen(t),this.element.style.maxHeight!==i&&(this.allowMaxHeight=!1,this.element.style.maxHeight=i),this.storeActiveElement=document.activeElement,this.element.tabIndex=-1,this.isModal&&sf.base.isNullOrUndefined(this.dlgOverlay)&&(this.dlgOverlay=this.element.parentElement.querySelector(".e-dlg-overlay")),this.isModal&&!sf.base.isNullOrUndefined(this.dlgOverlay)&&(this.dlgOverlay.style.display="block",this.dlgContainer.style.display="flex",sf.base.removeClass([this.dlgOverlay],"e-fade"),sf.base.isNullOrUndefined(this.targetEle)?sf.base.addClass([document.body],[e,"e-scroll-disabled"]):(this.targetEle===document.body?this.dlgContainer.style.position="fixed":this.dlgContainer.style.position="absolute",this.dlgOverlay.style.position="absolute",this.element.style.position="relative",sf.base.addClass([this.targetEle],[e,"e-scroll-disabled"])));var n={name:"None"===this.animationSettings.effect&&"Enable"===sf.base.animationMode?"Fade":this.animationSettings.effect+"In",duration:this.animationSettings.duration,delay:this.animationSettings.delay},o=this.isModal?this.element.parentElement:this.element;this.calculatezIndex&&(this.setzIndex(o,!0),sf.base.setStyleAttribute(this.element,{zIndex:this.zIndex}),this.isModal&&this.setOverlayZindex(this.zIndex)),"None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?this.popupObj.show():this.popupObj.show(n)}},t.prototype.hide=function(){(this.isModal||this.isOpenFullScreen)&&sf.base.removeClass([this.targetEle,document.body],[e,"e-scroll-disabled"]);var t={name:"None"===this.animationSettings.effect&&"Enable"===sf.base.animationMode?"Fade":this.animationSettings.effect+"Out",duration:this.animationSettings.duration,delay:this.animationSettings.delay};return sf.base.isNullOrUndefined(this.popupObj)||("None"===this.animationSettings.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode?this.popupObj.hide():this.popupObj.hide(t)),this.allowPrerender||this.destroyRefElement(this.isModal),this.element.classList.toString()},t.prototype.refreshPosition=function(){this.isModal&&isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))?(this.element.style.top=this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.popupObj.refreshPosition()},t.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},t.prototype.destroyDraggable=function(){sf.base.isNullOrUndefined(this.dragObj)||(this.dragObj.destroy(),this.dragObj=void 0)},t.prototype.destroyRefElement=function(e){sf.base.isNullOrUndefined(this.refElement)||sf.base.isNullOrUndefined(this.refElement.parentElement)||(e&&this.dlgContainer&&this.dlgContainer.querySelector(".e-dlg-overlay")&&(this.dlgContainer.querySelector(".e-dlg-overlay").style.display="none"),this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),sf.base.detach(this.refElement),this.refElement=void 0)},t.prototype.destroy=function(t,i){if(this.element instanceof Element||this.element instanceof HTMLElement){this.updateContext(t);var n=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(!sf.base.isNullOrUndefined(this.cssClass)&&""!==this.cssClass){var o=this.cssClass.split(" ");sf.base.removeClass([this.element],o)}if(sf.base.Browser.isDevice&&sf.base.removeClass([this.element],"e-device"),sf.base.removeClass([this.getTargetEle(this.target)],[e,"e-scroll-disabled"]),this.unBindEvent(this.element),this.element.classList.contains("e-dlg-fullscreen")&&sf.base.removeClass([document.body],[e,"e-scroll-disabled"]),this.isModal&&sf.base.removeClass([sf.base.isNullOrUndefined(this.targetEle)?document.body:this.targetEle],"e-scroll-disabled"),this.element.classList.contains("e-dlg-resizable")&&this.element.classList.remove("e-dlg-resizable"),this.element.classList.contains("e-draggable")&&(this.dragObj.destroy(),this.dragObj=void 0),this.element.classList.contains("e-popup")&&(this.popupObj.destroy(),this.popupObj=void 0),this.destroyRefElement(this.isModal),this.dlgOverlay&&(sf.base.detach(this.dlgOverlay),this.dlgOverlay=null),this.enableResize&&this.unWireWindowResizeEvent(),this.contentEle&&(sf.base.detach(this.contentEle),this.contentEle=null),this.headerContent&&(sf.base.detach(this.headerContent),this.headerContent=null),this.dlgContainer=null,i)for(var s=0;s<this.element.children.length;s++)this.element.children[s].classList.add("e-hide");else if(!sf.base.isNullOrUndefined(this.element.children))for(s=0;s<=this.element.children.length;s++)s-=s,sf.base.detach(this.element.children[s]);for(s=0;s<n.length;s++)this.element.removeAttribute(n[s]);if(this.isModal){if(this.element&&this.element.nextElementSibling){sf.base.detach(this.element.nextElementSibling);var a=this.element.parentElement;a.removeAttribute("class"),a.removeAttribute("style")}this.element.classList.remove("e-dlg-modal")}this.element.classList.remove("e-dialog"),this.primaryButtonEle&&(sf.base.detach(this.primaryButtonEle),this.primaryButtonEle=null),sf.popups.resizeDestroy(),this.element&&(this.element=null)}window.sfBlazor.disposeWindowsInstance(this.dataId)},t.prototype.bindEvent=function(e){sf.base.EventHandler.add(e,"keydown",this.keyDown,this),sf.base.Browser.isDevice&&sf.base.EventHandler.add(window,"orientationchange",this.orientationOnChange,this)},t.prototype.unBindEvent=function(e){sf.base.EventHandler.remove(e,"keydown",this.keyDown),sf.base.Browser.isDevice&&sf.base.EventHandler.remove(window,"orientationchange",this.orientationOnChange)},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.orientationOnChange=function(){var e=this;this.element.style.display="none",setTimeout((function(){sf.popups.setMaxWidth(e.targetEle.clientWidth),sf.popups.setMaxHeight(e.targetEle.clientHeight),e.setMaxHeight(),e.refreshPosition(),e.element.style.display=""}),250)},t.prototype.popupCloseHandler=function(){var e=document.activeElement;sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blur)||e.blur(),sf.base.isNullOrUndefined(this.storeActiveElement)||sf.base.isNullOrUndefined(this.storeActiveElement.focus)||this.storeActiveElement.focus()},t.prototype.windowResizeHandler=function(){sf.popups.setMaxWidth(this.targetEle.clientWidth),sf.popups.setMaxHeight(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.onResizeStart=function(e,t){var i=t.getMouseEvtArgs(e);if(t.onResizeStartEnabled&&t.dotNetRef.invokeMethodAsync("ResizeStartEvent",i),this.isModelResize&&!sf.base.isNullOrUndefined(this.dlgContainer)&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)){this.setPopupPosition(),this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y);var n=document.querySelector("html").getAttribute("dir");this.element.style.position=sf.base.isNullOrUndefined(n)||"rtl"!==n?"relative":this.element.style.position,this.element.classList.contains("e-restrict-left")&&this.element.classList.remove("e-restrict-left"),this.isModelResize=!1}},t.prototype.onResizing=function(e,t){t.resizingEnabled&&t.dotNetRef.invokeMethodAsync("ResizingEvent",t.getMouseEvtArgs(e))},t.prototype.onResizeComplete=function(e,t){t.onResizeStopEnabled&&t.dotNetRef.invokeMethodAsync("ResizeStopEvent",t.getMouseEvtArgs(e)),t.updatePersistData()},t.prototype.updatePersistData=function(){this.enablePersistence&&window.localStorage.setItem(this.dataId,JSON.stringify({width:this.element.style.width,height:this.element.style.height,X:parseFloat(this.element.style.left),Y:parseFloat(this.element.style.top)}))},t.prototype.getFocusElement=function(e){var t=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return t[t.length-1]},t.prototype.keyDown=function(e){var t=this;if(9===e.keyCode&&this.isModal){var i=void 0,n=void 0,o=this.element.querySelector(".e-footer-content");sf.base.isNullOrUndefined(o)||(n=o.querySelectorAll("button"),!sf.base.isNullOrUndefined(i)&&n.length>0&&(i=n[n.length-1]),sf.base.isNullOrUndefined(i)&&o.childNodes.length>0&&(i=this.getFocusElement(o))),sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(this.contentEle)&&(i=this.getFocusElement(this.contentEle)),sf.base.isNullOrUndefined(i)||document.activeElement!==i||e.shiftKey||(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),sf.base.isNullOrUndefined(i)||i.focus())}if(27===e.keyCode&&this.closeOnEscape&&(document.querySelector(".e-popup-open:not(.e-dialog, .e-tooltip-wrap, .e-toolbar-pop)")||this.dotNetRef.invokeMethodAsync("CloseDialog",{altKey:e.altKey,ctrlKey:e.ctrlKey,code:e.code,key:e.key,location:e.location,repeat:e.repeat,shiftKey:e.shiftKey,metaKey:e.metaKey,type:e.type})),this.hasFocusableNode){var s=document.activeElement,a=["input","textarea"].indexOf(s.tagName.toLowerCase())>-1,r=!1;a||(r=s.hasAttribute("contenteditable")&&"true"===s.getAttribute("contenteditable"));var l=s.classList.contains("e-datepicker")||s.classList.contains("e-datetimepicker")?100:0;(13===e.keyCode&&!e.ctrlKey&&"textarea"!==s.tagName.toLowerCase()&&a&&!sf.base.isNullOrUndefined(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===s.tagName.toLowerCase()||r)&&!sf.base.isNullOrUndefined(this.primaryButtonEle))&&setTimeout((function(){var e=t.element.querySelector(".e-footer-content button.e-btn.e-primary");null!==e&&e.click()}),l)}},t}();return{initialize:function(e){e.dataId&&new t(e)},getClassList:function(e){return e&&e.classList.toString()},getMaxHeight:function(e){var t=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(t)||"function"!=typeof t.getMaxHeight?null:e&&t.getMaxHeight()},changePosition:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).changePosition(e)},updateAnimation:function(e){if(e.dataId){var t=window.sfBlazor.getCompInstance(e.dataId);sf.base.isNullOrUndefined(t)||"function"!=typeof t.updateContext||t.updateContext(e)}},focusContent:function(e){e&&window.sfBlazor.getCompInstance(e).focusContent()},refreshPosition:function(e){e&&window.sfBlazor.getCompInstance(e).refreshPosition()},getDimension:function(e){return e&&window.sfBlazor.getCompInstance(e).getDimension()},popupCloseHandler:function(e){if(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||"function"!=typeof t.popupCloseHandler||t.popupCloseHandler()}},propertyChanged:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).OnPropertyChanged(e)},show:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).show(e.fullScreen,e.maxHeight)},hide:function(e){var t=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(t)||"function"!=typeof t.hide?null:e&&window.sfBlazor.getCompInstance(e).hide()},destroy:function(e){e.dataId&&window.sfBlazor.getCompInstance(e.dataId).destroy(e,e.isClient)}}}()},"./modules/sf-drop-down-button.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DropDownButton=function(){"use strict";var e="e-colorpicker-container",t=".e-colorpicker.e-modal",i="e-dropdown-btn",n="mousedown touchstart",o=function(){function o(e,t,i,n,o){this.isPopupClick=!1,this.animation=new sf.base.Animation({}),this.dataId=n,this.cpDataId=o,this.element=e,this.dotNetRef=i,this.popup=t,window.sfBlazor.setCompInstance(this),this.addScrollEvents(!0)}return o.prototype.openPopup=function(t){this.element&&this.element.classList.contains(i)&&this.popup.style.width&&"auto"!==this.popup.style.width&&this.setWidth(),this.popup.style.visibility="hidden",document.body.appendChild(this.popup),t&&sf.splitbuttons.setBlankIconStyle(this.popup),this.popup.classList.remove("e-hidden"),this.popup.classList.remove("e-transparent");var o=sf.popups.getZindexPartial(this.element),s=this.element.parentElement.classList.contains(e);s&&window.sfBlazor.getCompInstance(this.cpDataId).setPaletteWidth(this.popup.querySelector(".e-container"),!1,o);if(this.setPosition(s),sf.base.EventHandler.remove(document.body,n,this.mouseDownHandler),this.addEventListener(),this.popup.style.zIndex=o+"",this.popup.style.visibility="",this.animationSettings&&this.element&&this.element.classList.contains(i)&&this.popup){var a=this.popup.firstElementChild;a&&a.classList.contains("e-dropdown-menu")&&this.toggleDropDownMenuAnimation(a,this.animationSettings)}s&&window.sfBlazor.getCompInstance(this.cpDataId).setOffset(this.popup,o);if(this.popup.firstElementChild)if(this.popup.firstElementChild.firstElementChild&&s)this.popup.firstElementChild.firstElementChild.focus();else{var r=this.popup.firstElementChild.querySelector(".e-palette");r?r.focus():this.popup.firstElementChild.focus()}},o.prototype.toggleDropDownMenuAnimation=function(e,t){"None"!==t.effect&&(this.animationElement=e,this.animation.animate(e,{name:t.effect,duration:t.duration,timingFunction:t.easing,begin:function(e){e.element&&e.element.parentElement&&(e.element.parentElement.style.height=e.element.offsetHeight+"px")},end:function(e){e.element&&e.element.parentElement&&(e.element.parentElement.style.height="")}}))},o.prototype.setWidth=function(){var e=sf.base.formatUnit(this.popup.style.width);if(e.indexOf("%")>-1){var t=this.element.offsetWidth*parseFloat(e)/100;this.popup.style.width=t+"px"}},o.prototype.setPosition=function(e){var t,i,n,o,s=this.popup.getBoundingClientRect();this.popup.style.display="none";var a=this.element.getBoundingClientRect();e&&sf.base.Browser.isDevice?(t=document.documentElement.clientWidth/2-s.width/2+scrollX,i=document.documentElement.clientHeight/2-s.height/2+scrollY):(t=a.left+scrollX,i=a.bottom+scrollY,o=a.top+scrollY,n=a.left+scrollX,a.left+s.width>document.documentElement.clientWidth&&a.left+a.width-s.width>document.documentElement.clientLeft&&(t=t+a.width-s.width),a.top+a.height+s.height>document.documentElement.clientHeight&&(i=o-(s.height+4))<0&&((i=0)+s.height<document.documentElement.clientHeight?t=a.left+a.width+s.width<document.documentElement.clientWidth?n+a.width:n-s.width:i=a.bottom+scrollY)),-1!==this.element.id.indexOf("imageEditor")&&sf.base.Browser.isDevice&&(t=document.documentElement.clientWidth/2-s.width/2+scrollX),this.popup.style.left=Math.ceil(t)+"px",this.popup.style.top=Math.ceil(i)+"px",this.popup.style.display="block"},o.prototype.mouseDownHandler=function(i){if(this.popup.parentElement){var n=i.target,o=!0,s=this.element.parentElement.classList.contains(e);if(s){var a=window.sfBlazor.getCompInstance(this.cpDataId);(sf.base.closest(n,".e-apply")||sf.base.closest(n,".e-cancel"))&&a.removeZIndex()}if(!sf.base.Browser.isDevice&&n.classList&&n.classList.contains("e-hsv-model")){var r=n.parentElement.getBoundingClientRect(),l=this.element.getBoundingClientRect();o=i.clientX>=r.left&&i.clientX<=r.right&&i.clientY>=r.top&&i.clientY<=r.bottom||i.clientX>=l.left&&i.clientX<=l.right&&i.clientY>=l.top&&i.clientY<=l.bottom}if(!o||!sf.base.closest(n,"#"+this.getDropDownButton().id)&&!sf.base.closest(i.target,"#"+this.popup.id)&&!sf.base.closest(i.target,t)){if(s)(a=window.sfBlazor.getCompInstance(this.cpDataId)).removeZIndex();this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),this.removeEventListener()}}else this.removeEventListener()},o.prototype.keydownHandler=function(t){var i=this.getElement(),n=this.element.parentElement.classList.contains(e),o=this.element.parentElement.classList.contains("e-rtl");n&&window.sfBlazor.getCompInstance(this.cpDataId).paletteKeyDown(t,o);if(t.altKey)38===t.keyCode&&(t.stopPropagation(),t.preventDefault(),this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),i.focus(),this.removeEventListener());else{var s=this.popup.firstElementChild;if((27===t.keyCode||9===t.keyCode&&!n)&&(t.stopPropagation(),this.dotNetRef.invokeMethodAsync("ButtonClickAsync",null),27===t.keyCode&&t.preventDefault(),i.focus(),this.removeEventListener()),!s||!s.classList.contains("e-dropdown-menu"))return;if(13===t.keyCode)return t.preventDefault(),void(t.target.classList.contains("e-item")&&t.target.classList.contains("e-focused")?(i.focus(),this.removeEventListener()):t.stopPropagation());38!==t.keyCode&&40!==t.keyCode||(t.target.classList.contains("e-dropdown-menu")&&t.stopPropagation(),t.preventDefault(),sf.splitbuttons.upDownKeyHandler(s,t.keyCode))}},o.prototype.getElement=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.firstElementChild:this.element},o.prototype.getDropDownButton=function(){return this.element.classList.contains("e-split-btn-wrapper")?this.element.getElementsByClassName(i)[0]:this.element},o.prototype.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},o.prototype.closePopup=function(){if(this.removeEventListener(),this.isPopupClick&&(this.isSafari()?this.getElement().focus({preventScroll:!0}):this.getElement().focus(),this.isPopupClick=!1),this.element.parentElement.classList.contains(e)&&sf.base.Browser.isDevice){var i=this.popup;if(i&&i.firstElementChild){var n=document.querySelector(t),o=i.querySelector(".e-ctrl-btn");n&&!o&&n.remove()}}},o.prototype.dropDownClickHandler=function(t){if(this.element.parentElement.classList.contains(e)){var i=window.sfBlazor.getCompInstance(this.cpDataId);sf.base.closest(t.target,".e-dropdown-btn")&&i.removeZIndex()}},o.prototype.scrollHandler=function(t){if(this.popup&&document.getElementById(this.popup.id)){var i=this.element.parentElement.classList.contains(e);if(this.setPosition(i),i)window.sfBlazor.getCompInstance(this.cpDataId).setOffset(this.popup)}else{var n=this.getDropDownButton();n&&document.getElementById(n.id)||sf.base.EventHandler.remove(t.target,"scroll",this.scrollHandler)}},o.prototype.clickHandler=function(e){this.isPopupClick=!0},o.prototype.addEventListener=function(e){if(sf.base.EventHandler.add(document.body,n,this.mouseDownHandler,this),sf.base.EventHandler.add(this.popup,"click",this.clickHandler,this),sf.base.EventHandler.add(this.popup,"keydown",this.keydownHandler,this),sf.base.EventHandler.add(this.element,"click",this.dropDownClickHandler,this),e&&this.popup.firstElementChild){var t=this.popup.querySelector(".e-focused");t?t.focus():this.popup.firstElementChild.focus()}},o.prototype.removeEventListener=function(e){if(sf.base.EventHandler.remove(document.body,n,this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"click",this.dropDownClickHandler),this.popup.parentElement&&(sf.base.EventHandler.remove(this.popup,"click",this.clickHandler),sf.base.EventHandler.remove(this.popup,"keydown",this.keydownHandler),e)){var t=this.getDropDownButton();t&&document.getElementById(t.id)&&(this.addScrollEvents(!1),this.element.appendChild(this.popup))}},o.prototype.addScrollEvents=function(e){for(var t=0,i=sf.popups.getScrollableParent(this.element);t<i.length;t++){var n=i[t];e?sf.base.EventHandler.add(n,"scroll",this.scrollHandler,this):sf.base.EventHandler.remove(n,"scroll",this.scrollHandler)}},o}();return{openPopup:function(e,t,n,s,a,r,l){var d=window.sfBlazor.getCompInstance(a);sf.base.isNullOrUndefined(e)||(sf.base.isNullOrUndefined(d)?(new o(e,t,n,a,r),d=window.sfBlazor.getCompInstance(a)):d.popup=t,d.element&&d.element.classList.contains(i)&&null!=l&&(d.animationSettings=l),d.openPopup(s))},addEventListener:function(e){var t=window.sfBlazor.getCompInstance(e);t.removeEventListener(),t.addEventListener(!0)},removeEventListener:function(e){window.sfBlazor.getCompInstance(e).removeEventListener(!0)},closePopup:function(e){var t=window.sfBlazor.getCompInstance(e);t&&t.animationSettings&&t.animationElement&&t.element&&t.element.classList.contains(i)&&t.toggleDropDownMenuAnimation(t.animationElement,t.animationSettings),t.closePopup()},setIconStyle:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.splitbuttons.setBlankIconStyle(i.popup,t)}}}()},"./modules/sf-dropdownlist.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.DropDownList=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t=function(){function t(e){var t=this;this.bindScrollEvent=function(){t.observe((function(e){return t.scrollListener(e)}))},this.sentinelInfo={up:{check:function(e,i){var n=e.top-t.parent.containerRect.top;return i.entered=n>=0,n+t.parent.listHeight*t.parent.options.virtualizedItemsCount/2>=0},axis:"Y"},down:{check:function(e,i){var n=e.bottom;return i.entered=e.bottom<=t.parent.containerRect.bottom,n-t.parent.listHeight*t.parent.options.virtualizedItemsCount/2<=t.parent.listHeight*t.parent.options.virtualizedItemsCount/2},axis:"Y"}},this.parent=e}return t.prototype.scrollListener=function(t){var i=this;if(!this.parent.preventScrollAction){var n=t.sentinel,o=this.parent.preStartIndex;if(this.parent.viewInfo=this.getInfoFromView(t.direction,n,t.offset,!1),this.parent.isUpwardScroll=!1,this.parent.preStartIndex===o||this.parent.isKeyBoardAction){if(this.parent.isScrollActionMade){this.parent.preventKeyAction=!1,this.parent.isScrollActionMade=!1;var s=this.parent.list.querySelectorAll(".e-virtual-list").length,a=this.parent.list.querySelector(".e-list-item"),r=t.offset.top-a.offsetHeight*s;this.parent.list.getElementsByClassName("e-virtual-ddl-content")[0].style.transform="translate(0px,"+r+"px)"}}else this.parent.isScrollActionMade=!1,this.parent.currentPage=this.parent.viewInfo.currentPage,this.parent.virtualInfo=e({},this.parent.viewInfo),this.parent.preventKeyAction=!0,this.parent.isVirtualAction=!0,setTimeout((function(){i.parent.dotNetRef.invokeMethodAsync("VirtualScrollRefreshAsync",{virtualItemStartIndex:i.parent.viewInfo.startIndex,virtualItemEndIndex:i.parent.viewInfo.endIndex,listItemHeight:i.parent.virtualListHeight,scrollTop:i.parent.viewInfo.offsets.top,pageCount:i.parent.getPageCount(i.parent.popupObj.element,!0),isMouseScrollAction:i.parent.mouseScrollAction}).then((function(){i.parent.popupObj&&(i.parent.list=i.parent.popupObj.element.querySelector(".e-content")||sf.base.select(".e-content"),i.parent.updateSelectionList(),i.parent.liCollections=i.parent.getItems()),i.parent.isVirtualAction=!1,i.parent.preventKeyAction=!1}))}),10);this.parent.prevInfo=this.parent.viewInfo,this.parent.isKeyBoardAction=!1}},t.prototype.getInfoFromView=function(e,t,i,n){var o={direction:e,sentinelInfo:t,offsets:i,startIndex:this.parent.preStartIndex,endIndex:this.parent.preEndIndex},s=this.parent.popupContentEle.getBoundingClientRect().height,a=0===this.parent.listHeight?this.parent.virtualListHeight:this.parent.listHeight,r=i.top/a,l=s/a,d=r+l,h=this.parent.options.virtualizedItemsCount/4,p=this.parent.options.totalCount;if("down"===o.direction){var c=Math.round(d)-Math.round(h);if(sf.base.isNullOrUndefined(o.startIndex)||d>o.startIndex+Math.round(this.parent.options.virtualizedItemsCount/2+h)&&o.endIndex!==p){o.startIndex=c>=0?Math.round(c):0,o.startIndex=o.startIndex>r?Math.floor(r):o.startIndex;var u=o.startIndex+this.parent.options.virtualizedItemsCount;o.startIndex=u<d?Math.ceil(d)-this.parent.options.virtualizedItemsCount:o.startIndex,o.endIndex=u<p?u:p,o.startIndex=u>=p?o.endIndex-this.parent.options.virtualizedItemsCount>0?o.endIndex-this.parent.options.virtualizedItemsCount:0:o.startIndex,o.currentPage=Math.ceil(o.endIndex/this.parent.options.virtualizedItemsCount)}}else if("up"===o.direction&&o.startIndex&&o.endIndex){c=void 0;if(r<Math.round((o.startIndex*a+h*a)/a)){var f=h>l?h:l+l/4;u=Math.round(r+f);o.endIndex=u<p?u:p,c=o.endIndex-this.parent.options.virtualizedItemsCount,o.startIndex=c>0?c:0,o.endIndex=c<0?this.parent.options.virtualizedItemsCount:o.endIndex,o.currentPage=Math.ceil(o.startIndex/this.parent.options.virtualizedItemsCount)}if(0===o.startIndex&&c&&0!==i.top)this.parent.list.querySelector(".e-virtual-ddl-content").style.transform="translate(0px,"+i.top+"px)"}return n?this.parent.scrollPreStartIndex=o.startIndex:(this.parent.preStartIndex=o.startIndex,this.parent.startIndex=o.startIndex,this.parent.preEndIndex=o.endIndex),o},t.prototype.observe=function(e){this.parent.containerRect=this.parent.popupContentEle.getBoundingClientRect(),sf.base.EventHandler.add(this.parent.popupContentEle,"wheel mousedown",this.popupScrollHandler,this),this.touchModule=new sf.base.Touch(this.parent.popupContentEle,{scroll:this.popupScrollHandler.bind(this)}),sf.base.EventHandler.add(this.parent.popupContentEle,"scroll",this.virtualScrollHandler(e),this)},t.prototype.popupScrollHandler=function(e){this.parent.mouseScrollAction=!0,this.parent.preventScrollAction=!1},t.prototype.virtualScrollHandler=function(e){var t=this,i="chrome"===sf.base.Browser.info.name?200:100,n=0,o=sf.base.debounce(e,i),s=sf.base.debounce(e,50);return function(e){var i=e.target.scrollTop,a=e.target.scrollLeft,r=n<i&&!t.parent.isUpwardScroll?"down":"up";n=i;var l=t.sentinelInfo[r],d=t.parent.scrollPreStartIndex,h={top:i,left:a};if(t.parent.list.querySelectorAll(".e-virtual-list").length>0){t.getInfoFromView(r,l,h,!0);if(t.parent.scrollPreStartIndex!==d&&!t.parent.preventScrollAction)t.parent.isScrollActionMade=!0,t.parent.list.querySelector(".e-virtual-ddl-content").style.transform="translate(0px,"+i+"px)"}var p=o;"X"===l.axis&&(p=s),p({direction:r,sentinel:l,offset:{top:i,left:a},focusElement:document.activeElement})}},t}(),i="e-list-group-item",n=function(){function e(e,i,n,o,s){this.storedSearchBoxHeight=0,this.activeIndex=null,this.prevSelectPoints={},window.sfBlazor=window.sfBlazor,this.preStartIndex=0,this.startIndex=0,this.currentPage=0,this.virtualPopupHeight=0,this.isKeyBoardAction=!1,this.scrollPreStartIndex=0,this.isScrollActionMade=!1,this.preventScrollAction=!1,this.preventKeyAction=!1,this.isVirtualAction=!1,this.keyDownAction=!1,this.isUpwardScroll=!1,this.mouseScrollAction=!1,this.firstRender=!0,this.virtualListHeight=0,this.dataId=e,this.containerElement=i,this.element=n,this.options=s,window.sfBlazor.setCompInstance(this),this.dotNetRef=o,this.virtualScrollObj=new t(this)}return e.prototype.initialize=function(){this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},sf.base.Browser.isDevice?sf.base.EventHandler.add(window,"orientationchange",this.scrollHandler,this):(new sf.base.KeyboardEvents(this.containerElement,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.options.enableVirtualization&&sf.base.EventHandler.add(this.containerElement,"keyup",this.keyUpHandler,this)),"SfComboBox"===this.options.moduleName&&sf.base.EventHandler.add(this.element,"keydown",this.onFilterDown,this),sf.base.Browser.isAndroid&&this.options.autoFill&&("SfComboBox"===this.options.moduleName||"SfAutoComplete"===this.options.moduleName)&&sf.base.EventHandler.add(this.element,"input",this.onMobileInput,this),sf.base.EventHandler.add(this.element,"paste",this.onPaste,this),sf.base.EventHandler.add(window,"resize",this.windowResize,this),sf.base.EventHandler.add(window,"resize",this.updateFloatLabelSize,this),this.updateFloatLabelSize()},e.prototype.onMobileInput=function(e){null==e.data&&"deleteContentBackward"===e.inputType||null!==e.data&&""!==e.data&&e.data===this.beforeData?e.stopPropagation():this.element&&(this.beforeData=this.element.value)},e.prototype.keyUpHandler=function(e){this.keyDownAction=!1},e.prototype.findListElement=function(e,t,i,n){var o=null;if(e)for(var s=[].slice.call(e.querySelectorAll(t)),a=0;a<s.length;a++)if(s[a].getAttribute(i)===n+""){o=s[a];break}return o},e.prototype.windowResize=function(){this.isPopupOpen()&&this.popupObj.refreshPosition(this.containerElement)},e.prototype.updateSelectionList=function(){if(!this.list.querySelector(".e-active")&&this.options.value){var e=this.findListElement(this.list,"li","data-value",this.options.value);e&&e.classList.add("e-active")}},e.prototype.setAutoFillSelection=function(e){this.isAndroidAutoFill(e)||this.autoFillSelection(e)},e.prototype.onFilterDown=function(e){13!==e.keyCode&&40!==e.keyCode&&38!==e.keyCode&&9!==e.keyCode&&(this.prevSelectPoints=this.getSelectionPoints())},e.prototype.getSelectionPoints=function(){var e=this.element;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},e.prototype.autoFillSelection=function(e){var t=this.getSelectionPoints(),i=this.element.value.substring(0,t.start);if(i&&i.toLowerCase()===e.substring(0,t.start).toLowerCase()){var n=i+e.substring(i.length,e.length);this.element.value=n,this.element.setSelectionRange(t.start,this.element.value.length)}else this.element.value=e,this.element.setSelectionRange(0,this.element.value.length)},e.prototype.isAndroidAutoFill=function(e){if(sf.base.Browser.isAndroid){var t=this.getSelectionPoints(),i=this.prevSelectPoints.end,n=t.end,o=this.prevSelectPoints.start,s=t.start;return 0!==i&&(i===e.length&&o===e.length||o>s&&i>n||i===n&&o===s)}return!1},e.prototype.removeFillSelection=function(){var e=this.getSelectionPoints();this.element.setSelectionRange(e.end,e.end)},e.prototype.keyActionHandler=function(e){if(this.preventKeyAction&&(null===this.previousKeyAction||this.previousKeyAction===e.action)&&this.options.enableVirtualization)e.preventDefault();else{var t={Action:e.action,Key:e.key,Events:e,Type:e.type};this.isDisposed||("space"===e.action&&"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault(),this.dotNetRef.invokeMethodAsync("KeyActionHandler",t)),("tab"!==e.action&&"close"!==e.action&&"space"!==e.action&&"enter"!==e.action&&"open"!==e.action&&("SfDropDownList"===this.options.moduleName||"home"!==e.action&&"end"!==e.action)||"enter"===e.action&&!sf.base.isNullOrUndefined(this.isPopupOpen()))&&e.preventDefault()}this.keyDownAction=!0},e.prototype.getOffsetValue=function(e){var t=getComputedStyle(e),i=parseInt(t.borderTopWidth,10),n=parseInt(t.borderBottomWidth,10);return this.setPopupPosition(i+n)},e.prototype.setPopupPosition=function(e){var t,i=e,n=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),o=this.isEmptyList()?this.list:this.liCollections[0],s=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],a=o.getBoundingClientRect().height,r=this.list.offsetHeight/2,l=sf.base.isNullOrUndefined(n)?o.offsetTop:n.offsetTop;if(s.offsetTop-r<l&&!sf.base.isNullOrUndefined(this.liCollections)&&this.liCollections.length>0&&!sf.base.isNullOrUndefined(n)){var d=this.list.offsetHeight/a,h=parseInt(getComputedStyle(this.list).paddingBottom,10);t=(d-(this.liCollections.length-this.activeIndex))*a-i+h,this.list.scrollTop=n.offsetTop}else l>r&&!this.options.enableVirtualization?(t=r-a/2,this.list.scrollTop=l-r+a/2):t=l;return-(t=t+a+i-(a-this.containerElement.offsetHeight)/2)},e.prototype.getItems=function(){return this.list?this.list.querySelectorAll(".e-list-item"):[]},e.prototype.getListHeight=function(){var e=sf.base.createElement("div",{className:"e-dropdownbase"}),t=sf.base.createElement("li",{className:"e-list-item"}),i=sf.base.formatUnit(this.options.popupHeight);e.style.height=parseInt(i,10).toString()+"px",e.appendChild(t),document.body.appendChild(e),this.virtualPopupHeight=e.getBoundingClientRect().height;var n=Math.ceil(t.getBoundingClientRect().height);return e.remove(),this.virtualListHeight=n+parseInt(window.getComputedStyle(t).marginBottom,10),n},e.prototype.renderPopup=function(e,t,i,n,o,s){var a=this;if(this.options=o,this.popupHolder=t,s){var r={direction:null,sentinelInfo:null,offsets:null,startIndex:s.virtualItemStartIndex,endIndex:s.virtualItemEndIndex};this.virtualInfo=this.viewInfo=r}this.popupContentEle=e.querySelector(".e-content"),this.list=t.querySelector(".e-content")||sf.base.select(".e-content",this.popupContainer),this.liCollections=this.getItems();var l,d=0;this.preventScrollAction=!0;var h,p=sf.base.formatUnit(this.options.popupHeight);if(this.wireListEvents(),e){var c=document.getElementById(e.id);c&&sf.base.remove(c)}if(document.body.appendChild(e),sf.base.Browser.isDevice&&parseInt(this.options.popupWidth,10)>window.outerWidth&&("SfDropDownList"!==this.options.moduleName||!this.options.allowFiltering)&&sf.base.addClass([e],"e-wide-popup"),e.style.visibility="hidden",this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName?(this.filterInput=e.querySelector("input.e-input"),h=this.filterInput.parentElement,new sf.base.KeyboardEvents(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.options.enableVirtualization&&sf.base.EventHandler.add(this.filterInput,"keyup",this.keyUpHandler,this)):this.filterInput=this.element),"auto"!==this.options.popupHeight){var u=/\d*\.?\d+rem/,f=/\d*\.?\d+vh/,m=0;if(!sf.base.isNullOrUndefined(h))if(m=h.parentElement.getBoundingClientRect().height,this.storedSearchBoxHeight=m,!sf.base.isNullOrUndefined(p)&&u.test(p)){var g=(m+2)/parseFloat(getComputedStyle(document.documentElement).fontSize);p=(parseInt(p,10)-g).toString()+"rem"}else if(!sf.base.isNullOrUndefined(p)&&f.test(p)){var w=(m+2)/window.innerHeight*100;p=(parseInt(p,10)-w).toString()+"vh"}else p=(parseInt(p,10)-2-m).toString()+"px";if(sf.base.isNullOrUndefined(h))if(!sf.base.isNullOrUndefined(p)&&u.test(p)){g=2/parseFloat(getComputedStyle(document.documentElement).fontSize);p=(parseInt(p,10)-g).toString()+"rem"}else if(!sf.base.isNullOrUndefined(p)&&f.test(p)){w=2/window.innerHeight*100;p=(parseInt(p,10)-w).toString()+"vh"}else p=(parseInt(p,10)-2).toString()+"px";if(e.querySelector(".e-ddl-header")){var y=e.querySelector(".e-ddl-header"),v=Math.round(y.getBoundingClientRect().height);e.classList.contains("e-multi-column")&&(v+=13),p=(parseInt(p,10)-(v+m)).toString()+"px"}if(e.querySelector(".e-ddl-footer")){var b=e.querySelector(".e-ddl-footer");v=Math.round(b.getBoundingClientRect().height);e.classList.contains("e-multi-column")&&(v+=13),p=(parseInt(p,10)-(v+m)).toString()+"px"}this.list.style.maxHeight=p,e.style.maxHeight=sf.base.formatUnit(this.options.popupHeight)}else e.style.height="auto";if(this.list&&"SfAutoComplete"!==this.options.moduleName&&!this.list.classList.contains("e-nodata")){if(!this.listHeight){var S=this.options.enableVirtualization&&this.options.hasItemTemplate?e.querySelectorAll("li.e-list-item:not(.e-virtual-list)"):e.querySelectorAll("li.e-list-item");this.listHeight=this.virtualListHeight=S.length>0?Math.ceil(S[0].getBoundingClientRect().height)+parseInt(window.getComputedStyle(S[0]).marginBottom,10):0}this.setScrollPosition()}if(sf.base.Browser.isDevice&&!this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName)){d=this.getOffsetValue(e);var A=this.isEmptyList()?this.list:this.liCollections[0];l=-(parseInt(getComputedStyle(A).textIndent,10)-parseInt(getComputedStyle(this.element).paddingLeft,10)+parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth,10))}this.popupCreation(e,d,l);var x=this.options.enableVirtualization&&this.options.hasItemTemplate?e.querySelectorAll("li.e-list-item:not(.e-virtual-list)"):e.querySelectorAll("li.e-list-item");this.listHeight=this.virtualListHeight=x.length>0?Math.ceil(x[0].getBoundingClientRect().height)+parseInt(window.getComputedStyle(x[0]).marginBottom,10):0,this.virtualListHeight=this.virtualListHeight<this.listHeight?this.listHeight:this.virtualListHeight,this.options.enableVirtualization&&this.firstRender&&(this.dotNetRef.invokeMethodAsync("UpdateListHeight",this.listHeight),this.firstRender=!1),this.checkCollision(e),sf.base.Browser.isDevice&&(this.popupObj.element.classList.add("e-ddl-device"),("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering)&&(this.popupObj.collision={X:"fit",Y:"fit"}),this.options.allowFiltering&&"SfDropDownList"===this.options.moduleName&&"FullScreen"===this.options.popupDisplayMode&&(this.popupObj.element.classList.add("e-ddl-device-filter"),this.popupObj.position={X:0,Y:0},this.popupObj.dataBind(),sf.base.attributes(this.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;z-index:"+this.options.zIndex.toString()+";"}),sf.base.addClass([document.body,this.popupObj.element],"e-popup-full-page"),this.setSearchBoxPosition())),e.style.visibility="visible";var V=/ipad|iphone|ipod/.test(navigator.userAgent.toLowerCase());if(this.options.allowFiltering&&"SfDropDownList"===this.options.moduleName&&"FullScreen"===this.options.popupDisplayMode&&sf.base.Browser.isDevice&&V&&(e.style.position="fixed"),sf.base.addClass([e],"e-popup-close"),sf.base.Browser.isDevice){if("SfDropDownList"===this.options.moduleName&&!this.options.allowFiltering||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering)for(var C=0,I=this.popupObj.getScrollableParent(this.containerElement);C<I.length;C++){var k=I[C];sf.base.EventHandler.add(k,"scroll",this.scrollHandler,this)}this.isFilterLayout()&&sf.base.EventHandler.add(this.list,"scroll",this.listScroll,this)}if(null!==i&&null!==i.popup&&n){for(var M=0,T=Object.keys(i.popup);M<T.length;M++){switch(T[M]){case"collision":!i.popup.collision||this.popupObj.collision.X===i.popup.collision.X.toLowerCase()&&this.popupObj.collision.Y===i.popup.collision.Y.toLowerCase()||(this.popupObj.collision={X:i.popup.collision.X.toLowerCase(),Y:i.popup.collision.Y.toLowerCase()});break;case"position":!this.popupObj.position||this.popupObj.position.X===i.popup.position.X&&this.popupObj.position.Y===i.popup.position.Y||(this.popupObj.position={X:i.popup.position.X,Y:i.popup.position.Y});break;case"relateTo":this.popupObj.relateTo!==i.popup.relateTo&&(this.popupObj.relateTo=i.popup.relateTo);break;case"targetType":this.popupObj.targetType!==i.popup.targetType.toLowerCase()&&(this.popupObj.targetType=i.popup.targetType);break;case"offsetX":this.popupObj.offsetX!==i.popup.offsetX&&(this.popupObj.offsetX=i.popup.offsetX);break;case"offsetY":this.popupObj.offsetY!==i.popup.offsetY&&(this.popupObj.offsetY=i.popup.offsetY)}}this.popupObj.dataBind(),this.popupObj.refreshPosition(this.popupObj.relateTo,!0)}this.options.enableVirtualization&&(this.virtualScrollObj.bindScrollEvent(),setTimeout((function(){if(a.updateSelectionList(),a.options.value&&a.list&&a.list.querySelector(".e-active")){var e=a.list.querySelector(".e-active"),t=e&&!isNaN(parseInt(window.getComputedStyle(e).marginBottom,10))?parseInt(window.getComputedStyle(e).marginBottom,10):0,i=a.list.querySelectorAll(".e-virtual-list").length,n=(a.virtualInfo&&a.virtualInfo.startIndex?e.offsetTop+a.virtualInfo.startIndex*(e.offsetHeight+t):e.offsetTop)-i*(e.offsetHeight+t)+(e.offsetHeight+t)-a.list.scrollTop,o=a.list.scrollTop+n-a.list.offsetHeight;null==e.nextElementSibling&&(a.preventScrollAction=!1),a.list.scrollTop=o}}),10)),"SfDropDownList"!==this.options.moduleName&&sf.base.attributes(this.element,{"aria-expanded":"true"}),sf.base.attributes(this.element,{"aria-owns":this.element.id+"_popup"});var E=this.options.allowFiltering?this.filterInput.parentElement:this.containerElement;if(sf.base.addClass([E],["e-input-focus"]),this.options.allowResize){if(this.resizer=sf.base.createElement("div",{id:this.element.id+"_resize-popup",className:"e-resizer-right e-icons"}),this.list&&this.list.parentElement){y=this.list.parentElement.querySelector(".e-ddl-header"),b=this.list.parentElement.querySelector(".e-ddl-footer");this.list.parentElement.classList.add("e-resize"),"auto"!==this.options.popupHeight.toString().toLowerCase()&&(this.list.parentElement.style.height="100%"),this.list.parentElement.style.paddingBottom=this.isFilterLayout()&&this.storedSearchBoxHeight?(this.storedSearchBoxHeight+16).toString()+"px":16..toString()+"px",(y||b||this.options.hasItemTemplate)&&(this.list.parentElement.style.paddingBottom=(parseInt(this.list.parentElement.style.maxHeight,10)-parseInt(this.list.style.maxHeight,10)+16).toString()+"px"),this.list.parentElement.appendChild(this.resizer),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px"}sf.base.EventHandler.add(this.resizer,"mousedown",this.startResizing,this),sf.base.EventHandler.add(this.resizer,"touchstart",this.startResizing,this)}this.popupObj.show(new sf.base.Animation({name:"FadeIn",duration:100}),1e3===this.options.zIndex?this.element:null)},e.prototype.wireListEvents=function(){sf.base.EventHandler.add(this.list,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.list,"mouseout",this.onMouseLeave,this)},e.prototype.unWireListEvents=function(){sf.base.EventHandler.remove(this.list,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.list,"mouseout",this.onMouseLeave)},e.prototype.onMouseOver=function(e){var t=sf.base.closest(e.target,".e-list-item");this.setHover(t)},e.prototype.onMouseLeave=function(e){this.removeHover()},e.prototype.listScroll=function(){sf.base.isNullOrUndefined(this.filterInput)||sf.base.isNullOrUndefined(this.filterInput.parentElement)||this.filterInput.parentElement.classList.contains("e-input-focus")||this.filterInput.blur()},e.prototype.scrollHandler=function(e){this.isDisposed||("scroll"!==e.type||!this.element||this.isElementInViewport(this.element))&&"scroll"===e.type||this.dotNetRef.invokeMethodAsync("Hide")},e.prototype.isElementInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=window.innerHeight&&t.right<=window.innerWidth},e.prototype.setFloatingHeader=function(e){var t=this.popupContainer&&this.popupContainer.querySelector(".e-content");t&&t.classList.contains("e-nodata")&&this.fixedHeaderElement?(sf.base.remove(this.fixedHeaderElement),this.fixedHeaderElement=null):this.list&&this.list.querySelector("li")&&(sf.base.isNullOrUndefined(this.fixedHeaderElement)&&(this.fixedHeaderElement=sf.base.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(i)||(this.fixedHeaderElement.style.display="none"),sf.base.prepend([this.fixedHeaderElement],this.list),this.setFixedHeader()),this.scrollStop(e))},e.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10));var t=(this.list?this.list.querySelectorAll(".e-list-item")[0].offsetWidth:0)-e;this.fixedHeaderElement.style.width=t.toString()+"px",sf.base.setStyleAttribute(this.fixedHeaderElement,{zIndex:10});var n=this.list.querySelector("."+i);this.fixedHeaderElement.innerHTML=n.innerHTML},e.prototype.scrollStop=function(e){var t=e.target,n=this.list.querySelectorAll("li"),o=parseInt(getComputedStyle(n[0],null).getPropertyValue("height"),10),s=Math.round(t.scrollTop/o),a=0;this.list.querySelectorAll(".e-virtual-list")&&(a=this.list.querySelectorAll(".e-virtual-list").length);for(var r=s;r>-1;r--){if(!sf.base.isNullOrUndefined(n[r+a])&&n[r+a].classList.contains(i)){var l=n[r+a];this.fixedHeaderElement.innerHTML=l.innerHTML,this.fixedHeaderElement.style.top=e.target.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},e.prototype.isFilterLayout=function(){return"SfDropDownList"===this.options.moduleName&&this.options.allowFiltering},e.prototype.setSearchBoxPosition=function(){var e=this.popupObj.element.querySelector("span.e-filter-parent").getBoundingClientRect().height,t=this.popupObj.element.querySelector(".e-ddl-footer"),i=this.popupObj.element.querySelector(".e-ddl-header");this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%";var n=t?t.getBoundingClientRect().height:0,o=i?i.getBoundingClientRect().height:0;this.list.style.maxHeight=this.list.style.height=window.innerHeight-(n+o+e+4)+"px"},e.prototype.checkCollision=function(e){(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&"SfDropDownList"!==this.options.moduleName)&&(sf.popups.isCollide(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"))},e.prototype.destroy=function(){sf.base.EventHandler.remove(document,"mousedown",this.onDocumentClick),sf.base.Browser.isDevice&&sf.base.EventHandler.remove(window,"orientationchange",this.scrollHandler),this.containerElement=null,this.element=null,window.sfBlazor.disposeWindowsInstance(this.dataId)},e.prototype.refreshPopup=function(e,t){if(this.isPopupOpen()){if(this.options.enableVirtualization&&e&&(this.preventScrollAction=!0,this.list.scrollTop=0,this.preStartIndex=0,this.virtualInfo=null,this.viewInfo&&(this.viewInfo.startIndex=0,this.viewInfo.endIndex=this.options.virtualizedItemsCount),this.preStartIndex=0,0===this.listHeight&&t.totalCount>0)){var i=this.popupContainer.querySelectorAll("li.e-list-item:not(.e-virtual-list)");this.listHeight=i.length>0?Math.ceil(i[0].getBoundingClientRect().height)+parseInt(window.getComputedStyle(i[0]).marginBottom,10):this.virtualListHeight}this.options.totalCount=t.totalCount,this.popupObj.refreshPosition(this.containerElement),this.popupObj.element.querySelector(".e-content").classList.contains("e-nodata")&&this.fixedHeaderElement&&(sf.base.remove(this.fixedHeaderElement),this.fixedHeaderElement=null)}},e.prototype.popupCreation=function(e,t,n){var o=this;this.popupContainer=e,this.popupObj=new sf.popups.Popup(this.popupContainer,{width:this.setWidth(),targetType:"relative",relateTo:this.containerElement,collision:{X:"flip",Y:"flip"},offsetY:t,enableRtl:this.options.enableRtl,offsetX:n,position:{X:"left",Y:"bottom"},zIndex:this.options.zIndex,close:function(){sf.base.EventHandler.remove(o.list,"scroll",o.setFloatingHeader),sf.base.removeClass([o.containerElement],"e-icon-anim"),"SfAutoComplete"===o.options.moduleName&&(null==o.options.value&&(o.preStartIndex=0,o.preEndIndex=0),o.virtualInfo=null),o.fixedHeaderElement=null,o.popupHolder.appendChild(o.popupContainer),o.unWireListEvents();for(var e=0,t=o.popupObj.getScrollableParent(o.containerElement);e<t.length;e++){var i=t[e];sf.base.EventHandler.remove(i,"scroll",o.scrollHandler)}sf.base.Browser.isDevice&&o.isFilterLayout()&&"FullScreen"===o.options.popupDisplayMode&&(sf.base.removeClass([document.body,o.popupObj.element],"e-popup-full-page"),sf.base.EventHandler.remove(o.list,"scroll",o.listScroll)),o.options.enableVirtualization&&(sf.base.EventHandler.remove(o.popupContentEle,"scroll",o.virtualScrollObj.virtualScrollHandler()),"SfDropDownList"===o.options.moduleName&&o.filterInput&&sf.base.EventHandler.remove(o.filterInput,"keyup",o.keyUpHandler)),o.resizer&&sf.base.EventHandler.remove(o.resizer,"mousedown",o.startResizing),o.popupObj&&o.popupObj.destroy(),!o.isDisposed&&document.body.contains(o.element)&&o.dotNetRef.invokeMethodAsync("ClosePopup").catch((function(){}))},open:function(){null==o.options.value&&"SfAutoComplete"===o.options.moduleName&&(o.preStartIndex=0);var e=o.list.querySelector("li")&&o.list.querySelector("li").classList.contains(i);o.options.enableVirtualization&&(e=o.list.querySelector("li")&&o.list.querySelector("li.e-list-group-item")&&o.list.querySelector("li.e-list-group-item").classList.contains(i)),sf.base.EventHandler.remove(document,"mousedown",o.onDocumentClick),sf.base.EventHandler.add(document,"mousedown",o.onDocumentClick,o),o.options.allowFiltering&&o.filterInput&&o.filterInput.focus(),e&&sf.base.EventHandler.add(o.list,"scroll",o.setFloatingHeader,o)},targetExitViewport:function(){sf.base.Browser.isDevice||o.isDisposed||o.dotNetRef.invokeMethodAsync("Hide")}})},e.prototype.isEmptyList=function(){return!sf.base.isNullOrUndefined(this.liCollections)&&0===this.liCollections.length},e.prototype.setWidth=function(){var e=sf.base.formatUnit(this.options.popupWidth);e.indexOf("%")>-1&&(e=(this.containerElement.offsetWidth*parseFloat(e)/100).toString()+"px");var t=!!(this.popupContainer&&this.popupContainer.classList.contains("e-bigger")||this.popupContainer.parentElement&&this.popupContainer.parentElement.classList.contains("e-bigger"));if(sf.base.Browser.isDevice&&!t&&!this.options.allowFiltering&&("SfDropDownList"===this.options.moduleName||"SfComboBox"===this.options.moduleName)){var i=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(i).textIndent,10)-parseInt(getComputedStyle(this.element).paddingLeft,10)+parseInt(getComputedStyle(this.element.parentElement).borderLeftWidth,10))+"px"}return e},e.prototype.resizingWireEvent=function(){sf.base.EventHandler.add(document,"mousemove",this.resizePopup,this),sf.base.EventHandler.add(document,"mouseup",this.stopResizing,this),sf.base.EventHandler.add(document,"touchmove",this.resizePopup,this),sf.base.EventHandler.add(document,"touchend",this.stopResizing,this)},e.prototype.resizingUnWireEvent=function(){sf.base.EventHandler.remove(document,"mousemove",this.resizePopup),sf.base.EventHandler.remove(document,"mouseup",this.stopResizing),sf.base.EventHandler.remove(document,"touchmove",this.resizePopup),sf.base.EventHandler.remove(document,"touchend",this.stopResizing)},e.prototype.startResizing=function(e){this.isResizing=!0;var t={type:e.type};this.dotNetRef.invokeMethodAsync("StartResizingHandler",t);var i=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,n=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;this.list&&this.list.parentElement&&(this.originalWidth=this.list.parentElement.offsetWidth,this.originalHeight=this.list.parentElement.offsetHeight,this.originalMouseX=i,this.originalMouseY=n),this.resizingWireEvent(),e&&e.preventDefault()},e.prototype.resizePopup=function(e){if(this.isResizing){e.type;var t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,n=t-this.originalMouseX,o=i-this.originalMouseY;if(this.list&&this.list.parentElement){var s=parseInt(window.getComputedStyle(this.list.parentElement).minWidth,10),a=parseInt(window.getComputedStyle(this.list.parentElement).minHeight,10);s=s||100,a=a||120,this.resizeWidth=Math.max(this.originalWidth+n,s),this.resizeHeight=Math.max(this.originalHeight+o,a),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.fixedHeaderElement&&this.list.querySelector("ul")&&(this.fixedHeaderElement.style.width=this.list.querySelector("ul").offsetWidth+"px")}e&&e.preventDefault()}},e.prototype.stopResizing=function(e){if(this.isResizing){this.isResizing=!1;var t={type:e.type};this.dotNetRef.invokeMethodAsync("StopResizingHandler",t,this.resizeHeight),this.resizingUnWireEvent()}e&&e.preventDefault()},e.prototype.onDocumentClick=function(e){var t=e.target;!sf.base.isNullOrUndefined(this.popupObj)&&sf.base.closest(t,"[id='"+this.popupObj.element.id+"']")||!this.containerElement||this.containerElement.contains(e.target)?t===this.element||this.options.allowFiltering&&t===this.filterInput||"SfComboBox"===this.options.moduleName&&!this.options.allowFiltering&&sf.base.Browser.isDevice&&t===this.containerElement.querySelector(".e-ddl-icon")||e.preventDefault():!this.containerElement.classList.contains("e-input-focus")&&!this.isPopupOpen()||this.isDisposed||this.dotNetRef.invokeMethodAsync("Hide")},e.prototype.closePopup=function(e,t){if(this.options=t,this.options.refreshVirtualIndices&&(this.virtualInfo=null,this.preStartIndex=0),this.isPopupOpen()&&!e.cancel&&this.popupObj){sf.base.Browser.isDevice&&this.popupContainer&&this.popupContainer.classList.contains("e-wide-popup")&&this.popupContainer.classList.remove("e-wide-popup"),"SfDropDownList"!==this.options.moduleName&&sf.base.attributes(this.element,{"aria-expanded":"false"}),this.element.removeAttribute("aria-owns"),this.popupObj.hide(new sf.base.Animation({name:"FadeOut",duration:20,delay:0}))}},e.prototype.setScrollPosition=function(e,t){if(this.preventScrollAction=!0,this.previousKeyAction=sf.base.isNullOrUndefined(e)?null:e.action,!this.preventKeyAction)if(!sf.base.isNullOrUndefined(e)&&sf.base.isNullOrUndefined(t))switch(e.action){case"pageDown":case"down":case"end":this.mouseScrollAction=!1,this.isKeyBoardAction=!0,this.scrollBottom(!1,!1,e.action);break;default:this.mouseScrollAction=!1,this.isKeyBoardAction="up"===e.action||"pageUp"===e.action||"open"===e.action,this.scrollTop(e.action)}else null!=t&&(this.viewInfo=this.virtualInfo=t,this.viewInfo.startIndex=this.virtualInfo.startIndex=t.virtualItemStartIndex,this.viewInfo.endIndex=this.virtualInfo.endIndex=t.virtualItemEndIndex),this.isKeyBoardAction=!1,this.list&&this.scrollBottom(!0)},e.prototype.scrollBottom=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=null),this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))||this.options.enableVirtualization){var o=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active");null==o&&this.options.enableVirtualization&&(o=this.list.querySelector(".e-list-item:not(.e-virtual-list)"));var s=o&&!isNaN(parseInt(window.getComputedStyle(o).marginBottom,10))?parseInt(window.getComputedStyle(o).marginBottom,10):0;this.isUpwardScroll=!1;var a=this.list.querySelectorAll(".e-virtual-list").length,r=this.list.offsetHeight,l=this.list.querySelector("li")?this.list.querySelector("li").classList.contains(i):null,d=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,h=this.virtualInfo&&this.virtualInfo.startIndex?o.offsetTop+this.virtualInfo.startIndex*(o.offsetHeight+s):o.offsetTop,p=h-a*(o.offsetHeight+s)+(o.offsetHeight+s)-this.list.scrollTop,c=this.list.scrollTop+p-r,u=!1;c=e?c+2*parseInt(getComputedStyle(this.list).paddingTop,10):c+parseInt(getComputedStyle(this.list).paddingTop,10);var f=h-a*(o.offsetHeight+s)+(o.offsetHeight+s)-this.list.scrollTop;if(f=l&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?f-this.fixedHeaderElement.offsetHeight:f,0===this.activeIndex)this.list.scrollTop=0,u=this.isKeyBoardAction;else if(p>r||!(f>0&&this.list.offsetHeight>f)){var m=o?o.getAttribute("data-value"):null,g="pageDown"===n?this.getPageCount(this.popupObj.element)-2:1;if(!this.options.enableVirtualization||this.isKeyBoardAction||t)if(this.isKeyBoardAction&&this.options.enableVirtualization&&d&&m===d&&"end"!==n&&!this.isVirtualAction){this.preventKeyAction=!0;var w="SfDropDownList"===this.options.moduleName&&"pageDown"===n&&this.filterInput?this.filterInput.offsetHeight:0;this.viewInfo&&this.options.totalCount===this.viewInfo.endIndex&&this.isKeyBoardAction||"pageDown"===n?this.list.scrollTop+=(o.offsetHeight+s)*g+w:this.list.scrollTop=c,this.preventKeyAction=!this.IsScrollerAtEnd()&&this.preventKeyAction,this.isKeyBoardAction=!1,this.preventScrollAction=!1}else this.options.enableVirtualization&&"end"===n?(this.preventKeyAction=!1,this.isKeyBoardAction=!1,this.preventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):"pageDown"===n&&this.options.enableVirtualization&&!this.isVirtualAction?(this.preventKeyAction=!1,this.isKeyBoardAction=!1,this.preventScrollAction=!1,this.list.scrollTop=c):o.previousElementSibling&&o.previousElementSibling.classList.contains("e-virtual-list")&&this.virtualInfo&&this.virtualInfo.startIndex?this.list.scrollTop=this.virtualInfo.startIndex*this.listHeight:this.list.scrollTop=c;else{var y=this.list.querySelector("li:not(.e-virtual-list)").classList.contains(i),v=!(!this.virtualInfo||!this.virtualInfo.startIndex),b=v?this.virtualInfo.startIndex*this.listHeight:0;this.list.scrollTop=v?e&&this.virtualInfo.startIndex?this.options.allowFiltering&&y||!(c>b+2*this.listHeight)||"SfComboBox"!==this.options.moduleName?b+2*this.listHeight:c:b:0}u=this.isKeyBoardAction}this.isKeyBoardAction=u}},e.prototype.scrollTop=function(e){if(void 0===e&&(e=null),this.list&&(this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"))){var t=this.list.querySelectorAll(".e-virtual-list").length,n=this.list.querySelector(".e-item-focus")||this.list.querySelector(".e-active"),o=n&&!isNaN(parseInt(window.getComputedStyle(n).marginBottom,10))?parseInt(window.getComputedStyle(n).marginBottom,10):0,s=this.virtualInfo&&this.virtualInfo.startIndex?n.offsetTop+this.virtualInfo.startIndex*(n.offsetHeight+o):n.offsetTop,a=s-t*(n.offsetHeight+o)-this.list.scrollTop,r=this.list.querySelector("li:not(.e-virtual-list)").classList.contains(i),l=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;a=r&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?a-this.fixedHeaderElement.offsetHeight:a;var d=s-t*(n.offsetHeight+o)+(n.offsetHeight+o)-this.list.scrollTop,h=this.options.enableVirtualization&&"SfAutoComplete"===this.options.moduleName&&a<=0;if(0===this.activeIndex)this.list.scrollTop=0;else if(a<0||h||0===a&&"home"===e){var p=n?n.getAttribute("data-value"):null,c="pageUp"===e?this.getPageCount(this.popupObj.element)-2:1;this.options.enableVirtualization&&this.isKeyBoardAction&&l&&p===l&&"home"!==e&&!this.isVirtualAction?(this.isUpwardScroll=!0,this.preventKeyAction=!0,this.list.scrollTop-=(n.offsetHeight+o)*c,this.preventKeyAction=0!==this.list.scrollTop&&this.preventKeyAction,this.isKeyBoardAction=!1,this.preventScrollAction=!1):this.options.enableVirtualization&&"home"===e?(this.preventScrollAction=!1,this.preventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):("pageUp"===e&&this.options.enableVirtualization&&!this.isVirtualAction&&(this.preventKeyAction=!1,this.isKeyBoardAction=!1,this.preventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+a)}else d>0&&this.list.offsetHeight>d||(this.list.scrollTop=s-(r&&!sf.base.isNullOrUndefined(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},e.prototype.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},e.prototype.setHover=function(e){!e||e.classList.contains("e-hover")||e.classList.contains("e-virtual-list")||(this.removeHover(),sf.base.addClass([e],"e-hover"))},e.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&sf.base.removeClass(e,"e-hover")}},e.prototype.isPopupOpen=function(){return this.popupObj&&document.body.contains(this.popupObj.element)},e.prototype.getPageCount=function(e,t){void 0===t&&(t=!1);var i=e&&e.querySelector(".e-content");if(i){var n=i.classList.contains("e-nodata")?null:getComputedStyle(i.querySelectorAll(".e-list-item")[0],null).getPropertyValue("height"),o=n?i.getBoundingClientRect().height/parseInt(n,10):0;return t?o:Math.round(o)}return 0},e.prototype.getTextWidth=function(e){var t=document.createElement("span");t.style.visibility="hidden",t.style.whiteSpace="nowrap",t.textContent=e,document.body.appendChild(t);var i=t.offsetWidth;return document.body.removeChild(t),i},e.prototype.updateFloatLabelSize=function(){if(this.containerElement){var e=this.containerElement.querySelector(".e-float-text");!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(this.element)&&this.element.clientWidth>0&&(this.element.clientWidth<this.getTextWidth(e.textContent)?e.style.width=this.element.clientWidth+"px":e.style.width="")}},e.prototype.removeFloatLabelSize=function(){if(this.containerElement){var e=this.containerElement.querySelector(".e-float-text");sf.base.isNullOrUndefined(e)||(e.style.width="")}},e.prototype.onPaste=function(e){var t="";e.clipboardData?t=e.clipboardData.getData("text"):window.clipboardData&&(t=window.clipboardData.getData("Text")),this.dotNetRef.invokeMethodAsync("Paste",t)},e}();return{initialize:function(e,t,i,o,s){if(i){var a=new n(e,t,i,o,s);if(a.initialize(),!sf.base.isNullOrUndefined(sf.base.closest(i,"fieldset"))&&sf.base.closest(i,"fieldset").disabled){var r=s.enabled=!1;a.dotNetRef.invokeMethodAsync("UpdateFieldSetStatus",r)}if(s.enableVirtualization)return{itemSize:a.getListHeight(),fullPopupHeight:window.outerHeight,virtualPopupHeight:a.virtualPopupHeight}}return{itemSize:0,fullPopupHeight:0,virtualPopupHeight:0}},renderPopup:function(e,t,i,n,o,s,a){var r=window.sfBlazor.getCompInstance(e);i=i||document.getElementById(e+"_popupholder"),t=t||document.getElementById(e+"_popup"),!sf.base.isNullOrUndefined(r)&&t&&i&&r.renderPopup(t,i,n,o,s,a)},refreshPopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.refreshPopup(t,i)},refreshVirtualIndices:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.virtualInfo=null,i.preStartIndex=0,i.options.totalCount=t,i.preEndIndex=0)},closePopup:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.closePopup(t,i)},updateScrollPosition:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(n.preventKeyAction=!1,n.setScrollPosition(t,i),n.isVirtualAction=!1)},getPageCount:function(e,t){var i=window.sfBlazor.getCompInstance(e);return!sf.base.isNullOrUndefined(i)&&t?i.getPageCount(t):0},setAutoFillSelection:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setAutoFillSelection(t)},removeFillSelection:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeFillSelection()},focusIn:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(document.activeElement!==i.element?setTimeout((function(){t&&i.containerElement?i.containerElement.focus():i.element&&i.element.focus()}),10):t&&i.containerElement?i.containerElement.focus():i.element&&i.element.focus())},focusOut:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(t?i.containerElement.blur():i.element.blur())},updateFloatLabelSize:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.updateFloatLabelSize()},removeFloatLabelSize:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeFloatLabelSize()},destroy:function(e,t,i,n,o){var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||(t&&t instanceof HTMLElement&&(i||s.popupObj)&&(s.isDisposed=!0,s.closePopup(n,o)),s.destroy())}}}()},"./modules/sf-listbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ListBox=function(){"use strict";var e,t="e-list-item",i=function(){function i(t,i,n,o,s){this.element=t,this.dotnetRef=o,this.allowDragAndDrop=n,e=s,this.element.blazor__instance=this,this.scope=i,sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),n&&this.initializeDraggable()}return i.prototype.initializeDraggable=function(){var e=this;if(this.allowDragAndDrop){var i=sf.base.select(".e-ul",this.element),n=new sf.lists.Sortable(i,{scope:this.scope,itemClass:t,beforeDragStart:this.triggerBeforeDragStart.bind(this),drag:this.triggerDrag.bind(this),dragStart:this.triggerDragStart.bind(this),beforeDrop:this.dragEnd.bind(this),placeHolder:function(){return sf.base.createElement("span",{className:"e-placeholder"})},helper:function(i){var n=e.element.cloneNode(),o=i.sender.cloneNode(!0);n.appendChild(o);var s=sf.base.select("."+t,e.element);n.style.width=s.offsetWidth+"px",n.style.height=s.offsetHeight+"px";var a=[].slice.call(sf.base.selectAll("."+t+".e-selected",e.element));return a.length&&a.length>1&&a.indexOf(i.sender)>-1&&o.appendChild(sf.base.createElement("span",{className:"e-list-badge",innerHTML:a.length.toString()})),n.style.zIndex=sf.popups.getZindexPartial(e.element).toString(),n}});this.updateDraggable(n,this.allowDragAndDrop)}},i.prototype.triggerBeforeDragStart=function(e){e.cancel=e.target.classList.contains("e-drag-prevent")},i.prototype.triggerDragStart=function(e){e.bindEvents(e.dragElement)},i.prototype.triggerDrag=function(t){var i,n,o,s=0,a=10,r=t.event;e&&(a=t.target.scrollHeight),t.target&&(t.target.classList.contains("e-listbox-container")||t.target.classList.contains("e-list-item")||t.target.classList.contains("e-input-group")||t.target.classList.contains("e-filter-parent"))&&(t.target.classList.contains("e-list-item")||t.target.classList.contains("e-input-group")||t.target.classList.contains("e-filter-parent")?(o=t.target.closest(".e-listbox-container"),sf.base.isNullOrUndefined(o)&&(o=this.element)):o=t.target,n=(i=o.querySelector(".e-list-parent")).getBoundingClientRect(),o.classList.contains("e-filter-list")&&(s=40),n.y+i.offsetHeight-(r.pageY+36)<1?i.scrollTop=i.scrollTop+a:r.pageY-36-(n.y+s)<1&&(i.scrollTop=i.scrollTop-a)),t.target},i.prototype.dragEnd=function(e){var t,i,n,o=!1,s=!1,a=!1;if(!sf.base.isNullOrUndefined(e.target.parentElement)){n=e.target.parentElement.parentElement,"UL"===e.target.tagName&&e.target.className.indexOf("e-list-parent")>-1&&(n=e.target.parentElement),n.blazor__instance||(((n=n.parentElement).className.indexOf("e-list-item")>-1||n.className.indexOf("e-filter-list")>-1&&n.closest(".e-listboxtool-wrapper"))&&(n=n.parentElement),n.className.indexOf("e-list-parent")>-1?n=n.parentElement.parentElement:n.className.indexOf("e-list-wrap")>-1&&(n=n.parentElement)),e.cancel=!0,n.blazor__instance?(t=n.blazor__instance.scope,i=n.blazor__instance.dotnetRef,s=this.scope===t,this.element===n?(a=!0,s=!1):t||(o=!0)):o=!0;var r=e.helper.getBoundingClientRect();this.dotnetRef.invokeMethodAsync("DragEndAsync",o,e.droppedElement.getAttribute("data-value"),a,s,e.previousIndex,e.currentIndex,i,r.x,r.y)}},i.prototype.keyDownHandler=function(e){var i=e.target;if(38===e.keyCode||40===e.keyCode)if(e.preventDefault(),i.classList.contains("e-listbox-container")){var n=sf.base.select("."+t,this.element);n&&n.focus()}else{var o=[].slice.call(sf.base.selectAll("."+t,this.element)),s=o.indexOf(i);if(s<0)return;if((s=38===e.keyCode?s-1:s+1)<0||s>o.length-1)return;o[parseInt(s.toString(),10)].focus()}else 65===e.keyCode&&e.ctrlKey&&!e.target.classList.contains("e-input-filter")&&e.preventDefault()},i.prototype.updateDraggable=function(e,i){if(e){var n=sf.base.getComponent(e.element,sf.base.Draggable);n.abort=i?"":"."+t}},i.prototype.destroyDraggable=function(){var e=sf.base.getComponent(sf.base.select(".e-ul",this.element),"sortable");sf.base.isNullOrUndefined(e)||(this.updateDraggable(e,this.allowDragAndDrop),e.destroy())},i.prototype.destroy=function(){this.destroyDraggable(),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler)},i.prototype.onPropertyChanged=function(e){this.allowDragAndDrop=e,e?this.initializeDraggable():this.destroyDraggable()},i.prototype.getScopedElement=function(e){return sf.base.select("#"+e).blazor__instance.dotnetRef},i}();return{initialize:function(e,t,n,o,s){if(!sf.base.isNullOrUndefined(e)){new i(e,t,n,o,s);var a,r,l=!1;e.addEventListener("touchstart",(function(){l=!1,r=null,a=setTimeout((function(){l=!0}),500)}),{passive:!0}),e.addEventListener("touchmove",(function(e){r=e.target}),{passive:!0}),e.addEventListener("touchend",(function(e){clearTimeout(a),sf.base.isNullOrUndefined(r)&&(l&&e.preventDefault(),o.invokeMethodAsync("TouchHoldAsync",l,e.target.getAttribute("data-value")))}))}},destroy:function(e){sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blazor__instance)||e.blazor__instance.destroy()},onPropertyChanged:function(e,t){sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.blazor__instance)||e.blazor__instance.onPropertyChanged(t)},getScopedListBox:function(e,t){return e.blazor__instance.getScopedElement(t)}}}()},"./modules/sf-listview.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.ListView=function(){"use strict";var e={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},t={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},i="e-focused",n="e-list-item",o="e-has-child",s="e-list-header",a="e-disabled",r="e-check",l="none",d=".e-list-parent",h=function(){function h(e,t,i,n,o,s){this.dataSourceLevel=["defaultDataKey"],this.currentDataSourceKey="defaultDataKey",this.isWindow=!1,this.isCheckAll=!1,this.isFocus=!1,this.element=t,this.dotNetRef=i,this.dataId=e,this.showCheckBox=n.ShowCheckBox,this.showHeader=n.ShowHeader,this.enable=n.Enabled,this.currentUlElement=t.querySelector(d),this.enableVirtualization=n.EnableVirtualization,this.isWindow=!n.Height,this.enableSelectEvent=o,this.headerTitleInfo=[n.HeaderTitle],this.selectedItems={defaultDataKey:n.SelectedElementIdInfo},this.enableRtl=n.EnableRtl,this.animation=n.Animation,this.isTemplate=n.Template,this.focusId=[],window.sfBlazor.setCompInstance(this),this.datasource=s}return h.prototype.initialize=function(){this.headerElement=this.element.querySelector(".e-headertext"),this.animationObject=new sf.base.Animation(this.animateOptions),this.wireEvents()},h.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyActionHandler,this),sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"focusout",this.removeFocus,this),this.touchModule=new sf.base.Touch(this.element,{swipe:this.swipeActionHandler.bind(this)}),this.enableVirtualization?(sf.base.EventHandler.add(this.element,"scroll",this.scrollHandler,this),this.isWindow&&window.addEventListener("scroll",this.scrollHandler.bind(this))):(sf.base.EventHandler.add(this.element,"mouseover",this.mouseHoverHandler,this),sf.base.EventHandler.add(this.element,"mouseout",this.mouseOutHandler,this))},h.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"focus",this.focusHandler),sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyActionHandler),sf.base.EventHandler.remove(this.element,"click",this.clickHandler),sf.base.EventHandler.remove(this.element,"focusout",this.removeFocus),this.enableVirtualization?(sf.base.EventHandler.remove(this.element,"scroll",this.scrollHandler),this.isWindow&&window.removeEventListener("scroll",this.scrollHandler.bind(this))):(sf.base.EventHandler.remove(this.element,"mouseover",this.mouseHoverHandler),sf.base.EventHandler.remove(this.element,"mouseout",this.mouseOutHandler)),this.touchModule.destroy()},h.prototype.swipeActionHandler=function(e){"Right"===e.swipeDirection&&e.velocity>.5&&"touchend"===e.originalEvent.type&&(this.showCheckBox&&this.dataSourceLevel[this.dataSourceLevel.length-1]&&this.uncheckAllItems(),this.back(e))},h.prototype.showHideItem=function(e,t){var i=this.getLi(e);i&&(i.style.display=t)},h.prototype.enableState=function(e,t){var i=this.getLi(e);i&&(t?i.classList.remove("e-disabled"):i.classList.add("e-disabled"))},h.prototype.getLi=function(e){var t;return this.element&&(t=this.element.querySelector('[data-uid="'+e.id+'"]')),t},h.prototype.scrollHandler=function(){var e=this.currentUlElement.querySelector("."+i);e&&(this.focusedElementId=e.getAttribute("data-uid")),this.addCheckClass()},h.prototype.preventSelection=function(e){var t=this.mouseEvent.target,i=sf.base.closest(t,"."+n);e?this.dataSourceLevel.length>1&&this.dataSourceLevel.pop():this.performSelection(i)},h.prototype.performSelection=function(e){null!==e&&!e.classList.contains(a)&&this.enable&&(this.removeFocus(),this.focusId=[],this.addFocusId(e.getAttribute("data-uid")),this.showCheckBox?this.mouseEvent.target.classList.contains("e-frame")?this.checkUncheckItem(e):e.classList.contains(o)?(this.removeHover(),this.removeFocus(),this.setSelectLI(e,this.mouseEvent)):this.checkUncheckItem(e):(this.currentUlElement.querySelector("."+i)&&this.currentUlElement.querySelector("."+i).classList.remove(i),e.classList.contains(o)?this.setSelectLI(e,this.mouseEvent):e.classList.contains(i)||(e.classList.add(i),this.selectedItems[this.currentDataSourceKey][0]=e.getAttribute("data-uid"))))},h.prototype.selectItem=function(e){var t=this.getLi(e);this.showCheckBox?this.setChecked(t,t.querySelector(".e-checkbox-wrapper")):(sf.base.isNullOrUndefined(t)?this.removeFocus():this.setSelectLI(t,null),this.selectedItems[this.currentDataSourceKey][0]=t.getAttribute("data-uid"))},h.prototype.clickHandler=function(e){if(this.currentUlElement&&!this.element.classList.contains("e-disabled")){var t=e.target,i=t.classList;if(this.mouseEvent=e,i.contains("e-icon-back")||i.contains("e-headertext"))this.back(e);else{var s=sf.base.closest(t.parentNode,"."+n)?sf.base.closest(t.parentNode,"."+n):sf.base.closest(t,"."+n);if(this.enableSelectEvent||this.performSelection(s),null!==s&&!s.classList.contains(a)&&this.enable){if(s.classList.contains(o)){var r=s.getAttribute("data-uid");-1===this.dataSourceLevel.indexOf(r)&&this.dataSourceLevel.push(r)}this.enableSelectEvent&&(this.isFocus=!1,this.getSelectEventData(s,e))}}}},h.prototype.checkUncheckItem=function(e){e.classList.add(i),e.querySelector("."+r)?this.uncheckItem(e):this.setChecked(e,e.querySelector(".e-checkbox-wrapper")),this.dotNetRef.invokeMethodAsync("UpdateData",!sf.base.isNullOrUndefined(e.querySelector("."+r)),e.getAttribute("data-uid"))},h.prototype.back=function(e){if(this.dataSourceLevel.length>1){for(var t,n=this.element.querySelectorAll(d),o=this.element.querySelector("."+s),a=0;a<n.length;a++)this.dataSourceLevel.length>2?n[a].getAttribute("pid")===this.dataSourceLevel[this.dataSourceLevel.length-2]?(this.switchView(this.currentUlElement,n[a],!0),this.currentUlElement=n[a]):n[a].style.display=l:null===n[a].getAttribute("pid")?(this.currentUlElement===n[a]&&(n.forEach((function(e){e.style.display||(t=e)})),this.currentUlElement=t),this.switchView(this.currentUlElement,n[a],!0),this.currentUlElement=n[a]):n[a].style.display=l;if(this.dataSourceLevel.pop(),!this.showCheckBox){var r=this.currentUlElement.querySelectorAll("."+i);r.length>0&&r[0].setAttribute("aria-selected","false")}this.isTemplate||(this.headerTitleInfo.length>1&&this.headerTitleInfo.pop(),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1])),this.currentDataSourceKey=this.dataSourceLevel[this.dataSourceLevel.length-1],1===this.dataSourceLevel.length&&o&&(o.children[0].style.display=l,o.classList.remove("e-list-navigation"));var h={IsInteracted:!(!e&&!this.isRootFocus),Level:this.dataSourceLevel.length>0?this.dataSourceLevel.length-1:this.dataSourceLevel.length};this.dotNetRef.invokeMethodAsync("TriggerBackEvent",h)}},h.prototype.setHoverLI=function(e){this.element.classList.contains(a)||e.classList.contains(a)||e.classList.add("e-hover")},h.prototype.mouseHoverHandler=function(e){var t=sf.base.closest(e.target.parentNode,"."+n);t&&this.setHoverLI(t)},h.prototype.mouseOutHandler=function(e){this.removeHover()},h.prototype.removeHover=function(){var e=this.element.querySelector(".e-hover");e&&e.classList.remove("e-hover")},h.prototype.removeFocus=function(){this.currentUlElement||(this.currentUlElement=this.element.querySelector(d));for(var e=0,t=this.currentUlElement.querySelectorAll("."+i);e<t.length;e++){t[e].classList.remove(i)}this.isRestrictFocus=void 0},h.prototype.isValidLI=function(e){return e&&e.classList.contains(n)&&!e.classList.contains("e-list-group-item")&&!e.classList.contains(a)},h.prototype.setSelectLI=function(e,t){if(this.enable&&this.isValidLI(e)&&!e.classList.contains(i)){var n=this.currentUlElement.querySelector("."+i);n&&this.removeFocusId(n.getAttribute("data-uid")),this.removeFocus(),this.addAriaAttribute(!0,e),this.removeHover(),e.classList.contains(o)&&this.renderSubList(e)}},h.prototype.addAriaAttribute=function(e,t){e?(this.isCheckAll||t.classList.add(i),this.addFocusId(t.getAttribute("data-uid"))):this.showCheckBox||e||!t.classList.contains(i)||(t.classList.remove(i),this.focusId.indexOf(t.getAttribute("data-uid"))>=0&&this.focusId.splice(this.focusId.indexOf(t.getAttribute("data-uid")),1)),(this.showCheckBox||t.classList.contains(o))&&t.setAttribute("aria-selected",e.toString())},h.prototype.renderSubList=function(e){var t=e,n=e.getAttribute("data-uid"),a=this.element.querySelector("."+s);if(e.classList.remove(i),e.classList.add(i),this.showHeader&&a&&(a.children[0].style.display=null,a.classList.add("e-list-navigation")),t.classList.contains(o)&&n){if(this.element.querySelector("[pid='"+n+"']"))this.renderChildList(n,[n]);else{var r={ElementId:n,Key:this.currentDataSourceKey};this.dotNetRef.invokeMethodAsync("ListChildDataSource",r)}this.isTemplate||(this.headerTitleInfo.push(t.innerText.trim()),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1])),-1===this.dataSourceLevel.indexOf(n)&&this.dataSourceLevel.push(n),this.currentDataSourceKey=n}},h.prototype.renderChildList=function(e,t){var i=this.element.querySelectorAll(d);i[i.length-1].getAttribute("pid")||i[i.length-1].setAttribute("pid",e);for(var n=0;n<i.length;n++)if(i[n].getAttribute("pid")===e){this.switchView(this.currentUlElement,i[n],!1),this.currentUlElement=i[n];var o=i[n].querySelectorAll(".e-list-item");if(o[0].getAttribute("aria-level")!==n.toString())for(var s=0;s<o.length;s++)o[s].setAttribute("aria-level",n.toString());t&&(this.selectedItems[""+e]=t)}},h.prototype.mouseDownHandler=function(){this.isRestrictFocus=void 0===this.isRestrictFocus||this.isRestrictFocus},h.prototype.focusHandler=function(e){this.isRestrictFocus?this.isRestrictFocus=!1:sf.base.isNullOrUndefined(this.focusId)||0===this.focusId.length?(this.isRootFocus=!0,this.arrowKeyHandler(e),this.isRootFocus=!1):(this.isFocus=!0,this.updateFocusElement(e))},h.prototype.keyActionHandler=function(e){if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName)switch(e.keyCode){case 36:this.homeKeyHandler(e);break;case 35:this.homeKeyHandler(e,!0);break;case 40:this.arrowKeyHandler(e);break;case 38:this.arrowKeyHandler(e,!0);break;case 39:this.arrowKeyHandler(e);break;case 37:this.arrowKeyHandler(e,!0);break;case 13:this.enterKeyHandler(e);break;case 8:var t=this.element.querySelector("."+s+" .e-icon-back");t&&t.style.display!==l&&(this.showCheckBox&&this.currentDataSourceKey&&this.uncheckAllItems(),this.back(e));break;case 32:this.spaceKeyHandler(e)}},h.prototype.addFocusId=function(e){this.focusId.indexOf(e)<0&&this.focusId.push(e)},h.prototype.removeFocusId=function(e){this.focusId.indexOf(e)>=0&&this.focusId.splice(this.focusId.indexOf(e),1)},h.prototype.updateFocusElement=function(e){var t=this.currentUlElement.querySelector("."+i);t&&(t.classList.remove(i),this.focusId.indexOf(t.getAttribute("data-uid"))>=0&&this.focusId.splice(this.focusId.indexOf(t.getAttribute("data-uid")),1));for(var o=this.currentUlElement.querySelectorAll("."+n),s=0;s<o.length;s++)this.focusId.indexOf(o[s].getAttribute("data-uid"))>=0&&(o[s].classList.add(i),this.addFocusId(o[s].getAttribute("data-uid")),this.addAriaAttribute(!0,o[s]),this.element.setAttribute("aria-activedescendant",o[s].id.toString()),this.enableSelectEvent&&(this.getSelectEventData(o[s],e),this.isFocus=!1))},h.prototype.homeKeyHandler=function(e,t){e.preventDefault();var n=this.currentUlElement.querySelector("."+i);n&&(n.classList.remove(i),this.removeFocusId(n.getAttribute("data-uid")));var o=t?this.currentUlElement.children.length-1:0;o=this.currentUlElement.children[o].classList.contains("e-list-group-item")&&this.currentUlElement.children.length>1?o+1:o;var s=this.currentUlElement.children[o];this.addAriaAttribute(!0,s),s.classList.add(i),this.addFocusId(s.getAttribute("data-uid")),this.currentUlElement.children[o]?this.element.setAttribute("aria-activedescendant",this.currentUlElement.children[o].id.toString()):this.element.removeAttribute("aria-activedescendant"),this.enableSelectEvent&&this.getSelectEventData(s,e)},h.prototype.onArrowKeyDown=function(e,t){var s,a;return!sf.base.isNullOrUndefined(this.currentUlElement.querySelector("."+o))||this.showCheckBox?((a=this.currentUlElement.querySelector("."+i)||this.currentUlElement.querySelector("."+i))&&this.removeFocusId(a.getAttribute("data-uid")),s=this.getSiblingLI(this.currentUlElement.querySelectorAll("."+n),a,t),sf.base.isNullOrUndefined(s)||(a&&(a.classList.remove(i),this.showCheckBox||a.classList.remove(i),this.removeFocusId(a.getAttribute("data-uid"))),s.classList.contains(o)||this.showCheckBox?s.classList.add(i):this.setSelectLI(s,e))):(a=this.currentUlElement.querySelector("."+i),s=this.getSiblingLI(this.currentUlElement.querySelectorAll("."+n),a,t),this.setSelectLI(s,e)),s?this.element.setAttribute("aria-activedescendant",s.id.toString()):this.element.removeAttribute("aria-activedescendant"),s},h.prototype.getSiblingLI=function(e,t,i){var n,o,s=Array.prototype.slice.call(e);for(o=t?s.indexOf(t):!0===i?s.length:-1,n=s[o+(!0===i?-1:1)];n&&n.classList.contains(a);)n=!0===i?n.previousElementSibling:n.nextElementSibling;return n},h.prototype.arrowKeyHandler=function(e,t){if(this.isRootFocus||e.preventDefault(),this.currentUlElement){var i=this.onArrowKeyDown(e,t);i&&this.addFocusId(i.getAttribute("data-uid"));var n=this.element.getBoundingClientRect().top,o=this.element.getBoundingClientRect().height,s=void 0;if(i){var a=i.getBoundingClientRect().top,r=i.getBoundingClientRect().height;if(t)(s=this.isWindow?a:a-n)<0&&(this.isWindow?window.scroll(0,scrollY+s):this.element.scrollTop=this.element.scrollTop+s);else{var l=this.isWindow?window.innerHeight:o;(s=this.isWindow?a+r:a-n+r)>l&&(this.isWindow?window.scroll(0,scrollY+(s-l)):this.element.scrollTop=this.element.scrollTop+(s-l))}}}},h.prototype.enterKeyHandler=function(e){if(this.currentUlElement){var t=this.currentUlElement.querySelector("."+i);this.currentUlElement.querySelector("."+o)&&t?(t.classList.remove(i),this.showCheckBox&&(this.removeFocus(),this.removeHover()),this.setSelectLI(t,e)):sf.base.isNullOrUndefined(t)||this.spaceKeyHandler(e)}},h.prototype.checkAllItems=function(){this.isCheckAll=!0,this.updateCheckBoxState(!0),this.isCheckAll=!1},h.prototype.uncheckAllItems=function(){this.updateCheckBoxState(!1)},h.prototype.updateCheckBoxState=function(e){if(this.showCheckBox)for(var t=this.currentUlElement.querySelectorAll("."+n),i=this.enableVirtualization?this.currentUlElement.childElementCount-2:this.currentUlElement.childElementCount,o=0;o<i;o++){var s=t[o].querySelector(".e-frame");s&&(e&&!s.classList.contains(r)?this.checkItem(t[o]):!e&&s.classList.contains(r)&&this.uncheckItem(t[o]))}},h.prototype.checkItem=function(e){this.toggleCheckBox(e,!0)},h.prototype.getCheckData=function(e,t,i){var n=e.id;if(i!==e.id||sf.base.isNullOrUndefined(e.id)){i=i.toLowerCase();for(var o=0,s=Object.entries(e);o<s.length;o++){var a=s[o],r=""+a[0],l=""+a[1];(r=r.toLowerCase())===i&&(n=l)}}var d=this.currentUlElement.querySelector("[data-uid='"+n+"']");t?this.checkItem(d):this.uncheckItem(d),this.removeFocus()},h.prototype.spaceKeyHandler=function(e){if(this.isTemplate||e.preventDefault(),this.enable&&this.showCheckBox&&this.currentUlElement){var t=this.currentUlElement.querySelector("."+i);!sf.base.isNullOrUndefined(t)&&sf.base.isNullOrUndefined(t.querySelector("."+r))?this.setChecked(t,t.querySelector(".e-checkbox-wrapper")):this.uncheckItem(t),this.enableSelectEvent&&this.getSelectEventData(t,e)}},h.prototype.setChecked=function(e,t){this.removeFocus(),e.classList.add(i),this.addAriaAttribute(!0,e),t&&(t.querySelector(".e-frame").classList.add(r),t.setAttribute("aria-checked","true")),this.selectedItems[this.currentDataSourceKey]&&-1===this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].push(e.getAttribute("data-uid"))},h.prototype.toggleCheckBox=function(e,t){if(this.showCheckBox){var i=e;if(!sf.base.isNullOrUndefined(i)){var n=i.querySelector(".e-frame");this.addAriaAttribute(t,i),sf.base.isNullOrUndefined(n)||(t?n.classList.add(r):n.classList.remove(r),n.parentElement.setAttribute("aria-checked",t?"true":"false"))}}},h.prototype.uncheckItem=function(e){e&&(this.selectedItems[this.currentDataSourceKey]&&-1!==this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].splice(this.selectedItems[this.currentDataSourceKey].indexOf(e.getAttribute("data-uid")),1),this.toggleCheckBox(e,!1))},h.prototype.addCheckClass=function(){this.currentUlElement||(this.currentUlElement=this.element.querySelector(d));for(var e=this.enableVirtualization?this.currentUlElement.querySelectorAll("."+n):this.currentUlElement.children,t=this.selectedItems[this.currentDataSourceKey],o=0;o<e.length;o++)this.showCheckBox?(this.focusedElementId&&(this.focusedElementId===e[o].getAttribute("data-uid")?e[o].classList.add(i):e[o].classList.remove(i)),t.length>0&&(-1!==t.indexOf(e[o].getAttribute("data-uid"))?this.toggleCheckBox(e[o],!0):this.toggleCheckBox(e[o],!1))):t[0]===e[o].getAttribute("data-uid")?e[o].classList.add(i):e[o].classList.remove(i);for(o=0;o<e.length;o++)this.showCheckBox?(this.focusedElementId&&(this.focusedElementId===e[o].getAttribute("data-uid")?e[o].classList.add(i):e[o].classList.remove(i)),t.length>0&&(-1!==t.indexOf(e[o].getAttribute("data-uid"))?this.toggleCheckBox(e[o],!0):this.toggleCheckBox(e[o],!1))):t&&t[0]===e[o].getAttribute("data-uid")?e[o].classList.add(i):e[o].classList.remove(i)},h.prototype.getSelectedItems=function(){var e=this.currentUlElement.querySelectorAll(".e-check");this.selectedItems[this.currentDataSourceKey]=[];for(var t=0;t<e.length;t++){var i=sf.base.closest(e[t],"."+n);this.selectedItems[this.currentDataSourceKey]&&-1===this.selectedItems[this.currentDataSourceKey].indexOf(i.getAttribute("data-uid"))&&this.selectedItems[this.currentDataSourceKey].push(i.getAttribute("data-uid"))}return{ElementId:this.selectedItems[this.currentDataSourceKey],Key:this.currentDataSourceKey}},h.prototype.getSelectEventData=function(e,t){if(e){var i="click"===t.type?!e.querySelector("."+r):!!e.querySelector("."+r),n={ElementId:e.getAttribute("data-uid"),IsChecked:i,Key:e.classList.contains(o)&&!t.target.classList.contains("e-frame")?this.dataSourceLevel[this.dataSourceLevel.length-2]:this.currentDataSourceKey,IsInteracted:!(!t&&!this.isRootFocus),Level:this.dataSourceLevel.length>0?this.dataSourceLevel.length-1:this.dataSourceLevel.length};this.isFocus||this.dotNetRef.invokeMethodAsync("TriggerClickEvent",n)}},h.prototype.switchView=function(i,n,o){var s=this;if(i&&n){var a=i.style.position,r="hidden"!==this.element.style.overflow?this.element.style.overflow:"",d=void 0,h=this.animation.duration;if(i.style.position="absolute",i.classList.add("e-view"),"Disable"===sf.base.animationMode){d=this.enableRtl?t.None:e.None,o=this.enableRtl,h=0}else if(this.animation.effect)"None"===this.animation.effect&&"Enable"===sf.base.animationMode&&(this.animation.effect="SlideLeft"),d=this.enableRtl?t[this.animation.effect]:e[this.animation.effect];else{d=e.SlideLeft,o=this.enableRtl,h=0}this.element.style.overflow="hidden",this.animationObject.animate(i,{name:o?d[0]:d[1],duration:h,timingFunction:this.animation.easing,end:function(e){i.style.display=l,s.element.style.overflow=r,i.style.position=a,i.classList.remove("e-view")}}),n.style.display="",this.animationObject.animate(n,{name:o?d[2]:d[3],duration:h,timingFunction:this.animation.easing,end:function(){s.dotNetRef.invokeMethodAsync("TriggerActionComplete",s.datasource)}}),this.currentUlElement=n}},h.prototype.setAnimation=function(e){this.animation=e},h.prototype.setSelectedItems=function(e){var t=this.element.querySelector("."+s);sf.base.isNullOrUndefined(e)||(this.selectedItems={defaultDataKey:e}),e.length>0?this.currentUlElement=this.element.querySelector('[data-uid="'+e+'"]').closest(d):this.currentUlElement=this.element.querySelector(d);var i=this.element.querySelector('[data-uid="'+e+'"]'),n=i&&i.classList.contains("e-has-child")||!1;n?(this.dataSourceLevel=["defaultDataKey"],this.currentUlElement.style.removeProperty("display"),this.addCheckClass(),this.currentDataSourceKey="defaultDataKey"):this.selectedItems[this.currentDataSourceKey]=[this.currentDataSourceKey],this.showCheckBox&&this.removeFocus(),this.headerElement&&n&&(this.headerTitleInfo=this.headerTitleInfo.splice(0,1),this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1]),1===this.dataSourceLevel.length&&t&&n&&(t.children[0].style.display=l,t.classList.remove("e-list-navigation"))},h.prototype.updateHeaderTitle=function(e){this.headerTitleInfo[0]=e,this.headerElement&&(this.headerElement.innerText=e)},h.prototype.updateParentState=function(){this.currentDataSourceKey="defaultDataKey",this.dataSourceLevel=["defaultDataKey"],this.element.querySelectorAll(d).forEach((function(e){null===e.getAttribute("pid")&&(e.style.display="")})),this.isTemplate||(this.headerTitleInfo.length>1&&this.headerTitleInfo.pop(),this.headerElement&&(this.headerElement.innerText=this.headerTitleInfo[this.headerTitleInfo.length-1]));var e=this.element.querySelector("."+s);1===this.dataSourceLevel.length&&e&&(e.children[0].style.display=l,e.classList.remove("e-list-navigation"))},h.prototype.destroy=function(){this.element.style.display=l,this.unWireEvents()},h}();return{initialize:function(e,t,i,n,o,s){t&&e&&(new h(e,t,i,n,o,s),window.sfBlazor.getCompInstance(e).initialize())},renderChildList:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.renderChildList(t,i)},addActiveClass:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.addCheckClass()},showHideItem:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.showHideItem(t,i)},enableState:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.enableState(t,i)},back:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.back(null)},checkAllItems:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.checkAllItems()},uncheckAllItems:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.uncheckAllItems()},getCheckData:function(e,t,i,n){var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o)&&null!=t)for(var s=0;s<t.length;s++)o.getCheckData(t[s],i,n)},selectItem:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&null!=t)for(var n=0;n<t.length;n++)i.selectItem(t[n])},preventSelection:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.preventSelection(t)},getCheckedItems:function(e){var t=window.sfBlazor.getCompInstance(e);return sf.base.isNullOrUndefined(t)?{}:t.getSelectedItems()},setAnimation:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setAnimation(t)},setCheckedItems:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setSelectedItems(t)},updateHeaderTitle:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateHeaderTitle(t)},updateParentState:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.updateParentState()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-menu.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Menu=function(){"use strict";var e="e-menu-item";function t(t,n,o,s){if(9===o&&s&&(o=39),40===o||38===o){var a=void 0,r=void 0,l=void 0;n.classList.contains("e-menu-parent")?((l=(r=n).querySelector("."+e+".e-focused"))?(a=Array.prototype.indexOf.call(r.children,l),a=40===o?a===r.childElementCount-1?0:a+1:0===a?r.childElementCount-1:a-1):a=0,a=i(r,a,40===o)):n.classList.contains(e)&&(l=(r=n.parentElement).querySelector("."+e+".e-focused"),a=Array.prototype.indexOf.call(r.children,l||n),a=i(r,a=40===o?a===r.childElementCount-1?0:a+1:0===a?r.childElementCount-1:a-1,40===o)),r&&-1!==a&&r.children[parseInt(a.toString(),10)].focus()}else if(((t.classList.contains("e-rtl")?39===o:37===o)||27===o||39===o&&!n.classList.contains("e-menu-caret-icon")&&s||13===o&&sf.base.closest(n,".e-menu-container"))&&(n.classList.contains("e-ul")||n.classList.contains(e)&&!n.parentElement.classList.contains("e-contextmenu"))){var d=void 0;s&&(d=sf.base.select(s));r=n.classList.contains("e-ul")?n:n.parentElement;var h=sf.base.closest(r,".e-menu-vscroll"),p=void 0,c=h?h.previousElementSibling:r.previousElementSibling;if(!d||c&&13!==o){var u=sf.base.closest(r,".e-hamburger");p=u?sf.base.select("."+e+".e-selected",u):sf.base.select("."+e+".e-selected",c)}else p=sf.base.select("."+e+".e-selected",d),(h=sf.base.select(".e-menu-vscroll",t))&&d.blazor__instance.destroyScroll("none");p&&p.focus()}}function i(e,t,n,o){void 0===o&&(o=0);var s=e.children[parseInt(t.toString(),10)];return o===e.childElementCount?-1:((s.classList.contains("e-separator")||s.classList.contains("e-disabled")||s.classList.contains("e-menu-hide"))&&(t=n?t===e.childElementCount-1?0:t+1:0===t?e.childElementCount-1:t-1,o++),((s=e.children[parseInt(t.toString(),10)]).classList.contains("e-separator")||s.classList.contains("e-disabled")||s.classList.contains("e-menu-hide"))&&(t=i(e,t,n)),t)}var n,o="e-menu-item",s="e-vertical",a=function(){function e(e,t){this.animation=new sf.base.Animation({}),this.dataId=e.dataId,this.element=e.element,this.dotnetRef=t,this.enableScroller=e.enableScrolling,this.animationSettings=e.animationSettings,window.sfBlazor.setCompInstance(this),this.addEventListener(),this.updateScroll(e.enableScrolling,e.isRtl,!1)}return e.prototype.calculatePosition=function(e,t,i,s){var a,r;this.isShowItemOnClick=e.showItemOnClick,n=e;var l=e.element.getElementsByClassName(o)[e.itemIndex].getBoundingClientRect();this.popupInstance=window.sfBlazor.getCompInstance(e.popupDataId);var d=this.popupInstance.hideMenu(!0);if(d){if(this.popup=e.popup,e.enableScrolling){d=this.positionHelper(e,d);var h=this.popup.querySelector(".e-vscroll-bar");h&&sf.base.EventHandler.add(h,"scroll",this.scrollHandler,this)}var p=d.classList.contains("e-menu-parent")?d:sf.base.select(".e-menu-parent",d);this.popupInstance.setBlankIconStyle(p,e.isRtl);var c,u=p.getBoundingClientRect(),f=this.popupInstance.getMenuWidth(p,u.width,e.isRtl);if(e.isVertical){if(r=l.top,s&&(r=s),e.isRtl){if((a=l.left)-f<document.documentElement.clientLeft)(c=l.right+f)<document.documentElement.clientWidth&&(a=c)}else if(a=l.right,i&&(a=i),a+f>document.documentElement.clientWidth)(c=l.left-f)>document.documentElement.clientLeft&&(a=c)}else if(r=l.bottom,s&&(r=s),e.isRtl){if(a=l.right,l.right-f<document.documentElement.clientLeft)(c=l.left+f)<document.documentElement.clientWidth&&(a=c)}else if(a=l.left,i&&(a=i),a+f>document.documentElement.clientWidth)(c=l.right-f)>document.documentElement.clientLeft&&(a=c);var m=e.scrollHeight||u.height;if(r+m>document.documentElement.clientHeight){var g=document.documentElement.clientHeight-m-20;g>document.documentElement.clientTop&&(r=g)}this.popupInstance.updateProperty(e.showItemOnClick,e.element),this.popup.style.zIndex=sf.popups.getZindexPartial(this.popup).toString(),d.style.width=Math.ceil(f)+"px",this.popup.style.left=Math.ceil(a)+"px",this.popup.style.top=Math.ceil(r)+"px",p.style.visibility="",t&&p.focus()}},e.prototype.subMenuPosition=function(e,t){var i=window.sfBlazor.getCompInstance(e.popupDataId),n=i.hideMenu();e.enableScrolling&&n&&(n=this.positionHelper(e,n)),i.subMenuPosition(n,e.isRtl,e.showItemOnClick,!1,e.scrollHeight,!1,t)},e.prototype.positionHelper=function(e,t){return this.destroyScroll(null,t),e.scrollHeight?sf.navigations.addScrolling(sf.base.createElement,e.popup,t,"vscroll",e.isRtl,e.scrollHeight):t},e.prototype.clickHandler=function(e){var t=e.target;if(!sf.base.isNullOrUndefined(this.popup)&&sf.base.closest(t,"#"+this.popup.id)){if((n=sf.base.closest(t,"."+o))&&!n.classList.contains("e-menu-caret-icon")){sf.base.closest(t,"."+o+".e-selected")||this.destroyScroll("none");var i=sf.base.select(".e-selected",this.element);!i||sf.base.closest(document.activeElement,"#"+this.popup.id)&&"LI"!==document.activeElement.tagName||i.focus()}}else if(sf.base.closest(t,"#"+this.element.id+".e-hamburger")&&!t.classList.contains("e-menu-parent")&&!t.classList.contains("e-menu-container")){var n;(n=t.classList.contains(o)?t:sf.base.closest(t,"."+o+".e-focused"))&&!n.classList.contains("e-menu-caret-icon")&&this.focusMenu(!0)}},e.prototype.resizeMenu=function(){if(this.enableScroller){var e=this.element.parentElement.querySelectorAll(".e-menu-container")[0],t=e.getElementsByClassName("e-menu-parent")[0],i=sf.base.select(".e-menu-hscroll",e),n=t&&t.offsetWidth,o=window.innerWidth-t.getBoundingClientRect().left;if(n>o){if(e.style.width=Math.ceil(o)+"px",!i){var a=sf.base.select(".e-menu",e);a&&sf.navigations.addScrolling(sf.base.createElement,e,a,"hscroll",!1)}}else if(i){var r=this.element.classList.contains(s)?sf.base.getInstance(i,sf.navigations.VScroll):sf.base.getInstance(i,sf.navigations.HScroll);sf.navigations.destroyScroll(r,i),e.style.width=""}}},e.prototype.scrollHandler=function(){var e=this.popup.querySelector(".e-menu-parent");null!=e&&e.classList.contains("e-transparent")&&e.classList.remove("e-transparent")},e.prototype.keyDownHandler=function(e){(this.element.children[0].tabIndex=-1,9===e.keyCode||e.shiftKey||e.preventDefault(),this.element.classList.contains("e-hamburger"))?t(this.element,e.target,e.keyCode):sf.base.select(".e-menu",this.element).classList.contains(s)?38!==e.keyCode&&40!==e.keyCode||t(this.element,e.target,e.keyCode):37!==e.keyCode&&39!==e.keyCode||t(this.element,e.target,37===e.keyCode?38:40);if(this.isTabFocused&&(e.target.classList.remove("e-focused"),this.isTabFocused=!1),9===e.keyCode||9===e.keyCode&&e.shiftKey){e.target.blur();var i=this;setTimeout((function(){i.element.children[0].tabIndex=0}),5)}},e.prototype.focusHandler=function(e){e.relatedTarget&&(e.target.querySelector("."+o+".e-focused")||(this.element.children[0].tabIndex=-1,e.target.children[0].focus(),e.target.children[0].classList.add("e-focused"),this.isTabFocused=!0))},e.prototype.focusMenu=function(e){if(sf.base.select(".e-menu-vscroll",this.popup))return this.destroyScroll(""),void((n=this.popupInstance.getLastMenu())&&n.focus());var t=sf.base.selectAll(".e-menu-parent",this.element);if(t.length)if(e)t[0].focus();else{var i=sf.base.select("."+o+".e-focused",t[t.length-1]),n=void 0;i?(i.focus(),n=i):(t[t.length-1].focus(),n=t[t.length-1]),null!=this.animationSettings&&n.classList.contains("e-ul")&&this.toggleMenuAnimation(n,this.animationSettings)}},e.prototype.destroyScroll=function(e,t,i){var n,o=sf.base.selectAll(".e-menu-vscroll",this.popup),s=[].slice.call(sf.base.selectAll(".e-menu-parent",this.popup)),a=-1;!sf.base.isNullOrUndefined(e)&&t&&(a=s.indexOf(t)),o.forEach((function(o){null,n=sf.base.select(".e-ul",o),i||n&&!sf.base.isNullOrUndefined(e)?t?s.indexOf(n)>a&&(o.style.display=e):o.style.display=e:sf.navigations.destroyScroll(sf.base.getInstance(o,sf.navigations.VScroll),o,t)}))},e.prototype.mouseDownHandler=function(e){this.isShowItemOnClick&&this.animationElement&&sf.base.closest(e.target,"#"+this.element.id)&&sf.base.Animation.stop(this.animationElement);var t=e.target;if(this.isTabFocused){var i=this.element.querySelector("."+o+".e-focused");i&&(i.classList.remove("e-focused"),this.isTabFocused=!1)}this.element.children[0].tabIndex=0;var n=!document.body.contains(this.element);(sf.base.isNullOrUndefined(this.element)||n)&&this.removeEventListener(!1);var s=sf.base.closest(t,".e-scroll-nav");if(sf.base.isNullOrUndefined(this.popup)||!sf.base.closest(t,"#"+this.popup.id)||s){var a=sf.base.selectAll(".e-ul",this.element).length;if(n||!sf.base.select(".e-focused",this.element)&&!sf.base.select(".e-selected",this.element)||sf.base.closest(e.target,"#"+this.element.id)||s&&!(a>1)||this.dotnetRef.invokeMethodAsync("DocumentMouseDownAsync",!0,!1,!sf.base.isNullOrUndefined(s),!1,!1),!(sf.base.isNullOrUndefined(this.popup)||sf.base.isNullOrUndefined(this.popupInstance)||sf.base.closest(e.target,"."+o+".e-selected")&&this.popupInstance.subMenuOpen||s))if(this.popupInstance.subMenuOpen)this.destroyScroll("none");else{var r=sf.base.closest(e.target,".e-ul");sf.base.select(".e-menu-vscroll",this.popup)&&this.destroyScroll("none",r)}}},e.prototype.mouseOverHandler=function(e){var t=document.body.contains(this.element);!sf.base.isNullOrUndefined(this.element)&&t||this.removeEventListener(!1);var i=sf.base.closest(e.target,"."+o);this.popup&&this.popupInstance.subMenuOpen&&sf.base.closest(e.target,"#"+this.element.id)&&i&&(i.querySelector(".e-caret")&&parseInt(this.popup.style.top)===Math.ceil(e.target.getBoundingClientRect().top)||(this.destroyScroll("none",sf.base.closest(e.target,".e-ul"),!0),this.enableScroller&&n&&this.calculatePosition(n))),t&&sf.base.select(".e-focused",this.element)&&!sf.base.closest(e.target,"#"+this.element.id)&&this.dotnetRef.invokeMethodAsync("DocumentMouseDownAsync",!1,!1,!1,!0,!0)},e.prototype.updateScroll=function(e,t,i){if(e){sf.base.EventHandler.add(window,"resize",this.resizeMenu,this);var n=sf.base.select(".e-menu",this.element);n&&sf.base.isNullOrUndefined(this.element.querySelector(".e-menu-hscroll"))&&sf.navigations.addScrolling(sf.base.createElement,this.element,n,n.classList.contains(s)?"vscroll":"hscroll",t)}else if(i){var o=sf.base.select(".e-menu-"+(this.element.classList.contains(s)?"vscroll":"hscroll"),this.element);if(o){sf.base.EventHandler.remove(window,"resize",this.resizeMenu);var a=this.element.classList.contains(s)?sf.base.getInstance(o,sf.navigations.VScroll):sf.base.getInstance(o,sf.navigations.HScroll);sf.navigations.destroyScroll(a,o)}}},e.prototype.orientationScroll=function(e,t){var i=sf.base.select(".e-menu-"+(this.element.classList.contains(s)?"vscroll":"hscroll"),this.element);if(i){sf.base.EventHandler.remove(window,"resize",this.resizeMenu);var n=this.element.classList.contains(s)?sf.base.getInstance(i,sf.navigations.VScroll):sf.base.getInstance(i,sf.navigations.HScroll);sf.navigations.destroyScroll(n,i)}else if(e&&!i){sf.base.EventHandler.add(window,"resize",this.resizeMenu,this);var o=sf.base.select(".e-menu",this.element);o&&sf.base.isNullOrUndefined(this.element.querySelector(".e-menu-hscroll"))&&sf.navigations.addScrolling(sf.base.createElement,this.element,o,o.classList.contains(s)?"vscroll":"hscroll",t)}},e.prototype.addDocEvent=function(e,t,i,n){e.__eventList={},e.__eventList.events=[];var o=i;n&&(o=o.bind(n));for(var s=t.split(" "),a=0;a<s.length;a++)this.eventData.push({name:s[parseInt(a.toString(),10)],listener:i,debounce:o,id:n.element.id}),sf.base.Browser.isIE?e.addEventListener(s[parseInt(a.toString(),10)],o):e.addEventListener(s[parseInt(a.toString(),10)],o,{passive:!1});return o},e.prototype.removeDocEvent=function(e,t,i,n){for(var o,s=-1,a=t.split(" "),r=0;r<a.length;r++){for(var l=this.eventData.length-1;l>=0;l--)this.eventData[parseInt(l.toString(),10)].name===a[parseInt(l.toString(),10)]&&this.eventData[parseInt(l.toString(),10)].listener===i&&this.eventData[parseInt(l.toString(),10)].id===n&&(s=l,o=this.eventData[parseInt(l.toString(),10)].debounce);-1!==s&&this.eventData.splice(s,1),o&&e.removeEventListener(a[parseInt(r.toString(),10)],o)}},e.prototype.addEventListener=function(){sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(this.element.children[0],"focus",this.focusHandler,this),this.eventData=[],this.addDocEvent(document,"mousedown touchstart",this.mouseDownHandler,this),this.addDocEvent(document,"mouseover",this.mouseOverHandler,this),this.addDocEvent(document,"click",this.clickHandler,this)},e.prototype.removeEventListener=function(e){e&&(sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(this.element.children[0],"focus",this.focusHandler)),this.removeDocEvent(document,"mousedown touchstart",this.mouseDownHandler,this.element.id),this.removeDocEvent(document,"mouseover",this.mouseOverHandler,this.element.id),this.removeDocEvent(document,"click",this.clickHandler,this.element.id)},e.prototype.toggleMenuAnimation=function(e,t){"None"!==t.effect&&(this.animationElement=e,this.animation.animate(e,{name:t.effect,duration:t.duration,timingFunction:t.easing,begin:function(e){e.element&&e.element.parentElement&&(e.element.parentElement.style.height=e.element.offsetHeight+"px")},end:function(e){e.element&&e.element.parentElement&&(e.element.parentElement.style.height="")}}))},e}();return{initialize:function(e,t){sf.base.isNullOrUndefined(e.element)||new a(e,t)},calculatePosition:function(e,t,i,n){var o=window.sfBlazor.getCompInstance(e.dataId);if(!sf.base.isNullOrUndefined(o)&&(o.calculatePosition(e,t,i,n),null!=o.animationSettings)){var s=window.sfBlazor.getCompInstance(e.popupDataId),a=sf.base.select(".e-menu-parent",s.element);o.enableScroller&&a&&sf.base.closest(a,".e-menu-vscroll")&&(a=sf.base.closest(a,".e-menu-vscroll")),o.toggleMenuAnimation(a,o.animationSettings)}},subMenuPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e.dataId);if(!sf.base.isNullOrUndefined(i)&&(i.animationElement&&i.animationSettings&&sf.base.Animation.stop(i.animationElement),i.subMenuPosition(e,t),null!=i.animationSettings)){var n=window.sfBlazor.getCompInstance(e.popupDataId).hideMenu();n.style.visibility="",i.enableScroller&&n&&sf.base.closest(n,".e-menu-vscroll")&&(n=sf.base.closest(n,".e-menu-vscroll")),i.toggleMenuAnimation(n,i.animationSettings)}},focusMenu:function(e){var t=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(t)&&"INPUT"!==document.activeElement.tagName&&document.activeElement.className.indexOf("e-input")<0&&t.focusMenu(!1)},updateScroll:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.updateScroll(t,i,!0)},toggleAnimation:function(e){var t=window.sfBlazor.getCompInstance(e);t&&null!=t.animationSettings&&t.animationElement&&t.toggleMenuAnimation(t.animationElement,t.animationSettings)},orientationScroll:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.orientationScroll(t,i)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeEventListener(!0)}}}()},"./modules/sf-numerictextbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.NumericTextBox=function(){"use strict";var e=new RegExp("^(-)?(\\d*)$"),t=0,i=function(){function i(e,t,i,n,o){var s=this;window.sfBlazor=window.sfBlazor,this.keyCharCodeHelper=function(e){return s.element.value.substring(0,s.element.selectionStart)+String.fromCharCode(e.which)+s.element.value.substring(s.element.selectionEnd)},this.keyHelper=function(e){return s.element.value.substring(0,s.element.selectionStart)+e.key+s.element.value.substring(s.element.selectionEnd)},this.dataId=e,this.wrapperElement=t,this.element=i,this.options=o,window.sfBlazor.setCompInstance(this),this.dotNetRef=n}return i.prototype.initialize=function(){this.spinButtonEvents(),sf.base.EventHandler.add(this.element,"focus",this.focusHandler,this),sf.base.EventHandler.add(this.element,"blur",this.focusOutHandler,this),sf.base.EventHandler.add(this.element,"keypress",this.keyPressHandler,this),sf.base.EventHandler.add(this.element,"keydown",this.keyDownHandler,this),sf.base.EventHandler.add(this.element,"drop",this.dropHandler,this),sf.base.EventHandler.add(this.element,"paste",this.pasteHandler,this),sf.base.Browser.isDevice&&sf.base.EventHandler.add(document,"scroll",this.scrollHandler),sf.base.EventHandler.add(window,"resize",this.updateFloatLabelSize,this),this.updateFloatLabelSize()},i.prototype.clearInvalid=function(e){this.element.value=e},i.prototype.keyPressHandler=function(e){if(!this.options.enabled||this.options.readonly)return!0;var t=e.keyCode;if(0===e.which||e.metaKey||e.ctrlKey||8===t||13===t)return!0;var i=this.options.decimalSeparator,n=String.fromCharCode(e.which),o="NumpadDecimal"===e.code&&this.keyCharCodeHelper(e)!==i;o&&(n=i);var s=this.element.value;if(s=s.substring(0,this.element.selectionStart)+n+s.substring(this.element.selectionEnd),this.numericRegex().test(s)){if(o){var a=this.element.selectionStart+1;this.element.value=s,this.element.setSelectionRange(a,a),e.preventDefault(),e.stopPropagation()}return!0}return e.preventDefault(),e.stopPropagation(),!1},i.prototype.dropHandler=function(e){if(this.options.enabled&&!this.options.readonly){var t=e.dataTransfer.getData("text/plain").trim();this.numericRegex().test(t.trim())||(t=t.replace(/[^-0-9.,]/g,""),this.dotNetRef.invokeMethodAsync("InvokePasteHandler",t,e.type))}},i.prototype.pasteHandler=function(e){if(this.options.enabled&&!this.options.readonly){var t=e.clipboardData.getData("text/plain");this.numericRegex().test(t.trim())?this.dotNetRef.invokeMethodAsync("InvokePasteHandler",t,e.type):(t=t.replace(/[^-0-9.,]/g,""),sf.base.isNullOrUndefined(this.element)||this.element.value!==t?this.dotNetRef.invokeMethodAsync("InvokePasteHandler",t,e.type):e.preventDefault())}},i.prototype.preventHandler=function(){var e=this,t=/ipad|iphone|ipod|mac/.test(navigator.userAgent.toLowerCase());setTimeout((function(){if(e.element.selectionStart>0){var i=e.element.selectionStart,n=e.element.selectionStart-1,o=e.element.value.split(""),s=e.options.decimalSeparator.charCodeAt(0),a=e.element;" "===e.element.value[n]&&e.element.selectionStart>0&&!t?(sf.base.isNullOrUndefined(e.prevVal)?e.element.value=e.element.value.trim():0!==n?e.element.value=e.prevVal:0===n&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(n,n)):isNaN(parseFloat(a.value[a.selectionStart-1]))&&45!==a.value[a.selectionStart-1].charCodeAt(0)?(o.indexOf(a.value[a.selectionStart-1])!==o.lastIndexOf(a.value[a.selectionStart-1])&&a.value[a.selectionStart-1].charCodeAt(0)===s||a.value[a.selectionStart-1].charCodeAt(0)!==s)&&(a.value=a.value.substring(0,n)+a.value.substring(i,a.value.length),a.setSelectionRange(n,n),isNaN(parseFloat(a.value[a.selectionStart-1]))&&a.selectionStart>0&&a.value.length&&e.preventHandler()):isNaN(parseFloat(a.value[a.selectionStart-2]))&&a.selectionStart>1&&45!==a.value[a.selectionStart-2].charCodeAt(0)&&(o.indexOf(a.value[a.selectionStart-2])!==o.lastIndexOf(a.value[a.selectionStart-2])&&a.value[a.selectionStart-2].charCodeAt(0)===s||a.value[a.selectionStart-2].charCodeAt(0)!==s)&&(a.setSelectionRange(n,n),e.nextEle=a.value[a.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&a.value[a.selectionStart]===e.nextEle&&isNaN(parseFloat(a.value[a.selectionStart-1]))&&(a.setSelectionRange(a.selectionStart+1,a.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===a.value.trim()&&a.setSelectionRange(0,0),a.selectionStart>0&&45===a.value[a.selectionStart-1].charCodeAt(0)&&a.selectionStart>1&&(sf.base.isNullOrUndefined(e.prevVal)?a.value=a.value:a.value=e.prevVal,a.setSelectionRange(a.selectionStart,a.selectionStart)),e.prevVal=a.value}}))},i.prototype.keyDownHandler=function(e){var t=/ipad|iphone|ipod|mac/.test(navigator.userAgent.toLowerCase());this.options.readonly||(sf.base.Browser.isDevice&&38!==e.keyCode&&40!==e.keyCode&&8!==e.keyCode&&(this.numericRegex().test(this.keyCharCodeHelper(e))||this.numericRegex().test(this.keyHelper(e))||(t&&sf.base.Browser.isDevice?this.preventHandler():e.preventDefault())),!t&&sf.base.Browser.isDevice&&this.preventHandler(),38===e.keyCode?(e.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","increment",e,this.element.value)):40===e.keyCode&&(e.preventDefault(),this.dotNetRef.invokeMethodAsync("ServerAction","decrement",e,this.element.value)))},i.prototype.numericRegex=function(){var t=this.options.decimalSeparator,i="*";return"."===t&&(t="\\"+t),0===this.options.decimals&&this.options.validateDecimalOnType?e:(this.options.decimals&&this.options.validateDecimalOnType&&(i="{0,"+this.options.decimals+"}"),new RegExp("^(-)?(((\\d+("+t+"\\d"+i+")?)|("+t+"\\d"+i+")))?$"))},i.prototype.mouseWheel=function(e){var t;e.preventDefault();var i=e;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this.dotNetRef.invokeMethodAsync("ServerAction","increment",e,this.element.value):t<0&&this.dotNetRef.invokeMethodAsync("ServerAction","decrement",e,this.element.value)},i.prototype.focusHandler=function(e){var t=this;this.isFocused=!0,this.dotNetRef.invokeMethodAsync("UpdateFocusInput").then((function(e){e&&e.isRendered&&t.selectRange(e.formatValue)})),this.options.enabled&&!this.options.readonly&&(sf.base.Browser.isDevice||sf.base.EventHandler.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this))},i.prototype.focusOutHandler=function(e){this.isFocused=!1,e.preventDefault(),sf.base.Browser.isDevice||sf.base.EventHandler.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)},i.prototype.mouseDownOnSpinner=function(e){var t=this;if(this.options.enabled&&!this.options.readonly){this.isFocused&&(this.isPrevFocused=!0,e.cancelable&&e.preventDefault());var i=e.currentTarget,n=i.classList.contains("e-spin-up")?"increment":"decrement";sf.base.EventHandler.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval((function(){t.isCalled=!0,t.dotNetRef.invokeMethodAsync("ServerAction",n,e,t.element.value)}),150),sf.base.EventHandler.add(document,"mouseup",this.mouseUpClick,this)}},i.prototype.mouseUpOnSpinner=function(e){if(this.options.enabled&&!this.options.readonly){if(this.isPrevFocused&&(this.element.focus(),!sf.base.Browser.isDevice&&e.cancelable&&(this.isPrevFocused=!1)),sf.base.Browser.isDevice||e.preventDefault(),!this.getElementData(e))return;var t=e.currentTarget,i=t.classList.contains("e-spin-up")?"increment":"decrement";sf.base.EventHandler.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.dotNetRef.invokeMethodAsync("ServerAction",i,e,this.element.value),this.isCalled=!1,sf.base.EventHandler.remove(document,"mouseup",this.mouseUpClick)}},i.prototype.touchMoveOnSpinner=function(e){!this.options.enabled||this.options.readonly?document.elementFromPoint(e.clientX,e.clientY).classList.contains("e-input-group-icon")||clearInterval(this.timeOut):clearInterval(this.timeOut)},i.prototype.scrollHandler=function(e){clearInterval(this.timeOut)},i.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.options.enabled||this.options.readonly)&&(clearInterval(this.timeOut),!0)},i.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,sf.base.EventHandler.remove(this.spinUp,"mouseleave",this.mouseUpClick),sf.base.EventHandler.remove(this.spinDown,"mouseleave",this.mouseUpClick)},i.prototype.selectRange=function(e){var i=this;if(clearTimeout(t),sf.base.Browser.isDevice||"11.0"!==sf.base.Browser.info.version){var n=sf.base.Browser.isDevice&&sf.base.Browser.isIos?600:30;t=setTimeout((function(){"number"!==i.element.type&&i.element.setSelectionRange(0,e.length)}),n)}else this.element.setSelectionRange(0,e.length)},i.prototype.isDevice=function(){return sf.base.Browser.isDevice},i.prototype.spinButtonEvents=function(){this.spinDown=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-down"):null,this.spinUp=this.wrapperElement?this.wrapperElement.querySelector(".e-spin-up"):null,this.spinDown&&this.spinUp&&(this.unBindSpinButton(),this.bindSpinButton())},i.prototype.bindSpinButton=function(){sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner,this),sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner,this),sf.base.EventHandler.add(this.spinUp,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner,this),sf.base.EventHandler.add(this.spinDown,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner,this)},i.prototype.unBindSpinButton=function(){sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchStartEvent,this.mouseDownOnSpinner),sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchEndEvent,this.mouseUpOnSpinner),sf.base.EventHandler.remove(this.spinUp,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner),sf.base.EventHandler.remove(this.spinDown,sf.base.Browser.touchMoveEvent,this.touchMoveOnSpinner)},i.prototype.destroy=function(){sf.base.EventHandler.remove(this.element,"focus",this.focusHandler),sf.base.EventHandler.remove(this.element,"blur",this.focusOutHandler),sf.base.EventHandler.remove(this.element,"keypress",this.keyPressHandler),sf.base.EventHandler.remove(this.element,"keydown",this.keyDownHandler),sf.base.EventHandler.remove(this.element,"drop",this.dropHandler),sf.base.EventHandler.remove(this.element,"paste",this.pasteHandler),sf.base.Browser.isDevice&&sf.base.EventHandler.remove(document,"scroll",this.scrollHandler),this.spinDown=null,this.spinUp=null,this.element=null,this.wrapperElement=null,window.sfBlazor.disposeWindowsInstance(this.dataId)},i.prototype.getTextWidth=function(e){var t=document.createElement("span");t.style.visibility="hidden",t.style.whiteSpace="nowrap",t.textContent=e,document.body.appendChild(t);var i=t.offsetWidth;return document.body.removeChild(t),i},i.prototype.updateFloatLabelSize=function(){if(this.wrapperElement){var e=this.wrapperElement.querySelector(".e-float-text");!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(this.element)&&this.element.clientWidth>0&&(this.element.clientWidth<this.getTextWidth(e.textContent)?e.style.width=this.element.clientWidth+"px":e.style.width="")}},i.prototype.removeFloatLabelSize=function(){if(this.wrapperElement){var e=this.wrapperElement.querySelector(".e-float-text");sf.base.isNullOrUndefined(e)||(e.style.width="")}},i}();return{initialize:function(e,t,n,o,s){n&&e&&new i(e,t,n,o,s).initialize()},propertyChanges:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||(i.options=t)},focusIn:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.focus()},focusOut:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.element.blur()},focusHandler:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.focusHandler()},spinButtonEvents:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.spinButtonEvents()},clearInvalid:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||"function"!=typeof i.clearInvalid||i.clearInvalid(t)},updateFloatLabelSize:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.updateFloatLabelSize()},removeFloatLabelSize:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.removeFloatLabelSize()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()}}}()},"./modules/sf-pdfviewer2.js":function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.SfPdfViewer=function(){"use strict";var e,t=(e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)},function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),i=function(e,t,i,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,i,r):s(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},o=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},s=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}},a=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(!0)],n.prototype,"showTooltip",void 0),i([sf.base.Property()],n.prototype,"toolbarItems",void 0),i([sf.base.Property()],n.prototype,"annotationToolbarItems",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property()],n.prototype,"ajaxHeaders",void 0),i([sf.base.Property(!1)],n.prototype,"withCredentials",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property("")],n.prototype,"customStampName",void 0),i([sf.base.Property("")],n.prototype,"customStampImageSource",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(!0)],n.prototype,"showTooltip",void 0),i([sf.base.Property()],n.prototype,"annotationToolbarItem",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0,width:0,height:0})],n.prototype,"bounds",void 0),i([sf.base.Property("")],n.prototype,"name",void 0),i([sf.base.Property(!1)],n.prototype,"isReadOnly",void 0),i([sf.base.Property("visible")],n.prototype,"visibility",void 0),i([sf.base.Property(!1)],n.prototype,"isRequired",void 0),i([sf.base.Property(!1)],n.prototype,"isPrint",void 0),i([sf.base.Property("")],n.prototype,"tooltip",void 0),i([sf.base.Property(0)],n.prototype,"pageNumber",void 0),i([sf.base.Property()],n.prototype,"signatureDialogSettings",void 0),i([sf.base.Property()],n.prototype,"signatureIndicatorSettings",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0,width:0,height:0})],n.prototype,"bounds",void 0),i([sf.base.Property("")],n.prototype,"name",void 0),i([sf.base.Property(!1)],n.prototype,"isReadOnly",void 0),i([sf.base.Property("visible")],n.prototype,"visibility",void 0),i([sf.base.Property(!1)],n.prototype,"isRequired",void 0),i([sf.base.Property(!1)],n.prototype,"isPrint",void 0),i([sf.base.Property("")],n.prototype,"tooltip",void 0),i([sf.base.Property(0)],n.prototype,"pageNumber",void 0),i([sf.base.Property(!1)],n.prototype,"isInitialField",void 0),i([sf.base.Property()],n.prototype,"initialDialogSettings",void 0),i([sf.base.Property()],n.prototype,"initialIndicatorSettings",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("orange")],n.prototype,"backgroundColor",void 0),i([sf.base.Property(19)],n.prototype,"width",void 0),i([sf.base.Property(10)],n.prototype,"height",void 0),i([sf.base.Property(10)],n.prototype,"fontSize",void 0),i([sf.base.Property(null)],n.prototype,"text",void 0),i([sf.base.Property("black")],n.prototype,"color",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property("Draw")],n.prototype,"displayMode",void 0),i([sf.base.Property(!1)],n.prototype,"hideSaveSignature",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property("Load")],n.prototype,"load",void 0),i([sf.base.Property("Unload")],n.prototype,"unload",void 0),i([sf.base.Property("RenderPdfPages")],n.prototype,"renderPages",void 0),i([sf.base.Property("RenderPdfPages")],n.prototype,"print",void 0),i([sf.base.Property("Download")],n.prototype,"download",void 0),i([sf.base.Property("RenderThumbnailImages")],n.prototype,"renderThumbnail",void 0),i([sf.base.Property("RenderAnnotationComments")],n.prototype,"renderComments",void 0),i([sf.base.Property("ImportAnnotations")],n.prototype,"importAnnotations",void 0),i([sf.base.Property("ExportAnnotations")],n.prototype,"exportAnnotations",void 0),i([sf.base.Property("ImportFormFields")],n.prototype,"importFormFields",void 0),i([sf.base.Property("ExportFormFields")],n.prototype,"exportFormFields",void 0),i([sf.base.Property("RenderPdfTexts")],n.prototype,"renderTexts",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ff0000")],n.prototype,"color",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(!1)],n.prototype,"enableMultiPageAnnotation",void 0),i([sf.base.Property(!1)],n.prototype,"enableTextMarkupResizer",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#00ff00")],n.prototype,"color",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(!1)],n.prototype,"enableMultiPageAnnotation",void 0),i([sf.base.Property(!1)],n.prototype,"enableTextMarkupResizer",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#00ff00")],n.prototype,"color",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(!1)],n.prototype,"enableMultiPageAnnotation",void 0),i([sf.base.Property(!1)],n.prototype,"enableTextMarkupResizer",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffff00")],n.prototype,"color",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(!1)],n.prototype,"enableMultiPageAnnotation",void 0),i([sf.base.Property(!1)],n.prototype,"enableTextMarkupResizer",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"fillColor",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("1")],n.prototype,"thickness",void 0),i([sf.base.Property("None")],n.prototype,"lineHeadStartStyle",void 0),i([sf.base.Property("None")],n.prototype,"lineHeadEndStyle",void 0),i([sf.base.Property(0)],n.prototype,"borderDashArray",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"fillColor",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("1")],n.prototype,"thickness",void 0),i([sf.base.Property("None")],n.prototype,"lineHeadStartStyle",void 0),i([sf.base.Property("None")],n.prototype,"lineHeadEndStyle",void 0),i([sf.base.Property(0)],n.prototype,"borderDashArray",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(100)],n.prototype,"width",void 0),i([sf.base.Property(50)],n.prototype,"height",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"fillColor",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("1")],n.prototype,"thickness",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property("#000000")],n.prototype,"fillColor",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property(1)],n.prototype,"thickness",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property()],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property("")],n.prototype,"overlayText",void 0),i([sf.base.Property("#ffffff")],n.prototype,"fontColor",void 0),i([sf.base.Property(10)],n.prototype,"fontSize",void 0),i([sf.base.Property("Helvetica")],n.prototype,"fontFamily",void 0),i([sf.base.Property("center")],n.prototype,"textAlign",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(100)],n.prototype,"width",void 0),i([sf.base.Property(100)],n.prototype,"height",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"fillColor",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("1")],n.prototype,"thickness",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"fillColor",void 0),i([sf.base.Property("#000")],n.prototype,"fontColor",void 0),i([sf.base.Property(16)],n.prototype,"fontSize",void 0),i([sf.base.Property("Helvetica")],n.prototype,"fontFamily",void 0),i([sf.base.Property("Label")],n.prototype,"labelContent",void 0),i([sf.base.Property("")],n.prototype,"notes",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"fillColor",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("1")],n.prototype,"thickness",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(150)],n.prototype,"width",void 0),i([sf.base.Property(50)],n.prototype,"height",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property([])],n.prototype,"dynamicStamps",void 0),i([sf.base.Property([])],n.prototype,"signStamps",void 0),i([sf.base.Property([])],n.prototype,"standardBusinessStamps",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property(0)],n.prototype,"width",void 0),i([sf.base.Property(0)],n.prototype,"height",void 0),i([sf.base.Property(0)],n.prototype,"left",void 0),i([sf.base.Property(0)],n.prototype,"top",void 0),i([sf.base.Property(!1)],n.prototype,"isAddToMenu",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property("")],n.prototype,"customStamps",void 0),i([sf.base.Property(!0)],n.prototype,"enableCustomStamp",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ff0000")],n.prototype,"fillColor",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("1")],n.prototype,"thickness",void 0),i([sf.base.Property("None")],n.prototype,"lineHeadStartStyle",void 0),i([sf.base.Property("None")],n.prototype,"lineHeadEndStyle",void 0),i([sf.base.Property(0)],n.prototype,"borderDashArray",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(40)],n.prototype,"leaderLength",void 0),i([sf.base.Property("move")],n.prototype,"resizeCursorType",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"fillColor",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("1")],n.prototype,"thickness",void 0),i([sf.base.Property("None")],n.prototype,"lineHeadStartStyle",void 0),i([sf.base.Property("None")],n.prototype,"lineHeadEndStyle",void 0),i([sf.base.Property(0)],n.prototype,"borderDashArray",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"fillColor",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("1")],n.prototype,"thickness",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(100)],n.prototype,"width",void 0),i([sf.base.Property(90)],n.prototype,"height",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"fillColor",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("1")],n.prototype,"thickness",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"fillColor",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("1")],n.prototype,"thickness",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(0)],n.prototype,"width",void 0),i([sf.base.Property(0)],n.prototype,"height",void 0),i([sf.base.Property(0)],n.prototype,"path",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ff0000")],n.prototype,"strokeColor",void 0),i([sf.base.Property(1)],n.prototype,"thickness",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(1)],n.prototype,"scaleRatio",void 0),i([sf.base.Property("in")],n.prototype,"conversionUnit",void 0),i([sf.base.Property("in")],n.prototype,"displayUnit",void 0),i([sf.base.Property(96)],n.prototype,"depth",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property({x:0,y:0})],n.prototype,"offset",void 0),i([sf.base.Property(1)],n.prototype,"pageNumber",void 0),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"borderColor",void 0),i([sf.base.Property(1)],n.prototype,"borderWidth",void 0),i([sf.base.Property("solid")],n.prototype,"borderStyle",void 0),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property("#ffffff00")],n.prototype,"fillColor",void 0),i([sf.base.Property(16)],n.prototype,"fontSize",void 0),i([sf.base.Property(151)],n.prototype,"width",void 0),i([sf.base.Property(24.6)],n.prototype,"height",void 0),i([sf.base.Property("#000")],n.prototype,"fontColor",void 0),i([sf.base.Property("Helvetica")],n.prototype,"fontFamily",void 0),i([sf.base.Property("TypeHere")],n.prototype,"defaultText",void 0),i([sf.base.Property("None")],n.prototype,"fontStyle",void 0),i([sf.base.Property("Left")],n.prototype,"textAlignment",void 0),i([sf.base.Property(!1)],n.prototype,"allowEditTextOnly",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0),i([sf.base.Property(!0)],n.prototype,"isPrint",void 0),i([sf.base.Property(!1)],n.prototype,"isReadonly",void 0),i([sf.base.Property(!1)],n.prototype,"enableAutoFit",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property("")],n.prototype,"selectionBorderColor",void 0),i([sf.base.Property("black")],n.prototype,"resizerBorderColor",void 0),i([sf.base.Property("#FF4081")],n.prototype,"resizerFillColor",void 0),i([sf.base.Property(8)],n.prototype,"resizerSize",void 0),i([sf.base.Property(1)],n.prototype,"selectionBorderThickness",void 0),i([sf.base.Property("Square")],n.prototype,"resizerShape",void 0),i([sf.base.Property("")],n.prototype,"selectorLineDashArray",void 0),i([sf.base.Property("Corners")],n.prototype,"resizerLocation",void 0),i([sf.base.Property(null)],n.prototype,"resizerCursorType",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property("#fdd835")],n.prototype,"searchHighlightColor",void 0),i([sf.base.Property("#8b4c12")],n.prototype,"searchColor",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(1)],n.prototype,"opacity",void 0),i([sf.base.Property("#000000")],n.prototype,"strokeColor",void 0),i([sf.base.Property(1)],n.prototype,"thickness",void 0),i([sf.base.Property(150)],n.prototype,"width",void 0),i([sf.base.Property(100)],n.prototype,"height",void 0),i([sf.base.Property(1)],n.prototype,"saveSignatureLimit",void 0),i([sf.base.Property(1)],n.prototype,"saveInitialLimit",void 0),i([sf.base.Property([])],n.prototype,"signatureItem",void 0),i([sf.base.Property()],n.prototype,"typeSignatureFonts",void 0),i([sf.base.Property("")],n.prototype,"annotationSelectorSettings",void 0),i([sf.base.Property()],n.prototype,"signatureDialogSettings",void 0),i([sf.base.Property()],n.prototype,"initialDialogSettings",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property("Guest")],n.prototype,"author",void 0),i([sf.base.Property(0)],n.prototype,"minHeight",void 0),i([sf.base.Property(0)],n.prototype,"minWidth",void 0),i([sf.base.Property(0)],n.prototype,"maxHeight",void 0),i([sf.base.Property(0)],n.prototype,"maxWidth",void 0),i([sf.base.Property(!1)],n.prototype,"isLock",void 0),i([sf.base.Property(!1)],n.prototype,"skipPrint",void 0),i([sf.base.Property(!1)],n.prototype,"skipDownload",void 0),i([sf.base.Property(null)],n.prototype,"customData",void 0),i([sf.base.Property(["None"])],n.prototype,"allowedInteractions",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property()],n.prototype,"textData",void 0),i([sf.base.Property()],n.prototype,"pageText",void 0),i([sf.base.Property()],n.prototype,"pageSize",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property()],n.prototype,"bounds",void 0),i([sf.base.Property()],n.prototype,"text",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property()],n.prototype,"size",void 0),i([sf.base.Property()],n.prototype,"x",void 0),i([sf.base.Property()],n.prototype,"y",void 0),i([sf.base.Property()],n.prototype,"width",void 0),i([sf.base.Property()],n.prototype,"height",void 0),i([sf.base.Property()],n.prototype,"left",void 0),i([sf.base.Property()],n.prototype,"top",void 0),i([sf.base.Property()],n.prototype,"right",void 0),i([sf.base.Property()],n.prototype,"bottom",void 0),i([sf.base.Property()],n.prototype,"isEmpty",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(!0)],n.prototype,"enableTileRendering",void 0),i([sf.base.Property(0)],n.prototype,"x",void 0),i([sf.base.Property(0)],n.prototype,"y",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property(100)],n.prototype,"delayPageRequestTimeOnScroll",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property("")],n.prototype,"name",void 0),i([sf.base.Property(!1)],n.prototype,"isChecked",void 0),i([sf.base.Property(!1)],n.prototype,"isSelected",void 0),i([sf.base.Property("")],n.prototype,"id",void 0),i([sf.base.Property("")],n.prototype,"value",void 0),i([sf.base.Property("")],n.prototype,"type",void 0),i([sf.base.Property(!1)],n.prototype,"isReadOnly",void 0),i([sf.base.Property([""])],n.prototype,"signatureType",void 0),i([sf.base.Property("")],n.prototype,"fontName",void 0),i([sf.base.Property({x:0,y:0,width:0,height:0})],n.prototype,"bounds",void 0),i([sf.base.Property("Helvetica")],n.prototype,"fontFamily",void 0),i([sf.base.Property(10)],n.prototype,"fontSize",void 0),i([sf.base.Property("None")],n.prototype,"fontStyle",void 0),i([sf.base.Property("black")],n.prototype,"color",void 0),i([sf.base.Property("white")],n.prototype,"backgroundColor",void 0),i([sf.base.Property("Left")],n.prototype,"alignment",void 0),i([sf.base.Property("visible")],n.prototype,"visibility",void 0),i([sf.base.Property(0)],n.prototype,"maxLength",void 0),i([sf.base.Property(!1)],n.prototype,"isRequired",void 0),i([sf.base.Property(!1)],n.prototype,"isPrint",void 0),i([sf.base.Property("")],n.prototype,"tooltip",void 0),i([sf.base.Property("")],n.prototype,"options",void 0),i([sf.base.Property(1)],n.prototype,"thickness",void 0),i([sf.base.Property("#303030")],n.prototype,"borderColor",void 0),i([sf.base.Property(!1)],n.prototype,"isMultiline",void 0)}(sf.base.ChildProperty),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),i([sf.base.Property("RightClick")],n.prototype,"contextMenuAction",void 0),i([sf.base.Property([])],n.prototype,"contextMenuItems",void 0)}(sf.base.ChildProperty),function(){function e(e,t,i,n,o){window.sfBlazor=window.sfBlazor,this.isCleared=!1,this.blazorAction=Wt.Default,this.lastAnnotation=null,this.cultureValue=null,this.isSmartComponent=!1,this.customZoomValues=[],this.historyManager={canRedo:!1,canUndo:!1,currentEntry:null},this.signatureCollection=[],this.fileName=null,this.blobInfo={},this.enableRtl=!1,this.enableChunkMessages=!1,this.isFormDesignerToolbarVisible=!1,this.allowServerDataBinding=!0,this.zIndex=-1,this.nameTable={},this.clipboardData={},this.zIndexTable=[],this.retrieveFormFieldsClientSide=!1,this.isTextSelectionStarted=!1,this.registeredEventCallbacks=[],this.touchPadding=10,this.drawingObject=new U,this.LoadedOnMessage=function(e){"loaded"===e.data.message&&(this.triggerEventData("Created",null),this.viewerBase.LoadDocumentFromServer(),this.enableTextSelection&&this.textSelectionModule?this.textSelectionModule.enableTextSelectionMode():this.viewerBase.disableTextSelectionMode(),this.drawing.renderLabels(this))},this.defaultLocale={PdfViewer:"PDF Viewer",Cancel:"Cancel","Download file":"Download file",Download:"Download","Enter Password":"This document is password protected. Please enter a password.","File Corrupted":"File Corrupted","File Corrupted Content":"The file is corrupted and cannot be opened.","Fit Page":"Fit Page","Fit Width":"Fit Width",Automatic:"Automatic","Go To First Page":"Show first page","Invalid Password":"Incorrect Password. Please try again.","Next Page":"Show next page",OK:"OK",Open:"Open file","Page Number":"Current page number","Previous Page":"Show previous page","Go To Last Page":"Show last page",Zoom:"Zoom","Zoom In":"Zoom in","Zoom Out":"Zoom out","Page Thumbnails":"Page thumbnails",Bookmarks:"Bookmarks",Print:"Print file","Password Protected":"Password Required",Copy:"Copy","Text Selection":"Text selection tool",Panning:"Pan mode","Text Search":"Find text","Find in document":"Find in document","Match case":"Match case",Apply:"Apply",GoToPage:"Go to Page","No matches":"Viewer has finished searching the document. No more matches were found","No Text Found":"No Text Found",Undo:"Undo",Redo:"Redo",Annotation:"Add or Edit annotations",Highlight:"Highlight Text",Underline:"Underline Text",Strikethrough:"Strikethrough Text",Squiggly:"Squiggly Text",Delete:"Delete annotation",Opacity:"Opacity","Color edit":"Change Color","Opacity edit":"Change Opacity","Highlight context":"Highlight","Underline context":"Underline","Strikethrough context":"Strikethrough","Squiggly context":"Squiggly","Server error":"Something went wrong. Please try again or refresh the page.","Client error":"Client-side error is found. Please check the custom headers provided in the AjaxRequestSettings property and web action methods in the ServerActionSettings property.","Open text":"Open","First text":"First Page","Previous text":"Previous Page","Next text":"Next Page","Last text":"Last Page","Zoom in text":"Zoom In","Zoom out text":"Zoom Out","Selection text":"Selection","Pan text":"Pan","Print text":"Print","Search text":"Search","Annotation Edit text":"Edit Annotation","Line Thickness":"Line Thickness","Line Properties":"Line Properties","Start Arrow":"Start Arrow","End Arrow":"End Arrow","Line Style":"Line Style","Fill Color":"Fill Color","Line Color":"Line Color",None:"None","Open Arrow":"Open","Closed Arrow":"Closed","Round Arrow":"Round","Square Arrow":"Square","Diamond Arrow":"Diamond",Butt:"Butt",Cut:"Cut",Paste:"Paste","Delete Context":"Delete",Properties:"Properties","Add Stamp":"Add Stamp","Add Shapes":"Add Shapes","Stroke edit":"Change Stroke Color","Change thickness":"Change Border Thickness","Add line":"Add Line","Add arrow":"Add Arrow","Add rectangle":"Add Rectangle","Add circle":"Add Circle","Add polygon":"Add Polygon","Add Comments":"Add Comments",Comments:"Comments",SubmitForm:"Submit Form","No Comments Yet":"No Comments Yet",Accepted:"Accepted",Completed:"Completed",Cancelled:"Cancelled",Rejected:"Rejected","Leader Length":"Leader Length","Scale Ratio":"Scale Ratio",Calibrate:"Calibrate","Calibrate Distance":"Calibrate Distance","Calibrate Perimeter":"Calibrate Perimeter","Calibrate Area":"Calibrate Area","Calibrate Radius":"Calibrate Radius","Calibrate Volume":"Calibrate Volume",Depth:"Depth",Closed:"Closed",Round:"Round",Square:"Square",Diamond:"Diamond",Edit:"Edit",Comment:"Comment","Comment Panel":"Comment Panel","Set Status":"Set Status",Post:"Post",Page:"Page","Add a comment":"Add a comment","Add a reply":"Add a reply","Import Annotations":"Import annotations from JSON file","Export Annotations":"Export annotation to JSON file","Export XFDF":"Export annotation to XFDF file","Import XFDF":"Import annotations from XFDF file",Add:"Add",Clear:"Clear",Bold:"Bold",Italic:"Italic",Strikethroughs:"Strikethrough",Underlines:"Underline",Superscript:"Superscript",Subscript:"Subscript","Align left":"Align Left","Align right":"Align Right",Center:"Center",Justify:"Justify","Font color":"Font Color","Text Align":"Text Align","Text Properties":"Font Style",SignatureFieldDialogHeaderText:"Add Signature",HandwrittenSignatureDialogHeaderText:"Add Signature",InitialFieldDialogHeaderText:"Add Initial",HandwrittenInitialDialogHeaderText:"Add Initial","Draw Ink":"Draw Ink",Create:"Create","Font family":"Font Family","Font size":"Font Size","Free Text":"Free Text","Import Failed":"Invalid JSON file type or file name; please select a valid JSON file","File not found":"Imported JSON file is not found in the desired location","Export Failed":"Export annotations action has failed; please ensure annotations are added properly",of:"of ",Dynamic:"Dynamic","Standard Business":"Standard Business","Sign Here":"Sign Here","Custom Stamp":"Custom Stamp","Enter Signature as Name":"Enter your name","Draw-hand Signature":"DRAW","Type Signature":"TYPE","Upload Signature":"UPLOAD","Browse Signature Image":"BROWSE","Save Signature":"Save Signature","Save Initial":"Save Initial",Textbox:"Textbox",Password:"Password","Check Box":"Checkbox","Radio Button":"Radio Button",Dropdown:"Drop Down","List Box":"List Box",Signature:"Signature","Delete FormField":"Delete Form Field","Textbox Properties":"Textbox Properties",Name:"Name",Tooltip:"Tooltip",Value:"Value","Form Field Visibility":"Form Field Visibility","Read Only":"Read Only",Required:"Required",Checked:"Checked","Show Printing":"Show Printing",Formatting:"Format",Fill:"Fill",Border:"Border","Border Color":"Border Color",Thickness:"Thickness","Max Length":"Max Length","List Item":"Item Name","Export Value":"Item Value","Dropdown Item List":"Dropdown Item List","List Box Item List":"List Box Item List",General:"GENERAL",Appearance:"APPEARANCE",Options:"OPTIONS","Delete Item":"Delete",Up:"Up",Down:"Down",Multiline:"Multiline",Revised:"Revised",Reviewed:"Reviewed",Received:"Received",Confidential:"Confidential",Approved:"Approved","Not Approved":"Not Approved",Witness:"Witness","Initial Here":"Initial Here",Draft:"Draft",Final:"Final","For Public Release":"For Public Release","Not For Public Release":"Not For Public Release","For Comment":"For Comment",Void:"Void","Preliminary Results":"Preliminary Results","Information Only":"Information Only",in:"in",m:"m",ft_in:"ft_in",ft:"ft",p:"p",cm:"cm",mm:"mm",pt:"pt",cu:"cu",sq:"sq",Initial:"Initial"},this._dotnetInstance=i,this.element=t,this.dataId=e,window.sfBlazor.setCompInstance(this),this.viewerBase=new wa(this),this.viewerBase.isWebAssembly=o,sf.base.isNullOrUndefined(n)||(this.viewerBase.isMAUI=n.isMAUI,this.registeredEventCallbacks=n.registeredEventCallbacks,this.options=n,this.updateOptions(n)),this.drawing=new tl(this)}return Object.defineProperty(e.prototype,"zoomPercentage",{get:function(){return 100*this.magnificationModule.zoomFactor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bookmark",{get:function(){return this.bookmarkViewModule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"print",{get:function(){return this.printModule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"magnification",{get:function(){return this.magnificationModule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"navigation",{get:function(){return this.navigationModule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textSearch",{get:function(){return this.textSearchModule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"toolbar",{get:function(){return this.toolbarModule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbnailView",{get:function(){return this.thumbnailViewModule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"annotation",{get:function(){return this.annotationModule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"formField",{get:function(){return this.formFieldsModule},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textSelection",{get:function(){return this.textSelectionModule},enumerable:!1,configurable:!0}),e.prototype.updateOptions=function(e){if(this.historyManager={canRedo:this.historyManager.canRedo,canUndo:this.historyManager.canUndo,currentEntry:this.historyManager.currentEntry},this.serviceUrl=e.serviceUrl,this.enableFormFieldsValidation=e.enableFormFieldsValidation,this.pageCount=e.pageCount,this.printScaleFactor=e.printScaleFactor,this.isDocumentEdited=e.isDocumentEdited,this.currentPageNumber=e.currentPageNumber,this.documentPath=e.documentPath,this.zoomValue=e.zoomValue,this.zoomMode=e.zoomMode,this.minZoomValue===e.minZoomValue&&this.maxZoomValue===e.maxZoomValue||sf.base.isNullOrUndefined(this.magnificationModule)||!1!==this.magnificationModule.isInitialCustomZoomValues)this.minZoomValue=e.minZoomValue,this.maxZoomValue=e.maxZoomValue;else{this.minZoomValue=e.minZoomValue,this.maxZoomValue=e.maxZoomValue,this.customZoomValues=[],this.getCustomZoomValues();var t=100*this.magnificationModule.zoomFactor;this.magnificationModule.zoomLevel=this.customZoomValues.indexOf(t)}this.downloadFileName=e.downloadFileName,this.exportAnnotationFileName=e.exportAnnotationFileName,this.height=e.height,this.width=e.width,this.enableToolbar=e.enableToolbar,this.enableRtl=e.enableRtl,this.enableChunkMessages=e.enableChunkMessages,this.enableAnnotationToolbar=e.enableAnnotationToolbar,this.enableNavigationToolbar=e.enableNavigationToolbar,this.retryCount=e.retryCount,this.showNotificationDialog=e.showNotificationDialog,this.enableCommentPanel=e.enableCommentPanel,this.isCommandPanelOpen=e.isCommandPanelOpen,this.commentPanelVisible=e.commentPanelVisible,this.showDigitalSignatureAppearance=e.showDigitalSignatureAppearance,this.enableThumbnail=e.enableThumbnail,this.isThumbnailViewOpen=e.isThumbnailViewOpen,this.enableDownload=e.enableDownload,this.enablePrint=e.enablePrint,this.printMode=e.printMode,this.isSignatureEditable=e.isSignatureEditable,this.enableBookmark=e.enableBookmark,this.enableHyperlink=e.enableHyperlink,this.enableHandwrittenSignature=e.enableHandwrittenSignature,this.enableInkAnnotation=e.enableInkAnnotation,this.restrictZoomRequest=e.restrictZoomRequest,this.hyperlinkOpenState=e.hyperlinkOpenState,this.enableNavigation=e.enableNavigation,this.enableAutoComplete=e.enableAutoComplete,this.enableMagnification=e.enableMagnification,this.enableShapeLabel=e.enableShapeLabel,this.enableImportAnnotationMeasurement=e.enableImportAnnotationMeasurement,this.enablePinchZoom=e.enablePinchZoom,this.overscanCount=e.overscanCount,this.enableZoomOptimization=e.enableZoomOptimization,this.enableTextSelection=e.enableTextSelection,this.enableTextSearch=e.enableTextSearch,this.enableAnnotation=e.enableAnnotation,this.enableFormFields=e.enableFormFields,this.enableFormDesigner=e.enableFormDesigner,this.isFormFieldDocument=e.isFormFieldDocument,this.enableFreeText=e.enableFreeText,this.enableTextMarkupAnnotation=e.enableTextMarkupAnnotation,this.enableShapeAnnotation=e.enableShapeAnnotation,this.enableMeasureAnnotation=e.enableMeasureAnnotation,this.enableStampAnnotations=e.enableStampAnnotations,this.enableStickyNotesAnnotation=e.enableStickyNotesAnnotation,this.interactionMode=e.interactionMode,this.isExtractText=e.isExtractText,this.dateTimeFormat=e.stampSettings.dateTimeFormat,this.toolbarSettings=e.toolbarSettings,this.ajaxRequestSettings=e.ajaxRequestSettings,this.serverActionSettings=e.serverActionSettings,this.textSearchColorSettings=e.textSearchColorSettings,this.contextMenuSettings=e.contextMenuSettings,this.tileRenderingSettings=e.tileRenderingSettings,this.scrollSettings=e.scrollSettings,this.annotationSettings=e.annotationSettings,this.highlightSettings=e.highlightSettings,this.strikethroughSettings=e.strikethroughSettings,this.squigglySettings=e.squigglySettings,this.underlineSettings=e.underlineSettings,this.shapeLabelSettings=e.shapeLabelSettings,this.lineSettings=e.lineSettings,this.arrowSettings=e.arrowSettings,this.rectangleSettings=e.rectangleSettings,this.redactionSettings=e.redactionSettings,this.circleSettings=e.circleSettings,this.polygonSettings=e.polygonSettings,this.measurementSettings=e.measurementSettings,this.distanceSettings=e.distanceSettings,this.perimeterSettings=e.perimeterSettings,this.areaSettings=e.areaSettings,this.radiusSettings=e.radiusSettings,this.volumeSettings=e.volumeSettings,this.stampSettings=e.stampSettings,this.customStampSettings=e.customStampSettings,this.freeTextSettings=e.freeTextSettings,this.handWrittenSignatureSettings=e.handWrittenSignatureSettings,this.signatureFieldSettings=e.signatureFieldSettings,this.signatureIndicatorSettings=e.signatureIndicatorSettings,this.initialIndicatorSettings=e.initialIndicatorSettings,this.inkAnnotationSettings=e.inkAnnotationSettings,this.stickyNotesSettings=e.stickyNotesSettings,this.annotationSelectorSettings=e.annotationSelectorSettings,this.enableDesktopMode=e.enableDesktopMode,this.enablePrintRotation=e.enablePrintRotation,this.customFonts=e.customFonts,this.rootUrl=e.rootUrl,this.annotations||(this.annotations=e.annotations),e.selectedItems&&void 0===this.selectedItems&&(this.selectedItems=e.selectedItems),this.formFields||(this.formFields=e.formFields),this.enableFormDesigner&&!sf.base.isNullOrUndefined(e.formDesignerSettings)&&(this.formDesignerSettings=e.formDesignerSettings),this.formDesignerInteraction!==e.formDesignerInteraction&&(this.formDesignerInteraction=e.formDesignerInteraction,this.formDesignerModule&&this.formDesignerModule.setInteractionMode(this.formDesignerInteraction,!0)),this.requiredModules()},e.prototype.updatePdfViewerOptions=function(e,t){this._dotnetInstance.invokeMethodAsync("UpdatePdfViewerOptions",e,t)},e.prototype.setOptions=function(e,t,i){for(var n=0,o=Object.keys(e);n<o.length;n++){var s=o[n];switch(s){case"locale":break;case"enableToolbar":this.toolbar&&this.enableToolbar!==e.enableToolbar&&this.toolbar.showToolbar(e.enableToolbar);break;case"enableCommentPanel":break;case"showDigitalSignatureAppearance":this.showDigitalSignatureAppearance=e.showDigitalSignatureAppearance;break;case"documentPath":i&&this.load(e.documentPath,null);break;case"interactionMode":this.interactionMode=e.interactionMode,"Pan"===e.interactionMode?(this.viewerBase.initiatePanning(),this.toolbar&&this.toolbar.updateInteractionTools(!1)):"TextSelection"===e.interactionMode&&(this.viewerBase.initiateTextSelectMode(),this.toolbar&&this.toolbar.updateInteractionTools(!0));break;case"height":this.height=e.height,this.viewerBase.updateHeight(),this.viewerBase.onWindowResize(),this.toolbar&&this.toolbar.annotationToolbarModule&&(!sf.base.Browser.isDevice||this.enableDesktopMode?this.toolbar.annotationToolbarModule.isToolbarHidden?this.toolbar.annotationToolbarModule.adjustViewer(!1):this.toolbar.annotationToolbarModule.adjustViewer(!0):this.toolbar.annotationToolbarModule.isToolbarHidden?this.toolbar.annotationToolbarModule.adjustMobileToolbar(!1):this.toolbar.annotationToolbarModule.adjustMobileToolbar(!0));break;case"width":this.width=e.width,this.viewerBase.updateWidth(),this.viewerBase.onWindowResize();break;case"customStamp":this.renderCustomerStamp(this.customStamp[0]);break;case"customStampSettings":this.customStampSettings=e.customStampSettings;break;case"enableFormFields":break;case"highlightSettings":case"underlineSettings":case"strikethroughSettings":case"squigglySettings":this.annotationModule&&this.annotationModule.textMarkupAnnotationModule&&this.annotationModule.textMarkupAnnotationModule.updateTextMarkupSettings(s);break;case"commentPanelVisible":e.commentPanelVisible?this.annotation.showCommentsPanelInBlazor():this.viewerBase.navigationPane.closeCommentPanelContainer();break;case"enableChunkMessages":this.enableChunkMessages=e.enableChunkMessages}}this.updateOptions(e)},e.prototype.preRender=function(){this.localeObj=new sf.base.L10n(this.getModuleName(),this.defaultLocale,"en-US"),sf.base.Browser.isDevice&&(this.touchPadding=16)},e.prototype.render=function(){var e,t=this;e=this;var i=null;this.viewerBase.initializeComponent();var n=new Blob([Nu.toString().replace(/^[^{]*{([\s\S]*)}$/m,"$1")],{type:"text/javascript"}),o=URL.createObjectURL(n);window["pdfViewerRunner_"+this.dataId]=this.viewerBase.pdfViewerRunner=new Worker(o),window.getRunningScript=function(){return function(){var e=(new Error).stack.match(/(?:http[s]?:\/\/(?:[^\/\s]+\/))(.*\.js)/);if(e&&e.length>0)return e[0];var t=(new Error).stack.match(/(?:app?:\/\/(?:[^\/\s]+\/))(.*\.js)/);return t&&t.length>0?t[0]:""}};var s=window.getRunningScript()(),a=s.split("/");if(this.viewerBase.pdfViewerRunner.postMessage({url:s.replace("/"+a[a.length-1],""),fonts:this.customFonts,rootPath:this.rootUrl,isDeviceMode:sf.base.Browser.isDevice,message:"initialLoading"}),this.viewerBase.pdfViewerRunner.onmessage=function(t){Promise.resolve().then((function(){e.viewerBase.CommonOnMessage(t)}))},(!sf.base.Browser.isDevice||this.enableDesktopMode)&&this.toolbarModule&&this.viewerBase.navigationPane&&this.enableNavigationToolbar){var r=0;i=setInterval((function(){var e=t.element.querySelector(".e-pv-toolbar");if(e){var n=e.getBoundingClientRect().height;r++,(n<=200||r>=5)&&(t.viewerBase.navigationPane.adjustPane(),i&&(clearInterval(i),i=null))}else++r>=5&&i&&(clearInterval(i),i=null)}),100)}},e.prototype.getCustomZoomValues=function(){if(this.magnificationModule&&(this.magnificationModule.isInitialCustomZoomValues=!1),sf.base.isNullOrUndefined(this.customZoomValues)||0===this.customZoomValues.length){var e=this.minZoomValue,t=this.maxZoomValue,i=[10,25,50,75,100,125,150,200,400];if(null!=e&&null!=t&&e>t){var n=t;t=e,e=n}if(null!=e||null!=t){var o=function(i){return i>=e&&i<=t&&i!==e&&i!==t};this.customZoomValues.push(e);for(var s=0;s<i.length;s++){var a=i[s];o(a)&&this.customZoomValues.push(a)}null==t||this.customZoomValues.some((function(t){return parseInt(t.id,10)===e}))||t===e||this.customZoomValues.push(t)}}},e.prototype.getModuleName=function(){return"PdfViewer"},e.prototype.getLocaleConstants=function(){return this.defaultLocale},e.prototype.setJsonData=function(e){this.viewerBase.ajaxData=e},e.prototype.onPropertyChanged=function(e,t){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];switch(o){case"locale":case"enableToolbar":break;case"enableCommentPanel":this.toolbarModule&&this.toolbarModule.annotationToolbarModule&&this.toolbarModule.annotationToolbarModule.enableCommentPanelTool(this.enableCommentPanel),this.enableCommentPanel||this.viewerBase.navigationPane&&this.viewerBase.navigationPane.closeCommentPanelContainer();break;case"documentPath":this._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",e.documentPath,!1);break;case"interactionMode":this.interactionMode=e.interactionMode,"Pan"===e.interactionMode?(this.viewerBase.initiatePanning(),this.toolbar&&this.toolbar.updateInteractionTools(!1)):"TextSelection"===e.interactionMode&&(this.viewerBase.initiateTextSelectMode(),this.toolbar&&this.toolbar.updateInteractionTools(!0));break;case"height":this.height=e.height,this.viewerBase.updateHeight(),this.viewerBase.onWindowResize(),this.toolbar&&this.toolbar.annotationToolbarModule&&(this.toolbar.annotationToolbarModule.isToolbarHidden?this.toolbar.annotationToolbarModule.adjustViewer(!1):this.toolbar.annotationToolbarModule.adjustViewer(!0));break;case"width":this.width=e.width,this.viewerBase.updateWidth(),this.viewerBase.onWindowResize();break;case"customStamp":this.renderCustomerStamp(this.customStamp[0]);break;case"customStampSettings":e.customStampSettings.customStamps&&this.renderCustomerStamp(this.customStampSettings.customStamps[0]);break;case"enableFormFields":if(this.enableFormFields&&this.formFieldsModule)for(var s=0;s<this.pageCount;s++)this.formFieldsModule.renderFormFields(s);else this.formFieldsModule=new Bu(this,this.viewerBase),this.formFieldsModule.formFieldsReadOnly(this.enableFormFields);break;case"enableFormDesigner":this.enableFormDesigner&&this.formDesignerModule||(this.formDesignerModule=new Du(this,this.viewerBase));break;case"highlightSettings":case"underlineSettings":case"strikethroughSettings":case"squigglySettings":this.annotationModule&&this.annotationModule.textMarkupAnnotationModule&&this.annotationModule.textMarkupAnnotationModule.updateTextMarkupSettings(o)}}},e.prototype.renderCustomerStamp=function(e){this.annotation.stampAnnotationModule.isStampAddMode=!0,this.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.viewerBase.stampAdded=!0,this.viewerBase.isAlreadyAdded=!1,this.annotation.stampAnnotationModule.createCustomStampAnnotation(e.customStampImageSource,e.customStampName)},e.prototype.getPersistData=function(){return"PdfViewer"},e.prototype.requiredModules=function(){this.enableMagnification?sf.base.isNullOrUndefined(this.magnificationModule)&&(this.magnificationModule=new yu(this,this.viewerBase)):this.magnificationModule=null,this.enableNavigation&&sf.base.isNullOrUndefined(this.navigationModule)&&(this.navigationModule=new vu(this,this.viewerBase)),(this.enableToolbar||this.enableNavigationToolbar||this.enableAnnotationToolbar)&&sf.base.isNullOrUndefined(this.toolbarModule)&&(this.toolbarModule=new xu(this,this.viewerBase)),this.enableHyperlink&&sf.base.isNullOrUndefined(this.linkAnnotationModule)&&(this.linkAnnotationModule=new Gh(this,this.viewerBase)),this.enableThumbnail&&sf.base.isNullOrUndefined(this.thumbnailViewModule)&&(this.thumbnailViewModule=new bu(this,this.viewerBase)),this.enableBookmark&&sf.base.isNullOrUndefined(this.bookmarkViewModule)&&(this.bookmarkViewModule=new ku(this,this.viewerBase)),this.enableTextSelection&&sf.base.isNullOrUndefined(this.textSelectionModule)&&(this.textSelectionModule=new Mu(this,this.viewerBase)),this.enableTextSearch&&sf.base.isNullOrUndefined(this.textSearchModule)&&(this.textSearchModule=new Tu(this,this.viewerBase),sf.base.isNullOrUndefined(this.viewerBase.mainContainer)||this.textSearchModule.createTextSearchBox()),this.enablePrint&&sf.base.isNullOrUndefined(this.printModule)&&(this.printModule=new Eu(this,this.viewerBase)),this.enableAnnotation&&sf.base.isNullOrUndefined(this.annotationModule)&&(this.annotationModule=new Zh(this,this.viewerBase)),this.enableFormFields&&sf.base.isNullOrUndefined(this.formFieldsModule)&&(this.formFieldsModule=new Bu(this,this.viewerBase)),this.enableFormDesigner&&sf.base.isNullOrUndefined(this.formDesignerModule)&&(this.formDesignerModule=new Du(this,this.viewerBase))},e.prototype.load=function(e,t){0!==this.pageCount?this.viewerBase.clear(!0):this.viewerBase.clear(!1),this.pageCount=0,this.currentPageNumber=0,this.viewerBase.blazorUIAdaptor.resetToolbar(),this.viewerBase.initiatePageRender(e,t)},e.prototype.loadDocument=function(e,t,i){0!==this.pageCount?this.viewerBase.clear(!0):this.viewerBase.clear(!1),this.pageCount=0,this.currentPageNumber=0,this.viewerBase.blazorUIAdaptor.resetToolbar(),this.viewerBase.pdfViewer.toolbar&&this.viewerBase.pdfViewer.toolbar.annotationToolbarModule&&this.viewerBase.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor(),this.fileName=i,this.viewerBase.initiateLoadDocument(e,t,i)},e.prototype.getBlobInfo=function(e){var t="blob"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),i=e.byteLength,n=this.splitToChunk(new Uint8Array(e));return i>0&&(this.blobInfo[""+t]={data:n,byteSize:i}),{id:t,byteSize:i,length:n.length}},e.prototype.splitToChunk=function(e){for(var t=[],i=0;i<e.length;i+=3e4)t.push(e.slice(i,i+3e4));return t},e.prototype.jsonObjectToGetBlobInfo=function(e,t){var i=new TextEncoder,n=JSON.stringify(e),o=i.encode(n);return o.length>=3e4||t?this.getBlobInfo(o):null},e.prototype.chunkJsonObject=function(e,t){if(this.enableChunkMessages){var i=this.jsonObjectToGetBlobInfo(e);return null!=i?(i.action=t,i.elementId=this.dataId,i):e}return e},e.prototype.tryGetBytes=function(e,t){if(this.blobInfo[""+e])return this.blobInfo[""+e].data[t]},e.prototype.tryGetBytesClear=function(e,t){this.blobInfo[""+e]&&delete this.blobInfo[""+e]},e.prototype.getBytes=function(e,t){if(this.blobInfo[""+e]){var i=this.blobInfo[""+e].data[t];return t===this.blobInfo[""+e].data.length-1&&delete this.blobInfo[""+e],i}},e.prototype.loadByteArray=function(e){null!=e&&(this.fileByteArray=e)},e.prototype.loadSuccess=function(e,t){this.viewerBase.loadSuccess(e,t)},e.prototype.focusElement=function(e){var t=document.getElementById(e);null!=t&&t.focus()},e.prototype.download=function(){return this.enableDownload?Promise.resolve(this.viewerBase.download()):Promise.resolve()},e.prototype.redactPages=function(e){this.viewerBase.redactPages(e)},e.prototype.redact=function(){},e.prototype.getDocumentAsByteArray=function(){var e=this;return this.enableDownload?new Promise((function(t,i){t(e.viewerBase.getDocumentAsByteArray())})):null},e.prototype.getDocumentHashId=function(){return this.viewerBase.hashId},e.prototype.updateViewerContainer=function(){this.viewerBase.isSidebarResized&&(this.viewerBase.isSidebarResized=!1),this.viewerBase.updateViewerContainer()},e.prototype.updateAIAssistViewContainer=function(e){this.updateViewerContainer();var t=document.getElementById(e);t&&t.parentElement&&(t.parentElement.style.height=this.element.getBoundingClientRect().height+"px",t.parentElement.classList.remove("e-pv-none"))},e.prototype.showNotificationPopup=function(e){this.viewerBase.showNotificationPopup(e)},e.prototype.focusFormField=function(e){var t=this;if("string"==typeof e){this.retrieveFormFieldsClientSide=!0;var i=this.retrieveFormFields();this.retrieveFormFieldsClientSide=!1;for(var n=0;n<i.length;n++)i[n].name===e&&(e=i[n])}if(e){this.viewerBase.isFocusField=!0,this.viewerBase.focusField=e;var o=parseFloat(e.id.split("_")[1]);this.navigationModule.goToPage(o+1),setTimeout((function(){var i=document.getElementById(e.id);i&&(i.focus(),t.viewerBase.isFocusField=!1,t.viewerBase.focusField=[])}),100)}},e.prototype.updateFormFieldsValue=function(e){var t=document.getElementById(e.id);if((t=t||document.getElementById(e.id+"_content_html_element").children[0].children[0])&&"Textbox"===e.type||"Password"===e.type?t.value=e.value:"RadioButton"===e.type||"CheckBox"===e.type?("CheckBox"===e.type&&(t.style.appearance="auto",!0===e.isChecked?t.checked=!0:t.checked=!1),"RadioButton"===e.type&&(!0===e.isSelected?t.checked=!0:t.checked=!1)):"DropDown"!==e.type&&"ListBox"!==e.type||("SELECT"===t.nodeName&&(t.options[t.selectedIndex].text=e.value),"DATALIST"===t.nodeName&&((t=document.getElementById(t.id.replace(this.element.id+"input_","editableDropdown"))).value=e.value)),"SignatureField"===e.type||"InitialField"===e.type){e.signatureType&&(e.signatureType=e.signatureType[0]),e.fontName=e.fontName?e.fontName:e.fontFamily;var i=this.getFormFieldByID(e.id).Value===e.value;t.classList.contains("e-pdfviewer-signatureformfields-signature")&&!i&&this.annotation.deleteAnnotationById(e.id),e.signatureType&&e.value||(e.signatureType=(e.value&&e.value.indexOf("base64"))>-1?"Image":e.value&&e.value.startsWith("M")&&e.value.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Type"),i||this.formFieldsModule.drawSignature(e.signatureType,e.value,t,e.fontName)}else this.formFieldsModule.updateDataInSession(t)},e.prototype.getFormFieldByID=function(e){var t=window.sessionStorage.getItem(this.viewerBase.documentId+"_formfields"),i=JSON.parse(t);return i[i.findIndex((function(t){return t.uniqueID===e}))]},e.prototype.undo=function(){this.annotationModule&&this.annotationModule.undo()},e.prototype.redo=function(){this.annotationModule&&this.annotationModule.redo()},e.prototype.unload=function(){var e=document.getElementById(this.dataId+"_search_box");e&&(e.style.display="none"),this.viewerBase.clear(!0),this.viewerBase.pdfViewerRunner.postMessage({message:"unloadFPDF"}),this.updatePdfViewerOptions("PageCount",0),this.pageCount=0,this.viewerBase.blazorUIAdaptor.resetToolbar(),this.fileByteArray&&(this.fileByteArray=null),this.viewerBase.hyperlinkAndLinkAnnotation&&(this.viewerBase.hyperlinkAndLinkAnnotation={}),this.viewerBase.pageTextDetails&&(this.viewerBase.pageTextDetails={}),this.magnificationModule.zoomTo(100),sf.base.Browser.isDevice&&!this.enableDesktopMode&&this._dotnetInstance.invokeMethodAsync("AdjustMobileToolbar")},e.prototype.destroy=function(e,t){window["pdfViewerRunner_"+t]&&(window["pdfViewerRunner_"+t].terminate(),delete window["pdfViewerRunner_"+t]),sf.base.isNullOrUndefined(this.element)||e||null!==this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.viewerBase.navigationPane&&(this.viewerBase.navigationPane.restrictUpdateZoomValue=!1),this.viewerBase.destroy(),this.viewerBase.navigationPane&&(this.viewerBase.navigationPane.restrictUpdateZoomValue=!0),window.getRunningScript&&delete window.getRunningScript},e.prototype.importAnnotation=function(e,t){if(this.annotationModule){var i=this;return new Promise((function(n,o){if("string"==typeof e){var s=e.indexOf(".xfdf")>-1||t.indexOf("Xfdf")>-1;if(t)e.indexOf("</xfdf>")>-1?n(i.viewerBase.importAnnotations(e,t,!1)):"Json"===t?e.includes("pdfAnnotation")?n(i.importAnnotationsAsJson(e)):e.includes("Import annotation as stream")||e.includes("Import annotation as byte array")?(i.viewerBase.isPDFViewerJson=!1,n(i.viewerBase.importAnnotations(e,t))):e.toLowerCase().endsWith(".json")?(i.viewerBase.isPDFViewerJson=!0,n(i.viewerBase.importAnnotations(e,t,s))):n(i.importAnnotationsAsJson(e)):n(i.viewerBase.importAnnotations(e,t,s));else if("json"===e.split(".")[1])if(e.includes("pdfAnnotation"))n(i.importAnnotationsAsJson(e));else{var a=e.split(",")[1]?e.split(",")[1]:e.split(",")[0];e=decodeURIComponent(escape(atob(a))),n(i.importAnnotationsAsJson(e))}else n(i.viewerBase.importAnnotations(e,_t.Xfdf,s))}else n(i.viewerBase.importAnnotations(e))}))}return Promise.resolve(!1)},e.prototype.importAnnotationsAsJson=function(e){var t=JSON.parse(e),i=t.pdfAnnotation[Object.keys(t.pdfAnnotation)[0]];if(Object.keys(t.pdfAnnotation).length>=1&&(i.textMarkupAnnotation||i.measureShapeAnnotation||i.freeTextAnnotation||i.stampAnnotations||i.signatureInkAnnotation||i.shapeAnnotation&&i.shapeAnnotation[0].Bounds))this.viewerBase.isPDFViewerJson=!0,this.viewerBase.importAnnotations(t,_t.Json);else{this.viewerBase.isPDFViewerJson=!1;var n=(new TextEncoder).encode(e),o=this;this._dotnetInstance.invokeMethodAsync("ImportAnnotationByteArray",n).then((function(){o.viewerBase.importAnnotations("Import annotation as byte array",_t.Json)}))}},e.prototype.exportAnnotation=function(e){return this.annotationModule?e&&"Xfdf"===e?Promise.resolve(this.viewerBase.exportAnnotations(_t.Xfdf)):Promise.resolve(this.viewerBase.exportAnnotations(_t.Json)):Promise.resolve()},e.prototype.exportAnnotationsAsObject=function(){var e=this;return this.annotationModule?new Promise((function(t,i){e.viewerBase.exportAnnotationsAsObject().then((function(e){t(e)}))})):null},e.prototype.exportAnnotationsAsBase64String=function(e){var t=this;return this.annotationModule?new Promise((function(i,n){t.viewerBase.createRequestForExportAnnotations(!1,e,!0).then((function(e){i(e)}))})):null},e.prototype.addAnnotation=function(e){this.viewerBase&&this.viewerBase.addAnnotation(e)},e.prototype.importFormFields=function(e){this.formFieldsModule&&this.viewerBase.importFormFields(e)},e.prototype.importFormFieldsAsStream=function(e,t){var i=this;return this.formFieldsModule?new Promise((function(n,o){n(i.viewerBase.createRequestForImportingFormfields(e,t))})):Promise.resolve(!1)},e.prototype.exportFormFields=function(e){return this.formFieldsModule?Promise.resolve(this.viewerBase.exportFormFields(e)):Promise.resolve()},e.prototype.exportFormFieldsAsObject=function(){var e=this;return this.formFieldsModule?new Promise((function(t,i){e.viewerBase.exportFormFieldsAsObject().then((function(e){t(e)}))})):null},e.prototype.exportFormFieldsAsStream=function(e){var t=this;return this.formFieldsModule?new Promise((function(i,n){t.viewerBase.createRequestForExportFormfields(!1,null,e).then((function(e){i(e)}))})):null},e.prototype.resetFormFields=function(){this.formFieldsModule.resetFormFields()},e.prototype.clearFormFields=function(e){this.formFieldsModule.clearFormFields(e)},e.prototype.deleteAnnotations=function(){this.annotationModule&&this.viewerBase.deleteAnnotations()},e.prototype.retrieveFormFields=function(){return this.enableChunkMessages&&!this.retrieveFormFieldsClientSide?this.jsonObjectToGetBlobInfo(this.formFieldCollections,!0):this.formFieldCollections},e.prototype.getFormFields=function(){return this.enableChunkMessages&&!this.retrieveFormFieldsClientSide?this.jsonObjectToGetBlobInfo(this.formDesignerCollections,!0):this.formDesignerCollections},e.prototype.updateFormFields=function(e){this.updateFormFieldsValue(e),this.formFieldsModule.updateFormFieldValues(e)},e.prototype.updateFormField=function(e){sf.base.isNullOrUndefined(this.formDesignerModule)||this.formDesignerModule.updateFormField(e)},e.prototype.updateFormFieldAsCollection=function(e){var t;if(sf.base.isNullOrUndefined(e)||(t=JSON.parse(e)),!sf.base.isNullOrUndefined(this.formDesignerModule)&&!sf.base.isNullOrUndefined(t))for(var i=0,n=t;i<n.length;i++){var o=n[i];this.formDesignerModule.updateFormField(o)}},e.prototype.fireAjaxRequestInitiate=function(e){},e.prototype.fireButtonFieldClickEvent=function(e,t,i){},e.prototype.fireFormFieldClickEvent=function(e,t,i,n){return o(this,void 0,void 0,(function(){var o,a=this;return s(this,(function(s){return(o=this.formDesignerModule?{name:e,formField:t,cancel:i}:{name:e,field:t,cancel:i}).field&&"signature"===o.field.name&&(o.field.signatureType=[Nt.Draw]),-1!==this.registeredEventCallbacks.indexOf("FormFieldClick")?this.triggerEventPromise("FormFieldClick",o).then((function(e){a.handleSignatureFieldClick(e,t,n)})):this.handleSignatureFieldClick(null,t,n),[2]}))}))},e.prototype.handleSignatureFieldClick=function(e,t,i){if("SignatureField"===t.type||"InitialField"===t.type){this.viewerBase.isInitialField="InitialField"===t.type;var n=document.getElementById(t.id);n=n||(document.getElementById(t.id+"_content_html_element")?document.getElementById(t.id+"_content_html_element").children[0].children[0]:null);var o=!1,s=!1;if(this.formDesignerModule)o=t.isReadOnly,s="Hidden"===t.visibility||"HiddenPrintable"===t.visibility;else{var a=this.formFields.find((function(e){return e.id===t.id}));a&&(o=a.isReadOnly)}o||s||null!==e&&e.cancel||!n||n.disabled||!n.classList.contains("e-pdfviewer-signatureformfields")||!i&&!sf.base.isNullOrUndefined(i)||this.viewerBase.signatureModule.showSignatureDialog(!0)}},e.prototype.fireFormFieldAddStart=function(e){return o(this,void 0,void 0,(function(){var t;return s(this,(function(i){switch(i.label){case 0:return t={name:"FormFieldAdding",field:e,pageNumber:e.pageNumber,cancel:!1},[4,this.triggerEventPromise("FormFieldAdding",t)];case 1:return[2,!(t=i.sent()).cancel]}}))}))},e.prototype.fireFormFieldEvent=function(e,t,i){var n={name:e,field:t,pageNumber:i};this.triggerEventData(e,n)},e.prototype.fireFormFieldDoubleClickEvent=function(e,t,i){return o(this,void 0,void 0,(function(){var n,o=this;return s(this,(function(s){return-1!==this.registeredEventCallbacks.indexOf("FormFieldDoubleClick")?(n={name:e,field:t,cancel:i},this.triggerEventPromise("FormFieldDoubleClick",n).then((function(e){o.handleFormDesignerPropertiesWindow(e)}))):this.handleFormDesignerPropertiesWindow(null),[2]}))}))},e.prototype.handleFormDesignerPropertiesWindow=function(e){null!==e&&e.cancel||this.viewerBase.openPropertyPanel(this.selectedItems.formFields[0].id)},e.prototype.fireFormFieldPropertyChanged=function(e,t,i,n){var o={name:e,oldValue:t,newValue:i,changedProperties:n};this.triggerEventData("FormFieldPropertyChanged",o)},e.prototype.fireFormFieldMouseOverEvent=function(e,t,i,n,o,s,a){var r={name:e,field:t,pageNumber:i,pageX:n,pageY:o,X:s,Y:a};this.triggerEventData("FormFieldMouseEnter",r)},e.prototype.fireFormFieldMoveEvent=function(e,t,i,n,o){},e.prototype.fireFormFieldResizeEvent=function(e,t,i,n,o){var s={name:e,field:t,pageNumber:i,oldBounds:n,newBounds:o};this.triggerEventData("FormFieldResized",s)},e.prototype.fireFormFieldSelectEvent=function(e,t,i,n){var o={name:e,field:t,pageNumber:i,isProgrammaticSelection:n};this.triggerEventData("FormFieldSelected",o)},e.prototype.fireDocumentLoad=function(e){var t={name:"documentLoad",documentName:this.fileName,pageData:e};this._dotnetInstance.invokeMethodAsync("LoadDocument",null),this.viewerBase.blazorUIAdaptor.loadDocument(),this.triggerEventData("DocumentLoaded",t)},e.prototype.fireDocumentUnload=function(e){var t={name:"documentUnload",documentName:e};this.triggerEventData("DocumentUnloaded",t)},e.prototype.fireDocumentLoadFailed=function(e,t){var i={name:"documentLoadFailed",documentName:this.fileName,isPasswordRequired:e,password:t};this.triggerEventData("DocumentLoadFailed",i)},e.prototype.fireAjaxRequestFailed=function(e,t,i,n){var o={name:"ajaxRequestFailed",documentName:this.fileName,errorStatusCode:e,errorMessage:t,action:i};n&&(o.retryCount=!0),this.triggerEventData("AjaxRequestFailed",o)},e.prototype.fireAjaxRequestSuccess=function(e,t){this.fileName;return!1},e.prototype.fireValidatedFailed=function(e){var t;t=this.formDesignerModule?{documentName:this.fileName,fields:this.formDesignerCollections,unfilledFields:this.viewerBase.nonFillableFields}:{documentName:this.fileName,formFields:this.formFieldCollections,unfilledFields:this.viewerBase.nonFillableFields},this.triggerEventData("ValidateFormFields",t)},e.prototype.firePageClick=function(e,t,i){if(!Number.isNaN(i)){var n={name:"pageClick",documentName:this.fileName,x:e,y:t,pageNumber:i};this.triggerEventData("OnPageClick",n)}},e.prototype.firePageChange=function(e){var t={name:"pageChange",documentName:this.fileName,currentPageNumber:this.currentPageNumber,previousPageNumber:e};this.triggerEventData("PageChanged",t)},e.prototype.fireZoomChange=function(){var e={name:"zoomChange",zoomValue:Math.round(100*this.magnificationModule.zoomFactor),previousZoomValue:Math.round(100*this.magnificationModule.previousZoomFactor)};this.triggerEventData("ZoomChanged",e)},e.prototype.fireHyperlinkClick=function(e,t){return o(this,void 0,void 0,(function(){var i;return s(this,(function(n){switch(n.label){case 0:return i={name:"hyperlinkClick",hyperlink:e,hyperlinkElement:t,cancel:!1},-1===this.registeredEventCallbacks.indexOf("OnHyperlinkClick")?[3,2]:[4,this.triggerEventPromise("OnHyperlinkClick",i)];case 1:return(i=n.sent()).hyperlinkElement.href!==i.hyperlink&&(t.href=i.hyperlink),i.cancel?[2,!1]:[2,!0];case 2:return i.hyperlinkElement.href!==i.hyperlink&&(t.href=i.hyperlink),[2,!0];case 3:return[2]}}))}))},e.prototype.fireHyperlinkHover=function(e){var t={name:"hyperlinkMouseOver",hyperlinkElement:e};this.triggerEventData("OnHyperlinkMouseOver",t)},e.prototype.fireAnnotationAdd=function(e,t,i,n,o,s,a,r,l,d,h){n.x=n.left,n.y=n.top;var p={name:"annotationAdd",pageIndex:e,annotationId:t,annotationType:i,annotationBound:n,annotationSettings:o};s&&(p.annotationSettings.textMarkupContent=s,p.annotationSettings.textMarkupStartIndex=a,p.annotationSettings.textMarkupEndIndex=r),l&&(p.labelSettings=l),d&&(p.multiplePageCollection=d),"Image"===i&&(p.customStampName=h),this.viewerBase.isAnnotationSelect=!1,!sf.base.Browser.isDevice&&this.enableDesktopMode&&this.viewerBase.blazorUIAdaptor.annotationAdd(),this.triggerEventData("AnnotationAdded",p),this.viewerBase.fireDocumentEditedEvent("AnnotationAdded")},e.prototype.fireAnnotationRemove=function(e,t,i,n,o,s,a,r){var l={name:"annotationRemove",pageIndex:e,annotationId:t,annotationType:i,annotationBounds:n};o&&(l.textMarkupContent=o,l.textMarkupStartIndex=s,l.textMarkupEndIndex=a),r&&(l.multiplePageCollection=r),this.triggerEventData("AnnotationRemoved",l)},e.prototype.fireBeforeAddFreeTextAnnotation=function(e){},e.prototype.fireCommentAdd=function(e,t,i){},e.prototype.fireCommentEdit=function(e,t,i){},e.prototype.fireCommentDelete=function(e,t,i){},e.prototype.fireCommentSelect=function(e,t,i){},e.prototype.fireCommentStatusChanged=function(e,t,i,n){},e.prototype.fireAnnotationPropertiesChange=function(e,t,i,n,o,s,a,r,l,d,h){var p={name:"annotationPropertiesChange",pageIndex:e,annotationId:t,annotationType:i,isColorChanged:n,isOpacityChanged:o,isTextChanged:s,isCommentsChanged:a};r&&(p.textMarkupContent=r,p.textMarkupStartIndex=l,p.textMarkupEndIndex=d),h&&(p.multiplePageCollection=h),this.triggerEventData("AnnotationPropertiesChanged",p)},e.prototype.fireSignatureAdd=function(e,t,i,n,o,s,a,r){var l={pageIndex:e,id:t,type:i,bounds:n,opacity:o};a&&(l.thickness=a),s&&(l.strokeColor=s),r&&(l.data=r),this.triggerEventData("AddSignature",l)},e.prototype.fireSignatureRemove=function(e,t,i,n){var o={pageIndex:e,id:t,type:i,bounds:n};this.triggerEventData("RemoveSignature",o)},e.prototype.fireSignatureMove=function(e,t,i,n,o,s,a,r){var l={pageIndex:e,id:t,type:i,opacity:n,strokeColor:o,thickness:s,previousPosition:a,currentPosition:r};this.triggerEventData("MoveSignature",l)},e.prototype.fireSignaturePropertiesChange=function(e,t,i,n,o,s,a,r){var l={pageIndex:e,id:t,type:i,isStrokeColorChanged:n,isOpacityChanged:o,isThicknessChanged:s,oldValue:a.toString(),newValue:r.toString()};this.triggerEventData("SignaturePropertiesChange",l),this.viewerBase.fireDocumentEditedEvent("AnnotationUpdated")},e.prototype.fireSignatureResize=function(e,t,i,n,o,s,a,r){var l={pageIndex:e,id:t,type:i,opacity:n,strokeColor:o,thickness:s,currentPosition:a,previousPosition:r};this.triggerEventData("ResizeSignature",l)},e.prototype.fireSignatureSelect=function(e,t,i){var n={id:e,pageIndex:t,signature:i};this.triggerEventData("SignatureSelected",n)},e.prototype.fireSignatureUnselect=function(e,t,i){var n={id:e,pageIndex:t,signature:i};this.triggerEventData("SignatureUnselected",n)},e.prototype.fireAnnotationSelect=function(e,t,i,n,o,s,a){var r={name:"annotationSelect",annotationId:e,pageIndex:t,annotation:i};if(n&&(r={name:"annotationSelect",annotationId:e,pageIndex:t,annotation:i,annotationCollection:n}),o&&(r.multiplePageCollection=o),s&&(r.isProgrammaticSelection=s),a&&(r.annotationAddMode=a),i){if("FreeText"===i.type){var l={isBold:!1,isItalic:!1,isStrikeout:!1,isUnderline:!1};1===i.fontStyle?l.isBold=!0:2===i.fontStyle?l.isItalic=!0:3===i.fontStyle?l.isStrikeout=!0:4===i.fontStyle&&(l.isUnderline=!0),i.fontStyle=l}var d=void 0;if("Shape"===i.type||"Measure"===i.type||"TextMarkup"===i.type)if("Line"===i.subType||"Arrow"===i.subType||"Distance"===i.subType)d=!("None"!==i.lineHeadEndStyle&&"Open"!==i.lineHeadEndStyle||"None"!==i.lineHeadStartStyle&&"Open"!==i.lineHeadStartStyle)?i.subType:i.type;else d="TextMarkup"===i.type||"Perimeter"===i.subType?i.subType:i.type;else d=i.type;sf.base.Browser.isDevice&&!this.enableDesktopMode&&("FreeText"===i.type&&(this.viewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.selectedItems.annotations[0].fontFamily),this.viewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.selectedItems.annotations[0].fontSize)),"Redaction"!==i.type&&(n||this.commentPanelVisible)&&this._dotnetInstance.invokeMethodAsync("MobileAnnotationPropertyUpdate",d)),this.triggerEventData("AnnotationSelected",r);var h=this.annotationCollection.filter((function(e){return e.annotationId===r.annotationId}));h.length>0&&!h[0].annotationSettings.isLock&&!h[0].isLocked&&this.viewerBase.blazorUIAdaptor.annotationSelect(i.type)}},e.prototype.fireAnnotationUnSelect=function(e,t,i){for(var n={name:"annotationUnSelect",annotationId:e,pageIndex:t,annotation:i},o=!1,s=0;s<this.annotationCollection.length;s++)this.annotationCollection[s].annotationId===i.annotName&&(n.annotation=this.annotationCollection[s],o=!0);o&&this.triggerEventData("AnnotationUnselected",n),!sf.base.Browser.isDevice&&this.enableDesktopMode&&this.viewerBase.blazorUIAdaptor.annotationUnSelect()},e.prototype.fireAnnotationDoubleClick=function(e,t,i){var n={name:"annotationDblClick",annotationId:e,pageIndex:t,annotation:i};-1===this.registeredEventCallbacks.indexOf("OnAnnotationDoubleClick")&&this.registeredEventCallbacks.push("OnAnnotationDoubleClick"),this.triggerEventData("OnAnnotationDoubleClick",n)},e.prototype.fireTextSelectionStart=function(e){this.isTextSelectionStarted=!0;var t={name:"textSelectionStart",pageIndex:e};this.triggerEventData("OnTextSelectionStart",t)},e.prototype.fireTextSelectionEnd=function(e,t,i){if(this.isTextSelectionStarted){var n={name:"textSelectionEnd",pageIndex:e,textContent:t,textBounds:i};this.triggerEventData("OnTextSelectionEnd",n),this.isTextSelectionStarted=!1}},e.prototype.renderDrawing=function(e,t){sf.base.isNullOrUndefined(t)&&this.viewerBase.activeElements.activePageID&&!this.viewerBase.isPrint&&(t=this.viewerBase.activeElements.activePageID),this.annotation&&this.annotation.renderAnnotations(t,null,null,null,null,e)},e.prototype.fireAnnotationResize=function(e,t,i,n,o,s,a,r,l,d){var h={name:"annotationResize",pageIndex:e,annotationId:t,annotationType:i,annotationBound:n,annotationSettings:o};s&&(h.textMarkupContent=s,h.textMarkupStartIndex=a,h.textMarkupEndIndex=r),l&&(h.labelSettings=l),d&&(h.multiplePageCollection=d),this.triggerEventData("AnnotationResized",h)},e.prototype.fireAnnotationMoving=function(e,t,i,n,o,s){},e.prototype.fireAnnotationMove=function(e,t,i,n,o,s){var a={name:"annotationMove",pageIndex:e,annotationId:t,annotationType:i,annotationSettings:n,previousPosition:o,currentPosition:s};this.triggerEventData("AnnotationMoved",a)},e.prototype.fireAnnotationMouseover=function(e,t,i,n,o,s,a){var r={name:"annotationMouseover",annotationId:e,pageIndex:t,annotationType:i,annotationBounds:n,annotation:o,pageX:s.left,pageY:s.top,X:a.left,Y:a.top};"Perimeter calculation"===o.subject?r.annotationType="Perimeter":"Area calculation"===o.subject?r.annotationType="Area":"Volume calculation"===o.subject?r.annotationType="Volume":"Arrow"===o.subject?r.annotationType="Arrow":"Circle"===o.subject&&(r.annotationType="Circle"),this.triggerEventData("AnnotationMouseover",r)},e.prototype.fireAnnotationMouseLeave=function(e){},e.prototype.firePageMouseover=function(e,t){var i={pageX:e,pageY:t};this.triggerEventData("PageMouseover",i)},e.prototype.fireDownloadStart=function(e){var t={fileName:e};this.triggerEventData("DownloadStart",t)},e.prototype.fireDownloadEnd=function(e,t){var i={fileName:e,downloadDocument:t};-1===this.registeredEventCallbacks.indexOf("DownloadEnd")&&this.registeredEventCallbacks.push("DownloadEnd"),this.triggerEventData("DownloadEnd",i)},e.prototype.firePrintStart=function(){return o(this,void 0,void 0,(function(){var e,t=this;return s(this,(function(i){return e={fileName:this.downloadFileName,cancel:!1},-1!==this.registeredEventCallbacks.indexOf("PrintStart")?this.triggerEventPromise("PrintStart",e).then((function(e){e.cancel||t.printModule.print()})):this.printModule.print(),[2]}))}))},e.prototype.triggerEvent=function(e,t){return o(this,void 0,void 0,(function(){return s(this,(function(e){return[2,null]}))}))},e.prototype.firePrintEnd=function(e){var t={fileName:e};this.triggerEventData("PrintEnd",t)},e.prototype.fireThumbnailClick=function(e){var t={name:"thumbnailClick",pageNumber:e};this.triggerEventData("OnThumbnailClick",t)},e.prototype.fireBookmarkClick=function(e,t,i,n){},e.prototype.fireImportStart=function(e){var t={name:"importAnnotationsStart",importData:e,formFieldData:null};this.triggerEventData("ImportStarted",t)},e.prototype.fireExportStart=function(e){var t={name:"exportAnnotationsStart",exportData:e,formFieldData:null};this.triggerEventData("ExportStarted",t)},e.prototype.fireImportSuccess=function(e){var t={name:"importAnnotationsSuccess",importData:e,formFieldData:null};this.triggerEventData("ImportSucceed",t)},e.prototype.fireExportSuccess=function(e,t){var i={name:"exportAnnotationsSuccess",exportData:e,fileName:t,formFieldData:null};this.triggerEventData("ExportSucceed",i)},e.prototype.fireImportFailed=function(e,t){var i={name:"importAnnotationsFailed",importData:e,errorDetails:t,formFieldData:null};this.triggerEventData("ImportFailed",i)},e.prototype.fireExportFailed=function(e,t){var i={name:"exportAnnotationsFailed",exportData:e,errorDetails:t,formFieldData:null};this.triggerEventData("ExportFailed",i)},e.prototype.fireFormImportStarted=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return-1===this.registeredEventCallbacks.indexOf("FormFieldsImporting")?[3,2]:(e={name:"FormFieldsImporting",cancel:!1},[4,this.triggerEventPromise("FormFieldsImporting",e)]);case 1:return[2,!(e=t.sent()).cancel];case 2:return[2,!0]}}))}))},e.prototype.fireFormExportStarted=function(){return o(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return-1===this.registeredEventCallbacks.indexOf("FormFieldsExporting")?[3,2]:(e={name:"FormFieldsExporting",cancel:!1},[4,this.triggerEventPromise("FormFieldsExporting",e)]);case 1:return[2,!(e=t.sent()).cancel];case 2:return[2,!0]}}))}))},e.prototype.fireFormImportSuccess=function(){this.triggerEventData("FormFieldsImported",{name:"FormFieldsImported"})},e.prototype.fireFormExportSuccess=function(){this.triggerEventData("FormFieldsExported",{name:"FormFieldsExported"})},e.prototype.fireFormImportFailed=function(e){var t={name:"FormFieldsImportFailed",errorDetails:e};this.triggerEventData("FormFieldsImportFailed",t)},e.prototype.fireFormExportFailed=function(e){var t={name:"FormFieldsExportFailed",errorDetails:e};this.triggerEventData("FormFieldsExportFailed",t)},e.prototype.fireTextExtractionCompleted=function(e){var t={documentTextCollection:e};this.triggerEventData("ExtractTextCompleted",t)},e.prototype.fireTextSearchStart=function(e,t){var i={name:"textSearchStart",searchText:e,matchCase:t};this.triggerEventData("OnTextSearchStart",i)},e.prototype.fireTextSearchComplete=function(e,t){var i={name:"textSearchComplete",searchText:e,matchCase:t};this.triggerEventData("OnTextSearchComplete",i)},e.prototype.fireTextSearchHighlight=function(e,t,i,n){var o={name:"textSearchHighlight",searchText:e,matchCase:t,bounds:i,pageNumber:n};this.triggerEventData("OnTextSearchHighlight",o)},e.prototype.renderAdornerLayer=function(e,t,i,n){il(e,t,i,n,this)},e.prototype.renderSelector=function(e,t){this.drawing.renderSelector(e,t)},e.prototype.select=function(e,t,i,n){if(this.enableServerDataBinding(!1),this.annotationModule){var o=void 0;this.annotationModule.textMarkupAnnotationModule&&(o=this.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage);var s=this.selectedItems.annotations[0];if(o){var a=this.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;this.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(o,!0),this.fireAnnotationUnSelect(a.annotName,a.pageNumber,a)}i||this.viewerBase.activeElements&&this.viewerBase.activeElements.activePageID>=0&&s&&"HandWrittenSignature"!==s.shapeAnnotationType&&"SignatureText"!==s.shapeAnnotationType&&"SignatureImage"!==s.shapeAnnotationType&&this.fireAnnotationUnSelect(s.annotName,s.pageIndex,s)}if(this.formDesignerModule&&this.formDesignerInteraction){var r=this.selectedItems.formFields[0];if(r){var l=this.formDesignerModule.getFormFieldByID(r.id);l&&null!==l.pageNumber&&this.fireFormFieldEvent("FormFieldUnselected",l,l.pageNumber)}}if(this.selectedItems){var d=this.viewerBase.activeElements.activePageID;this.clearSelectedItems(this.selectedItems,d)}else this.clearSelection(this.viewerBase.activeElements.activePageID);this.drawing.select(e,t,i,n)},e.prototype.clearSelectedItems=function(e,t){e&&e.annotations&&this.selectedItems.annotations.length>0||e.formFields&&e.formFields.length>0?(e.annotations.length>0&&this.clearSelection(e.annotations[0].pageIndex),e.formFields.length>0&&this.clearSelection(e.formFields[0].pageIndex)):this.clearSelection(t)},e.prototype.getPageTable=function(e){return this.drawing.getPageTable(e)},e.prototype.dragSelectedObjects=function(e,t,i,n,o){return this.drawing.dragSelectedObjects(e,t,i,n,o)},e.prototype.scaleSelectedItems=function(e,t,i){return this.drawing.scaleSelectedItems(e,t,i)},e.prototype.dragConnectorEnds=function(e,t,i,n,o,s,a){return this.drawing.dragConnectorEnds(e,t,i,n,o,null,a)},e.prototype.clearSelection=function(e){this.enableServerDataBinding(!1);var t=this.selectedItems;if(t.annotations.length>0?(t.offsetX=0,t.offsetY=0,t.width=0,t.height=0,t.rotateAngle=0,t.annotations=[],t.wrapper=null):t.formFields.length>0&&(t.offsetX=0,t.offsetY=0,t.width=0,t.height=0,t.rotateAngle=0,t.formFields=[],t.wrapper=null),this.drawing.clearSelectorLayer(e),this.viewerBase.isAnnotationSelect=!1,this.viewerBase.isFormFieldSelect=!1,this.annotationModule){var i=this.annotationModule.textMarkupAnnotationModule;if(i){var n=i.selectTextMarkupCurrentPage;this.annotationModule.textMarkupAnnotationModule.clearCurrentSelectedAnnotation(),this.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(n)}}},e.prototype.add=function(e){return this.drawing.add(e)},e.prototype.remove=function(e){return this.drawing.remove(e)},e.prototype.copy=function(){return this.annotation&&(this.annotation.isShapeCopied=!0),this.drawing.copy()},e.prototype.rotate=function(e,t){return this.drawing.rotate(this.selectedItems,e,null,t)},e.prototype.paste=function(e){var t;return this.viewerBase.activeElements.activePageID&&(t=this.viewerBase.activeElements.activePageID),this.drawing.paste(e,t||0)},e.prototype.refresh=function(){for(var e=0;e<this.annotations.length;e++){if(void 0!==this.zIndexTable.length){for(var t=0;t<this.zIndexTable.length;t++){for(var i=this.zIndexTable[t].objects,n=0;n<i.length;n++)i.splice(n,1);delete this.zIndexTable[t]}this.annotations[e]&&delete this.annotations[e],this.selectedItems.annotations&&this.selectedItems.annotations[e]&&delete this.selectedItems.annotations[e],this.zIndexTable=[],this.renderDrawing()}this.annotations&&0!==this.annotations.length&&(this.annotations.length=0,this.selectedItems.annotations.length=0)}},e.prototype.cut=function(){var e;return this.viewerBase.activeElements.activePageID&&(e=this.viewerBase.activeElements.activePageID),this.annotation&&(this.annotation.isShapeCopied=!0),this.drawing.cut(e||0)},e.prototype.nodePropertyChange=function(e,t){this.drawing.nodePropertyChange(e,t)},e.prototype.enableServerDataBinding=function(e,t){},e.prototype.checkBoundaryConstraints=function(e,t,i,n,o,s){return this.drawing.checkBoundaryConstraints(e,t,i,n,o,s)},e.prototype.checkIsWebkitMoblie=function(){return/Chrome/.test(navigator.userAgent)||-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("AppleWebKit")},e.prototype.triggerEventData=function(e,t){try{if(-1!==this.registeredEventCallbacks.indexOf(e))if(this.enableChunkMessages){var i=this.jsonObjectToGetBlobInfo(t);null!=i?this._dotnetInstance.invokeMethodAsync("Trigger",e,null,i):this._dotnetInstance.invokeMethodAsync("Trigger",e,t,null)}else this._dotnetInstance.invokeMethodAsync("Trigger",e,t,null)}catch(e){throw console.error("Unhandled Exception:",e),e}},e.prototype.triggerEventPromise=function(e,t){try{if(this.enableChunkMessages){var i=this.jsonObjectToGetBlobInfo(t);return null!=i?Promise.resolve(this._dotnetInstance.invokeMethodAsync("Trigger",e,null,i)):Promise.resolve(this._dotnetInstance.invokeMethodAsync("Trigger",e,t,null))}return Promise.resolve(this._dotnetInstance.invokeMethodAsync("Trigger",e,t,null))}catch(e){throw console.error("Unhandled Exception:",e),e}},e.prototype.nameToHash=function(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",yellow:"#ffff00",yellowgreen:"#9acd32",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkred:"#8b0000",darksalmon:"#e9967a",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",indigo:"#4b0082",ivory:"#fffff0",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",pink:"#ffc0cb",plum:"#dda0dd",steelblue:"#4682b4",violet:"#ee82ee",powderblue:"#b0e0e6",purple:"#800080",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",transparent:"#ffffff00"};return void 0!==t[e.toLowerCase()]?t[e.toLowerCase()]:""},i([sf.base.Event()],e.prototype,"created",void 0),i([sf.base.Event()],e.prototype,"documentLoad",void 0),i([sf.base.Event()],e.prototype,"documentUnload",void 0),i([sf.base.Event()],e.prototype,"documentLoadFailed",void 0),i([sf.base.Event()],e.prototype,"ajaxRequestFailed",void 0),i([sf.base.Event()],e.prototype,"ajaxRequestSuccess",void 0),i([sf.base.Event()],e.prototype,"validateFormFields",void 0),i([sf.base.Event()],e.prototype,"pageClick",void 0),i([sf.base.Event()],e.prototype,"pageChange",void 0),i([sf.base.Event()],e.prototype,"hyperlinkClick",void 0),i([sf.base.Event()],e.prototype,"hyperlinkMouseOver",void 0),i([sf.base.Event()],e.prototype,"zoomChange",void 0),i([sf.base.Event()],e.prototype,"annotationAdd",void 0),i([sf.base.Event()],e.prototype,"annotationRemove",void 0),i([sf.base.Event()],e.prototype,"annotationPropertiesChange",void 0),i([sf.base.Event()],e.prototype,"annotationResize",void 0),i([sf.base.Event()],e.prototype,"addSignature",void 0),i([sf.base.Event()],e.prototype,"removeSignature",void 0),i([sf.base.Event()],e.prototype,"moveSignature",void 0),i([sf.base.Event()],e.prototype,"signaturePropertiesChange",void 0),i([sf.base.Event()],e.prototype,"resizeSignature",void 0),i([sf.base.Event()],e.prototype,"signatureSelect",void 0),i([sf.base.Event()],e.prototype,"annotationSelect",void 0),i([sf.base.Event()],e.prototype,"annotationUnSelect",void 0),i([sf.base.Event()],e.prototype,"annotationDoubleClick",void 0),i([sf.base.Event()],e.prototype,"annotationMove",void 0),i([sf.base.Event()],e.prototype,"annotationMoving",void 0),i([sf.base.Event()],e.prototype,"annotationMouseover",void 0),i([sf.base.Event()],e.prototype,"annotationMouseLeave",void 0),i([sf.base.Event()],e.prototype,"pageMouseover",void 0),i([sf.base.Event()],e.prototype,"importStart",void 0),i([sf.base.Event()],e.prototype,"exportStart",void 0),i([sf.base.Event()],e.prototype,"importSuccess",void 0),i([sf.base.Event()],e.prototype,"exportSuccess",void 0),i([sf.base.Event()],e.prototype,"importFailed",void 0),i([sf.base.Event()],e.prototype,"exportFailed",void 0),i([sf.base.Event()],e.prototype,"extractTextCompleted",void 0),i([sf.base.Event()],e.prototype,"thumbnailClick",void 0),i([sf.base.Event()],e.prototype,"bookmarkClick",void 0),i([sf.base.Event()],e.prototype,"textSelectionStart",void 0),i([sf.base.Event()],e.prototype,"textSelectionEnd",void 0),i([sf.base.Event()],e.prototype,"downloadStart",void 0),i([sf.base.Event()],e.prototype,"buttonFieldClick",void 0),i([sf.base.Event()],e.prototype,"formFieldClick",void 0),i([sf.base.Event()],e.prototype,"downloadEnd",void 0),i([sf.base.Event()],e.prototype,"printStart",void 0),i([sf.base.Event()],e.prototype,"printEnd",void 0),i([sf.base.Event()],e.prototype,"textSearchStart",void 0),i([sf.base.Event()],e.prototype,"textSearchComplete",void 0),i([sf.base.Event()],e.prototype,"textSearchHighlight",void 0),i([sf.base.Event()],e.prototype,"ajaxRequestInitiate",void 0),i([sf.base.Event()],e.prototype,"commentAdd",void 0),i([sf.base.Event()],e.prototype,"commentEdit",void 0),i([sf.base.Event()],e.prototype,"commentDelete",void 0),i([sf.base.Event()],e.prototype,"commentSelect",void 0),i([sf.base.Event()],e.prototype,"commentStatusChanged",void 0),i([sf.base.Event()],e.prototype,"beforeAddFreeText",void 0),i([sf.base.Event()],e.prototype,"formFieldFocusOut",void 0),i([sf.base.Event()],e.prototype,"formFieldFocusIn",void 0),i([sf.base.Event()],e.prototype,"formFieldAdded",void 0),i([sf.base.Event()],e.prototype,"formFieldDelete",void 0),i([sf.base.Event()],e.prototype,"FormFieldPropertyChanged",void 0),i([sf.base.Event()],e.prototype,"formFieldMouseLeave",void 0),i([sf.base.Event()],e.prototype,"formFieldMouseOver",void 0),i([sf.base.Event()],e.prototype,"formFieldMove",void 0),i([sf.base.Event()],e.prototype,"formFieldResize",void 0),i([sf.base.Event()],e.prototype,"formFieldSelect",void 0),i([sf.base.Event()],e.prototype,"formFieldUnselect",void 0),i([sf.base.Event()],e.prototype,"formFieldDoubleClick",void 0),e}()),r=function(){function e(){this.wrapper=null,this.annotations=[],this.formFields=[],this.rotateAngle=0,this.offsetX=0,this.offsetY=0,this.pivot={x:.5,y:.5}}return e.prototype.init=function(e){var t=new sf.drawings.Container;if(t.measureChildren=!1,t.children=[],this.formFields&&this.formFields.length>0)for(var i=0;i<this.formFields.length;i++){var n=e.pdfViewer.nameTable[this.formFields[i].id].wrapper;t.children.push(n)}else if(this.annotations)for(i=0;i<this.annotations.length;i++)if(!sf.base.isNullOrUndefined(this.annotations[i])){n=e.pdfViewer.nameTable[this.annotations[i].id].wrapper;t.children.push(n)}return this.wrapper=t,t},e}();function l(e){return"Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Distance"===e.shapeAnnotationType||"Polygon"===e.shapeAnnotationType}function d(e){return"Line"===e||"Rectangle"===e||"Ellipse"===e||"Polygon"===e||"LineWidthArrowHead"===e||"Radius"===e||"FreeText"===e||"HandWrittenSignature"===e||"SignatureText"===e||"SignatureImage"===e||"Ink"===e||"Stamp"===e||"Image"===e||"StickyNotes"===e}function h(e,t){if(e&&t)if(e.formFieldAnnotationType)-1!==e.id.indexOf("diagram_helper")?(t.style.fill="transparent",t.style.strokeWidth=1,t.style.strokeDashArray=e.borderDashArray):(t.style.fill="transparent",t.style.strokeWidth=0);else{var i="#ffffff00"===e.fillColor?"transparent":e.fillColor;t.style.fill=i||"white","Redaction"===e.shapeAnnotationType&&(i=Gr(e.markerFillColor,e.markerOpacity),t.style.fill=i),t.style.strokeColor=e.strokeColor?e.strokeColor:e.borderColor,t.style.color=e.strokeColor?e.strokeColor:e.borderColor,t.style.strokeWidth=e.thickness,"Image"!==e.shapeAnnotationType&&"SignatureText"!==e.shapeAnnotationType&&"SignatureImage"!==e.shapeAnnotationType||(t.style.strokeWidth=0),t.style.strokeDashArray=e.borderDashArray,t.style.opacity=e.opacity,"Redaction"===e.shapeAnnotationType&&(t.style.opacity=1)}}function p(e){for(var t=0,i=0;i<e.length-1;i++)t+=sf.drawings.Point.findLength(e[i],e[i+1]);return t}function c(e,t){var i={width:e.actualSize.width,height:e.actualSize.height,x:e.offsetX-e.actualSize.width*e.pivot.x+.5,y:e.offsetY-e.actualSize.height*e.pivot.y+.5,angle:e.rotateAngle+e.parentTransform,fill:e.style.fill,stroke:e.style.strokeColor,pivotX:e.pivot.x,pivotY:e.pivot.y,strokeWidth:1,opacity:e.style.opacity,dashArray:e.style.strokeDashArray||"",visible:e.visible,id:e.id};return t&&(i.x+=t.tx,i.y+=t.ty),i}function u(e,t,i){var n,o={},s="properties";if(e){i=e.propName;var a=e[""+s]||e,r=[],l=[];if((r=r.concat(Object.keys(a))).push("version"),i){var d=(void 0!==(n=t)&&"string"==typeof n&&(n=sf.base.getValue(n,window)),n);l=d?d(i):[],r=r.concat(l)}for(var h=function(e){switch(e){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"]}return[]}(i),p=0,c=r=r.concat(h);p<c.length;p++){var m=c[p];if("historyManager"!==m)if("wrapper"!==m)!(!e[""+m]||!Object.prototype.hasOwnProperty.call(e,"observers"))||(e[""+m]instanceof Array?o[""+m]=f(-1===h.indexOf(m)&&e[""+s]?e[""+s][""+m]:e[""+m],t,m):e[""+m]instanceof Array==!1&&e[""+m]instanceof HTMLElement?o[""+m]=e[""+m].cloneNode(!0).innerHtml:e[""+m]instanceof Array==!1&&e[""+m]instanceof Object?o[""+m]=u(-1===h.indexOf(m)&&e[""+s]?e[""+s][""+m]:e[""+m]):o[""+m]=e[""+m]);else e[""+m]&&(o[""+m]={actualSize:{width:e[""+m].actualSize.width,height:e[""+m].actualSize.height},offsetX:e[""+m].offsetX,offsetY:e[""+m].offsetY})}}return o}function f(e,t,i){var n;if(e){n=[];for(var o=0;o<e.length;o++)e[o]instanceof Array?n.push(e[o]):e[o]instanceof Object?n.push(u(e[o],t,i)):n.push(e[o])}return n}var m,g=(m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),w=function(e){function t(t){var i=e.call(this)||this;return i.templateFn=i.templateCompiler(t),i}return g(t,e),t.prototype.templateCompiler=function(e){if(e)try{if(document.querySelectorAll(e).length)return sf.base.compile(document.querySelector(e).innerHTML.trim())}catch(t){return sf.base.compile(e)}},t.prototype.getNodeTemplate=function(){return this.templateFn},t}(sf.drawings.DrawingElement);function y(e,t){var i=e.vertexPoints.slice(0);return i&&i.length>0&&(e.sourcePoint=i[0],e.targetPoint=i[i.length-1]),i}function v(e,t,i){var n=new sf.drawings.Rect,o=function(e,t){for(var i,n="",o=[],s=0;s<t.length;)o.push({x:t[s].x,y:t[s].y}),s++;o=A(e,o);for(var a=0;a<o.length;a++)i=o[a],0===a&&(n="M"+i.x+" "+i.y),a>0&&(n+=" L"+i.x+" "+i.y);return n}(e,t);return n=sf.drawings.Rect.toBounds(t),i.width=n.width,i.height=n.height,i.offsetX=n.x+i.width/2,i.offsetY=n.y+i.height/2,i.data=o,e.wrapper&&(e.wrapper.offsetX=i.offsetX,e.wrapper.offsetY=i.offsetY,e.wrapper.width=n.width,e.wrapper.height=n.height),i}function b(e,t,i,n,o){t.offsetX=i.x,t.offsetY=i.y;var s,a=sf.drawings.Point.findAngle(i,n),r=e.thickness<=5?5:e.thickness,l=(s=o?e.sourceDecoraterShapes:e.taregetDecoraterShapes,B[""+s]),d=new sf.drawings.Size(2*r,2*r);t.transform=sf.drawings.RotateTransform.Self,h(e,t),t.style.fill="tranparent"!==e.fillColor?e.fillColor:"white",t.rotateAngle=a,t.data=l,t.canMeasurePath=!0,t.width=d.width,t.height=d.height,"Butt"===e.sourceDecoraterShapes&&(t.width=d.width-10,t.height=d.height+10)}function S(e,t,i,n){var o=new sf.drawings.PathElement;return b(e,o,t,i,n),o}function A(e,t){return t[0]=x(e,t,!0),t[t.length-1]=x(e,t,!1),t}function x(e,t,i){var n,o,s={x:0,y:0},a=t.length;n=i?t[0]:t[a-1],o=i?t[1]:t[a-2];var r=sf.drawings.Point.distancePoints(n,o);r=0===r?1:r;var l=e.thickness;s.x=Math.round(n.x+l*(o.x-n.x)/r),s.y=Math.round(n.y+l*(o.y-n.y)/r);return s=sf.drawings.Point.adjustPoint(s,o,!0,.5)}function V(e,t,i){for(var n,o=0;o<e.wrapper.children.length;o++){var s=e.wrapper.children[o];s&&!sf.base.isNullOrUndefined(s.content)&&(n=i.calculatePerimeter(e),s.content=n,s.childNodes[0].text=s.content,s.refreshTextElement())}return n}function C(e){if(e.wrapper&&e.wrapper.children)for(var t=0;t<e.wrapper.children.length;t++){var i=e.wrapper.children[t];i&&!sf.base.isNullOrUndefined(i.content)&&(i.content=e.notes,i.childNodes[0].text=i.content,i.refreshTextElement())}}function I(e){var t,i,n="";for(n="M"+e[0].x+" "+e[0].y,i=1;i<e.length;i++)n+="L"+(t=e[i]).x+" "+t.y;return n+="Z"}function k(e,t){var i=new sf.drawings.TextElement;return h(e,i),i.style.fill="transparent",i.id=sf.drawings.randomId(),i.horizontalAlignment="Center",i.rotateValue={y:10,angle:t},i.verticalAlignment="Top",i.relativeMode="Object",i.setOffsetWithRespectToBounds(.5,.5,"Absolute"),i.style.textWrapping="NoWrap",i}function M(e,t,i,n){var o=new sf.drawings.PathElement;o.offsetX=t.x,o.offsetY=t.y;var s=sf.drawings.Point.findAngle(t,i),a={x:(t.x+i.x)/2,y:(t.y+i.y)/2},r=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(r,0-s,a.x,a.y);var l=sf.drawings.transformPointByMatrix(r,t),d={x:l.x,y:l.y-e.leaderHeight};r=sf.drawings.identityMatrix(),sf.drawings.rotateMatrix(r,s,o.offsetX,o.offsetY),l=sf.drawings.transformPointByMatrix(r,d);var p={x:t.x,y:t.y};o.offsetX=p.x,o.offsetY=p.y,o.transform=sf.drawings.RotateTransform.Self;var c="M"+t.x+","+t.y+" L"+l.x+","+l.y+"Z",u=new sf.drawings.Size(0,e.leaderHeight);return o.pivot.x=.5,n?(o.id="leader2_"+sf.drawings.randomId(),o.pivot.y=0):(o.id="leader1_"+sf.drawings.randomId(),o.pivot.y=1),h(e,o),o.rotateAngle=s,o.data=c,o.canMeasurePath=!0,o.width=u.width,o.height=u.height,o}function T(e,t){for(var i=e.vertexPoints,n=0;n<i.length-1;n++){var o=i[n],s=i[n+1],a=sf.drawings.Rect.toBounds([o,s]);if(a.Inflate(10),a.containsPoint(t)){var r=E(t,o,s),l={x1:o.x,x2:s.x,y1:o.y,y2:s.y},d={x1:t.x,x2:r.x,y1:t.y,y2:r.y},h=sf.drawings.intersect3(l,d);if(h.enabled){var p=sf.drawings.Point.findLength(t,h.intersectPt);if(Math.abs(p)<10)return!0}else{var c=sf.drawings.Rect.toBounds([t,t]);if(c.Inflate(3),c.containsPoint(o)||c.containsPoint(s))return!0}if(sf.drawings.Point.equals(t,r))return!0}}return!1}function E(e,t,i){var n;n=sf.drawings.Point.findLength(t,e)>sf.drawings.Point.findLength(i,e)?i:t;var o=sf.drawings.Point.findAngle(t,i),s=sf.drawings.Point.findAngle(n,e),a=sf.drawings.Point.findLength(n,e),r=s+2*(o-s);return{x:n.x+a*Math.cos(r*Math.PI/180),y:n.y+a*Math.sin(r*Math.PI/180)}}var B={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Butt:"M0,0 L0,90"};function P(e,t,i,n,o,s,a,r,l,d,c){switch(e.shapeAnnotationType){case"Ellipse":if((t=new sf.drawings.PathElement).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,n.children.push(i),e.enableShapeLabel)(w=this.textElement(e)).content=e.labelContent,w.style.color=e.fontColor,w.style.strokeColor=e.labelBorderColor,w.style.fill=e.labelFillColor,w.style.fontSize=e.fontSize,w.style.fontFamily=e.fontFamily,w.style.opacity=e.labelOpacity,w.style.textWrapping="NoWrap",n.children.push(w);break;case"Path":(t=new sf.drawings.PathElement).data=e.data,i=t,n.children.push(i);break;case"HandWrittenSignature":case"Ink":(t=new sf.drawings.PathElement).data=e.data,t.style.strokeColor=e.strokeColor,t.style.strokeWidth=e.thickness,t.style.opacity=e.opacity,i=t,n.children.push(i);break;case"Polygon":(t=new sf.drawings.PathElement).data=I(e.vertexPoints),i=t,n.children.push(i);break;case"Stamp":if(o=!0,this.isDynamicStamps=!0,e&&e.annotationAddMode&&("Existing Annotation"===e.annotationAddMode||!this.pdfViewer.annotationModule.isUndoRedoAction&&"Imported Annotation"===e.annotationAddMode||"diagram_helper"===e.id)&&(e.bounds.width=e.bounds.width-20,e.bounds.height=e.bounds.height-20),e.isDynamicStamp){n.horizontalAlignment="Left",(i=s=new sf.drawings.DrawingElement).cornerRadius=10,i.style.fill=e.stampFillColor,i.style.strokeColor=e.stampStrokeColor,n.children.push(i);var u=this.textElement(e);(u=new sf.drawings.TextElement).style.fontFamily="Helvetica",u.style.fontSize=14,u.style.italic=!0,u.style.bold=!0,u.style.color=e.fillColor,u.rotateValue=void 0,u.content=e.dynamicText,u.relativeMode="Point",u.margin.left=10,u.margin.bottom=-7,u.setOffsetWithRespectToBounds(0,.57,null),u.relativeMode="Point","Existing Annotation"!==e.annotationAddMode&&"Imported Annotation"!==e.annotationAddMode||(u.style.fontSize=this.fontSizeCalculation(e,u,e.bounds.width-20)),"diagram_helper"!==e.id&&n.children.push(u),(m=new sf.drawings.PathElement).id=sf.drawings.randomId()+"_stamp",m.data=e.data,m.width=e.bounds.width,a&&e.bounds.width>l&&(m.width=l,e.bounds.width=l),m.height=e.bounds.height/2,a&&e.bounds.height>r&&(m.height=r/2,e.bounds.height=r/2),m.rotateValue=void 0,m.margin.left=10,m.margin.bottom=-5,m.relativeMode="Point",m.setOffsetWithRespectToBounds(0,.1,null);var f=m;m.style.fill=e.fillColor,m.style.strokeColor=e.strokeColor,m.style.opacity=e.opacity,i.width=e.bounds.width+20,i.height=e.bounds.height+20,i.style.opacity=e.opacity,n.children.push(f)}else{var m;n.horizontalAlignment="Left",(i=s=new sf.drawings.DrawingElement).cornerRadius=10,i.style.fill=e.stampFillColor,i.style.strokeColor=e.stampStrokeColor,n.children.push(i),(m=new sf.drawings.PathElement).id=sf.drawings.randomId()+"_stamp",m.data=e.data,m.width=e.bounds.width,a&&e.bounds.width>l&&(m.width=l,e.bounds.width=l),m.height=e.bounds.height,a&&e.bounds.height>r&&(m.height=r,e.bounds.height=r);f=m;m.style.fill=e.fillColor,m.style.strokeColor=e.strokeColor,m.style.opacity=e.opacity,i.width=e.bounds.width+20,i.height=e.bounds.height+20,i.style.opacity=e.opacity,n.children.push(f)}break;case"Image":case"SignatureImage":var g=new sf.drawings.ImageElement;g.source=e.data,(i=g).style.strokeWidth=0,n.children.push(i);break;case"Rectangle":case"Redaction":var w;if(i=s=new sf.drawings.DrawingElement,n.children.push(i),e.enableShapeLabel)(w=this.textElement(e)).content=e.labelContent,w.style.color=e.fontColor,w.style.strokeColor=e.labelBorderColor,w.style.fill=e.labelFillColor,w.style.fontSize=e.fontSize,w.style.fontFamily=e.fontFamily,w.style.opacity=e.labelOpacity,w.style.textWrapping="NoWrap",n.children.push(w);break;case"Perimeter":(t=new sf.drawings.PathElement).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,h(e,t),n.children.push(i),(s=new sf.drawings.DrawingElement).id="perimeter_"+sf.drawings.randomId(),s.height=.2,s.width=.2,s.transform=sf.drawings.RotateTransform.Self,s.horizontalAlignment="Stretch",this.setNodePosition(s,e),s.rotateAngle=e.rotateAngle,h(e,s),n.children.push(s);u=this.textElement(e);(u=new sf.drawings.TextElement).style.textWrapping="NoWrap",u.content=u.content=p([{x:e.bounds.x,y:e.bounds.y},{x:e.bounds.x+e.bounds.width,y:e.bounds.y+e.bounds.height}]).toString(),u.rotateValue={y:-10,angle:e.rotateAngle},n.children.push(u);break;case"Radius":(t=new sf.drawings.PathElement).data="M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",i=t,h(e,t),n.children.push(i),(s=new sf.drawings.DrawingElement).id="radius_"+sf.drawings.randomId(),s.height=.2,s.width=e.bounds.width/2,s.transform=sf.drawings.RotateTransform.Self,this.setNodePosition(s,e),s.rotateAngle=e.rotateAngle,h(e,s),n.children.push(s);var y=this.textElement(e);e.enableShapeLabel&&(y.style.color=e.fontColor,y.style.strokeColor=e.labelBorderColor,y.style.fill=e.labelFillColor,y.style.fontSize=e.fontSize,y.style.fontFamily=e.fontFamily,y.style.opacity=e.labelOpacity,y.style.textWrapping="NoWrap");p([{x:e.bounds.x,y:e.bounds.y},{x:e.bounds.x+e.bounds.width,y:e.bounds.y+e.bounds.height}]);!this.pdfViewer.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?y.content=e.notes:e.bounds.width?y.content=this.pdfViewer.annotation.measureAnnotationModule.setConversion(e.bounds.width/2*this.pdfViewer.annotation.measureAnnotationModule.pixelToPointFactor,e):y.content=this.pdfViewer.annotation.measureAnnotationModule.setConversion(0*this.pdfViewer.annotation.measureAnnotationModule.pixelToPointFactor,e),y.rotateValue={y:-10,x:e.bounds.width/4,angle:e.rotateAngle},n.children.push(y);break;case"StickyNotes":var v=new sf.drawings.ImageElement;v.source=e.data,v.width=e.bounds.width,v.height=e.bounds.height,v.style.strokeColor=e.strokeColor,v.style.strokeWidth=0,i=v,n.children.push(i);break;case"SignatureText":var b=new sf.drawings.DrawingElement;b.style.strokeWidth=0,(i=b).style.strokeWidth=0,n.style.strokeWidth=0,n.children.push(i);var S=this.textElement(e);S.style.fontFamily=e.fontFamily,S.style.fontSize=e.fontSize,S.style.textAlign="Left",S.rotateValue=void 0,S.content=e.data,S.style.strokeWidth=0,n.children.push(S);break;case"FreeText":var A;i=new sf.drawings.DrawingElement,n.children.push(i);var x=this.textElement(e);(x=new sf.drawings.TextElement).style.fontFamily=e.fontFamily,A=this.pdfViewer.annotation.freeTextAnnotationModule.isCustomFont(e.fontFamily),x.style.fontSize=e.fontSize,x.style.textAlign="Left","center"===e.textAlign.toLowerCase()?x.style.textAlign="Center":"right"===e.textAlign.toLowerCase()?x.style.textAlign="Right":"justify"===e.textAlign.toLowerCase()&&(x.style.textAlign="Justify"),x.style.color=e.fontColor,x.style.bold=e.font.isBold,x.style.italic=e.font.isItalic,!0===e.font.isUnderline?x.style.textDecoration="Underline":!0===e.font.isStrikeout&&(x.style.textDecoration="LineThrough"),x.rotateValue=void 0,x.content=e.dynamicText,x.style.opacity=e.opacity,A||(x.margin.left=4),x.margin.top=e.fontSize/16*5,this.pdfViewer.freeTextSettings.enableAutoFit?x.style.textWrapping="Wrap":x.style.textWrapping="WrapWithOverflow",x.relativeMode="Point",x.setOffsetWithRespectToBounds(0,0,null),x.relativeMode="Point",n.children.push(x)}return i.id=e.id+"_content",i.relativeMode="Object",i.printID=e.annotName,o||(void 0!==e.bounds.width&&(i.width=e.bounds.width,a&&(i.width<d||i.width>l)&&(i.width<d&&(i.width=d),i.width>l&&(i.width=l))),i.horizontalAlignment="Stretch",void 0!==e.bounds.height&&(i.height=e.bounds.height,a&&(i.height<c||i.width>r)&&(i.height<c&&(i.height=c),i.height>r&&(i.height=r))),h(e,i)),i.isRectElement=!0,i.verticalAlignment="Stretch",i}function D(e,t){var i;i=new sf.drawings.DrawingElement;var n=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.findAnnotationSettings(e):{},o=0,s=0,a=0,r=0;(n.minWidth||n.maxWidth||n.minHeight||n.maxHeight)&&(o=n.maxHeight?n.maxHeight:2e3,s=n.maxWidth?n.maxWidth:2e3,a=n.minHeight?n.minHeight:0,r=n.minWidth?n.minWidth:0);var l=!1;return(a||r||o||s)&&(l=!0),(i=e.formFieldAnnotationType?this.initFormFields(e,i,t):this.initAnnotationObject(e,void 0,i,t,!1,void 0,l,o,s,r,a)).id=e.id+"_content",i.relativeMode="Object","Stamp"!==e.shapeAnnotationType&&(void 0!==e.bounds.width&&(i.width=e.bounds.width,l&&(i.width<r||i.width>s)&&(i.width<r&&(i.width=r),i.width>s&&(i.width=s))),i.horizontalAlignment="Stretch",void 0!==e.bounds.height&&(i.height=e.bounds.height,l&&(i.height<a||i.width>o)&&(i.height<a&&(i.height=a),i.height>o&&(i.height=o))),h(e,i),this.pdfViewer.viewerBase.drawSignatureWithTool&&"SignatureText"===e.shapeAnnotationType&&(i.style.strokeWidth=0)),i.isRectElement=!0,i.verticalAlignment="Stretch",i}function N(e){return this.setZIndex(this.pdfViewer.zIndex,e),sf.drawings.createMeasureElements(),l(e)?(this.initLine(e),e.wrapper.measure(new sf.drawings.Size(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize)):this.initNode(e),e.wrapper,this.pdfViewer.nameTable[e.id]=e,e.formFieldAnnotationType&&this.nodePropertyChange(e,{bounds:{width:e.bounds.width,height:e.bounds.height}}),e}function F(e){var t,i=this.initContainer(e);i.children||(i.children=[]),t||(t=this.init(e,i)),i.rotateAngle=e.rotateAngle,i.measure(new sf.drawings.Size(e.wrapper.width,e.wrapper.height)),i.arrange(i.desiredSize),this.isDynamicStamps&&(this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(e,null,"dynamicStamp"),this.isDynamicStamps=!1)}function L(e,t,i){var n=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+e.pageIndex).getContext("2d"),o=0,s=0,a="";for(t.style.italic&&t.style.bold?a="bold italic ":t.style.bold?a="bold ":t.style.italic&&(a="italic "),null!=this.pdfViewer&&null!=this.pdfViewer.viewerBase&&this.pdfViewer.viewerBase.isMacSafari&&(s=0===s?.1:s);i>o;)n.font=a+s+"px "+t.style.fontFamily,o=n.measureText(e.dynamicText).width,s+=.1;return s-=.1}var O,R=(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),z=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.x=0,t.y=0,t.width=0,t.height=0,t.left=0,t.top=0,t.right=0,t.bottom=0,t.location={x:0,y:0},t.size=new sf.drawings.Size(0,0),t}R(t,e)}(sf.base.ChildProperty),function(){this.isBold=!1,this.isItalic=!1,this.isUnderline=!1,this.isStrikeout=!1}),H=function(){this.selectionBorderColor="",this.resizerBorderColor="black",this.resizerFillColor="#FF4081",this.resizerSize=8,this.selectionBorderThickness=1,this.resizerShape="Square",this.selectorLineDashArray=[],this.resizerCursorType=null},U=function(){this.id="",this.shapeAnnotationType="Rectangle",this.type="Rectangle",this.formFieldAnnotationType=null,this.measureType="",this.author="",this.modifiedDate="",this.subject="",this.notes="",this.isCommentLock=!1,this.strokeColor="black",this.fillColor="#ffffff00",this.stampFillColor="#ffffff00",this.stampStrokeColor="black",this.data="",this.opacity=1,this.thickness=1,this.borderStyle="",this.borderDashArray="",this.rotateAngle=0,this.isCloudShape=!1,this.cloudIntensity=0,this.leaderHeight=40,this.lineHeadStart=null,this.lineHeadEnd=null,this.vertexPoints=[],this.sourcePoint=null,this.sourceDecoraterShapes="None",this.taregetDecoraterShapes="None",this.targetPoint=null,this.segments=[],this.bounds={x:0,y:0},this.pageIndex=0,this.zIndex=-1,this.wrapper=null,this.isDynamicStamp=!1,this.dynamicText="",this.annotName="",this.comments=[],this.fontColor="#000",this.fontSize=16,this.fontFamily="Helvetica",this.fontStyle="None",this.enableShapeLabel=!1,this.labelContent="label",this.labelFillColor="#ffffff00",this.labelMaxLength=15,this.labelOpacity=1,this.annotationSelectorSettings=new H,this.labelBorderColor="#ffffff00",this.textAlign="left",this.signatureName="",this.minHeight=0,this.minWidth=0,this.maxHeight=0,this.maxWidth=0,this.isLocked=!1,this.annotationAddMode="UI Drawn Annotation",this.previousFontSize=16,this.font=new z,this.labelBounds={x:0,y:0},this.customData=null,this.isPrint=!0,this.isReadonly=!1,this.overlayText="",this.isRepeat=!1,this.markerBorderColor="rgba(255, 0, 0, 1)",this.markerFillColor="rgba(255, 255, 255, 1)",this.markerOpacity=1},j=function(e,t,i,n){this.id="",this.signatureType="",this.name="",this.value="",this.formFieldAnnotationType=null,this.backgroundColor="#daeaf7ff",this.color="black",this.borderColor="#303030",this.tooltip="",this.opacity=1,this.thickness=1,this.rotateAngle=0,this.bounds={x:0,y:0},this.pageIndex=0,this.pageNumber=1,this.zIndex=-1,this.wrapper=null,this.fontSize=16,this.fontFamily="Helvetica",this.fontStyle="None",this.alignment="left",this.minHeight=0,this.minWidth=0,this.maxHeight=0,this.maxWidth=0,this.maxLength=0,this.visibility="visible",this.isPrint=!0,this.isReadonly=!1,this.isChecked=!1,this.isSelected=!1,this.isRequired=!1,this.isMultiline=!1,this.font=new z},_=function(){function e(){this.pageIdTemp=0,this.zIndexTemp=-1,this.childNodesTemp=[],this.objects=[],this.zIndexTemp=-1,this.pageIdTemp=0}return Object.defineProperty(e.prototype,"pageId",{get:function(){return this.pageIdTemp},set:function(e){this.pageIdTemp=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this.zIndexTemp},set:function(e){this.zIndexTemp=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"objects",{get:function(){return this.childNodesTemp},set:function(e){this.childNodesTemp=e},enumerable:!1,configurable:!0}),e}();function W(e){e.id||(e.id=sf.drawings.randomId());var t=new sf.drawings.Canvas,i=new sf.drawings.PathElement;i.id=e.id+"_path";var n=new sf.drawings.PathElement,o=new sf.drawings.PathElement;if(e.vertexPoints.length){e.sourcePoint=e.vertexPoints[0],e.targetPoint=e.vertexPoints[e.vertexPoints.length-1];for(var s=0;s<e.vertexPoints.length;s++)0!==s&&s!==e.vertexPoints.length-1&&e.segments.push(e.vertexPoints[s])}i=function(e,t){var i;return i=y(e),t.staticSize=!0,h(e,t=v(e,i,t)),t}(e,i);var a=[];a=y(e);var r=[],l=[];if("Distance"===e.shapeAnnotationType&&(r=function(e,t){var i=[],n=M(e,t[0],t[1]);return i.push(n),n=M(e,t[1],t[0],!0),i.push(n),i}(e,a),l=function(e,t,i,n){var o=[],s=sf.drawings.Point.findAngle(t[0],t[1]),a=k(e,s);return!n.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?a.content=e.notes:a.content=i.setConversion(p([t[0],t[1]])*i.pixelToPointFactor,e),a.rotateValue={y:-10,angle:s},!0===e.enableShapeLabel&&(a.style.strokeColor=e.labelBorderColor,a.style.fill=e.labelFillColor,a.style.fontSize=e.fontSize,a.style.color=e.fontColor,a.style.fontFamily=e.fontFamily),o.push(a),o}(e,a,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer)),"Line"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType||"Perimeter"!==e.measureType||(l=function(e,t,i,n){var o=[],s=sf.drawings.Point.findAngle(t[0],t[1]),a=k(e,s);return!n.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?a.content=e.notes:a.content=i.calculatePerimeter(e),!0===e.enableShapeLabel&&(a.style.strokeColor=e.labelBorderColor,a.style.fill=e.labelFillColor,a.style.fontSize=e.fontSize,a.style.color=e.fontColor,a.style.fontFamily=e.fontFamily),a.rotateValue={y:-10,angle:s},o.push(a),o}(e,a,this.pdfViewer.annotation.measureAnnotationModule,this.pdfViewer)),!0===e.enableShapeLabel&&"Distance"!==e.shapeAnnotationType&&"Perimeter"!==e.measureType){var d=sf.drawings.Point.findAngle(a[0],a[1]),c=this.textElement(e);c.id=sf.drawings.randomId(),!this.pdfViewer.enableImportAnnotationMeasurement&&e.notes&&""!==e.notes?c.content=e.notes:c.content=e.labelContent,c.style.strokeColor=e.labelBorderColor,c.style.fill=e.labelFillColor,c.style.fontSize=e.fontSize,c.style.color=e.fontColor,c.style.fontFamily=e.fontFamily,c.style.opacity=e.labelOpacity,c.rotateValue={y:-10,angle:d},c.style.textWrapping="NoWrap",l.push(c)}a=A(e,a);var u=sf.drawings.Rect.toBounds(a);t.width=u.width,t.height=u.height,t.offsetX=u.x+t.pivot.x*u.width,t.offsetY=u.y+t.pivot.y*u.height;var f=e.vertexPoints;if("Line"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType&&"Distance"!==e.shapeAnnotationType||(n=S(e,a[0],f[1],!0),o=S(e,a[a.length-1],f[f.length-2],!1)),n.id=e.id+"_srcDec",o.id=e.id+"_tarDec",i.style.fill="transparent",t.style.strokeColor="transparent",t.style.fill="transparent",t.style.strokeWidth=0,t.children=[],h(e,i),t.children.push(i),r.length>0)for(s=0;s<r.length;s++)t.children.push(r[s]);if(l.length>0)for(s=0;s<l.length;s++)t.children.push(l[s]);return t.children.push(n),t.children.push(o),t.id=e.id,t.offsetX=i.offsetX,t.offsetY=i.offsetY,t.width=i.width,t.height=i.height,a=y(e),e.wrapper=t,t}function q(e){var t=new _;return this.pdfViewer.zIndex++,t.pageId=this.pdfViewer.zIndex,this.pdfViewer.zIndexTable.push(t),t}function Z(e){var t;if(void 0!==this.pdfViewer.zIndexTable.length){for(var i=!0,n=0;n<this.pdfViewer.zIndexTable.length;n++)if(this.pdfViewer.zIndexTable[n].pageId===e){i=!1,t=this.pdfViewer.zIndexTable[n];break}i&&((t=this.createNewZindexTable(e)).pageId=e)}else t=this.createNewZindexTable(e);return t}function Y(e){if(void 0!==e.pageIndex){var t=this.getPageTable(e.pageIndex);if(-1===e.zIndex)t.zIndex++,e.zIndex=t.zIndex,t.objects.push(e);else{e.zIndex;var i=t.objects.length;e.zIndex=i++,t.objects.push(e)}}}function X(e,t,i,o,s,a,r,l){var d=c(e,o);if(o=o||{scale:1,tx:0,ty:0},l){d.x*=o.scale,d.y*=o.scale,d.width*=o.scale,d.height*=o.scale;h=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType;if(i&&"object"!==n(i)&&""!==i){u=""===(p=JSON.parse(i)).selectionBorderColor?"black":p.selectionBorderColor;d.stroke=u,d.strokeWidth=1===i.selectionBorderThickness?1:p.selectionBorderThickness,(f=0===p.selectorLineDashArray.length?[6,3]:p.selectorLineDashArray).length>2&&(f=[f[0],f[1]]),d.dashArray=f.toString()}else this.getBorderSelector(h,d)}else{d.x*=o.scale,d.y*=o.scale,d.width*=o.scale,d.height*=o.scale,d.fill="transparent";var h=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType;if(i&&"object"!==n(i)&&""!==i){var p,u=""===(p=JSON.parse(i)).selectionBorderColor?"black":p.selectionBorderColor;d.stroke=u,d.strokeWidth=1===i.selectionBorderThickness?1:p.selectionBorderThickness,(f=0===p.selectorLineDashArray.length?[6,3]:p.selectorLineDashArray).length>2&&(f=[f[0],f[1]]),d.dashArray=f.toString()}else if(i&&""!==i&&this.pdfViewer.formDesignerInteraction){var u=""===i.selectionBorderColor?"black":i.selectionBorderColor;d.stroke=u,d.strokeWidth=1===i.selectionBorderThickness?1:i.selectionBorderThickness;var f=sf.base.isNullOrUndefined(i.selectorLineDashArray)||0!==i.selectorLineDashArray.length?i.selectorLineDashArray:[6,3];!sf.base.isNullOrUndefined(f)&&f.length>2&&(f=[f[0],f[1]]),sf.base.isNullOrUndefined(f)||(d.dashArray=f.toString())}else if(!this.pdfViewer.formDesignerInteraction)if("HandWrittenSignature"===h||"SignatureText"===h||"SignatureImage"===h||"Ink"===h){this.pdfViewer.nameTable[e.id.split("_")[0]];var m=this.pdfViewer.viewerBase.checkSignatureFormField(e.id);this.getSignBorder(h,d,m)}else this.getBorderSelector(h,d);d.class="e-pv-diagram-border",r&&(d.class+=" e-diagram-lane"),d.id="borderRect",d.id="borderRect",s||(d.class+=" e-disabled"),a&&(d.class+=" e-thick-border"),d.cornerRadius=0}var g=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(t,d,this.pdfViewer.dataId,void 0,!0,g)}function G(e){var t=this.getAdornerLayerSvg(this.pdfViewer.dataId,e);if(t){var i=t.getElementById(this.pdfViewer.adornerSvgLayer.id+"_selected_region");i&&i.parentNode.removeChild(i),this.clearHighlighter(e);for(var n=this.getSelectorElement(this.pdfViewer.dataId,e).childNodes,o=void 0,s=n.length;s>0;s--)(o=n[s-1]).parentNode.removeChild(o)}}function J(e,t,i,n){if(!i||n){var o=new sf.drawings.Size,s=this.pdfViewer.selectedItems;if(this.clearSelectorLayer(e),s.wrapper){s.wrapper.measure(o);var a=this.pdfViewer.viewerBase.getZoomFactor();s.wrapper.arrange(s.wrapper.desiredSize),s.width=s.wrapper.actualSize.width,s.height=s.wrapper.actualSize.height,s.offsetX=s.wrapper.offsetX,s.offsetY=s.wrapper.offsetY,1===s.annotations.length&&(s.rotateAngle=s.annotations[0].rotateAngle,s.wrapper.rotateAngle=s.annotations[0].rotateAngle);s.wrapper.bounds;var r=void 0;if(s.formFields.length)for(var l=0;l<s.formFields.length;l++){var d=s.formFields[l];if((r=this.getSelectorElement(this.pdfViewer.dataId,e))&&d.pageIndex===e&&this.pdfViewer.formDesignerInteraction&&this.renderResizeHandle(d.wrapper.children[0],r,s.thumbsConstraints,a,void 0,void 0,void 0,!1,!0,null,null,t),d.formFieldAnnotationType&&!this.pdfViewer.viewerBase.isFormFieldSelect&&!this.pdfViewer.viewerBase.isFormFieldMouseDown&&!this.pdfViewer.viewerBase.isFormFieldMouseMove){this.pdfViewer.viewerBase.isFormFieldSelect=!0;var h=s.formFields[l].id,p=this.pdfViewer.formDesignerModule.getFormFieldByID(h);p&&null!==p.pageNumber&&this.pdfViewer.fireFormFieldSelectEvent("FormFieldSelected",p,p.pageNumber,this.pdfViewer.formDesignerModule.isProgrammaticSelection)}}if(s.annotations.length){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&"HandWrittenSignature"===s.annotations[0].type&&this.pdfViewer._dotnetInstance.invokeMethodAsync("MobileAnnotationPropertyUpdate",s.annotations[0].type);for(var c=0;c<s.annotations.length;c++){d=s.annotations[c];if((r=this.getSelectorElement(this.pdfViewer.dataId,e))&&d.pageIndex===e){if("Distance"===d.shapeAnnotationType||"Line"===d.shapeAnnotationType||"LineWidthArrowHead"===d.shapeAnnotationType||"Polygon"===d.shapeAnnotationType)this.renderEndPointHandle(d,r,s.thumbsConstraints,{scale:a,tx:0,ty:0},void 0,void 0,!0,t);else if("StickyNotes"===d.shapeAnnotationType)this.renderResizeHandle(d.wrapper.children[0],r,s.thumbsConstraints,a,void 0,void 0,void 0,!1,!0,null,null,t);else if("Stamp"!==this.pdfViewer.tool){var u="Path"===d.shapeAnnotationType||"SignatureField"===d.formFieldAnnotationType||"InitialField"===d.formFieldAnnotationType;this.renderResizeHandle(d.wrapper.children[0],r,s.thumbsConstraints,a,void 0,void 0,void 0,"Stamp"===d.shapeAnnotationType||"Image"===d.shapeAnnotationType,!1,u,"FreeText"===d.shapeAnnotationType||"HandWrittenSignature"===d.shapeAnnotationType||"SignatureImage"===d.shapeAnnotationType||"SignatureText"===d.shapeAnnotationType,t)}this.pdfViewer.viewerBase.isNewSignatureAdded||("HandWrittenSignature"===d.shapeAnnotationType&&this.pdfViewer.annotationModule.selectSignature(d.signatureName,d.pageIndex,d),"SignatureText"!==d.shapeAnnotationType&&"SignatureImage"!==d.shapeAnnotationType&&"Path"!==d.shapeAnnotationType||this.pdfViewer.annotationModule.selectSignature(d.id,d.pageIndex,d)),""!==d.annotName&&i&&d===i&&!d.formFieldAnnotationType&&(this.pdfViewer.viewerBase.isAddComment||this.pdfViewer.viewerBase.isAnnotationSelect||this.pdfViewer.viewerBase.isAnnotationMouseDown||this.pdfViewer.viewerBase.isAnnotationMouseMove||this.pdfViewer.viewerBase.isInkAdded||this.pdfViewer.viewerBase.isNewStamp||this.pdfViewer.viewerBase.isNewSticky||(this.pdfViewer.viewerBase.isAnnotationSelect=!0,this.pdfViewer.annotationModule.annotationSelect(d.annotName,d.pageIndex,d)),"StickyNotes"===d.shapeAnnotationType&&this.pdfViewer.viewerBase.isNewSticky&&(this.pdfViewer.viewerBase.isNewSticky=!1))}}}}}}function K(e,t,i,n,o,s,a,r,l,d,h,p,u,f){var m=t,g={x:i,y:n};if(r=r||{scale:1,tx:0,ty:0},0!==m.rotateAngle||0!==m.parentTransform){var w=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(w,m.rotateAngle+m.parentTransform,m.offsetX,m.offsetY),g=sf.drawings.transformPointByMatrix(w,g)}var y,v=c(m);y=this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0].measureType?this.pdfViewer.selectedItems.annotations[0].measureType:this.pdfViewer.selectedItems.formFields.length>0?this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType:this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType,this.getResizerColors(y,v,f,r),this.getShapeSize(y,v,f,r),v.strokeWidth=1,void 0!==p&&(v.id="segmentEnd_"+p),v.centerX=(g.x+r.tx)*r.scale,v.centerY=(g.y+r.ty)*r.scale,v.angle=0,v.id=e,v.visible=s,v.class=u,v.opacity=1,l&&(v.class+=" e-connected"),d&&(v.visible=!1),v.x=g.x*r.scale-v.width/2,v.y=g.y*r.scale-v.height/2;var b=this.getParentSvg(t,"selector");"Square"===this.getShape(y,f)?this.svgRenderer.drawRectangle(o,v,e,void 0,!0,b):"Circle"===this.getShape(y,f)&&this.svgRenderer.drawCircle(o,v,1)}function Q(e){var t=this.getAdornerLayerSvg(this.pdfViewer.dataId+e+"_diagramAdornerLayer",e);if(t){var i=t.getElementById(t.id+"_highlighter");i&&i.parentNode.removeChild(i)}}function $(e,t,i,n,o,s){e=e||{tx:0,ty:0,scale:1};var a,r=t.sourcePoint,l=t.targetPoint,d=t.wrapper;for(a=0;a<t.vertexPoints.length;a++){var h=t.vertexPoints[a];this.renderCircularHandle("segementThumb_"+(a+1),d,h.x,h.y,i,!0,n&sf.drawings.ThumbsConstraints.ConnectorSource,e,o,null,null,a,"e-pv-diagram-resize-handle",s)}var p=0;if("Distance"===t.shapeAnnotationType)for(a=0;a<t.wrapper.children.length;a++){h=t.wrapper.children[a];var c=void 0,u=sf.drawings.Point.findAngle(t.sourcePoint,t.targetPoint);if(h.id.indexOf("leader")>-1){var f=t.wrapper.children[0].bounds.center;0===p?(c={x:t.sourcePoint.x,y:t.sourcePoint.y-t.leaderHeight},f=r):(c={x:t.targetPoint.x,y:t.targetPoint.y-t.leaderHeight},f=l);var m=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(m,u,f.x,f.y);var g=sf.drawings.transformPointByMatrix(m,{x:c.x,y:c.y});this.renderCircularHandle("leaderThumb_"+(a+1),d,g.x,g.y,i,!0,n&sf.drawings.ThumbsConstraints.ConnectorSource,e,o,null,null,a,"e-pv-diagram-resize-handle",s),p++}}return e}function ee(e,t){var i=null,n=sf.drawings.getDiagramElement(e+t+"_diagramAdornerLayer");return sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&n&&(n.style.zIndex="10"),n&&(i=n.getElementsByClassName("e-adorner-layer"+t)[0]),i}function te(e,t,i){return e&&e.id&&t&&"selector"===t?this.pdfViewer.adornerSvgLayer:i}function ie(e,t){var i=null,n=this.getAdornerLayerSvg(e,t);return n&&(i=n.getElementById(e+"_SelectorElement")),i}function ne(e,t,i,n,o,s){e=e||{};var a=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(a,t,e.x,e.y);for(var r=0,l=i;r<l.length;r++){var d=l[r];if(d instanceof U){if(!1!==n||o!==d){d.rotateAngle+=t,d.rotateAngle=(d.rotateAngle+360)%360;var h=sf.drawings.transformPointByMatrix(a,{x:d.wrapper.offsetX,y:d.wrapper.offsetY});d.wrapper.offsetX=h.x,d.wrapper.offsetY=h.y,this.nodePropertyChange(d,{rotateAngle:d.rotateAngle})}this.renderSelector(d.pageIndex,s)}}return e}function oe(e,t,i){if(e||(e=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+t)),e){var n=this.pdfViewer.viewerBase.getZoomFactor(),o=e.width/n,s=e.height/n,a=e.getContext("2d");a.lineCap="round",a.lineJoin="round",n<1&&(a.lineWidth=a.lineWidth/n);var r=n*this.pdfViewer.viewerBase.getWindowDevicePixelRatio();!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&n<=.7?a.setTransform(r,0,0,r,0,0):a.setTransform(n,0,0,n,0,0),a.clearRect(0,0,o,s);var l=this.getPageObjects(t);if(l.length>1)for(var d=0;d<l.length-1;d++)for(var h=d+1;h<l.length;h++){var p="SignatureField"===l[d].annotName;(l[h].annotName&&l[d].annotName&&l[h].annotName===l[d].annotName&&"diagram_helper"!==l[h].id&&"HandWrittenSignature"!==l[d].shapeAnnotationType&&!p||p&&l[d].id===l[h].id)&&l.splice(d,1)}for(d=0;d<l.length;d++){var c=void 0,u=l[d].shapeAnnotationType;e.id===this.pdfViewer.dataId+"_print_annotation_layer_"+t?l[d].isPrint&&this.isPrintRenderAnnotationVisible(l[d],!0)&&(c=this.pdfViewer.nameTable[l[d].id].wrapper,sf.base.isNullOrUndefined(c)||sf.drawings.refreshDiagramElements(e,[c],this.renderer,this.annotationCallback.bind(this),u)):this.isPrintRenderAnnotationVisible(l[d],!1)&&(c=this.pdfViewer.nameTable[l[d].id].wrapper,sf.drawings.refreshDiagramElements(e,[c],this.renderer,this.annotationCallback.bind(this),u))}}}function se(e){if(this.pdfViewer.annotations.length>0)for(var t=0;t<this.pdfViewer.annotations.length;t++)if(this.pdfViewer.annotations[t].id===e)return!0;return!1}function ae(e,t){var i=void 0;if(this.pdfViewer.enableFormDesigner&&e.id){var n=e.id.split("_content")[0];if(i=this.pdfViewer.nameTable[n],t&&i&&("Hidden"===i.visibility||"VisibleNotPrintable"===i.visibility))return!1;if(!t&&i&&("Hidden"===i.visibility||"HiddenPrintable"===i.visibility))return!1}return!0}function re(e,t,i,o){if(i&&"object"!==n(i)&&""!==i){var s=JSON.parse(i);t.radius=(sf.base.isNullOrUndefined(s.resizerSize)||8===s.resizerSize?8:s.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(s.resizerSize)||8===s.resizerSize?8:s.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(s.resizerSize)||8===s.resizerSize?8:s.resizerSize)*o.scale}else{s=this.pdfViewer.annotationSelectorSettings;t.radius=(sf.base.isNullOrUndefined(s.resizerSize)||8===s.resizerSize?8:s.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(s.resizerSize)||8===s.resizerSize?8:s.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(s.resizerSize)||8===s.resizerSize?8:s.resizerSize)*o.scale,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerSize)*o.scale):"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerSize)*o.scale):"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerSize)*o.scale):"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerSize)*o.scale):"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerSize)*o.scale):"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerSize)*o.scale):"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerSize)*o.scale):"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerSize)*o.scale):"Image"===e&&this.pdfViewer.customStampSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerSize)*o.scale):"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerSize)*o.scale):"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerSize)*o.scale):"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerSize)*o.scale):"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerSize)*o.scale):"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerSize)*o.scale):(t.radius=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)/2,t.width=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*o.scale,t.height=(sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)||8===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize?8:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerSize)*o.scale)}}function le(e,t,i,o){if(i&&"object"!==n(i)&&""!==i){var s=JSON.parse(i);t.stroke=sf.base.isNullOrUndefined(s.resizerBorderColor)||"black"===s.resizerBorderColor?"black":s.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(s.resizerFillColor)||"#FF4081"===s.resizerFillColor?"#FF4081":s.resizerFillColor}else{s=this.pdfViewer.annotationSelectorSettings;t.stroke=sf.base.isNullOrUndefined(s.resizerBorderColor)||"black"===s.resizerBorderColor?"black":s.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(s.resizerFillColor)||"#FF4081"===s.resizerFillColor?"#FF4081":s.resizerFillColor,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerFillColor):"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerFillColor):"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerFillColor):"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerFillColor):"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerFillColor):"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerFillColor):"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerFillColor):"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerFillColor):"Image"===e&&this.pdfViewer.customStampSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerFillColor):"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerFillColor):"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerFillColor):"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerFillColor):"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerFillColor):"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerFillColor):(t.stroke=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor)||"black"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor?"black":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerBorderColor,t.fill=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)||"#FF4081"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor?"#FF4081":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerFillColor)}}function de(e,t){var i=this.pdfViewer.annotationSelectorSettings,n=sf.base.isNullOrUndefined(i.selectionBorderColor)||""===i.selectionBorderColor?"black":i.selectionBorderColor;t.stroke=n,t.strokeWidth=sf.base.isNullOrUndefined(i.selectionBorderThickness)||1===i.selectionBorderThickness?1:i.selectionBorderThickness;var o=sf.base.isNullOrUndefined(i.selectorLineDashArray)||0===i.selectorLineDashArray.length?[6,3]:i.selectorLineDashArray;if(o.length>2&&(o=[o[0],o[1]]),t.dashArray=o.toString(),"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings){var s=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=s;var a=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var r=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;r.length>2&&(r=[r[0],r[1]]),t.dashArray=r.toString()}else if("Textbox"!==e&&"CheckBox"!==e&&"RadioButton"!==e&&"SignatureField"!==e&&"InitialField"!==e&&"DropDown"!==e&&"ListBox"!==e&&"Password"!==e&&"Button"!==e||!this.pdfViewer.rectangleSettings.annotationSelectorSettings){if("Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings){var l=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=l;a=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.circleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var d=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.circleSettings.annotationSelectorSettings.selectorLineDashArray;d.length>2&&(d=[d[0],d[1]]),t.dashArray=d.toString()}else if("Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings){var h=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=h;a=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var p=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.radiusSettings.annotationSelectorSettings.selectorLineDashArray;p.length>2&&(p=[p[0],p[1]]),t.dashArray=p.toString()}else if("FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings){var c=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=c;a=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var u=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.freeTextSettings.annotationSelectorSettings.selectorLineDashArray;u.length>2&&(u=[u[0],u[1]]),t.dashArray=u.toString()}else if("StickyNotes"===e&&this.pdfViewer.stickyNotesSettings.annotationSelectorSettings){var f=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=f;a=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var m=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray.length?[6,3]:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings.selectorLineDashArray;m.length>2&&(m=[m[0],m[1]]),t.dashArray=m.toString()}else if("Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings){var g=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=g;a=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.stampSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var w=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.stampSettings.annotationSelectorSettings.selectorLineDashArray;w.length>2&&(w=[w[0],w[1]]),t.dashArray=w.toString()}else if("Image"===e&&this.pdfViewer.customStampSettings.annotationSelectorSettings){var y=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=y;a=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.customStampSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var v=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.customStampSettings.annotationSelectorSettings.selectorLineDashArray;v.length>2&&(v=[v[0],v[1]]),t.dashArray=v.toString()}}else{var b=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor?"black":this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=b;var a=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a;var S=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.rectangleSettings.annotationSelectorSettings.selectorLineDashArray;S.length>2&&(S=[S[0],S[1]]),t.dashArray=S.toString()}}function he(e,t,i){if(i||"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)if("Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings){o=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=o;a=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a,(s=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.selectorLineDashArray).length>2&&(s=[s[0],s[1]]),t.dashArray=s.toString()}else{var n=this.pdfViewer.annotationSelectorSettings;o=""===n.selectionBorderColor?"black":n.selectionBorderColor;t.stroke=o,t.strokeWidth=1===n.selectionBorderThickness?1:n.selectionBorderThickness,(s=0===n.selectorLineDashArray.length?[6,3]:n.selectorLineDashArray).length>2&&(s=[s[0],s[1]]),t.dashArray=s.toString()}else{var o=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor)||""===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor?"#0000ff":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderColor;t.stroke=o;var s,a=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness)?1:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectionBorderThickness;t.strokeWidth=a,(s=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray)||0===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray.length?[4]:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.selectorLineDashArray).length>2&&(s=[s[0],s[1]]),t.dashArray=s.toString()}}function pe(e){var t=e.annotations;if(t)for(var i=0;i<t.length;i++){var n=t[i];this.initObject(n)}}function ce(e,t,i,n,o,s,a,r,l,d,h,p){var c=e.offsetX-e.actualSize.width*e.pivot.x,u=e.offsetY-e.actualSize.height*e.pivot.y,f=e.actualSize.height,m=e.actualSize.width,g={scale:n,tx:0,ty:0};r&&(this.renderPivotLine(e,t,g),this.renderRotateThumb(e,t,g)),h&&(r=!0),this.renderBorder(e,t,p,g,s,a,!0,l);var w=e.actualSize.width*n,y=e.actualSize.height*n,v=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType:this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType,b=!1,S=this.pdfViewer.selectedItems.annotations[0];if(!sf.base.isNullOrUndefined(S)){var A=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(S);((S.annotationSettings?S.annotationSettings.isLock:this.pdfViewer.annotationModule.checkIsLockSettings(S))||S.isLocked)&&this.getAllowedInteractions(A)&&(b=!0)}var x=this.getResizerLocation(v,p);(x<1||x>3)&&(x=3);var V=!1;!S||"Ellipse"!==S.shapeAnnotationType&&"Radius"!==S.shapeAnnotationType&&"Rectangle"!==S.shapeAnnotationType&&"Ink"!==S.shapeAnnotationType||(V=!0),this.pdfViewer.viewerBase.checkSignatureFormField(e.id)||a||l||d||b||((r||V&&w>=40&&y>=40&&(1===x||3===x))&&(this.renderCircularHandle("resizeNorthWest",e,c,u,t,!0,i&sf.drawings.ThumbsConstraints.ResizeNorthWest,g,void 0,o,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-pv-diagram-resize-handle e-northwest",p),this.renderCircularHandle("resizeNorthEast",e,c+m,u,t,!0,i&sf.drawings.ThumbsConstraints.ResizeNorthEast,g,void 0,o,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-pv-diagram-resize-handle e-northeast",p),this.renderCircularHandle("resizeSouthWest",e,c,u+f,t,!0,i&sf.drawings.ThumbsConstraints.ResizeSouthWest,g,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-pv-diagram-resize-handle e-southwest",p),this.renderCircularHandle("resizeSouthEast",e,c+m,u+f,t,!0,i&sf.drawings.ThumbsConstraints.ResizeSouthEast,g,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-pv-diagram-resize-handle e-southeast",p)),(r||V)&&(!V||2!==x&&3!==x&&(w>=40&&y>=40||1!==x))||(this.renderCircularHandle("resizeNorth",e,c+m/2,u,t,!0,i&sf.drawings.ThumbsConstraints.ResizeNorth,g,void 0,o,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-pv-diagram-resize-handle e-north",p),this.renderCircularHandle("resizeSouth",e,c+m/2,u+f,t,!0,i&sf.drawings.ThumbsConstraints.ResizeSouth,g,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-pv-diagram-resize-handle e-south",p),this.renderCircularHandle("resizeWest",e,c,u+f/2,t,!0,i&sf.drawings.ThumbsConstraints.ResizeWest,g,void 0,o,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-pv-diagram-resize-handle e-west",p),this.renderCircularHandle("resizeEast",e,c+m,u+f/2,t,!0,i&sf.drawings.ThumbsConstraints.ResizeEast,g,void 0,o,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-pv-diagram-resize-handle e-east",p))),"Textbox"!==v&&"CheckBox"!==v&&"RadioButton"!==v&&"SignatureField"!==v&&"InitialField"!==v&&"DropDown"!==v&&"ListBox"!==v&&"Password"!==v&&"Button"!==v||(this.renderCircularHandle("resizeNorth",e,c+m/2,u,t,!0,i&sf.drawings.ThumbsConstraints.ResizeNorth,g,void 0,o,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-pv-diagram-resize-handle e-north",p),this.renderCircularHandle("resizeSouth",e,c+m/2,u+f,t,!0,i&sf.drawings.ThumbsConstraints.ResizeSouth,g,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-pv-diagram-resize-handle e-south",p),this.renderCircularHandle("resizeWest",e,c,u+f/2,t,!0,i&sf.drawings.ThumbsConstraints.ResizeWest,g,void 0,o,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-pv-diagram-resize-handle e-west",p),this.renderCircularHandle("resizeEast",e,c+m,u+f/2,t,!0,i&sf.drawings.ThumbsConstraints.ResizeEast,g,void 0,o,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-pv-diagram-resize-handle e-east",p))}function ue(e,t,i,n,o){var s=e,a=!0;o&&(a=!1);var r=c(s,i);r.fill="None",r.stroke="black",r.strokeWidth=1,r.dashArray="2,3",r.visible=a;var l=i.scale;r.x*=l,r.y*=l,r.width*=l,r.height*=l,r.id="pivotLine",r.class="e-diagram-pivot-line";var d={x:s.actualSize.width*s.pivot.x*l,y:-20},h={x:s.actualSize.width*s.pivot.x*l,y:0};r.startPoint=d,r.endPoint=h,this.svgRenderer.drawLine(t,r)}function fe(e,t,i){for(var n,o,s,a,r=this.pdfViewer.viewerBase.getZoomFactor(),l=0;l<e.vertexPoints.length;l++)if(t)if(0===l){var d=t.getBoundingClientRect();n=e.vertexPoints[l].x,o=e.vertexPoints[l].y,e.vertexPoints[l].x=(i.clientX-d.left)/r,e.vertexPoints[l].y=(i.clientY-d.top)/r,s=e.vertexPoints[l].x,a=e.vertexPoints[l].y}else e.vertexPoints[l].x+=s-n,e.vertexPoints[l].y+=a-o}function me(e,t,i,n,o,s){var a=n?void 0:this.pdfViewer.selectedItems.wrapper.bounds,r=n,l=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+i),d=10;if(l){var h=l.clientWidth/this.pdfViewer.viewerBase.getZoomFactor(),p=l.clientHeight/this.pdfViewer.viewerBase.getZoomFactor(),c=(n?r.right:a.right)+(e||0),u=(n?r.left:a.left)+(e||0),f=(n?r.top:a.top)+(t||0),m=(n?r.bottom:a.bottom)+(t||0);if(o&&(d=50,this.pdfViewer.viewerBase.eventArgs&&this.pdfViewer.viewerBase.eventArgs.source&&this.RestrictStamp(this.pdfViewer.viewerBase.eventArgs.source)))return!1;if(c<=h-10&&u>=10&&m<=p-10&&f>=d)return!0;if(s&&(d=10,c<=h-10&&u>=10&&m<=p-10&&f>=d))return!0}return!1}function ge(e){return!(!e||void 0===e.pageIndex||!this.pdfViewer.viewerBase.activeElements||e.pageIndex===this.pdfViewer.viewerBase.activeElements.activePageID)}function we(e,t,i,n){if(i&&t.activeElements.activePageID>-1){var o=ye(t,i,e),s=function(e,t,i,n){var o,s,a,r=null;if(t&&t.type&&-1!==t.type.indexOf("touch")){if(o=t,n.annotation){var l=i.getElement("_pageDiv_"+n.annotation.getEventPageNumber(t));if(l){var d=l.getBoundingClientRect();s=o.changedTouches[0].clientX-d.left,a=o.changedTouches[0].clientY-d.top}}}else if(t&&t.target&&t.path&&t.target.parentElement&&t.target.parentElement.classList.contains("foreign-object")){var h=t.path[4].getBoundingClientRect();s=t.clientX-h.left,a=t.clientY-h.top}else if(t.target&&t.target.parentElement&&t.target.parentElement.classList.contains("foreign-object")){h=t.target.offsetParent.offsetParent.offsetParent.getBoundingClientRect();s=t.clientX-h.left,a=t.clientY-h.top}else if(t.target&&t.target.parentElement&&t.target.parentElement.parentElement&&t.target.parentElement.parentElement.classList.contains("foreign-object")){h=void 0;t.target.offsetParent&&t.target.offsetParent.offsetParent&&t.target.offsetParent.offsetParent.offsetParent&&t.target.offsetParent.offsetParent.offsetParent.offsetParent?h=t.target.offsetParent.offsetParent.offsetParent.offsetParent.getBoundingClientRect():t.target.parentElement.offsetParent&&t.target.parentElement.offsetParent.offsetParent&&(h=t.target.parentElement.offsetParent.offsetParent.getBoundingClientRect()),sf.base.isNullOrUndefined(h)||(s=t.clientX-h.left,a=t.clientY-h.top)}else s=isNaN(t.offsetX)?t.position?t.position.x:0:t.offsetX,a=isNaN(t.offsetY)?t.position?t.position.y:0:t.offsetY;for(var p=n.touchPadding/2,c=0,u=0;u<e.length;u++)if("Distance"===e[u].shapeAnnotationType||"Line"===e[u].shapeAnnotationType||"LineWidthArrowHead"===e[u].shapeAnnotationType||i.tool instanceof Rr){var f={x:s/i.getZoomFactor(),y:a/i.getZoomFactor()},m=Se(e[u],f,p),g=T(e[u],f);if(m&&!g){var w=be(e[u],m);if(w){var y=sf.drawings.Rect.toBounds([w,w]);y.Inflate(10),y.containsPoint(f)&&(g=!0)}}m&&g&&(r=e[u])}else{var v=e[u].wrapper.bounds,b=0;if("Stamp"!==e[u].shapeAnnotationType&&"Image"!==e[u].shapeAnnotationType||(b=25/i.getZoomFactor(),p=25/i.getZoomFactor()),(v.x-p)*i.getZoomFactor()<s&&(v.x+v.width+p)*i.getZoomFactor()>s&&(v.y-p-b)*i.getZoomFactor()<a&&(v.y+v.height+p)*i.getZoomFactor()>a)if(i.tool instanceof Lr||i.tool instanceof Pr)r=e[u];else if(c){var S=s-(v.x-p)*i.getZoomFactor()+((v.x+v.width+p)*i.getZoomFactor()-s)+(a-(v.y-p-b)*i.getZoomFactor())+((v.y+v.height+p)*i.getZoomFactor()-a);(c>S||c===S)&&(ve(e[u],n,r)&&(r=e[u]),c=S);var A=i.pdfViewer,x=e[u];A.enableFormDesigner&&A.formDesignerInteraction&&("InitialField"===x.formFieldAnnotationType||"SignatureField"===x.formFieldAnnotationType)&&(r=x)}else r=e[u],c=s-(v.x-p)*i.getZoomFactor()+((v.x+v.width+p)*i.getZoomFactor()-s)+(a-(v.y-p-b)*i.getZoomFactor())+((v.y+v.height+p)*i.getZoomFactor()-a)}return r}(o,e,t,i);return n?o:s}}function ye(e,t,i){var n=e.currentPosition||{x:i.offsetX,y:i.offsetY};return function(e,t,i,n){for(var o=[],s=0,a=t;s<a.length;s++){var r=a[s];(Se(r,e,n)||"Stamp"===r.shapeAnnotationType||"Image"===r.shapeAnnotationType&&Se(r,e,28/i.getZoomFactor()))&&Ae(r,"zIndex",o)}return o}(n={x:n.x/e.getZoomFactor(),y:n.y/e.getZoomFactor()},t.getPageTable(e.activeElements.activePageID).objects,e,t.touchPadding)}function ve(e,t,i){return!i||i.id+"_content"!==e.id||!t.formDesignerInteraction}function be(e,t){var i=e.sourcePoint,n=e.targetPoint;if("Distance"===e.shapeAnnotationType){var o=t,s=void 0,a=sf.drawings.Point.findAngle(e.sourcePoint,e.targetPoint);if(o.id.indexOf("leader")>-1){var r=e.wrapper.children[0].bounds.center;o.id.indexOf("leader1")>-1?(s={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},r=i):(s={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},r=n);var l=sf.drawings.identityMatrix();return sf.drawings.rotateMatrix(l,a,r.x,r.y),sf.drawings.transformPointByMatrix(l,{x:s.x,y:s.y})}}}function Se(e,t,i){return function(e,t,i){if(e&&e.children)for(var n=e.children.length-1;n>=0;n--){var o=e.children[n];if(!sf.base.isNullOrUndefined(o.children)&&o.children.length>0)for(var s=o.children.length-1;s>=0;s--){var a=o.children[s];if(a&&a.bounds.containsPoint(t,i)){if(a instanceof sf.drawings.Container)if(r=this.findTargetElement(a,t))return r;if(a.bounds.containsPoint(t,i))return a}}else if(o&&o.bounds.containsPoint(t,i)){var r;if(o instanceof sf.drawings.Container)if(r=this.findTargetElement(o,t))return r;if(o.bounds.containsPoint(t,i))return o}}if(e&&e.bounds.containsPoint(t,i)&&"none"!==e.style.fill){var l=e,d=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(d,l.parentTransform,l.offsetX,l.offsetY);var h=l.offsetX-l.pivot.x*l.actualSize.width,p=l.offsetY-l.pivot.y*l.actualSize.height,c={x:h+(.5===l.pivot.x?2*l.pivot.x:l.pivot.x)*l.actualSize.width/2,y:p-30};if(c=sf.drawings.transformPointByMatrix(d,c),sf.drawings.contains(t,c,10))return e}return null}(e.wrapper,t,i)}function Ae(e,t,i){if(0===i.length)i.push(e);else if(1===i.length)i[0][""+t]>e[""+t]?i.splice(0,0,e):i.push(e);else if(i.length>1){for(var n=0,o=i.length-1,s=Math.floor((n+o)/2);s!==n;)if(i[s][""+t]<e[""+t])n=s,s=Math.floor((n+o)/2);else{if(!(i[s][""+t]>e[""+t]))break;o=s,s=Math.floor((n+o)/2)}i[o][""+t]<e[""+t]?i.push(e):i[n][""+t]>e[""+t]?i.splice(n,0,e):i[n][""+t]<e[""+t]&&i[o][""+t]>e[""+t]&&i.splice(o,0,e)}}var xe=function(){function e(){this.activePage=void 0,this.activePageID=void 0}return Object.defineProperty(e.prototype,"activePageID",{get:function(){return this.activePage},set:function(e){this.activePage=e},enumerable:!1,configurable:!0}),e}(),Ve=function(){function e(e,t){var i=this;this.thumbnailWidthMin=200,this.contentContainerScrollWidth=33,this.closeButtonLeft=170,this.isTooltipCreated=!1,this.isThumbnail=!1,this.annotationContextMenu=[],this.isCommentPanelShow=!1,this.commentPanelWidthMin=300,this.isTostCreated=!1,this.isNavigationToolbarVisible=!1,this.isBookmarkListOpen=!1,this.isNavigationPaneResized=!1,this.isBookmarkOpen=!1,this.isThumbnailOpen=!1,this.restrictUpdateZoomValue=!0,this.loadImportAnnotation=function(e){var t=e.target.files,n=i;if(null!==e.target.files[0]){var o=t[0];if(o){i.pdfViewer.fireImportStart(o);var s=o.type;if(o.name.split(".json").length>1&&s.includes("json"))(a=new FileReader).readAsDataURL(o),a.onload=function(e){if(e.currentTarget.result){var t=e.currentTarget.result.split(",")[1],i=atob(t);if(i){var o=JSON.parse(i),s=o.pdfAnnotation[Object.keys(o.pdfAnnotation)[0]];if(Object.keys(o.pdfAnnotation).length>=1&&(s.textMarkupAnnotation||s.measureShapeAnnotation||s.freeTextAnnotation||s.stampAnnotations||s.signatureInkAnnotation||s.shapeAnnotation&&s.shapeAnnotation[0].Bounds))n.pdfViewerBase.isPDFViewerJson=!0,n.pdfViewerBase.importAnnotations(o,_t.Json);else if(n.pdfViewerBase.isPDFViewerJson=!1,n.pdfViewer.enableChunkMessages){var a=n.pdfViewer.jsonObjectToGetBlobInfo(o);null!==a?n.pdfViewer._dotnetInstance.invokeMethodAsync("ImportAnnotationByteArray",null,a).then((function(){n.pdfViewerBase.importAnnotations("Import annotation as byte array",_t.Json)})).catch((function(e){throw console.error("Unhandled Exception:",e),e})):n.pdfViewer._dotnetInstance.invokeMethodAsync("ImportAnnotationByteArray",Uint8Array.from(atob(t),(function(e){return e.charCodeAt(0)})),null).then((function(){n.pdfViewerBase.importAnnotations("Import annotation as byte array",_t.Json)})).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}else n.pdfViewer._dotnetInstance.invokeMethodAsync("ImportAnnotationByteArray",Uint8Array.from(atob(t),(function(e){return e.charCodeAt(0)})),null).then((function(){n.pdfViewerBase.importAnnotations("Import annotation as byte array",_t.Json)})).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}}};else if(o.name.split(".xfdf").length>1&&(s.includes("xfdf")||e.target.accept.includes("xfdf"))){var a;(a=new FileReader).readAsArrayBuffer(o),a.onload=function(e){if(e.currentTarget.result){var t=new Uint8Array(e.currentTarget.result);t&&(n.pdfViewer.enableChunkMessages?n.pdfViewer._dotnetInstance.invokeMethodAsync("ImportAnnotationByteArray",null,n.pdfViewer.getBlobInfo(t)).then((function(){n.pdfViewerBase.importAnnotations("Import annotation as byte array",_t.Xfdf,!0)})).catch((function(e){throw console.error("Unhandled Exception:",e),e})):n.pdfViewer._dotnetInstance.invokeMethodAsync("ImportAnnotationByteArray",t,null).then((function(){n.pdfViewerBase.importAnnotations("Import annotation as byte array",_t.Xfdf,!0)})).catch((function(e){throw console.error("Unhandled Exception:",e),e})))}}}else{i.pdfViewer.fireImportFailed(o,i.pdfViewer.localeObj.getConstant("Import Failed")),i.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ImportFailed").then((function(e){i.pdfViewerBase.openImportExportNotificationPopup(e)})).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}}}},this.resizeIconMouseOver=function(e){e.srcElement.style.cursor="e-resize"},this.resizePanelMouseDown=function(e){var t=null;(t=i).offset=[t.sideBarResizer.offsetLeft-e.clientX,t.sideBarResizer.offsetTop-e.clientY,t.sideBarResizer.offsetParent.clientWidth],i.previousX=e.clientX,t.isDown=!0,t.isNavigationPaneResized=!0,t.pdfViewerBase.viewerContainer.style.cursor="e-resize",t.sideBarContentContainer&&(t.sideBarContentContainer.style.cursor="e-resize")},this.resizeViewerMouseLeave=function(e){var t=null;(t=i).isDown=!1,t.isNavigationPaneResized&&t.sideBarContentContainer&&(t.pdfViewerBase.viewerContainer.style.cursor="default",t.sideBarContentContainer.style.cursor="default",t.isNavigationPaneResized=!1),t.commentPanelContainer&&t.isCommentPanelShow&&(i.commentPanelMouseLeave(e),t.isCommentPanelShow=!1)},this.resizePanelMouseMove=function(e){var t=null;if(t=i,!i.pdfViewerBase.getPopupNoteVisibleStatus()){var n=e.target;if(i.pdfViewerBase.skipPreventDefault(n)&&e.preventDefault(),t.isDown&&i.sideBarContentContainer){var o,s;if(i.pdfViewer.enableRtl)(o=i.previousX-e.clientX+t.offset[2])>(s=Math.floor(i.outerContainerWidth/2))&&(o=s),o<i.thumbnailWidthMin&&(o=i.thumbnailWidthMin),t.sideBarResizer.style.right=o+"px",t.sideBarContentContainer.style.width=o+"px",t.sideBarContent.style.width=o+"px",t.sideBarContentSplitter.style.width=o+"px",t.sideBarTitleContainer.style.width=o+"px",t.pdfViewerBase.viewerContainer.style.right=t.getViewerContainerLeft()+"px",t.pdfViewerBase.viewerContainer.style.left=t.getViewerContainerRight()+"px";else(o=e.clientX+t.offset[0])>(s=Math.floor(i.outerContainerWidth/2))&&(o=s),o<i.thumbnailWidthMin&&(o=i.thumbnailWidthMin),t.sideBarResizer.style.left=o+"px",t.closeDiv.style.left=o-t.contentContainerScrollWidth+"px",t.sideBarContentContainer.style.width=o+"px",t.sideBarContent.style.width=o+"px",t.sideBarContentSplitter.style.width=o+"px",t.sideBarTitleContainer.style.width=o+"px",t.pdfViewerBase.viewerContainer.style.left=t.getViewerContainerLeft()+"px",t.pdfViewerBase.viewerContainer.style.right=t.getViewerContainerRight()+"px",t.pdfViewerBase.isSidebarResized=!0,setTimeout((function(){t.pdfViewerBase.updateViewerContainer()}),300);t.pdfViewer._dotnetInstance.invokeMethodAsync("ResizeTreeView").catch((function(e){throw console.error("Unhandled Exception:",e),e}));var a=t.pdfViewer.element.clientWidth-t.getViewerContainerLeft()-t.getViewerContainerRight();t.pdfViewerBase.viewerContainer.style.width=a+"px",t.pdfViewerBase.pageContainer.style.width=t.pdfViewerBase.viewerContainer.clientWidth+"px",t.pdfViewer.thumbnailViewModule.gotoThumbnailImage(t.pdfViewerBase.currentPageNumber-1),t.pdfViewer.thumbnailViewModule.renderViewPortThumbnailImage(),t.pdfViewerBase.updateZoomValue(),t.bookmarkButton.children[0].classList.contains("e-pv-bookmark-disable-icon")||t.pdfViewer.bookmarkViewModule.setBookmarkContentHeight()}else t.isCommentPanelShow&&i.commentPanelContainer&&i.updateCommentPanelContainer(e)}},this.sideToolbarOnClose=function(e){var t=null;(t=i).removeThumbnailSelectionIconTheme(),t.removeBookmarkSelectionIconTheme(),t.updateViewerContainerOnClose()},this.sideToolbarOnClick=function(e){i.pdfViewer&&i.pdfViewer.cultureValue&&i.pdfViewer.cultureValue.ThumbnailContent?i.sideBarTitle.textContent=i.pdfViewer.cultureValue.ThumbnailContent:i.sideBarTitle.textContent=i.pdfViewer.localeObj.getConstant("Page Thumbnails"),i.sideBarContent.setAttribute("aria-label","Thumbnail View Panel");var t=null;t=i;var n=i.pdfViewer.element.querySelector(".e-pv-bookmark-view");n&&(t.removeBookmarkSelectionIconTheme(),n.style.display="none");var o=document.getElementById(i.pdfViewer.dataId+"_thumbnail_image_"+(i.pdfViewer.currentPageNumber-1).toString()),s=document.querySelector(".e-pv-thumbnail-selection")||document.querySelector(".e-pv-thumbnail-focus");document.getElementById(i.pdfViewer.dataId+"_thumbnail_view").style.display="flex",t.sideBarContentContainer&&("none"!==t.sideBarContentContainer.style.display?t.isBookmarkOpen?(t.isThumbnailOpen=!0,t.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand(),"mouse"!==e.pointerType&&o.focus()):(t.isThumbnailOpen=!1,t.removeThumbnailSelectionIconTheme(),t.pdfViewerBase.removeThumbnailPageSelectionTheme(s),i.updateViewerContainerOnClose()):("mouse"===e.pointerType&&i.sideBarContent.focus(),t.isThumbnailOpen=!0,t.pdfViewerBase.removeThumbnailPageSelectionTheme(s),t.setThumbnailSelectionIconTheme(),i.updateViewerContainerOnExpand(),"mouse"!==e.pointerType&&o instanceof HTMLElement&&o.focus())),t.isBookmarkOpen=!1,i.ClearAllAnnotations()},this.openThumbnailPane=function(e){var t=null;t=i;var n=document.getElementById(i.pdfViewer.dataId+"_sideBarContent"),o=document.getElementById(i.pdfViewer.dataId+"_sideBarContentContainer"),s=document.getElementById(i.pdfViewer.dataId+"_viewerContainer"),a=document.getElementById(i.pdfViewer.dataId+"_pageViewContainer");if(document.getElementById(i.pdfViewer.dataId+"_thumbnail_view").style.display="block",document.getElementById(i.pdfViewer.dataId+"_sideBarResizer").style.display="none",document.getElementById(i.pdfViewer.dataId+"_sideBarTitleContainer").style.display="none",document.getElementById(i.pdfViewer.dataId+"_sideBarContentSplitter").style.display="none",n.classList.add("e-thumbnail"),e?i.adjustSideBar(o):o.classList.add("e-thumbnail"),o&&(t.isThumbnail?(o.style.display="none",s.style.width=t.pdfViewer.element.clientWidth+"px",a.style.width=s.clientWidth+"px",s.style.left=o.clientWidth+"px",t.pdfViewerBase.updateZoomValue(),t.isThumbnail=!1):(n.focus(),o.style.display="block",s.style.width=t.pdfViewer.element.clientWidth-o.clientWidth+"px",a.style.width=s.clientWidth+"px",s.style.left=o.clientWidth+"px",t.pdfViewerBase.updateZoomValue(),t.pdfViewer.thumbnailViewModule.gotoThumbnailImage(t.pdfViewerBase.currentPageNumber-1),t.isThumbnail=!0)),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var r=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber,10);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(r)}},this.bookmarkButtonOnClick=function(e){i.openBookmarkcontentInitially()},this.commentPanelMouseDown=function(e){var t=null;(t=i).offset=[t.commentPanelResizer.offsetLeft-e.clientX,t.commentPanelResizer.offsetTop-e.clientY,t.getViewerContainerRight()],i.isCommentPanelShow=!0,i.previousX=e.clientX,t.pdfViewerBase.viewerContainer.style.cursor="e-resize",t.commentPanelResizer.style.cursor="e-resize"},this.updateCommentPanelContainer=function(e){var t,n,o=null;(o=i,i.pdfViewer.enableRtl)?((t=e.clientX+o.offset[0])>(n=Math.floor(i.outerContainerWidth/2))&&(t=n),t<i.commentPanelWidthMin&&(t=i.commentPanelWidthMin),o.commentPanelResizer.style.left=t+"px",o.commentPanelContainer.style.width=t+"px",o.pdfViewerBase.viewerContainer.style.left=o.getViewerContainerRight()+"px",o.pdfViewerBase.viewerContainer.style.right=o.getViewerContainerLeft()+"px"):((t=i.previousX-e.clientX+o.offset[2])>(n=Math.floor(i.outerContainerWidth/2))&&(t=n),t<i.commentPanelWidthMin&&(t=i.commentPanelWidthMin),o.commentPanelResizer.style.right=t+"px",o.commentPanelContainer.style.width=t+"px",o.pdfViewerBase.viewerContainer.style.right=o.getViewerContainerRight()+"px",o.pdfViewerBase.viewerContainer.style.left=o.getViewerContainerLeft()+"px");i.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();var s=o.pdfViewer.element.clientWidth-o.getViewerContainerLeft()-o.getViewerContainerRight();o.pdfViewerBase.viewerContainer.style.width=s+"px",o.pdfViewerBase.pageContainer.style.width=o.pdfViewerBase.viewerContainer.clientWidth+"px",o.pdfViewerBase.updateZoomValue()},this.commentPanelMouseLeave=function(e){var t=null;(t=i).commentPanelContainer&&(t.pdfViewerBase.viewerContainer.style.cursor="default",t.commentPanelContainer.style.cursor="default")},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.initializeNavigationPane=function(){this.createNavigationPane()},e.prototype.createNavigationPane=function(){if(this.sideBarToolbar=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar"),this.sideBarToolbarSplitter=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),this.sideBarContentContainer=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-container"),this.sideBarContentSplitter=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-splitter"),this.sideBarContent=this.pdfViewer.element.querySelector(".e-pv-sidebar-content"),this.sideBarTitleContainer=this.pdfViewer.element.querySelector(".e-pv-sidebar-title-container"),this.sideBarTitle=this.pdfViewer.element.querySelector(".e-pv-sidebar-title"),this.sideBarResizer=this.pdfViewer.element.querySelector(".e-pv-sidebar-resizer"),!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){this.pdfViewer.enableRtl&&(this.sideBarToolbar.style.cssFloat="right",this.sideBarToolbar.style.right="1px"),this.pdfViewer.enableRtl?this.sideBarToolbarSplitter.classList.add("e-right"):this.sideBarToolbarSplitter.classList.add("e-left"),this.pdfViewer.enableRtl?this.sideBarContentContainer.classList.add("e-right"):this.sideBarContentContainer.classList.add("e-left"),this.pdfViewer.enableRtl&&(this.sideBarContentSplitter.style.right="0px"),this.sideBarContentContainer.appendChild(this.sideBarContentSplitter),this.pdfViewer.enableRtl&&(this.sideBarContent.style.right="0px",this.sideBarContent.style.direction="rtl"),this.sideBarContentContainer.appendChild(this.sideBarContent),this.pdfViewer.enableRtl&&(this.sideBarTitleContainer.style.right="0px"),this.pdfViewer.enableRtl?this.sideBarTitle.classList.add("e-right"):this.sideBarTitle.classList.add("e-left"),this.sideBarTitleContainer.appendChild(this.sideBarTitle),this.sideBarContentContainer.appendChild(this.sideBarTitleContainer),this.sideBarResizer.addEventListener("mousedown",this.resizePanelMouseDown),this.pdfViewerBase.mainContainer.addEventListener("mousemove",this.resizePanelMouseMove),this.pdfViewerBase.mainContainer.addEventListener("mouseup",this.resizeViewerMouseLeave),this.pdfViewer.enableRtl?this.sideBarResizer.classList.add("e-right"):this.sideBarResizer.classList.add("e-left"),this.sideBarContentContainer.appendChild(this.sideBarResizer),this.createCommentPanel();var e=this.getViewerContainerLeft(),t=this.getViewerContainerRight();!this.pdfViewer.enableRtl&&this.pdfViewer.enableNavigationToolbar&&(this.pdfViewerBase.viewerContainer.style.left=e+"px",this.pdfViewerBase.viewerContainer.style.right=t+"px"),this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-e-this.commentPanelContainer.clientWidth+"px",this.sideBarContentContainer.style.display="none",this.createSidebarToolBar(),this.createSidebarTitleCloseButton(),this.createResizeIcon(),this.sideBarToolbar.addEventListener("mouseup",this.sideToolbarOnMouseup.bind(this)),this.sideBarContentContainer.addEventListener("mouseup",this.sideBarTitleOnMouseup.bind(this))}else this.createCommentPanel()},e.prototype.adjustPane=function(){var e=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),t=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar"),i=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-container"),n=this.pdfViewer.element.querySelector(".e-pv-toolbar"),o=n.getBoundingClientRect().height;0===o&&(o=parseFloat(window.getComputedStyle(n).height)+1),this.pdfViewer.enableToolbar||(o=0);var s=this.pdfViewer.element.querySelector(".e-pv-formdesigner-toolbar"),a=s.getBoundingClientRect().height,r=s.parentElement&&"none"!==window.getComputedStyle(s.parentElement).display;0===a&&(a=parseFloat(window.getComputedStyle(s).height)+1),r||(a=0),o+=a,t.style.top=o+"px",i.style.top=o+"px",e.style.top=o+"px",t.style.height=this.getSideToolbarHeight(o),i.style.height=this.getSideToolbarHeight(o),e.style.height=this.getSideToolbarHeight(o),this.pdfViewerBase.viewerContainer.style.height=this.getSideToolbarHeight(o)},e.prototype.getSideToolbarHeight=function(e){var t=this.pdfViewer.element.getBoundingClientRect().height;return 0!==t?t-e+"px":""},e.prototype.createCommentPanel=function(){this.commentPanelContainer=document.getElementById(this.pdfViewer.dataId+"_commantPanel"),this.commentsContentContainer=document.getElementById(this.pdfViewer.dataId+"_commentscontentcontainer"),this.commentPanelContainer.style.display="none",this.commentPanelContainer.style.right="0px",this.commentPanelContainer.style.bottom="0px",this.commentPanelContainer.style.top="114px",this.createFileElement(this.commentPanelContainer),this.createXFdfFileElement(this.commentPanelContainer)},e.prototype.createCommentPanelTitleContainer=function(){var e=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_commentPanelTitleContainer",className:"e-pv-comment-panel-title-container"}),t=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_commentPanelTitle",className:"e-pv-comment-panel-title",attrs:{tabindex:"-1"}});this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Comments").then((function(e){t.innerText=e})).catch((function(e){throw console.error("Unhandled Exception:",e),e}));var i=sf.base.createElement("button",{id:this.pdfViewer.dataId+"_annotations_btn"});i.setAttribute("aria-label","annotation button"),i.setAttribute("type","button"),i.className="e-btn e-pv-tbar-btn e-pv-comment-panel-title-close-div e-btn";var n=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_annotation_more_icon",className:"e-pv-more-icon e-pv-icon"});i.appendChild(n),e.appendChild(t),e.appendChild(i),this.commentPanelContainer.appendChild(e),this.createAnnotationContextMenu(),i.addEventListener("click",this.openAnnotationContextMenu.bind(this))},e.prototype.createCommentPanelResizeIcon=function(){this.commentPanelResizeIcon=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_resize",className:"e-pv-resize-icon e-pv-icon"}),this.setCommentPanelResizeIconTop(),this.commentPanelResizeIcon.style.position="absolute",this.commentPanelResizer.appendChild(this.commentPanelResizeIcon)},e.prototype.openAnnotationContextMenu=function(e){this.annotationMenuObj.open(e.clientY,e.clientX,e.currentTarget)},e.prototype.createAnnotationContextMenu=function(){this.annotationContextMenu=[{text:this.pdfViewer.localeObj.getConstant("Export Annotations")},{text:this.pdfViewer.localeObj.getConstant("Import Annotations")},{text:this.pdfViewer.localeObj.getConstant("Export XFDF")},{text:this.pdfViewer.localeObj.getConstant("Import XFDF")}];var e=sf.base.createElement("ul",{id:this.pdfViewer.dataId+"_annotation_context_menu"});this.pdfViewer.element.appendChild(e),this.annotationMenuObj=new sf.navigations.ContextMenu({target:"#"+this.pdfViewer.dataId+"_annotations_btn",items:this.annotationContextMenu,select:this.annotationMenuItemSelect.bind(this)}),this.pdfViewer.enableRtl&&(this.annotationMenuObj.enableRtl=!0),this.annotationMenuObj.appendTo(e),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?this.annotationMenuObj.animationSettings.effect="ZoomIn":this.annotationMenuObj.animationSettings.effect="SlideDown"},e.prototype.annotationMenuItemSelect=function(e){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var t=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber,10);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(t)}if(e.item)switch(e.item.text){case this.pdfViewer.localeObj.getConstant("Export Annotations"):this.pdfViewerBase.exportAnnotations(_t.Json);break;case this.pdfViewer.localeObj.getConstant("Import Annotations"):this.importAnnotationIconClick(e);break;case this.pdfViewer.localeObj.getConstant("Export XFDF"):this.pdfViewerBase.exportAnnotations(_t.Xfdf);break;case this.pdfViewer.localeObj.getConstant("Import XFDF"):this.importXFdfAnnotationIconClick(e)}},e.prototype.createFileElement=function(e){this.annotationInputElement=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_annotationUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file","aria-label":"upload elements"}}),this.annotationInputElement.setAttribute("accept",".json,application/json"),e.appendChild(this.annotationInputElement),this.annotationInputElement.addEventListener("change",this.loadImportAnnotation)},e.prototype.createXFdfFileElement=function(e){this.annotationXFdfInputElement=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_annotationXFdfUploadElement",styles:"position:fixed; left:-100em",attrs:{type:"file","aria-label":"upload elements"}}),this.annotationXFdfInputElement.setAttribute("accept",this.pdfViewerBase.isMAUI?".xfdf,application/vnd.adobe.xfdf,application/octet-stream":".xfdf"),e.appendChild(this.annotationXFdfInputElement),this.annotationXFdfInputElement.addEventListener("change",this.loadImportAnnotation)},e.prototype.importAnnotationIconClick=function(e){this.annotationInputElement.click()},e.prototype.importXFdfAnnotationIconClick=function(e){this.annotationXFdfInputElement.click()},e.prototype.handleImportClick=function(){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){var e=document.getElementById(this.pdfViewer.dataId+"_annotationUploadElement"),t=document.getElementById(this.pdfViewer.dataId+"_annotationXFdfUploadElement"),i=document.getElementById("IMPORT_ANNOTATION_JSON"),n=document.getElementById("IMPORT_ANNOTATION_XFDF");i.addEventListener("click",(function(){e.click()})),n.addEventListener("click",(function(){t.click()}))}},e.prototype.closeCommentPanelContainer=function(){var e=document.getElementById(this.pdfViewer.dataId+"_viewerContainer"),t=document.getElementById(this.pdfViewer.dataId+"_pageViewContainer"),i=document.getElementById(this.pdfViewer.dataId+"_commantPanel");i&&(i.style.display="none",this.commentPanelResizer&&(this.commentPanelResizer.style.display="none"),e&&(this.pdfViewer.enableRtl?e.style.left=this.getViewerContainerRight()+"px":e.style.right=this.getViewerContainerRight()+"px",e.style.width=this.pdfViewer.element.clientWidth-this.getViewerContainerLeft()-this.getViewerContainerRight()+"px",t.style.width=this.pdfViewerBase.viewerContainer.offsetWidth-this.getViewerContainerScrollbarWidth()+"px"),this.pdfViewerBase&&this.pdfViewerBase.updateZoomValue(),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewerBase.mobileScrollerContainer&&(this.pdfViewerBase.mobileScrollerContainer.style.display="block"),this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0))},e.prototype.createNavigationPaneMobile=function(e){var t,i=this;if(this.isNavigationToolbarVisible=!0,this.toolbarElement=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_navigationToolbar",className:"e-pv-nav-toolbar"}),this.pdfViewerBase.viewerMainContainer.insertBefore(this.toolbarElement,this.pdfViewerBase.viewerContainer),"search"===e){var n='<div class="e-input-group e-pv-search-input-mobile" id="'+this.pdfViewer.dataId+'_search_input_container"><input class="e-input" type="text" placeholder="'+this.pdfViewer.localeObj.getConstant("Find in document")+'" id="'+this.pdfViewer.dataId+'_search_input"></input></div>';t=[{prefixIcon:"e-pv-backward-icon e-pv-icon",tooltipText:this.pdfViewer.localeObj.getConstant("Go Back"),id:this.pdfViewer.dataId+"_backward",click:this.goBackToToolbar.bind(this)},{template:n},{prefixIcon:"e-pv-search-icon e-pv-icon",id:this.pdfViewer.dataId+"_search_box-icon",click:function(){var e=i.pdfViewerBase.getElement("_search_box-icon").firstElementChild;i.pdfViewer.textSearchModule.searchButtonClick(e,i.searchInput)}},{prefixIcon:"e-pv-prev-search-icon e-pv-icon",id:this.pdfViewer.dataId+"_prev_occurrence",click:function(e){i.pdfViewer.textSearchModule.searchPrevious()}},{prefixIcon:"e-pv-next-search-icon e-pv-icon",id:this.pdfViewer.dataId+"_next_occurrence",click:function(e){i.pdfViewer.textSearchModule.searchNext()}}]}else t=[{prefixIcon:"e-pv-backward-icon e-pv-icon",id:this.pdfViewer.dataId+"_backward",click:this.goBackToToolbar.bind(this)},{text:this.pdfViewer.localeObj.getConstant("Bookmarks")}];this.toolbar=new sf.navigations.Toolbar({items:t,width:"",height:"",overflowMode:"Popup"}),this.pdfViewer.enableRtl&&(this.toolbar.enableRtl=!0),this.toolbar.isStringTemplate=!0,this.toolbar.appendTo(this.toolbarElement),"search"===e?this.initiateSearchBox():this.initiateBookmarks()},e.prototype.initiateSearchBox=function(){var e=this;this.searchInput=this.pdfViewerBase.getElement("_search_input"),this.pdfViewer.textSearchModule.searchBtn=this.pdfViewerBase.getElement("_search_box-icon").firstElementChild,this.searchInput.addEventListener("keyup",(function(t){e.searchInput.value;13===t.which?e.initiateTextSearch(!0):e.pdfViewer.textSearchModule.resetVariables()})),this.pdfViewer.textSearchModule.searchInput=this.searchInput,this.setSearchInputWidth(),this.searchInput.focus()},e.prototype.initiateBookmarks=function(){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="none");var e=this.pdfViewerBase.getElement("_bookmarks_container");e&&(e.style.width="100%",e.style.height="100%",this.pdfViewer.element&&this.pdfViewer.element.clientHeight>0&&(e.style.height=this.pdfViewer.element.clientHeight+"px"))},e.prototype.initiateTextSearch=function(e){var t=this.searchInput.value;this.pdfViewer.textSearchModule.initiateSearch(t,e)},e.prototype.goBackToToolbar=function(){if(this.isNavigationToolbarVisible=!1,sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.textSearchModule.cancelTextSearch(),this.searchInput=null,0!==this.pdfViewer.bookmarkViewModule.childNavigateCount)this.pdfViewer.bookmarkViewModule.bookmarkList.back(),this.pdfViewer.bookmarkViewModule.childNavigateCount--;else{null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null);var e=this.pdfViewerBase.getElement("_bookmarks_container");e&&(e.parentElement.removeChild(e),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="")),this.toolbarElement&&null!=this.toolbarElement.parentElement&&this.toolbarElement.parentElement.removeChild(this.toolbarElement),this.pdfViewerBase.viewerContainer.style.display="block",this.isBookmarkListOpen=!1,this.pdfViewerBase.onWindowResize()}},e.prototype.setSearchInputWidth=function(){var e=this.searchInput.parentElement,t=window.getComputedStyle(e.parentElement,null).getPropertyValue("padding-left");sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.toolbarElement=this.pdfViewerBase.getElement("_navigationToolbar"));var i=this.toolbarElement.clientWidth-this.getParentElementSearchBox("_backward").clientWidth-this.getParentElementSearchBox("_search_box-icon").clientWidth-this.getParentElementSearchBox("_prev_occurrence").clientWidth-this.getParentElementSearchBox("_next_occurrence").clientWidth-6;""!==t&&(i-=2*parseFloat(t)),e.style.width=i+"px"},e.prototype.getParentElementSearchBox=function(e){return this.pdfViewerBase.getElement(e).parentElement},e.prototype.createTooltipMobile=function(e,t){var i=this;this.isTostCreated=!0;var n=document.getElementById(this.pdfViewer.dataId+"_container_tooltip"),o=n.firstElementChild;if(o)o.style.width="auto",o.firstElementChild.firstElementChild.textContent=e;else{var s=0;n&&(s=n.clientWidth);var a=(this.pdfViewer.element.clientWidth-s)/2,r=this.pdfViewer.element.clientHeight/2;this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToastXYPosition",e,a,r).catch((function(e){throw console.error("Unhandled Exception:",e),e})),setTimeout((function(){n=document.getElementById(i.pdfViewer.dataId+"_container_tooltip"),(o=n.firstElementChild)&&!t?(o.style.width="auto",o.firstElementChild.firstElementChild.textContent=e):i.pdfViewer._dotnetInstance.invokeMethodAsync("ShowToastTooltip",t||!1).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}),300)}},e.prototype.closeToastComponent=function(){this.isTostCreated=!1,this.pdfViewer.textSearchModule&&(this.pdfViewer.textSearchModule.isMessagePopupOpened=!1)},e.prototype.createMobileTooltip=function(e){var t=sf.base.createElement("div",{className:"e-pv-container-tooltip",id:this.pdfViewer.dataId+"_container_tooltip"});this.pdfViewer.element.appendChild(t),this.toastObject=new sf.notifications.Toast({title:e,target:this.pdfViewer.element,close:this.onTooltipClose.bind(this),position:{X:0,Y:0},animation:{hide:{duration:200,effect:"FadeOut"}}}),this.toastObject.appendTo(t);var i=.65*this.pdfViewer.element.clientHeight,n=(this.pdfViewer.element.clientWidth-t.clientWidth)/2;this.isTooltipCreated=!0,this.toastObject.show({position:{X:n,Y:i}});var o=t.firstElementChild;o&&(o.style.width="auto")},e.prototype.onTooltipClose=function(e){if(this.pdfViewer.textSearchModule){this.isTooltipCreated=!1;var t=this.pdfViewerBase.getElement("_container_tooltip");this.pdfViewer.textSearchModule.isMessagePopupOpened=!1,this.toastObject&&this.toastObject.destroy(),t.parentElement.removeChild(t),this.toastObject=null}},e.prototype.toolbarResize=function(){this.searchInput&&(this.searchInput.style.width="auto",this.setSearchInputWidth())},e.prototype.createSidebarToolBar=function(){this.thumbnailButton=this.pdfViewer.element.querySelector(".e-pv-thumbnail-view-button"),this.bookmarkButton=this.pdfViewer.element.querySelector(".e-pv-bookmark-button"),this.thumbnailButton.addEventListener("click",this.sideToolbarOnClick),this.bookmarkButton.addEventListener("click",this.bookmarkButtonOnClick)},e.prototype.onTooltipBeforeOpen=function(e){this.pdfViewer.toolbarSettings.showTooltip||(e.cancel=!0)},e.prototype.enableThumbnailButton=function(){this.thumbnailButton&&(this.thumbnailButton.removeAttribute("disabled"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-disable-icon"),this.thumbnailButton.classList.remove("e-overlay"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"))},e.prototype.enableBookmarkIcon=function(){var e=this.pdfViewer.element.querySelector(".e-pv-bookmark-view");this.pdfViewerBase.navigationPane&&e.childNodes.length>0&&this.bookmarkButton&&this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.bookmarks&&(this.bookmarkButton.removeAttribute("disabled"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-disable-icon"),this.bookmarkButton.classList.remove("e-overlay"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"))},e.prototype.createSidebarTitleCloseButton=function(){this.closeDiv=sf.base.createElement("button",{id:this.pdfViewer.dataId+"_close_btn"}),this.closeDiv.setAttribute("aria-label","close button"),this.closeDiv.setAttribute("type","button"),this.closeDiv.className="e-btn e-pv-tbar-btn e-pv-title-close-div e-btn",this.pdfViewer.enableRtl?this.closeDiv.style.left="8px":this.closeDiv.style.left=this.closeButtonLeft+"px";var e=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_close_icon",className:"e-pv-title-close-icon e-pv-icon"});this.closeDiv.appendChild(e),this.sideBarTitleContainer.appendChild(this.closeDiv),this.closeDiv.addEventListener("click",this.sideToolbarOnClose)},e.prototype.createResizeIcon=function(){this.resizeIcon=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_resize",className:"e-pv-resize-icon e-pv-icon"}),this.setResizeIconTop(),this.resizeIcon.style.position="absolute",this.resizeIcon.addEventListener("click",this.sideToolbarOnClose),this.resizeIcon.addEventListener("mouseover",this.resizeIconMouseOver),this.sideBarResizer.appendChild(this.resizeIcon)},e.prototype.setResizeIconTop=function(){this.sideBarToolbar&&this.sideBarToolbar.clientHeight&&""===this.resizeIcon.style.top&&(this.resizeIcon.style.top=this.sideBarToolbar.clientHeight/2+"px")},e.prototype.setCommentPanelResizeIconTop=function(){this.commentPanelContainer&&this.commentPanelContainer.clientHeight&&this.commentPanelResizeIcon&&""===this.commentPanelResizeIcon.style.top&&(this.commentPanelResizeIcon.style.top=this.commentPanelContainer.clientHeight/2+"px")},Object.defineProperty(e.prototype,"outerContainerWidth",{get:function(){return this.mainContainerWidth||(this.mainContainerWidth=this.pdfViewerBase.mainContainer.clientWidth),this.mainContainerWidth},enumerable:!1,configurable:!0}),e.prototype.getViewerContainerScrollbarWidth=function(){return this.pdfViewerBase.viewerContainer.offsetWidth+this.pdfViewerBase.viewerContainer.offsetLeft-(this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft)},Object.defineProperty(e.prototype,"sideToolbarWidth",{get:function(){return this.sideBarToolbar?this.sideBarToolbar.clientWidth:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sideBarContentContainerWidth",{get:function(){return this.sideBarContentContainer?this.sideBarContentContainer.clientWidth:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commentPanelContainerWidth",{get:function(){return this.commentPanelContainer?this.commentPanelContainer.offsetWidth:0},enumerable:!1,configurable:!0}),e.prototype.updateViewerContainerOnClose=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.pdfViewer.enableRtl?this.pdfViewerBase.viewerContainer.style.right=this.sideToolbarWidth+"px":this.pdfViewerBase.viewerContainer.style.left=this.sideToolbarWidth+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth-this.getViewerContainerRight()+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.offsetWidth-this.getViewerContainerScrollbarWidth()+"px",this.restrictUpdateZoomValue&&this.pdfViewerBase.updateZoomValue())},e.prototype.updateViewerContainerOnExpand=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="block",this.pdfViewer._dotnetInstance.invokeMethodAsync("ResizeTreeView").catch((function(e){throw console.error("Unhandled Exception:",e),e})),this.pdfViewer.enableRtl?this.pdfViewerBase.viewerContainer.style.right=this.getViewerContainerLeft()+"px":this.pdfViewerBase.viewerContainer.style.left=this.getViewerContainerLeft()+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.getViewerContainerLeft()-this.getViewerContainerRight()+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px",this.pdfViewerBase.updateZoomValue(),this.pdfViewer.enableThumbnail&&(this.pdfViewer.thumbnailViewModule.gotoThumbnailImage(this.pdfViewerBase.currentPageNumber-1),this.pdfViewer.thumbnailViewModule.renderViewPortThumbnailImage()))},e.prototype.getViewerContainerLeft=function(){return this.sideToolbarWidth?this.sideToolbarWidth+this.sideBarContentContainerWidth:0},e.prototype.getViewerContainerRight=function(){return this.commentPanelResizer=document.getElementById(this.pdfViewer.dataId+"_commentPanelResizer"),this.commentPanelResizer?this.commentPanelContainerWidth+this.commentPanelResizer.clientWidth:0},e.prototype.getViewerMainContainerWidth=function(){return this.pdfViewer.element.clientWidth-this.sideToolbarWidth},e.prototype.ClearAllAnnotations=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&!0===this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateTextMarkupButtons",!1,!1,!1,!1),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.clearAnnotationMode(),this.pdfViewer.toolbar.annotationToolbarModule.DeselectItems(),this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected=!1)},e.prototype.setThumbnailSelectionIconTheme=function(){this.thumbnailButton&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.add("e-pv-thumbnail-view-button-selection"))},e.prototype.adjustSideBar=function(e){e&&(e.style.position="absolute",e.style.left="1px");var t=this.pdfViewer.pageCount;if(t>0)for(var i=0;i<t;i++){var n=document.getElementById(this.pdfViewer.dataId+"_thumbnail_pagenumber_"+i);n&&(n.style.left="1px")}},e.prototype.removeThumbnailSelectionIconTheme=function(){this.thumbnailButton&&this.thumbnailButton.children[0]&&(this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-selection-icon"),this.thumbnailButton.classList.remove("e-pv-thumbnail-view-button-selection"))},e.prototype.resetThumbnailIcon=function(){this.thumbnailButton&&this.thumbnailButton.children[0]&&(this.thumbnailButton.children[0].classList.remove("e-pv-thumbnail-view-icon"),this.thumbnailButton.children[0].classList.add("e-pv-thumbnail-view-disable-icon"))},e.prototype.resetThumbnailView=function(){this.sideBarContentContainer&&(this.sideBarContentContainer.style.display="none",this.pdfViewer.enableRtl?this.pdfViewerBase.viewerContainer.style.left="1px":this.pdfViewerBase.viewerContainer.style.left=this.sideToolbarWidth+"px",this.pdfViewerBase.viewerContainer.style.width=this.pdfViewer.element.clientWidth-this.sideToolbarWidth-this.getViewerContainerRight()+"px",this.pdfViewerBase.pageContainer&&(this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px"),this.thumbnailButton.setAttribute("disabled","disabled"),this.removeThumbnailSelectionIconTheme(),this.resetThumbnailIcon())},e.prototype.setBookmarkSelectionIconTheme=function(){this.bookmarkButton&&(this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.add("e-pv-bookmark-button-selection"))},e.prototype.removeBookmarkSelectionIconTheme=function(){this.bookmarkButton&&this.bookmarkButton.children[0]&&(this.bookmarkButton.children[0].classList.add("e-pv-bookmark-icon"),this.bookmarkButton.children[0].classList.remove("e-pv-bookmark-selection-icon"),this.bookmarkButton.classList.remove("e-pv-bookmark-button-selection"))},e.prototype.sideToolbarOnMouseup=function(e){e.target===this.sideBarToolbar&&this.pdfViewerBase.focusViewerContainer()},e.prototype.sideBarTitleOnMouseup=function(e){this.pdfViewerBase.focusViewerContainer()},e.prototype.openBookmarkcontentInitially=function(){var e,t;(this,document.getElementById(this.pdfViewer.dataId+"_thumbnail_view")&&(document.getElementById(this.pdfViewer.dataId+"_thumbnail_view").style.display="none"),this.removeThumbnailSelectionIconTheme(),this.pdfViewer&&this.pdfViewer.cultureValue&&this.pdfViewer.cultureValue.BookmarkContent?this.sideBarTitle.textContent=this.pdfViewer.cultureValue.BookmarkContent:this.sideBarTitle.textContent=this.pdfViewer.localeObj.getConstant("Bookmarks"),this.sideBarContent.setAttribute("aria-label","Bookmark View Panel"),this.sideBarContent.setAttribute("role","navigation"),this.pdfViewer.bookmarkViewModule.renderBookmarkcontent(),this.sideBarContentContainer)&&("none"!==this.sideBarContentContainer.style.display?this.isThumbnailOpen?(this.setBookmarkSelectionIconTheme(),this.isBookmarkOpen=!0,this.updateViewerContainerOnExpand(),"mouse"!==event.pointerType&&((t=(e=document.getElementById(this.pdfViewer.dataId+"_sideBarContent")).querySelector(".e-list-item.e-level-1.e-active"))||(t=e.querySelector('li[data-uid="1"]')),t&&t.focus(),e&&e.setAttribute("tabindex","-1"))):(this.removeBookmarkSelectionIconTheme(),this.isBookmarkOpen=!1,this.updateViewerContainerOnClose()):(this.sideBarContent.focus(),this.setBookmarkSelectionIconTheme(),this.isBookmarkOpen=!0,this.updateViewerContainerOnExpand(),"mouse"!==event.pointerType&&((t=(e=document.getElementById(this.pdfViewer.dataId+"_sideBarContent")).querySelector(".e-list-item.e-level-1.e-active"))||(t=e.querySelector('li[data-uid="1"]')),t&&t.focus(),e&&e.setAttribute("tabindex","-1"))));this.isThumbnailOpen=!1,this.ClearAllAnnotations()},e.prototype.disableBookmarkButton=function(){this.sideBarContentContainer&&this.bookmarkButton&&this.bookmarkButton.children[0]&&(this.bookmarkButton.setAttribute("disabled","disabled"),this.bookmarkButton.children[0].classList.add("e-pv-bookmark-disable-icon"),this.bookmarkButton.classList.add("e-overlay"))},e.prototype.clear=function(){sf.base.Browser.isDevice||(this.removeBookmarkSelectionIconTheme(),this.removeThumbnailSelectionIconTheme(),this.closeCommentPanelContainer())},e.prototype.getModuleName=function(){return"NavigationPane"},e}();function Ce(){this.removeElementFromParent(this.pageContainer),this.removeElementFromParent(this.viewerContainer),this.pdfViewer.toolbar&&this.removeElementFromParent(this.pdfViewer.toolbar.toolbarElement),this.navigationPane&&this.removeElementFromParent(this.navigationPane.sideBarToolbar),this.removeElementFromParent(this.mainContainer)}function Ie(e){var t=this.pdfViewer,i=t.printModule,n=t.textSearchModule,o=t.bookmarkViewModule,s=t.thumbnailView,a=t.annotation,r=t.magnificationModule,l=t.textSelectionModule,d=t.formFieldsModule,h=this.signatureModule;if(this.isPasswordAvailable=!1,this.isDocumentLoaded=!1,this.isInitialLoaded=!1,this.isImportAction=!1,this.annotationPageList=[],this.annotationComments&&this.pdfViewer._dotnetInstance.invokeMethodAsync("ResetCommentCollection"),this.annotationComments=null,t.annotationCollection=[],t.signatureCollection=[],t.formFieldCollection=[],this.isAnnotationCollectionRemoved=!1,this.documentAnnotationCollections=null,this.isAnnotationPresent=!1,this.isDrawnCompletely=!1,this.annotationRenderredList=[],this.isImportAction=!1,this.isImportedAnnotation=!1,this.importedAnnotation=[],this.isStorageExceed=!1,this.annotationStorage={},this.formFieldStorage={},this.downloadCollections={},this.annotationEvent=null,this.highestWidth=0,this.highestHeight=0,this.requestLists=[],this.tilerequestLists=[],this.isToolbarInkClicked=!1,t.formFieldCollections=[],t.formDesignerCollections=[],t.historyManager={canRedo:!1,canUndo:!1,currentEntry:null},t.formFieldPDFCollections=[],t.formDesignerSignatureCollections=[],t.clipboardData.clipObject={},this.passwordData="",this.updateDocumentEditedProperty(!1),this.initiateTextSelectMode(),this.restrictionList=null,delete this.pdfViewer.viewerBase.hasRedactAnnotation,t.formDesignerModule&&(t.formDesignerModule.formFieldIndex=0,this.activeElements&&t.clearSelection(this.activeElements.activePageID),t.zIndexTable=[]),sf.base.Browser.isDevice&&!t.enableDesktopMode||this.navigationPane.sideBarToolbar&&this.navigationPane.clear(),t.enableDesktopMode||this.navigationPane.clear(),s&&s.clear(),o&&o.clear(),r&&(r.isMagnified=!1,r.clearIntervalTimer()),l&&l.clearTextSelection(),n&&n.resetTextSearch(),a&&(a.clear(),a.initializeCollection()),d&&(d.readOnlyCollection=[],d.signatureFieldCollection=[],d.currentTarget=null),h&&(h.signaturecollection=[],h.outputcollection=[]),this.pageSize&&(this.pageSize=[]),this.renderedPagesList&&(this.renderedPagesList=[]),this.pageContainer){for(;this.pageContainer.hasChildNodes();)this.pageContainer.removeChild(this.pageContainer.lastChild);if(this.viewerContainer&&(this.isMacSafari||this.isDeviceiOS)){var p={id:this.pageContainer.id,className:this.pageContainer.className,attrs:{"aria-label":this.pageContainer.getAttribute("aria-label"),role:this.pageContainer.getAttribute("role")}};this.pageContainer.remove(),this.pageContainer=sf.base.createElement("div",p),this.viewerContainer.appendChild(this.pageContainer)}}this.pageCount>0&&(this.unloadDocument(this),this.textLayer.characterBound=[],this.loadRequestHandler&&this.loadRequestHandler.clear(),this.virtualLoadRequestHandler&&this.virtualLoadRequestHandler.clear(),this.pageRequestHandler&&this.pageRequestHandler.clear(),this.dowonloadRequestHandler&&this.dowonloadRequestHandler.clear(),this.getDocumentAsByteArrayRequestHandler&&this.getDocumentAsByteArrayRequestHandler.clear(),this.importAnnotationRequestHandler&&this.importAnnotationRequestHandler.clear(),this.exportAnnotationRequestHandler&&this.exportAnnotationRequestHandler.clear(),this.importFormFieldsRequestHandler&&this.importFormFieldsRequestHandler.clear(),this.exportFormFieldsRequestHandler&&this.exportFormFieldsRequestHandler.clear(),i&&i.printRequestHandler&&i.printRequestHandler.clear()),this.windowSessionStorageClear(),this.pinchZoomStorage&&(this.pinchZoomStorage=[]),!this.previousZoomValue&&0!==this.previousZoomValue||this.previousZoomValue===t.zoomValue||("Default"!==this.pdfViewer.zoomMode?(t.zoomValue=100,this.pdfViewer.updatePdfViewerOptions("ZoomValue",100)):(t.zoomValue=this.previousZoomValue,this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue))),e&&this.pageCount>0&&t.fireDocumentUnload(this.pdfViewer.fileName),this.pdfViewer.fileName=null,null!==this.pdfViewer.documentPath&&void 0!==this.pdfViewer.documentPath&&(this.pdfViewer.documentPath=null),this.pdfViewer.nameTable={},this.pdfViewer.isCleared=!0}function ke(){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.remove("e-pv-mobile-view"),this.unWireEvents(),this.clear(!1),this.removePdfViewerElements();var e=document.getElementById("measureElement");e&&(e=void 0),this.pageTextDetails&&(this.pageTextDetails=null),this.hyperlinkAndLinkAnnotation&&(this.hyperlinkAndLinkAnnotation=null),this.pageImageDetails&&(this.pageImageDetails=null),this.pdfViewer.fileByteArray&&(this.pdfViewer.fileByteArray=null),this.pdfViewerRunner&&this.pdfViewerRunner.terminate()}function Me(e){e=(URL||webkitURL).createObjectURL(e);var t=sf.base.createElement("a");if(t.click){if(t.href=e,t.target="_parent","download"in t)if(sf.base.Browser.isDevice&&sf.base.Browser.isIos){var i=this.downloadFileName;i&&!i.endsWith(".pdf")?t.download=this.downloadFileName+".pdf":t.download=this.downloadFileName}else t.download=this.downloadFileName;(document.body||document.documentElement).appendChild(t),t.click(),t.parentNode&&t.parentNode.removeChild(t)}else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var n=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,n+"$&")}window.open(e,"_parent")}}function Te(){this.pageCount>0&&this.createRequestForDownload()}function Ee(e){if(this.pageCount>0&&e&&e.length>0){for(var t=[],i=[],n=0;n<e.length;n++){var o=e[n];if(o>=0&&o<this.pageCount){var s=this.pageSize[o];if(s){var a={pageNumber:o,bound:{x:0,y:0,width:s.width-1,height:s.height-1},markerFillColor:this.pdfViewer.redactionSettings.markerFillColor||"rgba(255, 255, 255, 1)",markerBorderColor:this.pdfViewer.redactionSettings.markerBorderColor||"rgba(255, 0, 0, 1)",markerOpacity:this.pdfViewer.redactionSettings.markerOpacity||1,fillColor:this.pdfViewer.redactionSettings.fillColor||"rgba(0, 0, 0, 1)",overlayText:this.pdfViewer.redactionSettings.overlayText||"",isRepeat:this.pdfViewer.redactionSettings.isRepeat||!1,fontColor:this.pdfViewer.redactionSettings.fontColor||"rgba(255, 0, 0, 1)",fontSize:this.pdfViewer.redactionSettings.fontSize||14,fontFamily:this.pdfViewer.redactionSettings.fontFamily||"Helvetica",textAlign:this.pdfViewer.redactionSettings.textAlign||"center",author:this.pdfViewer.redactionSettings.author||"Guest"};if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redactionAnnotationModule){var r=this.pdfViewer.annotationModule.redactionAnnotationModule.updateAddAnnotationDetails(a,a.bound);if(r&&r.redactionAnnotation){this.pdfViewer.annotationModule.redactionAnnotationModule.isAddAnnotationProgramatically=!0,this.pdfViewer.annotationModule.redactionAnnotationModule.renderRedactionAnnotations(r.redactionAnnotation,o),this.pdfViewer.annotationModule.redactionAnnotationModule.isAddAnnotationProgramatically=!1;var l=r.redactionAnnotation[0];t.push(this.pdfViewer.nameTable[l.Id]),i.push({annotId:l.AnnotName,pageNumber:o+1,author:l.Author})}}}}}this.pdfViewer.annotation.stickyNotesAnnotationModule.addPageRedactionComments(i),this.pdfViewer.annotation.addAction(0,null,t,"AddRedactPages","",t,t),this.pdfViewer.clearSelection()}else this.pageCount>0&&!e&&this.pageCount>0&&this.createRequestForDownload(!0)}function Be(){var e=this;return this.pageCount>0?new Promise((function(t,i){e.getDocumentAsByteArrayRequest().then((function(e){t(e)}))})):null}function Pe(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.zoomFactor:1}function De(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchZoomed}function Ne(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isMagnified}function Fe(e){return this.activeElements&&!sf.base.isNullOrUndefined(this.activeElements.activePageID)?e?this.activeElements.activePageID+1:this.activeElements.activePageID:e?this.currentPageNumber:this.currentPageNumber-1}function Le(e){this.pdfViewer.enableShapeLabel&&(this.pdfViewer.shapeLabelSettings.fillColor&&(e.labelFillColor=this.pdfViewer.shapeLabelSettings.fillColor),this.pdfViewer.shapeLabelSettings.fontColor&&(e.fontColor=this.pdfViewer.shapeLabelSettings.fontColor),this.pdfViewer.shapeLabelSettings.fontSize&&(e.fontSize=this.pdfViewer.shapeLabelSettings.fontSize),this.pdfViewer.shapeLabelSettings.fontFamily&&(e.fontFamily=this.pdfViewer.shapeLabelSettings.fontFamily),this.pdfViewer.shapeLabelSettings.opacity&&(e.labelOpacity=this.pdfViewer.shapeLabelSettings.opacity),this.pdfViewer.shapeLabelSettings.labelContent&&(e.labelContent=this.pdfViewer.shapeLabelSettings.labelContent))}function Oe(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isRerenderCanvasCreated}function Re(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagesZoomed}function ze(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPagePinchZoomed}function He(){return!!this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isPinchScrolled}function Ue(e,t){var i=this.pageSize[t];if(0===(e=Math.abs(e)))return i.rotation;if(1===e||90===e){if(0===i.rotation)return 3;if(2===i.rotation)return 1;if(3===i.rotation)return 2}else if(2===e||180===e){if(0===i.rotation)return 2;if(1===i.rotation)return 3;if(3===i.rotation)return 1}else if(3===e||270===e){if(0===i.rotation)return 1;if(2===i.rotation)return 3;if(1===i.rotation)return 2}return null}function je(e){var t=this;null!=this.pageSize[e]&&(this.renderElementsVirtualScroll(e),this.viewerContainer.scrollTop=this.getPageTop(e),-1===this.renderedPagesList.indexOf(e)&&this.createRequestForRender(e),setTimeout((function(){var i=e+1;i!==t.currentPageNumber&&(t.pdfViewer.currentPageNumber=i,t.currentPageNumber=i,t.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",t.pdfViewer.currentPageNumber))}),100))}function _e(){if(this.ispageMoved=!1,this.isThumb=!0,this.isTextMarkupAnnotationModule()&&null!=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage;this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null,this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearAnnotationSelection(e),this.pdfViewer.toolbar.showToolbar(!0)}this.mobileScrollerContainer.addEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0)}function We(){this.ispageMoved||this.pdfViewer._dotnetInstance.invokeMethodAsync("ShowPageDialog",null),this.isThumb=!1,this.ispageMoved=!1,this.mobileScrollerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll.bind(this),!0),this.mobilePageNoContainer.style.display="none"}function qe(){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobileScrollerContainer){var e=(this.viewerContainer.scrollHeight-this.viewerContainer.clientHeight)/(this.viewerContainer.clientHeight-56),t=this.viewerContainer.scrollTop/e,i=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=i+t+"px"}}function Ze(){this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom?this.pdfViewer.magnificationModule.fitToAuto():"FitToWidth"!==this.pdfViewer.zoomMode&&"fitToWidth"===this.pdfViewer.magnificationModule.fitType?this.pdfViewer.magnificationModule.fitToWidth():"fitToPage"===this.pdfViewer.magnificationModule.fitType?this.pdfViewer.magnificationModule.fitToPage():"fitToHeight"===this.pdfViewer.magnificationModule.fitType&&this.pdfViewer.magnificationModule.fitToHeight());for(var e=0;e<this.pageCount;e++)this.applyLeftPosition(e)}function Ye(e){var t=!1;if("Ink"!==this.action&&"Line"!==this.action&&"Perimeter"!==this.action&&"Polygon"!==this.action&&"DrawTool"!==this.action&&"Drag"!==this.action&&-1===this.action.indexOf("Rotate")&&-1===this.action.indexOf("Resize")||(t=!0),this.viewerContainer.contains(e.target)&&e.target!==this.viewerContainer&&e.target!==this.pageContainer&&!t)if(this.isViewerMouseDown){var i=this.dragX-e.pageX,n=this.dragY-e.pageY;this.viewerContainer.scrollTop=this.viewerContainer.scrollTop+n,this.viewerContainer.scrollLeft=this.viewerContainer.scrollLeft+i,this.viewerContainer.style.cursor="move",this.viewerContainer.style.cursor="-webkit-grabbing",this.viewerContainer.style.cursor="-moz-grabbing",this.viewerContainer.style.cursor="grabbing",this.dragX=e.pageX,this.dragY=e.pageY}else this.navigationPane.isNavigationPaneResized||(this.viewerContainer.style.cursor="move",this.viewerContainer.style.cursor="-webkit-grab",this.viewerContainer.style.cursor="-moz-grab",this.viewerContainer.style.cursor="grab");else this.navigationPane.isNavigationPaneResized||(this.viewerContainer.style.cursor="auto")}function Xe(e){var t=!1;return 0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?(0!==this.pdfViewer.selectedItems.annotations.length||0!==this.pdfViewer.selectedItems.formFields.length&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&this.pdfViewer.formDesignerInteraction||this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.classList.contains("e-pv-text-layer")||e.classList.contains("e-pv-text"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)&&(t=!0):t=!0,this.designerModetarget=e,t}function Ge(e){var t=this;var i=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);var n=0,o=0;if(e.touches&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var s=(this.viewerContainer.scrollHeight-this.viewerContainer.clientHeight)/(this.viewerContainer.clientHeight-this.toolbarHeight);if(this.isThumb){this.ispageMoved=!0,e.preventDefault(),this.mobilePageNoContainer.style.display="block",n=e.touches[0].pageX-this.scrollX,o=e.touches[0].pageY-this.viewerContainer.offsetTop,this.viewerContainer.scrollTop=o*s;var a=e.touches[0].pageY,r=this.pdfViewer.toolbarModule?0:50;0!==this.viewerContainer.scrollTop&&a<=this.viewerContainer.clientHeight-r&&(this.mobileScrollerContainer.style.top=a+"px")}else"e-pv-touch-ellipse"!==e.touches[0].target.className&&(this.isWebkitMobile&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.mobilePageNoContainer.style.display="none",o=this.touchClientY-e.touches[0].pageY,n=this.touchClientX-e.touches[0].pageX,this.viewerContainer.scrollTop=this.viewerContainer.scrollTop+o,this.viewerContainer.scrollLeft=this.viewerContainer.scrollLeft+n),this.updateMobileScrollerPosition(),this.touchClientY=e.touches[0].pageY,this.touchClientX=e.touches[0].pageX)}this.scrollHoldTimer&&clearTimeout(this.scrollHoldTimer);var l=this.currentPageNumber;this.scrollHoldTimer=null,this.contextMenuModule.close();for(var d=this.viewerContainer.scrollTop,h=0;h<this.pageCount;h++)if(null!=this.pageSize[h]){var p=this.getPageHeight(h);if(this.pageStopValue=p<30?15:p<150?75:p>=150&&p<300?125:p>=300&&p<500?200:300,d+this.pageStopValue<=this.getPageTop(h)+p){this.pdfViewer.currentPageNumber!==h+1&&(this.currentPageNumber=h+1,this.pdfViewer.currentPageNumber=h+1,this.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",this.pdfViewer.currentPageNumber));break}}this.renderElementsVirtualScroll(this.currentPageNumber),(this.isViewerMouseDown||this.getPinchZoomed()||this.getPinchScrolled()||this.getPagesPinchZoomed())&&!this.isViewerMouseWheel?this.showPageLoadingIndicator(this.currentPageNumber-1,!1):(this.pageViewScrollChanged(this.currentPageNumber),this.isViewerMouseWheel=!1),this.pdfViewer.toolbarModule&&this.viewerContainer.setAttribute("aria-labelledby",this.pdfViewer.dataId+"_pageDiv_"+(this.currentPageNumber-1)),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileSpanContainer.innerHTML=this.currentPageNumber.toString(),this.mobilecurrentPageContainer.innerHTML=this.currentPageNumber.toString()),l!==this.currentPageNumber&&(!this.pdfViewer.thumbnailViewModule||sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.pdfViewer.thumbnailViewModule.gotoThumbnailImage(this.currentPageNumber-1),this.pdfViewer.thumbnailViewModule.isThumbnailClicked=!1),this.pdfViewer.firePageChange(l));var c=this.getElement("_pageDiv_"+(this.currentPageNumber-1));if(c&&(c.style.visibility="visible"),this.isViewerMouseDown||!this.isViewerMouseDown&&!this.getPinchZoomed()&&!this.getPinchScrolled()&&!this.getPagesPinchZoomed()||this.isViewerMouseWheel)if(this.getRerenderCanvasCreated()&&!this.isPanMode&&this.pdfViewer.magnificationModule.clearIntervalTimer(),this.getLinkInformation(this.currentPageNumber))this.isDataExits=!0,this.initiatePageViewScrollChanged(),this.isDataExits=!1;else{var u=this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll?this.pdfViewer.scrollSettings.delayPageRequestTimeOnScroll:100;this.scrollHoldTimer=setInterval((function(){t.renderedPagesList.length>0&&(clearInterval(t.scrollHoldTimer),clearTimeout(f),t.initiatePageViewScrollChanged())}),u);var f=setTimeout((function(){clearInterval(t.scrollHoldTimer)}),5e3)}this.pdfViewer.annotation&&this.navigationPane.commentPanelContainer&&(sf.base.Browser.isDevice?this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(this.currentPageNumber-1):this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelScrollTop(this.currentPageNumber)),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&e.touches&&"e-pv-touch-ellipse"!==e.touches[0].target.className&&setTimeout((function(){t.updateMobileScrollerPosition()}),500),this.pdfViewer.enableServerDataBinding(i,!0)}function Je(){this.scrollHoldTimer&&clearTimeout(this.scrollHoldTimer),this.scrollHoldTimer=null,this.scrollPosition*this.getZoomFactor()!==this.viewerContainer.scrollTop&&(this.scrollPosition=this.viewerContainer.scrollTop,this.pageViewScrollChanged(this.currentPageNumber))}function Ke(e){var t=e-1,i=t-1;t>0&&(-1!==this.renderedPagesList.indexOf(t)||this.getMagnified()||(this.createRequestForRender(t),this.renderCountIncrement()),i>0&&(-1!==this.renderedPagesList.indexOf(i)||this.getMagnified()||(this.createRequestForRender(i),this.renderCountIncrement())))}function Qe(){var e=this,t=window.scrollX,i=window.scrollY,n=this.getScrollParent(this.viewerContainer),o=0,s=0;null!==n&&(o=n.scrollLeft,s=n.scrollTop),this.isThicknessChange||this.isOpacityChange?setTimeout((function(){e.viewerContainer.focus(),e.isThicknessChange=!1,e.isOpacityChange=!1}),50):this.viewerContainer.focus(),this.currentPageNumber>0&&this.viewerContainer.setAttribute("aria-labelledby",this.pdfViewer.dataId+"_pageDiv_"+(this.currentPageNumber-1)),this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule&&(this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer=document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+this.currentPageNumber),(this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer||this.pdfViewer.annotation)&&this.updateCommentPanel()),(-1!==navigator.userAgent.indexOf("MSIE")||navigator.userAgent.indexOf("Trident/")>-1||-1!==navigator.userAgent.indexOf("Edge"))&&null!==n?(n.scrollLeft=o,n.scrollTop=s):null!==n&&n.scrollTo(o,s),window.scrollTo(t,i)}function $e(){if("Tab"===this.lastInputMethod){if(this.pdfViewer.formFieldCollections&&this.pdfViewer.formFieldCollections.length>0){var e=this.pdfViewer.formFieldCollections[0],t=document.getElementById(e.id);t&&t.focus()}this.lastInputMethod=null}}function et(e){var t=!1;if(this.pdfViewer.textSelectionModule){var i=this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.currentPageNumber-1);if(i){var n=i;this.getHorizontalValue(n.left)<e.clientX&&this.getHorizontalValue(n.right)>e.clientX&&this.getVerticalValue(n.top)<e.clientY&&this.getVerticalValue(n.bottom)>e.clientY&&(t=!0)}(sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name)&&i&&(t=!0)}return t}function tt(e){var t=!1;if(this.pdfViewer.textSelectionModule){var i=this.pdfViewer.textSelectionModule.getCurrentSelectionBounds(this.currentPageNumber-1);if(i){var n=i,o=e.changedTouches[0],s=o.clientX,a=o.clientY;this.getHorizontalValue(n.left)<s&&this.getVerticalValue(n.top)<a&&(t=!0)}(sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name)&&i&&(t=!0)}return t}function it(e){var t=this.viewerContainer.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}function nt(){var e=!0,t="",i=this.pdfViewer.textSelectionModule;return i&&i.selectionRangeArray&&1===i.selectionRangeArray.length?t=i.selectionRangeArray[0].textContent:window.getSelection()&&window.getSelection().anchorNode&&(t=window.getSelection().toString()),""!==t&&this.checkIsRtlText(t)&&(e=!1),e}function ot(){document.getElementById(this.pdfViewer.dataId+"_viewerContainer").classList.remove("e-focused")}function st(e,t,i){switch(e){case"navigatePrimaryToolbarTabOrder":this.navigatePrimaryToolbarTabOrder(t);break;case"navigateAnnotationToolbarTabOrder":this.navigateAnnotationToolbarTabOrder(t,i);break;case"navigateBookmarkThumbnailTabOrder":this.navigateBookmarkThumbnailTabOrder(t,i);break;case"navigateCommentPanelTabOrder":this.navigateCommentPanelTabOrder(t,i);break;case"navigateViewerContainerTabOrder":this.navigateViewerContainerTabOrder(t);break;case"navigateFormFieldTabOrder":this.navigateFormFieldTabOrder(t);break;case"navigateContextMenuTabOrder":this.navigateContextMenuTabOrder(t,i);break;default:throw new Error("Unknown case : "+e)}}function at(e,t){var i=e.target,n=i.parentElement,o=this.pdfViewer.dataId,s=o+"_annotation",a=o+"_highLight",r=this.getElementById("toolbarContainer_nav"),l=t.previouslyActiveElement;if(e.shiftKey&&"BUTTON"===i.tagName&&n&&n.id===a&&l&&l.parentElement&&l.parentElement.id===s)if(r)e.preventDefault(),r.focus();else{e.preventDefault();var d=this.getElementById(s);d&&d.children[0]&&d.children[0].focus()}}function rt(e,t){var i=e.shiftKey,n=e.target,o=n.id,s=n.tagName,a=this.pdfViewer.dataId,r="BUTTON"===s,l=o===a+"_bookmark",d=o===a+"_close_btn",h=t.previouslyActiveThumbnailElement,p=t.shiftPreviouslyActiveThumbnailElement,c=this.getElementById(a+"_sideBarContentContainer"),u="block"===getComputedStyle(c).display,f=this.getElementById(a+"_thumbnail_view"),m="flex"===getComputedStyle(f).display,g=n.classList.contains("e-pv-thumbnail-image"),w=n.classList.contains("e-list-item"),y=this.pdfViewer.currentPageNumber,v=a+"_thumbnail_image_",b=a+"_thumbnail-view",S=a+"_bookmark",A=a+"_close_btn";if(i){if(r){if(l)if(k=this.getElementById(S))if(m&&u)e.preventDefault(),this.getElementById(A).focus();if(d){var x=this.getElementById(v+(y-1).toString());m&&h&&h.classList.contains("e-pv-thumbnail-image")&&u?(e.preventDefault(),this.addThumbnailPageSelectionTheme(h.parentElement),h.focus()):u&&m&&(e.preventDefault(),x&&this.addThumbnailPageSelectionTheme(x.parentElement),x.focus())}}if(g)this.removeThumbnailPageSelectionTheme(n.parentElement),e.preventDefault(),(V=this.getElementById(b)).focus();if(w)e.preventDefault(),(T=this.getElementById(S)).focus()}if(!i&&"Tab"===e.key){if(r){if(o===b){var V=this.getElementById(b);x=this.getElementById(v+(y-1).toString());m&&p&&p&&p.classList.contains("e-pv-thumbnail-image")&&u?(V&&e.preventDefault(),this.addThumbnailPageSelectionTheme(this.shiftPreviouslyActiveThumbnailElement.parentElement),p.focus()):m&&u&&x&&x.parentElement&&(e.preventDefault(),this.addThumbnailPageSelectionTheme(x.parentElement),x.focus())}if(o===S)if(u){if(u&&m){var C=this.getElementById(this.pdfViewer.dataId+"_pageDiv_"+(y-1));C&&(e.preventDefault(),C.focus())}}else{var I=this.getElementById(this.pdfViewer.dataId+"_pageDiv_"+(y-1));I&&(e.preventDefault(),I.focus())}if(o===A){var k,M=this.getElementById(S);(k=this.getElementById(S))&&m&&!M.disabled&&(e.preventDefault(),k.focus())}}if("IMG"===s)if(g)e.preventDefault(),this.removeThumbnailPageSelectionTheme(n.parentElement),this.getElementById(A).focus()}if("Enter"===e.key){var T;if("IMG"===s)if(g)if(B=n.id.match(/\d+$/)){var E=parseInt(B[0],10);this.updateScrollTop(E)}if("BUTTON"===s)if(o===A)if(!m&&u)!1===(T=this.getElementById(S)).disabled&&T.focus();else if(m){(V=this.getElementById(b)).focus()}}if("ArrowUp"===e.key||"ArrowDown"===e.key){var B,P=void 0,D=void 0,N=0,F=void 0;if("IMG"===s&&g)if(B=n.id.match(/\d+$/)){var L=(E=parseInt(B[0],10))+("ArrowUp"===e.key?-1:1);N=L,F=this.getElementById(a+"_thumbnail_image_"+N),"ArrowUp"===e.key&&E>0?F&&(this.pdfViewer.thumbnailViewModule.previousElement=F.parentElement):"ArrowDown"===e.key&&E>=0&&F&&(this.pdfViewer.thumbnailViewModule.previousElement=F.parentElement),n&&n.parentElement&&n.parentElement.id&&(P=n.parentElement.id.replace(/(\d+)$/,L.toString())),P&&(D=this.getElementById(P)),D&&(e.preventDefault(),this.removeThumbnailPageSelectionTheme(n.parentElement),this.addThumbnailPageSelectionTheme(D),D.children[0]&&D.children[0].focus())}}}function lt(e,t){var i=e.shiftKey,n=e.target,o=n.tagName,s=this.pdfViewer.dataId,a=s+"_annotation_more_icon",r=s+"_annotation_commentPanel",l=t.previouslyActiveElement;if(i&&"BUTTON"===o&&(n.id===a&&l&&l.parentElement)){var d=void 0;if((u=l.parentElement)&&u.id&&(d=u.id===r),d){var h=this.getElementById(r);if(h){e.preventDefault();var p=h.children[0];p&&p.focus()}}}if("Enter"===e.key&&"DIV"===o){var c=n.classList;if(c.contains("e-pv-comment-title")||c.contains("e-pv-reply-title")){var u=n.parentElement,f=c.contains("e-pv-comment-title")?2:1;u&&u.children&&u.children[f]&&(u.children[f].style.visibility="visible")}}}function dt(e){var t=e.target,i=t.tagName,n=e.shiftKey,o=this.pdfViewer.dataId,s=o+"_pageDiv_0",a=o+"_viewerContainer";if(n&&"DIV"===i&&(t.id===s||t.id===a)){var r=this.pdfViewer.dataId,l=this.getElementById(r+"_sideBarContentContainer"),d=l&&"block"===getComputedStyle(l).display,h=this.getElementById(r+"_bookmark"),p=this.getElementById(r+"_thumbnail-view"),c=this.getElementById(r+"_thumbnail_view"),u=c&&"flex"===getComputedStyle(c).display;if(d||!h||h.disabled){if(!d&&h&&h.disabled)e.preventDefault(),p.focus();else if(d&&u&&h&&!h.disabled)e.preventDefault(),h.focus();else if(d&&!u){e.preventDefault();var f=this.getElementById(r+"_close_btn");f&&f.focus()}}else e.preventDefault(),h.focus()}if(!n&&"Tab"===e.key&&"DIV"===i){var m=this.pdfViewer.dataId,g=(p=this.getElementById(m+"_thumbnail-view"),this.getElementById(m+"_annotation_more_icon")),w=this.getElementById("AnnotationToolbar");w&&w.parentElement&&w.parentElement.parentElement&&getComputedStyle(w.parentElement.parentElement);var y=m+"_viewerContainer",v=m+"_commantPanel";if(t.id===y){var b=this.getElementById(v);if(b&&"block"===getComputedStyle(b).display&&g)e.preventDefault(),g.focus();else{var S=document.querySelectorAll('a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])');S.length>0&&S[0].focus()}}}}function ht(e){var t=e.target,i=e.shiftKey,n=this.pdfViewer.dataId;if(i&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-signatureformfields"))&&0===(r=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===t.id}))))if(this.pdfViewer.currentPageNumber-1>0){e.preventDefault(),this.updateScrollTop(this.pdfViewer.currentPageNumber),this.getElementById(n+"_pageDiv_"+this.pdfViewer.currentPageNumber).focus()}else{var o=this.getElementById(n+"_bookmark"),s=this.getElementById(n+"_thumbnail-view"),a=this.getElementById(n+"_sideBarContentContainer");if("block"===(a&&window.getComputedStyle(a)).display)e.preventDefault(),this.getElementById(n+"_close_btn").focus();else!0!==o.disabled?(e.preventDefault(),o.focus()):!0!==s.disabled&&(e.preventDefault(),s.focus())}if(!i&&"Tab"===e.key&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-signatureformfields"))){var r=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===t.id}));if(this.pdfViewer.formFieldCollections.length-1===r)if(this.pdfViewer.currentPageNumber<=this.pdfViewer.pageCount)e.preventDefault(),this.updateScrollTop(this.pdfViewer.currentPageNumber),this.getElementById(n+"_pageDiv_"+this.pdfViewer.currentPageNumber).focus()}}function pt(e,t){var i=e.target,n=this.pdfViewer.dataId,o=t.previouslyActiveElement;if("Enter"===e.key&&"LI"===i.tagName){var s=i.id;if("EXPORT_ANNOTATION_JSON"===s||"EXPORT_ANNOTATION_XFDF"===s||"IMPORT_ANNOTATION_JSON"===s||"IMPORT_ANNOTATION_XFDF"===s)(a=this.getElementById(n+"_annotation_more_icon")).focus(),e.preventDefault();else if(i.parentElement&&i.parentElement.classList.contains("e-control")&&i.parentElement.classList.contains("e-contextmenu")&&i.parentElement.classList.contains("e-lib")&&i.parentElement.classList.contains("e-menu-parent")){var a=void 0;o&&o.parentElement&&o.parentElement.parentElement&&(a=o.parentElement.parentElement);var r=void 0;a&&((r=a.querySelector(".e-input-group.e-control-container.e-control-wrapper"))?(r.classList.add("e-input-focus"),(r&&r.children[0]).focus(),e.preventDefault()):(o.focus(),e.preventDefault()))}else if(i.parentElement&&i.parentElement.classList.contains("e-menu-parent")&&i.parentElement.classList.contains("e-ul")){a=void 0;var l=void 0;o&&o.parentElement&&(l=(a=o.parentElement).querySelector(".e-pv-more-options-button")),l&&(l.focus(),e.preventDefault())}}}function ct(e){var t=function(e,t){for(;e;){if(e.classList&&e.classList.contains(t))return!0;e=e.parentElement}return!1}(e.target,"e-pdfviewer");if(this.pdfViewer.formDesignerModule&&this.pdfViewer.formDesignerInteraction&&0!==this.pdfViewer.selectedItems.formFields.length&&t)this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id);else if(this.pdfViewer.annotation&&t&&(this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&this.pdfViewer.annotationModule.deleteAnnotation(),this.pdfViewer.selectedItems.annotations.length>0)){var i=this.pdfViewer.selectedItems.annotations[0],n=!0,o=i.shapeAnnotationType;if("Path"===o||"SignatureField"===i.formFieldAnnotationType||"InitialField"===i.formFieldAnnotationType||"HandWrittenSignature"===o||"SignatureText"===o||"SignatureImage"===o){var s=document.getElementById(i.id);s&&s.disabled&&(n=!0)}n||(i.annotationSettings&&i.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",i)&&(this.pdfViewer.remove(i),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))):(this.pdfViewer.remove(i),this.pdfViewer.renderSelector(this.pdfViewer.annotation.getEventPageNumber(e))))}}var ut=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},ft=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}},mt=function(){function e(e,t){this.pdfViewer=null,this.pdfViewerBase=null,this.totalPageElement=null,this.currentPageBoxElementContainer=null,this.currentPageBoxElement=null,this.firstPageElement=null,this.previousPageElement=null,this.nextPageElement=null,this.lastPageElement=null,this.zommOutElement=null,this.zoomInElement=null,this.zoomDropDownElement=null,this.selectToolElement=null,this.handToolElement=null,this.undoElement=null,this.redoElement=null,this.commentElement=null,this.submitFormButton=null,this.searchElement=null,this.annotationElement=null,this.redactElement=null,this.formDesignerElement=null,this.printElement=null,this.downloadElement=null,this.highlightElement=null,this.underlineElement=null,this.strikeThroughElement=null,this.squigglyElement=null,this.shapeElement=null,this.calibrateElement=null,this.stampElement=null,this.freeTextElement=null,this.signatureElement=null,this.inkElement=null,this.annotationFontSizeInputElement=null,this.annotationFontFamilyInputElement=null,this.annotationColorElement=null,this.annotationStrokeColorElement=null,this.annotationThicknessElement=null,this.annotationOpacityElement=null,this.annotationFontColorElement=null,this.annotationFontFamilyElement=null,this.annotationFontSizeElement=null,this.annotationTextAlignElement=null,this.annotationTextColorElement=null,this.annotationTextPropertiesElement=null,this.annotationDeleteElement=null,this.formFieldDeleteElement=null,this.annotationCloseElement=null,this.annotationCommentPanelElement=null,this.mobileToolbarContainerElement=null,this.mobileSearchPreviousOccurenceElement=null,this.mobileSearchNextOccurenceElement=null,this.mobileFormFieldToolbarElement=null,this.cssClass="e-overlay",this.disableClass=" e-overlay",this.editAnnotationButtonElement=null,this.RedactButtonElement=null,this.formDesignerButtonElement=null,this.submitFormOption=!1,this.pdfViewer=e,this.pdfViewerBase=t,this.findToolbarElements()}return e.prototype.findToolbarElements=function(){(this.pdfViewerBase.getElement("_totalPage")&&(this.totalPageElement=this.pdfViewerBase.getElement("_totalPage").children[0]),this.currentPageBoxElementContainer=this.pdfViewerBase.getElement("_currentPageInput"),this.pdfViewerBase.getElement("_currentPageInput")&&(this.currentPageBoxElement=this.pdfViewerBase.getElement("_currentPageInput").children[0].children[0]),this.firstPageElement=this.pdfViewerBase.getElement("_firstPage"),this.updateClassListForToolbarItem(this.firstPageElement),this.previousPageElement=this.pdfViewerBase.getElement("_previousPage"),this.updateClassListForToolbarItem(this.previousPageElement),this.nextPageElement=this.pdfViewerBase.getElement("_nextPage"),this.updateClassListForToolbarItem(this.nextPageElement),this.lastPageElement=this.pdfViewerBase.getElement("_lastPage"),this.updateClassListForToolbarItem(this.lastPageElement),this.zommOutElement=this.pdfViewerBase.getElement("_zoomOut"),this.updateClassListForToolbarItem(this.zommOutElement),this.zoomInElement=this.pdfViewerBase.getElement("_zoomIn"),this.updateClassListForToolbarItem(this.zoomInElement),this.zoomDropDownElement=this.pdfViewerBase.getElement("_zoomDropDown"),this.selectToolElement=this.pdfViewerBase.getElement("_selectTool"),this.handToolElement=this.pdfViewerBase.getElement("_handTool"),this.undoElement=this.pdfViewerBase.getElement("_undo"),this.updateClassListForToolbarItem(this.undoElement),this.redoElement=this.pdfViewerBase.getElement("_redo"),this.updateClassListForToolbarItem(this.redoElement),this.commentElement=this.pdfViewerBase.getElement("_comment"),this.submitFormButton=this.pdfViewerBase.getElement("_submitFormButton"),this.searchElement=this.pdfViewerBase.getElement("_search"),this.updateClassListForToolbarItem(this.searchElement),this.annotationElement=this.pdfViewerBase.getElement("_annotation"),this.redactElement=this.pdfViewerBase.getElement("_redaction"),this.annotationElement&&(this.editAnnotationButtonElement=this.annotationElement.children[0]),this.editAnnotationButtonElement)&&(this.editAnnotationButtonElement.classList.add("e-pv-tbar-btn"),this.editAnnotationButtonElement.childNodes[0].classList.remove("e-icons","e-btn-icon"));(this.redactElement=this.pdfViewerBase.getElement("_redaction"),this.redactElement&&(this.RedactButtonElement=this.redactElement.children[0]),this.RedactButtonElement)&&(this.RedactButtonElement.classList.add("e-pv-tbar-btn"),this.RedactButtonElement.childNodes[0].classList.remove("e-icons","e-btn-icon"));(this.formDesignerElement=this.pdfViewerBase.getElement("_formdesignerContainer"),this.formDesignerElement&&(this.formDesignerButtonElement=this.formDesignerElement.children[0]),this.formDesignerButtonElement)&&(this.formDesignerButtonElement.classList.add("e-pv-tbar-btn"),this.formDesignerButtonElement.childNodes[0].classList.remove("e-icons","e-btn-icon"));this.printElement=this.pdfViewerBase.getElement("_print"),this.updateClassListForToolbarItem(this.printElement),this.downloadElement=this.pdfViewerBase.getElement("_download"),this.updateClassListForToolbarItem(this.downloadElement),this.highlightElement=this.pdfViewerBase.getElement("_highLight"),this.underlineElement=this.pdfViewerBase.getElement("_underline"),this.strikeThroughElement=this.pdfViewerBase.getElement("_strikethrough"),this.squigglyElement=this.pdfViewerBase.getElement("_squiggly"),this.shapeElement=this.pdfViewerBase.getElement("_annotation_shapes"),this.calibrateElement=this.pdfViewerBase.getElement("_annotation_calibrate"),this.stampElement=this.pdfViewerBase.getElement("_annotation_stamp"),this.freeTextElement=this.pdfViewerBase.getElement("_annotation_freeTextEdit"),this.updateClassListForToolbarItem(this.freeTextElement),this.signatureElement=this.pdfViewerBase.getElement("_annotation_signature"),this.updateClassListForToolbarItem(this.signatureElement),this.inkElement=this.pdfViewerBase.getElement("_annotation_ink"),this.pdfViewerBase.getElement("_annotation_fontsize")&&(this.annotationFontSizeInputElement=this.pdfViewerBase.getElement("_annotation_fontsize").children[0].children[0]),this.pdfViewerBase.getElement("_annotation_fontsize")&&(this.annotationFontFamilyInputElement=this.pdfViewerBase.getElement("_annotation_fontname").children[0].children[0]),this.annotationColorElement=this.pdfViewerBase.getElement("_annotation_color"),this.annotationStrokeColorElement=this.pdfViewerBase.getElement("_annotation_stroke"),this.annotationThicknessElement=this.pdfViewerBase.getElement("_annotation_thickness"),this.annotationOpacityElement=this.pdfViewerBase.getElement("_annotation_opacity"),this.annotationFontColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.annotationFontFamilyElement=this.pdfViewerBase.getElement("_annotation_fontname"),this.annotationFontSizeElement=this.pdfViewerBase.getElement("_annotation_fontsize"),this.annotationTextAlignElement=this.pdfViewerBase.getElement("_annotation_textalign"),this.annotationTextColorElement=this.pdfViewerBase.getElement("_annotation_textcolor"),this.annotationTextPropertiesElement=this.pdfViewerBase.getElement("_annotation_textproperties"),this.annotationDeleteElement=this.pdfViewerBase.getElement("_annotation_delete"),this.formFieldDeleteElement=this.pdfViewerBase.getElement("_formdesigner_deleteContainer"),this.annotationCommentPanelElement=this.pdfViewerBase.getElement("_annotation_commentPanel"),this.annotationCloseElement=this.pdfViewerBase.getElement("_annotation_close"),this.mobileToolbarContainerElement=this.pdfViewerBase.getElement("_mobileToolbarContainer"),this.mobileSearchPreviousOccurenceElement=this.pdfViewerBase.getElement("_prev_occurrence"),this.mobileSearchNextOccurenceElement=this.pdfViewerBase.getElement("_next_occurrence"),this.mobileFormFieldToolbarElement=this.pdfViewerBase.getElement("_formdesigner"),this.updateClassListForToolbarItem(this.mobileFormFieldToolbarElement)},e.prototype.isAnnotationSelected=function(){return!!(this.pdfViewer&&this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0)},e.prototype.updateClassListForToolbarItem=function(e){sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(e.childNodes[0])||(e.children[0].classList.add("e-pv-tbar-btn"),sf.base.isNullOrUndefined(e.childNodes[0].childNodes[0])||e.childNodes[0].childNodes[0].classList.remove("e-icons","e-btn-icon"))},e.prototype.loadDocument=function(){return ut(this,void 0,void 0,(function(){var e;return ft(this,(function(t){return e={},this.pdfViewer.enableTextSelection&&this.selectToolElement&&this.pdfViewer.toolbar&&this.selectItem(this.pdfViewer.toolbar.SelectToolElement),this.handToolElement&&this.pdfViewer.toolbar&&this.pdfViewer.toolbar.PanElement&&this.pdfViewer.toolbar.PanElement.classList.contains("e-pv-select")&&this.deselectItem(this.pdfViewer.toolbar.PanElement),this.pdfViewer.enableStickyNotesAnnotation&&this.commentElement&&(this.commentElement.classList.remove(this.cssClass),e.commentValue=!0),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableTextMarkupAnnotation&&(this.highlightElement&&(this.highlightElement.classList.remove(this.cssClass),e.highlightValue=!0),this.underlineElement&&(this.underlineElement.classList.remove(this.cssClass),e.underlineValue=!0),this.strikeThroughElement&&(this.strikeThroughElement.classList.remove(this.cssClass),e.strikeThroughValue=!0),this.squigglyElement&&(this.squigglyElement.classList.remove(this.cssClass),e.squigglyValue=!0)),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableShapeAnnotation&&this.shapeElement&&(this.shapeElement.classList.remove(this.cssClass),e.shapeValue=!0),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation&&this.calibrateElement&&(this.calibrateElement.classList.remove(this.cssClass),e.calibrateValue=!0),this.pdfViewer.enableAnnotation&&this.pdfViewer.enableStampAnnotations&&this.stampElement&&(this.stampElement.classList.remove(this.cssClass),e.stampValue=!0),this.pdfViewer.enableFreeText&&this.freeTextElement&&(this.freeTextElement.classList.remove(this.cssClass),e.freeTextValue=!0),this.pdfViewer.enableHandwrittenSignature&&this.signatureElement&&(this.signatureElement.classList.remove(this.cssClass),e.signatureValue=!0),this.pdfViewer.enableInkAnnotation&&this.inkElement&&(this.inkElement.classList.remove(this.cssClass),e.inkValue=!0),this.annotationCommentPanelElement&&this.pdfViewer.enableCommentPanel&&(this.annotationCommentPanelElement.classList.remove(this.cssClass),e.annotationCommentPanelValue=!0),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableAnnotationToolbar&&this.annotationElement&&(this.annotationElement.classList.remove(this.cssClass),e.editAnnotationMobile=!0),this.pdfViewer.enableDownload&&(e.downloadMobile=!0),this.pdfViewer.enableTextSearch&&this.searchElement&&(this.searchElement.classList.remove(this.cssClass),e.searchMobile=!0),this.pdfViewer.enableCommentPanel&&(e.mobileCommentPanelVisible=!0)),e.redactionOptions=!0,this.getRedactionAnnotationCount(e),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",e,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e})),[2]}))}))},e.prototype.selectItem=function(e){e&&e.classList.add("e-pv-select")},e.prototype.deselectItem=function(e){e&&e.classList.remove("e-pv-select")},e.prototype.showAnnotationToolbar=function(e,t){this.pdfViewer.toolbar&&(this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(e),e?this.pdfViewer.toolbar.selectItem(this.editAnnotationButtonElement):(this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement),t||this.pdfViewerBase.focusViewerContainer()))},e.prototype.showRedactionToolbar=function(e,t){this.pdfViewer.toolbar&&this.pdfViewer.toolbar.redactionToolbarModule&&(this.pdfViewer.toolbar.redactionToolbarModule.adjustViewer(e),e?this.RedactButtonElement&&this.pdfViewer.toolbar.selectItem(this.RedactButtonElement):(this.RedactButtonElement&&this.pdfViewer.toolbar.deSelectItem(this.RedactButtonElement),t||this.pdfViewerBase.focusViewerContainer())),e&&(this.pdfViewer.isAnnotationToolbarVisible&&(this.pdfViewer.isAnnotationToolbarVisible=!1,this.showAnnotationToolbar(!1,!1)),this.pdfViewer.formDesignerInteraction&&this.showFormDesignerToolbar(!1,!1,!1))},e.prototype.showFormDesignerToolbar=function(e,t,i){this.pdfViewer.formDesignerInteraction!==i&&(this.pdfViewer.formDesignerInteraction=i,this.pdfViewer.formDesignerModule&&this.pdfViewer.formDesignerModule.setInteractionMode(i,!0)),this.pdfViewer.formDesignerInteraction&&!sf.base.isNullOrUndefined(this.pdfViewer.isAnnotationToolbarVisible)&&(this.pdfViewer.isAnnotationToolbarVisible=!1),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.formDesignerToolbarModule&&(this.pdfViewer.toolbar.formDesignerToolbarModule.adjustViewer(e),e?this.pdfViewer.toolbar.selectItem(this.formDesignerButtonElement):(this.pdfViewer.toolbar.deSelectItem(this.formDesignerButtonElement),t||this.pdfViewerBase.focusViewerContainer()))},e.prototype.closeAnnotationToolbar=function(){this.pdfViewer.toolbar&&(this.pdfViewer.toolbar.deSelectItem(this.editAnnotationButtonElement),this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.adjustViewer(!1)),this.pdfViewerBase.navigationPane.closeCommentPanelContainer()},e.prototype.resetToolbar=function(){this.pdfViewer.enableAnnotationToolbar&&(this.highlightElement&&!this.isEnabled(this.highlightElement)&&(this.highlightElement.className+=this.disableClass),this.underlineElement&&!this.isEnabled(this.underlineElement)&&(this.underlineElement.className+=this.disableClass),this.strikeThroughElement&&!this.isEnabled(this.strikeThroughElement)&&(this.strikeThroughElement.className+=this.disableClass),this.squigglyElement&&!this.isEnabled(this.squigglyElement)&&(this.squigglyElement.className+=this.disableClass),this.shapeElement&&!this.isEnabled(this.shapeElement)&&(this.shapeElement.className+=this.disableClass),this.calibrateElement&&!this.isEnabled(this.calibrateElement)&&(this.calibrateElement.className+=this.disableClass),this.stampElement&&!this.isEnabled(this.stampElement)&&(this.stampElement.className+=this.disableClass),this.freeTextElement&&!this.isEnabled(this.freeTextElement)&&(this.freeTextElement.className+=this.disableClass),this.signatureElement&&!this.isEnabled(this.signatureElement)&&(this.signatureElement.className+=this.disableClass),this.inkElement&&!this.isEnabled(this.inkElement)&&(this.inkElement.className+=this.disableClass),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass),this.annotationTextColorElement&&!this.isEnabled(this.annotationTextColorElement)&&(this.annotationTextColorElement.className+=this.disableClass),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass),this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass),this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.className+=this.disableClass),this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)&&(this.annotationCommentPanelElement.className+=this.disableClass))},e.prototype.EnableDeleteOption=function(e){var t={};if(null!==this.annotationDeleteElement){var i=0;e?this.annotationDeleteElement.classList.contains(this.cssClass)&&(this.annotationDeleteElement.classList.remove(this.cssClass),t.deleteValue=!0,i++):this.isEnabled(this.annotationDeleteElement)||(this.annotationDeleteElement.className+=this.disableClass,t.deleteValue=!1,i++),this.getRedactionAnnotationCount(t),i>0&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",t,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}},e.prototype.enableDeleteOptionForFormField=function(e){null!==this.formFieldDeleteElement&&(e?this.formFieldDeleteElement.classList.contains(this.cssClass)&&this.formFieldDeleteElement.classList.remove(this.cssClass):this.isEnabled(this.formFieldDeleteElement)||(this.formFieldDeleteElement.className+=this.disableClass),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateDeleteIcon",!e).catch((function(e){throw console.error("Unhandled Exception:",e),e})))},e.prototype.canUndoRedo=function(){var e=!!(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.actionCollection&&this.pdfViewer.annotationModule.actionCollection.length>0),t=!!(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redoCollection&&this.pdfViewer.annotationModule.redoCollection.length>0);this.pdfViewer._dotnetInstance.invokeMethodAsync("updateUndoRedoState",e,t).catch((function(e){throw console.error("Unhandled Exception:",e),e}))},e.prototype.getRedactionAnnotationCount=function(e){var t=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_redaction");if(t){JSON.parse(t);for(var i=JSON.parse(t),n=0;n<i.length;n++){var o=i[n];if(o&&o.annotations&&o.annotations.length>0)return e.redactionValue=!0,!0}}return e.redactionValue=!1,!1},e.prototype.updateUndoRedoButton=function(e,t){var i={};if("undo"===e&&this.undoElement){var n=0;t?this.isEnabled(this.undoElement)&&(i.undoValue=!0,n++):this.isEnabled(this.undoElement)||(this.undoElement.className+=this.disableClass,i.undoValue=!1,n++),this.getRedactionAnnotationCount(i),n>0&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",i,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}if("redo"===e&&this.redoElement){n=0;t?this.isEnabled(this.redoElement)&&(i.redoValue=!0,n++):this.isEnabled(this.redoElement)||(i.redoValue=!1,n++),n>0&&(this.getRedactionAnnotationCount(i),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",i,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e}))),this.canUndoRedo()}},e.prototype.enableTextMarkupAnnotationPropertiesTools=function(e){var t={},i=0;e?(this.annotationColorElement&&this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.classList.remove(this.cssClass),t.fillColor=!0,i++),this.annotationOpacityElement&&this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.classList.remove(this.cssClass),t.opacity=!0,i++)):(this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass,t.opacity=!1,i++),this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass,t.fillColor=!1,i++)),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass,t.fontColor=!1,i++),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass,t.fontFamily=!1,i++),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass,t.fontSize=!1,i++),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass,t.textAlign=!1,i++),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass,t.textStyle=!1,i++),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass,t.strokeColor=!1,i++),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass,t.thickness=!1,i++),i>0&&(this.getRedactionAnnotationCount(t),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",t,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e})))},e.prototype.enableAnnotationPropertiesTool=function(e,t){if(t){var i={},n=void 0;null!=this.pdfViewer&&null!=this.pdfViewer.selectedItems&&null!=this.pdfViewer.selectedItems.annotations&&null!=this.pdfViewer.selectedItems.annotations[0]&&(n=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType);var o=0;e?("Stamp"!==n&&"StickyNotes"!==n&&"Redaction"!==n&&("Ink"!==n&&"HandWrittenSignature"!==n&&(this.annotationColorElement&&this.isLineAnnotationFillColorEnabled()&&this.isEnabled(this.annotationColorElement)?(this.annotationColorElement.classList.remove(this.cssClass),i.fillColor=!0,o++):!this.annotationColorElement||this.isLineAnnotationFillColorEnabled()||this.isEnabled(this.annotationColorElement)||(this.annotationColorElement.className+=this.disableClass,i.fillColor=!1,o++)),this.annotationStrokeColorElement&&this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.classList.remove(this.cssClass),i.strokeColor=!0,o++),this.annotationThicknessElement&&this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.classList.remove(this.cssClass),i.thickness=!0,o++),this.annotationOpacityElement&&this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.classList.remove(this.cssClass),i.opacity=!0,o++)),this.pdfViewer.enableShapeLabel&&(this.annotationFontColorElement&&this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.classList.remove(this.cssClass),i.fontColor=!0,o++),this.annotationFontFamilyElement&&this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.classList.remove(this.cssClass),i.fontFamily=!0,o++),this.annotationFontSizeElement&&this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.classList.remove(this.cssClass),i.fontSize=!0,o++)),"FreeText"!==n&&(this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass,i.textAlign=!1,o++),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass,i.textStyle=!1,o++))):(this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass,i.fillColor=!1,o++),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass,i.strokeColor=!1,o++),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass,i.thickness=!1,o++),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass,i.opacity=!1,o++),this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.className+=this.disableClass,i.deleteValue=!1,o++)),o>0&&(this.getRedactionAnnotationCount(i),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",i,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e})))}},e.prototype.isLineAnnotationFillColorEnabled=function(){var e=this.pdfViewer.selectedItems.annotations[0];if("Perimeter"===e.measureType)return!1;if(("Line"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType||"Distance"===e.measureType)&&!("None"!==e.sourceDecoraterShapes&&"OpenArrow"!==e.sourceDecoraterShapes||"None"!==e.taregetDecoraterShapes&&"OpenArrow"!==e.taregetDecoraterShapes))return!1;return!0},e.prototype.enableFreeTextAnnotationPropertiesTools=function(e,t){var i=this;if(t){var n={},o=0;if(e){var s=function(e,t){e&&i.isEnabled(e)&&(e.classList.remove(i.cssClass),n[""+t]=!0,o++)};(this.annotationColorElement||this.annotationStrokeColorElement||this.annotationThicknessElement||this.annotationOpacityElement||this.annotationFontColorElement||this.annotationFontFamilyElement||this.annotationFontSizeElement||this.annotationTextAlignElement||this.annotationTextPropertiesElement||this.annotationDeleteElement||this.annotationCommentPanelElement)&&(s(this.annotationColorElement,"fillColor"),s(this.annotationStrokeColorElement,"strokeColor"),s(this.annotationThicknessElement,"thickness"),s(this.annotationOpacityElement,"opacity"),s(this.annotationFontColorElement,"fontColor"),s(this.annotationFontFamilyElement,"fontFamily"),s(this.annotationFontSizeElement,"fontSize"),s(this.annotationTextAlignElement,"textAlign"),s(this.annotationTextPropertiesElement,"textStyle"),s(this.annotationDeleteElement,"deleteValue"),s(this.annotationCommentPanelElement,"annotationCommentPanelValue"))}else{var a=function(e,t){e&&!i.isEnabled(e)&&(e.className+=i.disableClass,n[""+t]=!1,o++)};(this.annotationFontFamilyElement||this.annotationFontSizeElement||this.annotationFontColorElement||this.annotationTextAlignElement||this.annotationTextPropertiesElement)&&(a(this.annotationFontFamilyElement,"fontFamily"),a(this.annotationFontSizeElement,"fontSize"),a(this.annotationFontColorElement,"fontColor"),a(this.annotationTextAlignElement,"textAlign"),a(this.annotationTextPropertiesElement,"textStyle"))}o>0&&(this.getRedactionAnnotationCount(n),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",n,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e})))}},e.prototype.enableStampAnnotationPropertiesTools=function(e,t){var i={},n=0;e?(this.annotationDeleteElement&&this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.classList.remove(this.cssClass),i.deleteValue=!0,n++),this.annotationCommentPanelElement&&this.annotationCommentPanelElement.classList.remove(this.cssClass)):(this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.className+=this.disableClass,i.deleteValue=!1,n++),this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)&&(this.annotationCommentPanelElement.className+=this.disableClass)),this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass,i.fillColor=!1,n++),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass,i.strokeColor=!1,n++),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass,i.thickness=!1,n++),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass,i.opacity=!1,n++),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass,i.fontColor=!1,n++),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass,i.fontFamily=!1,n++),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass,i.fontSize=!1,n++),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass,i.textAlign=!1,n++),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass,i.textStyle=!1,n++),n>0&&(this.getRedactionAnnotationCount(i),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",i,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e})))},e.prototype.enableRedactionAnnotationPropertiesTools=function(e,t){var i={fillColor:!1,strokeColor:!1,opacity:!1,thickness:!1,fontColor:!1,fontFamily:!1,fontSize:!1,textAlign:!1,textStyle:!1,deleteValue:!0,annotationCommentPanelValue:!0};this.getRedactionAnnotationCount(i),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",i,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e}))},e.prototype.enableSignaturePropertiesTools=function(e,t){var i={},n=0;e?(this.annotationStrokeColorElement&&this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.classList.remove(this.cssClass),i.strokeColor=!0,n++),this.annotationThicknessElement&&this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.classList.remove(this.cssClass),i.thickness=!0,n++),this.annotationOpacityElement&&this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.classList.remove(this.cssClass),i.opacity=!0,n++),this.annotationDeleteElement&&this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.classList.remove(this.cssClass),i.deleteValue=!0,n++),this.annotationCommentPanelElement&&this.annotationCommentPanelElement.classList.remove(this.cssClass)):(this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass,i.strokeColor=!1,n++),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass,i.thickness=!1,n++),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass,i.opacity=!1,n++),this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.className+=this.disableClass,i.deleteValue=!1,n++),this.annotationCommentPanelElement&&!this.isEnabled(this.annotationCommentPanelElement)&&(this.annotationCommentPanelElement.className+=this.disableClass)),this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass,i.fillColor=!1,n++),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass,i.fontColor=!1,n++),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass,i.fontFamily=!1,n++),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass,i.fontSize=!1,n++),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass,i.textAlign=!1,n++),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass,i.textStyle=!1,n++),n>0&&(this.getRedactionAnnotationCount(i),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",i,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e})))},e.prototype.annotationAdd=function(){var e={},t=0;this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass,e.fillColor=!1,t++),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass,e.strokeColor=!1,t++),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass,e.thickness=!1,t++),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass,e.opacity=!1,t++),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass,e.fontColor=!1,t++),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass,e.fontFamily=!1,t++),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass,e.fontSize=!1,t++),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass,e.textAlign=!1,t++),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass,e.textStyle=!1,t++),t>0&&(this.getRedactionAnnotationCount(e),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",e,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e})))},e.prototype.annotationUnSelect=function(){var e={},t=0;this.annotationColorElement&&!this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.className+=this.disableClass,e.fillColor=!1,t++),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass,e.strokeColor=!1,t++),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass,e.thickness=!1,t++),this.annotationOpacityElement&&!this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.className+=this.disableClass,e.opacity=!1,t++),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass,e.fontColor=!1,t++),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass,e.fontFamily=!1,t++),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass,e.fontSize=!1,t++),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass,e.textAlign=!1,t++),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass,e.textStyle=!1,t++),this.annotationDeleteElement&&!this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.className+=this.disableClass,e.deleteValue=!1,t++),t>0&&(this.getRedactionAnnotationCount(e),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",e,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e})))},e.prototype.annotationSelect=function(e){if("FreeText"===e){var t={},i=0;this.annotationColorElement&&this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.classList.remove(this.cssClass),t.fillColor=!0,i++),this.annotationStrokeColorElement&&this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.classList.remove(this.cssClass),t.strokeColor=!0,i++),this.annotationThicknessElement&&this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.classList.remove(this.cssClass),t.thickness=!0,i++),this.annotationOpacityElement&&this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.classList.remove(this.cssClass),t.opacity=!0,i++),this.annotationFontColorElement&&this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.classList.remove(this.cssClass),t.fontColor=!0,i++),this.annotationFontFamilyElement&&this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.classList.remove(this.cssClass),t.fontFamily=!0,i++),this.annotationFontSizeElement&&this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.classList.remove(this.cssClass),t.fontSize=!0,i++),this.annotationTextAlignElement&&this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.classList.remove(this.cssClass),t.textAlign=!0,i++),this.annotationTextPropertiesElement&&this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.classList.remove(this.cssClass),t.textStyle=!0,i++),this.annotationDeleteElement&&(this.annotationDeleteElement.classList.remove(this.cssClass),t.deleteValue=!0,i++),this.annotationCommentPanelElement&&(this.annotationCommentPanelElement.classList.remove(this.cssClass),t.annotationCommentPanelValue=!0,i++);var n=null,o=null;this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0].fontFamily&&this.pdfViewer.selectedItems.annotations[0].fontSize&&(n=this.pdfViewer.selectedItems.annotations[0].fontFamily,o=this.pdfViewer.selectedItems.annotations[0].fontSize+"px"),i>0&&(this.getRedactionAnnotationCount(t),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",t,this.isAnnotationSelected(),n,o).catch((function(e){throw console.error("Unhandled Exception:",e),e})))}if("Shape"===e||"Measure"===e){t={},i=0;this.annotationColorElement&&this.isLineAnnotationFillColorEnabled()&&this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.classList.remove(this.cssClass),t.fillColor=!0,i++),this.annotationStrokeColorElement&&this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.classList.remove(this.cssClass),t.strokeColor=!0,i++),this.annotationThicknessElement&&this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.classList.remove(this.cssClass),t.thickness=!0,i++),this.annotationOpacityElement&&this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.classList.remove(this.cssClass),t.opacity=!0,i++),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass,t.fontColor=!1,i++),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass,t.fontFamily=!1,i++),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass,t.fontSize=!1,i++),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass,t.textAlign=!1,i++),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass,t.textStyle=!1,i++),this.annotationDeleteElement&&(this.annotationDeleteElement.classList.remove(this.cssClass),t.deleteValue=!0,i++),this.annotationCommentPanelElement&&(this.annotationCommentPanelElement.classList.remove(this.cssClass),t.annotationCommentPanelValue=!0,i++),i>0&&(this.getRedactionAnnotationCount(t),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",t,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e})))}if("Stamp"===e||"Ink"===e||"StickyNotes"===e){t={},i=0;"Ink"===e&&(this.annotationStrokeColorElement&&this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.classList.remove(this.cssClass),t.strokeColor=!0,i++),this.annotationThicknessElement&&this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.classList.remove(this.cssClass),t.thickness=!0,i++),this.annotationOpacityElement&&this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.classList.remove(this.cssClass),t.opacity=!0,i++)),this.annotationDeleteElement&&(this.annotationDeleteElement.classList.remove(this.cssClass),t.deleteValue=!0,i++),this.annotationCommentPanelElement&&(this.annotationCommentPanelElement.classList.remove(this.cssClass),t.annotationCommentPanelValue=!0,i++),i>0&&(this.getRedactionAnnotationCount(t),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",t,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e})))}if("TextMarkup"===e){t={},i=0;this.annotationColorElement&&this.isEnabled(this.annotationColorElement)&&(this.annotationColorElement.classList.remove(this.cssClass),t.fillColor=!0,i++),this.annotationDeleteElement&&this.isEnabled(this.annotationDeleteElement)&&(this.annotationDeleteElement.classList.remove(this.cssClass),t.deleteValue=!0,i++),this.annotationStrokeColorElement&&!this.isEnabled(this.annotationStrokeColorElement)&&(this.annotationStrokeColorElement.className+=this.disableClass,t.strokeColor=!1,i++),this.annotationThicknessElement&&!this.isEnabled(this.annotationThicknessElement)&&(this.annotationThicknessElement.className+=this.disableClass,t.thickness=!1,i++),this.annotationOpacityElement&&this.isEnabled(this.annotationOpacityElement)&&(this.annotationOpacityElement.classList.remove(this.cssClass),t.opacity=!0,i++),this.annotationFontColorElement&&!this.isEnabled(this.annotationFontColorElement)&&(this.annotationFontColorElement.className+=this.disableClass,t.fontColor=!1,i++),this.annotationFontFamilyElement&&!this.isEnabled(this.annotationFontFamilyElement)&&(this.annotationFontFamilyElement.className+=this.disableClass,t.fontFamily=!1,i++),this.annotationFontSizeElement&&!this.isEnabled(this.annotationFontSizeElement)&&(this.annotationFontSizeElement.className+=this.disableClass,t.fontSize=!1,i++),this.annotationTextAlignElement&&!this.isEnabled(this.annotationTextAlignElement)&&(this.annotationTextAlignElement.className+=this.disableClass,t.textAlign=!1,i++),this.annotationTextPropertiesElement&&!this.isEnabled(this.annotationTextPropertiesElement)&&(this.annotationTextPropertiesElement.className+=this.disableClass,t.textStyle=!1,i++),i>0&&(this.getRedactionAnnotationCount(t),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",t,this.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e})))}this.annotationDeleteElement&&this.annotationDeleteElement.classList.remove(this.cssClass),this.annotationCommentPanelElement&&this.annotationCommentPanelElement.classList.remove(this.cssClass)},e.prototype.updateFontFamilyInIcon=function(e){this.annotationFontFamilyInputElement&&(this.annotationFontFamilyInputElement.value=e)},e.prototype.updateFontSizeInIcon=function(e){var t=e.toString()+"px";this.annotationFontSizeInputElement&&(this.annotationFontSizeInputElement.value=t)},e.prototype.enableSearchItems=function(e){e&&this.mobileSearchPreviousOccurenceElement&&this.mobileSearchNextOccurenceElement?(this.mobileSearchPreviousOccurenceElement.classList.remove(this.cssClass),this.mobileSearchNextOccurenceElement.classList.remove(this.cssClass)):(this.mobileSearchPreviousOccurenceElement&&!this.isEnabled(this.mobileSearchPreviousOccurenceElement)&&(this.mobileSearchPreviousOccurenceElement.className+=this.disableClass),this.mobileSearchNextOccurenceElement&&!this.isEnabled(this.mobileSearchNextOccurenceElement)&&(this.mobileSearchNextOccurenceElement.className+=this.disableClass))},e.prototype.tapOnMobileDevice=function(e){null!=this.mobileToolbarContainerElement&&(this.mobileToolbarContainerElement.style.display=e?"none":"block")},e.prototype.isEnabled=function(e){return!e||e.classList.contains(this.cssClass)},e}(),gt={};function wt(e,t){if(e.target){var i,n=sf.base.isNullOrUndefined(t)?sf.base.createElement:t,o=function(e,t){var i=t("div",{});i.classList.add("e-spinner-pane");var n=t("div",{});return n.classList.add("e-spinner-inner"),e.appendChild(i),i.appendChild(n),{wrap:i,innerWrap:n}}(e.target,n);if(sf.base.isNullOrUndefined(e.cssClass)||o.wrap.classList.add(e.cssClass),sf.base.isNullOrUndefined(e.template)&&sf.base.isNullOrUndefined(null)){var s=sf.base.isNullOrUndefined(e.type)?function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")}(o.wrap):e.type;i=function(e,t){var i;switch(t){case"Material":case"Material3":case"Fluent2":case"Tailwind3":case"Fabric":i=30;break;case"Bootstrap4":i=36;break;default:i=30}return e=e?parseFloat(e+""):i,"Bootstrap"===t?e:e/2}(sf.base.isNullOrUndefined(e.width)?void 0:e.width,s),function(e,t,i,n){var o=t.querySelector(".e-spinner-inner"),s=o.querySelector("svg");sf.base.isNullOrUndefined(s)||o.removeChild(s);switch(e){case"Material":!function(e,t,i){var n=yt();gt[""+n]={timeOut:0,type:"Material",radius:t},bt(e,n,i,"e-spin-material"),At(t,e,"Material","e-spin-material")}(o,i,n);break;case"Material3":!function(e,t,i){var n=yt();gt[""+n]={timeOut:0,type:"Material3",radius:t},bt(e,n,i,"e-spin-material3"),At(t,e,"Material3","e-spin-material3")}(o,i,n);break;case"Fabric":!function(e,t,i){var n=yt();gt[""+n]={timeOut:0,type:"Fabric",radius:t},vt(e,n,"e-spin-fabric"),It(t,e,"e-spin-fabric")}(o,i);break;case"Bootstrap":!function(e,t,i){var n=yt();gt[""+n]={timeOut:0,type:"Bootstrap",radius:t},function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class","e-spin-bootstrap"),n.setAttribute("viewBox","0 0 64 64"),e.insertBefore(n,e.firstChild);for(var o=0;o<=7;o++){var s=document.createElementNS("http://www.w3.org/2000/svg","circle");s.setAttribute("class","e-path-circle_"+o),s.setAttribute("r","2"),s.setAttribute("transform","translate(32,32)"),n.appendChild(s)}}(e,n),function(e,t){var i=e.querySelector("svg.e-spin-bootstrap");i.style.width=i.style.height=t+"px";for(var n=90,o=0;o<=7;o++){var s=kt(0,0,24,n),a=i.querySelector(".e-path-circle_"+o);a.setAttribute("cx",s.x+""),a.setAttribute("cy",s.y+""),n=n>=360?0:n,n+=45}}(e,t)}(o,i);break;case"HighContrast":!function(e,t,i){var n=yt();gt[""+n]={timeOut:0,type:"HighContrast",radius:t},vt(e,n,"e-spin-high-contrast"),It(t,e,"e-spin-high-contrast")}(o,i);break;case"Bootstrap4":!function(e,t,i){var n=yt();gt[""+n]={timeOut:0,type:"Bootstrap4",radius:t},bt(e,n,i,"e-spin-bootstrap4"),At(t,e,"Bootstrap4","e-spin-bootstrap4")}(o,i,n);break;case"Bootstrap5":!function(e,t,i){var n=yt();gt[""+n]={timeOut:0,type:"Bootstrap5",radius:t},bt(e,n,i,"e-spin-bootstrap5"),At(t,e,"Bootstrap5","e-spin-bootstrap5")}(o,i,n);break;case"Tailwind":!function(e,t,i){var n=yt();gt[""+n]={timeOut:0,type:"Tailwind",radius:t},vt(e,n,"e-spin-tailwind"),It(t,e,"e-spin-tailwind")}(o,i);break;case"Fluent":!function(e,t,i){var n=yt();gt[""+n]={timeOut:0,type:"Fluent",radius:t},vt(e,n,"e-spin-fluent"),It(t,e,"e-spin-fluent")}(o,i);break;case"Fluent2":!function(e,t,i){var n=yt();gt[""+n]={timeOut:0,type:"Fluent2",radius:t},vt(e,n,"e-spin-fluent2"),It(t,e,"e-spin-fluent2")}(o,i);break;case"Tailwind3":!function(e,t,i){var n=yt();gt[""+n]={timeOut:0,type:"Tailwind3",radius:t},bt(e,n,i,"e-spin-tailwind3"),At(t,e,"Tailwind3","e-spin-tailwind3")}(o,i,n)}}(s,o.wrap,i,n),sf.base.isNullOrUndefined(e.label)||function(e,t,i){var n=i("div",{});n.classList.add("e-spin-label"),n.textContent=t,e.appendChild(n)}(o.innerWrap,e.label,n)}else{var a=sf.base.isNullOrUndefined(e.template)?null:e.template;o.wrap.classList.add("e-spin-template"),function(e,t,i){sf.base.isNullOrUndefined(i)||e.classList.add(i);e.querySelector(".e-spinner-inner").innerHTML=t}(o.wrap,a,null)}o.wrap.classList.add("e-spin-hide"),o=null}}function yt(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}function vt(e,t,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("id",t),o.setAttribute("class",i);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class","e-path-circle");var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("class","e-path-arc"),e.insertBefore(o,e.firstChild),o.appendChild(s),o.appendChild(a)}function bt(e,t,i,n){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("class",n),o.setAttribute("id",t);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class","e-path-circle"),e.insertBefore(o,e.firstChild),o.appendChild(s)}function St(e){!function(e,t,i,n,o,s,a){var r=++a.globalInfo[a.uniqueID].previousId,l=(new Date).getTime(),d=t-e,h=(u=2*a.globalInfo[a.uniqueID].radius+"",parseFloat(u)),p=xt(h),c=-90*(a.globalInfo[a.uniqueID].count||0);var u;!function t(o){var a=Math.max(0,Math.min((new Date).getTime()-l,n));!function(e,t){if(!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))||!sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3"))){var i=void 0;if(sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material"))||sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3"))||sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))?sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-fluent2"))||sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-fluent2").querySelector("path.e-path-circle"))?sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-tailwind3"))||sf.base.isNullOrUndefined(t.querySelector("svg.e-spin-tailwind3").querySelector("path.e-path-circle"))||(i=t.querySelector("svg.e-spin-tailwind3")):i=t.querySelector("svg.e-spin-fluent2"):i=t.querySelector("svg.e-spin-material3"):i=t.querySelector("svg.e-spin-material"),!sf.base.isNullOrUndefined(i)){var n=i.querySelector("path.e-path-circle");n.setAttribute("stroke-dashoffset",Vt(h,p,e,s)+""),n.setAttribute("transform","rotate("+c+" "+h/2+" "+h/2+")")}}}(i(a,e,d,n),o.container),r===o.globalInfo[o.uniqueID].previousId&&a<n?gt[o.uniqueID].timeOut=setTimeout(t.bind(null,o),1):St(o)}(a)}(1,149,Ct,1333,e.globalInfo[e.uniqueID].count,75,e),e.globalInfo[e.uniqueID].count=++e.globalInfo[e.uniqueID].count%4}function At(e,t,i,n){var o=2*e,s=t.querySelector("svg."+n),a=s.querySelector("path.e-path-circle"),r=xt(o),l=o/2+"px";s.setAttribute("viewBox","0 0 "+o+" "+o),s.style.width=s.style.height=o+"px",s.style.transformOrigin=l+" "+l+" "+l,a.setAttribute("d",function(e,t){var i=e/2,n=t/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(o,r)),"Material"!==i&&"Material3"!==i||(a.setAttribute("stroke-width",r+""),a.setAttribute("stroke-dasharray",(o-r)*Math.PI*.75+""),a.setAttribute("stroke-dashoffset",Vt(o,r,1,75)+"")),"Tailwind3"===i&&a.setAttribute("stroke-width",r+"")}function xt(e){return.1*e}function Vt(e,t,i,n){return(e-t)*Math.PI*(3*n/100-i/100)}function Ct(e,t,i,n){var o=(e/=n)*e,s=o*e;return t+i*(6*s*o+-15*o*o+10*s)}function It(e,t,i){var n=e,o=e,s=2*e,a=t.querySelector("."+i),r=a.querySelector(".e-path-circle"),l=a.querySelector(".e-path-arc"),d=s/2+"px";r.setAttribute("d",function(e,t,i){return["M",e,t,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ")}(n,o,e)),l.setAttribute("d",function(e,t,i,n,o){var s=kt(e,t,i,o),a=kt(e,t,i,n);return["M",s.x,s.y,"A",i,i,0,0,0,a.x,a.y].join(" ")}(n,o,e,315,45)),a.setAttribute("viewBox","0 0 "+s+" "+s),a.style.transformOrigin=d+" "+d+" "+d,a.style.width=a.style.height=s+"px"}function kt(e,t,i,n){var o=(n-90)*Math.PI/180;return{x:e+i*Math.cos(o),y:t+i*Math.sin(o)}}function Mt(e){Tt(e,!1),e=null}function Tt(e,t){var i;if(e&&(i=e.classList.contains("e-spinner-pane")?e:e.querySelector(".e-spinner-pane")),e&&i){var n=i.querySelector(".e-spinner-inner");if(t?!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-hide"):!i.classList.contains("e-spin-template")&&!i.classList.contains("e-spin-show")){var o=i.querySelector("svg");if(sf.base.isNullOrUndefined(o))return;var s=o.getAttribute("id");switch(gt[""+s].isAnimate=!t,gt[""+s].type){case"Material":case"Material3":case"Fluent2":case"Tailwind3":t?clearTimeout(gt[""+s].timeOut):function(e,t,i){var n={};gt[""+t].timeOut=0,n[""+t]=function(e,t,i,n){return{radius:t,count:i,previousId:n}}(0,i,0,0),St({uniqueID:t,container:e,globalInfo:n,timeOutVar:0})}(n,s,gt[""+s].radius);break;case"Bootstrap":t?clearTimeout(gt[""+s].timeOut):function(e){for(var t,i,n,o,s,a=e.querySelector("svg.e-spin-bootstrap").getAttribute("id"),r=1;r<=8;r++){l(e.getElementsByClassName("e-path-circle_"+(8===r?0:r))[0],r,r,(t=void 0,i=void 0,n=void 0,o=void 0,s=void 0,t=[],n=r,o=!1,s=1,function e(a){t.push(a),(a!==n||1===s)&&(a<=i&&a>1&&!o?a=parseFloat((a-.2).toFixed(2)):1===a?(a=7,a=parseFloat((a+.2).toFixed(2)),o=!0):a<8&&o?8===(a=parseFloat((a+.2).toFixed(2)))&&(o=!1):a<=8&&!o&&(a=parseFloat((a-.2).toFixed(2))),++s,e(a))}(i=r),t),a)}function l(e,t,i,n,o){var s=0;!function t(i){gt[""+o].isAnimate&&(++s,e.setAttribute("r",i+""),s>=n.length&&(s=0),gt[""+o].timeOut=setTimeout(t.bind(null,n[s]),18))}(t)}}(n)}}t?sf.base.classList(i,["e-spin-hide"],["e-spin-show"]):sf.base.classList(i,["e-spin-show"],["e-spin-hide"]),e=null}}function Et(e){Tt(e,!0),e=null}var Bt,Pt,Dt,Nt,Ft,Lt,Ot,Rt,zt,Ht,Ut,jt,_t,Wt,qt=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.getContextMenuStatus=function(){var e=!1;return this.pdfViewer.selectedItems&&0!==this.pdfViewer.selectedItems.annotations.length&&(e=this.pdfViewer.selectedItems.annotations[0].annotationSettings.isLock),e},e.prototype.createContextMenu=function(){var e=this,t=document.getElementsByClassName(this.pdfViewer.dataId+"_context_menu");if(t){if(this.contextMenuElement=t[0],this.contextMenuElement.children&&this.contextMenuElement.children.length>0){var i=this.contextMenuElement.children[0];i.className=i.className+" e-pv-context-menu"}if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.selectionRangeArray.length>0){var n=document.getElementById("Copy");n&&n.addEventListener("click",(function(){e.pdfViewerBase.OnItemSelected("Copy")}))}}},e.prototype.open=function(e,t,i,n){this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenContextMenu",e,t,n).catch((function(e){throw console.error("Unhandled Exception:",e),e}))},e.prototype.close=function(){this.pdfViewer._dotnetInstance.invokeMethodAsync("CloseContextMenu").catch((function(e){throw console.error("Unhandled Exception:",e),e}))},e.prototype.destroy=function(){this.previousAction="",this.contextMenuElement=null},e.prototype.OnItemSelected=function(e){/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.selectionRangeArray.length>0&&"Copy"===e||("string"==typeof e?this.pdfViewerBase.OnItemSelected(e):this.pdfViewerBase.OnItemSelected(e[0]))},e}();function Zt(){var e=this,t=document.getElementById(this.pdfViewer.dataId);if(t){this.blazorUIAdaptor=new mt(this.pdfViewer,this),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.element.classList.add("e-pv-mobile-view");var i=void 0;if(this.viewerMainContainer=t.querySelector(".e-pv-viewer-main-container"),this.viewerContainer=t.querySelector(".e-pv-viewer-container"),this.viewerContainer.addEventListener("focus",this.tabElementOnFocus.bind(this)),this.viewerContainer.addEventListener("blur",this.escElementOnFocus.bind(this)),document.addEventListener("keydown",(function(t){"Tab"===t.key&&(e.lastInputMethod="Tab")})),document.addEventListener("mousedown",(function(t){e.lastInputMethod=null})),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.createMobilePageNumberContainer(),this.viewerContainer.tabIndex=-1,this.pdfViewer.enableRtl&&(this.viewerContainer.style.direction="rtl"),t.style.touchAction="pan-x pan-y",this.setMaximumHeight(t),this.mainContainer=t.querySelector(".e-pv-main-container"),this.mainContainer.appendChild(this.viewerMainContainer),t.appendChild(this.mainContainer),this.applyViewerHeight(this.mainContainer),this.pdfViewer.toolbarModule?(this.navigationPane.initializeNavigationPane(),i=this.pdfViewer.toolbarModule.intializeToolbar("100%")):(this.navigationPane.initializeNavigationPane(),i=this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.pdfViewer.enableToolbar||(this.toolbarHeight=0,i.style.display="none"),!this.pdfViewer.enableNavigationToolbar&&(sf.base.Browser.isDevice&&this.pdfViewer.enableDesktopMode||!sf.base.Browser.isDevice)&&(this.navigationPane.sideBarToolbar.style.display="none",this.navigationPane.sideBarToolbarSplitter.style.display="none",(this.navigationPane.isBookmarkOpen||this.navigationPane.isThumbnailOpen)&&this.navigationPane.updateViewerContainerOnClose())),i){var n=i.clientHeight;this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,n)}else this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0);var o=this.pdfViewer.element.clientWidth;sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(o=o-(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0)-(this.navigationPane.commentPanelContainer?this.navigationPane.getViewerContainerRight():0)),this.viewerContainer.style.width=o+"px",sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.left=o-parseFloat(this.mobileScrollerContainer.style.width)+"px",this.mobilePageNoContainer.style.left=o/2-parseFloat(this.mobilePageNoContainer.style.width)/2+"px",this.mobilePageNoContainer.style.top=this.pdfViewer.element.clientHeight/2+"px",this.mobilePageNoContainer.style.display="none",this.mobilePageNoContainer.appendChild(this.mobilecurrentPageContainer),this.mobilePageNoContainer.appendChild(this.mobilenumberContainer),this.mobilePageNoContainer.appendChild(this.mobiletotalPageContainer),this.viewerContainer.appendChild(this.mobilePageNoContainer),this.viewerMainContainer.appendChild(this.mobileScrollerContainer),this.mobileScrollerContainer.appendChild(this.mobileSpanContainer)),this.pageContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_pageViewContainer",className:"e-pv-page-container",attrs:{"aria-label":"pdfviewer Page View",role:"document"}}),this.pdfViewer.enableRtl&&(this.pageContainer.style.direction="ltr"),this.viewerContainer.appendChild(this.pageContainer),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",i&&this.pdfViewer.thumbnailViewModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)&&this.pdfViewer.thumbnailViewModule.createThumbnailContainer(),this.createPrintPopup();var s=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_loadingIndicator"});this.viewerContainer.appendChild(s),wt({target:s,cssClass:"e-spin-center"}),this.setLoaderProperties(s),this.contextMenuModule=new qt(this.pdfViewer,this);var a=document.getElementsByClassName(this.pdfViewer.dataId+"_spinner");a&&a[0]&&!a[0].classList.contains("e-spin-hide")&&(a[0].classList.remove("e-spin-show"),a[0].classList.add("e-spin-hide")),this.contextMenuModule.createContextMenu(),this.createFileInputElement(),this.wireEvents(),!this.pdfViewer.textSearchModule||sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.textSearchModule.createTextSearchBox()}}function Yt(e){var t=this.customCommands;if(0!==Object.keys(t).length){var i=JSON.parse(t),n=this.getModifiers(e);if(null!=n&&e.keyCode){var o={modifiers:n,keyCode:e.keyCode,name:""},s=i.find((function(e){return e.Gesture&&e.Gesture.keyCode===o.keyCode&&e.Gesture.modifiers===o.modifiers}));null!=s&&(o.name=s.name,o.modifiers=s.Gesture.modifiers,o.keyCode=s.Gesture.keyCode,this.pdfViewer.triggerEventData("CommandExecuted",o))}}}function Xt(){var e="";e=sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?decodeURI(window.sessionStorage.getItem(this.documentId+"_hashId")):window.sessionStorage.getItem(this.documentId+"_hashId");var t=window.sessionStorage.getItem("documentLiveCount");if(null!==e){var i={hashId:e,documentLiveCount:t,action:"Unload",elementId:this.pdfViewer.dataId},n=window.sessionStorage.getItem("unload");this.clearCache(n,i,this)}window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_pagedata"),window.sessionStorage.removeItem(this.documentId+"_hashId"),window.sessionStorage.removeItem("documentLiveCount"),window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload")}function Gt(){sf.base.Browser.isDevice&&sf.base.Browser.isAndroid&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.enableAnnotationToolbar&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.createCustomStampElement(),this.signatureModule&&this.signatureModule.createSignatureFileElement()}function Jt(){null===this.pdfViewer.fileName&&(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.uploadedDocumentName?(this.pdfViewer.fileName=this.pdfViewer.toolbarModule.uploadedDocumentName,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="Untitled.pdf",this.jsonDocumentId=null))}function Kt(e){this.pdfViewer.showNotificationDialog||""===e||(this.textLayer.createNotificationPopup(e),this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content"))}function Qt(e){var t=this;if(this.pdfViewer.showNotificationDialog){if("Client error"===e)this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Clienterror").then((function(e){t.textLayer.createNotificationPopup(e)}));else if("CORS policy error"===e){this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Corspolicyerror").then((function(e){t.textLayer.createNotificationPopup(e)}))}else{this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Servererror").then((function(e){t.textLayer.createNotificationPopup(e)}))}this.getElement("_notify")&&this.getElement("_notify").classList.add("e-pv-notification-large-content")}}function $t(e){this.pdfViewer.isFormFieldDocument!==e&&(this.pdfViewer.isFormFieldDocument=e,this.pdfViewer.updatePdfViewerOptions("IsFormFieldDocument",this.pdfViewer.isFormFieldDocument))}function ei(){this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot&&(this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.remove(this.pdfViewer.selectedItems.annotations[0]),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),this.pdfViewer.renderDrawing(),this.tool=null),this.isAlreadyAdded=!1,this.pdfViewer.annotationModule.stampAnnotationModule.isNewStampAnnot=!1)}function ti(){var e=this.getElement("_sideBarContentContainer");e&&"none"===window.getComputedStyle(e).display?this.navigationPane.updateViewerContainerOnClose():e&&"block"===window.getComputedStyle(e).display?this.navigationPane.updateViewerContainerOnExpand():this.updateViewerContainerSize(),this.pdfViewer.toolbarModule&&!this.isSidebarResized&&(this.pdfViewer.enableToolbar||this.pdfViewer.enableAnnotationToolbar)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RefreshToolbarItems")}function ii(){this.pdfViewer.isSmartComponent?this.pdfViewer.element.style.width="100%":"auto"!==this.pdfViewer.width.toString()&&(this.pdfViewer.element.style.width=this.pdfViewer.width)}function ni(){this.pdfViewer.isSmartComponent?this.pdfViewer.element.style.height="100%":"auto"!==this.pdfViewer.height.toString()&&(this.pdfViewer.element.style.height=this.pdfViewer.height)}function oi(e){var t=e.getBoundingClientRect();(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode||t&&0===t.height)&&(e.style.minHeight="500px"),this.updateWidth(),this.updateHeight()}function si(e){var t=e.getBoundingClientRect();sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&t&&0===t.height&&(e.style.minHeight="500px")}function ai(e){if(null===e||"HTML"===e.nodeName)return null;var t=getComputedStyle(e);return this.viewerContainer.id===e.id||"scroll"!==t.overflowY&&"auto"!==t.overflowY?this.getScrollParent(e.parentNode):e}function ri(e){this.isFreeTextContextMenu=!1;var t=!1;if(this.isSelection=!0,this.pdfViewer.blazorAction&=~Wt.AnnotationAdding,0===e.button&&!this.getPopupNoteVisibleStatus()&&!this.isClickedOnScrollBar(e,!1)){this.isViewerMouseDown=!0;var i=e.target;1===e.detail&&"e-pdfviewer-formFields"!==i.className&&"free-text-input"!==i.className&&(t=!0,this.focusViewerContainer(!0)),this.scrollPosition=this.viewerContainer.scrollTop/this.getZoomFactor(),this.mouseX=e.clientX,this.mouseY=e.clientY,this.mouseLeft=e.clientX,this.mouseTop=e.clientY;var n=!!document.documentMode;!this.pdfViewer.textSelectionModule||this.isClickedOnScrollBar(e,!0)||this.isTextSelectionDisabled||(n||"e-pdfviewer-formFields"===i.className||"e-pdfviewer-ListBox"===i.className||"e-pv-formfield-dropdown"===i.className||"e-pv-formfield-listbox"===i.className||"e-pv-formfield-input"===i.className||"e-pv-formfield-textarea"===i.className||e.preventDefault(),"e-pv-droplet"!==i.className&&this.pdfViewer.textSelectionModule.clearTextSelection())}this.isClickedOnScrollBar(e,!1)&&(this.isViewerMouseDown=!0),this.isPanMode&&(this.dragX=e.pageX,this.dragY=e.pageY,this.viewerContainer.contains(e.target)&&e.target!==this.viewerContainer&&e.target!==this.pageContainer&&this.isPanMode&&(this.viewerContainer.style.cursor="grabbing")),this.isShapeBasedAnnotationsEnabled()&&this.diagramMouseDown(e),!this.pdfViewer.annotationModule.textMarkupAnnotationModule.isAnnotationSelect&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(e),this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule.accordionContainer&&(t||(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isEditableElement=!1,this.updateCommentPanel(),t=!0)),this.isTouchDesignerMode=!1,this.hideContextMenuItems(e)}function li(e){if(this.pdfViewer.lastAnnotation&&isNaN(this.pdfViewer.lastAnnotation.wrapper.offsetX)&&isNaN(this.pdfViewer.lastAnnotation.wrapper.offsetY)&&isNaN(this.pdfViewer.lastAnnotation.wrapper.bounds.height)&&isNaN(this.pdfViewer.lastAnnotation.wrapper.bounds.width)&&this.pdfViewer.remove(this.pdfViewer.lastAnnotation),this.pdfViewer.lastAnnotation=null,!this.getPopupNoteVisibleStatus()){this.isViewerMouseDown&&(this.scrollHoldTimer&&(clearTimeout(this.scrollHoldTimer),this.scrollHoldTimer=null),this.scrollPosition*this.getZoomFactor()!==this.viewerContainer.scrollTop&&this.pageViewScrollChanged(this.currentPageNumber));var t=!1;if(e.target){if("e-pv-show-designer-name"===e.target.className&&""!==e.target.id.split("_",1)){var i=document.getElementById(e.target.id.split("_",1));i&&(t=i.disabled)}"foreign-object"===e.target.className&&e.target.children[0]&&(t=e.target.children[0].disabled)}t&&this.pdfViewer.annotation&&this.pdfViewer.annotation.clearSelection(),this.isShapeBasedAnnotationsEnabled()&&!t&&(this.diagramMouseUp(e),this.pdfViewer.annotation&&this.pdfViewer.annotation.onAnnotationMouseUp()),this.isSelection=!1;for(var n=document.getElementsByClassName("e-pv-comments-div"),o=0;o<n.length;o++)n[o].classList.remove("e-focused");var s=document.getElementsByClassName("e-pv-reply-div");for(o=0;o<s.length;o++)s[o].classList.remove("e-focused");var a=document.getElementById(this.pdfViewer.dataId+"_commantPanel");if(a&&"block"===a.style.display&&this.pdfViewer.selectedItems&&0!==this.pdfViewer.selectedItems.annotations.length){var r=document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);r&&(r.classList.contains("e-pv-comments-border")||(r.firstElementChild&&r.firstElementChild.children.length>=1&&r.firstElementChild.children[1].firstElementChild?r.firstElementChild.children[1].firstElementChild.click():r.firstElementChild&&r.firstElementChild.click()))}if(0===e.button&&!this.isClickedOnScrollBar(e,!1)){var l=e.target,d=e.clientX,h=e.clientY,p=this.getZoomFactor(),c=this.currentPageNumber;if(l){var u=l.id.split("_text_")[1]||l.id.split("_textLayer_")[1]||l.id.split("_annotationCanvas_")[1]||l.id.split("_pageDiv_")[1];c=parseInt(u,10)}var f=this.getElement("_pageDiv_"+c);if(f){var m=f.getBoundingClientRect();d=(e.clientX-m.left)/p,h=(e.clientY-m.top)/p}l&&l.classList&&!l.classList.contains("e-pv-hyperlink")&&!l.classList.contains("e-pv-page-container")&&(this.pdfViewer.firePageClick(d,h,c+1),this.pdfViewer.formFieldsModule&&this.pdfViewer.formFieldsModule.removeFocus()),this.isTextMarkupAnnotationModule()&&!this.isToolbarInkClicked&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseUp(e),this.viewerContainer.contains(e.target)&&e.target!==this.viewerContainer&&e.target!==this.pageContainer&&this.isPanMode&&(this.viewerContainer.style.cursor="move",this.viewerContainer.style.cursor="-webkit-grab",this.viewerContainer.style.cursor="-moz-grab",this.viewerContainer.style.cursor="grab")}this.isViewerMouseDown=!1}}function di(e){if(this.isViewerMouseWheel=!0,this.getRerenderCanvasCreated()&&e.preventDefault(),e.ctrlKey){var t=25;this.pdfViewer.magnification&&this.pdfViewer.magnification.zoomFactor<1&&(t=10),this.pdfViewer.magnification&&this.pdfViewer.magnification.zoomFactor>=2&&(t=50),this.isTouchPad&&!this.isMacSafari&&(t/=this.zoomInterval),this.pdfViewer.magnification&&(e.wheelDelta>0?this.pdfViewer.magnification.initiateMouseZoom(e.x,e.y,100*this.pdfViewer.magnification.zoomFactor+t):this.pdfViewer.magnification.initiateMouseZoom(e.x,e.y,100*this.pdfViewer.magnification.zoomFactor-t)),this.isTouchPad=!1}this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.pageRerenderOnMouseWheel(),e.ctrlKey&&e.preventDefault(),this.pdfViewer.magnificationModule.fitPageScrollMouseWheel(e)),this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.isViewerMouseDown&&(e.target.classList.contains("e-pv-text")||this.pdfViewer.textSelectionModule.textSelectionOnMouseWheel(this.currentPageNumber-1))}function hi(e){this.mouseX=e.clientX,this.mouseY=e.clientY;var t=!!document.documentMode,i=e.target;if("Drag"===this.action&&e.preventDefault(),this.isViewerMouseDown&&"Perimeter"!==this.action&&"Polygon"!==this.action&&"Line"!==this.action&&"DrawTool"!==this.action&&"Distance"!==this.action)if(this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection&&!this.isTextSelectionDisabled&&!this.getPopupNoteVisibleStatus())if(t){var n=window.getSelection();n.type||n.isCollapsed||null===n.anchorNode||(this.pdfViewer.textSelectionModule.isTextSelection=!0)}else{"e-pdfviewer-formFields"!==e.target.className&&e.preventDefault(),this.mouseX=e.clientX,this.mouseY=e.clientY;var o=this.pdfViewer.annotationModule;o&&o.textMarkupAnnotationModule&&o.textMarkupAnnotationModule.isDropletClicked&&o.textMarkupAnnotationModule.isEnableTextMarkupResizer(o.textMarkupAnnotationModule.currentTextMarkupAddMode)?o.textMarkupAnnotationModule.textSelect(e.target,this.mouseX,this.mouseY):this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(e.target,this.mouseX,this.mouseY)}else this.skipPreventDefault(i)&&e.preventDefault();if(this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationMouseMove(e),this.isPanMode&&this.panOnMouseMove(e),this.isShapeBasedAnnotationsEnabled()){var s=void 0;if(e.target&&(e.target.id.indexOf("_text")>-1||e.target.parentElement.classList.contains("foreign-object")||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink")||e.target.classList.contains("e-pdfviewer-formFields")||e.target.classList.contains("e-pdfviewer-signatureformfields"))&&this.pdfViewer.annotation){var a=this.pdfViewer.annotation.getEventPageNumber(e),r=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+a);if(r){var l=r.getBoundingClientRect(),d=l.x?l.x:l.left,h=l.y?l.y:l.top;s=this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation&&"Image"===this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType?new sf.drawings.Rect(d,h,l.width-10,l.height-10):new sf.drawings.Rect(d+10,h+10,l.width-10,l.height-10)}}var p=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.stampAnnotationModule:null;!s||!s.containsPoint({x:this.mouseX,y:this.mouseY})||p&&p.isStampAnnotSelected?(this.diagramMouseLeave(e),this.isAnnotationDrawn&&"Ink"!==this.action&&"DrawTool"!==this.action&&"Rotate"!==this.action&&(this.diagramMouseUp(e),this.isAnnotationAdded=!0)):(this.diagramMouseMove(e),this.annotationEvent=e),this.pdfViewer.enableStampAnnotations&&p&&p.isStampAnnotSelected&&(this.pdfViewer.tool="Stamp",this.tool=new Pr(this.pdfViewer,this),this.isMouseDown=!0,p.isStampAnnotSelected=!1,p.isNewStampAnnot=!0),this.isSignatureAdded&&this.pdfViewer.enableHandwrittenSignature&&(this.pdfViewer.tool="Stamp",this.tool=new Pr(this.pdfViewer,this),this.isMouseDown=!0,this.isSignatureAdded=!1,this.isNewSignatureAdded=!0)}}function pi(e){this.isViewerMouseDown&&this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.textSelectionOnMouseLeave(e),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.isTextSelection&&e.preventDefault(),this.pdfViewer.drawingObject&&"Redaction"===this.pdfViewer.drawingObject.type&&this.tool&&this.tool.inAction&&this.viewerContainerOnMouseup(e)}function ci(){this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.clear()}function ui(e){var t=!!document.documentMode;this.isViewerMouseDown&&(t||e.preventDefault())}function fi(e){var t=this;if("dblclick"===e.type){if(!this.pdfViewer.textSelectionModule||this.isTextSelectionDisabled||this.getCurrentTextMarkupAnnotation())this.getCurrentTextMarkupAnnotation();else if(e.target.classList.contains("e-pv-text")){if(this.isViewerContainerDoubleClick=!0,!this.getTextMarkupAnnotationMode()){var i=parseFloat(e.target.id.split("_")[2]);this.pdfViewer.fireTextSelectionStart(i+1)}this.pdfViewer.textSelectionModule.selectAWord(e.target,e.clientX,e.clientY,!1),"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&this.pdfViewer.textSelectionModule.calculateContextMenuPosition(e.clientY,e.clientX),this.getTextMarkupAnnotationMode()?this.isTextMarkupAnnotationModule()&&this.getTextMarkupAnnotationMode()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode):(this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),this.dblClickTimer=setTimeout((function(){t.applySelection()}),100),this.pdfViewer.textSelectionModule.fireTextSelectEnd())}if(this.action&&("Perimeter"===this.action||"Polygon"===this.action)&&this.tool){this.eventArgs.position=this.currentPosition,this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source);this.isMetaKey(e);var n={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};this.eventArgs.info=n,this.eventArgs.clickCount=e.detail,this.eventArgs.isTouchMode=!1,this.tool.mouseUp(this.eventArgs,!0)}if(this.pdfViewer.selectedItems||this.pdfViewer.annotation&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){var o=this.pdfViewer.selectedItems.annotations,s=this.pdfViewer.selectedItems.annotations[0],a=void 0;if(this.pdfViewer.enableFormDesigner&&s&&s.id&&s.id.includes("_content")){var r=s.id.split("_content")[0];a=this.pdfViewer.formDesignerCollections&&this.pdfViewer.formDesignerCollections.find((function(e){return e.id===r}))}if(!o||0===o.length||s.annotationSettings.isLock||s.isLocked){if(this.pdfViewer.annotation&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){var l=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation,d=document.getElementById(l.annotName);d&&d.firstElementChild&&d.firstElementChild.click(),this.pdfViewer.annotationModule.annotationSelect(l.annotName,this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage,l,null,!0)}}else if(this.pdfViewer.annotationModule&&!s.formFieldAnnotationType&&(!a||"SignatureField"!==a.type)){var h=s.annotName?s.annotName:s.signatureName;if(this.pdfViewer.annotationModule.annotationSelect(h,s.pageIndex,s,null,!0),!1===this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&o[0])if(!0===this.isFreeTextAnnotation(o)){var p={};p.x=o[0].bounds.x,p.y=o[0].bounds.y;var c=this;setTimeout((function(){c.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(p,c.pdfViewer.selectedItems.annotations[0],null,!0)}),200)}else if(!0===o[0].enableShapeLabel){var u={};u.x=o[0].bounds.x,u.y=o[0].bounds.y,this.pdfViewer.annotation.inputElementModule.editLabel(u,o[0])}else{var f=document.getElementById(o[0].annotName);f&&(f.classList.contains("e-pv-comments-border")||this.pdfViewer.annotationModule.showCommentsPanelInBlazor())}}}if(this.pdfViewer.formDesignerInteraction&&this.pdfViewer.selectedItems.formFields.length>0){var m=this.pdfViewer.formDesignerModule.getFormFieldByID(this.pdfViewer.selectedItems.formFields[0].id);m&&null!==m.pageNumber&&this.pdfViewer.fireFormFieldDoubleClickEvent("FormFieldDoubleClick",m,!1)}}else 3===e.detail&&(this.isViewerContainerDoubleClick&&(clearTimeout(this.dblClickTimer),this.isViewerContainerDoubleClick=!1),!this.pdfViewer.textSelectionModule||this.isTextSelectionDisabled||this.getTextMarkupAnnotationMode()||(this.pdfViewer.textSelectionModule.selectEntireLine(e),this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!0,!1),this.pdfViewer.textSelectionModule.fireTextSelectEnd(),this.applySelection()))}function mi(e){var t=!!/ipad|iphone|ipod|mac/.test(navigator.userAgent.toLowerCase()),i=!!t&&e.metaKey,n=this.customCommands;if(0!==Object.keys(n).length&&this.fireCustomCommands(e),!this.isFreeTextAnnotationModule()||!this.pdfViewer.annotationModule||!0!==this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&!0!==this.pdfViewer.annotationModule.inputElementModule.isInFocus){var o=document.activeElement,s=!0;if("INPUT"!==o.tagName&&"TEXTAREA"!==o.tagName||(s=!1),e.shiftKey)switch(e.keyCode){case 72:"INPUT"===o.tagName&&"password"===o.type&&(s=!1),s&&this.checkVisibility(".e-pv-pan-tool-icon.e-pv-icon.e-icon-left")&&(e.preventDefault(),this.initiatePanning(),this.focusViewerContainer());break;case 86:"INPUT"===o.tagName&&"password"===o.type&&(s=!1),s&&this.checkVisibility(".e-pv-text-select-tool-icon.e-pv-icon.e-icon-left")&&(e.preventDefault(),this.initiateTextSelection(),this.focusViewerContainer())}if(e.ctrlKey||i){if(e.shiftKey&&!t||t&&!e.shiftKey)switch(e.keyCode){case 38:case 33:e.preventDefault(),1!==this.currentPageNumber&&this.updateScrollTop(0);break;case 40:case 34:e.preventDefault(),this.currentPageNumber!==this.pageCount&&this.updateScrollTop(this.pageCount-1)}switch(e.keyCode){case 79:this.pdfViewer.toolbarModule&&this.pdfViewer.enableToolbar&&this.checkVisibility(".e-toolbar-item.e-pv-open-document-container")&&this.pdfViewer.toolbarModule.openFileDialogBox(e);break;case 67:this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection&&!this.isTextSelectionDisabled&&s&&(e.preventDefault(),this.pdfViewer.textSelectionModule.copyText()),this.isCommentElement()||(this.pdfViewer.selectedItems.annotations.length||this.pdfViewer.selectedItems.formFields.length)&&(this.pdfViewer.copy(),this.contextMenuModule.previousAction="Copy");break;case 70:this.pdfViewer.textSearchModule&&this.pdfViewer.enableTextSearch&&this.checkVisibility(".e-toolbar-item.e-pv-text-search-container")&&(e.preventDefault(),this.pdfViewer.toolbarModule.textSearchButtonHandler());break;case 80:this.pdfViewer.printModule&&this.pdfViewer.enablePrint&&this.checkVisibility(".e-toolbar-item.e-pv-print-document-container")&&(e.preventDefault(),this.pdfViewer.print.print());break;case 83:this.checkVisibility(".e-toolbar-item.e-pv-download-document-container")&&(e.preventDefault(),this.pdfViewer.download());break;case 90:this.pdfViewer.annotationModule&&this.checkVisibility(".e-toolbar-item.e-pv-undo-container")&&this.pdfViewer.annotationModule.undo();break;case 88:this.isCommentElement()||(this.pdfViewer.selectedItems.annotations.length||this.pdfViewer.selectedItems.formFields.length)&&(this.pdfViewer.cut(),this.contextMenuModule.previousAction="Cut");break;case 89:this.pdfViewer.annotationModule&&this.checkVisibility(".e-toolbar-item.e-pv-redo-container")&&this.pdfViewer.annotationModule.redo();break;case 86:this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&s&&(this.pdfViewer.paste(),this.contextMenuModule.previousAction="Paste");break;case 71:e.preventDefault();var a=document.querySelector(".e-control.e-numerictextbox.e-lib.e-input");this.pdfViewer.toolbarModule&&this.pdfViewer.enableToolbar&&null!=a&&"none"!==a.style.display&&(a.blur(),a.focus());break;case 48:if(e.altKey){e.preventDefault();var r=document.getElementById(this.pdfViewer.dataId+"_commantPanel");this.pageCount>0&&r&&"none"===r.style.display&&this.checkVisibility(".e-toolbar-item.e-pv-annotation-container")?(this.pdfViewer.commentPanelVisible=!0,this.pdfViewer.isAnnotationToolbarVisible=!0,this.pdfViewer.commentPanelVisible&&(this.pdfViewer.updatePdfViewerOptions("CommentPanelVisible",!0),this.pdfViewer.annotationModule.showCommentsPanelInBlazor())):(this.pdfViewer.commentPanelVisible=!1,this.pdfViewer.commentPanelVisible||(this.pdfViewer.updatePdfViewerOptions("CommentPanelVisible",!1),this.navigationPane.closeCommentPanelContainer()))}break;case 49:if(e.altKey){e.preventDefault();var l=document.getElementById(this.pdfViewer.dataId+"_thumbnail-view");this.pageCount>0&&l&&"none"!==window.getComputedStyle(l).display&&this.navigationPane.sideToolbarOnClick(e),this.focusViewerContainer()}break;case 50:if(e.altKey){e.preventDefault();var d=this.pdfViewer.element.querySelector(".e-pv-bookmark-view");if(d&&d.children[0])d.children[0].classList.contains("e-pv-bookmark-disable-icon")||(e.preventDefault(),this.navigationPane.openBookmarkcontentInitially(),this.focusViewerContainer())}break;case 65:if(e.shiftKey){if(this.checkVisibility(".e-toolbar-item.e-pv-annotation-container")){e.preventDefault();var h=!this.pdfViewer.isAnnotationToolbarVisible;this.pdfViewer._dotnetInstance.invokeMethodAsync("AnnotationBarUpdate",h),this.pdfViewer.isAnnotationToolbarVisible=h}var p=document.querySelector(".e-control.e-btn.e-lib.e-tbar-btn.e-tbtn-txt.e-pv-highlight.e-pv-tbar-btn");p&&p.focus(),this.focusViewerContainer()}}}else if(this.pdfViewer.annotationModule&&"Delete"===e.key){var c=document.activeElement;("e-pdfviewer-formFields"===e.target.className||"INPUT"===c.tagName||"TEXTAREA"===c.tagName)&&"e-control e-textbox e-lib e-input"!==e.target.className||c.isContentEditable||this.DeleteKeyPressed(e)}this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.magnifyBehaviorKeyDown(e,s)}}function gi(e){var t=e.target.classList,i=e.target,n=e.shiftKey,o=e.key,s=!1,a=!1;i.classList&&(s=i.classList.contains("e-menu-item"),a=i.classList.contains("e-contextmenu"));var r=i?i.id:null,l=this.pdfViewer.dataId,d=l+"_search",h=l+"_search_input",p=l+"_prev_occurrence",c=l+"_next_occurrence",u=l+"_match_case",f=document.getElementById(l+"_search_box");n||s||a||"Enter"!==o&&"Tab"!==o||(this.previouslyActiveElement=document.activeElement),n&&(this.shiftPreviouslyActiveElement=document.activeElement),n||"Tab"!==o||(this.previouslyActiveThumbnailElement=document.activeElement),n&&(this.shiftPreviouslyActiveThumbnailElement=document.activeElement);sf.base.isNullOrUndefined(t)||["e-pv-viewer-container","e-enable-text-selection","e-pdfviewer-formFields","e-pdfviewer-signatureformfields-signature"].some((function(e){return t.contains(e)}))||!this.pdfViewer.enableToolbar||(this.previousShiftTabElement=document.activeElement);var m=!!!!/ipad|iphone|ipod|mac/.test(navigator.userAgent.toLowerCase())&&e.metaKey;if(!(this.isFreeTextAnnotationModule()&&this.pdfViewer.annotationModule&&(!0===this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus||!0===this.pdfViewer.annotationModule.inputElementModule.isInFocus)||e.ctrlKey&&m))switch(e.keyCode){case 46:var g=document.activeElement;("e-pdfviewer-formFields"===e.target.className||"INPUT"===g.tagName||"TEXTAREA"===g.tagName)&&"e-control e-textbox e-lib e-input"!==e.target.className||g.isContentEditable||this.DeleteKeyPressed(e);break;case 27:if(!i.parentElement||i.parentElement.id!==d&&r!==h&&r!==p&&r!==c&&r!==u){if(this.pdfViewer.toolbar){this.pdfViewer.toolbar.addInkAnnotation(),this.pdfViewer.toolbar.deSelectCommentAnnotation(),this.updateStampItems(),this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.deselectAllItemsInBlazor(),this.pdfViewer.enableFormDesigner&&this.pdfViewer.formDesignerInteraction&&this.removeFromFieldHelper(),this.pdfViewer.tool="";w=document.getElementById(this.pdfViewer.dataId+"_viewerContainer");sf.base.isNullOrUndefined(w)||(w.classList.add("e-focused"),this.focusViewerContainer())}else if(this.pdfViewer.annotationModule){this.pdfViewer.annotationModule.shapeAnnotationModule.currentAnnotationMode="",this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="",this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot=!1,this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot=!1,this.updateStampItems(),this.pdfViewer.tool="",this.pdfViewer.tool="Select",this.action="Select",this.tool=this.getTool(this.action);w=document.getElementById(this.pdfViewer.dataId+"_viewerContainer");sf.base.isNullOrUndefined(w)||(w.classList.add("e-focused"),this.focusViewerContainer())}}else{if(!this.pdfViewer.toolbar.isTextSearchBoxDisplayed){var w=document.getElementById(this.pdfViewer.dataId+"_viewerContainer");sf.base.isNullOrUndefined(w)||(w.classList.add("e-focused"),this.focusViewerContainer())}this.pdfViewer.toolbar.isTextSearchBoxDisplayed=!1,this.pdfViewer.textSearchModule.showSearchBox(!1);var y=this.getElementById(d),v=this.getElementById("toolbarContainer_nav"),b=void 0;(T=this.getElementById("toolbarContainer_popup"))&&(b=T.getElementsByClassName("e-pv-text-search-container")),!v&&i.parentElement&&i.parentElement.id!==d?(e.preventDefault(),y&&y.children[0]&&y.children[0].focus()):v&&b&&b.length>0?(e.preventDefault(),v.focus()):v&&b&&0===b.length&&y&&y.children[0]&&(e.preventDefault(),y.children[0].focus())}break;case 9:if(e.target&&e.target.id&&this.pdfViewer.formFieldCollections){var S=void 0,A=void 0,x=e.target;(x=e.target).id.split("_input")[0];if("e-pdfviewer-formFields"!==x.className&&"e-pv-viewer-container e-enable-text-selection"===x.className){if((S=e.shiftKey&&"Tab"===e.key?(A=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===x.id})))>0?this.pdfViewer.formFieldCollections[A-1]:this.previousShiftTabElement:(A=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===x.id})))+1<this.pdfViewer.formFieldCollections.length?this.pdfViewer.formFieldCollections[A+1]:this.pdfViewer.formFieldCollections[0])&&S===this.previousShiftTabElement){var V=document.getElementById(S.id);V&&V.focus()}else S?e.target.id!==this.pdfViewer.dataId+"_viewerContainer"&&this.pdfViewer.focusFormField(S):(S=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.length-1],this.pdfViewer.focusFormField(S));e.preventDefault()}}if(e.target&&e.target.id&&this.pdfViewer.formDesignerModule)for(var C=0;C<this.pdfViewer.formDesignerCollections.length;C++){var I=this.pdfViewer.formDesignerCollections[C];if(e.target.id===I.id){I&&null!==I.pageNumber&&this.pdfViewer.fireFormFieldEvent("FormFieldFocusOut",I,I.pageNumber);break}}if(f&&"block"===getComputedStyle(f).display){if(!n&&"Tab"===o){if(r===u){var k=this.getElementById("toolbarContainer_nav");b=void 0;if((T=this.getElementById("toolbarContainer_popup"))&&(b=T.getElementsByClassName("e-pv-annotation-container")),k&&b&&b.length>0)e.preventDefault(),k.focus();else e.preventDefault(),(R=this.getElementById(l+"_annotation").children[0])&&R.focus()}if("BUTTON"===i.tagName&&i.parentElement&&i.parentElement.id===d)e.preventDefault(),this.getElementById(l+"_search_input_container").classList.add("e-input-focus"),this.getElementById(h).focus()}if(n){if("BUTTON"===i.tagName&&i.parentElement&&i.parentElement.id===l+"_annotation")e.preventDefault(),this.getElementById(l+"_match_case").focus();if(r===h){e.preventDefault();var M=document.getElementById(d).children[0];M&&M.focus()}if("DIV"===i.tagName){var T;b=void 0;if((T=document.getElementById("toolbarContainer_popup"))&&(b=T.getElementsByClassName("e-pv-annotation-container")),"toolbarContainer_nav"===r&&b&&b.length>0)e.preventDefault(),this.getElementById(l+"_match_case").focus()}}}if(e.shiftKey){var E={previouslyActiveElement:this.previouslyActiveElement,previouslyActiveThumbnailElement:this.previouslyActiveThumbnailElement,shiftPreviouslyActiveElement:this.shiftPreviouslyActiveElement,shiftPreviouslyActiveThumbnailElement:this.shiftPreviouslyActiveThumbnailElement},B=(W=e.target).tagName,P=W.id,D=W.parentElement,N=P===(U=this.pdfViewer.dataId)+"_thumbnail-view",F=P===U+"_bookmark",L=P===U+"_close_btn",O=P===U+"_annotation_more_icon",R=U+"_annotation",z=U+"_highLight",H=U+"_annotation_commentPanel";"BUTTON"===B?(D&&D.id===z&&this.previouslyActiveElement&&this.previouslyActiveElement.parentElement&&this.previouslyActiveElement.parentElement.id===R&&this.tabOrderNavigation(e,"navigateAnnotationToolbarTabOrder",E),(N||F||L)&&this.tabOrderNavigation(e,"navigateBookmarkThumbnailTabOrder",E),O&&this.previouslyActiveElement&&this.previouslyActiveElement.parentElement&&this.previouslyActiveElement.parentElement.id===H&&this.tabOrderNavigation(e,"navigateCommentPanelTabOrder",E)):W.classList.contains("e-pv-thumbnail-image")||W.classList.contains("e-list-item")?this.tabOrderNavigation(e,"navigateBookmarkThumbnailTabOrder",E):"DIV"===B?this.tabOrderNavigation(e,"navigateViewerContainerTabOrder",E):(W.classList.contains("e-pdfviewer-formFields")||W.classList.contains("e-pdfviewer-signatureformfields"))&&this.tabOrderNavigation(e,"navigateFormFieldTabOrder",E)}else if(!e.shiftKey&&"Tab"===e.key){E={previouslyActiveElement:this.previouslyActiveElement,previouslyActiveThumbnailElement:this.previouslyActiveThumbnailElement,shiftPreviouslyActiveElement:this.shiftPreviouslyActiveElement,shiftPreviouslyActiveThumbnailElement:this.shiftPreviouslyActiveThumbnailElement},B=(W=e.target).tagName,P=W.id,D=W.parentElement,N=P===(U=this.pdfViewer.dataId)+"_thumbnail-view",F=P===U+"_bookmark",L=P===U+"_close_btn";var U,j=U+"_download",_=U+"_annotation_close";"BUTTON"===B?(D&&D.id===j&&this.tabOrderNavigation(e,"navigatePrimaryToolbarTabOrder",E),D&&D.id===_&&!W.classList.contains("e-pv-notification-dialog")&&this.tabOrderNavigation(e,"navigateAnnotationToolbarTabOrder",E),(N||F||L)&&this.tabOrderNavigation(e,"navigateBookmarkThumbnailTabOrder",E)):"IMG"===B&&W.classList.contains("e-pv-thumbnail-image")?this.tabOrderNavigation(e,"navigateBookmarkThumbnailTabOrder",E):"DIV"===B?this.tabOrderNavigation(e,"navigateViewerContainerTabOrder",E):(W.classList.contains("e-pdfviewer-formFields")||W.classList.contains("e-pdfviewer-signatureformfields"))&&this.tabOrderNavigation(e,"navigateFormFieldTabOrder",E)}break;case 13:if("Enter"===o){E={previouslyActiveElement:this.previouslyActiveElement,previouslyActiveThumbnailElement:this.previouslyActiveThumbnailElement,shiftPreviouslyActiveElement:this.shiftPreviouslyActiveElement,shiftPreviouslyActiveThumbnailElement:this.shiftPreviouslyActiveThumbnailElement},B=(W=e.target).tagName,P=W.id;"IMG"===B&&W.classList.contains("e-pv-thumbnail-image")&&this.tabOrderNavigation(e,"navigateBookmarkThumbnailTabOrder",E),"BUTTON"===B&&P===this.pdfViewer.dataId+"_close_btn"&&this.tabOrderNavigation(e,"navigateBookmarkThumbnailTabOrder",E),"DIV"===B&&this.tabOrderNavigation(e,"navigateCommentPanelTabOrder",E),"LI"===B&&this.tabOrderNavigation(e,"navigateContextMenuTabOrder",E)}break;case 38:if("ArrowUp"===o){E={previouslyActiveElement:this.previouslyActiveElement,previouslyActiveThumbnailElement:this.previouslyActiveThumbnailElement,shiftPreviouslyActiveElement:this.shiftPreviouslyActiveElement,shiftPreviouslyActiveThumbnailElement:this.shiftPreviouslyActiveThumbnailElement};"IMG"===(W=e.target).tagName&&this.tabOrderNavigation(e,"navigateBookmarkThumbnailTabOrder",E)}break;case 40:if("ArrowDown"===o){var W;E={previouslyActiveElement:this.previouslyActiveElement,previouslyActiveThumbnailElement:this.previouslyActiveThumbnailElement,shiftPreviouslyActiveElement:this.shiftPreviouslyActiveElement,shiftPreviouslyActiveThumbnailElement:this.shiftPreviouslyActiveThumbnailElement};"IMG"===(W=e.target).tagName&&W.classList.contains("e-pv-thumbnail-image")&&this.tabOrderNavigation(e,"navigateBookmarkThumbnailTabOrder",E)}}}function wi(e){var t,i;if(null===(t=this.pdfViewer)||void 0===t?void 0:t.isSmartComponent){var n=this.pdfViewer.element,o=document.getElementById(this.pdfViewer.dataId+"_SmartPdfViewerSplitter"),s=null==o?void 0:o.lastElementChild;if(n&&o&&n.id&&o.id&&o.id.includes("_")&&(null===(i=null==s?void 0:s.classList)||void 0===i?void 0:i.contains("e-split-bar"))&&s.classList.contains("e-split-bar-active")){var a=n.id.split("_")[0],r=o.id.split("_");r.length>1&&a===r[0]&&"SmartPdfViewerSplitter"===r[1]&&this.updateViewerContainer()}}}function yi(e){this.isFreeTextContextMenu=!1,this.isNewStamp=!1,this.signatureAdded=!1;var t=this.pdfViewer.annotationModule;if(t&&t.textMarkupAnnotationModule&&t.textMarkupAnnotationModule.isEnableTextMarkupResizer(t.textMarkupAnnotationModule.currentTextMarkupAddMode)){var i=t.textMarkupAnnotationModule;i.isLeftDropletClicked=!1,i.isDropletClicked=!1,i.isRightDropletClicked=!1,i.currentTextMarkupAnnotation||null!==window.getSelection().anchorNode?i.currentTextMarkupAnnotation||""!==i.currentTextMarkupAddMode||(i.isTextMarkupAnnotationMode=!1):i.showHideDropletDiv(!0)}if(!this.getPopupNoteVisibleStatus()){if(0===e.button){if(this.isNewFreeTextAnnotation()){var n=sf.base.Browser.isDevice?this.getTextMarkupAnnotationMode():!this.getTextMarkupAnnotationMode();if(this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&n){1!==e.detail||this.viewerContainer.contains(e.target)||this.contextMenuModule.contextMenuElement.contains(e.target)||null!==window.getSelection().anchorNode&&this.pdfViewer.textSelectionModule.textSelectionOnMouseup(e);var o=e.target;this.viewerContainer.contains(e.target)&&"e-pdfviewer-formFields"!==o.className&&"e-pv-formfield-input"!==o.className&&"e-pv-formfield-textarea"!==o.className&&(this.isClickedOnScrollBar(e,!0)||this.isScrollbarMouseDown?null!==window.getSelection().anchorNode&&this.pdfViewer.textSelectionModule.applySpanForSelection():this.pdfViewer.textSelectionModule.textSelectionOnMouseup(e))}else if(this.getTextMarkupAnnotationMode()){var s=this.pdfViewer.element,a=e.target;s&&a&&t&&s.id.split("_")[0]===a.id.split("_")[0]&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode)}}}else 2===e.button&&this.viewerContainer.contains(e.target)&&this.skipPreventDefault(e.target)&&this.checkIsNormalText()&&window.getSelection().removeAllRanges();if(t){var r=t.actionCollection.length-1;t.actionCollection[r-1]&&t.actionCollection[r-1].annotation&&"FreeText"===t.actionCollection[r-1].annotation.shapeAnnotationType&&this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode&&(this.pdfViewer.drawingObject=new U)}return!this.isViewerMouseDown||(this.isViewerMouseDown=!1,this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&(this.pdfViewer.textSelectionModule.clear(),this.pdfViewer.textSelectionModule.selectionStartPage=null),e.preventDefault(),e.stopPropagation(),!1)}return!1}function vi(e){this.signatureAdded=!1,this.pdfViewer.element.contains(e.target)||this.contextMenuModule.contextMenuElement.contains(e.target)||this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.clearTextSelection()}function bi(e){this.pdfViewer.enableRtl?(this.viewerContainer.style.right=(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0)+"px",this.viewerContainer.style.left=(this.navigationPane.commentPanelContainer?this.navigationPane.commentPanelContainer.offsetWidth:0)+"px"):(this.viewerContainer.style.left=(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0)+"px",this.viewerContainer.style.right=(this.navigationPane.commentPanelContainer?this.navigationPane.commentPanelContainer.offsetWidth:0)+"px");var t=(this.pdfViewer.element.clientWidth>0?this.pdfViewer.element.clientWidth:this.pdfViewer.element.style.width)-(this.navigationPane.sideBarToolbar?this.navigationPane.getViewerContainerLeft():0)-(this.navigationPane.commentPanelContainer?this.navigationPane.getViewerContainerRight():0);if(this.viewerContainer.style.width=t+"px",this.pdfViewer.toolbarModule){var i=this.pdfViewer.element.querySelector(".e-pv-toolbar"),n=0;i&&(n=i.getBoundingClientRect().height,sf.base.Browser.isDevice&&(this.toolbarHeight=i.getBoundingClientRect().height));var o=this.pdfViewer.element.querySelector(".e-pv-annotation-toolbar"),s=this.pdfViewer.element.querySelector(".e-pv-formdesigner-toolbar"),a=this.pdfViewer.element.querySelector(".e-pv-blazor-redaction-toolbar"),r=0,l=0,d=0;o&&(r=o.getBoundingClientRect().height),s&&(l=s.getBoundingClientRect().height),a&&(d=a.getBoundingClientRect().height),this.viewerContainer.style.height=r>0?this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,n+r):d>0?this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,n+d):l>0?this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,n+l):this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,n)}else this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0);if(this.pdfViewer.bookmarkViewModule&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var h=this.getElement("_bookmarks_container");h&&(h.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,0))}"0px"===this.viewerContainer.style.height&&("auto"===this.pdfViewer.height.toString()?(this.pdfViewer.height=500,this.viewerContainer.style.height=this.pdfViewer.height+"px"):this.viewerContainer.style.height=this.pdfViewer.element.style.height),"0px"===this.viewerContainer.style.width&&("auto"===this.pdfViewer.width.toString()?(this.pdfViewer.width=500,this.viewerContainer.style.width=this.pdfViewer.width+"px"):this.viewerContainer.style.width=this.pdfViewer.element.style.width),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",0===this.viewerContainer.clientWidth&&(this.pageContainer.style.width=this.pdfViewer.element.style.width),this.pdfViewer.enableToolbar&&this.pdfViewer.thumbnailViewModule&&(this.pdfViewer.thumbnailViewModule.gotoThumbnailImage(this.currentPageNumber-1),this.navigationPane.sideBarToolbar&&this.navigationPane.sideBarContentContainer&&(this.navigationPane.sideBarContentContainer.style.height=this.viewerContainer.style.height)),!this.pdfViewer.textSearchModule||sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.textSearchModule.textSearchBoxOnResize(),0!==t&&(this.navigationPane.isBookmarkListOpen||this.updateZoomValue()),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?(this.mobileScrollerContainer.style.left=t-parseFloat(this.mobileScrollerContainer.style.width)+"px",this.mobilePageNoContainer.style.left=t/2-parseFloat(this.mobilePageNoContainer.style.width)/2+"px",this.mobilePageNoContainer.style.top=this.pdfViewer.element.clientHeight/2+"px",this.updateMobileScrollerPosition(),this.updateCommentPanelasTabletSize()):(this.navigationPane.setResizeIconTop(),this.navigationPane.setCommentPanelResizeIconTop(),e&&"resize"===e.type&&this.signatureModule.updateCanvasSize()),this.navigationPane.sideBarToolbar&&(this.navigationPane.sideBarToolbar.style.height=this.viewerContainer.style.height)}function Si(){this.viewerContainer.style.width=this.pdfViewer.element.clientWidth+"px",this.pageContainer.style.width=this.viewerContainer.offsetWidth+"px",this.updateZoomValue()}function Ai(e){this.isTouchPad=e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||Math.abs(e.deltaY)<60:0===e.deltaMode}function xi(e){e.preventDefault(),e.stopPropagation(),this.macGestureStartScale=this.pdfViewer.magnification.zoomFactor}function Vi(e){var t=this;e.preventDefault(),e.stopPropagation();var i=e.clientX,n=e.clientY,o=Number((this.macGestureStartScale*e.scale).toFixed(2));this.isMacGestureActive||(this.isMacGestureActive=!0,this.pdfViewer.magnification.initiateMouseZoom(i,n,100*o),setTimeout((function(){t.isMacGestureActive=!1}),70))}function Ci(e,t){var i=!1;return e&&this.setScrollDownValue(t.type,!1),this.viewerContainer.clientWidth+this.viewerContainer.offsetLeft<t.clientX&&t.clientX<this.viewerContainer.offsetWidth+this.viewerContainer.offsetLeft&&(i=!0,e&&this.setScrollDownValue(t.type,!0)),this.viewerContainer.clientHeight+this.viewerContainer.offsetTop<t.clientY&&t.clientY<this.viewerContainer.offsetHeight+this.viewerContainer.offsetTop&&(i=!0,e&&this.setScrollDownValue(t.type,!0)),i}function Ii(e,t){"mousedown"===e&&(this.isScrollbarMouseDown=t)}function ki(){this.isTextSelectionDisabled=!0,this.viewerContainer.classList.remove("e-enable-text-selection"),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.viewerContainer.classList.add("e-disable-text-selection"),this.viewerContainer.addEventListener("selectstart",(function(){return!1}))}function Mi(){this.isPanMode=!0,this.textLayer.modifyTextCursor(!1),this.disableTextSelectionMode(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.updateInteractionTools(!1)}function Ti(){this.isPanMode=!1,this.viewerContainer&&(this.viewerContainer.style.cursor="auto",this.pdfViewer.textSelectionModule&&(this.textLayer.modifyTextCursor(!0),this.pdfViewer.textSelectionModule.enableTextSelectionMode()))}function Ei(){this.pdfViewer.toolbar&&!this.pdfViewer.toolbar.isSelectionToolDisabled&&(this.initiateTextSelectMode(),this.pdfViewer.toolbar.updateInteractionTools(!0))}function Bi(e){for(var t in this.pinchZoomStorage)if(Object.prototype.hasOwnProperty.call(this.pinchZoomStorage,t)&&this.pinchZoomStorage[t].index===e)return this.isPinchZoomStorage=!0,this.pinchZoomStorage[t].pinchZoomStorage;return null}function Pi(){var e=this,t=this;setTimeout((function(){e.initiateRenderPagesVirtually(t)}),500)}function Di(){var e=this;setTimeout((function(){e.updateCommentPanel()}),1e3)}function Ni(){for(var e=document.querySelectorAll('[id*="'+this.pdfViewer.dataId+'_more-options"]'),t=0;t<e.length;t++)e[t].style.visibility="hidden";for(var i=document.querySelectorAll(".e-pv-comments-border"),n=0;n<i.length;n++)i[n].classList.remove("e-pv-comments-border");var o=document.querySelectorAll(".e-editable-inline");for(n=0;n<o.length;n++)o[n].style.display="none";for(var s=document.querySelectorAll(".e-pv-comments-select"),a=0;a<s.length;a++)s[a].classList.remove("e-pv-comments-select");var r=document.querySelectorAll(".e-pv-comments-div");for(n=0;n<r.length;n++)r[n].style.minHeight="60px"}function Fi(e){sf.base.isNullOrUndefined(e)&&(e=document.getElementById(this.pdfViewer.dataId+"_commantPanel"));if(e&&e.style&&"block"===e.style.display)if(this.isCommentPanelTabletMode()&&this.viewerContainer){e.style.removeProperty("inset"),e.style.height=this.viewerContainer.getBoundingClientRect().height+"px";var t=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar");e.style.top=t.getBoundingClientRect().height+"px",e.style.width="300px";var i=document.getElementById(this.pdfViewer.dataId+"_pageViewContainer");this.pdfViewer.enableRtl?(e.style.left="0px",this.viewerContainer.style.left="300px"):(e.style.right="0px",this.viewerContainer.style.right="300px"),this.viewerContainer.style.width=this.pdfViewer.element.clientWidth-300+"px",i.style.width=this.viewerContainer.offsetWidth-this.navigationPane.getViewerContainerScrollbarWidth()+"px",this.updateZoomValue(),this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule&&this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop()}else e.style.height="100%",e.style.width="100%",e.style.top="0px",e.style.left="0px",e.style.right="0px",e.style.insert="0px",this.pdfViewer.annotation&&this.pdfViewer.annotation.stickyNotesAnnotationModule&&this.pdfViewer.annotation.stickyNotesAnnotationModule.updateCommentPanelTextTop();return e}function Li(){if(this.mainContainer){var e=this.mainContainer.getBoundingClientRect();return!!(e&&e.width/300>=2)}return!1}function Oi(e){var t,i,n,o=!1,s=[],a=[];if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule&&(n=this.pdfViewer.annotationModule.textMarkupAnnotationModule),e.type.startsWith("mouse")?i=!0:e.type.startsWith("touch")&&(i=!1),e&&e.target&&(this.mouseDownEvent=e,this.contextMenuModule.currentTarget=e.target),this.pdfViewer.annotationModule&&(o=this.pdfViewer.annotationModule.isEnableDelete()),o||a.push("Delete"),"None"===this.pdfViewer.contextMenuOption)t=!0;else if(this.pdfViewer.textSelectionModule||this.isShapeBasedAnnotationsEnabled()){if(e){var r=void 0;i&&e instanceof MouseEvent?r=this.isClickWithinSelectionBounds(e):e instanceof TouchEvent&&(r=this.isTouchWithinSelectionBounds(e)),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.isFreeTextContextMenu=!0,this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isTextSelected&&(a.push("Cut"),a.push("Copy")),this.pdfViewer.annotation.freeTextAnnotationModule&&""===this.pdfViewer.annotation.freeTextAnnotationModule.selectedText&&a.push("Paste"),s.push("Highlight"),s.push("Underline"),s.push("Strikethrough"),s.push("Squiggly"),s.push("ScaleRatio"),s.push("Properties"),s.push("Comment"),s.push("Delete")):r&&this.pdfViewer.textSelectionModule?(!e.target.classList.contains("e-pv-maintaincontent")&&e.target.classList.contains("e-pv-text")||e.target.classList.contains("e-pv-text-layer")?this.checkIsNormalText()&&(t=!0):(sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name)&&e.target.classList.contains("e-pv-page-container")&&(t=!0),s.push("Cut"),s.push("Paste"),s.push("Delete"),s.push("ScaleRatio"),s.push("Comment"),s.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length||"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureText"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"SignatureImage"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?0!==this.pdfViewer.selectedItems.annotations.length&&"Path"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType?this.shapeMenuItems(s,a,!0):this.pdfViewer.annotation&&this.pdfViewer.annotation.isShapeCopied&&(e.target.classList.contains("e-pv-text-layer")||e.target.classList.contains("e-pv-text")||e.target.classList.contains("e-pv-hyperlink"))&&!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(s.push("Properties"),this.shapeMenuItems(s,a,!1)):this.isCalibrateAnnotationModule()&&this.pdfViewer.annotationModule.measureAnnotationModule.currentAnnotationMode&&0!==this.pdfViewer.selectedItems.annotations.length?(s.push("Highlight"),s.push("Underline"),s.push("Strikethrough"),s.push("Squiggly"),s.push("Properties"),a.push("Cut"),a.push("Copy"),a.push("Paste"),a.push("Delete"),a.push("Comment")):n.currentTextMarkupAnnotation&&!n.isAnnotationSelect?(s.push("Highlight"),s.push("Underline"),s.push("Strikethrough"),s.push("Squiggly"),s.push("Properties"),s.push("Cut"),s.push("Copy"),s.push("Paste"),s.push("ScaleRatio")):t=!0:(this.shapeMenuItems(s,a,!1,!0),"HandWrittenSignature"!==this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(s.push("Cut"),s.push("Paste"),s.push("Copy")))}else this.pdfViewer.textSelectionModule&&"MouseUp"===this.pdfViewer.contextMenuOption?(s.push("Cut"),s.push("Paste"),s.push("Delete"),s.push("ScaleRatio"),s.push("Comment"),s.push("Properties")):0===this.pdfViewer.selectedItems.annotations.length&&(s.push("Cut"),s.push("Paste"),s.push("Delete"),s.push("ScaleRatio"),s.push("Properties"));this.pdfViewer.enableCommentPanel||a.push("Comment")}else t=!0;this.pdfViewer.formDesignerModule&&this.pdfViewer.selectedItems.formFields.length>0&&this.pdfViewer.selectedItems.formFields[0].formFieldAnnotationType&&(this.formFieldMenuItems(s,a),t=!1);var l={hidenItems:s,disabledItems:a,isCancel:t};return i?(this.pdfViewer._dotnetInstance.invokeMethodAsync("MouseDownHandler",l),null):l}function Ri(e){var t=this.contextMenuModule.currentTarget;switch(e){case this.pdfViewer.localeObj.getConstant("Copy"):this.CopyItemSelected(),this.focusViewerContainer();break;case this.pdfViewer.localeObj.getConstant("Highlight context"):this.TextMarkUpSelected("Highlight");break;case this.pdfViewer.localeObj.getConstant("Underline context"):this.TextMarkUpSelected("Underline");break;case this.pdfViewer.localeObj.getConstant("Strikethrough context"):this.TextMarkUpSelected("Strikethrough");break;case this.pdfViewer.localeObj.getConstant("Squiggly context"):this.TextMarkUpSelected("Squiggly");break;case this.pdfViewer.localeObj.getConstant("Properties"):this.PropertiesItemSelected();break;case this.pdfViewer.localeObj.getConstant("Cut"):this.CutItemSelected(t),this.focusViewerContainer();break;case this.pdfViewer.localeObj.getConstant("Paste"):this.pasteItemSelected(t);break;case this.pdfViewer.localeObj.getConstant("Delete Context"):this.DeleteItemSelected();break;case this.pdfViewer.localeObj.getConstant("Scale Ratio"):this.ScaleRatioSelected();break;case this.pdfViewer.localeObj.getConstant("Comment"):this.CommentItemSelected()}}function zi(){var e=!1;this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus?(this.pdfViewer.annotation.freeTextAnnotationModule.copySelectedText(),this.contextMenuModule.close(),e=!0):this.pdfViewer.textSelectionModule&&(this.pdfViewer.textSelectionModule.copyText(),this.contextMenuModule.close()),(this.pdfViewer.selectedItems.annotations.length&&!e||this.pdfViewer.selectedItems.formFields.length>0)&&(this.pdfViewer.copy(),this.contextMenuModule.previousAction="Copy")}function Hi(e){if(this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName)this.pdfViewer.annotation.freeTextAnnotationModule.cutSelectedText(e),this.contextMenuModule.close();else if(1===this.pdfViewer.selectedItems.annotations.length){this.pdfViewer.selectedItems.annotations[0].pageIndex;this.pdfViewer.cut(),this.contextMenuModule.previousAction="Cut"}else 1===this.pdfViewer.selectedItems.formFields.length&&(this.pdfViewer.cut(),this.contextMenuModule.previousAction="Cut")}function Ui(e){this.isFreeTextContextMenu||this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&e&&"free-text-input"===e.className&&"TEXTAREA"===e.tagName?(this.pdfViewer.annotation.freeTextAnnotationModule.pasteSelectedText(e),this.contextMenuModule.close()):(this.pdfViewer.paste(),this.contextMenuModule.previousAction="Paste")}function ji(){this.pdfViewer.formDesignerModule&&this.pdfViewer.selectedItems.formFields.length>0?this.pdfViewer.formDesignerModule.deleteFormField(this.pdfViewer.selectedItems.formFields[0].id):this.pdfViewer.annotation&&this.pdfViewer.annotation.deleteAnnotation()}function _i(e){var t=this.isCommentPanelTabletMode(),i=this.pdfViewer.formDesignerModule.getFormFieldByID(e);this.pdfViewer.formDesignerInteraction&&i&&this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenFormDesignerDialog",i,t).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}function Wi(){var e=this,t=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_password_popup",className:"e-pv-password-popup",attrs:{tabindex:"-1"}});this.promptElement=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_prompt",attrs:{tabindex:"-1"}}),this.promptElement.textContent=this.pdfViewer.localeObj.getConstant("Enter Password"),t.appendChild(this.promptElement);var i=sf.base.createElement("span",{className:"e-input-group e-pv-password-input"});this.passwordInput=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_password_input",className:"e-input"}),this.passwordInput.type="password",this.passwordInput.name="Required",i.appendChild(this.passwordInput),t.appendChild(i),this.pageContainer.appendChild(t),this.passwordPopup=new sf.popups.Dialog({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("Password Protected"),visible:!1,close:this.passwordCancel.bind(this),target:this.pdfViewer.element,beforeClose:function(){e.passwordPopup.destroy(),e.getElement("_password_popup").remove(),e.passwordPopup=null;var t=e.getElement("_loadingIndicator");null!=t&&Et(t)}}),!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode?this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)}]:this.passwordPopup.buttons=[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.passwordCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("OK"),isPrimary:!0},click:this.applyPassword.bind(this)}],this.pdfViewer.enableRtl&&(this.passwordPopup.enableRtl=!0),this.passwordPopup.appendTo(t),this.passwordInput.addEventListener("focus",(function(){e.passwordInput.parentElement.classList.add("e-input-focus")})),this.passwordInput.addEventListener("blur",(function(){e.passwordInput.parentElement.classList.remove("e-input-focus")}))}function qi(e){e.isInteraction&&(this.clear(!1),this.passwordInput.value="");var t=this.getElement("_loadingIndicator");null!==t&&Et(t)}function Zi(){this.clear(!1),this.passwordPopup.hide();var e=this.getElement("_loadingIndicator");null!==e&&Et(e)}function Yi(){var e=this,t=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_goTopage_popup",className:"e-pv-gotopage-popup"});this.goToPageElement=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_prompt"}),this.goToPageElement.textContent=this.pdfViewer.localeObj.getConstant("Enter pagenumber"),t.appendChild(this.goToPageElement);var i=sf.base.createElement("span",{className:"e-pv-text-input"});this.goToPageInput=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_page_input",className:"e-input"}),this.goToPageInput.type="text",this.goToPageInput.style.maxWidth="80%",this.pageNoContainer=sf.base.createElement("span",{className:".e-pv-number-ofpages"}),i.appendChild(this.goToPageInput),i.appendChild(this.pageNoContainer),t.appendChild(i),this.pageContainer.appendChild(t),this.goToPagePopup=new sf.popups.Dialog({showCloseIcon:!0,closeOnEscape:!1,isModal:!0,header:this.pdfViewer.localeObj.getConstant("GoToPage"),visible:!1,buttons:[{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Cancel")},click:this.GoToPageCancelClick.bind(this)},{buttonModel:{content:this.pdfViewer.localeObj.getConstant("Apply"),disabled:!0,cssClass:"e-pv-gotopage-apply-btn",isPrimary:!0},click:this.GoToPageApplyClick.bind(this)}],close:this.closeGoToPagePopUp.bind(this)}),this.pdfViewer.enableRtl&&(this.goToPagePopup.enableRtl=!0),this.goToPagePopup.appendTo(t),this.goToPageInput.addEventListener("keyup",(function(){var t=e.goToPageInput.value;""!==t&&parseFloat(t)>0&&e.pdfViewer.pageCount+1>parseFloat(t)?e.EnableApplyButton():e.DisableApplyButton()}))}function Xi(){this.goToPageInput.value="",this.DisableApplyButton()}function Gi(){this.goToPagePopup.hide();var e=this.goToPageInput.value;this.pdfViewer.navigation.goToPage(e),this.updateMobileScrollerPosition()}function Ji(){var e=document.getElementById(this.pdfViewer.dataId);this.printMainContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_printcontainer",className:"e-pv-print-popup-container"}),e.appendChild(this.printMainContainer),this.printMainContainer.style.display="none";var t=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_printLoadingIndicator",className:"e-pv-print-loading-container"});this.printMainContainer.appendChild(t),wt({target:t,cssClass:"e-spin-center"}),this.setLoaderProperties(t)}function Ki(e){var t=this.getElement("_loadingIndicator");t&&(e?(t.style.display="block",Mt(t)):(t.style.display="none",Et(t)))}function Qi(e){var t=this.getElement("_printLoadingIndicator");null!=t&&(e?(this.printMainContainer.style.display="block",Mt(t)):(this.printMainContainer.style.display="none",Et(t)))}function $i(){var e=this.getElement("_loadingIndicator");null!==e&&Et(e)}function en(e,t,i){this.openNotificationPopup(),this.pdfViewer.fireAjaxRequestFailed(e,t,i)}function tn(e){this.pdfViewer.showNotificationDialog&&this.textLayer.createNotificationPopup(e)}function nn(){this.pdfViewer.fireDocumentLoadFailed(!1,null),this.documentId=null,this.pdfViewer.showNotificationDialog&&this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenCorruptedDialog").catch((function(e){throw console.error("Unhandled Exception:",e),e}))}function on(e,t){var i=document.getElementById(this.pdfViewer.dataId+"_prompt");this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_EnterPassword").then((function(e){i.textContent=e}));var n=document.querySelector("#"+this.pdfViewer.dataId+"_password_input");(n.addEventListener("focus",(function(){n.parentElement.classList.add("e-input-focus")})),n.addEventListener("blur",(function(){n.parentElement.classList.remove("e-input-focus")})),this.isPasswordAvailable)?(this.pdfViewer.fireDocumentLoadFailed(!0,t),i.classList.add("e-pv-password-error"),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_InvalidPassword").then((function(e){i.textContent=e})),i.focus(),this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e):(this.isFileName?this.document=e:this.document="data:application/pdf;base64,"+e,this.isPasswordAvailable=!0,this.pdfViewer.fireDocumentLoadFailed(!0,null));this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenPasswordDialog").catch((function(e){throw console.error("Unhandled Exception:",e),e}))}function sn(e,t){var i=this.getElement("_pageDiv_"+e);null!=i&&(t?Mt(i):Et(i),this.updateWaitingPopup(e))}function an(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);var i;i=e.touches,this.isMouseDown=!0,this.isAnnotationAdded=!1,void 0===this.isRedactionHovered&&(this.isRedactionHovered=!1),void 0===this.hoveredRedactionId&&(this.hoveredRedactionId=null),this.currentPosition=this.prevPosition=this.getMousePosition(e),this.eventArgs={};var n=!1;"Stamp"===this.pdfViewer.tool&&(this.pdfViewer.tool="",n=!0),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var o=we(e,this,this.pdfViewer);if(sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(e.target)&&!sf.base.isNullOrUndefined(e.target.id)){var s=e.target.id.split("_")[0];s&&this.pdfViewer.nameTable&&this.pdfViewer.nameTable[""+s]&&(o=this.pdfViewer.nameTable[""+s])}if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode||!o||o instanceof j||!sf.base.isNullOrUndefined(o.formFieldAnnotationType)||e.preventDefault(),this.pdfViewer.annotation&&this.pdfViewer.enableStampAnnotations){var a=this.pdfViewer.annotationModule.stampAnnotationModule;if(a&&a.isNewStampAnnot){var r=o;if(!r&&this.pdfViewer.selectedItems.annotations[0]&&(r=this.pdfViewer.selectedItems.annotations[0]),r){this.isViewerMouseDown=!1,r.opacity=this.pdfViewer.stampSettings.opacity,this.isNewStamp=!0;var l=void 0;if(l="Image"===r.shapeAnnotationType?this.pdfViewer.customStampSettings.opacity:this.pdfViewer.stampSettings.opacity,this.pdfViewer.nodePropertyChange(r,{opacity:l}),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!1,"Image"===r.shapeAnnotationType&&!this.isAlreadyAdded){this.stampAdded=!0;var d=r.id;a.currentStampAnnotation&&a.currentStampAnnotation.signatureName&&(d=a.currentStampAnnotation.signatureName);for(var h=!1,p=0;p<this.customStampCollection.length;p++)if(this.customStampCollection[p].customStampName===d){h=!0;break}h&&(d=r.id),d=a.customStampName?a.customStampName:a.currentStampAnnotation.signatureName,this.customStampCollection.push({customStampName:d,customStampImageSource:r.data})}this.pdfViewer.customStampSettings.enableCustomStamp&&this.pdfViewer.customStampSettings.isAddToMenu&&(this.stampAdded=!0),this.isAlreadyAdded=!1,a.updateDeleteItems(r.pageIndex,r,r.opacity),a.resetAnnotation(),a.isNewStampAnnot=!1}}}if(this.isNewSignatureAdded){this.signatureCount++,this.currentSignatureAnnot=null;var c=o;if(sf.base.isNullOrUndefined(c)&&this.pdfViewer.selectedItems.annotations[0]&&(c=this.pdfViewer.selectedItems.annotations[0]),c){this.signatureAdded=!0,this.signatureModule.storeSignatureData(c.pageIndex,c);var u={left:c.bounds.x,top:c.bounds.y,width:c.bounds.width,height:c.bounds.height};this.pdfViewer.fireSignatureAdd(c.pageIndex,c.signatureName,c.shapeAnnotationType,u,c.opacity,c.strokeColor,c.thickness,this.signatureModule.saveImageString)}this.isNewSignatureAdded=!1}if(this.pdfViewer.annotationModule){var f=this.pdfViewer.annotationModule.freeTextAnnotationModule;if(!0===f.isNewFreeTextAnnot){var m=void 0;if(e.target&&(e.target.id.indexOf("_text")>-1||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){var g=this.pdfViewer.annotation.getEventPageNumber(e),w=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+g);if(w){var y=w.getBoundingClientRect(),v=y.x?y.x:y.left,b=y.y?y.y:y.top;m=new sf.drawings.Rect(v+5,b+5,y.width-10,y.height-10)}}if(i&&(this.mouseX=i[0].clientX,this.mouseY=i[0].clientY),m&&m.containsPoint({x:this.mouseX,y:this.mouseY})&&f.isNewAddedAnnot){g=this.pdfViewer.annotation.getEventPageNumber(e);if(!this.pdfViewer.freeTextSettings.enableAutoFit){var S=this.getZoomFactor(),A=this.currentPosition.x+f.defautWidth*S,x=this.getPageWidth(g);A>=x&&(this.currentPosition.x=x-f.defautWidth*S,this.currentPosition.x<=0&&(this.currentPosition.x=5),f.defautWidth=f.defautWidth*S>=x?x-10:f.defautWidth)}f.addInuptElemet(this.currentPosition,null,g),e.preventDefault(),f.isNewAddedAnnot=!1}}}o&&o.wrapper.children[0],(!this.tool||this.tool&&!this.tool.drawingObject)&&(n?(this.action="Select",this.tool=this.getTool(this.action)):(this.action=this.findToolToActivate(o,this.currentPosition),o&&o.annotationSettings&&o.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",o)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",o)||(this.action="Select")),"Rotate"===this.action&&(this.action="Select"),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeSouth"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",o)||(this.action="Select"))),this.tool=this.getTool(this.action),this.tool||(this.action=this.pdfViewer.tool||"Select",this.tool=this.getTool(this.action)))),3===e.which&&(this.tool instanceof Or||this.tool instanceof Rr||this.tool instanceof Lr)&&(this.pdfViewer.tool="Select",this.action="Select",this.tool=this.getTool(this.action)),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.eventArgs.position=this.currentPosition,this.tool&&(this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,this.isAnnotationMouseMove=!1,this.isFormFieldMouseMove=!1,sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.formFieldAnnotationType)||!sf.base.isNullOrUndefined(this.eventArgs.source)||(this.eventArgs.source=o),this.tool.mouseDown(this.eventArgs),this.isAnnotationDrawn=!0,this.signatureAdded=!0),this.pdfViewer.annotation&&this.pdfViewer.annotation.onAnnotationMouseDown();var V=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]+"_content"]:null;if(V||(V=1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id]:null),this.eventArgs&&this.eventArgs.source&&(this.eventArgs.source.formFieldAnnotationType||V)&&!this.pdfViewer.formDesignerInteraction){var C=void 0;if((C=V?this.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[0].id.split("_")[0]]:this.eventArgs.source)||(C=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===V.id}))]),C){var I={id:C.id,name:C.name,fontFamily:C.fontFamily,fontSize:C.fontSize,fontStyle:C.fontStyle,color:C.color,value:C.value,type:C.formFieldAnnotationType?C.formFieldAnnotationType:C.type,backgroundColor:C.backgroundColor,alignment:C.alignment},k=document.getElementById(C.id);if((k=k||(document.getElementById(C.id+"_content_html_element")?document.getElementById(C.id+"_content_html_element").children[0].children[0]:null))&&"StickyNotes"!==C.type&&!k.classList.contains("e-pv-comments-container"))if(this.currentTarget=k,this.pdfViewer.formDesignerModule){var M=this.pdfViewer.formDesignerModule.getFormFieldByID(C.id);M&&null!==M.pageNumber&&this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",M,!1,0===e.button)}else this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",I,!1,0===e.button)}}else sf.base.isNullOrUndefined(this.pdfViewer.formFieldsModule)||sf.base.isNullOrUndefined(this.pdfViewer.formFieldCollections)||sf.base.isNullOrUndefined(e)||2!==e.button||this.pdfViewer.formFieldsModule.updateFormFields(e);this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.pdfViewer.enableServerDataBinding(t,!0)}function rn(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),this.currentPosition=this.getMousePosition(e),this.pdfViewer.firePageMouseover(this.currentPosition.x,this.currentPosition.y),this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var i,n=we(e,this,this.pdfViewer);(this.tool instanceof Lr||this.tool instanceof Rr)&&(n=this.pdfViewer.drawingObject);var o=this.pdfViewer.selectedItems.annotations,s=!!(o&&o.length>0&&o[0])&&this.checkSignatureFormField(o[0].id);if(!1===sf.drawings.Point.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown){this.eventArgs={};n&&(this.tool=this.getTool(this.action),n.wrapper&&n.wrapper.children[0]&&(i=n));var a=e.target;this.action=this.findToolToActivate(n,this.currentPosition),n&&n.annotationSettings&&n.annotationSettings.isLock&&("Select"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)||(this.action="")),"Drag"===this.action&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Move",n)||(this.action="Select")),("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.pdfViewer.annotationModule.checkAllowedInteractions("Resize",n)||(this.action="Select"))),this.pdfViewer.formDesignerInteraction||(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.formFieldAnnotationType))&&!s||("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action=""),this.tool=this.getTool(this.action),this.setCursor(a,e),this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.disableHyperlinkNavigationUnderObjects(a,e,this)}else{if(!this.tool&&this.action&&"Rotate"===this.action&&(this.tool=this.getTool(this.action),e.target&&this.setCursor(e.target,e)),this.pdfViewer.formDesignerInteraction||(sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.formFieldAnnotationType))&&!s||("ResizeSouthEast"===this.action||"ResizeNorthEast"===this.action||"ResizeNorthWest"===this.action||"ResizeSouthWest"===this.action||"ResizeNorth"===this.action||"Drag"===this.action||"ResizeWest"===this.action||"ResizeEast"===this.action||"ResizeSouth"===this.action||this.action.includes("ConnectorSegmentPoint")||this.action.includes("Leader"))&&(this.action="",this.tool=null),this.eventArgs&&this.eventArgs.source){a=e.target;this.updateDefaultCursor(this.eventArgs.source,a,e)}else this.setCursor(e.target,e);if(this.diagramMouseActionHelper(e),this.tool){if(n&&"FreeText"===n.shapeAnnotationType)if(this.pdfViewer.freeTextSettings.allowEditTextOnly&&"Ink"!==this.action&&this.eventArgs.source&&"FreeText"===this.eventArgs.source.shapeAnnotationType)(a=event.target).style.cursor="default",this.tool=null;null!=this.tool&&this.tool.mouseMove(this.eventArgs)}}if(this.pdfViewer.drawingObject&&this.pdfViewer.drawingObject.formFieldAnnotationType&&"Drag"!==this.action&&this.pdfViewer.formDesignerModule&&!(this.tool instanceof Fr)&&(this.tool=this.getTool(this.action),this.tool instanceof Lr)){var r=this.pdfViewer.drawingObject,l=r.formFieldAnnotationType,d=this.pdfViewer.formDesignerModule.updateFormFieldInitialSize(r,l),h=this.pageContainer.firstElementChild.clientWidth-d.width,p=this.pageContainer.firstElementChild.clientHeight-d.height;l&&this.currentPosition.x<h&&this.currentPosition.y<p&&this.updateFormFieldElementVisibility(l,r,e,d,!0)}this.prevPosition=this.currentPosition}this.pdfViewer.enableServerDataBinding(t,!0)}function ln(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);var i=this.action.toLowerCase().includes("resize")||this.action.toLowerCase().includes("connectorsegmentpoint")||this.action.toLowerCase().includes("leader"),n="Drag"===this.action||i||(this.tool instanceof Lr||this.tool instanceof Rr||this.tool instanceof Or)&&this.tool.dragging&&this.tool.drawingObject;if(this.tool){if(!this.inAction&&3!==e.which&&"Drag"===this.action){this.action="Select";var o=we(e,this,this.pdfViewer)}if(this.tool instanceof Or||this.tool instanceof Rr||this.tool instanceof Lr||(this.inAction=!1,this.isMouseDown=!1),this.currentPosition=this.getMousePosition(e),this.tool){this.eventArgs.position=this.currentPosition,this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source);this.isMetaKey(e);var s={ctrlKey:e.ctrlKey,shiftKey:e.shiftKey};if(this.eventArgs.info=s,this.eventArgs.clickCount=e.detail,"touchend"===e.type?this.eventArgs.isTouchMode=!0:this.eventArgs.isTouchMode=!1,this.tool.mouseUp(this.eventArgs),this.isAnnotationMouseDown=!1,this.isFormFieldMouseDown=!1,(this.tool instanceof Lr||this.tool instanceof Rr||this.tool instanceof Or)&&!this.tool.dragging&&(this.inAction=!1,this.isMouseDown=!1),n){o=we(e,this,this.pdfViewer);(this.isShapeAnnotationModule()||this.isCalibrateAnnotationModule())&&this.pdfViewer.annotation.onShapesMouseup(o,e)}this.isAnnotationDrawn=!1}}this.pdfViewer.formDesignerModule&&this.pdfViewer.formDesignerModule.enableDeleteIcon();var a=e.target;e.cancelable&&this.skipPreventDefault(a)&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)&&e.preventDefault(),this.eventArgs={},this.pdfViewer.enableServerDataBinding(t,!0)}function dn(e){this.currentPosition=this.getMousePosition(e),this.pdfViewer.annotation&&(this.activeElements.activePageID=this.pdfViewer.annotation.getEventPageNumber(e));var t=we(e,this,this.pdfViewer),i=!1;if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redactionAnnotationModule&&this.pdfViewer.annotationModule.redactionAnnotationModule.resetRedactionHover(),!1===sf.drawings.Point.equals(this.currentPosition,this.prevPosition)||this.inAction){if(!1===this.isMouseDown||i){this.eventArgs={};t&&(t.wrapper.children[0],i=!1)}else this.diagramMouseActionHelper(e),this.tool&&"Drag"!==this.action&&"Stamp"!==this.pdfViewer.tool&&this.tool.currentElement&&"Stamp"!==this.tool.currentElement.shapeAnnotationType&&(this.tool.mouseLeave(this.eventArgs),this.tool=null,this.pdfViewer.annotation&&this.pdfViewer.annotationModule.renderAnnotations(this.previousPage,null,null,null,null));this.prevPosition=this.currentPosition}}function hn(e,t){var i,n=this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.freeTextAnnotationModule:null;if(this.tool instanceof Fr)"ResizeNorthWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"nw-resize":i):"ResizeNorthEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"ne-resize":i):"ResizeSouthWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"sw-resize":i):"ResizeSouthEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"se-resize":i):"ResizeNorth"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"n-resize":i):"ResizeWest"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"w-resize":i):"ResizeEast"===this.tool.corner?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"e-resize":i):"ResizeSouth"===this.tool.corner&&(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"s-resize":i);else if(this.isCommentIconAdded&&this.isAddComment)e.style.cursor="crosshair";else if(this.pdfViewer.enableHandwrittenSignature&&this.isNewSignatureAdded&&this.tool instanceof Pr)e.style.cursor="crosshair";else if(this.tool instanceof Br)e.style.cursor="move";else if(this.tool instanceof zr)e.style.cursor="crosshair";else if(this.tool instanceof Lr||this.tool instanceof Rr||this.tool instanceof Or||n&&n.isNewAddedAnnot||this.tool instanceof Dr)e.style.cursor="crosshair";else if(this.tool instanceof Nr)this.tool.endPoint&&this.tool.endPoint.indexOf("Leader0")?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"nw-resize":i):this.tool.endPoint&&this.tool.endPoint.indexOf("Leader1")?(i=this.setResizerCursorType(),e.style.cursor=sf.base.isNullOrUndefined(i)?"ne-resize":i):this.tool.endPoint&&this.tool.endPoint.indexOf("ConnectorSegmentPoint")&&(e.style.cursor="sw-resize");else if(e.classList.contains("e-pv-text"))e.style.cursor="text";else if(e.classList.contains("e-pv-hyperlink"))e.style.cursor="pointer";else if(this.isPanMode)if(this.isViewerMouseDown&&"mousemove"===t.type)e.style.cursor="grabbing";else{var o=we(t,this,this.pdfViewer);if(o&&"mousemove"===t.type){e.style.cursor="pointer";var s=o,a=this.getMousePosition(t),r={left:(w=this.relativePosition(t)).x,top:w.y},l={left:a.x,top:a.y},d={opacity:s.opacity,fillColor:s.fillColor,strokeColor:s.strokeColor,thicknes:s.thickness,author:s.author,subject:s.subject,modifiedDate:s.modifiedDate,isLock:s.isLocked,isPrint:s.isPrint};this.isMousedOver=!0;var h=this.checkSignatureFormField(s.id);if(s.formFieldAnnotationType&&this.pdfViewer.formDesignerModule){if(!this.isFormFieldMousedOver)(b=this.pdfViewer.formDesignerModule.getFormFieldByID(s.id))&&null!==b.pageNumber&&this.pdfViewer.fireFormFieldMouseOverEvent("FormFieldMouseEnter",b,b.pageNumber,w.x,w.y,a.x,a.y),this.isFormFieldMousedOver=!0,this.formTarget=b}else if(!h){if(this.pdfViewer.annotationModule)(g=this.pdfViewer.annotationModule.getAnnotationType(s.shapeAnnotationType,s.measureType))&&(d.type=g),"FreeText"!==g&&"Redaction"!==g||(d.fontColor=s.fontColor,d.fontSize=s.fontSize,d.fontFamily=s.fontFamily,d.textAlignment=s.textAlign),d.content="FreeText"===g?s.dynamicText:s.overlayText;this.pdfViewer.fireAnnotationMouseover(s.annotName,s.pageIndex,s.shapeAnnotationType,s.bounds,d,l,r)}}else if((sf.base.isNullOrUndefined(e.classList)||!e.classList.contains("e-pdfviewer-formFields")&&!e.classList.contains("e-pdfviewer-signatureformfields"))&&(e.style.cursor="grab"),this.isMousedOver){var p=this.pdfViewer.annotation.getEventPageNumber(t);if(this.isFormFieldMousedOver&&this.pdfViewer.formDesignerModule&&!sf.base.isNullOrUndefined(this.formTarget))(b=this.formTarget)&&null!==b.pageNumber&&this.pdfViewer.fireFormFieldEvent("FormFieldMouseLeave",b,b.pageNumber),this.isFormFieldMousedOver=!1,this.formTarget=null;else this.pdfViewer.fireAnnotationMouseLeave(p);this.isMousedOver=!1}}else{var c=we(t,this,this.pdfViewer);if(c&&"mousemove"===t.type){var u=void 0;if((s=c).id&&s.id.includes("_content")){var f=s.id.split("_content")[0];u=this.pdfViewer.nameTable[f]}var m=this.pdfViewer.nameTable[s.id];"HandWrittenSignature"!==m.shapeAnnotationType&&"Ink"!==m.shapeAnnotationType&&m.annotationSettings&&void 0!==m.annotationSettings.isLock&&(m.annotationSettings.isLock=JSON.parse(m.annotationSettings.isLock)),m.annotationSettings&&m.annotationSettings.isLock||"Hidden"===m.visibility||"HiddenPrintable"===m.visibility||u&&("Hidden"===u.visibility||"HiddenPrintable"===u.visibility)?e.style.cursor="default":e.style.cursor="pointer","Redaction"===s.shapeAnnotationType&&this.pdfViewer.annotationModule.redactionAnnotationModule&&this.pdfViewer.annotationModule.redactionAnnotationModule.handleRedactionHover(s,s.pageIndex);a=this.getMousePosition(t),r={left:(w=this.relativePosition(t)).x,top:w.y},l={left:a.x,top:a.y},d={opacity:s.opacity,fillColor:s.fillColor,strokeColor:s.strokeColor,thicknes:s.thickness,author:s.author,subject:s.subject,modifiedDate:s.modifiedDate,isLock:s.isLocked,isPrint:s.isPrint};this.isMousedOver=!0;h=this.checkSignatureFormField(s.id);if(s.formFieldAnnotationType&&this.pdfViewer.formDesignerModule){if(!this.isFormFieldMousedOver)(b=this.pdfViewer.formDesignerModule.getFormFieldByID(s.id))&&null!==b.pageNumber&&this.pdfViewer.fireFormFieldMouseOverEvent("FormFieldMouseEnter",b,b.pageNumber,w.x,w.y,a.x,a.y),this.isFormFieldMousedOver=!0,this.formTarget=b}else if(!h){var g;if(this.pdfViewer.annotationModule)(g=this.pdfViewer.annotationModule.getAnnotationType(s.shapeAnnotationType,s.measureType))&&(d.type=g),"FreeText"!==g&&"Redaction"!==g||(d.fontColor=s.fontColor,d.fontSize=s.fontSize,d.fontFamily=s.fontFamily,d.textAlignment=s.textAlign),d.content="FreeText"===g?s.dynamicText:s.overlayText;this.pdfViewer.fireAnnotationMouseover(s.annotName,s.pageIndex,s.shapeAnnotationType,s.bounds,d,l,r)}}else if(t.target.classList.contains("e-pdfviewer-formFields")||t.target.classList.contains("e-pdfviewer-signatureformfields")){p=this.pdfViewer.annotation.getEventPageNumber(t),a=this.getMousePosition(t),r={left:(w=this.relativePosition(t)).x,top:w.y},l={left:a.x,top:a.y};var w,y=this.getItemFromSessionStorage("_formfields"),v=JSON.parse(y),b=void 0;if(v)for(var S=0;S<v.length;S++)v[S].FieldName===t.target.name&&(b={name:v[S].FieldName});this.isMousedOver=!0}else{if(this.isMousedOver){p=this.pdfViewer.annotation.getEventPageNumber(t);if(this.isFormFieldMousedOver&&this.pdfViewer.formDesignerModule&&!sf.base.isNullOrUndefined(this.formTarget))(b=this.formTarget)&&null!==b.pageNumber&&this.pdfViewer.fireFormFieldEvent("FormFieldMouseLeave",b,b.pageNumber),this.isFormFieldMousedOver=!1,this.formTarget=null;else this.pdfViewer.fireAnnotationMouseLeave(p);this.isMousedOver=!1,e.style.cursor="default"}this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redactionAnnotationModule&&this.pdfViewer.annotationModule.redactionAnnotationModule.resetRedactionHover(),c&&1===this.pdfViewer.selectedItems.annotations.length&&"mousemove"===t.type?e.style.cursor="pointer":e.style.cursor="default"}}var A=we(t,this,this.pdfViewer);if(A&&"mousemove"===t.type){s=A;var x=!0;this.tool instanceof Lr&&!0===this.tool.inAction&&(x=!1),x&&"Redaction"===s.shapeAnnotationType&&this.pdfViewer.annotationModule.redactionAnnotationModule&&this.pdfViewer.annotationModule.redactionAnnotationModule.handleRedactionHover(s,s.pageIndex)}}function pn(e){var t,i,n,o=e.target,s=e.target.parentElement;if(-1!==e.type.indexOf("touch")){if(t=e,this.pdfViewer.annotation){var a=this.getElement("_pageDiv_"+this.pdfViewer.annotation.getEventPageNumber(e));if(a){var r=a.getBoundingClientRect();i=t.changedTouches[0].clientX-r.left,n=t.changedTouches[0].clientY-r.top}}}else if(o.classList.contains("e-pv-hyperlink"))i=e.offsetX+o.offsetLeft,n=e.offsetY+o.offsetTop;else if((o.classList.contains("e-pv-text")||o.classList.contains("e-pdfviewer-formFields")&&"text"!==o.attributes[0].nodeValue&&"select"!==o.nodeName.toLowerCase()&&"textarea"!==o.nodeName.toLowerCase()||o.classList.contains("e-pdfviewer-signatureformfields")&&!s.classList.contains("foreign-object"))&&s){var l=s.getBoundingClientRect();i=e.clientX-l.left,n=e.clientY-l.top}else if(!o.classList.contains("e-pdfviewer-formFields")||"text"!==o.attributes[0].nodeValue&&"select"!==o.nodeName.toLowerCase()&&"textarea"!==o.nodeName.toLowerCase())if(o.classList.contains("e-pdfviewer-ListBox")){l=s.parentElement.parentElement.getBoundingClientRect();i=e.clientX-l.left,n=e.clientY-l.top}else if(o&&e&&e.path&&s&&(s.classList.contains("foreign-object")||s.parentElement.classList.contains("foreign-object"))){l=void 0;if("e-pv-page-div"===e.path[4].className)l=e.path[4].getBoundingClientRect();else for(var d=0;d<e.path.length;d++)if("e-pv-page-div"===e.path[parseInt(d.toString(),10)].className){l=e.path[parseInt(d.toString(),10)].getBoundingClientRect();break}i=e.clientX-l.left,n=e.clientY-l.top}else if(o&&s&&s.classList.contains("foreign-object")||o.classList.contains("e-pv-checkbox-div")){l=void 0;l=o.classList.contains("e-pv-checkbox-div")?o.offsetParent.offsetParent.offsetParent.offsetParent.getBoundingClientRect():o.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),i=e.clientX-l.left,n=e.clientY-l.top}else i=e.offsetX,n=e.offsetY;else{var l=s.parentElement.getBoundingClientRect();i=e.clientX-l.left,n=e.clientY-l.top}return{x:i,y:n}}function cn(e,t,i,n){var o,s;return e.position=t,i?o=we(n,this,this.pdfViewer):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(o=this.pdfViewer.selectedItems,("Drag"===this.action&&o&&this.pdfViewer.selectedItems.annotations.length>0||"Drag"===this.action&&o&&this.pdfViewer.selectedItems.formFields.length>0)&&(o=we(n,this,this.pdfViewer))):o=we(n,this,this.pdfViewer),o&&(s=o.wrapper),i?(e.target=o,e.targetWrapper=s):(e.source=o,e.sourceWrapper=s),e.actualObject=this.eventArgs.actualObject,e}!function(e){e[e.None=1]="None",e[e.Accepted=2]="Accepted",e[e.Canceled=3]="Canceled",e[e.Completed=4]="Completed",e[e.Rejected=5]="Rejected"}(Bt||(Bt={})),function(e){e[e.None=0]="None",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough"}(Pt||(Pt={})),function(e){e[e.Copy=0]="Copy",e[e.Highlight=1]="Highlight",e[e.Cut=2]="Cut",e[e.Underline=4]="Underline",e[e.Paste=8]="Paste",e[e.Delete=16]="Delete",e[e.ScaleRatio=32]="ScaleRatio",e[e.Strikethrough=64]="Strikethrough",e[e.Properties=128]="Properties",e[e.Comment=256]="Comment"}(Dt||(Dt={})),function(e){e.Draw="Draw",e.Type="Type",e.Image="Image"}(Nt||(Nt={})),function(e){e[e.None=0]="None",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.Underline=4]="Underline",e[e.Strikethrough=8]="Strikethrough"}(Ft||(Ft={})),function(e){e[e.Corners=1]="Corners",e[e.Edges=2]="Edges"}(Lt||(Lt={})),function(e){e[e.Draw=1]="Draw",e[e.Text=2]="Text",e[e.Upload=4]="Upload"}(Ot||(Ot={})),function(e){e.auto="auto",e.crossHair="crosshair",e.e_resize="e-resize",e.ew_resize="ew-resize",e.grab="grab",e.grabbing="grabbing",e.move="move",e.n_resize="n-resize",e.ne_resize="ne-resize",e.ns_resize="ns-resize",e.nw_resize="nw-resize",e.pointer="pointer",e.s_resize="s-resize",e.se_resize="se-resize",e.sw_resize="sw-resize",e.text="text",e.w_resize="w-resize"}(Rt||(Rt={})),function(e){e.Revised="Revised",e.Reviewed="Reviewed",e.Received="Received",e.Approved="Approved",e.Confidential="Confidential",e.NotApproved="NotApproved"}(zt||(zt={})),function(e){e.Witness="Witness",e.InitialHere="InitialHere",e.SignHere="SignHere",e.Accepted="Accepted",e.Rejected="Rejected"}(Ht||(Ht={})),function(e){e.Approved="Approved",e.NotApproved="NotApproved",e.Draft="Draft",e.Final="Final",e.Completed="Completed",e.Confidential="Confidential",e.ForPublicRelease="ForPublicRelease",e.NotForPublicRelease="NotForPublicRelease",e.ForComment="ForComment",e.Void="Void",e.PreliminaryResults="PreliminaryResults",e.InformationOnly="InformationOnly"}(Ut||(Ut={})),function(e){e.Select="Select",e.Move="Move",e.Resize="Resize",e.Delete="Delete",e.None="None",e.PropertyChange="PropertyChange"}(jt||(jt={})),function(e){e.Json="Json",e.Xfdf="Xfdf"}(_t||(_t={})),function(e){e[e.Default=0]="Default",e[e.AnnotationAdding=2]="AnnotationAdding"}(Wt||(Wt={}));var un=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},fn=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}};function mn(e){var t,i={};if(e){var n=!1,o=1;e.shapeAnnotationType||e.author?(n=!0,t=this.createAnnotationsCollection(e.pageNumber,!0)):e.length?(o=e.length,t=this.createAnnotationsCollection()):(n=!0,t=this.createAnnotationsCollection(e.pageNumber,!0));for(var s=0;s<o;s++){var a=void 0;a=n?e:e[s];var r={};if(r.ShapeAnnotationType=a.shapeAnnotationType,r.AnnotationAddMode=a.annotationAddMode,r.Author=a.author,r.AnnotationSelectorSettings=a.annotationSelectorSettings,r.AnnotationSettings=a.annotationSettings,r.PageNumber=a.pageNumber,r.ModifiedDate=a.modifiedDate,r.Subject=a.subject,r.Note=a.note,r.AnnotName=a.annotationId,r.IsCommentLock=a.isCommentLock,r.Comments=a.comments,a.comments&&a.comments.length>0){for(var l=[],d=0;d<a.comments.length;d++)l.push(this.updateComments(a,a.comments[d]));r.Comments=l}if(a.review&&(r.State=a.review.state,r.StateModel=a.review.stateModel),r.CustomData=a.customData,r.Opacity=a.opacity,"textMarkup"===a.shapeAnnotationType){if(r.AnnotType="textMarkup",r.Color=a.color,r.IsMultiSelect=a.isMultiSelect,r.TextMarkupAnnotationType=a.textMarkupAnnotationType,r.TextMarkupContent=a.textMarkupContent,r.TextMarkupStartIndex=a.textMarkupStartIndex,r.TextMarkupEndIndex=a.textMarkupEndIndex,a.rect&&(r.Rect=this.convertBounds(a.rect,!0)),a.bounds&&a.bounds.length>=1){var h=[];for(d=0;d<a.bounds.length;d++)h.push(this.convertBounds(a.bounds[d]));r.Bounds=h}t[a.pageNumber].textMarkupAnnotation.push(r)}else if("sticky"===a.shapeAnnotationType)r.AnnotType="sticky",r.Icon="Comment",r.Bounds=this.convertBounds(a.bounds),r.StrokeColor=a.strokeColor,r.Color=a.color,t[a.pageNumber].stickyNotesAnnotation.push(r);else if("FreeText"===a.shapeAnnotationType)r.AnnotType="freeText",r.Name=a.annotationId,r.MarkupText=a.dynamicText,r.Text=a.dynamicText,r.Note=a.dynamicText,r.TextAlign=a.textAlign,r.Thickness=a.thicknes,r.StrokeColor=a.strokeColor,r.FillColor=a.fillColor,r.FontColor=a.fontColor,r.FontSize=a.fontSize,r.FontFamily=a.fontFamily,r.Rotate=a.rotateAngle,r.Bounds=this.convertBounds(a.bounds),r.Font={Name:a.fontFamily,Size:a.fontSize,Bold:a.font.isBold,Italic:a.font.isItalic,Strikeout:a.font.isStrikeout,Underline:a.font.isUnderline},t[a.pageNumber].freeTextAnnotation.push(r);else if("stamp"===a.shapeAnnotationType){if(r.AnnotType="stamp",r.Icon=a.icon,r.isDynamic=!1,r.Rect=this.convertBounds(a.bounds,!1,!0),r.RotateAngle=a.rotateAngle,r.FillColor=a.fillColor,r.StrokeColor=a.strokeColor,r.StampAnnotationType=a.stampAnnotationType,r.CreationDate=a.creationDate,"image"===a.stampAnnotationType){var p=[],c={imagedata:a.stampAnnotationPath};p.push(c),r.Apperarance=p}if(a.isDynamicStamp){r.IsDynamic=!0,r.StrokeColor=a.stampFillcolor;p=[],c={type:"string",text:a.dynamicText,currentFontname:"95b303ab-d397-438a-83af-e2ff8a9900f1",baseFontName:"Helvetica-BoldOblique",fontSize:10,isImport:!0};p.push(c),r.Apperarance=p}t[a.pageNumber].stampAnnotations.push(r)}else if("Ink"===a.shapeAnnotationType||"Signature"===a.shapeAnnotationType)r.StrokeColor=a.strokeColor,r.FillColor=a.fillColor,r.Thickness=a.thickness,r.Bounds=this.convertBounds(a.bounds),r.PathData=a.data,r.pageIndex=a.pageNumber,"Ink"===a.shapeAnnotationType&&(r.AnnotType="Ink",r.IsPathData=!0,t[a.pageNumber].signatureInkAnnotation.push(r)),"Signature"===a.shapeAnnotationType&&(r.AnnotType="Signature",r.SignatureName=a.annotationId,r.IsSignature=!0,t[a.pageNumber].signatureAnnotation.push(r));else if("Redaction"===a.shapeAnnotationType)r.AnnotType="redaction",r.StrokeColor=a.markerBorderColor,r.FillColor=a.markerFillColor,r.MarkerFillColor=a.markerFillColor,r.MarkerOpacity=a.markerOpacity,r.OverlayText=a.overlayText,r.FontColor=a.fontColor,r.FontSize=a.fontSize,r.FontFamily=a.fontFamily,r.TextAlign=a.textAlign,r.Bounds=this.convertBounds(a.bounds),r.RotateAngle=a.rotateAngle,r.IsLocked=a.isLocked,t[a.pageNumber].redactionAnnotation.push(r);else if("Line"===a.shapeAnnotationType||"LineWidthArrowHead"===a.shapeAnnotationType||"Polyline"===a.shapeAnnotationType||"Polygon"===a.shapeAnnotationType||"Polyline"===a.shapeAnnotationType||"Circle"===a.shapeAnnotationType||"Oval"===a.shapeAnnotationType||"Rectangle"===a.shapeAnnotationType||"Square"===a.shapeAnnotationType||"Ellipse"===a.shapeAnnotationType){if(r.AnnotType="shape",r.StrokeColor=a.strokeColor,r.FillColor=a.fillColor,r.Thickness=a.thickness,r.BorderStyle=a.borderStyle,r.BorderDashArray=a.borderDashArray,r.RotateAngle=a.rotateAngle,r.IsCloudShape=a.isCloudShape,r.CloudIntensity=a.cloudIntensity,r.RectangleDifference=a.rectangleDifference,r.LineHeadStart=a.lineHeadStart,r.LineHeadEnd=a.lineHeadEnd,r.IsLocked=a.isLocked,r.EnableShapeLabel=a.enableShapeLabel,r.LabelContent=a.labelContent,r.LabelFillColor=a.labelFillColor,r.LabelBorderColor=a.labelBorderColor,r.FontColor=a.fontColor,r.FontSize=a.fontSize,r.LabelBounds=this.convertBounds(a.labelBounds),r.LabelSettings=a.labelSettings,r.Bounds=this.convertBounds(a.bounds),r.LeaderLength=a.leaderLength,r.LeaderLineExtenstion=a.leaderLineExtension,a.vertexPoints&&a.vertexPoints.length>=1){var u=[];for(d=0;d<a.vertexPoints.length;d++)u.push(this.convertVertexPoints(a.vertexPoints[d]));r.VertexPoints=u}if(r.EnableShapeLabel=a.enableShapeLabel,"Distance calculation"===a.subject||"Perimeter calculation"===a.subject||"Area calculation"===a.subject||"Radius calculation"===a.subject||"Volume calculation"===a.subject){r.AnnotType="shape_measure";var f=a.calibrate;f&&(r.Calibrate={Ratio:f.ratio,X:[{Unit:f.x[0].unit,ConversionFactor:f.x[0].conversionFactor,FractionalType:f.x[0].fractionalType,Denominator:f.x[0].denominator,FormatDenominator:f.x[0].formatDenominator}],Distance:[{Unit:f.distance[0].unit,ConversionFactor:f.distance[0].conversionFactor,FractionalType:f.distance[0].fractionalType,Denominator:f.distance[0].denominator,FormatDenominator:f.distance[0].formatDenominator}],Area:[{Unit:f.area[0].unit,ConversionFactor:f.area[0].conversionFactor,FractionalType:f.area[0].fractionalType,Denominator:f.area[0].denominator,FormatDenominator:f.area[0].formatDenominator}],Angle:null,Volume:null,TargetUnitConversion:f.targetUnitConversion,Depth:f.depth}),r.Indent=a.indent,r.Caption=a.caption,r.CaptionPosition=a.captionPosition,r.LeaderLineExtension=a.leaderLineExtension,r.LeaderLength=a.leaderLength,r.LeaderLineOffset=a.leaderLineOffset,t[a.pageNumber].measureShapeAnnotation.push(r)}else t[a.pageNumber].shapeAnnotation.push(r)}}i.pdfAnnotation=t,this.pdfViewer.importAnnotation(i)}}function gn(e,t,i){if(this.pdfViewer.annotationModule){var n=this;return new Promise((function(o,s){n.createRequestForImportAnnotations(e,t,i).then((function(e){document.getElementById(n.pdfViewer.dataId+"_annotationXFdfUploadElement").value="",document.getElementById(n.pdfViewer.dataId+"_annotationUploadElement").value="",o(e)}))}))}return Promise.resolve(!1)}function wn(e){this.pdfViewer.annotationModule&&(this.updateExportItem()&&this.createRequestForExportAnnotations(!1,e))}function yn(e,t){var i=[];if(e)(i={})[t]=o={textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[],redactionAnnotation:[]};else for(var n=0;n<this.pageCount;n++){var o={textMarkupAnnotation:[],shapeAnnotation:[],measureShapeAnnotation:[],stampAnnotations:[],stickyNotesAnnotation:[],freeTextAnnotation:[],signatureAnnotation:[],signatureInkAnnotation:[],redactionAnnotation:[]};i.push(o)}return i}function vn(e,t){return un(this,void 0,void 0,(function(){var i,n,o,s,a,r,l,d,h,p,c,u,f,m,g,w,y,v,b,S,A,x,V;return fn(this,(function(C){switch(C.label){case 0:if(!e)return[3,6];this.isImportAction=!0,i=void 0,this.isImportedAnnotation?this.importedAnnotation=this.combineImportedData(this.importedAnnotation,e):this.pageCount>0&&(this.importedAnnotation=e),this.isImportedAnnotation||(i=0),n=Object.keys(e).pop(),o=!1,this.createRequestForStamp(e,!0),s=0,C.label=1;case 1:if(!(s<this.pageCount))return[3,5];if(!e[s])return[3,4];if(n===s.toString()&&(o=!0),a=[],r=[],l=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),d=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),h=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),p=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),c=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),u=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),f=window.sessionStorage.getItem(this.documentId+"_annotations_sign"),m=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),g=window.sessionStorage.getItem(this.documentId+"_annotations_redaction"),w=this.pageSize[s].rotation,this.isStorageExceed&&(l=this.annotationStorage[this.documentId+"_annotations_textMarkup"],d=this.annotationStorage[this.documentId+"_annotations_shape"],h=this.annotationStorage[this.documentId+"_annotations_shape_measure"],p=this.annotationStorage[this.documentId+"_annotations_stamp"],c=this.annotationStorage[this.documentId+"_annotations_sticky"],u=this.annotationStorage[this.documentId+"_annotations_freetext"],m=this.annotationStorage[this.documentId+"_annotations_ink"],g=this.annotationStorage[this.documentId+"_annotations_redaction"]),this.getElement("_annotationCanvas_"+s)&&void 0!==w)if(this.drawPageAnnotations(e[s],s),this.isImportedAnnotation){for(y=!1,A=0;A<this.annotationPageList.length;A++)this.annotationPageList[A]===s&&(y=!0);y&&(this.annotationPageList[i]=s,i+=1)}else this.annotationPageList[i]=s,i+=1;if(e[s].redactionAnnotation&&0!==e[s].redactionAnnotation.length&&this.pdfViewer.annotationModule.redactionAnnotationModule&&(g&&(S=JSON.parse(g),e[s].redactionAnnotation=this.checkAnnotationCollections(S,e[s].redactionAnnotation,s)),e[s].redactionAnnotation=this.checkAnnotationCommentsCollections(e[s].redactionAnnotation,s),a.redactionAnnotation=e[s].redactionAnnotation,0!==e[s].redactionAnnotation.length))for(A=0;A<e[s].redactionAnnotation.length;A++)r.push(e[s].redactionAnnotation[A]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.redactionAnnotationModule.updateRedactionAnnotationCollections(e[s].redactionAnnotation[A],s));if(e[s].textMarkupAnnotation&&0!==e[s].textMarkupAnnotation.length&&this.pdfViewer.annotationModule.textMarkupAnnotationModule&&(l&&(S=JSON.parse(l),e[s].textMarkupAnnotation=this.checkAnnotationCollections(S,e[s].textMarkupAnnotation,s)),e[s].textMarkupAnnotation=this.checkAnnotationCommentsCollections(e[s].textMarkupAnnotation,s),a.textMarkupAnnotation=e[s].textMarkupAnnotation,0!==e[s].textMarkupAnnotation.length))for(A=0;A<e[s].textMarkupAnnotation.length;A++)r.push(e[s].textMarkupAnnotation[A]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(e[s].textMarkupAnnotation[A],s));if(e[s].shapeAnnotation&&0!==e[s].shapeAnnotation.length&&this.pdfViewer.annotationModule.shapeAnnotationModule&&(d&&(S=JSON.parse(d),e[s].shapeAnnotation=this.checkAnnotationCollections(S,e[s].shapeAnnotation,s)),e[s].shapeAnnotation=this.checkAnnotationCommentsCollections(e[s].shapeAnnotation,s),a.shapeAnnotation=e[s].shapeAnnotation,0!==e[s].shapeAnnotation.length))for(A=0;A<e[s].shapeAnnotation.length;A++)r.push(e[s].shapeAnnotation[A]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(e[s].shapeAnnotation[A],s));if(e[s].measureShapeAnnotation&&0!==e[s].measureShapeAnnotation.length&&this.pdfViewer.annotationModule.measureAnnotationModule&&(h&&(S=JSON.parse(h),e[s].measureShapeAnnotation=this.checkAnnotationCollections(S,e[s].measureShapeAnnotation,s)),e[s].measureShapeAnnotation=this.checkAnnotationCommentsCollections(e[s].measureShapeAnnotation,s),a.measureShapeAnnotation=e[s].measureShapeAnnotation,0!==e[s].measureShapeAnnotation.length))for(A=0;A<e[s].measureShapeAnnotation.length;A++)r.push(e[s].measureShapeAnnotation[A]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(e[s].measureShapeAnnotation[A],s));if(e[s].stampAnnotations&&0!==e[s].stampAnnotations.length&&this.pdfViewer.annotationModule.stampAnnotationModule&&(p&&(S=JSON.parse(p),e[s].stampAnnotations=this.checkAnnotationCollections(S,e[s].stampAnnotations,s)),e[s].stampAnnotations=this.checkAnnotationCommentsCollections(e[s].stampAnnotations,s),a.stampAnnotations=e[s].stampAnnotations,0!==e[s].stampAnnotations.length))for(A=0;A<e[s].stampAnnotations.length;A++)r.push(e[s].stampAnnotations[A]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(e[s].stampAnnotations[A],s));if(e[s].stickyNotesAnnotation&&0!==e[s].stickyNotesAnnotation.length&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule&&(c&&(S=JSON.parse(c),e[s].stickyNotesAnnotation=this.checkAnnotationCollections(S,e[s].stickyNotesAnnotation,s)),e[s].stickyNotesAnnotation=this.checkAnnotationCommentsCollections(e[s].stickyNotesAnnotation,s),a.stickyNotesAnnotation=e[s].stickyNotesAnnotation,0!==e[s].stickyNotesAnnotation.length))for(A=0;A<e[s].stickyNotesAnnotation.length;A++)r.push(e[s].stickyNotesAnnotation[A]),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateStickyNotesAnnotationCollections(e[s].stickyNotesAnnotation[A],s));if(e[s].freeTextAnnotation&&0!==e[s].freeTextAnnotation.length&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&(u&&(S=JSON.parse(u),e[s].freeTextAnnotation=this.checkAnnotationCollections(S,e[s].freeTextAnnotation,s)),e[s].freeTextAnnotation=this.checkAnnotationCommentsCollections(e[s].freeTextAnnotation,s),a.freeTextAnnotation=e[s].freeTextAnnotation,0!==e[s].freeTextAnnotation.length))for(A=0;A<e[s].freeTextAnnotation.length;A++)v=e[s].freeTextAnnotation[A],sf.base.isNullOrUndefined(t)||(v.isFreeTextEdited=!0),r.push(v),(b=this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(v,s))&&"Imported Annotation"===v.annotationAddMode&&(b.isFreeTextEdited=!0),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(b);if(e[s].signatureAnnotation&&0!==e[s].signatureAnnotation.length&&this.signatureModule&&(f&&(S=JSON.parse(f),e[s].signatureAnnotation=this.checkSignatureCollections(S,e[s].signatureAnnotation,s)),a.signatureAnnotation=e[s].signatureAnnotation,0!==e[s].signatureAnnotation.length))for(A=0;A<e[s].signatureAnnotation.length;A++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateCollections(this.signatureModule.updateSignatureCollections(e[s].signatureAnnotation[A],s),!0);if(e[s].signatureInkAnnotation&&0!==e[s].signatureInkAnnotation.length&&(m&&(S=JSON.parse(m),e[s].signatureInkAnnotation=this.checkAnnotationCollections(S,e[s].signatureInkAnnotation,s)),e[s].signatureInkAnnotation=this.checkAnnotationCommentsCollections(e[s].signatureInkAnnotation,s),a.signatureInkAnnotation=e[s].signatureInkAnnotation,0!==e[s].signatureInkAnnotation.length))for(A=0;A<e[s].signatureInkAnnotation.length;A++)r.push(e[s].signatureInkAnnotation[A]);return 0===r.length&&!o||!this.pdfViewer.enableCommentPanel?[3,3]:(x=null,this.pdfViewer.enableChunkMessages&&null!=(x=this.pdfViewer.jsonObjectToGetBlobInfo(r))&&(r=null),[4,this.pdfViewer._dotnetInstance.invokeMethodAsync("RenderAnnotationComments",r,s,o,x)]);case 2:C.sent(),C.label=3;case 3:this.updateImportedAnnotationsInDocumentCollections(a,s),C.label=4;case 4:return s++,[3,1];case 5:this.pageCount>0&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule&&!this.pdfViewer.annotationModule.stickyNotesAnnotationModule.isAnnotationRendered&&(V=this.createAnnotationsCollection())&&(this.documentAnnotationCollections=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationsInDocumentCollections(this.importedAnnotation,V)),C.label=6;case 6:return[2]}}))}))}function bn(e,t){var i=this;if(this.documentAnnotationCollections){var n=this.documentAnnotationCollections[e];if(n){if(t.textMarkupAnnotation&&0!==t.textMarkupAnnotation.length)for(var o=0;o<t.textMarkupAnnotation.length;o++){this.checkDocumentCollections(t.textMarkupAnnotation[o],n.textMarkupAnnotation)||n.textMarkupAnnotation.push(t.textMarkupAnnotation[o])}if(t.shapeAnnotation&&0!==t.shapeAnnotation.length)for(o=0;o<t.shapeAnnotation.length;o++){this.checkDocumentCollections(t.shapeAnnotation[o],n.shapeAnnotation)||n.shapeAnnotation.push(t.shapeAnnotation[o])}if(t.measureShapeAnnotation&&0!==t.measureShapeAnnotation.length)for(o=0;o<t.measureShapeAnnotation.length;o++){this.checkDocumentCollections(t.measureShapeAnnotation[o],n.measureShapeAnnotation)||n.measureShapeAnnotation.push(t.measureShapeAnnotation[o])}if(t.stampAnnotations&&0!==t.stampAnnotations.length){var s=function(e){if(a.checkDocumentCollections(t.stampAnnotations[e],n.stampAnnotations)){var o=t.stampAnnotations[e];n.stampAnnotations.forEach((function(e,t){if(o.AnnotName===e.AnnotName){var s=i.pdfViewer.annotationModule.stampAnnotationModule.findImageData(e.Apperarance),a=i.pdfViewer.annotationModule.stampAnnotationModule.findImageData(o.Apperarance);!s&&a&&n.stampAnnotations.splice(t,1,o)}}))}else n.stampAnnotations.push(t.stampAnnotations[e])},a=this;for(o=0;o<t.stampAnnotations.length;o++)s(o)}if(t.stickyNotesAnnotation&&0!==t.stickyNotesAnnotation.length)for(o=0;o<t.stickyNotesAnnotation.length;o++){this.checkDocumentCollections(t.stickyNotesAnnotation[o],n.stickyNotesAnnotation)||n.stickyNotesAnnotation.push(t.stickyNotesAnnotation[o])}if(t.freeTextAnnotation&&0!==t.freeTextAnnotation.length)for(o=0;o<t.freeTextAnnotation.length;o++){this.checkDocumentCollections(t.freeTextAnnotation[o],n.freeTextAnnotation)||n.freeTextAnnotation.push(t.freeTextAnnotation[o])}if(t.signatureAnnotation&&0!==t.signatureAnnotation.length)for(o=0;o<t.signatureAnnotation.length;o++){this.checkDocumentCollections(t.signatureAnnotation[o],n.signatureAnnotation)||n.signatureAnnotation.push(t.signatureAnnotation[o])}if(t.signatureInkAnnotation&&0!==t.signatureInkAnnotation.length)for(o=0;o<t.signatureInkAnnotation.length;o++){this.checkDocumentCollections(t.signatureInkAnnotation[o],n.signatureInkAnnotation)||n.signatureInkAnnotation.push(t.signatureInkAnnotation[o])}if(t.redactionAnnotation&&0!==t.redactionAnnotation.length)for(o=0;o<t.redactionAnnotation.length;o++){this.checkDocumentCollections(t.redactionAnnotation[o],n.redactionAnnotation)||n.redactionAnnotation.push(t.redactionAnnotation[o])}this.documentAnnotationCollections[e]=n}}}function Sn(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),i=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),n=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),o=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),s=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),a=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),r=window.sessionStorage.getItem(this.documentId+"_annotations_sign"),l=window.sessionStorage.getItem(this.documentId+"_annotations_redaction");if(this.isStorageExceed&&(e=this.annotationStorage[this.documentId+"_annotations_textMarkup"],t=this.annotationStorage[this.documentId+"_annotations_shape"],i=this.annotationStorage[this.documentId+"_annotations_shape_measure"],n=this.annotationStorage[this.documentId+"_annotations_stamp"],o=this.annotationStorage[this.documentId+"_annotations_sticky"],s=this.annotationStorage[this.documentId+"_annotations_freetext"],a=this.annotationStorage[this.documentId+"_annotations_ink"],r=this.annotationStorage[this.documentId+"_annotations_sign"],l=this.annotationStorage[this.documentId+"_annotations_redaction"]),this.downloadCollections={textMarkupObject:e,shapeObject:t,measureShapeObject:i,stampObject:n,stickyObject:o,freeTextObject:s,inkObject:a,signatureObject:r,redactionObject:l},this.documentAnnotationCollections)for(var d=0;d<this.pageCount;d++)if(this.documentAnnotationCollections[d]){var h=u(this.documentAnnotationCollections[d]);h=this.checkDocumentCollectionData(d,h),this.savePageAnnotations(h,d)}}function An(e,t){if(this.pdfViewer.annotationModule){if(0!==e.textMarkupAnnotation.length&&this.pdfViewer.annotationModule.textMarkupAnnotationModule)for(var i=0;i<e.textMarkupAnnotation.length;i++)this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveImportedTextMarkupAnnotations(e.textMarkupAnnotation[i],t);if(0!==e.shapeAnnotation.length&&this.pdfViewer.annotationModule.shapeAnnotationModule)for(i=0;i<e.shapeAnnotation.length;i++)this.pdfViewer.annotationModule.shapeAnnotationModule.saveImportedShapeAnnotations(e.shapeAnnotation[i],t);if(0!==e.measureShapeAnnotation.length&&this.pdfViewer.annotationModule.measureAnnotationModule)for(i=0;i<e.measureShapeAnnotation.length;i++)this.pdfViewer.annotationModule.measureAnnotationModule.saveImportedMeasureAnnotations(e.measureShapeAnnotation[i],t);if(0!==e.stampAnnotations.length&&this.pdfViewer.annotationModule.stampAnnotationModule)for(i=0;i<e.stampAnnotations.length;i++)this.pdfViewer.annotationModule.stampAnnotationModule.saveImportedStampAnnotations(e.stampAnnotations[i],t);if(0!==e.stickyNotesAnnotation.length&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule)for(i=0;i<e.stickyNotesAnnotation.length;i++)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveImportedStickyNotesAnnotations(e.stickyNotesAnnotation[i],t);if(0!==e.freeTextAnnotation.length&&this.pdfViewer.annotationModule.freeTextAnnotationModule)for(i=0;i<e.freeTextAnnotation.length;i++)this.pdfViewer.annotationModule.freeTextAnnotationModule.saveImportedFreeTextAnnotations(e.freeTextAnnotation[i],t);if(0!==e.signatureInkAnnotation.length&&this.pdfViewer.annotationModule.inkAnnotationModule)for(i=0;i<e.signatureInkAnnotation.length;i++)this.pdfViewer.annotationModule.inkAnnotationModule.saveImportedInkAnnotation(e.signatureInkAnnotation[i],t);if(e.redactionAnnotation&&0!==e.redactionAnnotation.length&&this.pdfViewer.annotationModule.redactionAnnotationModule)for(i=0;i<e.redactionAnnotation.length;i++)this.pdfViewer.annotationModule.redactionAnnotationModule.saveImportedRedactionAnnotations(e.redactionAnnotation[i],t)}}function xn(){window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"),window.sessionStorage.removeItem(this.documentId+"_annotations_redaction"),this.downloadCollections&&(this.isStorageExceed?(this.annotationStorage[this.documentId+"_annotations_textMarkup"]=this.downloadCollections.textMarkupObject,this.annotationStorage[this.documentId+"_annotations_shape"]=this.downloadCollections.shapeObject,this.annotationStorage[this.documentId+"_annotations_shape_measure"]=this.downloadCollections.measureShapeObject,this.annotationStorage[this.documentId+"_annotations_stamp"]=this.downloadCollections.stampObject,this.annotationStorage[this.documentId+"_annotations_sticky"]=this.downloadCollections.stickyObject,this.annotationStorage[this.documentId+"_annotations_freetext"]=this.downloadCollections.freeTextObject,this.annotationStorage[this.documentId+"_annotations_ink"]=this.downloadCollections.inkObject,this.annotationStorage[this.documentId+"_annotations_redaction"]=this.downloadCollections.redactionObject):(this.downloadCollections.textMarkupObject&&window.sessionStorage.setItem(this.documentId+"_annotations_textMarkup",this.downloadCollections.textMarkupObject),this.downloadCollections.shapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape",this.downloadCollections.shapeObject),this.downloadCollections.measureShapeObject&&window.sessionStorage.setItem(this.documentId+"_annotations_shape_measure",this.downloadCollections.measureShapeObject),this.downloadCollections.stampObject&&window.sessionStorage.setItem(this.documentId+"_annotations_stamp",this.downloadCollections.stampObject),this.downloadCollections.stickyObject&&window.sessionStorage.setItem(this.documentId+"_annotations_sticky",this.downloadCollections.stickyObject),this.downloadCollections.freeTextObject&&window.sessionStorage.setItem(this.documentId+"_annotations_freetext",this.downloadCollections.freeTextObject),this.downloadCollections.inkObject&&window.sessionStorage.setItem(this.documentId+"_annotations_ink",this.downloadCollections.inkObject),this.downloadCollections.redactionObject&&window.sessionStorage.setItem(this.documentId+"_annotations_redaction",this.downloadCollections.redactionObject)))}function Vn(){var e,t,i,n,o,s,a,r,l={};if(this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()&&(this.isJsonExported=!0,e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations()),this.isShapeAnnotationModule()&&(this.isJsonExported=!0,t=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations()),this.isCalibrateAnnotationModule()&&(this.isJsonExported=!0,i=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations()),this.isStampAnnotationModule()&&(n=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations()),this.isCommentAnnotationModule()&&(o=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations()),this.isFreeTextAnnotationModule()&&(s=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations()),this.isInkAnnotationModule()&&(r=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature()),this.pdfViewer.isSignatureEditable)a=this.signatureModule.saveSignature();else{for(var d=[],h=0;h<this.pageCount;h++)d[h]=[];a=JSON.stringify(d)}var p=[];for(h=0;h<this.pageCount;h++)p[h]=[];for(var c=JSON.stringify(p),u=0;u<this.pageCount;u++){var f={textMarkupAnnotation:JSON.parse(e)[u],shapeAnnotation:JSON.parse(t)[u],measureShapeAnnotation:JSON.parse(i)[u],stampAnnotations:JSON.parse(n)[u],stickyNotesAnnotation:JSON.parse(o)[u],freeTextAnnotation:JSON.parse(s)[u],signatureAnnotation:JSON.parse(a)[u],signatureInkAnnotation:JSON.parse(r)[u],redactionAnnotation:JSON.parse(c)[u]};l[u]=f}return JSON.stringify(l)}function Cn(e,t){for(var i=0;i<this.pageCount;i++)if(e[i])if(t[i])e[i].textMarkupAnnotation&&0!==e[i].textMarkupAnnotation.length&&(t[i].textMarkupAnnotation?(e[i].textMarkupAnnotation=this.checkImportedData(t[i].textMarkupAnnotation,e[i].textMarkupAnnotation,i),0!==e[i].textMarkupAnnotation.length&&(t[i].textMarkupAnnotation=t[i].textMarkupAnnotation.concat(e[i].textMarkupAnnotation))):t[i].textMarkupAnnotation=e[i].textMarkupAnnotation),e[i].shapeAnnotation&&0!==e[i].shapeAnnotation.length&&(t[i].shapeAnnotation?(e[i].shapeAnnotation=this.checkImportedData(t[i].shapeAnnotation,e[i].shapeAnnotation,i),0!==e[i].shapeAnnotation.length&&(t[i].shapeAnnotation=t[i].shapeAnnotation.concat(e[i].shapeAnnotation))):t[i].shapeAnnotation=e[i].shapeAnnotation),e[i].measureShapeAnnotation&&0!==e[i].measureShapeAnnotation.length&&(t[i].measureShapeAnnotation?(e[i].measureShapeAnnotation=this.checkImportedData(t[i].measureShapeAnnotation,e[i].measureShapeAnnotation,i),0!==e[i].measureShapeAnnotation.length&&(t[i].measureShapeAnnotation=t[i].measureShapeAnnotation.concat(e[i].measureShapeAnnotation))):t[i].measureShapeAnnotation=e[i].measureShapeAnnotation),e[i].stampAnnotations&&0!==e[i].stampAnnotations.length&&(t[i].stampAnnotations?(e[i].stampAnnotations=this.checkImportedData(t[i].stampAnnotations,e[i].stampAnnotations,i),0!==e[i].stampAnnotations.length&&(t[i].stampAnnotations=t[i].stampAnnotations.concat(e[i].stampAnnotations))):t[i].stampAnnotations=e[i].stampAnnotations),e[i].stickyNotesAnnotation&&0!==e[i].stickyNotesAnnotation.length&&(t[i].stickyNotesAnnotation?(e[i].stickyNotesAnnotation=this.checkImportedData(t[i].stickyNotesAnnotation,e[i].stickyNotesAnnotation,i),0!==e[i].stickyNotesAnnotation.length&&(t[i].stickyNotesAnnotation=t[i].stickyNotesAnnotation.concat(e[i].stickyNotesAnnotation))):t[i].stickyNotesAnnotation=e[i].stickyNotesAnnotation),e[i].freeTextAnnotation&&0!==e[i].freeTextAnnotation.length&&(t[i].freeTextAnnotation?(e[i].freeTextAnnotation=this.checkImportedData(t[i].freeTextAnnotation,e[i].freeTextAnnotation,i),0!==e[i].freeTextAnnotation.length&&(t[i].freeTextAnnotation=t[i].freeTextAnnotation.concat(e[i].freeTextAnnotation))):t[i].freeTextAnnotation=e[i].freeTextAnnotation),e[i].signatureInkAnnotation&&0!==e[i].signatureInkAnnotation.length&&(t[i].signatureInkAnnotation?(e[i].signatureInkAnnotation=this.checkImportedData(t[i].signatureInkAnnotation,e[i].signatureInkAnnotation,i),0!==e[i].signatureInkAnnotation.length&&(t[i].signatureInkAnnotation=t[i].signatureInkAnnotation.concat(e[i].signatureInkAnnotation))):t[i].signatureInkAnnotation=e[i].signatureInkAnnotation);else{var n={textMarkupAnnotation:e[i].textMarkupAnnotation,shapeAnnotation:e[i].shapeAnnotation,measureShapeAnnotation:e[i].measureShapeAnnotation,stampAnnotations:e[i].stampAnnotations,stickyNotesAnnotation:e[i].stickyNotesAnnotation,freeTextAnnotation:e[i].freeTextAnnotation,signatureInkAnnotation:e[i].signatureInkAnnotation};t[i]=n}return t}function In(e,t){if(this.annotationComments){var i=this.annotationComments[e];if(i=this.selectAnnotationCollections(i))for(var n=0;n<i.length;n++)for(var o=0;o<t.length;o++)i[n].AnnotName===t[o].AnnotName&&(i[n].isAlreadyAdded=!0,t.splice(o,1),o-=1);i=null}return t}function kn(e,t,i){if(e&&(t=t[i]),t){if(t.textMarkupAnnotation&&0!==t.textMarkupAnnotation.length){var n=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_textMarkup"]),n)(o=JSON.parse(n))&&(t.textMarkupAnnotation=this.checkAnnotationCollections(o,t.textMarkupAnnotation,i));t.textMarkupAnnotation=this.checkAnnotationCommentsCollections(t.textMarkupAnnotation,i),0!==t.textMarkupAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(i,null,null,t.textMarkupAnnotation,null,null,!0)}if(t.shapeAnnotation&&0!==t.shapeAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_shape");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_shape"]),n){var o=JSON.parse(n);t.shapeAnnotation=this.checkAnnotationCollections(o,t.shapeAnnotation,i)}t.shapeAnnotation=this.checkAnnotationCommentsCollections(t.shapeAnnotation,i),0!==t.shapeAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(i,t.shapeAnnotation,null,null,null,null,!0)}if(t.measureShapeAnnotation&&0!==t.measureShapeAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_shape_measure"]),n){o=JSON.parse(n);t.measureShapeAnnotation=this.checkAnnotationCollections(o,t.measureShapeAnnotation,i)}t.measureShapeAnnotation=this.checkAnnotationCommentsCollections(t.measureShapeAnnotation,i),0!==t.measureShapeAnnotation.length&&this.pdfViewer.annotationModule.renderAnnotations(i,null,t.measureShapeAnnotation,null,null,null,!0)}if(t.stickyNotesAnnotation&&0!==t.stickyNotesAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_sticky");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_sticky"]),n){o=JSON.parse(n);t.stickyNotesAnnotation=this.checkAnnotationCollections(o,t.stickyNotesAnnotation,i)}t.stickyNotesAnnotation=this.checkAnnotationCommentsCollections(t.stickyNotesAnnotation,i),0!==t.stickyNotesAnnotation.length&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(t.stickyNotesAnnotation,i)}if(t.freeTextAnnotation&&0!==t.freeTextAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_freetext");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_freetext"]),n){o=JSON.parse(n);t.freeTextAnnotation=this.checkAnnotationCollections(o,t.freeTextAnnotation,i)}t.freeTextAnnotation=this.checkAnnotationCommentsCollections(t.freeTextAnnotation,i),0!==t.freeTextAnnotation.length&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(t.freeTextAnnotation,i,!0)}if(t.signatureAnnotation&&0!==t.signatureAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_sign");(o=JSON.parse(n))&&(t.signatureAnnotation=this.checkSignatureCollections(o,t.signatureAnnotation,i)),this.signatureModule.renderExistingSignature(t.signatureAnnotation,i,!0)}if(t.signatureInkAnnotation&&0!==t.signatureInkAnnotation.length){n=window.sessionStorage.getItem(this.documentId+"_annotations_ink");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_ink"]),n){o=JSON.parse(n);t.signatureInkAnnotation=this.checkAnnotationCollections(o,t.signatureInkAnnotation,i)}t.signatureInkAnnotation=this.checkAnnotationCommentsCollections(t.signatureInkAnnotation,i),0!==t.signatureInkAnnotation.length&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(t.signatureInkAnnotation,i,!0)}if(t.redactionAnnotation&&0!==t.redactionAnnotation.length&&this.pdfViewer.annotationModule.redactionAnnotationModule){n=window.sessionStorage.getItem(this.documentId+"_annotations_redaction");if(this.isStorageExceed&&(n=this.annotationStorage[this.documentId+"_annotations_redaction"]),n){o=JSON.parse(n);t.redactionAnnotation=this.checkAnnotationCollections(o,t.redactionAnnotation,i)}t.redactionAnnotation=this.checkAnnotationCommentsCollections(t.redactionAnnotation,i),0!==t.redactionAnnotation.length&&this.pdfViewer.annotationModule.redactionAnnotationModule.renderRedactionAnnotations(t.redactionAnnotation,i)}}}function Mn(){if(this.pdfViewer.annotationModule){this.pdfViewer.annotations=[],this.pdfViewer.zIndexTable=[],this.pdfViewer.annotationCollection=[],this.pdfViewer.signatureCollection=[];var e=this.createAnnotationsCollection();this.annotationComments=e,this.documentAnnotationCollections=e,this.annotationRenderredList=[],window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"),window.sessionStorage.removeItem(this.documentId+"_annotations_redaction");for(var t=0;t<this.pageCount;t++){this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null,null),this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clearSelection(t);document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+(t+1));var i=document.getElementById(this.pdfViewer.dataId+"_accordionContentContainer");i&&0===i.childElementCount&&(i.style.display="none",document.getElementById(this.pdfViewer.dataId+"_commentsPanelText")&&this.navigationPane&&this.navigationPane.annotationMenuObj&&(this.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!1),document.getElementById(this.pdfViewer.dataId+"_commentsPanelText").style.display="block"))}this.isImportedAnnotation=!1,this.isImportAction=!1,this.importedAnnotation=[],this.annotationPageList=[],this.pdfViewer.annotationModule.freeTextAnnotationModule.freeTextPageNumbers=[],this.pdfViewer.annotationModule.stampAnnotationModule.renderedStampCollection=[],this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[],this.isAnnotationCollectionRemoved=!0}}function Tn(e,t,i){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++)e[n].AnnotName===t[o].AnnotName&&(t.splice(o,1),o-=1);if(this.annotationComments){var s=this.annotationComments[i];if(s=this.selectAnnotationCollections(s))for(n=0;n<s.length;n++)for(o=0;o<t.length;o++)s[n].AnnotName===t[o].AnnotName&&(t.splice(o,1),o-=1)}return t}function En(e){var t=!1;this.pdfViewer.formDesignerModule&&(e=e.split("_")[0]);var i=this.pdfViewer.nameTable[""+e];return i&&("SignatureField"!==i.formFieldAnnotationType&&"InitialField"!==i.formFieldAnnotationType&&"SignatureField"!==i.annotName||(t=!0)),t}function Bn(e,t,i,n,o,s){var a=this.pdfViewer.touchPadding/1;this.getZoomFactor()>=2&&!sf.base.Browser.isDevice&&(a/=this.getZoomFactor()/1.9),(e.actualSize.width<40||e.actualSize.height<40&&sf.base.Browser.isDevice)&&(a=a/2*this.getZoomFactor()/1);t.selectedItems;var r=!1,l=!1,d=!1,h=!1,p=this.pdfViewer.annotationSelectorSettings.resizerLocation,c=this.pdfViewer.selectedItems.annotations;if((p<1||p>3)&&(p=3),c&&c.length>0){var u=c[0].shapeAnnotationType;"Stamp"!==u&&"FreeText"!==u&&"Image"!==u&&"HandWrittenSignature"!==u&&"SignatureText"!==u&&"SignatureImage"!==u||(r=!0),"StickyNotes"===u&&(l=!0),"Ink"===u&&(h=!0),"Ellipse"!==u&&"Radius"!==u&&"Rectangle"!==u||(d=!0)}if(!l){if(h||r||c[0]&&("HandWrittenSignature"===c[0].shapeAnnotationType||"SignatureText"===c[0].shapeAnnotationType||"SignatureImage"===c[0].shapeAnnotationType)||e.actualSize.width>=40&&e.actualSize.height>=40&&d&&(1===p||3===p)){if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o+e.actualSize.width,y:s+e.actualSize.height}),a))return"ResizeSouthEast";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o,y:s+e.actualSize.height}),a))return"ResizeSouthWest";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o+e.actualSize.width,y:s}),a))return"ResizeNorthEast";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o,y:s}),a))return"ResizeNorthWest"}if(h||!d&&!this.checkNonEdgeShape(c)||d&&(2===p||3===p||!(e.actualSize.width>=40&&e.actualSize.height>=40)&&1===p)){if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o+e.actualSize.width,y:s+e.actualSize.height/2}),a)&&!r)return"ResizeEast";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o,y:s+e.actualSize.height/2}),a)&&!r)return"ResizeWest";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o+e.actualSize.width/2,y:s+e.actualSize.height}),a)&&!r)return"ResizeSouth";if(sf.drawings.contains(i,sf.drawings.transformPointByMatrix(n,{x:o+e.actualSize.width/2,y:s}),a)&&!r)return"ResizeNorth"}}return null}function Pn(e,t,i,n,o,s){var a;return a||(a=this.checkForResizeHandles(e,t,i,n,o,s)),a||null}function Dn(e){var t,i=!1;if(t=this.getItemFromSessionStorage("_formDesigner"))for(var n=JSON.parse(t),o=0;o<n.length;o++)if("RadioButton"===n[o].FormField.formFieldAnnotationType){for(var s=0;s<n[o].FormField.radiobuttonItem.length;s++)if(e===n[o].FormField.radiobuttonItem[s].id.split("_")[0]){i=!0;break}}else if(n[o].Key.split("_")[0]===e){i=!0;break}return i}function Nn(){var e=this;return this.pdfViewer.formFieldsModule?new Promise((function(t,i){e.createRequestForExportFormfields(!0,"","",!0).then((function(e){t(e)}))})):null}function Fn(e){var t,i=this,n=this.pdfViewer.formFieldCollection.map((function(e){return sf.base.isNullOrUndefined(e.properties)?e.pageNumber+1:e.properties.pageNumber})),o=sf.base.isNullOrUndefined(this.pdfViewer.annotationModule)?[]:this.pdfViewer.annotationModule.actionCollection.filter((function(e,t,n){return"formFields"===e.annotation.propName||!sf.base.isNullOrUndefined(e.annotation.formFieldAnnotationType)||i.pdfViewer.annotationModule.checkFormFieldTypeAction(e.annotation,e.action)})).map((function(e){return e.pageIndex})),s=n.concat(o);return sf.base.isNullOrUndefined(e)||(t=JSON.parse(e).map((function(e){return e.pageNumber}))),s.concat(t).filter((function(e,t,i){return i.indexOf(e)===t&&!sf.base.isNullOrUndefined(e)}))}function Ln(e,t){Math.round(JSON.stringify(e).length/1024)>4500&&(this.isStorageExceed=!0,this.pdfViewer.formFieldsModule&&this.pdfViewer.formFieldsModule.clearFormFieldStorage()),this.isStorageExceed?this.formFieldStorage[this.documentId+t]=JSON.stringify(e):window.sessionStorage.setItem(this.documentId+t,JSON.stringify(e))}function On(e){return this.isStorageExceed?this.formFieldStorage[this.documentId+e]:window.sessionStorage.getItem(this.documentId+e)}function Rn(e,t,i,n,o,s,a,r,l){var d=this.getZoomFactor();e&&(d=1,t.style.position="absolute"),t.style.left=i*d+"px",t.style.top=n*d+"px",t.style.height=o*d+"px",t.style.width=s*d+"px",t.style.margin="0px";t.style.float="left",!(a>0)||r&&l||(t.style.fontSize=a*d+"px")}function zn(e){var t={};if(this.pdfViewer.formDesignerModule){var i=this.pdfViewer.formDesignerModule.downloadFormDesigner();t.formDesigner=i}else if(this.pdfViewer.formFieldsModule){i=this.pdfViewer.formFieldsModule.downloadFormFieldsData(e);t.fieldsData=i}return t}function Hn(e,t,i,n,o){var s=this.getElement("_pageDiv_"+(this.currentPageNumber-1)),a=document.getElementById("FormField_helper_html_element");if(a){if(a)if(n){var r=a.parentElement.id.split("_text_")[1]||a.parentElement.id.split("_textLayer_")[1]||a.parentElement.id.split("_annotationCanvas_")[1]||a.parentElement.id.split("_pageDiv_")[1];parseInt(r,10)!==this.activeElements.activePageID?a.remove():this.updateFormFieldElementStyle(e,a,o,!0)}else this.currentPosition.x+parseInt(a.style.width,10)>parseInt(s.style.width,10)?this.updateFormFieldElementStyle(e,a,o,!1):this.updateFormFieldElementStyle(e,a,o,!0)}else this.pdfViewer.formDesignerModule.drawHelper(e,t,i)}function Un(e,t,i,n){var o=this.getMousePosition(event),s=e.firstElementChild;s&&("CheckBox"===t&&s.firstElementChild&&s.firstElementChild.lastElementChild?s.firstElementChild.lastElementChild.style.visibility=i?"visible":"hidden":"SignatureField"===t||"InitialField"===t?(s.style.visibility=i?"visible":"hidden",s.firstElementChild.style.visibility=i?"visible":"hidden",s.lastElementChild.style.visibility=i?"visible":"hidden"):s.firstElementChild.style.visibility=i?"visible":"hidden"),e.setAttribute("style","height:"+n.height+"px; width:"+n.width+"px;left:"+o.x+"px; top:"+o.y+"px;position:absolute;opacity: 0.5;pointer-events: none;")}function jn(e,t){e.length=0,t.length=0,this.pdfViewer.annotation&&!this.pdfViewer.annotation.isShapeCopied&&t.push("Paste"),e.push("Highlight"),e.push("Underline"),e.push("Strikethrough"),e.push("Comment"),e.push("ScaleRatio"),e.push("Squiggly")}function _n(){if(0!==this.pdfViewer.selectedItems.formFields.length&&this.openPropertyPanel(this.pdfViewer.selectedItems.formFields[0].id),0!==this.pdfViewer.selectedItems.annotations.length){var e=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType;if("Line"===e||"LineWidthArrowHead"===e||"Distance"===e)this.pdfViewer.annotation.createPropertiesWindow();else if("Redaction"===e){var t=this.isCommentPanelTabletMode();this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenRedactionProperty",t).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}}}var Wn=function(){function e(e){this.type="POST",this.mode=!0,this.contentType="application/json;charset=UTF-8",this.pdfViewer=e,this.retryCount=e.retryCount}return e.prototype.send=function(e){var t=this;this.httpRequest=new XMLHttpRequest,this.mode?this.sendRequest(e):setTimeout((function(){t.sendRequest(e)})),this.httpRequest.onreadystatechange=function(){var i=!1,n=t.pdfViewer.viewerBase;n&&n.isPasswordAvailable&&""===n.passwordData&&(i=!0,t.retryCount=0),t.retryCount>0&&(i=t.resendRequest(t,e)),i||t.stateChange(t)},this.httpRequest.onerror=function(){t.error(t)}},e.prototype.clear=function(){this.httpRequest&&this.httpRequest.abort(),this.onSuccess=null,this.onFailure=null,this.onError=null},e.prototype.resendRequest=function(e,t){var i=!1,o=e.httpRequest.status,s=o.toString().split("")[0];if(4===e.httpRequest.readyState&&200===o){var a=void 0;if((a=null!==this.responseType?e.httpRequest.response:e.httpRequest.responseText)&&"object"!==n(a))try{a=JSON.parse(a)}catch(e){"Document stream does not exist in the cache"!==a&&"Document Reference pointer does not exist in the cache"!==a||(i=!0)}}return("5"===s||i)&&(i=!0,this.retryCount--,e.pdfViewer.fireAjaxRequestFailed(o,e.httpRequest.statusText,t.action,!0),e.send(t)),i},e.prototype.sendRequest=function(e){this.httpRequest.open(this.type,this.url,this.mode),this.httpRequest.withCredentials=this.pdfViewer.ajaxRequestSettings.withCredentials,this.httpRequest.setRequestHeader("Content-Type",this.contentType),e=this.addExtraData(e),this.setCustomAjaxHeaders(),null!==this.responseType&&(this.httpRequest.responseType=this.responseType),this.httpRequest.send(JSON.stringify(e))},e.prototype.addExtraData=function(e){return this.pdfViewer.viewerBase.ajaxData="",this.pdfViewer.fireAjaxRequestInitiate(e),this.pdfViewer.viewerBase.ajaxData&&""!==this.pdfViewer.viewerBase.ajaxData&&(e=this.pdfViewer.viewerBase.ajaxData),e},e.prototype.stateChange=function(e){var t=e.httpRequest.status,i=t.toString().split("")[0];if(4===e.httpRequest.readyState&&200===t){var n={name:"onSuccess",data:null!==this.responseType?e.httpRequest.response:e.httpRequest.responseText,readyState:e.httpRequest.readyState,status:e.httpRequest.status};e.successHandler(n)}else if(4===e.httpRequest.readyState&&("4"===i||"5"===i)){n={name:"onFailure",status:e.httpRequest.status,statusText:e.httpRequest.statusText};e.failureHandler(n)}},e.prototype.error=function(e){var t={name:"onError",status:this.httpRequest.status,statusText:this.httpRequest.statusText};e.errorHandler(t)},e.prototype.successHandler=function(e){return this.onSuccess&&this.onSuccess(e),e},e.prototype.failureHandler=function(e){return this.onFailure&&this.onFailure(e),e},e.prototype.errorHandler=function(e){return this.onError&&this.onError(e),e},e.prototype.setCustomAjaxHeaders=function(){for(var e=0;e<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;e++)this.httpRequest.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[e].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[e].headerValue)},e}();function qn(e){return this.pageSize[e]?this.pageSize[e].width*this.getZoomFactor():0}function Zn(e){return this.pageSize[e]?this.pageSize[e].height*this.getZoomFactor():0}function Yn(e){return this.pageSize[e]?this.pageSize[e].top*this.getZoomFactor():0}function Xn(e,t){var i=this,n=this;if(e&&this.pageSize[t]){var o=this.getPageWidth(t),s=this.getPageHeight(t),a=this.getElement("_pageCanvas_"+t),r=this.getElement("_pageDiv_"+t);if(r&&(r.style.width=o+"px",r.style.height=s+"px",r.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?r.style.right=this.updateLeftPosition(t)+"px":r.style.left=this.updateLeftPosition(t)+"px"),a){a.style.background="#fff",a.style.display="block",a.style.width=o+"px",a.style.height=s+"px",o<parseFloat(r.style.width)&&(r.style.boxShadow="none");var l=e.image;l&&(a.onload=function(){Promise.resolve().then((function(){for(var e=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+"_tileimg_"+t+'_"]'),o=n.getElement("_pageDiv_"+t),s=0;s<e.length;s++){var l=e[s].id.split("_");parseFloat(l[l.length-3])!==n.getZoomFactor()&&o.removeChild(e[s])}var d=document.querySelectorAll('img[id*="'+n.pdfViewer.element.id+'_oldCanvas"]');for(s=0;s<d.length;s++)r.removeChild(d[s]);if(i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement(),i.showPageLoadingIndicator(t,!1),0===t&&i.isDocumentLoaded){i.renderPDFInformations(),i.isInitialLoaded=!0;var h=window.sessionStorage.getItem(i.documentId+"_pagedata");i.pdfViewer.fireDocumentLoad(h),i.isDocumentLoaded=!1,i.pdfViewer.textSearch&&i.pdfViewer.isExtractText&&i.pdfViewer.textSearchModule.getPDFDocumentTexts()}i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.pushImageObjects(a)}))},a.src=l),this.onPageRender(e,t,r)}}}function Gn(e,t){var i=this.retrieveCurrentZoomFactor();this.pdfViewer.restrictZoomRequest&&!this.pdfViewer.tileRenderingSettings.enableTileRendering&&(i=1);var n=this.getWindowSessionStorage(e,i)?this.getWindowSessionStorage(e,i):this.getPinchZoomPage(e);if(!n&&t){var o=this.getStoredTileImageDetails(e,0,0,i);o&&(n=o)}var s=null;return n&&(s=n,this.isPinchZoomStorage||(s=JSON.parse(n)),this.isPinchZoomStorage=!1),s}function Jn(e,t,i,n){var o=this.retrieveCurrentZoomFactor();isNaN(e)&&isNaN(t)?this.pageImageDetails[this.documentId+"_"+i+"_"+o+"_imageUrl"]=JSON.stringify(n):this.pageImageDetails[this.documentId+"_"+i+"_"+e+"_"+t+"_"+o+"_imageUrl"]=JSON.stringify(n)}function Kn(){return!!this.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode}function Qn(e){if(e&&"number"==typeof e){var t=1;t=this.getZoomFactor()>2&&e<=1200?2:e/816;var i=parseInt(t.toFixed(),10);return i<=0?1:this.pdfViewer.tileRenderingSettings.enableTileRendering?i:1}return 1}function $n(e){var t,i=(t=this).getElement("_pageCanvas_"+e),o=t.getElement("_oldCanvas_"+e);if(this.pageSize&&this.pageSize[e]){var s=this.pageSize[e].width,a=(this.pageSize[e].height,this.getElement("_pageCanvas_"+e),1200),r=t.pdfViewer.element.clientHeight>0?t.pdfViewer.element.clientHeight:t.pdfViewer.element.style.height;a=parseInt(a,10),r=parseInt(r,10)?parseInt(r,10):500;var l=void 0,d=void 0,h=this.getTileCount(s);if(i){isNaN(parseFloat(i.style.width))&&!o||t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1);var p=t.getLinkInformation(e);l=d=h;var c=t.pdfViewer.tileRenderingSettings;c.enableTileRendering&&c.x>0&&c.y>0&&(a<s||this.getZoomFactor()>2)&&(l=c.x,d=c.y),t.tileRequestCount=l*d;this.retrieveCurrentZoomFactor();var u=void 0;if(1===h)p=t.getLinkInformation(e),u=t.pageRequestSent(e,0,0);else{var f=t.getLinkInformation(e);f&&(p=f)}if(p&&p.uniqueId===t.documentId){if(i.style.backgroundColor="#fff",t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!this.pageSize[e])return;var m=this.retrieveCurrentZoomFactor();if(a=m>2&&s<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(a=1200),t.removeHyperlink(e),a>=s||!t.pdfViewer.tileRenderingSettings.enableTileRendering)t.renderPage(p,e),t.renderHyperlink(p,e);else{t.isTileImageRendered=!0,t.tileRenderCount=0,t.tileRenderPage(p,e),t.renderHyperlink(p,e);for(var g=0;g<l;g++)for(var w=0;w<d;w++)0===g&&0===w||(p=JSON.parse(this.getStoredTileImageDetails(e,g,w,m)))&&t.tileRenderPage(p,e)}p=null}else if(null===p||!u){if(this.getPagesPinchZoomed()?t.showPageLoadingIndicator(e,!1):t.showPageLoadingIndicator(e,!0),t.getPagesZoomed()&&t.isInitialLoaded&&t.showPageLoadingIndicator(e,!1),t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed)return;t.pdfViewer.tileRenderingSettings.enableTileRendering||(l=1,d=1),t.tileRenderCount=0,t.isTileImageRendered=!0;for(var y=0;y<l;y++)for(var v=0;v<d;v++){var b=null,S=this.retrieveCurrentZoomFactor();a=S>2&&s<=1200?700:1200,t.pdfViewer.tileRenderingSettings.enableTileRendering||(a=1200),b={xCoordinate:y,yCoordinate:v,viewPortWidth:a,viewPortHeight:r,pageNumber:e,hashId:t.hashId,tilecount:h,tileXCount:l,tileYCount:d,zoomFactor:S,action:"RenderPdfPages",uniqueId:this.documentId,elementId:t.pdfViewer.element.id},this.jsonDocumentId&&(b.documentId=this.jsonDocumentId),t.pageRequestHandler=new Wn(this.pdfViewer),t.pageRequestHandler.url=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.renderPages,t.pageRequestHandler.responseType="json";var A=t.documentId+"_"+e+"_hyperlinkAndLinkAnnotation";if(t.hyperlinkAndLinkAnnotation[""+A]){var x=JSON.parse(t.hyperlinkAndLinkAnnotation[""+A]);t.removeHyperlink(e),t.renderHyperlink(x,e)}else sf.base.isNullOrUndefined(b.hashId)||""===b.hashId.trim()||t.pageRequestHandler.send(b);t.requestLists.push(t.documentId+"_"+e+"_"+y+"_"+v+"_"+S),t.pageRequestHandler.onSuccess=function(i){if(!(t.pdfViewer.magnification&&t.pdfViewer.magnification.isPinchZoomed||!t.pageSize[e])){var o=i.data;if(o&&"object"!==n(o))try{o=JSON.parse(o)}catch(e){t.onControlError(500,o,t.pdfViewer.serverActionSettings.renderPages),o=null}if(o){try{for(;"object"!==n(o);)o=JSON.parse(o)}catch(e){o=null}if(o&&o.uniqueId===t.documentId){o.pageWidth&&o.pageWidth>0&&o.pageWidth;t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.renderPages,o);var s=void 0!==o.pageNumber?o.pageNumber:e,a={hyperlinks:o.hyperlinks,hyperlinkBounds:o.hyperlinkBounds,linkAnnotation:o.linkAnnotation,linkPage:o.linkPage,annotationLocation:o.annotationLocation,width:o.width,rotation:o.rotation,scaleFactor:o.scaleFactor,uniqueId:o.uniqueId,zoomFactor:o.zoomFactor,hyperLinkBorderWidth:o.hyperLinkBorderWidth,hyperLinkBorderColor:o.hyperLinkBorderColor,textWebLinkBorderWidth:o.textWebLinkBorderWidth,textWebLinkBorderColor:o.textWebLinkBorderColor};t.pageSize[s]&&(t.pageSize[s].rotation=parseFloat(o.rotation)),t.removeHyperlink(s),t.hyperlinkAndLinkAnnotation[t.documentId+"_"+s+"_hyperlinkAndLinkAnnotation"]=JSON.stringify(a),t.renderHyperlink(o,s)}}}},this.pageRequestHandler.onFailure=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderPages)},this.pageRequestHandler.onError=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderPages)};var V=t.documentId+"_"+e+"_textDetails",C=!t.pageTextDetails||!t.pageTextDetails[""+V];a>=s||!t.pdfViewer.tileRenderingSettings.enableTileRendering?(sf.base.Browser.isDevice&&S>1&&(S=1),this.pdfViewerRunner.postMessage({pageIndex:e,message:"renderPage",zoomFactor:S,isTextNeed:C,textDetailsId:V})):(this.showPageLoadingIndicator(e,!0),this.pdfViewerRunner.postMessage({pageIndex:e,message:"renderImageAsTile",zoomFactor:S,tileX:y,tileY:v,tileXCount:l,tileYCount:d,isTextNeed:C,textDetailsId:V}))}}t.renderedPagesList.push(e)}}}function eo(e){switch(e.data.message){case"imageRendered":if("imageRendered"===e.data.message){var t=document.createElement("canvas"),i=e.data,n=i.value,o=i.width,s=i.height,a=i.pageIndex;t.width=o,t.height=s,(v=(y=t.getContext("2d")).createImageData(o,s)).data.set(n),y.putImageData(v,0,0);var r=t.toDataURL(),l=e.data.textBounds,d=e.data.textContent,h=e.data.pageText,p=e.data.rotation,c=e.data.characterBounds,u={image:r,pageNumber:a,uniqueId:this.documentId,pageWidth:o,zoomFactor:e.zoomFactor};if(e.data.isTextNeed)u.textBounds=l,u.textContent=d,u.rotation=p,u.pageText=h,this.storeTextDetails(a,l,d,h,p,c);else if(e.data.textDetailsId){var f=JSON.parse(this.pageTextDetails[e.data.textDetailsId]);u.textBounds=f.textBounds,u.textContent=f.textContent,u.rotation=f.rotation,u.pageText=f.pageText}if(u&&u.image&&u.uniqueId===this.documentId){u.pageWidth&&u.pageWidth>0?u.pageWidth:e.pageWidth;this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,u);var m=void 0!==u.pageNumber?u.pageNumber:a,g=this.createBlobUrl(u.image.split("base64,")[1],"image/png"),w={image:E=(URL||webkitURL).createObjectURL(g),width:u.pageWidth,uniqueId:u.uniqueId,zoomFactor:u.zoomFactor};this.storeImageData(m,w),this.renderPage(u,m)}}break;case"renderTileImage":if("renderTileImage"===e.data.message){t=document.createElement("canvas");var y,v,b=e.data,S=(n=b.value,b.w),A=b.h,x=b.noTileX,V=b.noTileY,C=b.x,I=b.y;a=b.pageIndex;t.setAttribute("height",A),t.setAttribute("width",S),t.width=S,t.height=A,(v=(y=t.getContext("2d")).createImageData(S,A)).data.set(n),y.putImageData(v,0,0);r=t.toDataURL();var k=S,M=A,T=(l=e.data.textBounds,d=e.data.textContent,h=e.data.pageText,p=e.data.rotation,c=e.data.characterBounds,{image:r,noTileX:x,noTileY:V,pageNumber:a,tileX:C,tileY:I,uniqueId:this.documentId,pageWidth:e.pageWidth,width:k,transformationMatrix:{Values:[1,0,0,1,k*C,M*I,0,0,0]},zoomFactor:this.retrieveCurrentZoomFactor()});if(T&&T.image&&T.uniqueId===this.documentId){T.pageWidth&&T.pageWidth>0?T.pageWidth:e.pageWidth;this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,T);m=void 0!==T.pageNumber?T.pageNumber:a;if(0===C&&0===I){g=this.createBlobUrl(T.image.split("base64,")[1],"image/png");var E=(URL||webkitURL).createObjectURL(g);if(e.data.isTextNeed)T.textBounds=l,T.textContent=d,T.rotation=p,T.pageText=h,this.storeTextDetails(a,l,d,h,p,c);else{f=JSON.parse(this.pageTextDetails[e.data.textDetailsId]);T.textBounds=f.textBounds,T.textContent=f.textContent,T.rotation=f.rotation,T.pageText=f.pageText}w={image:E,width:T.width,uniqueId:T.uniqueId,tileX:T.tileX,tileY:T.tileY,zoomFactor:T.zoomFactor,transformationMatrix:T.transformationMatrix,pageText:T.pageText,textContent:T.textContent,textBounds:T.textBounds};this.storeImageData(m,w,T.tileX,T.tileY)}else{g=this.createBlobUrl(T.image.split("base64,")[1],"image/png"),w={image:E=(URL||webkitURL).createObjectURL(g),width:T.width,uniqueId:T.uniqueId,tileX:T.tileX,tileY:T.tileY,zoomFactor:T.zoomFactor,transformationMatrix:T.transformationMatrix};this.storeImageData(m,w,T.tileX,T.tileY)}this.tileRenderPage(T,m)}}break;case"renderThumbnail":this.pdfViewer.thumbnailViewModule.thumbnailOnmessage(e);break;case"printImage":this.pdfViewer.printModule.printOnmessage(e);break;case"PageLoaded":this.pdfViewer.viewerBase.PageloadedOnMessage(e);break;case"loaded":this.pdfViewer.LoadedOnMessage(e);break;case"LoadedStamp":var B=this.pdfViewer.viewerBase.convertStampAsImage(e.data);null!=B&&(this.documentAnnotationCollections=B);break;default:console.log("Unknown message type:",e.data.message)}}function to(e,t,i,n,o,s){var a={textBounds:e,textContent:t,rotation:i,pageText:n};this.pageSize[o]&&(this.pageSize[o].rotation=i),this.textLayer.characterBound[o]=s,this.pageTextDetails[this.documentId+"_"+o+"_textDetails"]=JSON.stringify(a)}function io(e,t){var i=e.textContent,n=e.textBounds,o=e.rotation,s=this.getElement("_textLayer_"+t);s||(s=this.textLayer.addTextLayer(t,this.getPageWidth(t),this.getPageHeight(t),this.getElement("_pageDiv_"+t))),s&&i&&n&&(s.style.display="block",0===s.childNodes.length?this.textLayer.renderTextContents(t,i,n,o):this.textLayer.resizeTextContents(t,i,n,o,!0))}function no(e){var t={};if(this.documentAnnotationCollections){for(var i=!1,n=0;n<this.annotationRenderredList.length;n++)this.annotationRenderredList[n]===e&&(i=!0);var o=this.documentAnnotationCollections[e];o&&!i&&(t.shapeAnnotation=o.shapeAnnotation,t.measureShapeAnnotation=o.measureShapeAnnotation,t.textMarkupAnnotation=o.textMarkupAnnotation,t.freeTextAnnotation=o.freeTextAnnotation,t.stampAnnotations=o.stampAnnotations,t.stickyNotesAnnotation=o.stickyNotesAnnotation,t.signatureAnnotation=o.signatureAnnotation,t.signatureInkAnnotation=o.signatureInkAnnotation,t.redactionAnnotation=o.redactionAnnotation,this.annotationRenderredList.push(e))}if(this.isAnnotationCollectionRemoved&&(t.shapeAnnotation=[],t.measureShapeAnnotation=[],t.textMarkupAnnotation=[],t.freeTextAnnotation=[],t.stampAnnotations=[],t.stickyNotesAnnotation=[],t.signatureInkAnnotation=[],t.redactionAnnotation=[]),this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled()){if(this.isStampAnnotationModule()){var s=t.stampAnnotations;this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(s,e)}this.pdfViewer.annotationModule.renderAnnotations(e,t.shapeAnnotation,t.measureShapeAnnotation,t.textMarkupAnnotation,t.redactionAnnotation),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(t.stickyNotesAnnotation,e)}if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redactionAnnotationModule){var a=t.redactionAnnotation;this.pdfViewer.annotationModule.redactionAnnotationModule.renderRedactionAnnotations(a,e)}if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(e),this.isImportAction){for(i=!1,n=0;n<this.annotationPageList.length;n++)this.annotationPageList[n]===e&&(i=!0);i||this.importedAnnotation&&(this.drawPageAnnotations(this.importedAnnotation,e,!0),this.annotationPageList[this.annotationPageList.length]=e)}if(this.isShapeBasedAnnotationsEnabled()){var r=this.getElement("_annotationCanvas_"+e);if(r)il(r.getBoundingClientRect(),"position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000",r,e,this.pdfViewer),this.pdfViewer.renderSelector(e)}this.isFreeTextAnnotationModule()&&t.freeTextAnnotation&&this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(t.freeTextAnnotation,e),t&&t.signatureAnnotation&&this.signatureModule.renderExistingSignature(t.signatureAnnotation,e,!1),this.isInkAnnotationModule()&&t&&t.signatureInkAnnotation&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(t.signatureInkAnnotation,e,!1),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind()}function oo(e,t,i){e.getElementsByTagName("a");var n=!1;if((this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.renderTextContent(t,i),!this.pdfViewer.formFieldsModule||this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isFormFieldPageZoomed||this.pdfViewer.formFieldsModule.renderFormFields(i),this.pdfViewer.formFieldsModule&&(!this.isDocumentLoaded||this.isDocumentLoaded&&this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isFormFieldPageZoomed)&&this.pdfViewer.formFieldsModule.renderFormFields(i),this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(i),this.documentAnnotationCollections&&!this.isImportAction){for(var o=!1,s=0;s<this.annotationRenderredList.length;s++)this.annotationRenderredList[s]===i&&(o=!0);(r=this.documentAnnotationCollections[i])&&!o&&(t.shapeAnnotation=r.shapeAnnotation,t.measureShapeAnnotation=r.measureShapeAnnotation,t.textMarkupAnnotation=r.textMarkupAnnotation,t.freeTextAnnotation=r.freeTextAnnotation,t.stampAnnotations=r.stampAnnotations,t.stickyNotesAnnotation=r.stickyNotesAnnotation,t.signatureInkAnnotation=r.signatureInkAnnotation,t.redactionAnnotation=r.redactionAnnotation,this.annotationRenderredList.push(i))}if(this.isImportAction){for(o=!1,s=0;s<this.annotationRenderredList.length;s++)this.annotationRenderredList[s]===i&&(o=!0);var a=this.documentAnnotationCollections[i],r=this.checkDocumentCollectionData(i);if((r=this.compareAnnotations(a,r))&&!o)n=this.updateAnnotationsAndState(t,r,i,this.annotationRenderredList);else{var l=this.checkDocumentCollectionData(i);n=this.updateAnnotationsAndState(t,l,i,this.annotationRenderredList)}}if(this.pdfViewer.annotationModule&&(this.isTextMarkupAnnotationModule()||this.isShapeBasedAnnotationsEnabled())){if(this.isStampAnnotationModule()){var d=t.stampAnnotations;n?this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(d,i,null,!0):this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(d,i)}n?this.pdfViewer.annotationModule.renderAnnotations(i,t.shapeAnnotation,t.measureShapeAnnotation,t.textMarkupAnnotation,t.redactionAnnotation,null,!0):this.pdfViewer.annotationModule.renderAnnotations(i,t.shapeAnnotation,t.measureShapeAnnotation,t.textMarkupAnnotation,t.redactionAnnotation),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.renderStickyNotesAnnotations(t.stickyNotesAnnotation,i)}if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.redactionAnnotationModule){var h=t.redactionAnnotation;this.pdfViewer.annotationModule.redactionAnnotationModule.renderRedactionAnnotations(h,i)}if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch&&this.pdfViewer.textSearchModule.highlightOtherOccurrences(i),this.isShapeBasedAnnotationsEnabled()){var p=this.getElement("_annotationCanvas_"+i);if(p)il(p.getBoundingClientRect(),"position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;z-index:1000",p,i,this.pdfViewer),this.pdfViewer.renderSelector(i,this.pdfViewer.annotationSelectorSettings)}this.isFreeTextAnnotationModule()&&t.freeTextAnnotation&&(n?this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(t.freeTextAnnotation,i,!0):this.pdfViewer.annotationModule.freeTextAnnotationModule.renderFreeTextAnnotations(t.freeTextAnnotation,i)),this.isInkAnnotationModule()&&t&&t.signatureInkAnnotation&&this.pdfViewer.annotationModule.inkAnnotationModule.renderExistingInkSignature(t.signatureInkAnnotation,i,n),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.selectCommentsAnnotation(i),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isAnnotationSelected&&this.pdfViewer.annotationModule.annotationPageIndex===i&&this.pdfViewer.annotationModule.selectAnnotationFromCodeBehind(),this.isLoadedFormFieldAdded=!1}function so(e){var t=JSON.parse(e);if(t)for(var i=t.startIndex;i<t.endIndex;i++){var n=this.documentId+"_"+i+"_hyperlinkAndLinkAnnotation";if(this.hyperlinkAndLinkAnnotation&&!this.hyperlinkAndLinkAnnotation[n+" "]){var o=JSON.parse(t.hyperlinikCollection[i]),s={hyperlinks:o.hyperlinks,hyperlinkBounds:o.hyperlinkBounds,linkAnnotation:o.linkAnnotation,linkPage:o.linkPage,annotationLocation:o.annotationLocation,textContent:o.textContent,width:o.width,textBounds:o.textBounds,pageText:o.pageText,rotation:o.rotation,scaleFactor:o.scaleFactor,uniqueId:o.uniqueId,zoomFactor:o.zoomFactor,hyperLinkBorderWidth:o.hyperLinkBorderWidth,hyperLinkBorderColor:o.hyperLinkBorderColor,textWebLinkBorderWidth:o.textWebLinkBorderWidth,textWebLinkBorderColor:o.textWebLinkBorderColor};this.pageSize[i]&&(this.pageSize[i].rotation=parseFloat(o.rotation)),this.hyperlinkAndLinkAnnotation[n+" "]=JSON.stringify(s)}}}function ao(e,t){this.pdfViewer.enableHyperlink&&this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.renderHyperlinkContent(e,t)}function ro(e){var t=this.getElement("_pageDiv_"+e);if(t){var i=t.getElementsByTagName("a");if(0!==i.length)for(var n=i.length-1;n>=0;n--)i[n].parentNode.removeChild(i[n])}}function lo(e){var t=this.retrieveCurrentZoomFactor();this.pdfViewer.tileRenderingSettings.enableTileRendering||sf.base.Browser.isDevice&&t>1&&(t=1),this.pdfViewer.restrictZoomRequest&&!this.pdfViewer.tileRenderingSettings.enableTileRendering&&(t=1);var i=this.documentId+"_"+e,n=this.pageImageDetails&&this.pageImageDetails[i+"_"+t+"_imageUrl"]?this.pageImageDetails[i+"_"+t+"_imageUrl"]:this.getPinchZoomPage(e),o=this.hyperlinkAndLinkAnnotation&&this.hyperlinkAndLinkAnnotation[i+"_hyperlinkAndLinkAnnotation"]?this.hyperlinkAndLinkAnnotation[i+"_hyperlinkAndLinkAnnotation"]:this.getPinchZoomPage(e),s=this.pageTextDetails&&this.pageTextDetails[i+"_textDetails"]?this.pageTextDetails[i+"_textDetails"]:this.getPinchZoomPage(e);if(!n){var a=this.getStoredTileImageDetails(e,0,0,t);a&&(n=a)}var r=null,l=null,d=null,h=null;return n&&o&&(r=JSON.parse(n),l=JSON.parse(o),d=JSON.parse(s),h=Object.assign({},l,r,d),this.isPinchZoomStorage=!1),h}function ho(){return"Sync_PdfViewer_"+this.getRandomNumber()}function po(e){var t=this.getZoomFactor(),i=e||1,n=this.getWindowDevicePixelRatio();return!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&t<=.7?i*n:i}function co(e,t,i){if(e){if(t)return{left:e.left?e.left:e.Left?e.Left:0,right:e.right?e.right:e.Right?e.Right:0,bottom:e.bottom?e.bottom:e.Bottom?e.Bottom:0,top:e.top?e.top:e.Top?e.Top:0};var n=e.x?e.x:e.left?e.left:e.Left?e.Left:0,o=e.y?e.y:e.top?e.top:e.Top?e.Top:0,s=e.width?e.width:e.Width?e.Width:0,a=e.height?e.height:e.Height?e.Height:0;return i?{X:this.ConvertPixelToPoint(n),Y:this.ConvertPixelToPoint(o),Left:this.ConvertPixelToPoint(n),Top:this.ConvertPixelToPoint(o),Height:this.ConvertPixelToPoint(a),Width:this.ConvertPixelToPoint(s)}:{X:n,Y:o,Left:n,Top:o,Height:a,Width:s}}return null}function uo(e,t,i,n){var o,s=Math.abs(e),a=[],r=this.pageSize[t];s=i!==r.rotation?this.getRotationAngle(i,t):0;for(var l=0;l<n.length;l++)if(1===s)o={x:n[l].Y?r.width-n[l].Y:r.width-n[l].y,y:n[l].X?n[l].X:n[l].x},a.push(o);else if(2===s){var d={x:n[l].X?r.width-n[l].X:r.width-n[l].x,y:n[l].Y?r.height-n[l].Y:r.height-n[l].y};a.push(d)}else if(3===s)o={x:n[l].Y?n[l].Y:n[l].y,y:n[l].X?r.height-n[l].X:r.height-n[l].x},a.push(o);else{var h={x:n[l].X?n[l].X:n[l].x,y:n[l].Y?n[l].Y:n[l].y};a.push(h)}return a}function fo(){window.sessionStorage.setItem("currentDocument",this.documentId),window.sessionStorage.setItem("serviceURL",this.pdfViewer.serviceUrl),this.pdfViewer.serverActionSettings&&window.sessionStorage.setItem("unload",this.pdfViewer.serverActionSettings.unload)}function mo(){var e="";e=sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?encodeURI(this.hashId):this.hashId,window.sessionStorage.setItem(this.documentId+"_hashId",e),this.documentLiveCount&&window.sessionStorage.setItem("documentLiveCount",this.documentLiveCount.toString())}function go(e){this.enableFormFieldButton(!1),e&&e.PdfRenderedFormFields&&this.pdfViewer.formFieldsModule&&e.PdfRenderedFormFields.length>0&&(this.pdfViewer.formDesignerModule?(this.pdfViewer.formFieldPDFCollections=[],this.pdfViewer.formFieldPDFCollections=e.PdfRenderedFormFields,this.pdfViewer.formFieldPDFCollections.length>0&&this.enableFormFieldButton(!0)):(this.formfieldvalue?(this.pdfViewer.formFieldsModule&&this.setItemInSessionStorage(this.formfieldvalue,"_formfields"),this.formfieldvalue=null):this.pdfViewer.formFieldsModule&&this.setItemInSessionStorage(e.PdfRenderedFormFields,"_formfields"),this.pdfViewer.enableFormFields&&(this.pdfViewer.formFieldCollections=[],this.pdfViewer.formFieldsModule.formFieldCollections()),this.pdfViewer.formFieldCollections.length>0&&this.enableFormFieldButton(!0)))}function wo(e){var t=this;return e.startsWith("http://")||e.startsWith("https://")?fetch(e).then((function(e){if(e.ok)return e.arrayBuffer();throw new Error(e.statusText)})).then((function(e){return new Uint8Array(e)})).catch((function(e){t.openNotificationPopup("CORS policy error"),t.pdfViewer.fireDocumentLoadFailed(!1,null)})):Promise.resolve(e)}function yo(e,t,i){var o;o=this,this.pdfViewer.serverActionSettings&&(this.loadRequestHandler=new Wn(this.pdfViewer),this.loadRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.load,this.loadRequestHandler.responseType="json",this.loadRequestHandler.mode=!0,e.action="Load",e.elementId=this.pdfViewer.dataId,this.loadRequestHandler.send(e),this.loadRequestHandler.onSuccess=function(e){var s=e.data;if(s){if("object"!==n(s))try{s=JSON.parse(s)}catch(e){o.onControlError(500,s,this.pdfViewer.serverActionSettings.load),s=null}if(s){for(;"object"!==n(s);)if(s=JSON.parse(s),"number"==typeof parseInt(s,10)&&!isNaN(parseInt(s,10))){s=parseInt(s,10);break}s.uniqueId===o.documentId||"number"==typeof parseInt(s,10)&&!isNaN(parseInt(s,10))?(o.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,s),o.requestSuccess(s,t,i)):sf.base.isNullOrUndefined(s.statusText)&&sf.base.isNullOrUndefined(s.error)||o.renderCorruptPopup()}else o.showLoadingIndicator(!1)}else o.renderCorruptPopup()},this.loadRequestHandler.onFailure=function(e){"4"===e.status.toString().split("")[0]?o.openNotificationPopup("Client error"):o.openNotificationPopup(),o.showLoadingIndicator(!1),o.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,o.pdfViewer.serverActionSettings.load)},this.loadRequestHandler.onError=function(e){o.openNotificationPopup(),o.showLoadingIndicator(!1),o.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,o.pdfViewer.serverActionSettings.load)})}function vo(e,t,i){this.unloadRequestHandler=new Wn(this.pdfViewer),this.unloadRequestHandler.url=window.sessionStorage.getItem("serviceURL")+"/"+e,this.unloadRequestHandler.mode=!1,this.unloadRequestHandler.responseType=null,this.unloadRequestHandler.send(t),this.unloadRequestHandler.onSuccess=function(t){var o=t.data;this.hashId=" ",o&&("object"!==n(o)&&-1===o.indexOf("Document")&&(i.onControlError(500,o,e),o=null),o&&i.pdfViewer.fireAjaxRequestSuccess(i.pdfViewer.serverActionSettings.unload,o))},this.unloadRequestHandler.onFailure=function(t){i.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e)},this.unloadRequestHandler.onError=function(t){i.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,e)}}function bo(){window.sessionStorage.removeItem("currentDocument"),window.sessionStorage.removeItem("serviceURL"),window.sessionStorage.removeItem("unload");for(var e=0;e<this.sessionStorage.length;e++)window.sessionStorage.removeItem(this.sessionStorage[e])}function So(){var e=this.getZoomFactor();return this.pdfViewer.enableZoomOptimization?(e<=1?e=1:e>1&&e<=2?e=2:e>2&&e<=3?e=3:e>3&&e<=4&&(e=4),e):(e<=0&&(e=1),e)}function Ao(e,t){return e.shapeAnnotation=this.getUniqueElements(e.shapeAnnotation.concat(t.shapeAnnotation)),e.measureShapeAnnotation=this.getUniqueElements(e.measureShapeAnnotation.concat(t.measureShapeAnnotation)),e.textMarkupAnnotation=t.textMarkupAnnotation,e.freeTextAnnotation=this.getUniqueElements(e.freeTextAnnotation.concat(t.freeTextAnnotation)),e.stampAnnotations=this.getUniqueElements(e.stampAnnotations.concat(t.stampAnnotations)),e.stickyNotesAnnotation=this.getUniqueElements(e.stickyNotesAnnotation.concat(t.stickyNotesAnnotation)),e.signatureInkAnnotation=this.getUniqueElements(e.signatureInkAnnotation.concat(t.signatureInkAnnotation)),e}function xo(e){return e-this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect().left}function Vo(e){return e-this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect().top}function Co(e){var t=this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect();return e*this.getZoomFactor()+t.left}function Io(e){var t=this.getElement("_pageDiv_"+(this.currentPageNumber-1)).getBoundingClientRect();return e*this.getZoomFactor()+t.top}function ko(e,t,i,n){var o=Math.abs(e),s=this.pageSize[t];return n!==s.rotation?(o=this.getRotationAngle(n,t),this.isPageRotated=!0):(o=0,this.isPageRotated=!1),1===o?{X:s.width-i.Y-i.Height,Y:i.X,Height:i.Width,Width:i.Height}:2===o?{X:s.width-i.X-i.Width,Y:s.height-i.Y-i.Height,Height:i.Height,Width:i.Width}:3===o?{X:i.Y,Y:s.height-i.X-i.Width,Height:i.Width,Width:i.Height}:i}function Mo(e){var t=new Date(Date.parse(e+" UTC"));this.globalize=new sf.base.Internationalization(this.pdfViewer.locale);var i=t.toLocaleTimeString("en-us");return t.toLocaleDateString("en-us")+", "+i}function To(e,t){if(e[""+t]&&e[""+t].length>0){var i=e[""+t];if(i)for(var n=0;n<i.length;n++)if(i[n].ModifiedDate=this.convertUTCDateToLocalDate(i[n].ModifiedDate),i[n].Comments)for(var o=0;o<i[n].Comments.length;o++)i[n].Comments[o].ModifiedDate=this.convertUTCDateToLocalDate(i[n].Comments[o].ModifiedDate)}}function Eo(e){var t=!1,i=!1;return this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus&&(i=!0),!e.parentElement||"foreign-object"===e.parentElement.className||e.classList.contains("e-pv-radio-btn")||e.classList.contains("e-pv-radiobtn-span")||e.classList.contains("e-pv-checkbox-div")||e.classList.contains("e-pdfviewer-formFields")||e.classList.contains("e-pdfviewer-ListBox")||e.classList.contains("e-pdfviewer-signatureformfields")||"free-text-input"===e.className&&"TEXTAREA"===e.tagName||i||"e-pv-hyperlink"===e.className||(t=!0),t}function Bo(e,t){var i;if(e)i=e;else if(this.documentAnnotationCollections){var n=this.documentAnnotationCollections[t];n&&(i=u(n))}if(i){var o,s=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),a=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),r=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),l=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),d=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),h=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),p=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),c=window.sessionStorage.getItem(this.documentId+"_annotations_sign"),f=window.sessionStorage.getItem(this.documentId+"_annotations_redaction");if(this.isStorageExceed&&(s=this.annotationStorage[this.documentId+"_annotations_textMarkup"],a=this.annotationStorage[this.documentId+"_annotations_shape"],r=this.annotationStorage[this.documentId+"_annotations_shape_measure"],l=this.annotationStorage[this.documentId+"_annotations_stamp"],d=this.annotationStorage[this.documentId+"_annotations_sticky"],h=this.annotationStorage[this.documentId+"_annotations_freetext"],p=this.annotationStorage[this.documentId+"_annotations_ink"],c=this.annotationStorage[this.documentId+"_annotations_sign"],f=this.annotationStorage[this.documentId+"_annotations_redaction"]),i.textMarkupAnnotation&&0!==i.textMarkupAnnotation.length)if(s)(o=JSON.parse(s))&&(i.textMarkupAnnotation=this.findImportedAnnotations(o,i.textMarkupAnnotation,t));if(i.shapeAnnotation&&0!==i.shapeAnnotation.length)if(a)(o=JSON.parse(a))&&(i.shapeAnnotation=this.findImportedAnnotations(o,i.shapeAnnotation,t));if(i.measureShapeAnnotation&&0!==i.measureShapeAnnotation.length)if(r)(o=JSON.parse(r))&&(i.measureShapeAnnotation=this.findImportedAnnotations(o,i.measureShapeAnnotation,t));if(i.stampAnnotations&&0!==i.stampAnnotations.length)if(l)(o=JSON.parse(l))&&(i.stampAnnotations=this.findImportedAnnotations(o,i.stampAnnotations,t));if(i.stickyNotesAnnotation&&0!==i.stickyNotesAnnotation.length)if(d)(o=JSON.parse(d))&&(i.stickyNotesAnnotation=this.findImportedAnnotations(o,i.stickyNotesAnnotation,t));if(i.freeTextAnnotation&&0!==i.freeTextAnnotation.length)if(h)(o=JSON.parse(h))&&(i.freeTextAnnotation=this.findImportedAnnotations(o,i.freeTextAnnotation,t));if(i.signatureInkAnnotation&&0!==i.signatureInkAnnotation.length)if(p)(o=JSON.parse(p))&&(i.signatureInkAnnotation=this.findImportedAnnotations(o,i.signatureInkAnnotation,t));if(i.signatureAnnotation&&0!==i.signatureAnnotation.length)if(c)(o=JSON.parse(p))&&(i.signatureAnnotation=this.findImportedAnnotations(o,i.signatureAnnotation,t));if(i.redactionAnnotation&&0!==i.redactionAnnotation.length)if(f)(o=JSON.parse(f))&&(i.redactionAnnotation=this.findImportedAnnotations(o,i.redactionAnnotation,t));return i}}function Po(e){for(var t=0;t<this.pdfViewer.ajaxRequestSettings.ajaxHeaders.length;t++)e.setRequestHeader(this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerName,this.pdfViewer.ajaxRequestSettings.ajaxHeaders[t].headerValue)}function Do(e,t,i,n){var o=Math.round(JSON.stringify(window.sessionStorage).length/1024);if(o>=5e3){if(!this.isStorageExceed){for(var s=[],a=0;a<window.sessionStorage.length;a++)window.sessionStorage.key(a)&&window.sessionStorage.key(a).split("_")[3]&&"annotations"===window.sessionStorage.key(a).split("_")[3]&&(this.annotationStorage[window.sessionStorage.key(a)]=window.sessionStorage.getItem(window.sessionStorage.key(a)),s.push(window.sessionStorage.key(a)));if(s)for(a=0;a<s.length;a++)window.sessionStorage.removeItem(s[a])}if(this.isStorageExceed=!0,(o=Math.round(JSON.stringify(window.sessionStorage).length/1024))>=5e3){var r=window.sessionStorage.length;r>200&&(r=200);for(a=0;a<r;a++)window.sessionStorage.key(a)&&window.sessionStorage.key(a).split("_")[3]&&"annotations"!==window.sessionStorage.key(a).split("_")[3]&&window.sessionStorage.removeItem(window.sessionStorage.key(a))}}var l=this.retrieveCurrentZoomFactor();isNaN(e)&&isNaN(t)?(window.sessionStorage.setItem(this.documentId+"_"+i+"_"+l+"_imageUrl",JSON.stringify(n)),this.sessionStorage.push(this.documentId+"_"+i+"_"+l+"_imageUrl")):(this.sessionStorage.push(this.documentId+"_"+i+"_"+e+"_"+t+"_"+l+"_imageUrl"),window.sessionStorage.setItem(this.documentId+"_"+i+"_"+e+"_"+t+"_"+l+"_imageUrl",JSON.stringify(n)))}function No(e,t,i){var n=this.retrieveCurrentZoomFactor(),o=this.documentId+"_"+e+"_"+t+"_"+i+"_"+n;return!!(this.requestLists&&this.requestLists.indexOf(o)>-1)}function Fo(e,t,i,n){var o,s=this.createBlobUrl(e.image.split("base64,")[1],"image/png"),a=(URL||webkitURL).createObjectURL(s);isNaN(t)&&isNaN(i)||0===t&&0===i?(o={image:a,transformationMatrix:e.transformationMatrix,hyperlinks:e.hyperlinks,hyperlinkBounds:e.hyperlinkBounds,linkAnnotation:e.linkAnnotation,linkPage:e.linkPage,annotationLocation:e.annotationLocation,textContent:e.textContent,width:e.width,textBounds:e.textBounds,pageText:e.pageText,rotation:e.rotation,scaleFactor:e.scaleFactor,uniqueId:e.uniqueId,zoomFactor:e.zoomFactor,tileX:t,tileY:i,hyperLinkBorderWidth:e.hyperLinkBorderWidth,hyperLinkBorderColor:e.hyperLinkBorderColor,textWebLinkBorderWidth:e.textWebLinkBorderWidth,textWebLinkBorderColor:e.textWebLinkBorderColor},this.pageSize[n]&&(this.pageSize[n].rotation=parseFloat(e.rotation)),this.textLayer.characterBound[n]=e.characterBounds):o={image:a,transformationMatrix:e.transformationMatrix,tileX:t,tileY:i,width:e.width,zoomFactor:e.zoomFactor};this.pageSize[n]&&this.pageSize[n].width,this.manageSessionStorage(n,o,t,i)}function Lo(e){this.pdfViewer.allowServerDataBinding=!0,this.pdfViewer.isDocumentEdited=e,this.pdfViewer.updatePdfViewerOptions("IsDocumentEdited",e),this.pdfViewer.allowServerDataBinding=!1}function Oo(e){var t={EditingAction:e};this.pdfViewer.triggerEventData("DocumentEdited",t)}function Ro(e){var t;(t=this).pdfViewer.fireDownloadStart(t.downloadFileName);var i=this.constructJsonDownload();i.canRedact=e||!1,t.isDigitalSignaturePresent&&(t.pdfViewer.isDocumentEdited?i.digitalSignatureDocumentEdited=!0:i.digitalSignatureDocumentEdited=!1),i=t.pdfViewer.chunkJsonObject(i,"Download"),this.dowonloadRequestHandler=new Wn(this.pdfViewer),this.dowonloadRequestHandler.url=t.pdfViewer.serviceUrl+"/"+t.pdfViewer.serverActionSettings.download,this.dowonloadRequestHandler.responseType="text",this.validateForm&&this.pdfViewer.enableFormFieldsValidation?(this.pdfViewer.fireValidatedFailed(t.pdfViewer.serverActionSettings.download),this.validateForm=!1):this.dowonloadRequestHandler.send(i),this.dowonloadRequestHandler.onSuccess=function(e){var i=e.data;if(i){if("object"!==n(i)&&(t.onControlError(500,i,t.pdfViewer.serverActionSettings.download),i=null),i){t.pdfViewer.downloadFileName&&t.pdfViewer.downloadFileName!==t.downloadFileName&&(t.downloadFileName=t.pdfViewer.downloadFileName),t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.download,i);var o=void 0;o=sf.base.Browser.isDevice&&sf.base.Browser.isIos?new Blob([i],{type:"application/octet-stream"}):new Blob([i],{type:"application/pdf"}),sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(o,t.downloadFileName):t.downloadDocument(o),t.pdfViewer.fireDownloadEnd(t.downloadFileName,"Download Success")}t.updateDocumentAnnotationCollections()}else t.onControlError(500,i,t.pdfViewer.serverActionSettings.download),i=null},this.dowonloadRequestHandler.onFailure=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.download)},this.dowonloadRequestHandler.onError=function(e){t.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.download)}}function zo(e,t,i){e&&(this.documentId=e),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=t,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),this.setFileName(),null===this.pdfViewer.fileName&&(t&&i?(this.pdfViewer.fileName=i,this.jsonDocumentId=this.pdfViewer.fileName):(this.pdfViewer.fileName="Untitled.pdf",this.jsonDocumentId=null)),this.pdfViewer.downloadFileName?this.downloadFileName=this.pdfViewer.downloadFileName:this.downloadFileName=this.pdfViewer.fileName}function Ho(e,t){var i;return i=this,this.pdfViewer.unload(),this.loadedData=e,this.documentId=this.createGUID(),this.viewerContainer&&(this.viewerContainer.scrollTop=0),this.showLoadingIndicator(!0),this.hashId=" ",this.isFileName=!1,this.saveDocumentInfo(),"Pan"===this.pdfViewer.interactionMode&&this.initiatePanning(),this.getPdfByteArray(e).then((function(n){e=function(e,t,i,n){var o=!1;(e.startsWith("http://")||e.startsWith("https://"))&&(o=!0),e=o||"Base64 Document Path"===t.loadedData?i:t.checkDocumentData(i),o&&(t.pdfViewer.fileByteArray=i),t.setFileName(),t.pdfViewer.downloadFileName?t.downloadFileName=t.pdfViewer.downloadFileName:t.downloadFileName=t.pdfViewer.fileName;var s={};if(o){var a=null;s=t.constructJsonObject("Document as byte array",n,!0),t.pdfViewer.enableChunkMessages?(a=t.pdfViewer.getBlobInfo(t.pdfViewer.fileByteArray),t.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentToServer",null,a).then((function(){t.createAjaxRequest(s,e,n)})).catch((function(){t.pdfViewerBase.renderCorruptPopup()}))):t.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentToServer",t.pdfViewer.fileByteArray,null).then((function(){t.createAjaxRequest(s,e,n)})).catch((function(){t.pdfViewerBase.renderCorruptPopup()}))}else s=t.constructJsonObject(e,n,!1),t.createAjaxRequest(s,e,n);return e}(e,i,n,t)})),e}function Uo(e,t){var i=e;if(i){if("object"!==n(i))try{i=JSON.parse(i)}catch(e){this.onControlError(500,i,this.pdfViewer.serverActionSettings.load),i=null}if(i){for(;"object"!==n(i);)if(i=JSON.parse(i),"number"==typeof parseInt(i,10)&&!isNaN(parseInt(i,10))){i=parseInt(i,10);break}i.StatusText&&"File Does not Exist"===i.StatusText&&this.showLoadingIndicator(!1),(i.uniqueId===this.documentId||"number"==typeof parseInt(i,10)&&!isNaN(parseInt(i,10)))&&(this.updateFormFieldName(i),this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.load,i),this.requestSuccess(i,null,t))}}}function jo(){this.document=null,this.passwordPopup&&this.passwordPopup.hide();var e=this.pdfViewer.fileByteArray;!sf.base.isNullOrUndefined(e)&&e.length>0?(this.pdfViewerRunner.postMessage({uploadedFile:e,message:"LoadPageCollection",password:this.passwordData,pageIndex:0}),e=null):this.renderCorruptPopup(),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.currentPageNumber=1,this.pdfViewer.currentPageNumber=1,this.mobileSpanContainer.innerHTML=this.currentPageNumber.toString(),this.mobilecurrentPageContainer.innerHTML=this.currentPageNumber.toString())}function _o(){var e={hashId:this.hashId};if(this.jsonDocumentId&&(e.documentId=this.jsonDocumentId),e.uniqueId=this.documentId,this.importPageList=[],this.pdfViewer.annotationModule&&this.saveImportedAnnotations(),this.isTextMarkupAnnotationModule()){this.isJsonExported=!1;var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.saveTextMarkupAnnotations();e.textMarkupAnnotations=t}if(this.isShapeAnnotationModule()){this.isJsonExported=!1;var i=this.pdfViewer.annotationModule.shapeAnnotationModule.saveShapeAnnotations();e.shapeAnnotations=i}if(this.isCalibrateAnnotationModule()){this.isJsonExported=!1;var n=this.pdfViewer.annotationModule.measureAnnotationModule.saveMeasureShapeAnnotations();e.measureShapeAnnotations=n}if(this.isStampAnnotationModule()){var o=this.pdfViewer.annotationModule.stampAnnotationModule.saveStampAnnotations();e.stampAnnotations=o}if(this.isCommentAnnotationModule()){var s=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.saveStickyAnnotations();e.stickyNotesAnnotation=s}if(this.isImportAction){var a=JSON.stringify(this.importPageList);e.importPageList=a}if(this.pdfViewer.formDesignerModule){var r=this.pdfViewer.formDesignerModule.downloadFormDesigner();e.formDesigner=r}else if(this.pdfViewer.formFieldsModule){r=this.pdfViewer.formFieldsModule.downloadFormFieldsData();e.fieldsData=r}var l=this.signatureModule.saveSignature();if(e.signatureData=l,this.pdfViewer.isSignatureEditable&&(e.isSignatureEdited=this.pdfViewer.isSignatureEditable),this.isFreeTextAnnotationModule()){var d=this.pdfViewer.annotationModule.freeTextAnnotationModule.saveFreeTextAnnotations(),h=this.pdfViewer.annotationModule.freeTextAnnotationModule.notEditedFreeTexts;e.freeTextAnnotation=d,e.notEditedFreeTexts=JSON.stringify(h)}if(this.isInkAnnotationModule()){var p=this.pdfViewer.annotationModule.inkAnnotationModule.saveInkSignature();e.inkSignatureData=p}if(this.isRedactionAnnotationModule()){var c=this.pdfViewer.annotationModule.redactionAnnotationModule.saveRedactionAnnotations();e.redactionAnnotations=c}if(e.action="Download",e.elementId=this.pdfViewer.dataId,this.pdfViewer.annotationModule){var u=this.getAnnotationsPageList();e.isAnnotationsExist=this.isAnnotationsExist(e.textMarkupAnnotations)||this.isAnnotationsExist(e.shapeAnnotations)||this.isAnnotationsExist(e.measureShapeAnnotations)||this.isAnnotationsExist(e.stampAnnotations)||this.isAnnotationsExist(e.stickyNotesAnnotation)||this.isAnnotationsExist(e.signatureData)||this.isAnnotationsExist(e.freeTextAnnotation)||this.isAnnotationsExist(e.inkSignatureData)||this.isAnnotationsExist(e.redactionAnnotations)||u.length>0,e.annotationsPageList=JSON.stringify(u)}if(this.pdfViewer.formDesignerModule||this.pdfViewer.formFieldsModule){var f=this.getFormFieldsPageList(e.formDesigner);e.isFormFieldAnnotationsExist=this.isAnnotationsExist(e.formDesigner)||this.isFieldsDataExist(e.fieldsData)||f.length>0,e.formFieldsPageList=JSON.stringify(f)}return this.pdfViewer.annotationCollection&&(e.annotationCollection=JSON.stringify(this.pdfViewer.annotationCollection)),e}function Wo(e,t,i){var n;return e?(this.isPasswordAvailable=!0,this.passwordData=e,n={document:t,password:e,isClientsideLoading:i,zoomFactor:1,isFileName:this.isFileName,uniqueId:this.documentId,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance}):(this.isPasswordAvailable=!1,this.passwordData="",n={document:t,zoomFactor:1,isClientsideLoading:i,isFileName:this.isFileName,uniqueId:this.documentId,showDigitalSignatureAppearance:this.pdfViewer.showDigitalSignatureAppearance}),n}function qo(e){var t=e.split("base64,")[1];if(void 0===t){if(this.isFileName=!0,this.jsonDocumentId=e,null===this.pdfViewer.fileName){var i=-1!==e.indexOf("\\")?e.split("\\"):e.split("/");this.pdfViewer.fileName=i[i.length-1],this.jsonDocumentId=this.pdfViewer.fileName,t=e}}else this.jsonDocumentId=null;return t}function Zo(){var e,t=this;return e=this,new Promise((function(i,n){var o=e.constructJsonDownload();o.action="GetDocumentAsByteArray",o=e.pdfViewer.chunkJsonObject(o,"GetDocumentAsByteArray"),t.getDocumentAsByteArrayRequestHandler=new Wn(t.pdfViewer),t.getDocumentAsByteArrayRequestHandler.responseType="text",t.getDocumentAsByteArrayRequestHandler.send(o),t.getDocumentAsByteArrayRequestHandler.onSuccess=function(t){var n=t.data;n&&(e.pdfViewer.fireAjaxRequestSuccess("GetDocumentAsByteArray",n),i(n))},t.getDocumentAsByteArrayRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,"GetDocumentAsByteArray")},t.getDocumentAsByteArrayRequestHandler.onError=function(t){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,"GetDocumentAsByteArray")}}))}function Yo(){!this.pdfViewer.thumbnailViewModule||sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewer.thumbnailViewModule.createRequestForThumbnails(),this.pdfViewer.bookmarkViewModule&&this.pdfViewer.bookmarkViewModule.createRequestForBookmarks(),this.pdfViewer.annotationModule&&((this.pdfViewer.isCommandPanelOpen||this.pdfViewer.commentPanelVisible)&&(this.pdfViewer.annotation.showCommentsPanelInBlazor(),this.pdfViewer.updatePdfViewerOptions("CommentPanelVisible",!0)),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.createRequestForComments())}function Xo(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.freeTextAnnotationModule)}function Go(){return!!this.isTextMarkupAnnotationModule()&&!!this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation}function Jo(){return!!this.pdfViewer.annotation&&(!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.shapeAnnotationModule)||!(!this.signatureModule||"Select"===this.action))}function Ko(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.measureAnnotationModule)}function Qo(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stampAnnotationModule)}function $o(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.inkAnnotationModule)}function es(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.redactionAnnotationModule)}function ts(){return!!this.pdfViewer.annotation&&!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stickyNotesAnnotationModule)}function is(){return!!(this.isShapeAnnotationModule()||this.isCalibrateAnnotationModule()||this.isStampAnnotationModule()||this.isCommentAnnotationModule()||this.pdfViewer.annotation&&this.pdfViewer.annotation.redactionAnnotationModule)}function ns(e){var t=0,i=0;if(sf.base.isNullOrUndefined(e.isImport)&&(e.annotation=this.documentAnnotationCollections),e&&e.value&&e.value.length>0)for(;this.pdfViewer.pageCount>i;){var n=e.annotation[i].stampAnnotations.length;if(n>0)for(var o=0;o<n;o++){if(""===this.pdfViewer.annotationModule.stampAnnotationModule.findImageData(e.annotation[i].stampAnnotations[o].Apperarance)&&t<e.value.length){var s=document.createElement("canvas"),a=e.value[t],r=e.width[t],l=e.height[t];s.width=r,s.height=l;var d=s.getContext("2d"),h=d.createImageData(r,l);h.data.set(a),d.putImageData(h,0,0);var p=s.toDataURL();if(p)for(var c=e.annotation[i].stampAnnotations,u=0;u<c[o].Apperarance.length;u++)if(""===c[o].Apperarance[u].imagedata){c[o].Apperarance[u].imagedata=p;break}t++}}i++}for(u=0;u<this.renderedPagesList.length;u++){var f=this.renderedPagesList[u];void 0!==e.annotation[f]&&this.pdfViewer.annotationModule.stampAnnotationModule.renderStampAnnotations(e.annotation[f].stampAnnotations,f,null,e.isImport)}return e.value&&e.value.length&&e.value.length>0?e.annotation:null}function os(e,t){var i=[],n=!1;if(null==e&&(e=this.documentAnnotationCollections),!0===t)for(var o=0;o<this.pdfViewer.pageCount;o++)if(e.stampAnnotations&&0!==e.stampAnnotations.length){var s=window.sessionStorage.getItem(this.documentId+"_annotations_stamp");if(this.isStorageExceed&&(s=this.annotationStorage[this.documentId+"_annotations_stamp"]),s){var a=JSON.parse(s);e.stampAnnotations=this.checkAnnotationCollections(a,e.stampAnnotations,o)}e.stampAnnotations=this.checkAnnotationCommentsCollections(e.stampAnnotations,o)}if(e)for(o=0;o<this.pdfViewer.pageCount;o++)if(null!=e[o]){var r=e[o].stampAnnotations;if(null!=r)for(var l=0;l<r.length;l++)if(n=!0,r[l].StampByteArray&&!r[l].Apperarance.some((function(e){return e.imagedata}))){var d=this.convertBase64(r[l].StampByteArray);i.push(d)}}!0===n&&this.pdfViewerRunner.postMessage({uploadedFile:i,message:"LoadPageStampCollection",password:null,zoomFactor:this.pdfViewer.magnificationModule.zoomFactor,pageIndex:0,isTextNeed:!1,isZoomMode:!1,annotation:e,isImport:t})}function ss(e){this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&(this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.drawTextMarkupAnnotations(e),this.pdfViewer.annotation.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="",this.pdfViewer.annotation.textMarkupAnnotationModule.isSelectionMaintained=!0)}function as(e,t,i,n){this.pdfViewer.annotation&&!this.pdfViewer.annotation.isShapeCopied&&e.push("Paste");var o=this.pdfViewer.clipboardData.clipObject;if(!this.pdfViewer.formDesignerModule||!this.pdfViewer.annotation.isShapeCopied||this.pdfViewer.formDesignerInteraction||sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o[0])||sf.base.isNullOrUndefined(o[0].formFieldAnnotationType)||t.push("Paste"),t.push("Highlight"),t.push("Underline"),t.push("Strikethrough"),t.push("Squiggly"),t.push("ScaleRatio"),i){var s=this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType;"Line"!==s&&"LineWidthArrowHead"!==s&&"Distance"!==s&&"Redaction"!==s&&t.push("Properties")}else n?(t.push("Properties"),t.push("Comment")):(t.push("Cut"),t.push("Copy"),t.push("Delete"),t.push("Comment"))}function rs(){this.isCalibrateAnnotationModule()&&this.pdfViewer.annotation.measureAnnotationModule.createScaleRatioWindow()}function ls(){if(this.pdfViewer.annotation&&(this.pdfViewer.annotation.showCommentsPanelInBlazor(),0!==this.pdfViewer.selectedItems.annotations.length||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)){var e=void 0;e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0];var t=document.getElementById(e.annotName);t&&(t.classList.contains("e-pv-comments-border")||t.firstElementChild.click())}}function ds(){return!!this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.isAnnotationButtonsEnabled()}function hs(){var e=this,t=this.pdfViewer.annotationCollection.map((function(e){return e.pageNumber})),i=this.pdfViewer.annotationModule.actionCollection.filter((function(t){return"formFields"!==t.annotation.propName&&sf.base.isNullOrUndefined(t.annotation.formFieldAnnotationType)&&!e.pdfViewer.annotationModule.checkFormFieldTypeAction(t.annotation,t.action)})).map((function(e){return e.pageIndex})),n=t.concat(i);if(this.isAnnotationCollectionRemoved){var o=this.documentAnnotationCollections.map((function(e,t){return t}));n=n.concat(o)}return n.filter((function(e,t,i){return i.indexOf(e)===t&&void 0!==e}))}function ps(){var e=window.sessionStorage.getItem(this.documentId+"_annotations_shape"),t=window.sessionStorage.getItem(this.documentId+"_annotations_shape_measure"),i=window.sessionStorage.getItem(this.documentId+"_annotations_stamp"),n=window.sessionStorage.getItem(this.documentId+"_annotations_sticky"),o=window.sessionStorage.getItem(this.documentId+"_annotations_textMarkup"),s=window.sessionStorage.getItem(this.documentId+"_annotations_freetext"),a=!1,r=window.sessionStorage.getItem(this.documentId+"_annotations_ink"),l=window.sessionStorage.getItem(this.documentId+"_annotations_redaction");this.pdfViewer.isSignatureEditable&&(window.sessionStorage.getItem(this.documentId+"_annotations_sign")&&(a=!0));return!!(e||t||i||n||o||s||this.isImportAction||this.isStorageExceed||a||r||this.isAnnotationPresent||l)}function cs(){return this.isTextMarkupAnnotationModule()?this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage:null}function us(){return!!this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.isPopupNoteVisible}function fs(){return!this.pdfViewer.annotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule||!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot}function ms(){return!this.pdfViewer.toolbarModule.annotationToolbarModule||this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden}function gs(){var e;if(e=this,this.pdfViewer.documentPath){this.pdfViewer.viewerBase.showLoadingIndicator(!0);this.pdfViewer.documentPath.startsWith("http://")||this.pdfViewer.documentPath.startsWith("https://")?this.getPdfByteArray(e.pdfViewer.documentPath).then((function(t){if(e.pdfViewer.uploadedFileByteArray=t,e.pdfViewer.enableChunkMessages){var i=e.pdfViewer.getBlobInfo(t);e.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClientSide",null,!0,i).catch((function(){e.renderCorruptPopup()}))}else e.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClientSide",t,!0,null).catch((function(){e.renderCorruptPopup()}))})).catch((function(){e.renderCorruptPopup()})):this.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClient",this.pdfViewer.documentPath,!1)}this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.initializeCollection()}function ws(e){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.mobiletotalPageContainer&&(this.mobiletotalPageContainer.innerHTML=this.pageCount.toString(),this.pageNoContainer&&(this.pageNoContainer.innerHTML="(1-"+this.pageCount.toString()+")")),this.pageCount>0){var t=0,i=this.pageCount;this.isMixedSizeDocument=!1;for(var o=!1,s=!1,a=!1,r=0;r<i;r++){if("object"!==n(e.pageSizes[r])){var l=e.pageSizes[r].split(",");if(null!==e.pageSizes[r-1]&&0!==r){var d=e.pageSizes[r-1].split(",");t=this.pageGap+parseFloat(d[1])+t}else t=this.pageGap;var h={width:parseFloat(l[0]),height:parseFloat(l[1]),top:t,rotation:parseFloat(l[3])?parseFloat(l[3]):0};this.pageSize.push(h)}else{if(null!==e.pageSizes[r-1]&&0!==r){d=e.pageSizes[r-1];t=this.pageGap+parseFloat(d.Height)+t}else t=this.pageGap;h={width:e.pageSizes[r].Width,height:e.pageSizes[r].Height,top:t,rotation:e.pageSizes[r].rotation?parseFloat(e.pageSizes[r].rotation):0};this.pageSize.push(h)}this.pageSize[r].height>this.pageSize[r].width&&(o=!0),this.pageSize[r].width>this.pageSize[r].height&&(s=!0),r>0&&this.pageSize[r].width!==this.pageSize[r-1].width&&(a=!0);var p=this.pageSize[r].width;p>this.highestWidth&&(this.highestWidth=p);var c=this.pageSize[r].height;c>this.highestHeight&&(this.highestHeight=c)}(o&&s||a)&&(this.isMixedSizeDocument=!0);var u=void 0;u=this.pdfViewer.overscanCount>10?this.pdfViewer.overscanCount>100?i:this.pdfViewer.overscanCount<=this.pageCount?this.pdfViewer.overscanCount:this.pageCount:this.pageCount<10?this.pageCount:10;for(r=0;r<u;r++)this.renderPageContainer(r,this.getPageWidth(r),this.getPageHeight(r),this.getPageTop(r));if(this.pageContainer.style.height=this.getPageTop(this.pageSize.length-1)+this.getPageHeight(this.pageSize.length-1)+"px",this.pageContainer.style.position="relative",100===this.pageLimit)null===this.getElement("_pageDiv_"+this.pageLimit)&&this.pageLimit<this.pageCount&&Promise.all([this.renderPagesVirtually()])}}function ys(e,t,i,n){var o=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_pageDiv_"+e,className:"e-pv-page-div",attrs:{tabindex:"0"}});sf.base.Browser.isDevice&&o.classList.add("e-pv-text-selection-none");var s=!1;o.addEventListener("focus",(function(){s||o.classList.add("e-focused"),s=!1})),o.addEventListener("mousedown",(function(){s=!0})),o.addEventListener("keydown",(function(){s=!1})),o.addEventListener("blur",(function(){o.classList.remove("e-focused")})),o.style.width=t+"px",o.style.height=i+"px",this.pdfViewer.enableRtl?o.style.right=this.updateLeftPosition(e)+"px":o.style.left=this.updateLeftPosition(e)+"px",o.style.top=n+"px",this.pageContainer.appendChild(o),this.pageContainer.style.width=this.viewerContainer.clientWidth+"px",this.createWaitingPopup(e),this.orderPageDivElements(o,e),this.renderPageCanvas(o,t,i,e,"block"),!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode||this.isThumb||this.updateMobileScrollerPosition()}function vs(e,t,i,n,o){if(e){var s=this.getElement("_pageCanvas_"+t);return s?(s.width=i,s.height=n,s.style.display="block",this.isMixedSizeDocument&&this.highestWidth>0&&(s.style.marginLeft="auto",s.style.marginRight="auto")):((s=sf.base.createElement("img",{id:this.pdfViewer.dataId+"_pageCanvas_"+t,className:"e-pv-page-canvas"})).width=i,s.height=n,s.style.display=o,this.isMixedSizeDocument&&this.highestWidth>0&&(s.style.marginLeft="auto",s.style.marginRight="auto"),e.appendChild(s)),s.setAttribute("alt",""),this.pdfViewer.annotationModule&&this.pdfViewer.annotation&&this.pdfViewer.annotationModule.createAnnotationLayer(e,i,n,t,o),(this.pdfViewer.textSearchModule||this.pdfViewer.textSelectionModule||this.pdfViewer.annotationModule)&&this.textLayer.addTextLayer(t,i,n,e),s}}function bs(e){var t=this.getElement("_pageDiv_"+e);null==this.getElement("_pageCanvas_"+e)&&null==t&&e<this.pageSize.length&&this.renderPageContainer(e,this.getPageWidth(e),this.getPageHeight(e),this.getPageTop(e))}function Ss(e,t){var i=this.getElement("_pageDiv_"+(e+1));i?this.pageContainer.insertBefore(t,i):this.pageContainer.appendChild(t)}function As(e){var t=e+(this.pageStopValue<200?this.pdfViewer.overscanCount>0?this.pdfViewer.overscanCount+3:4:this.pdfViewer.overscanCount>0?this.pdfViewer.overscanCount-1:2);t>this.pageCount&&(t=this.pageCount);for(var i=e-1;i<=t;i++)-1!==i&&this.renderPageElement(i);var n=this.pdfViewer.overscanCount>0?e-this.pdfViewer.overscanCount-1:e-3;n<0&&(n=0);for(i=e-1;i>=n;i--)-1!==i&&this.renderPageElement(i);for(var o=0;o<this.pageCount;o++)if(!(n<=o&&o<=t)){var s,a=this.getElement("_pageDiv_"+o),r=this.getElement("_pageCanvas_"+o),l=this.getElement("_textLayer_"+o),d=-1;if(this.pdfViewer.overscanCount>0&&(d=this.pdfViewer.overscanCount>this.pageRenderCount?this.pdfViewer.overscanCount<=this.pageCount?this.pdfViewer.overscanCount-1:this.pageCount:-1),r&&o>d)r.parentNode.removeChild(r),l&&(this.pdfViewer.textSelectionModule&&0!==l.childNodes.length&&!this.isTextSelectionDisabled&&this.pdfViewer.textSelectionModule.maintainSelectionOnScroll(o,!0),l.parentNode.removeChild(l)),-1!==(s=this.renderedPagesList.indexOf(o))&&this.renderedPagesList.splice(s,1);if(a)a.parentNode.removeChild(a),-1!==(s=this.renderedPagesList.indexOf(o))&&this.renderedPagesList.splice(s,1)}}function xs(e){var t={hashId:e.hashId,isClientsideLoading:!0,isCompletePageSizeNotReceived:!0,action:"VirtualLoad",elementId:e.pdfViewer.element.id,uniqueId:e.documentId,password:e.passwordData};e.jsonDocumentId&&(t.documentId=e.jsonDocumentId),this.virtualLoadRequestHandler=new Wn(this.pdfViewer),this.virtualLoadRequestHandler.url=e.pdfViewer.serviceUrl+"/"+e.pdfViewer.serverActionSettings.load,this.virtualLoadRequestHandler.responseType="json",this.virtualLoadRequestHandler.mode=!0,this.virtualLoadRequestHandler.send(t),this.virtualLoadRequestHandler.onSuccess=function(t){var i=t.data;if(i&&"object"!==n(i))try{i=JSON.parse(i)}catch(t){e.onControlError(500,i,"VirtualLoad")}if(i){for(;"object"!==n(i);)i=JSON.parse(i);if(e.documentId===i.uniqueId){e.pdfViewer.fireAjaxRequestSuccess("VirtualLoad",i);var o=i;if(e.pageSize[e.pageLimit-1]){for(var s=e.pageSize[e.pageLimit-1].top,a=e.pageLimit;a<e.pageCount;a++)if("object"!==n(o.pageSizes[a])){var r=o.pageSizes[a].split(",");if(null!==e.pageSize[a-1]&&0!==a){var l=e.pageSize[a-1].height;s=e.pageGap+parseFloat(l)+s}var d={width:parseFloat(r[0]),height:parseFloat(r[1]),top:s,rotation:parseFloat(r[3])?parseFloat(r[3]):0};e.pageSize.push(d)}else{if(null!==e.pageSize[a-1]&&0!==a){l=e.pageSize[a-1].height;s=e.pageGap+parseFloat(l)+s}d={width:parseFloat(o.pageSizes[a].Width),height:parseFloat(o.pageSizes[a].Height),top:s,rotation:o.pageSizes[a].rotation?parseFloat(o.pageSizes[a].rotation):0};e.pageSize.push(d)}e.pageContainer.style.height=e.getPageTop(e.pageSize.length-1)+e.getPageHeight(e.pageSize.length-1)+"px";var h=window.sessionStorage.getItem(e.documentId+"_pagedata");if(e.pageCount>100){if(this.pdfViewer.overscanCount>100){var p=this.pdfViewer.overscanCount<=e.pageCount?this.pdfViewer.overscanCount:e.pageCount;for(a=100;a<p;a++)e.renderPageContainer(a,e.getPageWidth(a),e.getPageHeight(a),e.getPageTop(a)),e.createRequestForRender(a)}e.pdfViewer.fireDocumentLoad(h);var c=e.pdfViewer.linkAnnotationModule;c&&c.linkAnnotation&&c.linkAnnotation.length>0&&c.linkPage.length>0&&c.renderDocumentLink(c.linkAnnotation,c.linkPage,c.annotationY,e.currentPageNumber-1,i.hyperLinkBorderWidth,i.hyperLinkBorderColor)}}}}},this.virtualLoadRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText)},this.virtualLoadRequestHandler.onError=function(t){e.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText)}}function Vs(e,t){if(this.isMixedSizeDocument&&e){var i=document.getElementById(this.pdfViewer.dataId+"_pageCanvas_"+t),n=document.getElementById(this.pdfViewer.dataId+"_oldCanvas_"+t);e&&i&&i.offsetLeft>0?(e.style.marginLeft=i.offsetLeft+"px",e.style.marginRight=i.offsetLeft+"px"):n&&n.offsetLeft>0?(e.style.marginLeft=n.offsetLeft+"px",e.style.marginRight=n.offsetLeft+"px"):(e.style.marginLeft="auto",e.style.marginRight="auto")}}function Cs(e){var t;if(this.pageSize[e]){if(this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.highestWidth*this.getZoomFactor())/2;var i=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=i:t=i}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.pageSize[e].width*this.getZoomFactor())/2:(this.viewerContainer.getBoundingClientRect().width-this.pageSize[e].width*this.getZoomFactor())/2;if(this.pageSize[e].width,this.pageSize[e].height,t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var n=t;t=this.pageLeft,n>0&&this.isMixedSizeDocument&&(t=n),sf.base.Browser.isDevice&&n>0&&(t=n)}var o=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+e);o&&(this.pdfViewer.enableRtl?o.style.right=t+"px":o.style.left=t+"px")}}function Is(e){var t,i=this.viewerContainer.getBoundingClientRect().width;if(0===i&&(i=parseFloat(this.pdfViewer.width.toString())),this.isMixedSizeDocument&&this.highestWidth>0){t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.highestWidth*this.getZoomFactor())/2:(i-this.highestWidth*this.getZoomFactor())/2;var n=(this.highestWidth*this.getZoomFactor()-this.getPageWidth(e))/2;t>0?t+=n:t=n}else t=this.viewerContainer.clientWidth>0?(this.viewerContainer.clientWidth-this.getPageWidth(e))/2:(i-this.getPageWidth(e))/2;if(this.pageSize[e].width,this.pageSize[e].height,t<0||this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom&&this.getZoomFactor()<1||"fitToWidth"===this.pdfViewer.magnificationModule.fitType)){var o=t,s=this.pdfViewer.magnificationModule&&"fitToWidth"===this.pdfViewer.magnificationModule.fitType&&this.pageSize[e]&&this.highestWidth>this.pageSize[e].width&&this.isMixedSizeDocument;((t=t>0&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?o:this.pageLeft)>0&&this.isMixedSizeDocument||s)&&o>0&&(t=o)}return t}function ks(e){this.isPanMode?-1===this.renderedPagesList.indexOf(e-1)&&(this.reRenderedCount=0):this.reRenderedCount=0;var t=e-1;if(e!==this.previousPage&&e<=this.pageCount){var i=!1;this.isDataExits&&!this.getLinkInformation(t)&&(i=!0),-1!==this.renderedPagesList.indexOf(t)||this.getMagnified()||i||(this.renderCountIncrement(),this.createRequestForRender(t))}if(!this.getMagnified()&&!this.getPagesPinchZoomed()){var n=this.pdfViewer.overscanCount>0?t-this.pdfViewer.overscanCount<=0?0:t-this.pdfViewer.overscanCount:t-1,o=(i=!1,this.getElement("_pageCanvas_"+n));if(this.isDataExits&&!this.getLinkInformation(n)&&(i=!0),null!==o&&!i&&-1===this.renderedPagesList.indexOf(n)&&!this.getMagnified())if(this.pdfViewer.overscanCount>0)for(var s=n;s<t;s++)-1===this.renderedPagesList.indexOf(s)&&(this.renderCountIncrement(),this.createRequestForRender(s));else this.renderCountIncrement(),this.createRequestForRender(n);this.isMinimumZoom&&this.renderPreviousPagesInScroll(n);var a=this.pdfViewer.overscanCount>0?t+this.pdfViewer.overscanCount<this.pageCount?t+this.pdfViewer.overscanCount:this.pageCount:t+1,r=0;if(a<this.pageCount)if(r=this.getPageHeight(a),(this.isMinimumZoom?this.isMinimumZoom:-1===this.renderedPagesList.indexOf(a))&&!this.getMagnified()&&r)if(this.isDocumentLoaded&&this.pdfViewer.overscanCount>this.pageRenderCount&&this.getPageHeight(this.pdfViewer.overscanCount-1)+this.getPageTop(this.pdfViewer.overscanCount-1)>this.viewerContainer.clientHeight){var l=this.pdfViewer.overscanCount<=this.pageCount?this.pdfViewer.overscanCount:this.pageCount;for(s=1;s<l;s++)this.createRequestForRender(s)}else{if(this.pdfViewer.overscanCount>0)for(var d=t+1;d<=a;d++)-1===this.renderedPagesList.indexOf(d)&&(this.createRequestForRender(d),this.renderCountIncrement());else this.createRequestForRender(a),this.renderCountIncrement();for(;this.viewerContainer.clientHeight>r&&(a+=1)<this.pageCount;)this.renderPageElement(a),this.createRequestForRender(a),r+=this.getPageHeight(a),this.renderCountIncrement()}}}function Ms(){this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.renderCountIncrement()}function Ts(e,t){var i,n=this;if(i=this,e&&this.pageSize[t]){var o=this.getPageWidth(t),s=this.getPageHeight(t),a=this.getElement("_pageCanvas_"+t),r=this.getElement("_pageDiv_"+t),l=e.tileX?e.tileX:0,d=e.tileY?e.tileY:0;r&&(r.style.width=o+"px",r.style.height=s+"px",r.style.background="#fff",r.style.top=this.getPageTop(t)+"px",this.pdfViewer.enableRtl?r.style.right=this.updateLeftPosition(t)+"px":r.style.left=this.updateLeftPosition(t)+"px"),a&&(a.style.background="#fff");var h=e.image,p=this.retrieveCurrentZoomFactor(),c=document.querySelectorAll('img[id*="'+i.pdfViewer.element.id+"_tileimg_"+t+'_"]');if(0===c.length&&(this.isReRenderRequired=!0),this.isReRenderRequired){e.zoomFactor&&(p=e.zoomFactor);var u=this.documentId+"_"+t+"_"+p+"_"+e.tileX+"_"+e.tileY;this.tilerequestLists.push(u);var f=e.transformationMatrix,m=e.width;if(h){var g=e.tileX?e.tileX:0,w=e.tileY?e.tileY:0,y=sf.base.isNullOrUndefined(e.scaleFactor)?1.5:e.scaleFactor,v=document.getElementById(this.pdfViewer.dataId+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+g+"_"+w);v||((v=new Image).id=this.pdfViewer.dataId+"_tileimg_"+t+"_"+this.getZoomFactor()+"_"+g+"_"+w,r&&r.append(v)),v.src=h,v.onload=function(){if(e.noTileX===e.tileX+1&&e.noTileY===e.tileY+1&&i.showPageLoadingIndicator(t,!1),i.tileRenderCount=i.tileRenderCount+1,0===g&&0===w&&0===t&&n.isDocumentLoaded){i.renderPDFInformations(),i.isInitialLoaded=!0;var o=window.sessionStorage.getItem(i.documentId+"_pagedata");i.pageCount<=100&&i.pdfViewer.fireDocumentLoad(o),i.isDocumentLoaded=!1,i.pdfViewer.textSearch&&i.pdfViewer.isExtractText&&i.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(i.tileRenderCount===i.tileRequestCount){i.isTextMarkupAnnotationModule()&&i.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t),a.style.display="none",a.src="#";for(var s=document.querySelectorAll('img[id*="'+i.pdfViewer.element.id+'_oldCanvas"]'),l=0;l<s.length;l++)r.removeChild(s[l]);i.isTileImageRendered=!1,i.tileRenderCount=0,i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement(),i.isDrawnCompletely=!0}};var b=m*this.getZoomFactor()/p/y,S=f.Elements?f.Elements:f.Values,A=S[5]*this.getZoomFactor()/p/y,x=S[4]*this.getZoomFactor()/p/y;v.width=b,v.style.width=b+"px",v.style.top=A+"px",v.style.left=x+"px",v.style.position="absolute"}0===l&&0===d&&this.onPageRender(e,t,r)}else{for(var V=0;V<c.length;V++){var C=c[V].id.split("_"),I=i.retrieveCurrentZoomFactor(),k=JSON.parse(i.getStoredTileImageDetails(t,parseFloat(C[C.length-2]),parseFloat(C[C.length-1]),I));if(k&&k.zoomFactor&&(I=k.zoomFactor),parseFloat(C[C.length-4])===t){var M=c[V];M.nodeType===Node.ELEMENT_NODE&&(M.onload=function(){if(i.showPageLoadingIndicator(t,!1),i.tileRenderCount=i.tileRenderCount+1,0===T&&0===E&&0===t&&n.isDocumentLoaded){n.renderPDFInformations(),n.isInitialLoaded=!0;var e=window.sessionStorage.getItem(i.documentId+"_pagedata");i.pageCount<=100&&i.pdfViewer.fireDocumentLoad(e),i.isDocumentLoaded=!1,i.pdfViewer.textSearch&&i.pdfViewer.isExtractText&&i.pdfViewer.textSearchModule.getPDFDocumentTexts()}if(i.tileRenderCount===i.tileRequestCount){a.style.display="none",a.src="#",i.isTextMarkupAnnotationModule()&&i.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(t);for(var o=document.querySelectorAll('img[id*="'+i.pdfViewer.element.id+'_oldCanvas"]'),s=0;s<o.length;s++)r.removeChild(o[s]);i.isTileImageRendered=!1,i.tileRenderCount=0,i.pdfViewer.magnificationModule&&i.pdfViewer.magnificationModule.rerenderCountIncrement(),i.isDrawnCompletely=!0}},k&&(M.src=k.image))}}var T=e.tileX?e.tileX:0,E=e.tileY?e.tileY:0;0===T&&0===E&&this.onPageRender(e,t,r)}}}function Es(e,t,i,n){var o=this.getElement("_pageTileCanvas_"+e);return o||((o=sf.base.createElement("canvas",{id:this.pdfViewer.dataId+"_pageTileCanvas_"+e,className:"e-pv-pageTile-canvas"})).style.width=t+"px",o.style.height=i+"px",o.style.display="none",o.style.backgroundColor="#fff",this.isMixedSizeDocument&&this.highestWidth>0&&(o.style.marginLeft="auto",o.style.marginRight="auto"),n.appendChild(o)),o}function Bs(e,t,i,n){var o=e/this.getZoomFactor()*t*i;return parseInt(n.toString(),10)===parseInt(o.toString(),10)&&(n=o),n=n*this.getZoomFactor()/t}function Ps(){this.mobilePageNoContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_mobilepagenoContainer",className:"e-pv-mobilepagenoscroll-container"}),this.mobilecurrentPageContainer=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_mobilecurrentpageContainer",className:"e-pv-mobilecurrentpage-container"}),this.mobilenumberContainer=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_mobiledashedlineContainer",className:"e-pv-mobiledashedline-container"}),this.mobiletotalPageContainer=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_mobiletotalpageContainer",className:"e-pv-mobiletotalpage-container"}),this.mobileScrollerContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_mobilescrollContainer",className:"e-pv-mobilescroll-container"}),this.mobileSpanContainer=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_mobilespanContainer",className:"e-pv-mobilespanscroll-container"}),this.mobileSpanContainer.innerHTML="1",this.mobilecurrentPageContainer.innerHTML="1",this.mobilenumberContainer.innerHTML="&#x2015;&#x2015;&#x2015;&#x2015;&#x2015;",this.mobileScrollerContainer.style.cssFloat="right",this.mobileScrollerContainer.style.width="40px",this.mobileScrollerContainer.style.height="32px",this.mobileScrollerContainer.style.zIndex="100",this.mobilePageNoContainer.style.width="120px",this.mobilePageNoContainer.style.height="100px",this.mobilePageNoContainer.style.zIndex="100",this.mobilePageNoContainer.style.position="fixed",this.mobileScrollerContainer.addEventListener("touchstart",this.mobileScrollContainerDown.bind(this),{passive:!0}),this.mobileScrollerContainer.addEventListener("touchend",this.mobileScrollContainerEnd.bind(this)),this.mobileScrollerContainer.style.display="none"}function Ds(e,t){var i=this;if(this.isDeviceiOS){var n=we(e,this,this.pdfViewer),o=this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&!this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot&&(!n||!this.pdfViewer.selectedItems.annotations[0]||n.id!==this.pdfViewer.selectedItems.annotations[0].id)&&document.activeElement.classList.contains("free-text-input")&&this.isFreeTextAnnotation(this.pdfViewer.selectedItems.annotations);this.singleTapTimer?this.pdfViewer.enablePinchZoom&&(this.tapCount++,clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.onDoubleTap(t)):(this.singleTapTimer=setTimeout((function(){o&&(i.pdfViewer.clearSelection(i.pdfViewer.selectedItems.annotations[0].pageIndex),i.focusViewerContainer(!0)),i.onSingleTap(t)}),300),this.tapCount++)}else this.singleTapTimer?this.pdfViewer.enablePinchZoom&&(this.tapCount++,clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.onDoubleTap(t)):(this.singleTapTimer=setTimeout((function(){i.onSingleTap(t)}),300),this.tapCount++)}function Ns(e){var t=this;if(setTimeout((function(){t.inputTapCount=0}),300),this.inputTapCount++,this.isDeviceiOS)this.onTextBoxDoubleTap(e);else setTimeout((function(){t.onTextBoxDoubleTap(e)}),200);this.inputTapCount>2&&(this.inputTapCount=0)}function Fs(e){var t=e[0].target,i=!1;if(this.singleTapTimer=null,t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0),this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.formFields&&this.pdfViewer.selectedItems.formFields.length>0&&(i=!0),!this.isLongTouchPropagated&&!this.navigationPane.isNavigationToolbarVisible&&!i&&this.pdfViewer.toolbarModule){if(this.touchClientX>=e[0].clientX-10&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+10){if(!this.isTapHidden&&this.pdfViewer.toolbar.moreDropDown){var n=this.getElement("_more_option-popup");n.firstElementChild&&(n.classList.remove("e-popup-open"),n.classList.add("e-popup-close"),n.removeChild(n.firstElementChild))}if(this.isTapHidden&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?(this.mobileScrollerContainer.style.display="",this.updateMobileScrollerPosition()):sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&null==this.getSelectTextMarkupCurrentPage()&&(this.mobileScrollerContainer.style.display="none"),null==this.getSelectTextMarkupCurrentPage()){if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&0===this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.annotationModule&&!this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot&&"Ink"!==this.action){var o=document.getElementsByClassName("e-pv-select");if(o&&o.length>0&&o[0].classList.contains("e-pv-select")&&!this.textMarkupAnnotation(o[0])){var s=!0;o[0].childNodes&&o[0].childNodes.length>0&&o[0].childNodes[0].className.includes("e-pv-redaction-icon")&&(s=!1),s&&o[0].classList.remove("e-pv-select")}if("Select"!==this.action){var a=this.currentPageNumber-1,r=this.pdfViewer.annotationCollection.filter((function(e){return e.pageNumber===a})),l=this.pdfViewer.zIndexTable[a].objects.filter((function(e){return!r.some((function(t){return e.annotName===t.annotationId}))}));if(l.length>0)for(var d=0;d<l.length;d++){var h=this.pdfViewer.zIndexTable[a].objects.indexOf(l[d]);h>-1&&this.pdfViewer.zIndexTable[a].objects.splice(h,1)}this.action="Select",this.pdfViewer.tool="Select",this.tool=this.getTool(this.action)}this.pdfViewer._dotnetInstance.invokeMethodAsync("AdjustMobileToolbar",null)}this.isTapHidden=!this.isTapHidden}}this.tapCount=0}}function Ls(e){var t=e[0].target,i=!1;t&&(t.classList.contains("e-pdfviewer-formFields")||t.classList.contains("e-pdfviewer-ListBox")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(i=!0);var n=this.pdfViewer.selectedItems;n&&n.formFields&&n.formFields.length>0&&(i=!0),this.pdfViewer.formDesignerInteraction&&i&&(this.openPropertyPanel(n.formFields[0].id),this.tapCount=0),2!==this.tapCount||i||(this.tapCount=0,this.touchClientX>=parseInt((e[0].clientX-10).toString(),10)&&this.touchClientX<=e[0].clientX+10&&this.touchClientY>=e[0].clientY-10&&this.touchClientY<=e[0].clientY+30&&(this.pdfViewer.magnification&&1!==this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.magnification.onDoubleTapMagnification(),this.viewerContainer.style.height=this.updatePageHeight(this.pdfViewer.element.getBoundingClientRect().height,this.toolbarHeight),this.isTapHidden=!1,clearTimeout(this.singleTapTimer),this.singleTapTimer=null))}function Os(e){e[0].target;var t=this.pdfViewer.selectedItems.annotations;if(2===this.inputTapCount&&t&&0!==t.length&&t[0]&&(!t[0].annotationSettings.isLock||!t[0].isLocked)){if(this.pdfViewer.annotationModule){var i=t[0];this.isDeviceiOS&&document.activeElement.classList.contains("free-text-input")&&this.isFreeTextAnnotation(t)&&this.focusViewerContainer(!0);var n=i.annotName?i.annotName:i.signatureName;this.pdfViewer.annotationModule.annotationSelect(n,i.pageIndex,i,null,!0)}if(!0===this.isFreeTextAnnotation(t))(o={}).x=t[0].bounds.x,o.y=t[0].bounds.y,this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(o,t[0],null,!0);else if(!0===t[0].enableShapeLabel){var o;(o={}).x=t[0].bounds.x,o.y=t[0].bounds.y,this.pdfViewer.annotation.inputElementModule.editLabel(o,t[0])}}}function Rs(){var e=this.isCommentPanelTabletMode();if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&!e){var t=document.getElementById(this.pdfViewer.dataId+"_propertyClose");t&&(t.classList.remove("e-control"),t.classList.remove("e-btn"),t.classList.remove("e-lib"));var i=document.getElementById(this.pdfViewer.dataId+"_propertyPanelTitle");i&&(i.style.left="37px",i.style.top="10px"),this.mobileScrollerContainer.style.display="none"}}function zs(e){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationAddTools(e)}function Hs(e){if(null!=this.pageSize[e].top){var t=this.getElement("_pageDiv_"+e).getBoundingClientRect(),i=this.getElement("_pageDiv_"+e).firstChild.firstChild;t.top<0?this.toolbarHeight+this.viewerContainer.clientHeight/2-t.top<t.height?i.style.top=this.viewerContainer.clientHeight/2-t.top-this.toolbarHeight+"px":this.toolbarHeight+t.bottom/2-t.top<t.height&&(i.style.top=t.bottom/2-t.top-this.toolbarHeight+"px"):i.style.top=this.viewerContainer.clientHeight/2+"px",sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&t.width>this.viewerContainer.clientWidth?i.style.left=this.viewerContainer.clientWidth/2+this.viewerContainer.scrollLeft+"px":this.getZoomFactor()>1.25&&t.width>this.viewerContainer.clientWidth?i.style.left=this.viewerContainer.clientWidth/2+"px":i.style.left=t.width/2+"px"}}function Us(e){var t=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+e);t&&(wt({target:t}),this.setLoaderProperties(t))}function js(){null!==window.getSelection().anchorNode&&this.pdfViewer.textSelectionModule.applySpanForSelection(),this.isViewerContainerDoubleClick=!1}function _s(e,t,i){var n,o=this;n=this;var s=new Promise((function(i,s){var a;(a=o.constructJsonDownload()).annotationDataFormat=e,a.action="ExportAnnotations",n.pdfViewer.fireExportStart("Export Annotations Started"),n.jsonDocumentId&&(a.document=n.jsonDocumentId);var r=n.pdfViewer.serviceUrl+"/"+n.pdfViewer.serverActionSettings.exportAnnotations;a.isObject=!sf.base.isNullOrUndefined(t)&&t,a=n.pdfViewer.chunkJsonObject(a,"ExportAnnotations"),n.exportAnnotationRequestHandler=new Wn(o.pdfViewer),n.exportAnnotationRequestHandler.url=r,n.exportAnnotationRequestHandler.mode=!0,n.exportAnnotationRequestHandler.responseType="text",n.exportAnnotationRequestHandler.send(a),n.exportAnnotationRequestHandler.onSuccess=function(o){var s=o.data;if(s){if(s){var a=n.pdfViewer.fireAjaxRequestSuccess(n.pdfViewer.serverActionSettings.exportAnnotations,s);if(t)s&&"string"!=typeof s?(null!==n.pdfViewer.exportAnnotationFileName?n.pdfViewer.fireExportSuccess("Export Annotations Successfully",n.pdfViewer.exportAnnotationFileName):n.pdfViewer.fireExportSuccess("Export Annotations Successfully",n.pdfViewer.fileName),n.updateDocumentAnnotationCollections(),i(!0)):n.pdfViewer.fireExportFailed("Export Annotation Failed",n.pdfViewer.localeObj.getConstant("Export Failed"));else if("Json"===e)if(s&&"string"!=typeof s){if(a)return s;var r=new Blob([s],{type:"application/json"});sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?null!==n.pdfViewer.exportAnnotationFileName?window.navigator.msSaveOrOpenBlob(r,n.pdfViewer.exportAnnotationFileName.split(".")[0]+".json"):window.navigator.msSaveOrOpenBlob(r,n.pdfViewer.fileName.split(".")[0]+".json"):n.downloadExportAnnotationJson(r),n.updateDocumentAnnotationCollections()}else{this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed").catch((function(e){throw console.error("Unhandled Exception:",e),e})).then((function(e){n.openImportExportNotificationPopup(e)})),n.pdfViewer.fireExportFailed("Export Annotation Failed",n.pdfViewer.localeObj.getConstant("Export Failed"))}else if(s&&"string"!=typeof s){if(a)return s;r=new Blob([s],{type:"application/vnd.adobe.xfdf"});sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(r,n.pdfViewer.fileName.split(".")[0]+".xfdf"):n.downloadExportedXFdfAnnotation(r),n.updateDocumentAnnotationCollections()}else{this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_ExportFailed").then((function(e){n.openImportExportNotificationPopup(e)})),n.pdfViewer.fireExportFailed("Export Annotation Failed",n.pdfViewer.localeObj.getConstant("Export Failed"))}}}else try{"string"==typeof s&&(n.onControlError(500,s,n.pdfViewer.serverActionSettings.exportAnnotations),s=null)}catch(e){n.pdfViewer.fireExportFailed("Export Annotation Failed",n.pdfViewer.localeObj.getConstant("Export Failed")),n.onControlError(500,s,n.pdfViewer.serverActionSettings.exportAnnotations),s=null}},n.exportAnnotationRequestHandler.onFailure=function(e){n.pdfViewer.fireExportFailed("Export Annotation Failed",e.statusText)},n.exportAnnotationRequestHandler.onError=function(e){n.pdfViewer.fireExportFailed("Export Annotation Failed",e.statusText)}}));return!t&&!i||s}function Ws(e,t,i,n){var o,s=this;o=this;var a=new Promise((function(a,r){var l=o.createFormfieldsJsonData(e);o.pdfViewer.fireFormExportStarted().then((function(e){if(e){l.action="ExportFormFields",l.hashId=o.hashId,l.fileName=o.pdfViewer.fileName,t&&""!==t&&!i&&(l.filePath=t),l.elementId=s.pdfViewer.dataId,o.jsonDocumentId&&(l.document=o.jsonDocumentId),n&&(l.formFieldDataFormat=n),l.isObject=!sf.base.isNullOrUndefined(i)&&i||!sf.base.isNullOrUndefined(n);var r=o.getFormFieldsPageList(l.formDesigner);l.formFieldsPageList=JSON.stringify(r),l.isFormFieldAnnotationsExist=o.isAnnotationsExist(l.formDesigner)||o.isFieldsDataExist(l.fieldsData)||r.length>0,l=o.pdfViewer.chunkJsonObject(l,"ExportFormFields");var d=o.pdfViewer.serviceUrl+"/"+o.pdfViewer.serverActionSettings.exportFormFields;o.exportFormFieldsRequestHandler=new Wn(s.pdfViewer),o.exportFormFieldsRequestHandler.url=d,o.exportFormFieldsRequestHandler.mode=!0,o.exportFormFieldsRequestHandler.responseType="text",o.validateForm&&o.pdfViewer.enableFormFieldsValidation?(o.pdfViewer.fireValidatedFailed(o.pdfViewer.serverActionSettings.download),o.validateForm=!1):o.exportFormFieldsRequestHandler.send(l),o.exportFormFieldsRequestHandler.onSuccess=function(e){var t=e.data;if(t&&t)if(o.pdfViewer.fireAjaxRequestSuccess(o.pdfViewer.serverActionSettings.exportFormFields,t),i||n)a(!0),o.pdfViewer.fireFormExportSuccess();else if(t){var s=new Blob([t],{type:"application/json"});sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?window.navigator.msSaveOrOpenBlob(s,o.pdfViewer.fileName.split(".")[0]+".json"):o.downloadExportAnnotationJson(s,!0)}},o.exportFormFieldsRequestHandler.onFailure=function(e){o.pdfViewer.fireFormExportFailed(e.statusText),a(!1)},o.exportFormFieldsRequestHandler.onError=function(e){o.pdfViewer.fireFormExportFailed(e.statusText),a(!1)}}else a(!1)}))}));return!i&&!n||a}function qs(e,t,i){var o,s,a=this;return s=this,!e&&s.isPDFViewerJson?this.isJsonImported=!0:this.isJsonImported=!1,new Promise((function(e){if("object"===n(t)){if(t&&t.pdfAnnotation&&!s.isAddAnnotation)for(var r=Object.keys(t.pdfAnnotation),l=0;l<r.length;l++){var d=t.pdfAnnotation[r[l]];s.updateModifiedDateToLocalDate(d,"freeTextAnnotation"),s.updateModifiedDateToLocalDate(d,"measureShapeAnnotation"),s.updateModifiedDateToLocalDate(d,"shapeAnnotation"),s.updateModifiedDateToLocalDate(d,"signatureAnnotation"),s.updateModifiedDateToLocalDate(d,"signatureInkAnnotation"),s.updateModifiedDateToLocalDate(d,"stampAnnotations"),s.updateModifiedDateToLocalDate(d,"stickyNotesAnnotation"),s.updateModifiedDateToLocalDate(d,"textMarkupAnnotation"),s.updateModifiedDateToLocalDate(d,"redactionAnnotation")}s.reRenderAnnotations(t.pdfAnnotation,!0),s.isImportedAnnotation=!0,s.updateDocumentEditedProperty(!0),s.fireDocumentEditedEvent("AnnotationImported"),s.isAddAnnotation||s.pdfViewer.fireImportSuccess("Import Annotations Successfully")}else{s.pdfViewer.fireImportStart("Import Annotations Started"),o="Json"===i&&s.isPDFViewerJson?{fileName:t,action:"ImportAnnotations",elementId:s.pdfViewer.element.id,hashId:s.hashId,uniqueId:s.documentId,annotationDataFormat:i}:{importedData:t,action:"ImportAnnotations",elementId:s.pdfViewer.element.id,hashId:s.hashId,uniqueId:s.documentId,annotationDataFormat:i},(o=Object.assign(o,a.constructJsonDownload())).action="ImportAnnotations",s.jsonDocumentId&&(o.documentId&&delete o.documentId,o.document=s.jsonDocumentId),o=s.pdfViewer.chunkJsonObject(o,"ImportAnnotations");var h=s.pdfViewer.serviceUrl+"/"+s.pdfViewer.serverActionSettings.importAnnotations;s.importAnnotationRequestHandler=new Wn(s.pdfViewer),s.importAnnotationRequestHandler.url=h,s.importAnnotationRequestHandler.mode=!0,s.importAnnotationRequestHandler.responseType="text",s.importAnnotationRequestHandler.send(o),s.importAnnotationRequestHandler.onSuccess=function(i){var o=i.data;if(o){if("object"!==n(o))try{"object"!==n(o=JSON.parse(o))&&(s.pdfViewer.fireImportFailed(t,s.pdfViewer.localeObj.getConstant("File not found")),s.onControlError(500,o,s.pdfViewer.serverActionSettings.importAnnotations),o=null,e(!1))}catch(i){s.pdfViewer.fireImportFailed(t,s.pdfViewer.localeObj.getConstant("File not found")),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then((function(e){s.openImportExportNotificationPopup(e)})),s.onControlError(500,o,s.pdfViewer.serverActionSettings.importAnnotations),o=null,e(!1)}if(o&&(s.pdfViewer.fireAjaxRequestSuccess(s.pdfViewer.serverActionSettings.importAnnotations,o),o.pdfAnnotation)){for(var a=void 0,r=Object.keys(o.pdfAnnotation),l=0;l<r.length;l++)a=o.pdfAnnotation[r[l]],s.updateModifiedDateToLocalDate(a,"freeTextAnnotation"),s.updateModifiedDateToLocalDate(a,"measureShapeAnnotation"),s.updateModifiedDateToLocalDate(a,"shapeAnnotation"),s.updateModifiedDateToLocalDate(a,"signatureAnnotation"),s.updateModifiedDateToLocalDate(a,"signatureInkAnnotation"),s.updateModifiedDateToLocalDate(a,"stampAnnotations"),s.updateModifiedDateToLocalDate(a,"stickyNotesAnnotation"),s.updateModifiedDateToLocalDate(a,"textMarkupAnnotation"),s.updateModifiedDateToLocalDate(a,"redactionAnnotation");s.reRenderAnnotations(o.pdfAnnotation),s.isImportedAnnotation=!0,s.updateDocumentEditedProperty(!0),s.fireDocumentEditedEvent("AnnotationImported"),s.pdfViewer.fireImportSuccess("Import Annotations Successfully"),e(!0)}}},s.importAnnotationRequestHandler.onFailure=function(t){s.pdfViewer.fireImportFailed("Import Annotations Failed",t.statusText),e(!1)},s.importAnnotationRequestHandler.onError=function(t){s.pdfViewer.fireImportFailed("Import Annotations Failed",t.statusText),e(!1)}}}))}function Zs(e,t){var i,o=this;return i=this,new Promise((function(s,a){var r={};"object"===n(e)?(r.data=JSON.stringify(e),r.data=r.data.replace(/\\n/g,"\n")):(r.data=e,"json"===e.split(".")[1]&&(r.fileName=i.pdfViewer.fileName)),i.pdfViewer.fireFormImportStarted().then((function(e){if(e){r.action="ImportFormFields",r.hashId=i.hashId,r.elementId=o.pdfViewer.dataId,i.jsonDocumentId&&(r.document=i.jsonDocumentId),t&&(r.formFieldDataFormat=t),r=i.pdfViewer.chunkJsonObject(r,"ImportFormFields");var a=i.pdfViewer.serviceUrl+"/"+i.pdfViewer.serverActionSettings.importFormFields;i.importFormFieldsRequestHandler=new Wn(o.pdfViewer),i.importFormFieldsRequestHandler.url=a,i.importFormFieldsRequestHandler.mode=!0,i.importFormFieldsRequestHandler.responseType="text",i.importFormFieldsRequestHandler.send(r),i.importFormFieldsRequestHandler.onSuccess=function(e){var t=e.data;if(t&&"null"!==t){if("object"!==n(t))try{"object"!==n(t=JSON.parse(t))&&(i.onControlError(500,t,i.pdfViewer.serverActionSettings.importFormFields),i.pdfViewer.fireFormImportFailed(e.statusText),t=null,s(!1))}catch(e){i.pdfViewer.fireFormImportFailed(i.pdfViewer.localeObj.getConstant("File not found")),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then((function(e){i.openImportExportNotificationPopup(e)})).catch((function(e){throw console.error("Unhandled Exception:",e),e})),i.onControlError(500,t,i.pdfViewer.serverActionSettings.importFormFields),t=null,s(!1)}i.pdfViewer.fireAjaxRequestSuccess(i.pdfViewer.serverActionSettings.importFormFields,t),i.pdfViewer.fireFormImportSuccess(),window.sessionStorage.removeItem(this.documentId+"_formfields"),i.saveFormfieldsData(t),i.pdfViewer.formDesignerModule&&i.pdfViewer.formDesignerModule.deleteFormFields(null,!1,!0),i.fireDocumentEditedEvent("FormFieldImported");for(var o=0;o<i.renderedPagesList.length;o++)this.pdfViewer.formFieldsModule.renderFormFields(i.renderedPagesList[o]);s(!0)}else{i.pdfViewer.fireFormImportFailed(e.statusText),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_FileNotFound").then((function(e){i.openImportExportNotificationPopup(e)})).catch((function(e){throw console.error("Unhandled Exception:",e),e})),s(!1)}},i.importFormFieldsRequestHandler.onFailure=function(e){i.pdfViewer.fireFormImportFailed(e.statusText),s(!1)},i.importFormFieldsRequestHandler.onError=function(e){i.pdfViewer.fireFormImportFailed(e.statusText),s(!1)}}else s(!1)}))}))}function Ys(){var e=this;if(this.pdfViewer.annotationModule&&this.updateExportItem())return new Promise((function(t,i){e.createRequestForExportAnnotations(!0,_t.Json).then((function(e){t(e)}))}));return null}function Xs(e,t){e=(URL||webkitURL).createObjectURL(e);var i=sf.base.createElement("a");if(i.click)i.href=e,i.target="_parent","download"in i&&(null!==this.pdfViewer.exportAnnotationFileName?i.download=this.pdfViewer.exportAnnotationFileName.split(".")[0]+".json":i.download=this.pdfViewer.fileName.split(".")[0]+".json"),(document.body||document.documentElement).appendChild(i),i.click(),i.parentNode.removeChild(i),t?this.pdfViewer.fireFormExportSuccess():this.pdfViewer.fireExportSuccess("Export Annotations Successfully",i.download);else{if(window.top===window&&e.split("#")[0]===window.location.href.split("#")[0]){var n=-1===e.indexOf("?")?"?":"&";e=e.replace(/#|$/,n+"$&")}window.open(e,"_parent"),t?this.pdfViewer.fireFormExportSuccess():this.pdfViewer.fireExportSuccess("Export Annotations Successfully",this.pdfViewer.fileName.split(".")[0]+".json")}}function Gs(e){e=(URL||webkitURL).createObjectURL(e);var t=sf.base.createElement("a");t.click&&(t.href=e,t.target="_parent","download"in t&&(null!==this.pdfViewer.exportAnnotationFileName?t.download=this.pdfViewer.exportAnnotationFileName.split(".")[0]+".xfdf":t.download=this.pdfViewer.fileName.split(".")[0]+".xfdf"),(document.body||document.documentElement).appendChild(t),t.click(),t.parentNode.removeChild(t),this.pdfViewer.fireExportSuccess("Export Annotations Successfully",t.download))}function Js(){var e=this;this.viewerContainer.addEventListener("scroll",this.viewerContainerOnScroll,!0),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnScroll,{passive:!0}),this.viewerContainer.addEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.addEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.addEventListener("wheel",this.detectTouchPad,{passive:!0}),this.viewerContainer.addEventListener("wheel",this.viewerContainerOnMouseWheel),this.isMacSafari&&(window.addEventListener("gesturestart",(function(e){return e.preventDefault()})),window.addEventListener("gesturechange",(function(e){return e.preventDefault()})),window.addEventListener("gestureend",(function(e){return e.preventDefault()})),this.viewerContainer.addEventListener("gesturestart",this.handleMacGestureStart,!1),this.viewerContainer.addEventListener("gesturechange",this.handleMacGestureChange,!1),this.viewerContainer.addEventListener("gestureend",this.handleMacGestureEnd,!1)),this.viewerContainer.addEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.addEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.addEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.addEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.addEventListener("click",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dblclick",this.viewerContainerOnClick),this.viewerContainer.addEventListener("dragstart",this.viewerContainerOnDragStart),this.pdfViewer.element.addEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("mouseup",this.onWindowMouseUp),window.addEventListener("mousemove",this.onWindowMouseMove),window.addEventListener("touchend",this.onWindowTouchEnd),this.unload=function(){return e.pdfViewerRunner.terminate()},this.unloadDocument(this),window.addEventListener("unload",this.unload),window.addEventListener("beforeunload",this.clearSessionStorage),window.addEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.addEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.addEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.addEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.addEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.addEventListener("touchstart",this.viewerContainerOnTouchStart),this.isWebkitMobile&&this.isDeviceiOS&&this.viewerContainer.addEventListener("touchmove",(function(e){sf.base.isNullOrUndefined(e.scale)||1===e.scale||e.preventDefault()}),{passive:!1}),this.viewerContainer.addEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.addEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.addEventListener("touchcancel",this.viewerContainerOnTouchEnd))}function Ks(){this.viewerContainer.removeEventListener("scroll",this.viewerContainerOnScroll,!0),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnScroll,!0),this.viewerContainer.removeEventListener("mousedown",this.viewerContainerOnMousedown),this.viewerContainer.removeEventListener("mouseup",this.viewerContainerOnMouseup),this.viewerContainer.removeEventListener("wheel",this.detectTouchPad,!1),this.viewerContainer.removeEventListener("wheel",this.viewerContainerOnMouseWheel),this.isMacSafari&&(window.removeEventListener("gesturestart",(function(e){return e.preventDefault()})),window.removeEventListener("gesturechange",(function(e){return e.preventDefault()})),window.removeEventListener("gestureend",(function(e){return e.preventDefault()})),this.viewerContainer.removeEventListener("gesturestart",this.handleMacGestureStart,!1),this.viewerContainer.removeEventListener("gesturechange",this.handleMacGestureChange,!1),this.viewerContainer.removeEventListener("gestureend",this.handleMacGestureEnd,!1)),this.viewerContainer.removeEventListener("mousemove",this.viewerContainerOnMousemove),this.viewerContainer.removeEventListener("mouseleave",this.viewerContainerOnMouseLeave),this.viewerContainer.removeEventListener("mouseenter",this.viewerContainerOnMouseEnter),this.viewerContainer.removeEventListener("mouseover",this.viewerContainerOnMouseOver),this.viewerContainer.removeEventListener("click",this.viewerContainerOnClick),this.viewerContainer.removeEventListener("dragstart",this.viewerContainerOnDragStart),this.viewerContainer.removeEventListener("contextmenu",this.viewerContainerOnContextMenuClick),this.pdfViewer.element.removeEventListener("keydown",this.viewerContainerOnKeyDown),window.addEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("mouseup",this.onWindowMouseUp),window.removeEventListener("mousemove",this.onWindowMouseMove),window.removeEventListener("unload",this.unload),window.removeEventListener("resize",this.onWindowResize),-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?(this.viewerContainer.removeEventListener("pointerdown",this.viewerContainerOnPointerDown),this.viewerContainer.removeEventListener("pointermove",this.viewerContainerOnPointerMove),this.viewerContainer.removeEventListener("pointerup",this.viewerContainerOnPointerEnd),this.viewerContainer.removeEventListener("pointerleave",this.viewerContainerOnPointerEnd)):(this.viewerContainer.removeEventListener("touchstart",this.viewerContainerOnTouchStart),this.isWebkitMobile&&this.isDeviceiOS&&this.viewerContainer.removeEventListener("touchmove",(function(e){sf.base.isNullOrUndefined(e.scale)||1===e.scale||e.preventDefault()}),!1),this.viewerContainer.removeEventListener("touchmove",this.viewerContainerOnTouchMove),this.viewerContainer.removeEventListener("touchend",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchleave",this.viewerContainerOnTouchEnd),this.viewerContainer.removeEventListener("touchcancel",this.viewerContainerOnTouchEnd))}function Qs(e,t){t={x:t.x/this.getZoomFactor(),y:t.y/this.getZoomFactor()};var i=this.pdfViewer.selectedItems.wrapper;if(i&&e){var n=i.bounds,o=new sf.drawings.Rect(n.x,n.y,n.width,n.height),s=e.shapeAnnotationType;if("Line"===s||"LineWidthArrowHead"===s||"Distance"===s||"Polygon"===s){var a=this.pdfViewer.selectedItems.annotations[0];if(a)for(var r=0;r<a.vertexPoints.length;r++)if(sf.drawings.contains(t,a.vertexPoints[r],10)&&("Distance"!==s||"Distance"===s&&0!==a.leaderHeight))return"ConnectorSegmentPoint_"+r}if("Distance"===s){var l=0,d=void 0;if(e&&e.wrapper)for(r=0;r<e.wrapper.children.length;r++){var h=sf.drawings.Point.findAngle(e.sourcePoint,e.targetPoint);if(e.wrapper.children[r].id.indexOf("leader")>-1){var p=e.wrapper.children[0].bounds.center;0===l?(d={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},p=e.sourcePoint):(d={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},p=e.targetPoint);var c=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(c,h,p.x,p.y);var u=sf.drawings.transformPointByMatrix(c,{x:d.x,y:d.y});if(sf.drawings.contains(t,u,10))return"Leader"+l;l++}}}var f=this.pdfViewer.touchPadding;this.getZoomFactor()<=1.5&&(f/=this.getZoomFactor());var m=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(m,e.rotateAngle+i.parentTransform,i.offsetX,i.offsetY);var g=i.offsetX-i.pivot.x*i.actualSize.width,w=i.offsetY-i.pivot.y*i.actualSize.height,y={x:g+(.5===i.pivot.x?2*i.pivot.x:i.pivot.x)*i.actualSize.width/2,y:w-30/this.getZoomFactor()};if(y=sf.drawings.transformPointByMatrix(m,y),"Stamp"===s&&sf.drawings.contains(t,y,f))return"Rotate";if("Image"===s&&sf.drawings.contains(t,y,f))return"Rotate";if((o=this.inflate(f,o)).containsPoint(t,0)){var v=this.checkResizeHandles(this.pdfViewer,i,t,m,g,w);if(v)return v}return this.pdfViewer.selectedItems.annotations.indexOf(e)>-1||this.pdfViewer.selectedItems.formFields.indexOf(e)>-1&&this.pdfViewer.formDesignerInteraction?"Drag":"Select"}return this.pdfViewer.tool||"Select"}function $s(e){switch(e){case"Select":return new Er(this.pdfViewer,this);case"Drag":return new Br(this.pdfViewer,this);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new Fr(this.pdfViewer,this,e);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"Leader":case"ConnectorSegmentPoint":return new Nr(this.pdfViewer,this,e);case"DrawTool":return new Lr(this.pdfViewer,this,this.pdfViewer.drawingObject);case"Polygon":return new Or(this.pdfViewer,this,"Polygon");case"Distance":return new Rr(this.pdfViewer,this,"Leader1",void 0);case"Line":return new Rr(this.pdfViewer,this,"ConnectorSegmentPoint_1",this.pdfViewer.drawingObject);case"Perimeter":return new Or(this.pdfViewer,this,"Perimeter");case"Rotate":return new zr(this.pdfViewer,this);case"Stamp":return new Pr(this.pdfViewer,this);case"Ink":return new Dr(this.pdfViewer,this,this.pdfViewer.drawingObject)}return e.indexOf("ConnectorSegmentPoint")>-1||e.indexOf("Leader")>-1?new Nr(this.pdfViewer,this,e):null}function ea(){var e,t=this.pdfViewer.selectedItems.annotations;return t&&t.length>0&&t[0]&&sf.base.isNullOrUndefined(t[0].annotationSelectorSettings.resizerCursorType)?"FreeText"===t[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings)?null:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerCursorType:"Stamp"===t[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings)?null:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerCursorType:"HandWrittenSignature"===t[0].shapeAnnotationType||"SignatureText"===t[0].shapeAnnotationType||"SignatureImage"===t[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings)?null:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerCursorType:"Ink"===t[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings)?null:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerCursorType:t[0].measureType?t[0].measureType&&("Distance calculation"===t[0].subject?e=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings)?null:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerCursorType:"Perimeter calculation"===t[0].subject?e=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings)?null:this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerCursorType:"Area calculation"===t[0].subject?e=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings)?null:this.pdfViewer.areaSettings.annotationSelectorSettings.resizerCursorType:"Radius calculation"===t[0].subject?e=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings)?null:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerCursorType:"Volume calculation"===t[0].subject&&(e=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings)?null:this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerCursorType)):"Line"===t[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings)?null:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerCursorType:"LineWidthArrowHead"===t[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings)?null:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerCursorType:"Rectangle"===t[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings)?null:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerCursorType:"Ellipse"===t[0].shapeAnnotationType?e=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings)?null:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerCursorType:"Polygon"===t[0].shapeAnnotationType&&(e=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings)?null:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerCursorType):t[0]&&(e=t[0].annotationSelectorSettings.resizerCursorType),e||(e=this.pdfViewer.annotationSelectorSettings.resizerCursorType),e}function ta(e,t,i){e&&void 0!==e.pageIndex&&e.pageIndex!==this.activeElements.activePageID&&t?this.isPanMode?t.style.cursor="grab":t.style.cursor="default":this.setCursor(t,i)}function ia(e){this.eventArgs.position=this.currentPosition,"Drag"===this.action&&this.eventArgs.source instanceof r&&this.getMouseEventArgs(this.currentPosition,this.eventArgs,e),this.getMouseEventArgs(this.currentPosition,this.eventArgs,e,this.eventArgs.source),this.inAction=!0,this.initialEventArgs=null}function na(e){var t=this,i=e.touches;this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.setTouchPoints(i[0].clientX,i[0].clientY);var n=e.target;(1===i.length&&!n.classList.contains("e-pv-hyperlink")&&this.skipPreventDefault(n)&&this.preventTouchEvent(e),1===e.touches.length&&this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&(this.isToolbarInkClicked||this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(e)),this.touchClientX=i[0].clientX,this.touchClientY=i[0].clientY,this.scrollY=i[0].clientY,this.previousTime=(new Date).getTime(),1!==i.length||e.target.classList.contains("e-pv-touch-select-drop")||e.target.classList.contains("e-pv-touch-ellipse"))||(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pageCount>0&&!this.isThumb&&!e.target.classList.contains("e-pv-hyperlink")&&this.handleTaps(i,e),(sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)&&this.handleTextBoxTaps(i),this.isDesignerMode(n)?(this.contextMenuModule.close(),this.isLongTouchPropagated||(this.longTouchTimer=setTimeout((function(){t.isTouchDesignerMode=!0;var i=t.hideContextMenuItems(e);t.contextMenuModule.open(t.touchClientX,t.touchClientY,t.viewerContainer,i)}),1e3)),this.isLongTouchPropagated=!0):this.pdfViewer.textSelectionModule&&!this.isTextSelectionDisabled&&(this.pdfViewer.textSelectionModule.clearTextSelection(),this.contextMenuModule.close(),this.isLongTouchPropagated||(this.longTouchTimer=setTimeout((function(){t.viewerContainerOnLongTouch(e)}),1e3)),this.isLongTouchPropagated=!0));var o=this.pdfViewer.toolbarModule?this.pdfViewer.toolbarModule.annotationToolbarModule:"null";!n.classList.contains("e-pv-text")||o&&o.textMarkupToolbarElement&&0!==o.textMarkupToolbarElement.children.length||(n.classList.add("e-pv-text-selection-none"),sf.base.Browser.isDevice&&n.classList.remove("e-enable-text-selection")),this.diagramMouseDown(e),"Perimeter"!==this.action&&"Distance"!==this.action&&"Line"!==this.action&&"Polygon"!==this.action&&"DrawTool"!==this.action&&"Drag"!==this.action&&-1===this.action.indexOf("Rotate")&&-1===this.action.indexOf("Resize")||e.preventDefault()}function oa(e){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(clearTimeout(this.singleTapTimer),this.singleTapTimer=null,this.tapCount=0),this.preventTouchEvent(e),this.isToolbarInkClicked&&e.preventDefault();var t,i=e.touches;if(this.pdfViewer.magnificationModule&&(this.isTouchScrolled=!0,i.length>1&&this.pageCount>0?(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.isTouchScrolled=!1),this.pdfViewer.enablePinchZoom&&this.pdfViewer.magnificationModule.initiatePinchMove(i[0].clientX,i[0].clientY,i[1].clientX,i[1].clientY)):1===i.length&&this.getPagesPinchZoomed()&&(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.isTouchScrolled=!1),this.pdfViewer.magnificationModule.pinchMoveScroll())),this.mouseX=i[0].clientX,this.mouseY=i[0].clientY,e.target&&(e.target.id.indexOf("_text")>-1||e.target.id.indexOf("_annotationCanvas")>-1||e.target.classList.contains("e-pv-show-designer-name")||e.target.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){var n=this.pdfViewer.annotation.getEventPageNumber(e),o=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+n);if(o){var s=o.getBoundingClientRect(),a=s.x?s.x:s.left,r=s.y?s.y:s.top;t=new sf.drawings.Rect(a+10,r+10,s.width-10,s.height-10)}}t&&t.containsPoint({x:this.mouseX,y:this.mouseY})?(this.diagramMouseMove(e),this.annotationEvent=e):(this.diagramMouseLeave(e),this.isAnnotationDrawn&&(this.diagramMouseUp(e),this.isAnnotationAdded=!0)),i=null}function sa(e){if(this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.pinchMoveEnd(),e.cancelable&&!e.target.classList.contains("e-pv-touch-ellipse")&&this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.isTextSelection&&e.preventDefault(),this.isLongTouchPropagated=!1,clearInterval(this.longTouchTimer),this.longTouchTimer=null,sf.base.Browser.isDevice&&!this.isDeviceiOS&&!this.pdfViewer.enableDesktopMode&&this.isTouchScrolled&&!this.pdfViewer.formDesignerInteraction){this.currentTime=(new Date).getTime();var t=this.currentTime-this.previousTime,i=this.scrollY-e.changedTouches[0].pageY,n=i/t;if(Math.abs(n)>1.5){var o=i+t*n;this.viewerContainer.scrollTop+=o,this.updateMobileScrollerPosition()}}this.diagramMouseUp(e),this.renderStampAnnotation(e)}function aa(e){if(this.touchClientX=e.touches[0].clientX,this.touchClientY=e.touches[0].clientY,e.cancelable&&e.preventDefault(),this.pdfViewer.textSelectionModule){var t=e.target;t.classList.contains("e-pv-text-selection-none")&&t.classList.contains("e-pv-text")&&(t.classList.remove("e-pv-text-selection-none"),sf.base.Browser.isDevice&&t.classList.add("e-enable-text-selection")),this.pdfViewer.textSelectionModule.initiateTouchSelection(e,this.touchClientX,this.touchClientY),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(clearTimeout(this.singleTapTimer),this.tapCount=0)}}function ra(e){if(this.pdfViewer.annotation){var t=this.getZoomFactor(),i=this.pdfViewer.annotation.getEventPageNumber(e),n=this.getElement("_pageDiv_"+i);if(this.pdfViewer.enableStampAnnotations){var o=this.pdfViewer.annotationModule.stampAnnotationModule;if(o&&o.isStampAnnotSelected&&n){var s=n.getBoundingClientRect();if("touchend"===e.type&&"Image"===this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation.shapeAnnotationType){var a=this.pdfViewer.annotationModule.stampAnnotationModule.currentStampAnnotation;a.pageIndex=i,a.bounds.x=(e.changedTouches[0].clientX-s.left)/t,a.bounds.y=(e.changedTouches[0].clientY-s.top)/t,o.updateDeleteItems(i,a,a.opacity),this.pdfViewer.add(a);var r=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+i);this.pdfViewer.renderDrawing(r,i)}else o.renderStamp((e.changedTouches[0].clientX-s.left)/t,(e.changedTouches[0].clientY-s.top)/t,null,null,i,null,null,null,null);o.isStampAnnotSelected=!1}this.pdfViewer.annotation.onAnnotationMouseDown()}if(this.pdfViewer.enableHandwrittenSignature&&this.isSignatureAdded&&n){s=n.getBoundingClientRect();this.currentSignatureAnnot.pageIndex=i,this.signatureModule.renderSignature((e.changedTouches[0].clientX-s.left)/t,(e.changedTouches[0].clientY-s.top)/t),this.isSignatureAdded=!1}1===e.touches.length&&this.isTextMarkupAnnotationModule()&&!this.getPopupNoteVisibleStatus()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.onTextMarkupAnnotationTouchEnd(e)}}function la(e){"touch"===e.pointerType&&(e.preventDefault(),this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.pinchMoveEnd(),this.pointersForTouch=[],this.pointerCount=0)}function da(e){if("touch"===e.pointerType&&this.pageCount>0&&(e.preventDefault(),2===this.pointersForTouch.length)){for(var t=0;t<this.pointersForTouch.length;t++)if(e.pointerId===this.pointersForTouch[t].pointerId){this.pointersForTouch[t]=e;break}this.pdfViewer.magnificationModule&&this.pdfViewer.enablePinchZoom&&this.pdfViewer.magnificationModule.initiatePinchMove(this.pointersForTouch[0].clientX,this.pointersForTouch[0].clientY,this.pointersForTouch[1].clientX,this.pointersForTouch[1].clientY)}}function ha(e){this.pdfViewer.textSelectionModule&&(this.isPanMode||!this.pdfViewer.enableTextSelection||this.isTextSelectionDisabled||null!=this.getSelectTextMarkupCurrentPage()||this.isWebkitMobile&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(e.preventDefault(),e.stopPropagation()))}function pa(e){"touch"===e.pointerType&&(this.pointerCount++,this.pointerCount<=2&&(e.preventDefault(),this.pointersForTouch.push(e),2===this.pointerCount&&(this.pointerCount=0),this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.setTouchPoints(e.clientX,e.clientY)))}function ca(e,t){if(sf.base.isNullOrUndefined(this.pdfViewer.fileByteArray)&&this.pdfViewer.uploadedFileByteArray&&(this.pdfViewer.fileByteArray=this.pdfViewer.uploadedFileByteArray,this.pdfViewer.uploadedFileByteArray=null),e&&void 0!==e.pageCount){if(this.isPassword&&(this.isPassword=!1,this.isPasswordAvailable=!1,this.pdfViewer._dotnetInstance.invokeMethodAsync("ClosePasswordDialog")),t&&""!==t&&(this.passwordData=t),this.pdfViewer.allowServerDataBinding=!1,this.pageCount=e.pageCount,this.pdfViewer.pageCount=e.pageCount,this.pdfViewer.updatePdfViewerOptions("PageCount",e.pageCount),this.hashId=e.hashId,this.documentLiveCount=e.documentLiveCount,this.isAnnotationCollectionRemoved=!1,this.saveDocumentHashData(),this.saveFormfieldsData(e),this.pdfViewer.allowServerDataBinding=!0,this.isDigitalSignaturePresent=e.isDigitalSignaturePresent,this.pageRender(e),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){this.mobileScrollerContainer.style.display="";var i=this.pdfViewer.toolbarModule?this.toolbarHeight:0;this.mobileScrollerContainer.style.top=i+"px"}this.restrictionList=e.RestrictionSummary}else this.pageCount=0,this.currentPageNumber=0,sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.mobileScrollerContainer.style.display="none");var n=this.pdfViewer.annotationModule;n&&n.textMarkupAnnotationModule&&n.textMarkupAnnotationModule.isEnableTextMarkupResizer(n.textMarkupAnnotationModule.currentTextMarkupAddMode)&&n.textMarkupAnnotationModule.createAnnotationSelectElement()}function ua(e){if("PageLoaded"===e.data.message){this.initPageDiv(e.data);this.currentPageNumber=1,this.pdfViewer.currentPageNumber=1,this.pdfViewer.updatePdfViewerOptions("CurrentPageNumber",this.pdfViewer.currentPageNumber),this.previousZoomValue=this.pdfViewer.zoomValue;var t=!1;if(this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.isAutoZoom=!0,this.pdfViewer.zoomValue&&this.pdfViewer.zoomValue>0&&(100!==this.pdfViewer.zoomValue&&(t=!0),this.isInitialPageMode=!0,this.pdfViewer.magnification.zoomTo(this.pdfViewer.zoomValue)),"FitToWidth"===this.pdfViewer.zoomMode?(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToWidth()):"FitToPage"===this.pdfViewer.zoomMode?(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToPage()):"FitToHeight"===this.pdfViewer.zoomMode&&(this.isInitialPageMode=!0,this.pdfViewer.magnificationModule.fitToHeight()),this.documentLoaded=!0,this.pdfViewer.magnificationModule.isInitialLoading=!0,this.onWindowResize(),this.documentLoaded=!1,this.pdfViewer.magnificationModule.isInitialLoading=!1),this.pdfViewer.magnificationModule&&this.pdfViewer.magnificationModule.isAutoZoom){var i=this.pdfViewer.magnificationModule.zoomFactor,n=sf.base.isNullOrUndefined(i)?1:i;this.pdfViewer.updatePdfViewerOptions("ZoomValue",Math.round(100*n))}else this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue);this.isDocumentLoaded=!0,this.showLoadingIndicator(!1);var o={pageCount:this.pageCount,pageSizes:e.data.pageSizes};if(window.sessionStorage.setItem(this.documentId+"_pagedata",JSON.stringify(o)),-1===this.renderedPagesList.indexOf(e.data.pageIndex)&&!t){this.createRequestForRender(e.data.pageIndex);var s=e.data.pageIndex+1;if(this.pdfViewer.overscanCount&&this.pdfViewer.overscanCount>0)for(var a=this.pdfViewer.overscanCount<=this.pageCount?this.pdfViewer.overscanCount>this.pageRenderCount?this.pdfViewer.overscanCount+1:2:this.pageCount,r=1;r<a;r++)this.createRequestForRender(r),s+=1;else s<this.pageCount&&(this.createRequestForRender(s),s+=1);if(this.pageSize[s])for(var l=this.getPageTop(s),d=this.viewerContainer.clientHeight;d>l&&this.pageSize[s];)this.renderPageElement(s),this.createRequestForRender(s),l=this.getPageTop(s),s+=1}}}function fa(e){var t="";t=sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name?decodeURI(window.sessionStorage.getItem(this.documentId+"_hashId")):window.sessionStorage.getItem(this.documentId+"_hashId");var i=window.sessionStorage.getItem("documentLiveCount");if(null!==t){var n={hashId:t,documentLiveCount:i,action:"Unload",elementId:e.pdfViewer.element.id},o=window.sessionStorage.getItem("unload");this.clearCache(o,n,e)}this.pdfViewer.magnificationModule&&(this.pdfViewer.magnificationModule.zoomFactor=1),this.formFieldCollection=[],this.hashId=" ",window.sessionStorage.removeItem(this.documentId+"_hashId"),window.sessionStorage.removeItem("documentLiveCount"),this.documentId&&(window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.documentId+"_annotations_sticky"),window.sessionStorage.removeItem(this.documentId+"_annotations_textMarkup"),window.sessionStorage.removeItem(this.documentId+"_annotations_freetext"),window.sessionStorage.removeItem(this.documentId+"_formfields"),window.sessionStorage.removeItem(this.documentId+"_annotations_sign"),window.sessionStorage.removeItem(this.documentId+"_annotations_ink"))}var ma=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},ga=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}},wa=function(){function e(e){var t=this;this.hyperlinkAndLinkAnnotation={},this.pageTextDetails={},this.pageImageDetails={},this.customCommands={},this.pageSize=[],this.pageCount=0,this.printScaleFactor=1,this.isReRenderRequired=!0,this.currentPageNumber=1,this.activeElements=new xe,this.mouseDownEvent=null,this.pageRenderCount=2,this.isDocumentLoaded=!1,this.renderedPagesList=[],this.pageGap=8,this.signatureAdded=!1,this.isUpdateProgrammatically=!1,this.isFreeTextSelected=!1,this.pageLeft=0,this.sessionLimit=1e3,this.pageStopValue=300,this.toolbarHeight=56,this.pageLimit=0,this.previousPage=0,this.isViewerMouseDown=!1,this.isViewerMouseWheel=!1,this.scrollPosition=0,this.sessionStorage=[],this.isLoadedFormFieldAdded=!1,this.pointerCount=0,this.pointersForTouch=[],this.isPasswordAvailable=!1,this.passwordData="",this.reRenderedCount=0,this.mouseX=0,this.mouseY=0,this.mouseLeft=0,this.mouseTop=0,this.touchClientX=0,this.touchClientY=0,this.previousTime=0,this.currentTime=0,this.isTouchScrolled=!1,this.isLongTouchPropagated=!1,this.longTouchTimer=null,this.isViewerContainerDoubleClick=!1,this.dblClickTimer=null,this.pinchZoomStorage=[],this.isTextSelectionDisabled=!1,this.isPanMode=!1,this.dragX=0,this.dragY=0,this.isScrollbarMouseDown=!1,this.scrollX=0,this.scrollY=0,this.ispageMoved=!1,this.isThumb=!1,this.isTapHidden=!1,this.singleTapTimer=null,this.tapCount=0,this.inputTapCount=0,this.isInitialLoaded=!1,this.annotationPageList=[],this.importPageList=[],this.isImportAction=!1,this.isImportedAnnotation=!1,this.isAnnotationCollectionRemoved=!1,this.tool=null,this.action="Select",this.eventArgs=null,this.inAction=!1,this.isMouseDown=!1,this.isStampMouseDown=!1,this.stampAdded=!1,this.customStampCount=0,this.isDynamicStamp=!1,this.isMixedSizeDocument=!1,this.highestWidth=0,this.highestHeight=0,this.customStampCollection=[],this.isAlreadyAdded=!1,this.isWebkitMobile=!1,this.isFreeTextContextMenu=!1,this.isSelection=!1,this.isAddAnnotation=!1,this.annotationComments=null,this.isToolbarSignClicked=!1,this.signatureCount=0,this.isSignatureAdded=!1,this.isNewSignatureAdded=!1,this.isInitialPageMode=!1,this.documentAnnotationCollections=null,this.annotationRenderredList=[],this.annotationStorage={},this.formFieldStorage={},this.isStorageExceed=!1,this.isNewStamp=!1,this.isNewSticky=!1,this.isSidebarResized=!1,this.downloadCollections={},this.isAnnotationAdded=!1,this.annotationEvent=null,this.isAnnotationDrawn=!1,this.isAnnotationSelect=!1,this.isAnnotationMouseDown=!1,this.isAnnotationMouseMove=!1,this.validateForm=!1,this.isMinimumZoom=!1,this.documentLoaded=!1,this.tileRenderCount=0,this.tileRequestCount=0,this.isTileImageRendered=!1,this.isDataExits=!1,this.requestLists=[],this.tilerequestLists=[],this.isInkAdded=!1,this.inkCount=0,this.isAddedSignClicked=!1,this.imageCount=0,this.isMousedOver=!1,this.isFormFieldSelect=!1,this.isFormFieldMouseDown=!1,this.isFormFieldMouseMove=!1,this.isFormFieldMousedOver=!1,this.isPassword=!1,this.isDigitalSignaturePresent=!1,this.isDrawnCompletely=!1,this.isAddComment=!1,this.drawSignatureWithTool=!1,this.formFieldCollection=[],this.nonFillableFields={},this.isInitialField=!1,this.isTouchDesignerMode=!1,this.isPrint=!1,this.isPDFViewerJson=!1,this.isJsonImported=!1,this.isJsonExported=!1,this.isPageRotated=!1,this.downloadFileName="",this.isFocusField=!1,this.isAnnotationPresent=!1,this.isTouchPad=!1,this.isMacGestureActive=!1,this.macGestureStartScale=0,this.zoomInterval=5,this.focusField=[],this.isWebAssembly=!1,this.isMAUI=!1,this.lastInputMethod=null,this.isDeviceiOS=/ipad|iphone|ipod|mac/.test(navigator.userAgent.toLowerCase())&&"ontouchend"in document,this.isMacSafari=navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")&&!this.isDeviceiOS,this.clearSessionStorage=function(){Xt.call(t)},this.onWindowResize=function(e){bi.call(t,e)},this.viewerContainerOnMousedown=function(e){ri.call(t,e)},this.viewerContainerOnMouseup=function(e){li.call(t,e)},this.detectTouchPad=function(e){Ai.call(t,e)},this.handleMacGestureStart=function(e){xi.call(t,e)},this.handleMacGestureChange=function(e){Vi.call(t,e)},this.handleMacGestureEnd=function(e){!function(e){e.preventDefault(),e.stopPropagation()}(e)},this.viewerContainerOnMouseWheel=function(e){di.call(t,e)},this.onWindowKeyDown=function(e){gi.call(t,e)},this.viewerContainerOnKeyDown=function(e){mi.call(t,e)},this.viewerContainerOnMousemove=function(e){hi.call(t,e)},this.panOnMouseMove=function(e){Ye.call(t,e)},this.viewerContainerOnMouseLeave=function(e){pi.call(t,e)},this.viewerContainerOnMouseEnter=function(e){ci.call(t)},this.viewerContainerOnMouseOver=function(e){ui.call(t,e)},this.viewerContainerOnClick=function(e){fi.call(t,e)},this.viewerContainerOnDragStart=function(e){!function(e){!!document.documentMode||e.preventDefault()}(e)},this.viewerContainerOnContextMenuClick=function(e){t.isViewerMouseDown=!1},this.onWindowMouseUp=function(e){return yi.call(t,e)},this.onWindowMouseMove=function(e){return wi.call(t,e)},this.onWindowTouchEnd=function(e){vi.call(t,e)},this.viewerContainerOnTouchStart=function(e){na.call(t,e)},this.viewerContainerOnLongTouch=function(e){aa.call(t,e)},this.viewerContainerOnPointerDown=function(e){pa.call(t,e)},this.viewerContainerOnTouchMove=function(e){oa.call(t,e)},this.viewerContainerOnPointerMove=function(e){da.call(t,e)},this.viewerContainerOnTouchEnd=function(e){sa.call(t,e)},this.viewerContainerOnPointerEnd=function(e){la.call(t,e)},this.viewerContainerOnScroll=function(e){Ge.call(t,e)},this.pdfViewer=e,this.navigationPane=new Ve(this.pdfViewer,this),this.textLayer=new ya(this.pdfViewer,this),this.signatureModule=new yr(this.pdfViewer,this),this.isWebkitMobile=e.checkIsWebkitMoblie()}return e.prototype.initializeComponent=function(){Zt.call(this)},e.prototype.LoadDocumentFromServer=function(){gs.call(this)},e.prototype.tabElementOnFocus=function(e){$e.call(this)},e.prototype.escElementOnFocus=function(e){ot.call(this)},e.prototype.createMobilePageNumberContainer=function(){Ps.call(this)},e.prototype.initiatePageRender=function(e,t){e=Ho.call(this,e,t)},e.prototype.initiateLoadDocument=function(e,t,i){zo.call(this,e,t,i)},e.prototype.convertBase64=function(e){return e=e.replace("data:application/pdf;base64,",""),new Uint8Array(atob(e).split("").map((function(e){return e.charCodeAt(0)})))},e.prototype.loadSuccess=function(e,t){Uo.call(this,e,t)},e.prototype.updateFormFieldName=function(e){!function(e){if(e&&e.PdfRenderedFormFields&&e.PdfRenderedFormFields.length>0)for(var t=void 0,i=0;i<e.PdfRenderedFormFields.length;i++)(t=e.PdfRenderedFormFields[i])&&t.ActualFieldName&&(t.FieldName=t.ActualFieldName)}(e)},e.prototype.mobileScrollContainerDown=function(e){_e.call(this)},e.prototype.relativePosition=function(e){return it.call(this,e)},e.prototype.setMaximumHeight=function(e){oi.call(this,e)},e.prototype.applyViewerHeight=function(e){si.call(this,e)},e.prototype.updateWidth=function(){ii.call(this)},e.prototype.updateHeight=function(){ni.call(this)},e.prototype.updateViewerContainer=function(){ti.call(this)},e.prototype.updateViewerContainerSize=function(){Si.call(this)},e.prototype.mobileScrollContainerEnd=function(e){We.call(this)},e.prototype.getPdfByteArray=function(e){return wo.call(this,e)},e.prototype.createAjaxRequest=function(e,t,i){yo.call(this,e,t,i)},e.prototype.openNotificationPopup=function(e){Qt.call(this,e)},e.prototype.showNotificationPopup=function(e){Kt.call(this,e)},e.prototype.requestSuccess=function(e,t,i){ca.call(this,e,i)},e.prototype.pageRender=function(e){jo.call(this)},e.prototype.PageloadedOnMessage=function(e){ua.call(this,e)},e.prototype.renderPasswordPopup=function(e,t){on.call(this,e,t)},e.prototype.renderCorruptPopup=function(){nn.call(this)},e.prototype.constructJsonObject=function(e,t,i){return Wo.call(this,t,e,i)},e.prototype.checkDocumentData=function(e){return qo.call(this,e)},e.prototype.setFileName=function(){Jt.call(this)},e.prototype.saveDocumentInfo=function(){fo.call(this)},e.prototype.saveDocumentHashData=function(){mo.call(this)},e.prototype.saveFormfieldsData=function(e){go.call(this,e)},e.prototype.enableFormFieldButton=function(e){$t.call(this,e)},e.prototype.updateWaitingPopup=function(e){Hs.call(this,e)},e.prototype.getActivePage=function(e){return Fe.call(this,e)},e.prototype.createWaitingPopup=function(e){Us.call(this,e)},e.prototype.showLoadingIndicator=function(e){Ki.call(this,e)},e.prototype.showPageLoadingIndicator=function(e,t){sn.call(this,e,t)},e.prototype.showPrintLoadingIndicator=function(e){Qi.call(this,e)},e.prototype.setLoaderProperties=function(e){!function(e){var t=e.firstChild.firstChild.firstChild;t&&(t.style.height="48px",t.style.width="48px",t.style.transformOrigin="24px 24px 24px")}(e)},e.prototype.updateScrollTop=function(e){je.call(this,e)},e.prototype.getZoomFactor=function(){return Pe.call(this)},e.prototype.getPinchZoomed=function(){return De.call(this)},e.prototype.getMagnified=function(){return Ne.call(this)},e.prototype.getPinchScrolled=function(){return He.call(this)},e.prototype.getPagesPinchZoomed=function(){return ze.call(this)},e.prototype.getPagesZoomed=function(){return Re.call(this)},e.prototype.getRerenderCanvasCreated=function(){return Oe.call(this)},e.prototype.getDocumentId=function(){return this.documentId},e.prototype.download=function(){Te.call(this)},e.prototype.redactPages=function(e){Ee.call(this,e)},e.prototype.getDocumentAsByteArray=function(){return Be.call(this)},e.prototype.getCustomCommands=function(e){this.customCommands=e},e.prototype.fireCustomCommands=function(e){Yt.call(this,e)},e.prototype.getModifiers=function(e){return function(e){var t=!!/ipad|iphone|ipod|mac/.test(navigator.userAgent.toLowerCase())&&e.metaKey,i=0;return(e.ctrlKey||t)&&(i|=1),e.altKey&&(i|=2),e.shiftKey&&(i|=4),e.metaKey&&(i|=8),i}(e)},e.prototype.getDocumentAsByteArrayRequest=function(){return Zo.call(this)},e.prototype.clear=function(e){Ie.call(this,e)},e.prototype.destroy=function(){ke.call(this)},e.prototype.removePdfViewerElements=function(){Ce.call(this)},e.prototype.removeElementFromParent=function(e){!function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}(e)},e.prototype.unloadDocument=function(e){fa.call(this,e)},e.prototype.clearCache=function(e,t,i){vo.call(this,e,t,i)},e.prototype.windowSessionStorageClear=function(){bo.call(this)},e.prototype.updateCommentPanelAfterloading=function(){Di.call(this)},e.prototype.updateCommentPanel=function(){Ni.call(this)},e.prototype.focusViewerContainer=function(e){Qe.call(this)},e.prototype.getScrollParent=function(e){return ai.call(this,e)},e.prototype.hideLoadingIndicator=function(){$i.call(this)},e.prototype.createPrintPopup=function(){Ji.call(this)},e.prototype.createGoToPagePopup=function(){Yi.call(this)},e.prototype.closeGoToPagePopUp=function(){Xi.call(this)},e.prototype.EnableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].removeAttribute("disabled")},e.prototype.DisableApplyButton=function(){document.getElementsByClassName("e-pv-gotopage-apply-btn")[0].setAttribute("disabled",!0)},e.prototype.GoToPageCancelClick=function(){this.goToPagePopup.hide()},e.prototype.GoToPageApplyClick=function(){Gi.call(this)},e.prototype.updateMobileScrollerPosition=function(){qe.call(this)},e.prototype.createPasswordPopup=function(){Wi.call(this)},e.prototype.passwordCancel=function(e){qi.call(this,e)},e.prototype.passwordCancelClick=function(){Zi.call(this)},e.prototype.applyPassword=function(){this.focusViewerContainer()},e.prototype.createFileInputElement=function(){Gt.call(this)},e.prototype.wireEvents=function(){Js.call(this)},e.prototype.unWireEvents=function(){Ks.call(this)},e.prototype.updateZoomValue=function(){Ze.call(this)},e.prototype.updateFreeTextProperties=function(e){Le.call(this,e)},e.prototype.hideContextMenuItems=function(e){return Oi.call(this,e)},e.prototype.OnItemSelected=function(e){Ri.call(this,e)},e.prototype.openPropertyPanel=function(e){_i.call(this,e)},e.prototype.removeIconClass=function(){Rs.call(this)},e.prototype.CommentItemSelected=function(){ls.call(this)},e.prototype.ScaleRatioSelected=function(){rs.call(this)},e.prototype.DeleteItemSelected=function(){ji.call(this)},e.prototype.pasteItemSelected=function(e){Ui.call(this,e)},e.prototype.CutItemSelected=function(e){Hi.call(this,e)},e.prototype.CopyItemSelected=function(){zi.call(this)},e.prototype.PropertiesItemSelected=function(){_n.call(this)},e.prototype.TextMarkUpSelected=function(e){ss.call(this,e)},e.prototype.shapeMenuItems=function(e,t,i,n){as.call(this,t,e,i,n)},e.prototype.formFieldMenuItems=function(e,t){jn.call(this,e,t)},e.prototype.checkIsRtlText=function(e){return function(e){return new RegExp("^[^A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF]*[\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC]").test(e)}(e)},e.prototype.isClickWithinSelectionBounds=function(e){return et.call(this,e)},e.prototype.isTouchWithinSelectionBounds=function(e){return tt.call(this,e)},e.prototype.getHorizontalClientValue=function(e){return xo.call(this,e)},e.prototype.getVerticalClientValue=function(e){return Vo.call(this,e)},e.prototype.getHorizontalValue=function(e){return Co.call(this,e)},e.prototype.getVerticalValue=function(e){return Io.call(this,e)},e.prototype.checkIsNormalText=function(){return nt.call(this)},e.prototype.tabOrderNavigation=function(e,t,i){st.call(this,t,e,i)},e.prototype.getElementById=function(e){return document.getElementById(e)},e.prototype.navigatePrimaryToolbarTabOrder=function(e){},e.prototype.navigateAnnotationToolbarTabOrder=function(e,t){at.call(this,e,t)},e.prototype.navigateBookmarkThumbnailTabOrder=function(e,t){rt.call(this,e,t)},e.prototype.navigateCommentPanelTabOrder=function(e,t){lt.call(this,e,t)},e.prototype.navigateViewerContainerTabOrder=function(e){dt.call(this,e)},e.prototype.navigateFormFieldTabOrder=function(e){ht.call(this,e)},e.prototype.navigateContextMenuTabOrder=function(e,t){pt.call(this,e,t)},e.prototype.updateStampItems=function(){ei.call(this)},e.prototype.updateRedactionAnnotation=function(e){var t="string"==typeof e?JSON.parse(e):e;if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0){var i=u(this.pdfViewer.selectedItems.annotations[0]);if(i&&"Redaction"===i.shapeAnnotationType){var n=u(i);n.id&&(n.uniqueKey=n.id),i.annotationProperties||(i.annotationProperties={});var o=i.annotationProperties;if(t.fillColor&&i.fillColor!==this.pdfViewer.annotationModule.hexToRgba(t.fillColor)&&(i.fillColor=this.pdfViewer.annotationModule.hexToRgba(t.fillColor)),t.outlineColor&&i.markerBorderColor!==this.pdfViewer.annotationModule.hexToRgba(t.outlineColor)&&(o.markerBorderColor=this.pdfViewer.annotationModule.hexToRgba(t.outlineColor)),t.markerfillColor&&i.markerFillColor!==this.pdfViewer.annotationModule.hexToRgba(t.markerfillColor)&&(o.markerFillColor=this.pdfViewer.annotationModule.hexToRgba(t.markerfillColor)),void 0!==t.fillOpacity&&i.markerOpacity!==t.fillOpacity&&(o.markerOpacity=t.fillOpacity),void 0!==t.overlayText&&i.overlayText!==t.overlayText&&(o.overlayText=t.overlayText),t.fontFamily&&i.fontFamily!==t.fontFamily&&(i.fontFamily=t.fontFamily),void 0!==t.fontSize&&i.fontSize!==t.fontSize&&(i.fontSize=t.fontSize),t.fontColor&&i.fontColor!==this.pdfViewer.annotationModule.hexToRgba(t.fontColor)&&(i.fontColor=this.pdfViewer.annotationModule.hexToRgba(t.fontColor)),t.textAlign&&i.textAlign!==t.textAlign&&(i.textAlign=t.textAlign),void 0!==t.isRepeat&&i.isRepeat!==t.isRepeat&&(o.isRepeat=t.isRepeat),void 0!==t.useOverlayText&&i.useOverlayText!==t.useOverlayText&&(i.useOverlayText=t.useOverlayText),JSON.stringify(n)!==JSON.stringify(i)){var s=JSON.parse(JSON.stringify(i));s.id&&(s.uniqueKey=s.id),this.pdfViewer.annotationModule.addAction(i.pageIndex,null,n,"RedactionPropertyChange",null,n,s),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.editAnnotation(JSON.parse(JSON.stringify(i)))}}}},e.prototype.removeThumbnailPageSelectionTheme=function(e){!function(e){e&&(e.classList.remove("e-pv-thumbnail-selection","e-pv-thumbnail-focus"),e.classList.add("e-pv-thumbnail-selection-ring"))}(e)},e.prototype.addThumbnailPageSelectionTheme=function(e){!function(e){e&&(e.classList.remove("e-pv-thumbnail-selection-ring","e-pv-thumbnail-hover","e-pv-thumbnail-focus"),e.classList.add("e-pv-thumbnail-selection"))}(e)},e.prototype.removeFromFieldHelper=function(){var e=document.getElementById("FormField_helper_html_element");e&&e.remove()},e.prototype.DeleteKeyPressed=function(e){ct.call(this,e)},e.prototype.initiatePanning=function(){Mi.call(this)},e.prototype.initiateTextSelectMode=function(){Ti.call(this)},e.prototype.initiateTextSelection=function(){Ei.call(this)},e.prototype.checkVisibility=function(e){var t=document.querySelector(e);return t&&"none"!==t.style.display},e.prototype.enableAnnotationAddTools=function(e){zs.call(this,e)},e.prototype.applySelection=function(){js.call(this)},e.prototype.isDesignerMode=function(e){return Xe.call(this,e)},e.prototype.handleTaps=function(e,t){Ds.call(this,t,e)},e.prototype.handleTextBoxTaps=function(e){Ns.call(this,e)},e.prototype.onTextBoxDoubleTap=function(e){Os.call(this,e)},e.prototype.onSingleTap=function(e){Fs.call(this,e)},e.prototype.textMarkupAnnotation=function(e){return function(e){if(e){var t=e.classList;if(t.contains("e-pv-highlight")||t.contains("e-pv-underline")||t.contains("e-pv-strikethrough")||t.contains("e-pv-squiggly"))return!0}return!1}(e)},e.prototype.onDoubleTap=function(e){Ls.call(this,e)},e.prototype.preventTouchEvent=function(e){ha.call(this,e)},e.prototype.renderStampAnnotation=function(e){ra.call(this,e)},e.prototype.initPageDiv=function(e){ws.call(this,e)},e.prototype.renderElementsVirtualScroll=function(e){As.call(this,e)},e.prototype.renderPageElement=function(e){bs.call(this,e)},e.prototype.renderPagesVirtually=function(){return ma(this,void 0,void 0,(function(){return ga(this,(function(e){return Pi.call(this),[2]}))}))},e.prototype.initiateRenderPagesVirtually=function(e){xs.call(this,e)},e.prototype.tileRenderPage=function(e,t){Ts.call(this,e,t)},e.prototype.renderTileCanvas=function(e,t,i,n,o,s){return Es.call(this,i,e,t,n)},e.prototype.calculateImageWidth=function(e,t,i,n){return Bs.call(this,e,t,i,n)},e.prototype.renderPage=function(e,t){Xn.call(this,e,t)},e.prototype.getUniqueElements=function(e){return function(e){for(var t=[],i=0;i<e.length;i++){for(var n=!0,o=e[i],s=0;s<t.length;s++)if(t[s].AnnotName===o.AnnotName){n=!1;break}n&&t.push(o)}return t}(e)},e.prototype.compareAnnotations=function(e,t){return Ao.call(this,e,t)},e.prototype.updateAnnotationsAndState=function(e,t,i,n){return function(e,t,i,n){return!!e&&(t.shapeAnnotation=e.shapeAnnotation,t.measureShapeAnnotation=e.measureShapeAnnotation,t.textMarkupAnnotation=e.textMarkupAnnotation,t.freeTextAnnotation=e.freeTextAnnotation,t.stampAnnotations=e.stampAnnotations,t.stickyNotesAnnotation=e.stickyNotesAnnotation,t.signatureInkAnnotation=e.signatureInkAnnotation,t.redactionAnnotation=e.redactionAnnotation,i.push(n),!0)}(t,e,n,i)},e.prototype.onPageRender=function(e,t,i){oo.call(this,i,e,t)},e.prototype.convertStampAsImage=function(e){return ns.call(this,e)},e.prototype.createRequestForStamp=function(e,t){os.call(this,e,t)},e.prototype.renderAnnotations=function(e){no.call(this,e)},e.prototype.renderTextContent=function(e,t){io.call(this,e,t)},e.prototype.renderPageContainer=function(e,t,i,n){ys.call(this,e,t,i,n)},e.prototype.renderPDFInformations=function(){Yo.call(this)},e.prototype.orderPageDivElements=function(e,t){Ss.call(this,t,e)},e.prototype.renderPageCanvas=function(e,t,i,n,o){return vs.call(this,e,n,t,i,o)},e.prototype.applyElementStyles=function(e,t){Vs.call(this,e,t)},e.prototype.updateLeftPosition=function(e){return Is.call(this,e)},e.prototype.applyLeftPosition=function(e){Cs.call(this,e)},e.prototype.updatePageHeight=function(e,t){return(e-t)/e*100+"%"},e.prototype.isCommentPanelTabletMode=function(){return Li.call(this)},e.prototype.updateCommentPanelasTabletSize=function(e){e=Fi.call(this,e)},e.prototype.initiatePageViewScrollChanged=function(){Je.call(this)},e.prototype.renderCountIncrement=function(){Ms.call(this)},e.prototype.pageViewScrollChanged=function(e){ks.call(this,e)},e.prototype.renderPreviousPagesInScroll=function(e){Ke.call(this,e)},e.prototype.downloadDocument=function(e){Me.call(this,e)},e.prototype.downloadExportAnnotationJson=function(e,t){Xs.call(this,e,t)},e.prototype.downloadExportedXFdfAnnotation=function(e){Gs.call(this,e)},e.prototype.exportFormFields=function(e){this.createRequestForExportFormfields(!1,e)},e.prototype.importFormFields=function(e){this.createRequestForImportingFormfields(e)},e.prototype.createRequestForExportFormfields=function(e,t,i,n){return Ws.call(this,n,t,e,i)},e.prototype.createRequestForImportingFormfields=function(e,t){return Zs.call(this,e,t)},e.prototype.createFormfieldsJsonData=function(e){return zn.call(this,e)},e.prototype.constructJsonDownload=function(){return _o.call(this)},e.prototype.isAnnotationsExist=function(e){return function(e){return!sf.base.isNullOrUndefined(e)&&JSON.parse(e).flat(1).length>0}(e)},e.prototype.isFieldsDataExist=function(e){return!sf.base.isNullOrUndefined(e)&&0!==Object.entries(JSON.parse(e)).length},e.prototype.getAnnotationsPageList=function(){return hs.call(this)},e.prototype.getFormFieldsPageList=function(e){return Fn.call(this,e)},e.prototype.checkFormFieldCollection=function(e){return Dn.call(this,e)},e.prototype.isFreeTextAnnotationModule=function(){return Xo.call(this)},e.prototype.createRequestForDownload=function(e,t){Ro.call(this,e,t)},e.prototype.getTileCount=function(e){return Qn.call(this,e)},e.prototype.removeHyperlink=function(e){ro.call(this,e)},e.prototype.renderHyperlink=function(e,t){ao.call(this,e,t)},e.prototype.createRequestForRender=function(e){$n.call(this,e)},e.prototype.CommonOnMessage=function(e){eo.call(this,e)},e.prototype.pageRequestSent=function(e,t,i){return No.call(this,e,t,i)},e.prototype.onControlError=function(e,t,i){en.call(this,e,t,i)},e.prototype.getStoredData=function(e,t){return Gn.call(this,e,t)},e.prototype.storeWinData=function(e,t,i,n){Fo.call(this,e,i,n,t)},e.prototype.setCustomAjaxHeaders=function(e){Po.call(this,e)},e.prototype.getPinchZoomPage=function(e){return Bi.call(this,e)},e.prototype.getWindowSessionStorage=function(e,t){return window.sessionStorage.getItem(this.documentId+"_"+e+"_"+t)},e.prototype.getStoredTileImageDetails=function(e,t,i,n){return this.pageImageDetails[this.documentId+"_"+e+"_"+t+"_"+i+"_"+n+"_imageUrl"]||null},e.prototype.retrieveCurrentZoomFactor=function(){return So.call(this)},e.prototype.storeTextDetails=function(e,t,i,n,o,s){to.call(this,t,i,o,n,e,s)},e.prototype.storeImageData=function(e,t,i,n){Jn.call(this,i,n,e,t)},e.prototype.manageSessionStorage=function(e,t,i,n){Do.call(this,i,n,e,t)},e.prototype.createBlobUrl=function(e,t){return function(e,t){for(var i=atob(e),n=[],o=0;o<i.length;o+=512){for(var s=i.slice(o,o+512),a=new Array(s.length),r=0;r<s.length;r++)a[r]=s.charCodeAt(r);var l=new Uint8Array(a);n.push(l)}return new Blob(n,{type:t})}(e,t)},e.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){return(16*Math.random()|0).toString(16)}))},e.prototype.createGUID=function(){return ho.call(this)},e.prototype.isClickedOnScrollBar=function(e,t){return Ci.call(this,t,e)},e.prototype.setScrollDownValue=function(e,t){Ii.call(this,e,t)},e.prototype.disableTextSelectionMode=function(){ki.call(this)},e.prototype.getElement=function(e){return document.getElementById(this.pdfViewer.dataId+e)},e.prototype.getPageWidth=function(e){return qn.call(this,e)},e.prototype.getPageHeight=function(e){return Zn.call(this,e)},e.prototype.getPageTop=function(e){return Yn.call(this,e)},e.prototype.isAnnotationToolbarHidden=function(){return ms.call(this)},e.prototype.getTextMarkupAnnotationMode=function(){return Kn.call(this)},e.prototype.isNewFreeTextAnnotation=function(){return fs.call(this)},e.prototype.getCurrentTextMarkupAnnotation=function(){return Go.call(this)},e.prototype.getSelectTextMarkupCurrentPage=function(){return cs.call(this)},e.prototype.getAnnotationToolStatus=function(){return ds.call(this)},e.prototype.getPopupNoteVisibleStatus=function(){return us.call(this)},e.prototype.isTextMarkupAnnotationModule=function(){return this.pdfViewer.annotationModule?this.pdfViewer.annotationModule.textMarkupAnnotationModule:null},e.prototype.isShapeAnnotationModule=function(){return Jo.call(this)},e.prototype.isCalibrateAnnotationModule=function(){return Ko.call(this)},e.prototype.isStampAnnotationModule=function(){return Qo.call(this)},e.prototype.isInkAnnotationModule=function(){return $o.call(this)},e.prototype.isRedactionAnnotationModule=function(){return es.call(this)},e.prototype.isCommentAnnotationModule=function(){return ts.call(this)},e.prototype.isShapeBasedAnnotationsEnabled=function(){return is.call(this)},e.prototype.getMousePosition=function(e){return pn.call(this,e)},e.prototype.getMouseEventArgs=function(e,t,i,n){return cn.call(this,t,e,n,i)},e.prototype.findToolToActivate=function(e,t){return Qs.call(this,e,t)},e.prototype.inflate=function(e,t){return function(e,t){return e.x-=t,e.y-=t,e.width+=2*t,e.height+=2*t,e}(t,e)},e.prototype.checkResizeHandles=function(e,t,i,n,o,s){return Pn.call(this,e,t,i,n,o,s)},e.prototype.checkForResizeHandles=function(e,t,i,n,o,s){return Bn.call(this,t,e,i,n,o,s)},e.prototype.checkSignatureFormField=function(e){return En.call(this,e)},e.prototype.diagramMouseMove=function(e){rn.call(this,e)},e.prototype.updateFormFieldElementVisibility=function(e,t,i,n,o){Hn.call(this,e,t,i,o,n)},e.prototype.updateFormFieldElementStyle=function(e,t,i,n){Un.call(this,t,e,n,i)},e.prototype.checkNonEdgeShape=function(e){return function(e){if(e&&e.length>0&&e[0]&&e[0].shapeAnnotationType){var t=e[0].shapeAnnotationType;return["LineWidthArrowHead","Line","Polygon","Distance"].indexOf(t)>-1}return!1}(e)},e.prototype.updateDefaultCursor=function(e,t,i){ta.call(this,e,t,i)},e.prototype.diagramMouseLeave=function(e){dn.call(this,e)},e.prototype.diagramMouseActionHelper=function(e){ia.call(this,e)},e.prototype.setCursor=function(e,t){hn.call(this,e,t)},e.prototype.setResizerCursorType=function(){return ea.call(this)},e.prototype.getTool=function(e){return $s.call(this,e)},e.prototype.diagramMouseUp=function(e){ln.call(this,e)},e.prototype.skipPreventDefault=function(e){return Eo.call(this,e)},e.prototype.isMetaKey=function(e){return-1!==navigator.userAgent.indexOf("Mac")?e.metaKey:e.ctrlKey},e.prototype.diagramMouseDown=function(e){an.call(this,e)},e.prototype.exportAnnotationsAsObject=function(){return Ys.call(this)},e.prototype.getItemFromSessionStorage=function(e){return On.call(this,e)},e.prototype.setStyleToTextDiv=function(e,t,i,n,o,s,a,r,l){Rn.call(this,a,e,t,i,s,o,n,r,l)},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.setItemInSessionStorage=function(e,t){Ln.call(this,e,t)},e.prototype.exportFormFieldsAsObject=function(){return Nn.call(this)},e.prototype.importAnnotations=function(e,t,i){return gn.call(this,e,t,i)},e.prototype.exportAnnotations=function(e){wn.call(this,e)},e.prototype.createRequestForExportAnnotations=function(e,t,i){return _s.call(this,t,e,i)},e.prototype.updateModifiedDateToLocalDate=function(e,t){To.call(this,e,t)},e.prototype.convertUTCDateToLocalDate=function(e){return Mo.call(this,e)},e.prototype.createRequestForImportAnnotations=function(e,t,i){return qs.call(this,i,e,t)},e.prototype.openImportExportNotificationPopup=function(e){tn.call(this,e)},e.prototype.reRenderAnnotations=function(e,t){return ma(this,void 0,void 0,(function(){return ga(this,(function(i){switch(i.label){case 0:return[4,vn.call(this,e,t)];case 1:return i.sent(),[2]}}))}))},e.prototype.updateImportedAnnotationsInDocumentCollections=function(e,t){bn.call(this,t,e)},e.prototype.checkDocumentCollections=function(e,t){return t.some((function(t){return t.AnnotName===e.AnnotName}))},e.prototype.checkDocumentCollectionData=function(e,t){return Bo.call(this,t,e)},e.prototype.isCommentElement=function(){var e=document.activeElement;return!!e&&("INPUT"!==e.tagName&&(!sf.base.isNullOrUndefined(e.parentElement)&&(!sf.base.isNullOrUndefined(e.parentElement.classList)&&e.parentElement.classList.contains("e-pv-comment-sftextbox"))))},e.prototype.findImportedAnnotations=function(e,t,i){return function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===t&&(n=e[o].annotations);if(n)for(var s=0;s<n.length;s++)for(var a=0;a<i.length;a++)n[s].annotName===i[a].AnnotName&&(i.splice(a,1),a-=1);return n=null,i}(e,i,t)},e.prototype.drawPageAnnotations=function(e,t,i){kn.call(this,i,e,t)},e.prototype.checkSignatureCollections=function(e,t,i){return function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===t&&(n=e[o].annotations);if(n)for(var s=0;s<n.length;s++)for(var a=0;a<i.length;a++)n[s].signatureName===i[a].SignatureName&&(i.splice(a,1),a-=1);return n=null,i}(e,i,t)},e.prototype.checkAnnotationCollections=function(e,t,i){return function(e,t,i){for(var n=null,o=0;o<e.length;o++)e[o].pageIndex===t&&(n=e[o].annotations);if(n)for(var s=0;s<n.length;s++)for(var a=0;a<i.length;a++)n[s].annotName===i[a].AnnotName&&(i.splice(a,1),a-=1);return n=null,i}(e,i,t)},e.prototype.checkAnnotationCommentsCollections=function(e,t){return In.call(this,t,e)},e.prototype.selectAnnotationCollections=function(e){return function(e){var t=[];if(e){if(e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length)for(var i=0;i<e.textMarkupAnnotation.length;i++)t.push(e.textMarkupAnnotation[i]);if(e.shapeAnnotation&&0!==e.shapeAnnotation.length)for(i=0;i<e.shapeAnnotation.length;i++)t.push(e.shapeAnnotation[i]);if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length)for(i=0;i<e.measureShapeAnnotation.length;i++)t.push(e.measureShapeAnnotation[i]);if(e.stampAnnotations&&0!==e.stampAnnotations.length)for(i=0;i<e.stampAnnotations.length;i++)t.push(e.stampAnnotations[i]);if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(i=0;i<e.stickyNotesAnnotation.length;i++)t.push(e.stickyNotesAnnotation[i]);if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length)for(i=0;i<e.freeTextAnnotation.length;i++)t.push(e.freeTextAnnotation[i]);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length)for(i=0;i<e.signatureInkAnnotation.length;i++)t.push(e.signatureInkAnnotation[i])}return t}(e)},e.prototype.saveImportedAnnotations=function(){Sn.call(this)},e.prototype.savePageAnnotations=function(e,t){An.call(this,e,t)},e.prototype.updateDocumentAnnotationCollections=function(){xn.call(this)},e.prototype.createAnnotationJsonData=function(){return Vn.call(this)},e.prototype.combineImportedData=function(e,t){return Cn.call(this,t,e)},e.prototype.updateExportItem=function(){return ps.call(this)},e.prototype.isFreeTextAnnotation=function(e){return function(e){var t=!1;return e&&e.length>0&&(t=e.some((function(e){return"FreeText"===e.shapeAnnotationType&&"Text Box"===e.subject}))),t}(e)},e.prototype.checkImportedData=function(e,t,i){return Tn.call(this,e,t,i)},e.prototype.checkAnnotationWidth=function(e){return function(e){for(var t,i,n,o,s=0;s<e.length;s++)t?(t>e[s].x?t=e[s].x:i<e[s].x&&(i=e[s].x),n>e[s].y?n=e[s].y:o<e[s].y&&(o=e[s].y)):(t=e[s].x,i=e[s].x,n=e[s].y,o=e[s].y);return{width:i-t,height:o-n}}(e)},e.prototype.deleteAnnotations=function(){Mn.call(this)},e.prototype.createAnnotationsCollection=function(e,t){return yn.call(this,t,e)},e.prototype.addAnnotation=function(e){mn.call(this,e)},e.prototype.convertBounds=function(e,t,i){return co.call(this,e,t,i)},e.prototype.ConvertPixelToPoint=function(e){return.75*e},e.prototype.convertVertexPoints=function(e){return function(e){if(e){var t=e.x?e.x:e.X?e.X:0,i=e.y?e.y:e.Y?e.Y:0;return{X:t,Y:i,Left:t,Top:i}}return null}(e)},e.prototype.updateComments=function(e,t){return function(e,t){if(e&&t){var i={};return i.ShapeAnnotationType=e.shapeAnnotationType,i.Author=t.author,i.AnnotationSelectorSettings=e.annotationSelectorSettings,i.AnnotationSettings=e.annotationSettings,i.PageNumber=e.pageNumber,i.ModifiedDate=t.modifiedDate,i.Subject=e.subject,i.Note=t.note,i.AnnotName=t.annotName,i.Comments=t.comments,i.State=t.review.state,i.StateModel=t.review.stateModel,i.CustomData=e.customData,i.IsLock=t.isLock,i}}(e,t)},e.prototype.removeFocus=function(){var e=this.pdfViewer.element.querySelector("#"+this.pdfViewer.dataId+"_totalPage");e&&e.firstElementChild&&e.firstElementChild.firstElementChild&&e.firstElementChild.firstElementChild.blur()},e.prototype.updateDocumentEditedProperty=function(e){Lo.call(this,e)},e.prototype.fireDocumentEditedEvent=function(e){Oo.call(this,e)},e.prototype.getWindowDevicePixelRatio=function(){return e=window.devicePixelRatio,sf.base.Browser.isDevice?2:e;var e},e.prototype.getZoomRatio=function(e){return po.call(this,e)},e.prototype.importJsonForRotatedDocuments=function(e,t,i,n){return ko.call(this,e,t,i,n)},e.prototype.getRotationAngle=function(e,t){return Ue.call(this,e,t)},e.prototype.calculateVertexPoints=function(e,t,i,n){return uo.call(this,e,t,n,i)},e.prototype.setLinksInClientSide=function(e){so.call(this,e)},e.prototype.getLinkInformation=function(e,t){return lo.call(this,e)},e.prototype.getSanitizedString=function(e){return e.replace(/[\x00-\x1F\x7F]/g,(function(e){return"\\u"+e.charCodeAt(0).toString(16).padStart(4,"0")+" "}))},e.prototype.isSignaturePathData=function(e){return/^([Mm]\s*-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?(\s+[Ll]\s*-?\d+(\.\d+)?\s*,\s*-?\d+(\.\d+)?)*\s*)+$/.test(e)},e.prototype.isSignatureImageData=function(e){return/^data:image\/([a-z]+);base64,/.test(e)},e}(),ya=function(){function e(e,t){var i=this;this.textBoundsArray=[],this.characterBound=[],this.closeNotification=function(){i.notifyDialog.hide()},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.addTextLayer=function(e,t,i,n){var o;return document.getElementById(this.pdfViewer.dataId+"_textLayer_"+e)||((o=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_textLayer_"+e,className:"e-pv-text-layer"})).style.width=t+"px",o.style.height=i+"px",sf.base.Browser.isDevice&&o.classList.add("e-pv-text-selection-none"),n.appendChild(o)),this.pdfViewerBase.applyElementStyles(o,e),o},e.prototype.renderTextContents=function(e,t,i,n){var o=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+e),s=sf.base.createElement("canvas"),a=!1;if(s&&0===o.childNodes.length)for(var r=0;r<t.length;r++){var l=i[r],d=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_text_"+e+"_"+r,className:"e-pv-text"}),h=t[r];d.textContent=h.replace(/&nbsp;/g," ")," "!==t[r].replace(/  +/g," ")&&(d.style.whiteSpace="pre")," "===h&&(d.style.whiteSpace="pre"),sf.base.isNullOrUndefined(d.textContent)||" "===h||(a=this.pdfViewerBase.checkIsRtlText(d.textContent)),d.style.direction=a?"rtl":"ltr",l&&this.setStyleToTextDiv(d,l.X,l.Y,l.Bottom,l.Width,l.Height,l.Rotation),this.setTextElementProperties(d);var p=s.getContext("2d");p.font=d.style.fontSize+" "+d.style.fontFamily;var c=p.measureText(t[r].replace(/(\r\n|\n|\r)/gm,"")).width;if(l){var u=void 0;u=90===l.Rotation||270===l.Rotation?l.Height*this.pdfViewerBase.getZoomFactor()/c:l.Width*this.pdfViewerBase.getZoomFactor()/c,this.applyTextRotation(u,d,n,l.Rotation,l)}o.appendChild(d),this.resizeExcessDiv(o,d),this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection&&!this.pdfViewerBase.isTextSelectionDisabled&&"e-pdfviewer-formFields"!==d.className&&"e-pdfviewer-signatureformfields"!==d.className&&"e-pdfviewer-signatureformfields-signature"!==d.className&&d.classList.add("e-pv-cursor"),sf.base.Browser.isDevice&&d.classList.add("e-enable-text-selection")}},e.prototype.resizeTextContents=function(e,t,i,n,o){var s=this.pdfViewerBase.getElement("_textLayer_"+e),a=sf.base.createElement("canvas");if(a)for(var r=0;r<s.childNodes.length;r++){var l=void 0,d=this.pdfViewerBase.getElement("_text_"+e+"_"+r);if(sf.base.isNullOrUndefined(d))break;i&&(l=i[r])&&this.setStyleToTextDiv(d,l.X,l.Y,l.Bottom,l.Width,l.Height,l.Rotation),this.setTextElementProperties(d);var h=a.getContext("2d");h.font=d.style.fontSize+" "+d.style.fontFamily;var p=void 0;if(t){var c=t[r];c&&(p=h.measureText(c.replace(/(\r\n|\n|\r)/gm,"")).width)}else p=h.measureText(d.textContent.replace(/(\r\n|\n|\r)/gm,"")).width;if(l){var u=void 0;u=90===l.Rotation||270===l.Rotation?l.Height*this.pdfViewerBase.getZoomFactor()/p:l.Width*this.pdfViewerBase.getZoomFactor()/p,this.applyTextRotation(u,d,n,l.Rotation,l)}this.resizeExcessDiv(s,d)}else s.parentElement.removeChild(s);this.pdfViewer.textSearch&&(o||this.pdfViewer.textSearch.resizeSearchElements(e))},e.prototype.applyTextRotation=function(e,t,i,n,o){var s="scaleX("+e+")";if(0===i)0===n?(t.style.lineHeight="1",t.style.transform=s+"translate(-1px)"):90===n?(t.style.left=(o.X+o.Width)*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=o.Y*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+n+"deg) "+s):180===n?(t.style.left=(o.X+o.Width)*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=(o.Y+o.Height)*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+n+"deg) "+s):270===n?(t.style.left=o.X*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=(o.Y+o.Height)*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+n+"deg) "+s):t.style.transform=s;else if(1===i){(a=n+90)>=360&&(a-=360),0===n?t.style.transform="rotate(90deg) "+s+"translate(-1px)":90===n?(t.style.left=o.X*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=(o.Y+o.Width)*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+a+"deg) "+s):180===n?(t.style.left=(o.X-o.Height)*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=(o.Y+o.Width)*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+a+"deg) "+s):270===n?(t.style.left=(o.X-o.Height)*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=o.Y*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+a+"deg) "+s):t.style.transform="rotate(90deg) "+s}else if(2===i){(a=n+180)>=360&&(a-=360),0===n?t.style.transform="rotate(180deg) "+s:90===n?(t.style.left=(o.X-o.Width)*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=o.Y*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+a+"deg) "+s):180===n?(t.style.left=(o.X-o.Width)*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=(o.Y-o.Height)*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+a+"deg) "+s):270===n?(t.style.left=o.X*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=(o.Y-o.Height)*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+a+"deg) "+s):t.style.transform="rotate(180deg) "+s}else if(3===i){var a;(a=n+270)>=360&&(a-=360),0===n?t.style.transform="rotate(270deg) "+s:90===n?(t.style.left=o.X*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=(o.Y-o.Width)*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+a+"deg) "+s):180===n?(t.style.left=(o.X+o.Height)*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=(o.Y-o.Width)*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+a+"deg) "+s):270===n?(t.style.left=(o.X+o.Height)*this.pdfViewerBase.getZoomFactor()+"px",t.style.top=o.Y*this.pdfViewerBase.getZoomFactor()+"px",t.style.transform="rotate("+a+"deg) "+s):t.style.transform="rotate(270deg) "+s}},e.prototype.setTextElementProperties=function(e){e.style.fontFamily="serif",e.style.transformOrigin="0% 0%"},e.prototype.resizeTextContentsOnZoom=function(e){var t,i=this.pdfViewerBase.pageTextDetails[this.pdfViewerBase.getDocumentId()+"_"+e+"_textDetails"],n=[],o=[];if(i){var s=JSON.parse(i);n=s.textBounds,o=s.textContent,t=s.rotation}if(0!==n.length)this.textBoundsArray.push({pageNumber:e,textBounds:n}),this.resizeTextContents(e,o,n,t);else{var a=this.textBoundsArray.filter((function(t){return t.pageNumber===e}));a&&0!==a.length&&(n=a[0].textBounds,this.resizeTextContents(e,null,n,t))}},e.prototype.resizeExcessDiv=function(e,t){},e.prototype.clearTextLayers=function(e){var t=this.pdfViewerBase.currentPageNumber-3;t=t>0?t:0;var i=this.pdfViewerBase.currentPageNumber+1;i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]'),o=0;o<n.length;o++)if(n[o].style.display="block",this.pdfViewerBase.getMagnified()&&(this.getTextSelectionStatus()||this.getTextSearchStatus())){var s=parseInt(n[o].id.split("_textLayer_")[1],10);t+1<=s&&s<=i-1||this.removeElement(n[o],e)}else this.pdfViewerBase.getPinchZoomed(),this.removeElement(n[o],e)},e.prototype.removeElement=function(e,t){t?this.removeForeignObjects(e):sf.base.Browser.isIE?e.parentElement?e.parentElement.removeChild(e):e.parentNode&&e.parentNode.removeChild(e):e.remove()},e.prototype.removeForeignObjects=function(e){var t=e.getElementsByClassName("foreign-object");if(t)for(var i=0;i<t.length;i++)"e-pv-text-layer"===t[i].parentElement.className&&e.removeChild(t[0])},e.prototype.convertToSpan=function(e,t,i,n,o,s,a){var r=this.pdfViewerBase.getElement("_text_"+e+"_"+t),l=o.substring(i,n),d=document.createTextNode(l);if(s){var h=sf.base.createElement("span");if(h.className=s+" e-pv-text",0===this.pdfViewerBase.pageSize[e].rotation&&(h.style.lineHeight="1"),a)if(n===o.length)h.style.left="0px",h.style.top="0px";else if("rtl"===r.style.direction){var p=r.textContent;r.textContent=o.substring(n,o.length);var c=r.getBoundingClientRect();h.style.left=c.width+"px",h.style.top="0px",r.textContent=p}h.appendChild(d),r.appendChild(h)}else r.appendChild(d)},e.prototype.applySpanForSelection=function(e,t,i,n,o,s){if(this.pdfViewer.textSelectionModule)for(var a=e;a<=t;a++){var r=JSON.parse(this.pdfViewerBase.pageTextDetails[this.pdfViewerBase.documentId+"_"+a+"_textDetails"]).pageText,l=this.pdfViewerBase.checkIsRtlText(r),d=void 0,h=void 0,p=this.pdfViewerBase.getElement("_textLayer_"+a).childNodes;a===e?(d=i,h=p.length-1):a===t?(d=0,h=n):(d=0,h=p.length-1),e===t&&(d=i,h=n);for(var c=d;c<=h;c++){var u=this.pdfViewerBase.getElement("_text_"+a+"_"+c),f=void 0,m=void 0,g=void 0;if(u&&u.textContent){g=u.textContent.length;var w=u.textContent;u.textContent="",c===d?(f=a===e?o:0,m=g,this.convertToSpan(a,c,0,f,w,null,l)):c===h&&a===t?(f=0,m=s):(f=0,m=g),d===h&&e===t&&(f=o,m=s),this.convertToSpan(a,c,f,m,w,"e-pv-maintaincontent",l),c===h&&a===t&&this.convertToSpan(a,c,m,w.length,w,null,l)}}}},e.prototype.clearDivSelection=function(){for(var e=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]'),t=0;t<e.length;t++)for(var i=e[t].childNodes,n=0;n<i.length;n++){var o=i[n];if("e-pdfviewer-formFields"!==o.className&&"e-pdfviewer-signatureformfields"!==o.className&&"e-pdfviewer-signatureformfields-signature"!==o.className){var s=o.textContent;(o.childNodes.length>1||1===o.childNodes.length&&"SPAN"===o.childNodes[0].tagName)&&(o.textContent="",o.textContent=s)}}},e.prototype.setStyleToTextDiv=function(e,t,i,n,o,s,a){var r;e.style.left=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=i*this.pdfViewerBase.getZoomFactor()+"px",r=90===a||270===a?o*this.pdfViewerBase.getZoomFactor():s*this.pdfViewerBase.getZoomFactor(),e.style.height=r+"px",e.style.fontSize=r+"px"},e.prototype.getTextSelectionStatus=function(){return!!this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.isTextSelection},e.prototype.modifyTextCursor=function(e){for(var t=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]'),i=0;i<t.length;i++)for(var n=t[i].childNodes,o=0;o<n.length;o++){var s=n[o];e&&"e-pdfviewer-formFields"!==s.className&&"e-pdfviewer-signatureformfields"!==s.className&&"e-pdfviewer-signatureformfields-signature"!==s.className?s.classList.add("e-pv-cursor"):s.classList.remove("e-pv-cursor")}},e.prototype.isBackWardSelection=function(e){var t=e.anchorNode.compareDocumentPosition(e.focusNode),i=!1;return(!t&&e.anchorOffset>e.focusOffset||t===Node.DOCUMENT_POSITION_PRECEDING)&&(i=!0),i},e.prototype.getPageIndex=function(e){var t=e.parentElement;return t||(t=e.parentNode),"e-pv-text-layer"===t.className?parseInt(e.id.split("_text_")[1],10):parseInt(t.id.split("_text_")[1],10)},e.prototype.getTextIndex=function(e,t){var i=e.parentElement;return i||(i=e.parentNode),"e-pv-text-layer"===i.className?parseInt(e.id.split("_text_"+t+"_")[1],10):parseInt(i.id.split("_text_"+t+"_")[1],10)},e.prototype.getPreviousZoomFactor=function(){return this.pdfViewer.magnificationModule?this.pdfViewer.magnificationModule.previousZoomFactor:1},e.prototype.getTextSearchStatus=function(){return!!this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.isTextSearch},e.prototype.createNotificationPopup=function(e){if(!this.isMessageBoxOpen){var t=document.getElementById(this.pdfViewer.dataId+"_notification_popup_content");t&&(t.textContent=e,t.innerHTML=e),this.pdfViewer.textSearchModule&&(this.pdfViewer.textSearch.isMessagePopupOpened=!1),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenNotificationPopup",e)}},e}();function va(e){"contextmenu"!==e.type&&(e.preventDefault(),this.findMousePosition(e),this.mouseDetection=!0,this.oldX=this.mouseX,this.oldY=this.mouseY,this.newObject=[],this.drawMousePosition(e))}function ba(e){this.mouseDetection&&(this.findMousePosition(e),this.enableCreateButton(!1),this.drawMousePosition(e))}function Sa(){this.mouseDetection&&this.convertToPath(this.newObject),this.mouseDetection=!1}function Aa(e){this.mouseDetection&&(this.drawSignatureInCanvas(),this.oldX=this.mouseX,this.oldY=this.mouseY)}function xa(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_").getContext("2d");e.beginPath(),e.moveTo(this.oldX,this.oldY),e.lineTo(this.mouseX,this.mouseY),e.stroke(),e.lineWidth=2,e.arc(this.oldX,this.oldY,1,0,2*Math.PI,!0),e.closePath(),this.newObject.push(this.mouseX,this.mouseY)}function Va(e){this.movePath(e[0],e[1]),this.linePath(e[0],e[1]);for(var t=2;t<e.length;t+=2)this.linePath(e[t],e[t+1])}function Ca(e){void 0===e&&(e=!1),this.outputString="",this.newObject=[];var t=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_"),i=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox"),n=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox1"),o=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox2"),s=document.getElementById(this.pdfViewer.dataId+"_e-pv-upload-button");t&&(t.getContext("2d").clearRect(0,0,t.width,t.height),i&&i.checked&&e?(this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateSaveDrawCheckBox",!1),this.pdfViewerBase.signatureModule.saveSignatureImage()):(e||i&&!i.checked)&&this.pdfViewerBase.signatureModule.saveSignatureImage());var a=document.getElementById(this.pdfViewer.dataId+"_signatureuploadCanvas_");if(a){a.getContext("2d").clearRect(0,0,a.width,a.height);var r=document.getElementById(this.pdfViewer.dataId+"_e-pv-upload-button");r&&(r.style.visibility=""),o&&o.checked&&e?(this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateSaveUploadCheckBox",!1),this.pdfViewerBase.signatureModule.saveUploadSignature()):(e||o&&!o.checked)&&this.pdfViewerBase.signatureModule.saveUploadSignature(),this.pdfViewerBase.signatureModule.updateSignatureDialogButtons(!0,s,!0)}var l=document.getElementById(this.pdfViewer.dataId+"_font_appearance"),d=document.getElementById(this.pdfViewer.dataId+"_e-pv-Signtext-box");l&&d&&(d.value="",n&&n.checked&&e?(this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateSaveTypeCheckBox",!1),this.pdfViewerBase.signatureModule.saveTypeSignature(!1,"")):(e||n&&!n.checked)&&this.pdfViewerBase.signatureModule.saveTypeSignature(!1,"")),this.enableCreateButton(!0)}function Ia(e,t){var i,n=this.pdfViewerBase.currentSignatureAnnot,o=this.pdfViewer.annotation.createGUID();if(n){"HandWrittenSignature"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType&&(i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"HandWrittenSignature",type:"HandWrittenSignature",opacity:n.opacity,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:o}),"SignatureText"===this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType&&(i={id:n.id,bounds:{x:e,y:t,width:n.bounds.width,height:n.bounds.height},pageIndex:n.pageIndex,data:n.data,shapeAnnotationType:"SignatureText",type:"SignatureText",opacity:n.opacity,strokeColor:n.strokeColor,thickness:n.thickness,signatureName:o}),this.pdfViewer.add(i);var s=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+n.pageIndex);this.pdfViewer.renderDrawing(s,n.pageIndex),this.pdfViewerBase.signatureAdded=!0,this.pdfViewer.fireSignatureAdd(n.pageIndex,n.signatureName,n.shapeAnnotationType,n.bounds,n.opacity,n.strokeColor,n.thickness),this.storeSignatureData(n.pageIndex,i),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++}}function ka(e,t,i){for(var n,o=0;o<e.length;o++){var s=e[o];if(s){var a=s.Bounds,r=a.X,l=a.Y,d=a.Width,h=a.Height,p=s.PathData;i&&(p=s.IsSignature?s.PathData:"SignatureImage"===s.AnnotationType||"SignatureText"===s.AnnotationType?JSON.parse(JSON.stringify(s.PathData)):p.includes("command")?sf.drawings.getPathString(JSON.parse(s.PathData)):s.PathData),n="SignatureText"===s.AnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:r,y:l,width:d,height:h},pageIndex:t,data:p,fontFamily:s.FontFamily,fontSize:s.FontSize,shapeAnnotationType:"SignatureText",opacity:s.Opacity,strokeColor:s.StrokeColor,thickness:s.Thickness,signatureName:s.SignatureName}:"SignatureImage"===s.AnnotationType?{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:r,y:l,width:d,height:h},pageIndex:t,data:p,shapeAnnotationType:"SignatureImage",opacity:s.Opacity,strokeColor:s.StrokeColor,thickness:s.Thickness,signatureName:s.SignatureName}:{id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:r,y:l,width:d,height:h},pageIndex:t,data:p,shapeAnnotationType:"HandWrittenSignature",opacity:s.Opacity,strokeColor:s.StrokeColor,thickness:s.Thickness,signatureName:s.SignatureName},this.pdfViewer.add(n);var c=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+s.pageIndex);this.pdfViewer.renderDrawing(c,n.pageIndex),this.storeSignatureData(n.pageIndex,n),this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0))}}}function Ma(){this.pdfViewerBase.signatureCount++;var e,t=this.pdfViewerBase.getZoomFactor();if(this.pdfViewerBase.isAddedSignClicked){var i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n,o,s=this.pdfViewerBase.currentPageNumber-1,a=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+s),r=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:100,l=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100,d=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,h=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,p=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000";n=(parseFloat(a.style.width)/2-r/2)/t,o=(parseFloat(a.style.height)/2-l/2)/t;for(var c="",u=void 0,f=void 0,m=0;m<this.outputcollection.length;m++){var g=this.outputcollection[m];if((y=event.target)&&y.id==="sign_"+m||y&&y.id==="sign_border"+m){c=g["sign_"+m];break}}for(var w=0;w<this.signaturecollection.length;w++){var y=event.target,v=this.signaturecollection[w].image[0].id.split("_")[1];if(y&&y.id==="sign_"+v||y&&y.id==="sign_border"+v){u=this.signaturecollection[w].image[0].signatureType,f=this.signaturecollection[w].image[0].fontFamily;break}}if("HandWrittenSignature"===u){var b=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(c,!0);r=b.width?b.width:r,l=b.height?b.height:l}else r=150===r?200:this.pdfViewer.handWrittenSignatureSettings.width,l=100===l?65:this.pdfViewer.handWrittenSignatureSettings.height;e={id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:n,y:o,width:r,height:l},pageIndex:s,data:c,shapeAnnotationType:u,opacity:h,fontFamily:f,strokeColor:p,thickness:d,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=e,this.pdfViewerBase.isAddedSignClicked=!1}else this.pdfViewer.formFieldsModule.drawSignature()}function Ta(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");if(e){if(!this.pdfViewerBase.pageContainer.querySelector(".e-pv-signature-window")){var t=this.pdfViewer.dataId,i=sf.base.createElement("div",{id:t+"_signature_window",className:"e-pv-signature-window"});i.style.display="block",this.pdfViewerBase.pageContainer.appendChild(i)}e.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),e.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),e.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),e.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),e.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),e.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)),this.clearSignatureCanvas()}this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenSignaturePanel",this.pdfViewerBase.isToolbarSignClicked,!this.pdfViewerBase.isInitialField),this.drawSavedSignature()}function Ea(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_"),t=document.getElementById(this.pdfViewer.dataId+"Signature_appearance");e&&e.remove(),t&&t.remove();var i,n,o,s=sf.base.createElement("div",{id:this.pdfViewer.dataId+"Signature_appearance",className:"e-pv-signature-apperance",styles:"margin-top:30px"}),a=sf.base.createElement("canvas",{id:this.pdfViewer.dataId+"_signatureCanvas_",className:"e-pv-signature-canvas"});this.pdfViewer.element.offsetWidth>750?a.width=714:a.width=this.pdfViewer.element.offsetWidth-35,a.classList.add("e-pv-canvas-signature"),a.height=305,a.style.height="305px",a.style.border="1px dotted #bdbdbd",a.style.backgroundColor="white",a.style.boxSizing="border-box",a.style.borderRadius="2px",a.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),a.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),a.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),a.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),a.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),a.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),a.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)),s.appendChild(a),o=this.pdfViewerBase.isToolbarSignClicked&&!this.pdfViewerBase.isInitialField?this.pdfViewer.localeObj.getConstant("Save Signature"):this.pdfViewerBase.isInitialField?this.pdfViewer.localeObj.getConstant("Save Initial"):this.pdfViewer.localeObj.getConstant("Save Signature"),this.pdfViewer.hideSaveSignature||((n=document.createElement("input")).type="checkbox",n.id="checkbox",s.appendChild(n),(i=new sf.buttons.CheckBox({label:o,disabled:!1,checked:!1})).appendTo(n)),this.isSaveSignature=this.saveSignatureCheckbox(),this.isSaveSignature&&(i.checked=!0);var r=sf.base.createElement("div",{id:this.pdfViewer.dataId+"type_appearance",className:"e-pv-signature-apperance",styles:"margin-top:6px"}),l=document.createElement("input");l.type="text",l.id=this.pdfViewer.dataId+"_e-pv-Signtext-box",r.appendChild(l);var d=new sf.inputs.TextBox({placeholder:this.pdfViewer.localeObj.getConstant("Enter Signature as Name"),floatLabelType:"Auto"});d.appendTo(l);var h=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_font_appearance",className:"e-pv-font-appearance-style"});h.classList.add("e-pv-canvas-signature"),h.style.height="270px",h.style.border="1px dotted #bdbdbd",h.style.boxSizing="border-box",h.style.borderRadius="2px",h.style.backgroundColor="white",h.style.color="black",h.style.marginTop="8px",r.appendChild(h),(n=document.createElement("input")).type="checkbox",n.id="checkbox1",r.appendChild(n),(i=new sf.buttons.CheckBox({label:o,disabled:!1,checked:!1})).appendTo(n),d.addEventListener("input",this.renderSignatureText.bind(this)),this.enableCreateButton(!0);var p=sf.base.createElement("div",{id:this.pdfViewer.dataId+"Signature_tab"}),c=sf.base.createElement("div",{id:this.pdfViewer.dataId+"upload_appearance",className:"e-pv-signature-apperance",styles:"padding-top:30px"}),u=document.createElement("div");u.id=this.pdfViewer.dataId+"_e-pv-upload-button",c.appendChild(u);var f=new sf.buttons.Button({cssClass:"e-pv-sign-upload",content:this.pdfViewer.localeObj.getConstant("Browse Signature Image")});f.appendTo(u),f.element.style.position="absolute";var m=sf.base.createElement("canvas",{id:this.pdfViewer.dataId+"_signatureuploadCanvas_",className:"e-pv-signature-uploadcanvas"});this.pdfViewer.element.offsetWidth>750?m.width=714:m.width=this.pdfViewer.element.offsetWidth-35,m.classList.add("e-pv-canvas-signature"),m.height=305,m.style.height="305px",f.element.style.left=m.width/2-50+"px",f.element.style.top=parseFloat(m.style.height)/2+20+"px",m.style.border="1px dotted #bdbdbd",m.style.backgroundColor="white",m.style.boxSizing="border-box",m.style.borderRadius="2px",m.style.zIndex="0",c.appendChild(m),(n=document.createElement("input")).type="checkbox",n.id="checkbox2",c.appendChild(n),(i=new sf.buttons.CheckBox({label:o,disabled:!1,checked:!1})).appendTo(n),u.addEventListener("click",this.uploadSignatureImage.bind(this)),this.signfontStyle=[{FontName:"Helvetica"},{FontName:"Times New Roman"},{FontName:"Courier"},{FontName:"Symbol"}];var g=[];if(this.pdfViewerBase.isToolbarSignClicked&&!sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts))for(var w=0;w<4;w++)sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[w])||(this.signfontStyle[w].FontName=this.pdfViewer.handWrittenSignatureSettings.typeSignatureFonts[w]);for(var y=0;y<this.signfontStyle.length;y++)g[y]=document.createElement("div"),g[y].id="_font_signature"+y,g[y].classList.add("e-pv-font-sign");this.fontsign=g;var v=this,b=[];return b=this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?this.showHideSignatureTab(this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.displayMode,s,r,c):this.showHideSignatureTab(this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.displayMode,s,r,c):this.pdfViewerBase.isInitialField?this.showHideSignatureTab(this.pdfViewer.initialFieldSettings.initialDialogSettings.displayMode,s,r,c):this.showHideSignatureTab(this.pdfViewer.signatureFieldSettings.signatureDialogSettings.displayMode,s,r,c),this.tabObj=new sf.navigations.Tab({selected:function(e){v.handleSelectEvent(e)},items:b}),this.tabObj.appendTo(p),p&&p.lastElementChild&&(p.lastElementChild.style.overflow="hidden"),"DRAW"===b[0].header.label?this.signaturetype="Draw":"TYPE"===b[0].header.label?this.signaturetype="Type":this.signaturetype="Image",p}function Ba(){if(!this.pdfViewerBase.isToolbarSignClicked){var e=this.pdfViewerBase.isInitialField,t=!e&&this.isSaveSignature,i=e&&this.isSaveInitial;if(t||i){this.outputString=t?this.saveSignatureString:this.saveInitialDrawString;var n=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");if(n){var o=n.getContext("2d");if(o){var s=new Image;s.onload=function(){requestAnimationFrame((function(){o.drawImage(s,0,0)}))},s.src=t?this.signatureImageString:this.initialImageString}}this.updateSignatureDialogButtons(!1,null,null);var a=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox");a&&(a.checked=!0)}else this.uncheckDrawSignature(),this.updateSignatureDialogButtons(!0,null,null)}}function Pa(e){if(void 0===e&&(e=!1),!this.pdfViewerBase.isToolbarSignClicked){var t=this.pdfViewerBase.isInitialField;(this.isSaveTypeSignature||this.isSaveTypeInitial)&&(this.outputString=t?this.saveInitialTypeString:this.saveSignatureTypeString),this.isSaveTypeSignature&&!t||this.isSaveTypeInitial&&t?this.updateSignatureDialogButtons(!1,null,null):(this.uncheckTypeSignature(),this.updateSignatureDialogButtons(!0,null,null)),e&&this.bindTypeSignatureClickEvent()}}function Da(e){if(void 0===e&&(e=!1),!this.pdfViewerBase.isToolbarSignClicked){var t=this.pdfViewerBase.isInitialField,i=this.isSaveUploadSignature||this.isSaveUploadInitial,n=t?this.saveInitialUploadString:this.saveSignatureUploadString;if(i){this.outputString=n;var o=document.getElementById(this.pdfViewer.dataId+"_signatureuploadCanvas_");if(o){var s=o.getContext("2d"),a=new Image;a.onload=function(){s&&s.drawImage(a,0,0,o.width,o.height)},a.src=this.outputString}var r=document.getElementById(this.pdfViewer.dataId+"_e-pv-upload-button");!t&&this.isSaveUploadSignature||t&&this.isSaveUploadInitial?this.updateSignatureDialogButtons(!1,r,!1):(this.uncheckImageSignature(),this.updateSignatureDialogButtons(!0,r,!0))}else{this.uncheckImageSignature();r=document.getElementById(this.pdfViewer.dataId+"_e-pv-upload-button");this.updateSignatureDialogButtons(!0,r,!0)}e&&this.uploadSignatureClick()}}function Na(e){var t;if(this.pdfViewerBase.isToolbarSignClicked){this.pdfViewer.annotationModule.clearSelection(),this.isSignatureAdded=!0;var i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n=this.pdfViewerBase.currentPageNumber-1,o=this.pdfViewer.handWrittenSignatureSettings.thickness?this.pdfViewer.handWrittenSignatureSettings.thickness:1,s=this.pdfViewer.handWrittenSignatureSettings.opacity?this.pdfViewer.handWrittenSignatureSettings.opacity:1,a=this.pdfViewer.handWrittenSignatureSettings.strokeColor?this.pdfViewer.handWrittenSignatureSettings.strokeColor:"#000000",r=this.pdfViewer.formFieldsModule.updateSignatureAspectRatio(this.outputString,!0),l=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");this.saveImageString=l.toDataURL(),this.signatureImageString=this.saveImageString,t={id:"sign"+this.pdfViewerBase.signatureCount,bounds:r,pageIndex:n,data:this.outputString,shapeAnnotationType:"HandWrittenSignature",opacity:s,strokeColor:a,thickness:o,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=t,(d=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox"))&&d.checked&&this.addSignatureCollection(),this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else{this.isSignatureAdded=!0;var d=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox"),h=!1;if(e&&("Image"===e?(this.imageAddSignature(),h=!0,this.outputString=""):"Type"===e&&(this.typeAddSignature(),h=!0,this.outputString="")),!h){l=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");this.saveImageString=l.toDataURL();var p=this.pdfViewerBase.isInitialField;d&&d.checked?(this.handleAddSignature(!0,this.outputString,p),this.checkSaveFiledSign(p,!0)):(this.handleAddSignature(!1,"",p),this.checkSaveFiledSign(p,!1)),p?this.initialImageString=this.saveImageString:this.signatureImageString=this.saveImageString,this.pdfViewer.formFieldsModule.drawSignature(null,null,this.pdfViewerBase.currentTarget,null),h=!0}}}function Fa(){"Draw"===this.signaturetype?this.addSignature():"Type"===this.signaturetype?this.typeAddSignature():this.imageAddSignature()}function La(){if(this.pdfViewerBase.isToolbarSignClicked){var e,t=this.pdfViewerBase.getZoomFactor(),i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n,o,s=this.pdfViewerBase.currentPageNumber-1,a=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+s);n=(parseFloat(a.style.width)/2-100)/t,o=(parseFloat(a.style.height)/2-32.5)/t;var r=this.pdfViewerBase.getZoomFactor();this.signtypevalue||this.updateSignatureTypeValue(!0);var l=this.signtypevalue;e={id:"Typesign"+this.pdfViewerBase.signatureCount,bounds:{left:n/r,top:o/r,x:n/r,y:o/r,width:200,height:65},pageIndex:s,dynamicText:l,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:"SignatureText",fontFamily:this.fontName,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=e;var d=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox");d&&d.checked&&this.addSignatureCollection(),this.signtypevalue="",this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else{var h=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox1"),p=!1;if(!p){this.updateSignatureTypeValue();var c=this.pdfViewerBase.isInitialField;h&&h.checked?this.handleTypeAddSignature(!0,this.textValue,!0,c):this.handleTypeAddSignature(!1,"",!1,c),this.pdfViewer.formFieldsModule.drawSignature("Type","",this.pdfViewerBase.currentTarget),p=!0,this.hideSignaturePanel()}}}function Oa(){if(this.pdfViewerBase.isToolbarSignClicked){var e,t=this.pdfViewerBase.getZoomFactor(),i=this.pdfViewer.annotation.createGUID();this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.isSignatureAdded=!0;var n,o,s=this.pdfViewerBase.currentPageNumber-1,a=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+s);n=(parseFloat(a.style.width)/2-100)/t,o=(parseFloat(a.style.height)/2-32.5)/t;var r=this.pdfViewerBase.getZoomFactor(),l=this.signtypevalue;e={id:"Typesign"+this.pdfViewerBase.signatureCount,bounds:{left:n/r,top:o/r,x:n/r,y:o/r,width:200,height:65},pageIndex:s,dynamicText:l,data:this.pdfViewerBase.signatureModule.outputString,shapeAnnotationType:"SignatureImage",fontFamily:this.fontName,signatureName:i},this.pdfViewerBase.currentSignatureAnnot=e;var d=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox");d&&d.checked&&this.addSignatureCollection(),this.hideSignaturePanel(),this.pdfViewerBase.isToolbarSignClicked=!1}else{var h=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox2"),p=!1;if(!p){var c=this.pdfViewerBase.isInitialField;h&&h.checked?this.handleImageAddSignature(!0,this.outputString,!0,c):this.handleImageAddSignature(!1,"",!1,c),this.pdfViewer.formFieldsModule.drawSignature("Image","",this.pdfViewerBase.currentTarget),p=!0,this.hideSignaturePanel()}}}function Ra(e,t){var i,n=-1,o=-1,s=-1,a=-1,r=sf.drawings.processPathData(this.outputString),l=document.createElement("canvas"),d=l.getContext("2d"),h=this.pdfViewerBase.currentSignatureAnnot.shapeAnnotationType;if("HandWrittenSignature"===h){if(0!==r.length){for(var p=0;p<r.length;p++){var c=r[p];if(-1===n)n=c.x,s=c.x,o=c.y,a=c.y;else n>=(b=c.x)&&(n=b),o>=(S=c.y)&&(o=S),s<=b&&(s=b),a<=S&&(a=S)}var u=s-n,f=a-o,m=u/100,g=f/100,w=0,y=0;e?(l.width=t.currentWidth,l.height=t.currentHeight,m=u/e.width,g=f/e.height,w=e.x-t.currentLeft,y=e.y-t.currentTop):(l.width=100,l.height=100),d.beginPath();for(var v=0;v<r.length;v++){var b=((c=r[v]).x-n)/m+w,S=(c.y-o)/g+y;"M"===c.command?d.moveTo(b,S):"L"===c.command&&d.lineTo(b,S)}d.stroke(),d.closePath(),i=l.toDataURL()}}else i=this.outputString;if(e)this.saveImageString=i;else{var A={};A["sign_"+this.pdfViewerBase.imageCount]=this.outputString,this.outputcollection.push(A);var x=[];x.push({id:"sign_"+this.pdfViewerBase.imageCount,imageData:i,signatureType:h,fontFamily:this.pdfViewerBase.currentSignatureAnnot.fontFamily}),this.signaturecollection.push({image:x,isInitial:this.pdfViewerBase.isInitialField}),this.pdfViewerBase.imageCount++}}function za(e,t,i){i?(this.isSaveInitial=e,this.saveInitialDrawString=t):(this.isSaveSignature=e,this.saveSignatureString=t)}function Ha(e,t,i,n){n?(this.isSaveInitial=e,this.saveInitialTypeString=t,this.isSaveTypeInitial=i):(this.isSaveSignature=e,this.saveSignatureTypeString=t,this.isSaveTypeSignature=i)}function Ua(e,t,i,n){n?(this.isSaveInitial=e,this.saveInitialUploadString=t,this.isSaveUploadInitial=i):(this.isSaveSignature=e,this.saveSignatureUploadString=t,this.isSaveUploadSignature=i)}function ja(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox"),t=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_"),i=this.pdfViewerBase.isInitialField;e&&e.checked&&""!==this.outputString?this.handleSaveSignatureImage(t,i):(this.uncheckDrawSignature(),this.handleClearSignatureImage(i))}function _a(e,t){e&&(this.saveImageString=e.toDataURL()),t?(this.isSaveInitial=!0,this.saveInitialDrawString=this.outputString,this.initialImageString=this.saveImageString):(this.isSaveSignature=!0,this.saveSignatureString=this.outputString,this.signatureImageString=this.saveImageString),this.outputString=""}function Wa(e){this.isSaveSignature&&!e?(this.isSaveSignature=!1,this.saveSignatureString=this.saveImageString=this.signatureImageString=""):this.isSaveInitial&&e&&(this.isSaveInitial=!1,this.saveInitialDrawString=this.saveImageString=this.initialImageString=""),this.outputString=""}function qa(e,t){void 0===e&&(e=!1),void 0===t&&(t="");var i=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox1");this.textValue=e?t:"";var n=this.pdfViewerBase.isInitialField;i&&i.checked?(t&&this.updateSignatureTypeValue(!0),""!==this.textValue?this.handleSaveClearSignatureType(!0,this.textValue,n):(this.uncheckTypeSignature(),this.handleSaveClearSignatureType(!1,"",n))):this.handleSaveClearSignatureType(!1,"",n)}function Za(e,t,i){i?(this.isSaveTypeInitial=e,this.saveInitialTypeString=this.textValue=t):(this.isSaveTypeSignature=e,this.saveSignatureTypeString=this.textValue=t)}function Ya(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox2"),t=this.pdfViewerBase.isInitialField;e&&e.checked&&""!==this.outputString?this.handleSaveClearSignatureUpload(!0,this.outputString,t):(this.uncheckImageSignature(),this.handleSaveClearSignatureUpload(!1,"",t))}function Xa(e,t,i){i?(this.isSaveUploadInitial=e,this.saveInitialUploadString=t):(this.isSaveUploadSignature=e,this.saveSignatureUploadString=t),this.outputString=""}function Ga(){var e=null;e=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign");for(var t=[],i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++){if(this.pdfViewer.isSignatureEditable){var l=this.pdfViewer.handWrittenSignatureSettings,d=this.pdfViewer.annotationSettings,h="Guest"!==l.author?l.author:d.author?d.author:"Guest";a.annotations[r].author=h}var p=a.annotations[r].strokeColor;if(a.annotations[r].strokeColor=JSON.stringify(this.getRgbCode(p)),a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex)),"HandWrittenSignature"===a.annotations[r].shapeAnnotationType){var c=sf.drawings.processPathData(a.annotations[r].data),u=sf.drawings.splitArrayCollection(c);a.annotations[r].data=JSON.stringify(u)}else if("SignatureText"!==a.annotations[r].shapeAnnotationType||this.checkDefaultFont(a.annotations[r].fontFamily))a.annotations[r].data=JSON.stringify(a.annotations[r].data);else{var f=sf.base.createElement("canvas");f.width=150,f.height=2*a.annotations[r].fontSize;var m=f.getContext("2d"),g=f.width/2,w=f.height/2-10;m.textAlign="center",m.font=a.annotations[r].fontSize+"px "+a.annotations[r].fontFamily,m.fillText(a.annotations[r].data,g,w),a.annotations[r].data=JSON.stringify(f.toDataURL("image/png")),a.annotations[r].shapeAnnotationType="SignatureImage"}}s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)}function Ja(){for(var e=0;e<4;e++){var t=document.querySelector("#"+this.pdfViewer.dataId+"_font_signature"+e);t&&t.addEventListener("click",this.typeSignatureclicked.bind(this))}}function Ka(e){void 0===e&&(e=!1);var t=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");t&&(t.addEventListener("mousedown",this.signaturePanelMouseDown.bind(this)),t.addEventListener("mousemove",this.signaturePanelMouseMove.bind(this)),t.addEventListener("mouseup",this.signaturePanelMouseUp.bind(this)),t.addEventListener("mouseleave",this.signaturePanelMouseUp.bind(this)),t.addEventListener("touchstart",this.signaturePanelMouseDown.bind(this)),t.addEventListener("touchmove",this.signaturePanelMouseMove.bind(this)),t.addEventListener("touchend",this.signaturePanelMouseUp.bind(this)));var i=document.querySelector(".e-control.e-btn.e-lib.e-dlg-closeicon-btn.e-flat.e-pv-signature-dialog-blazor-height.e-icon-btn");i&&i.focus(),this.setSignatureCanvasWidth(),e&&this.drawSavedSignature()}function Qa(e,t,i,n){var o=document.getElementById(this.pdfViewer.element.id+e);if(o){var s=o.clientWidth,a=document.getElementById(this.pdfViewer.element.id+t);if(a&&(a.width=s,a.style.width=s+"px"),"_type_appearance"===e&&n&&n.length>0&&this.updateCanvasSize(),i){var r=document.getElementById(this.pdfViewer.element.id+i);r&&(r.style.left=(a.width-r.clientWidth)/2+"px",r.style.top=(a.height-r.clientHeight)/2+"px")}}}function $a(e){var t=e.target;if(t){for(var i=0;i<4;i++){var n=document.querySelector("#"+this.pdfViewer.dataId+"_font_signature"+i);n&&(n.style.borderColor="",n.classList.remove("e-pv-selected-signature-font"),n.classList.remove("e-pv-selected-fontdiv"))}t.classList.add("e-pv-selected-fontdiv"),t.style.borderColor="red",this.outputString=t.textContent;var o=window.getComputedStyle(t);try{this.fontName=JSON.parse(o.fontFamily)}catch(e){this.fontName=o.fontFamily}this.enableCreateButton(!1)}}function er(){for(var e=document.getElementById(this.pdfViewer.dataId+"_font_appearance"),t=document.getElementById(this.pdfViewer.dataId+"_e-pv-Signtext-box"),i=0;i<this.signfontStyle.length;i++)this.fontsign[i].innerHTML=t.value,this.fontsign[i].style.fontFamily=this.signfontStyle[i].FontName,"Helvetica"===this.signfontStyle[i].FontName&&(this.fontsign[i].style.borderColor="red",this.fontsign[i].classList.add("e-pv-selected-fontdiv")),e.appendChild(this.fontsign[i]);for(i=0;i<this.signfontStyle.length;i++){document.getElementById("_font_signature"+i).addEventListener("click",this.typeSignatureclick.bind(this))}this.enableCreateButton(!1),this.enableClearbutton(!1),this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize()}function tr(){var e=event.target;document.getElementsByClassName("e-pv-createbtn")[0].disabled=!1;for(var t=0;t<4;t++){var i=document.getElementById("_font_signature"+t);i&&(i.style.borderColor="")}e.style.borderColor="red",this.outputString=e.textContent;try{this.fontName=JSON.parse(e.style.fontFamily)}catch(t){this.fontName=e.style.fontFamily}}function ir(e){var t=document.querySelectorAll(".e-pv-font-sign");if(t)for(var i=0;i<t.length;i++){var n=t[i],o=window.getComputedStyle(n),s=o.borderColor;if(t[i]&&"red"===s||"rgb(255, 0, 0)"===s){e?(this.signtypevalue=t[i].textContent,this.outputString=this.textValue=t[i].textContent):this.outputString=this.textValue=t[i].textContent;try{this.fontName=JSON.parse(o.fontFamily)}catch(e){this.fontName=o.fontFamily}}}}function nr(e){var t=document.getElementById("checkbox");if(t&&t.checked){if(0===e.previousIndex&&""!==this.outputString){this.isSaveSignature=!0,this.saveSignatureString=this.outputString;var i=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");this.saveImageString=i.toDataURL(),this.signatureImageString=this.saveImageString}}else this.isSaveSignature&&(this.isSaveSignature=!1,this.saveSignatureString="",this.saveImageString="",this.signatureImageString=""),this.clearSignatureCanvas();if("draw"==="".toLocaleLowerCase()){this.signaturetype="Draw",this.isSaveSignature&&this.enableCreateButton(!1);var n=document.getElementById("checkbox");this.hideSignatureCheckbox(n)}else if("type"==="".toLocaleLowerCase()){this.outputString="",this.signaturetype="Type",this.enableCreateButton(!0);var o=document.getElementById("checkbox1");this.hideSignatureCheckbox(o)}else if("upload"==="".toLocaleLowerCase()){this.signaturetype="Image",this.enableCreateButton(!0);var s=document.getElementById("checkbox2");this.hideSignatureCheckbox(s)}this.pdfViewer.element.offsetWidth<750&&this.updateCanvasSize()}function or(e){this.pdfViewerBase.isToolbarSignClicked?this.pdfViewerBase.isInitialField?this.pdfViewer.handWrittenSignatureSettings.initialDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewer.handWrittenSignatureSettings.signatureDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewerBase.isInitialField?this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e):this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature&&this.hideCheckboxParent(e)}function sr(){return!this.pdfViewerBase.isToolbarSignClicked&&(this.pdfViewerBase.isInitialField?!this.pdfViewer.initialFieldSettings.initialDialogSettings.hideSaveSignature&&this.isInitialFiledSaveSignature:!this.pdfViewer.signatureFieldSettings.signatureDialogSettings.hideSaveSignature&&this.isSignatureFieldsSaveSignature)}function ar(){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){var e=document.getElementById(this.pdfViewer.dataId+"_signElement"),t=document.getElementById(this.pdfViewer.dataId+"_e-pv-sign-upload");if(null!==e&&null!==t){t.addEventListener("click",(function(){e.click()}))}}}function rr(){var e=document.getElementById(this.pdfViewer.dataId+"_signElement");e&&e.click()}function lr(){var e=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_signElement",attrs:{type:"file"}});e.setAttribute("accept","image/jpg,image/jpeg,image/png"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.visibility="hidden",document.body.appendChild(e),e.addEventListener("change",this.addStampImage)}function dr(e){var t=this,i=e.target.files;if(null!==e.target.files[0]){var n=i[0];if("image"===n.type.split("/")[0]){var o=new FileReader;o.onload=function(e){var i=document.getElementById(t.pdfViewer.dataId+"_signatureuploadCanvas_"),n=i.getContext("2d"),o=new Image,s=t;o.onload=function(){document.getElementById(t.pdfViewer.dataId+"_e-pv-upload-button").style.visibility="hidden",n.drawImage(o,0,0,i.width,i.height),s.enableCreateButton(!1),s.outputString=o.src},o.src=e.currentTarget.result,s.outputString=e.currentTarget.result},o.readAsDataURL(n)}}e.target.value="",e.currentTarget.value=""}function hr(){!0===this.isSignatureAdded&&(this.isSignatureAdded=!1,sf.base.Browser.isDevice&&this.pdfViewer.annotation.ShowToastMessage("HandWrittenSignature")),this.pdfViewerBase.currentTarget&&(this.pdfViewerBase.drawSignatureWithTool=!0),this.clearSignatureCanvas(),this.pdfViewerBase.isToolbarSignClicked=!1,this.pdfViewerBase.drawSignatureWithTool=!1}function pr(e,t){var i=null;if(i=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign")){var n=JSON.parse(i);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sign");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",s)}}function cr(e,t){var i,n=null;if(n=this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]:window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign")){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[s]?o[s].annotations:t}else i=t;return i}function ur(e,t){var i=this.checkSignatureCollection(e),n=u(e);n.annotationId=e.signatureName,n.pageNumber=t,delete n.annotName,e.id&&(n.uniqueKey=e.id,delete n.id),i.isExisting?this.pdfViewer.signatureCollection.splice(i.position,0,n):this.pdfViewer.signatureCollection.push(n)}function fr(e,t,i,n){this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,s=this.getAnnotations(t,null);if(null!=s&&i){for(var a=0;a<s.length;a++)if(i.id===s[a].id){if("bounds"===e)s[a].bounds={left:i.wrapper.bounds.left,top:i.wrapper.bounds.top,width:i.bounds.width,height:i.bounds.height},s[a].fontSize=i.fontSize;else if("stroke"===e)s[a].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)s[a].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)s[a].thickness=i.wrapper.children[0].style.strokeWidth;else if("delete"===e){this.updateSignatureCollection(s[a]),o=s.splice(a,1)[0];break}if(e&&"delete"!==e&&this.storeSignatureCollections(s[a],t),n){s[a].opacity=i.wrapper.children[0].style.opacity,s[a].strokeColor=i.wrapper.children[0].style.strokeColor,s[a].thickness=i.wrapper.children[0].style.strokeWidth,this.storeSignatureCollections(s[a],t);break}}this.manageAnnotations(s,t)}return o}function mr(e,t){this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Addition","",t,t),this.pdfViewerBase.fireDocumentEditedEvent("AnnotationAdded");var i,n=t.bounds.left?t.bounds.left:t.bounds.x,o=t.bounds.top?t.bounds.top:t.bounds.y;t.wrapper&&t.wrapper.bounds&&(n=t.wrapper.bounds.left,o=t.wrapper.bounds.top),i={id:t.id,bounds:{left:n,top:o,width:t.bounds.width,height:t.bounds.height},shapeAnnotationType:t.shapeAnnotationType,opacity:t.opacity,thickness:t.thickness,strokeColor:t.strokeColor,pageIndex:t.pageIndex,data:t.data,fontSize:t.fontSize,fontFamily:t.fontFamily,signatureName:t.signatureName},Math.round(JSON.stringify(window.sessionStorage).length/1024)+Math.round(JSON.stringify(i).length/1024)>4500&&(this.pdfViewerBase.isStorageExceed=!0,this.pdfViewer.annotationModule.clearAnnotationStorage());var s=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sign");if(s){this.storeSignatureCollections(i,e);var a=JSON.parse(s);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sign");var r=this.pdfViewer.annotationModule.getPageCollection(a,e);if(a[r])a[r].annotations.push(i),a[r].annotations.indexOf(i);else{var l={pageIndex:e,annotations:[]};l.annotations.push(i),l.annotations.indexOf(i),a.push(l)}p=JSON.stringify(a);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=p:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",p)}else{this.storeSignatureCollections(i,e);var d={pageIndex:e,annotations:[]};d.annotations.push(i),d.annotations.indexOf(i);var h=[];h.push(d);var p=JSON.stringify(h);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sign"]=p:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sign",p)}}function gr(e){if(-1!==e.type.indexOf("touch")){var t=(e=e).target.getBoundingClientRect();this.mouseX=e.touches[0].pageX-t.left,this.mouseY=e.touches[0].pageY-t.top}else e=e,this.mouseX=e.offsetX,this.mouseY=e.offsetY}function wr(e){var t=2,i=document.querySelector(".e-dlg-content");if(i){var n=getComputedStyle(i);t=t+parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10)}e&&this.signatureDialog&&this.signatureDialog.visible&&(this.pdfViewer.element.offsetWidth>750?(e.width=714,e.style.width="714px"):(e.width=this.pdfViewer.element.offsetWidth-t,e.style.width=e.width+"px"));var o=document.getElementsByClassName("e-pv-font-sign");if(e&&o&&o.length>0)for(var s=0;s<o.length;s++){o[s].style.width=e.width/2-50+"px"}}var yr=function(){function e(e,t){var i=this;this.newObject=[],this.outputString="",this.signaturecollection=[],this.outputcollection=[],this.fontsign=[],this.signfontStyle=[],this.isSaveSignature=!1,this.isSaveInitial=!1,this.isSaveTypeSignature=!1,this.isSaveTypeInitial=!1,this.isSaveUploadSignature=!1,this.isSaveUploadInitial=!1,this.isInitialFiledSaveSignature=!1,this.isSignatureFieldsSaveSignature=!1,this.isSignatureAdded=!1,this.saveSignatureString="",this.saveInitialDrawString="",this.saveImageString="",this.signatureImageString="",this.initialImageString="",this.textValue="",this.saveSignatureTypeString="",this.saveInitialTypeString="",this.saveInitialUploadString="",this.saveSignatureUploadString="",this.maxSaveLimit=5,this.addStampImage=function(e){dr.call(i,e)},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createSignaturePanel=function(){Ta.call(this)},e.prototype.updateSignatureDialogButtons=function(e,t,i){this.enableCreateButton(e),this.enableClearbutton(e),t&&(t.children[0].style.display=i?"block":"none")},e.prototype.drawSavedSignature=function(){Ba.call(this)},e.prototype.drawSavedTypeSignature=function(e){void 0===e&&(e=!1),Pa.call(this,e)},e.prototype.drawSavedImageSignature=function(e){void 0===e&&(e=!1),Da.call(this,e)},e.prototype.uncheckDrawSignature=function(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox");e&&e.checked&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateSaveDrawCheckBox",!1)},e.prototype.uncheckTypeSignature=function(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox1");e&&e.checked&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateSaveTypeCheckBox",!1)},e.prototype.uncheckImageSignature=function(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCheckBox2");e&&e.checked&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateSaveUploadCheckBox",!1)},e.prototype.hideSignatureCheckbox=function(e){or.call(this,e)},e.prototype.saveSignatureCheckbox=function(){return sr.call(this)},e.prototype.hideCheckboxParent=function(e){e&&(e.parentElement.style.display="none")},e.prototype.saveSignatureImage=function(){ja.call(this)},e.prototype.handleSaveSignatureImage=function(e,t){_a.call(this,e,t)},e.prototype.handleClearSignatureImage=function(e){Wa.call(this,e)},e.prototype.saveTypeSignature=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=""),qa.call(this,e,t)},e.prototype.handleSaveClearSignatureType=function(e,t,i){Za.call(this,e,t,i)},e.prototype.saveUploadSignature=function(){Ya.call(this)},e.prototype.handleSaveClearSignatureUpload=function(e,t,i){Xa.call(this,e,t,i)},e.prototype.addSignature=function(e){Na.call(this,e)},e.prototype.handleAddSignature=function(e,t,i){za.call(this,e,t,i)},e.prototype.checkSaveFiledSign=function(e,t){e?this.isInitialFiledSaveSignature=t:this.isSignatureFieldsSaveSignature=t},e.prototype.addSignatureInPage=function(){Fa.call(this)},e.prototype.typeAddSignature=function(){La.call(this)},e.prototype.handleTypeAddSignature=function(e,t,i,n){Ha.call(this,e,t,i,n)},e.prototype.imageAddSignature=function(){Oa.call(this)},e.prototype.handleImageAddSignature=function(e,t,i,n){Ua.call(this,e,t,i,n)},e.prototype.updateSignatureTypeValue=function(e){ir.call(this,e)},e.prototype.hideSignaturePanel=function(){this.signatureDialog&&this.signatureDialog.hide()},e.prototype.bindTypeSignatureClickEvent=function(){Ja.call(this)},e.prototype.bindDrawSignatureClickEvent=function(e){void 0===e&&(e=!1),Ka.call(this,e)},e.prototype.setSignatureCanvasWidth=function(e){this.setElementProperties("_Signature_appearance","_signatureCanvas_"),this.setElementProperties("upload_appearance","_signatureuploadCanvas_","_e-pv-sign-upload"),this.setElementProperties("_type_appearance","_font_appearance",null,e)},e.prototype.setElementProperties=function(e,t,i,n){Qa.call(this,e,t,i,n)},e.prototype.typeSignatureclicked=function(e){$a.call(this,e)},e.prototype.createSignatureCanvas=function(){return Ea.call(this)},e.prototype.handleSelectEvent=function(e){nr.call(this,e)},e.prototype.showHideSignatureTab=function(e,t,i,n){var o=[];return e&Ot.Draw&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Draw-hand Signature"),label:"DRAW"},content:t}),e&Ot.Text&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Type Signature"),label:"TYPE"},content:i}),e&Ot.Upload&&o.push({header:{text:this.pdfViewer.localeObj.getConstant("Upload Signature"),label:"UPLOAD"},content:n}),o},e.prototype.createSignatureFileElement=function(){lr.call(this)},e.prototype.uploadSignatureClick=function(){ar.call(this)},e.prototype.uploadSignatureImage=function(){rr.call(this)},e.prototype.renderSignatureText=function(){er.call(this)},e.prototype.typeSignatureclick=function(){tr.call(this)},e.prototype.addSignatureCollection=function(e,t){Ra.call(this,e,t)},e.prototype.getSaveLimit=function(e){return e>this.maxSaveLimit?e=this.maxSaveLimit:e<1&&(e=1),e},e.prototype.RenderSavedSignature=function(){Ma.call(this)},e.prototype.updateCanvasSize=function(){var e=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");this.setTabItemWidth(e);var t=document.getElementById(this.pdfViewer.dataId+"_signatureuploadCanvas_");this.setTabItemWidth(t);var i=document.getElementById(this.pdfViewer.dataId+"_font_appearance");this.setTabItemWidth(i)},e.prototype.setTabItemWidth=function(e){wr.call(this,e)},e.prototype.signaturePanelMouseDown=function(e){va.call(this,e)},e.prototype.enableCreateButton=function(e){var t=document.getElementsByClassName("e-pv-createbtn")[0];t&&(t.disabled=e),this.enableClearbutton(e)},e.prototype.enableClearbutton=function(e){var t=document.getElementsByClassName("e-pv-clearbtn")[0];t&&(t.disabled=e)},e.prototype.signaturePanelMouseMove=function(e){ba.call(this,e)},e.prototype.findMousePosition=function(e){gr.call(this,e)},e.prototype.drawMousePosition=function(e){Aa.call(this,e)},e.prototype.drawSignatureInCanvas=function(){xa.call(this)},e.prototype.signaturePanelMouseUp=function(){Sa.call(this)},e.prototype.convertToPath=function(e){Va.call(this,e)},e.prototype.linePath=function(e,t){this.outputString+="L"+e+","+t+" "},e.prototype.movePath=function(e,t){this.outputString+="M"+e+","+t+" "},e.prototype.clearSignatureCanvas=function(e){void 0===e&&(e=!1),Ca.call(this,e)},e.prototype.closeSignaturePanel=function(){hr.call(this)},e.prototype.saveSignature=function(){return Ga.call(this)},e.prototype.checkDefaultFont=function(e){return"Helvetica"===e||"Times New Roman"===e||"Courier"===e||"Symbol"===e},e.prototype.getRgbCode=function(e){e.match(/#([a-z0-9]+)/gi)||e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(e=this.pdfViewer.nameToHash(e));var t=e.split(",");return sf.base.isNullOrUndefined(t[1])&&(t=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split(",")),{r:parseInt(t[0].split("(")[1],10),g:parseInt(t[1],10),b:parseInt(t[2],10),a:parseInt(t[3],10)}},e.prototype.renderSignature=function(e,t){Ia.call(this,e,t)},e.prototype.renderExistingSignature=function(e,t,i){ka.call(this,e,t,i)},e.prototype.storeSignatureData=function(e,t){mr.call(this,e,t)},e.prototype.modifySignatureCollection=function(e,t,i,n){return fr.call(this,e,t,i,n)},e.prototype.storeSignatureCollections=function(e,t){ur.call(this,e,t)},e.prototype.checkSignatureCollection=function(e){var t=this.pdfViewer.signatureCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.signatureName)return this.pdfViewer.signatureCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}},e.prototype.updateSignatureCollection=function(e){var t=this.pdfViewer.signatureCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.signatureName){this.pdfViewer.signatureCollection.splice(i,1);break}},e.prototype.addInCollection=function(e,t){if(t){this.storeSignatureCollections(t,e);var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)}},e.prototype.getAnnotations=function(e,t){return cr.call(this,e,t)},e.prototype.manageAnnotations=function(e,t){pr.call(this,e,t)},e.prototype.showSignatureDialog=function(e){e&&this.createSignaturePanel()},e.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.showSignatureDialog(!0)},e.prototype.setInitialMode=function(){this.pdfViewerBase.isToolbarSignClicked=!0,this.pdfViewerBase.isInitialField=!0,this.showSignatureDialog(!0)},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.updateSignatureCollections=function(e,t,i){return function(e,t,i){if(e){var n=e.Bounds,o=n.X,s=n.Y,a=n.Width,r=n.Height,l=e.PathData;return i&&(l=sf.drawings.getPathString(JSON.parse(e.PathData))),{id:"sign"+e.SignatureName,bounds:{x:o,y:s,width:a,height:r},pageIndex:t,data:l,shapeAnnotationType:"HandWrittenSignature",opacity:e.Opacity,strokeColor:e.StrokeColor,thickness:e.Thickness,signatureName:e.SignatureName}}}(e,t,i)},e.prototype.destroy=function(){window.sessionStorage.removeItem("_annotations_sign");var e=document.getElementById(this.pdfViewer.dataId+"_signElement");e&&(e.removeEventListener("change",this.addStampImage),e.parentElement&&e.parentElement.removeChild(e)),this.signatureDialog&&this.signatureDialog.destroy()},e}();function vr(e,t,i,n){var o=function(e,t){e.forEach((function(e){void 0!==t.top&&(e.style.top=t.top),void 0!==t.height&&(e.style.height=t.height)}))},s=i.element.querySelector(".e-pv-annotation-toolbar"),a=i.element.querySelector(".e-pv-formdesigner-toolbar"),r=!1,l=i.element.querySelector(".e-pv-blazor-redaction-toolbar");l&&(0!==l.getBoundingClientRect().height&&(r=!0));var d=t?s:a;d=t?s:a,r&&(d=l);var h=xr(d,n),p=!0;if(0===h&&0!==xr(t?a:s,n)&&(p=!1),p){var c=i.element.querySelector(".e-pv-sidebar-toolbar-splitter"),u=xr(i.element.querySelector(".e-pv-toolbar"),n),f=n.navigationPane.sideBarToolbar,m=[f,n.navigationPane.sideBarContentContainer,c,n.navigationPane.commentPanelContainer,n.navigationPane.commentPanelResizer];i.enableToolbar||(u=0);var g=u+h,w=Sr(i,g)+"px",y="";if(e)o(m,{top:g+"px",height:y=Ar(g,i)}),n.viewerContainer.style.height=w;else if(y=Ar(u,i),i.enableToolbar?o(m,{top:u+"px",height:y}):o(m,{top:"1px",height:"100%"}),n.viewerContainer.style.height=w,"0px"===n.viewerContainer.style.height){var v=parseInt(i.element.style.height,10)-parseInt(f.style.top,10)+"px";n.viewerContainer.style.height=v}}}function br(e){try{return e.getBoundingClientRect().height}catch(e){return 0}}function Sr(e,t){return br(e.element)-t}function Ar(e,t){var i=t.element.getBoundingClientRect().height;return 0!==i?i-e+"px":""}function xr(e,t){try{var i=0;return e&&0===(i=e.getBoundingClientRect().height)&&e===t.getElement("_toolbarContainer")&&(i=parseFloat(window.getComputedStyle(e).height)+1),i}catch(e){return 0}}function Vr(e,t){return e+t}function Cr(e){if(e.includes("rgba")){var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);if(!t)return e;var i=parseInt(t[1],10),n=parseInt(t[2],10),o=parseInt(t[3],10),s=void 0!==t[4]?parseFloat(t[4]):1;s>1&&(s=Math.min(s/255,1));var a=function(e){var t=e.toString(16);return 1===t.length?"0"+t:t};return"#"+a(i)+a(n)+a(o)+a(Math.round(255*s))}return e}function Ir(e){if(!e)return{r:0,g:0,b:0,a:1};if(/^#([a-fA-F0-9]{3,8})$/i.test(e)||/^rgba?\(\s*\d+,\s*\d+,\s*\d+(?:,\s*(\d+(\.\d+)?))?\s*\)$/i.test(e)||(e=this.pdfViewer.nameToHash(e)),e.startsWith("#")){var t=e.replace("#","");if(3===t.length||4===t.length)return{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?parseInt(t[3]+t[3],16)/255:1};if(6===t.length||8===t.length)return{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:8===t.length?parseInt(t.substring(6,8),16)/255:1}}if(e.includes("rgba")||e.includes("rgb")){var i=e.split("(");if(i.length<2)return{r:0,g:0,b:0,a:1};var n=i[1].split(")")[0];if(!n)return{r:0,g:0,b:0,a:1};var o=n.split(",");if(o.length<3){var s=(e=this.pdfViewer.annotationModule.getValue(e,"rgba")).split("(");if(s.length<2)return{r:0,g:0,b:0,a:1};var a=s[1].split(")")[0];if(!a)return{r:0,g:0,b:0,a:1};if((o=a.split(",")).length<3)return{r:0,g:0,b:0,a:1}}return{r:parseInt(o[0],10),g:parseInt(o[1],10),b:parseInt(o[2],10),a:void 0!==o[3]?parseFloat(o[3]):1}}return{r:0,g:0,b:0,a:1}}var kr,Mr=(kr=function(e,t){return(kr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}kr(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),Tr=function(){function e(e,t,i){this.commandHandler=null,this.inAction=!1,this.pdfViewerBase=null,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.helper=void 0,this.undoElement={annotations:[]},this.undoParentElement={annotations:[]},this.commandHandler=e,this.pdfViewerBase=t}return e.prototype.startAction=function(e){this.currentElement=e,this.inAction=!0},e.prototype.mouseDown=function(e){this.currentElement=e.source,this.startPosition=this.currentPosition=this.prevPosition=e.position,this.isTooltipVisible=!0,this.startAction(e.source)},e.prototype.mouseMove=function(e){return this.currentPosition=e.position,this.prevPageId=this.pdfViewerBase.activeElements.activePageID,!this.blocked},e.prototype.mouseUp=function(e){this.currentPosition=e.position,this.isTooltipVisible=!1,this.endAction(),this.helper=null},e.prototype.endAction=function(){this.commandHandler&&(this.commandHandler.tool="",this.helper&&this.commandHandler.remove(this.helper)),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},e.prototype.mouseWheel=function(e){this.currentPosition=e.position},e.prototype.mouseLeave=function(e){this.mouseUp(e)},e.prototype.updateSize=function(e,t,i,n,o,s,a){var r=this.commandHandler.viewerBase.getZoomFactor(),l=this.currentPosition.x/r-this.startPosition.x/r,d=this.currentPosition.y/r-this.startPosition.y/r,h=e instanceof sf.drawings.TextElement?s:e.rotateAngle,p=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(p,-h,0,0);var c,u,f,m=0,g=0;"Image"===e.shapeAnnotationType||"Stamp"===e.shapeAnnotationType?(u=e instanceof sf.drawings.TextElement?e.actualSize.width:e.wrapper.bounds.width,f=e instanceof sf.drawings.TextElement?e.actualSize.height:e.wrapper.bounds.height):(u=e instanceof sf.drawings.TextElement?e.actualSize.width:e.bounds.width,f=e instanceof sf.drawings.TextElement?e.actualSize.height:e.bounds.height);var w=e;e.formFieldAnnotationType||e.annotName||e.shapeAnnotationType||e&&(w=e.annotations[0]);var y=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(w):{},v=0,b=0,S=0,A=0;(y.minWidth||y.maxWidth||y.minHeight||y.maxHeight)&&(v=y.maxHeight?y.maxHeight:2e3,b=y.maxWidth?y.maxWidth:2e3,S=y.minHeight?y.minHeight:0,A=y.minWidth?y.minWidth:0);var x=!1;if((S||A||v||b)&&(x=!0),x&&a){var V=this.getPositions(n,l,d),C=u+V.x,I=f+V.y;(I<S||I>v)&&(d=I<S?S-f:v-f),(C<A||C>b)&&(l=C<A?A-u:b-u)}switch(n){case"ResizeWest":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,g=1,d=0,x&&o.width-l>b&&(l=b-o.width),m=(o.width-l)/u;break;case"ResizeEast":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,d=0,x&&o.width+l>b&&(l=b-o.width),m=(o.width+l)/u,g=1;break;case"ResizeNorth":m=1,l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,x&&o.height-d>v&&(d=v-o.height),g=(o.height-d)/f;break;case"ResizeSouth":m=1,l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,x&&o.height+d>v&&(d=v-o.height),g=(o.height+d)/f;break;case"ResizeNorthEast":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,x&&(o.width+l>b&&(l=b-o.width),o.height-d>v&&(d=v-o.height)),m=(o.width+l)/u,g=(o.height-d)/f;break;case"ResizeNorthWest":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,x&&(o.width-l>b&&(l=b-o.width),o.height-d>v&&(d=v-o.height)),m=(o.width-l)/u,g=(o.height-d)/f;break;case"ResizeSouthEast":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,x&&(o.width+l>b&&(l=b-o.width),o.height+d>v&&(d=v-o.height)),g=(o.height+d)/f,m=(o.width+l)/u;break;case"ResizeSouthWest":l=(c=sf.drawings.transformPointByMatrix(p,{x:l,y:d})).x,d=c.y,x&&(o.width-l>b&&(l=b-o.width),o.height+d>v&&(d=v-o.height)),m=(o.width-l)/u,g=(o.height+d)/f}return{width:m,height:g}},e.prototype.getPivot=function(e){switch(e){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},e.prototype.getPositions=function(e,t,i){switch(e){case"ResizeEast":return{x:t,y:0};case"ResizeSouthEast":return{x:t,y:i};case"ResizeSouth":return{x:0,y:i};case"ResizeNorth":return{x:0,y:-i};case"ResizeNorthEast":return{x:t,y:-i};case"ResizeNorthWest":return{x:-t,y:-i};case"ResizeWest":return{x:-t,y:0};case"ResizeSouthWest":return{x:-t,y:i}}return{x:t,y:i}},e}(),Er=function(e){function t(t,i){return e.call(this,t,i,!0)||this}return Mr(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.mouseEventHelper(t),e.prototype.mouseDown.call(this,t)},t.prototype.mouseEventHelper=function(e){var t;this.commandHandler&&this.commandHandler.annotationModule&&(this.commandHandler.annotationModule.overlappedCollections=we(e,this.pdfViewerBase,this.commandHandler,!0));var i=!1;if((t=this.commandHandler&&this.commandHandler.textSelectionModule&&this.commandHandler.textSelectionModule.isTextSelection?null:we(e,this.pdfViewerBase,this.commandHandler))&&"StickyNotes"===t.shapeAnnotationType&&t.annotationSettings&&t.annotationSettings.isLock&&(i=!this.commandHandler.annotationModule.checkAllowedInteractions("Select",t)),!i){var n=void 0;if(n=e.source&&null!==e.annotationSelectorSettings?e.source.annotationSelectorSettings:"",this.commandHandler){var o=this.commandHandler.selectedItems;if(o){var s=o.annotations[0],a=o.formFields[0],r=this.commandHandler.selectedItems.annotations[0],l=e.source,d=!sf.base.isNullOrUndefined(this.commandHandler)&&!sf.base.isNullOrUndefined(this.commandHandler.annotationModule),h=d&&!sf.base.isNullOrUndefined(this.commandHandler.annotationModule.freeTextAnnotationModule)&&this.commandHandler.annotationModule.freeTextAnnotationModule.isInuptBoxInFocus;if((o.annotations.length&&e.info&&!e.info.ctrlKey&&d&&!h||e.info&&e.info.ctrlKey&&(l&&"FreeText"===l.shapeAnnotationType||r&&"FreeText"===r.shapeAnnotationType))&&this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),t)!(sf.base.isNullOrUndefined(a)||a&&a.id!==t.id)||sf.base.isNullOrUndefined(this.pdfViewerBase.isFreeTextSelected)||this.pdfViewerBase.isFreeTextSelected||this.selectAction(t,n),this.pdfViewerBase.isFreeTextSelected=!1,this.commandHandler.viewerBase.isFormFieldMouseDown=!0;else if(d&&this.commandHandler.annotationModule.textMarkupAnnotationModule&&null==this.commandHandler.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&(!e.source||null===e.annotationSelectorSettings)&&!h){var p=void 0;if(this.commandHandler.selectedItems&&(p=this.commandHandler.selectedItems),p){var c=this.pdfViewerBase.activeElements.activePageID;this.commandHandler.clearSelectedItems(p,c)}else this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID)}if(0===o.annotations.length&&s&&"HandWrittenSignature"!==s.shapeAnnotationType&&"SignatureText"!==s.shapeAnnotationType&&"SignatureImage"!==s.shapeAnnotationType&&"Path"!==s.shapeAnnotationType&&!s.formFieldAnnotationType&&(this.commandHandler.enableToolbar&&sf.base.Browser.isDevice&&!this.commandHandler.enableDesktopMode&&this.commandHandler.toolbarModule.showToolbar(!0),this.commandHandler.fireAnnotationUnSelect(s.annotName,s.pageIndex,s)),0===o.annotations.length&&s){var u={bounds:s.bounds,opacity:s.opacity,thickness:s.thickness,strokeColor:s.strokeColor};"HandWrittenSignature"===s.shapeAnnotationType&&this.commandHandler.fireSignatureUnselect(s.signatureName,s.pageIndex,u),"SignatureText"!==s.shapeAnnotationType&&"SignatureImage"!==s.shapeAnnotationType&&"Path"!==s.shapeAnnotationType||this.commandHandler.fireSignatureUnselect(s.id,s.pageIndex,u)}var f=this.pdfViewerBase.currentTarget;if(0===o.formFields.length&&0===o.annotations.length&&this.commandHandler.formDesignerModule&&a&&a.formFieldAnnotationType&&this.commandHandler.formDesignerInteraction)(w=this.commandHandler.formDesignerModule.getFormFieldByID(a.id))&&null!==w.pageNumber&&this.commandHandler.fireFormFieldEvent("FormFieldUnselected",w,w.pageNumber);else if(f&&f.id&&this.commandHandler.formDesignerModule&&"mousedown"===event.type)for(var m=this.commandHandler.formDesignerModule.getTargetElementID(f),g=0;g<this.commandHandler.formDesignerCollections.length;g++){var w=this.commandHandler.formDesignerCollections[g];if(f&&m===w.id){var y=f.id!==event.target.id,v="e-pv-text-layer"!==event.target;(!t||y&&v)&&(w&&null!==w.pageNumber&&this.commandHandler.fireFormFieldEvent("FormFieldFocusOut",w,w.pageNumber),this.pdfViewerBase.currentTarget=null)}}}}}i&&t&&"StickyNotes"===t.shapeAnnotationType&&this.commandHandler&&this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0&&this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID)},t.prototype.selectAction=function(e,t){var i=e.id.includes("_content")?e.id.split("_content")[0]:void 0;if(i&&0!==this.commandHandler.formDesignerCollections.length){var n,o=this.commandHandler.formDesignerCollections.find((function(e){return e.id.startsWith(i)}));n=o&&o.isReadOnly,o&&("Hidden"===o.visibility||"HiddenPrintable"===o.visibility)||n||this.selectAndSetMouseDown(e.id,t)}else this.selectAndSetMouseDown(e.id,t)},t.prototype.selectAndSetMouseDown=function(e,t){this.commandHandler.select([e],t),this.commandHandler.viewerBase.isAnnotationMouseDown=!0},t.prototype.mouseMove=function(t){return e.prototype.mouseMove.call(this,t),!this.blocked},t.prototype.mouseUp=function(t){this.mouseEventHelper(t),this.inAction=!1,e.prototype.mouseUp.call(this,t)},t.prototype.mouseLeave=function(e){this.inAction&&this.mouseUp(e)},t}(Tr),Br=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.currentTarget=null,n.prevNode=null,n}return Mr(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.offset={x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY},this.startPosition=t.position;var i=u(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},l(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight),this.inAction=!0},t.prototype.mouseUp=function(t){if(this.commandHandler&&t.source){this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].annotName===t.source.annotName&&(this.commandHandler.viewerBase.isAnnotationMouseMove=!0):this.commandHandler.viewerBase.isAnnotationMouseMove=!1,this.commandHandler.selectedItems&&this.commandHandler.selectedItems.formFields&&this.commandHandler.selectedItems.formFields.length>0?this.commandHandler.selectedItems.formFields[0].name===t.source.name&&(this.commandHandler.viewerBase.isFormFieldMouseMove=!0):this.commandHandler.viewerBase.isFormFieldMouseMove=!1;var i=!1,n=t.source.annotationSelectorSettings;if(this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([t.source.id],n),this.pdfViewerBase.activeElements.activePageID===t.source.pageIndex&&"Drag"===this.pdfViewerBase.action){this.commandHandler.dragSelectedObjects(this.calculateMouseActionXDiff(t),this.calculateMouseActionYDiff(t),this.pdfViewerBase.activeElements.activePageID,n,null);var o=this.pdfViewerBase.pdfViewer;if(o.selectedItems&&o.selectedItems.annotations&&o.selectedItems.annotations.length>0){var s=o.selectedItems.annotations[0];!s||"Redaction"!==s.type&&"Redaction"!==s.shapeAnnotationType||(o.annotationModule.redactionAnnotationModule.redactionOverlayText.removeRedactionOverlayText(s),o.annotationModule.redactionAnnotationModule.redactionOverlayText.renderRedactionOverlayText(s))}}var a={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},modifiedDate:t.source.modifiedDate};if(l(t.source)&&(a.vertexPoints=t.source.vertexPoints,a.leaderHeight=t.source.leaderHeight),sf.base.isNullOrUndefined(this.redoElement)||this.redoElement.bounds.height===a.bounds.height&&this.redoElement.bounds.width===a.bounds.width&&this.redoElement.bounds.x===a.bounds.x&&this.redoElement.bounds.y===a.bounds.y||(i=!0),t.source&&i&&this.commandHandler.viewerBase.isFormFieldMouseMove&&this.commandHandler.formDesignerModule.updateFormFieldPosition(t.source.id,t.source.formFieldAnnotationType,t.source.wrapper.children[0]),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,n),this.commandHandler.viewerBase.isAnnotationMouseMove=!1,this.commandHandler.viewerBase.isFormFieldMouseMove=!1,t.target&&t.target.formFieldAnnotationType){var r=t.target,d={value:r.value,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,color:r.color,backgroundColor:r.backgroundColor,borderColor:r.borderColor,thickness:r.thickness,alignment:r.alignment,isReadonly:r.isReadonly,visibility:r.visibility,maxLength:r.maxLength,isRequired:r.isRequired,isPrint:r.isPrint,rotation:r.rotateAngle,tooltip:r.tooltip,options:r.options,isChecked:r.isChecked,isSelected:r.isSelected},h={X:t.source.wrapper.offsetX,Y:t.source.wrapper.offsetY,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height},p={X:this.offset.x,Y:this.offset.y,Width:t.source.wrapper.actualSize.width,Height:t.source.wrapper.actualSize.height};this.commandHandler.fireFormFieldMoveEvent("formFieldMove",d,r.pageIndex,p,h)}this.commandHandler.annotation&&i&&(this.commandHandler.annotation.addAction(this.pageIndex,null,t.source,"Drag","",this.redoElement,a),this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,null,"Drag"),this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(t.source,null))}e.prototype.mouseUp.call(this,t)},t.prototype.calculateMouseXDiff=function(){return this.currentPosition&&this.startPosition?this.currentPosition.x-this.startPosition.x:0},t.prototype.calculateMouseYDiff=function(){return this.currentPosition&&this.startPosition?this.currentPosition.y-this.startPosition.y:0},t.prototype.calculateMouseActionXDiff=function(e){var t=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor();return this.offset?this.offset.x+t-e.source.wrapper.offsetX:0},t.prototype.calculateMouseActionYDiff=function(e){var t=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor();return this.offset?this.offset.y+t-e.source.wrapper.offsetY:0},t.prototype.mouseMove=function(t,i,n){if(e.prototype.mouseMove.call(this,t),this.inAction){this.currentPosition=t.position,this.currentTarget=t.target;var o=t.source.annotationSelectorSettings,s=this.calculateMouseXDiff()/this.commandHandler.viewerBase.getZoomFactor(),a=this.calculateMouseYDiff()/this.commandHandler.viewerBase.getZoomFactor(),r=this.offset.x+s,l=this.offset.y+a,d=this.calculateMouseActionXDiff(t),h=this.calculateMouseActionYDiff(t),p=this.commandHandler.selectedItems.annotations[0];if(this.helper)d=r-this.helper.wrapper.offsetX,h=l-this.helper.wrapper.offsetY;else{var c=this.commandHandler.selectedItems.annotations.length>0?u(this.commandHandler.selectedItems.annotations[0]):u(this.commandHandler.selectedItems.formFields[0]);if(c.wrapper&&(d=r-c.wrapper.offsetX,h=l-c.wrapper.offsetY,c.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds,"Image"===c.shapeAnnotationType&&(c.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds)),c.wrapper=void 0,c.id="diagram_helper","Stamp"===c.shapeAnnotationType)c.strokeColor="",c.borderDashArray="",c.fillColor="transparent",c.stampFillColor="transparent",c.data="",c.bounds.width=this.commandHandler.selectedItems.annotations[0].wrapper.actualSize.width,c.bounds.height=this.commandHandler.selectedItems.annotations[0].wrapper.actualSize.height;else if("FreeText"===c.shapeAnnotationType)c.strokeColor="blue",c.fillColor="transparent",c.thickness=1,c.opacity=1,c.dynamicText="";else if("SignatureText"===c.shapeAnnotationType)c.strokeColor="red",c.borderDashArray="5,5",c.fillColor="transparent",c.thickness=2,c.opacity=1,c.data="";else if("Redaction"===c.shapeAnnotationType){c.strokeColor=c.markerBorderColor;var f=Gr(c.fillColor,c.markerOpacity);c.borderDashArray="0,0",c.fillColor=f,c.thickness=2,c.opacity=1,c.data=""}else c.strokeColor="red",c.borderDashArray="5,5",c.fillColor="transparent",c.thickness=2,c.opacity=1;!0===c.enableShapeLabel&&(c.labelContent=""),i?c=this.helper=t.source:this.helper=c=this.commandHandler.add(c),this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations=[c]:this.commandHandler.selectedItems.formFields=[c]}this.helper&&"Stamp"===this.helper.shapeAnnotationType&&(i=!0),this.commandHandler.checkBoundaryConstraints(d,h,this.pdfViewerBase.activeElements.activePageID,this.helper.wrapper.bounds,i,n)?(this.commandHandler.dragSelectedObjects(d,h,this.pdfViewerBase.activeElements.activePageID,o,this.helper),this.prevNode=this.helper,this.prevPosition=this.currentPosition):this.currentPosition=this.prevPosition,p&&p.annotName&&this.commandHandler.annotation.triggerAnnotationMove(p,!0)}return!0},t.prototype.mouseLeave=function(t){var i=t.source.annotationSelectorSettings,n=this.offset.x+this.calculateMouseXDiff(),o=this.offset.y+this.calculateMouseYDiff(),s=n-t.source.wrapper.offsetX,a=o-t.source.wrapper.offsetY;this.commandHandler.dragSelectedObjects(s,a,this.prevPageId,i,null),this.commandHandler.renderSelector(this.prevPageId,i),e.prototype.mouseLeave.call(this,t)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},t}(Tr),Pr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Mr(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){var i;if(!this.inAction){var n=this.pdfViewerBase.activeElements.activePageID;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID);var o=this.commandHandler.annotation.stampAnnotationModule.moveStampElement(t.position.x,t.position.y,n);if(!sf.base.isNullOrUndefined(o)){if("SignatureText"===o.shapeAnnotationType){var s=this.getTextWidth(o.data,o.fontSize),a=1;s>o.bounds.width&&(a=o.bounds.width/s),o.fontSize=o.fontSize*a,o.thickness=0}i=this.commandHandler.add(o),t.source=this.commandHandler.annotations[this.commandHandler.annotations.length-1],t.sourceWrapper=t.source.wrapper,this.inAction=!0;var r=t.source;!r||"HandWrittenSignature"!==r.shapeAnnotationType&&"SignatureText"!==r.shapeAnnotationType&&"SignatureImage"!==r.shapeAnnotationType?this.offset={x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY}:this.offset={x:t.source.wrapper.offsetX-t.source.wrapper.bounds.width/2,y:t.source.wrapper.offsetY-t.source.wrapper.bounds.height/2},this.startPosition=t.position,this.commandHandler.select([i.id])}}if(!sf.base.isNullOrUndefined(t.source)){var l=t.source.annotationSelectorSettings;e.prototype.mouseMove.call(this,t,!0,!0),this.commandHandler.renderSelector(t.source.pageIndex,l)}return this.inAction},t.prototype.getTextWidth=function(e,t){var i=document.createElement("canvas").getContext("2d");return i.font=t||getComputedStyle(document.body).font,i.measureText(e).width},t}(Br),Dr=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.sourceObject=n,o}return Mr(t,e),t.prototype.mouseDown=function(t){this.pdfViewerBase.disableTextSelectionMode(),e.prototype.mouseDown.call(this,t),this.inAction=!0;var i={currentPosition:this.currentPosition,prevPosition:this.prevPosition};this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas(i,this.pdfViewerBase.activeElements.activePageID)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction){var i={currentPosition:this.currentPosition,prevPosition:this.pdfViewerBase.prevPosition};this.commandHandler.annotation.inkAnnotationModule.drawInkInCanvas(i,this.pdfViewerBase.activeElements.activePageID)}return this.inAction},t.prototype.mouseUp=function(e){return this.commandHandler.annotation.inkAnnotationModule.storePathData(),!0},t.prototype.mouseLeave=function(e){},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(Tr),Nr=function(e){function t(t,i,n){var o=e.call(this,t,i,!0)||this;return o.endPoint=n,o}return Mr(t,e),t.prototype.mouseDown=function(t){this.inAction=!0,this.undoElement=void 0,e.prototype.mouseDown.call(this,t),t.source&&t.source.annotations&&({x:this.prevPosition.x,y:this.prevPosition.y},t.source.annotations[0]),this.initialPosition=t.position,this.prevSource=this.commandHandler.selectedItems.annotations[0];var i=u(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},l(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight,"Distance"!==i.measureType&&"Perimeter"!==i.measureType&&"Area"!==i.measureType&&"Volume"!==i.measureType||(this.redoElement.notes=i.notes)),this.currentPosition=t.position},t.prototype.mouseUp=function(t){if(this.commandHandler){var i=!1,n=this.commandHandler.selectedItems.annotations[0];if(n){var o=this.commandHandler.annotationModule.findAnnotationSettings(n),s=0,a=0,r=0,d=0;if((o.minWidth||o.maxWidth||o.minHeight||o.maxHeight)&&(s=o.maxHeight?o.maxHeight:2e3,a=o.maxWidth?o.maxWidth:2e3,r=o.minHeight?o.minHeight:0,d=o.minWidth?o.minWidth:0),n.vertexPoints.length>3){var h=this.commandHandler.viewerBase.checkAnnotationWidth(n.vertexPoints),p=h.width,c=h.height;r||d||s||a?(c>r&&c<s||p>d&&p<a)&&this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:n.vertexPoints,leaderHeight:n.leaderHeight}):this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:n.vertexPoints,leaderHeight:n.leaderHeight})}else if(r||d||s||a)if("Line"===n.shapeAnnotationType||"Distance"===n.shapeAnnotationType||"LineWidthArrowHead"===n.shapeAnnotationType){var u=0,f=0,m=(u=n.vertexPoints[0].x>n.vertexPoints[1].x?n.vertexPoints[0].x-n.vertexPoints[1].x:n.vertexPoints[1].x-n.vertexPoints[0].x)>(f=n.vertexPoints[0].y>n.vertexPoints[1].y?n.vertexPoints[0].y-n.vertexPoints[1].y:n.vertexPoints[1].y-n.vertexPoints[0].y)?u:f;m<(s||a)&&m>(r||d)&&this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:n.vertexPoints,leaderHeight:n.leaderHeight})}else this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:n.vertexPoints,leaderHeight:n.leaderHeight});else this.commandHandler.nodePropertyChange(this.prevSource,{vertexPoints:n.vertexPoints,leaderHeight:n.leaderHeight});var g=t.source.annotationSelectorSettings;this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([this.prevSource.id],g),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,g);var w={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height}};"Distance"!==n.measureType&&"Perimeter"!==n.measureType&&"Area"!==n.measureType&&"Volume"!==n.measureType||(this.commandHandler.annotation.updateCalibrateValues(this.commandHandler.selectedItems.annotations[0]),w.notes=t.source.notes),l(t.source)&&(w.vertexPoints=t.source.vertexPoints,w.leaderHeight=t.source.leaderHeight),this.redoElement.bounds.height===w.bounds.height&&this.redoElement.bounds.width===w.bounds.width&&this.redoElement.bounds.x===w.bounds.x&&this.redoElement.bounds.y===w.bounds.y||(i=!0),i&&this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,"Resize","",this.redoElement,w)}e.prototype.mouseUp.call(this,t)}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.currentPosition=t.position,this.currentPosition&&this.prevPosition){var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y;if(t.source&&t.source.annotations&&({x:this.currentPosition.x,y:this.currentPosition.y},{x:this.prevPosition.x,y:this.prevPosition.y},t.source.annotations[0]),this.inAction&&void 0!==this.endPoint&&0!==i||0!==n){if(!this.helper){var o=u(this.commandHandler.selectedItems.annotations[0]);o.id="diagram_helper",o.strokeColor="red",o.borderDashArray="5,5",o.fillColor="transparent",o.thickness=2,o.opacity=1,!0===o.enableShapeLabel&&(o.labelContent=""),this.helper=o=this.commandHandler.add(o),this.commandHandler.selectedItems.annotations=[o]}var s=t.source.annotationSelectorSettings;this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.helper,this.currentPosition,this.selectedSegment,t.target,null,s),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,s)}}return this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},t}(Tr),Fr=function(e){function t(t,i,n){var o=e.call(this,t,i,!0)||this;return o.initialBounds=new sf.drawings.Rect,o.corner=n,o}return Mr(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.initialBounds.x=t.source.wrapper.offsetX,this.initialBounds.y=t.source.wrapper.offsetY,this.initialBounds.height=t.source.wrapper.actualSize.height,this.initialBounds.width=t.source.wrapper.actualSize.width,this.initialPosition=t.position;var i=u(t.source);this.redoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height}},l(i)&&(this.redoElement.vertexPoints=i.vertexPoints,this.redoElement.leaderHeight=i.leaderHeight),"Radius"===i.measureType&&(this.redoElement.notes=i.notes),this.prevSource=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0]:this.commandHandler.selectedItems.formFields[0]},t.prototype.mouseUp=function(t,i){t.source;var n=!1,o=u(t.source);if(this.commandHandler&&this.prevSource){this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.viewerBase.isAnnotationSelect=!0,this.commandHandler.viewerBase.isFormFieldSelect=!0,this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings);var s=this.updateSize(this.prevSource,this.currentPosition,this.initialPosition,this.corner,this.initialBounds,null,!0);this.blocked=this.scaleObjects(s.width,s.height,this.corner,this.currentPosition,this.initialPosition,this.prevSource);var a=this.pdfViewerBase.pdfViewer;if(a.selectedItems&&a.selectedItems.annotations&&a.selectedItems.annotations.length>0){var r=a.selectedItems.annotations[0];!r||"Redaction"!==r.type&&"Redaction"!==r.shapeAnnotationType||(a.annotationModule.redactionAnnotationModule.redactionOverlayText.removeRedactionOverlayText(r),a.annotationModule.redactionAnnotationModule.redactionOverlayText.renderRedactionOverlayText(r))}if(this.commandHandler.selectedItems&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations[0]&&"Stamp"===this.commandHandler.selectedItems.annotations[0].shapeAnnotationType&&(this.commandHandler.stampSettings.minHeight||this.commandHandler.stampSettings.minWidth)&&this.commandHandler.select([this.prevSource.id],this.prevSource.annotationSelectorSettings),this.commandHandler.selectedItems.formFields.length>0&&!sf.base.isNullOrUndefined(this.commandHandler.selectedItems.formFields[0])){var d=this.commandHandler.selectedItems.formFields[0];this.commandHandler.formDesignerModule.updateFormFieldPosition(d.id,d.formFieldAnnotationType,t.source.wrapper.children[0])}if(this.commandHandler.renderSelector(this.prevPageId,this.prevSource.annotationSelectorSettings),this.commandHandler.annotation&&t.source.wrapper){var h={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height}};if(l(t.source)&&(h.vertexPoints=t.source.vertexPoints,h.leaderHeight=t.source.leaderHeight),this.redoElement.bounds.height===h.bounds.height&&this.redoElement.bounds.width===h.bounds.width&&this.redoElement.bounds.x===h.bounds.x&&this.redoElement.bounds.y===h.bounds.y||(n=!0),"Radius"===this.prevSource.measureType&&n&&(h.notes=t.source.notes,this.commandHandler.annotation.updateCalibrateValues(this.prevSource)),"SignatureText"===this.prevSource.shapeAnnotationType){var p=h.bounds.width/o.width;h.fontSize=this.prevSource.wrapper.children[1].style.fontSize*p,null!=t.target&&(t.target.fontSize=h.fontSize,t.target.wrapper.children[1].style.fontSize=h.fontSize,t.target.wrapper.children[1].horizontalAlignment="Center",t.target.wrapper.children[1].verticalAlignment="Center",t.target.wrapper.children[1].setOffsetWithRespectToBounds(0,0,"Absolute"),this.commandHandler.selectedItems.annotations[0].wrapper.children[1].style.fontSize=h.fontSize,this.commandHandler.selectedItems.annotations[0].wrapper.children[1].horizontalAlignment="Center",this.commandHandler.selectedItems.annotations[0].wrapper.children[1].verticalAlignment="Center",this.commandHandler.selectedItems.annotations[0].wrapper.children[1].setOffsetWithRespectToBounds(0,0,"Absolute"),this.commandHandler.selectedItems.annotations[0].fontSize=h.fontSize)}"SignatureText"===this.prevSource.shapeAnnotationType&&this.commandHandler.selectedItems.annotations&&this.commandHandler.selectedItems.annotations.length>0&&this.commandHandler.nodePropertyChange(this.commandHandler.selectedItems.annotations[0],{fontSize:h.fontSize}),n&&this.commandHandler.annotation.addAction(this.pageIndex,null,this.prevSource,"Resize","",this.redoElement,h)}if(this.commandHandler.selectedItems.formFields.length>0&&!sf.base.isNullOrUndefined(this.commandHandler.selectedItems.formFields[0])){var c=this.commandHandler.selectedItems.formFields[0].id,f=this.commandHandler.formDesignerModule.getFormFieldByID(c),m={x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},g={x:this.initialBounds.x,y:this.initialBounds.y,width:this.initialBounds.width,height:this.initialBounds.height};f&&null!==f.pageNumber&&this.commandHandler.fireFormFieldResizeEvent("formFieldResized",f,f.pageNumber,g,m)}this.commandHandler.annotation&&this.commandHandler.annotation.stampAnnotationModule&&this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,this.prevSource.id,"Resize")}return e.prototype.mouseUp.call(this,t),!this.blocked},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i=t.source;this.currentPosition=t.position;var n=this.currentPosition.x-this.startPosition.x,o=this.currentPosition.y-this.startPosition.y;n/=this.commandHandler.viewerBase.getZoomFactor(),o/=this.commandHandler.viewerBase.getZoomFactor();var s=t.source,a=this.getPoints(n,o),r=s.width+a.x,l=s.height+a.y,d=i;i&&i.annotations&&(d=i.annotations[0]);var h=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(d):{},p=0,c=0,f=0,m=0;(h.minWidth||h.maxWidth||h.minHeight||h.maxHeight)&&(p=h.maxHeight?h.maxHeight:2e3,c=h.maxWidth?h.maxWidth:2e3,f=h.minHeight?h.minHeight:0,m=h.minWidth?h.minWidth:0),(f||m||p||c)&&((l<f||l>p)&&(o=l<f?f-s.height:p-s.height),(r<m||r>c)&&(n=r<m?m-s.width:c-s.width));var g={x:n,y:o};if(this.currentElement.wrapper&&(g=sf.drawings.rotatePoint(-this.currentElement.wrapper.rotateAngle,void 0,void 0,g)),g=this.getChanges(g),!this.helper){var w=this.commandHandler.selectedItems.annotations.length>0?u(this.commandHandler.selectedItems.annotations[0]):u(this.commandHandler.selectedItems.formFields[0]);w.id="diagram_helper","Stamp"===w.shapeAnnotationType?(w.strokeColor="",w.bounds.height=d.wrapper.bounds.height,w.bounds.width=d.wrapper.bounds.width,w.bounds.x=d.wrapper.bounds.x,w.bounds.y=d.wrapper.bounds.y,w.borderDashArray="",w.fillColor="transparent",w.stampFillColor="transparent",w.data=""):"FreeText"===w.shapeAnnotationType?(w.strokeColor="blue",w.fillColor="transparent",w.thickness=1,w.opacity=1,w.dynamicText=""):(w.bounds=this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations[0].wrapper.bounds:this.commandHandler.selectedItems.formFields[0].wrapper.bounds,w.strokeColor="red",w.borderDashArray="5,5",w.fillColor="transparent",w.thickness=2,w.opacity=1),!0===w.enableShapeLabel&&(w.labelContent=""),"SignatureText"===w.shapeAnnotationType&&(w.fillColor="transparent",w.thickness=1,w.opacity=1,w.data=""),this.helper=w=this.commandHandler.add(w),this.commandHandler.selectedItems.annotations.length>0?this.commandHandler.selectedItems.annotations=[w]:this.commandHandler.selectedItems.formFields=[w]}var y=this.updateSize(this.helper,this.startPosition,this.currentPosition,this.corner,this.initialBounds);return this.blocked=!this.scaleObjects(y.width,y.height,this.corner,this.startPosition,this.currentPosition,this.helper),this.prevPosition=this.currentPosition,!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.getTooltipContent=function(e){return"W:"+Math.round(e.wrapper.bounds.width)+" H:"+Math.round(e.wrapper.bounds.height)},t.prototype.getChanges=function(e){switch(this.corner){case"ResizeEast":return{x:e.x,y:0};case"ResizeSouthEast":return e;case"ResizeSouth":return{x:0,y:e.y};case"ResizeNorth":return{x:0,y:-e.y};case"ResizeNorthEast":return{x:e.x,y:-e.y};case"ResizeNorthWest":return{x:-e.x,y:-e.y};case"ResizeWest":return{x:-e.x,y:0};case"ResizeSouthWest":return{x:-e.x,y:e.y}}return e},t.prototype.getPoints=function(e,t){switch(this.corner){case"ResizeEast":return{x:e,y:0};case"ResizeSouthEast":return{x:e,y:t};case"ResizeSouth":return{x:0,y:t};case"ResizeNorth":return{x:0,y:-t};case"ResizeNorthEast":return{x:e,y:-t};case"ResizeNorthWest":return{x:-e,y:-t};case"ResizeWest":return{x:-e,y:0};case"ResizeSouthWest":return{x:-e,y:t}}return{x:e,y:t}},t.prototype.scaleObjects=function(e,t,i,n,o,s){var a=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(s):{},l=0,d=0,h=this.currentPosition.x-this.startPosition.x,p=this.currentPosition.y-this.startPosition.y;h/=this.commandHandler.viewerBase.getZoomFactor(),p/=this.commandHandler.viewerBase.getZoomFactor();var c=s,u=this.getPoints(h,p),f=c.bounds.width+u.x,m=c.bounds.height+u.y;return(a.minWidth||a.maxWidth||a.minHeight||a.maxHeight)&&(l=a.maxHeight?a.maxHeight:2e3,d=a.maxWidth?a.maxWidth:2e3,a.minHeight?a.minHeight:0,a.minWidth?a.minWidth:0),s instanceof r&&1===s.annotations.length&&("Perimeter"===s.annotations[0].shapeAnnotationType||"Radius"===s.annotations[0].shapeAnnotationType||"Stamp"===s.shapeAnnotationType)?t=e=1!==t||1!==e?Math.max(1===t?0:t,1===e?0:e):n!==o?Math.max(t,e):0:"Image"===s.shapeAnnotationType||"HandWrittenSignature"===s.shapeAnnotationType||"SignatureText"===s.shapeAnnotationType||"SignatureImage"===s.shapeAnnotationType?1===t&&1===e||(f>=d&&m<l&&(t=Math.max(t,e)),m>=l&&f<d&&(e=Math.max(t,e)),f<d&&m<l&&(t=e=Math.max(t,e))):"Perimeter"!==s.shapeAnnotationType&&"Radius"!==s.shapeAnnotationType&&"Stamp"!==s.shapeAnnotationType||("Stamp"===s.shapeAnnotationType?(l||t||(t=Math.max(1===t?0:t)),d||e||(e=Math.max(1===e?0:e))):l&&d||1===t&&1===e||(t=e=Math.max(1===t?0:t,1===e?0:e))),this.blocked=this.commandHandler.scaleSelectedItems(e,t,this.getPivot(this.corner)),this.blocked},t}(Tr),Lr=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.sourceObject=n,o}return Mr(t,e),t.prototype.mouseDown=function(t){e.prototype.mouseDown.call(this,t),this.inAction=!0;var i={bounds:{x:100,y:300,width:100,height:100},pageIndex:0,strokeColor:"red",thickness:3};i.id=sf.drawings.randomId(),this.sourceObject.pageIndex=i.pageIndex=this.pdfViewerBase.activeElements.activePageID||0,this.sourceObject.enableShapeLabel=this.commandHandler.enableShapeLabel,this.pdfViewerBase.updateFreeTextProperties(this.sourceObject);var n=this.sourceObject.formFieldAnnotationType;null!==n&&this.commandHandler.formDesignerModule&&this.commandHandler.formDesignerModule.isStandardFormFieldType(n)?(this.pdfViewerBase.isMouseDown=!1,this.inAction=!1):this.commandHandler.lastAnnotation=this.commandHandler.drawingObject=this.drawingObject=this.commandHandler.add(this.sourceObject||i)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===sf.drawings.Point.equals(this.currentPosition,this.prevPosition)){this.dragging=!0;var i=sf.drawings.Rect.toBounds([this.prevPosition,this.currentPosition]);this.updateNodeDimension(this.drawingObject,i),"Radius"===this.drawingObject.shapeAnnotationType&&this.updateRadiusLinePosition(this.drawingObject.wrapper.children[1],this.drawingObject)}return!0},t.prototype.mouseUp=function(t){var i=this;if(this.drawingObject&&this.dragging){this.commandHandler.blazorAction|=Wt.AnnotationAdding,this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([this.drawingObject.id],this.commandHandler.annotationSelectorSettings);var n=this.commandHandler.selectedItems.annotations[0];sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.wrapper)||this.commandHandler.nodePropertyChange(n,{bounds:{x:n.wrapper.offsetX,y:n.wrapper.offsetY}}),this.commandHandler.annotation.updateCalibrateValues(this.drawingObject,!0),this.commandHandler&&!this.isFormDesign&&this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.drawingObject=null,this.dragging=!1,e.prototype.mouseUp.call(this,t),this.inAction=!1}else{var o=!1,s=!1,a=this.sourceObject.formFieldAnnotationType;if(!this.drawingObject&&!this.dragging&&null!==a&&this.commandHandler&&this.commandHandler.formDesignerModule&&this.commandHandler.formDesignerModule.isStandardFormFieldType(a)&&(o=!0,"e-pv-page-container"!==event.target.className&&(s=!0)),o&&s&&this.commandHandler){var r=sf.drawings.randomId(),l=this.sourceObject,d={id:r,pageIndex:0,name:l.name,bounds:{x:100,y:300,width:100,height:100},opacity:1,rotateAngle:0,formFieldAnnotationType:a,visibility:l.visibility};this.sourceObject.pageIndex=d.pageIndex=this.pdfViewerBase.activeElements.activePageID||0;var h=document.getElementById("FormField_helper_html_element");h&&h.remove(),this.currentPosition=this.pdfViewerBase.currentPosition,this.commandHandler.lastAnnotation=this.commandHandler.drawingObject=this.drawingObject=this.commandHandler.add(d),this.inAction=!1,this.drawingObject.pageNumber=this.pdfViewerBase.getActivePage(!0),this.commandHandler.formDesignerModule.setInitialSize=!0;var p=this.commandHandler.formDesignerModule.updateFormFieldInitialSize(this.drawingObject.wrapper.children[0],a);this.commandHandler.formDesignerModule.setInitialSize=!1;var c=this.drawingObject.pageIndex,f=this.pdfViewerBase.getElement("_pageDiv_"+c),m=f.clientWidth-p.width,g=f.clientHeight-p.height,w=f.offsetLeft,y=void 0,v=event.target;if(this.currentPosition.y>=g&&v&&v.parentElement&&v.parentElement.classList.contains("foreign-object")&&event.path){var b=event.path[3].getBoundingClientRect();y=event.clientX-b.left}else y=!sf.base.isNullOrUndefined(event.path)||"SignatureField"!==a&&"InitialField"!==a?this.currentPosition.x-w:this.currentPosition.x;var S=void 0;S=this.currentPosition.x>=m&&this.currentPosition.y>=g?{x:m,y:g,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:this.currentPosition.x>=m?{x:m,y:this.currentPosition.y,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:this.currentPosition.y>=g?{x:y,y:g,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height}:{x:this.currentPosition.x,y:this.currentPosition.y,width:this.drawingObject.wrapper.children[0].width,height:this.drawingObject.wrapper.children[0].height},this.updateNodeDimension(this.drawingObject,S),this.drawingObject.bounds.x=this.drawingObject.bounds.x-this.drawingObject.bounds.width/2,this.drawingObject.bounds.y=this.drawingObject.bounds.y-this.drawingObject.bounds.height/2,this.drawingObject.bounds.top=this.drawingObject.bounds.y,this.drawingObject.bounds.left=this.drawingObject.bounds.x;var A=this.drawingObject,x=u(A.bounds),V={id:A.id,name:l.name,value:l.value,imageSource:l.value,type:A.formFieldAnnotationType,isReadOnly:l.isReadOnly,fontFamily:l.fontFamily,fontSize:l.fontSize,fontStyle:l.fontStyle,color:l.color,backgroundColor:l.backgroundColor,alignment:l.alignment,visibility:l.visibility,maxLength:l.maxLength,isRequired:l.isRequired,isSelected:l.isSelected,isChecked:l.isChecked,tooltip:l.tooltip,bounds:x,thickness:l.thickness,borderColor:l.borderColor,signatureIndicatorSettings:l.signatureIndicatorSettings,pageNumber:A.pageNumber,isMultiline:l.isMultiline,insertSpaces:l.insertSpaces,isTransparent:l.isTransparent,rotateAngle:A.rotateAngle,selectedIndex:l.selectedIndex,selectedIndexes:l.selectedIndexes,options:l.options?l.options:[],signatureType:l.signatureType,zIndex:A.zIndex,customData:l.customData?l.customData:{}},C=this.commandHandler.formDesignerModule.createFormFieldObject(V.type,V);-1!==this.commandHandler.registeredEventCallbacks.indexOf("FormFieldAdding")?this.commandHandler.fireFormFieldAddStart(C).then((function(e){if(e)i.formFieldAddAction(C);else{var t=C.id,n=i.commandHandler.nameTable[t];sf.base.isNullOrUndefined(n)||(i.commandHandler.remove(n),delete i.commandHandler.nameTable[t]),i.pdfViewerBase.action="",i.formFieldEndAction()}})):this.formFieldAddAction(C)}else if(o&&!s){var I=document.getElementById("FormField_helper_html_element");I&&I.remove(),this.pdfViewerBase.action="",this.formFieldEndAction()}else this.drawingObject=null,e.prototype.mouseUp.call(this,t)}},t.prototype.formFieldAddAction=function(e){this.commandHandler.formDesignerModule.drawFormField(e),this.commandHandler.select([this.commandHandler.drawingObject.id],this.commandHandler.annotationSelectorSettings),this.commandHandler.annotation&&this.commandHandler.annotation.addAction(this.pdfViewerBase.getActivePage(!0),null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.isFormDesign=!0,this.pdfViewerBase.action="Select",this.formFieldEndAction()},t.prototype.formFieldEndAction=function(){this.endAction(),this.pdfViewerBase.tool=null,this.drawingObject=null,this.pdfViewerBase.pdfViewer.drawingObject=null},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t.prototype.updateNodeDimension=function(e,t){var i=this.commandHandler.viewerBase.getZoomFactor();e.bounds.x=t.x/i+t.width/i,e.bounds.y=t.y/i+t.height/i,e.bounds.width=t.width/i,e.bounds.height=t.height/i;var n=this.commandHandler.annotationModule?this.commandHandler.annotationModule.findAnnotationSettings(e):{},o=0,s=0;n.maxWidth||n.maxHeight?(o=n.maxHeight?n.maxHeight:2e3,s=n.maxWidth?n.maxWidth:2e3,e.bounds.width>s&&(e.bounds.width=s),e.bounds.height>o&&(e.bounds.height=o),e.bounds.height<=o&&e.bounds.width<=s&&this.commandHandler.nodePropertyChange(e,{bounds:e.bounds})):this.commandHandler.nodePropertyChange(e,{bounds:e.bounds})},t.prototype.updateRadiusLinePosition=function(e,t){var i={x:t.bounds.x+t.bounds.width/4,y:t.bounds.y},n={x:t.bounds.x+t.bounds.width/2,y:t.bounds.y+t.bounds.height/2},o=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(o,t.rotateAngle,n.x,n.y);var s=sf.drawings.transformPointByMatrix(o,i),a={x:s.x,y:s.y};e.offsetX=a.x,e.offsetY=a.y,e.width=t.bounds.width/2;var r=this.commandHandler.annotationModule.findAnnotationSettings(t),l=0;r.maxWidth&&(l=r.maxWidth?r.maxWidth:2e3,t.bounds.width>l&&(t.bounds.width=l,e.width=t.bounds.width/2)),this.commandHandler.renderDrawing(void 0,t.pageIndex)},t}(Tr),Or=function(e){function t(t,i,n){var o=e.call(this,t,i)||this;return o.action=n,o}return Mr(t,e),t.prototype.mouseDown=function(t){if(e.prototype.mouseDown.call(this,t),this.inAction=!0,this.drawingObject){var i=void 0,n=this.drawingObject;i={x:(i=n.vertexPoints[n.vertexPoints.length-1]).x,y:i.y};var o=this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1];o.x===i.x&&o.x===i.y||this.drawingObject.vertexPoints.push(i),this.commandHandler.nodePropertyChange(n,{vertexPoints:n.vertexPoints})}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var s={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},vertexPoints:[{x:this.startPoint.x/this.pdfViewerBase.getZoomFactor(),y:this.startPoint.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:"Line",fillColor:this.commandHandler.drawingObject.fillColor,strokeColor:this.commandHandler.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,notes:this.commandHandler.drawingObject.notes,thickness:this.commandHandler.drawingObject.thickness,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,borderDashArray:this.commandHandler.drawingObject.borderDashArray,modifiedDate:this.commandHandler.drawingObject.modifiedDate,borderStyle:this.commandHandler.drawingObject.borderStyle,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel,opacity:this.commandHandler.drawingObject.opacity,isLocked:this.commandHandler.drawingObject.isLocked};this.pdfViewerBase.updateFreeTextProperties(s),this.drawingObject=this.commandHandler.add(s)}},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===sf.drawings.Point.equals(this.currentPosition,this.prevPosition)){this.dragging=!0;var i=this.drawingObject;this.drawingObject&&this.currentPosition&&(i.vertexPoints[i.vertexPoints.length-1].x=this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),i.vertexPoints[i.vertexPoints.length-1].y=this.currentPosition.y/this.pdfViewerBase.getZoomFactor(),this.commandHandler.nodePropertyChange(i,{vertexPoints:i.vertexPoints})),"Perimeter"===i.measureType&&V(i,i.vertexPoints,this.commandHandler.annotation.measureAnnotationModule)}return!0},t.prototype.mouseUp=function(t,i,n){var o;if(e.prototype.mouseMove.call(this,t),t.source&&null!==t.annotationSelectorSettings&&(o=t.source.annotationSelectorSettings),this.drawingObject){var s=new sf.drawings.Rect(this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].x-20,this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1].y-20,40,40),a={x:this.drawingObject.vertexPoints[0].x,y:this.drawingObject.vertexPoints[0].y};if((s.containsPoint(a)||i)&&this.dragging){if(this.inAction&&(this.inAction=!1,this.drawingObject)){if(n||this.drawingObject.vertexPoints.length>2&&!t.isTouchMode&&this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1),"Polygon"===this.action){n?this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length]=this.drawingObject.vertexPoints[0]:this.drawingObject.vertexPoints[this.drawingObject.vertexPoints.length-1]=this.drawingObject.vertexPoints[0],this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints});var r=u(this.drawingObject);r.shapeAnnotationType="Polygon",r.bounds.width=r.wrapper.actualSize.width,r.bounds.height=r.wrapper.actualSize.height,r.bounds.x=this.drawingObject.wrapper.bounds.x,r.bounds.y=this.drawingObject.wrapper.bounds.y,this.commandHandler.add(r),this.commandHandler.remove(this.drawingObject),this.commandHandler.select([r.id],o);var l=this.commandHandler.selectedItems.annotations[0];l&&(this.commandHandler.enableShapeAnnotation&&(sf.base.isNullOrUndefined(l.measureType)||""===l.measureType)&&this.commandHandler.annotation.shapeAnnotationModule.renderShapeAnnotations(l,l.pageIndex),!this.commandHandler.enableMeasureAnnotation||"Area"!==l.measureType&&"Volume"!==l.measureType||("Area"===l.measureType?l.notes=this.commandHandler.annotation.measureAnnotationModule.calculateArea(l.vertexPoints):"Volume"===l.measureType&&(l.notes=this.commandHandler.annotation.measureAnnotationModule.calculateVolume(l.vertexPoints)),l.enableShapeLabel&&(l.labelContent=l.notes,this.commandHandler.nodePropertyChange(l,{vertexPoints:l.vertexPoints,notes:l.notes})),this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(l,l.pageIndex)))}else n||i&&this.drawingObject.vertexPoints.splice(this.drawingObject.vertexPoints.length-1,1),this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes}),this.commandHandler.select([this.drawingObject.id],o),this.commandHandler.enableMeasureAnnotation&&"Perimeter"===this.drawingObject.measureType&&(this.commandHandler.renderDrawing(null,this.drawingObject.pageIndex),this.drawingObject.notes=this.commandHandler.annotation.measureAnnotationModule.calculatePerimeter(this.drawingObject),this.drawingObject.enableShapeLabel&&(this.drawingObject.labelContent=this.drawingObject.notes,this.commandHandler.nodePropertyChange(this.drawingObject,{vertexPoints:this.drawingObject.vertexPoints,notes:this.drawingObject.notes})),this.commandHandler.annotation.measureAnnotationModule.renderMeasureShapeAnnotations(this.drawingObject,this.drawingObject.pageIndex));var d=this.commandHandler.selectedItems.annotations[0];this.commandHandler.annotation.addAction(this.pageIndex,null,d,"Addition","",d,d),this.drawingObject=null}this.endAction()}else this.inAction&&!this.dragging&&this.commandHandler.remove(this.drawingObject)}},t.prototype.mouseLeave=function(e){this.mouseUp(e,!0,!0)},t.prototype.mouseWheel=function(t){e.prototype.mouseWheel.call(this,t),this.mouseMove(t)},t.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null,this.commandHandler.tool=""},t}(Tr),Rr=function(e){function t(t,i,n,o){var s=e.call(this,t,i,!0)||this;return s.endPoint=n,s.drawingObject=o,s}return Mr(t,e),t.prototype.mouseDown=function(t){if(this.inAction=!0,this.undoElement=void 0,e.prototype.mouseDown.call(this,t),t.source&&t.source.annotations&&({x:this.prevPosition.x,y:this.prevPosition.y},this.drawingObject),this.initialPosition=t.position,this.prevSource=this.drawingObject,this.currentPosition=t.position,this.drawingObject){if(!this.dragging){var i={bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],shapeAnnotationType:this.drawingObject.shapeAnnotationType,sourceDecoraterShapes:this.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.drawingObject.taregetDecoraterShapes,fillColor:this.drawingObject.fillColor,strokeColor:this.drawingObject.strokeColor,pageIndex:this.pdfViewerBase.activeElements.activePageID,opacity:this.drawingObject.opacity||1,borderDashArray:this.drawingObject.borderDashArray,thickness:this.drawingObject.thickness,modifiedDate:this.drawingObject.modifiedDate,author:this.drawingObject.author,subject:this.drawingObject.subject,lineHeadEnd:this.drawingObject.lineHeadEnd,lineHeadStart:this.drawingObject.lineHeadStart,measureType:this.commandHandler.drawingObject.measureType,enableShapeLabel:this.commandHandler.enableShapeLabel,isLocked:this.commandHandler.drawingObject.isLocked};this.pdfViewerBase.updateFreeTextProperties(i),this.drawingObject=this.commandHandler.add(i)}}else{var n=this.commandHandler.annotation.measureAnnotationModule,o={vertexPoints:[{x:this.startPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.startPosition.y/this.pdfViewerBase.getZoomFactor()},{x:this.currentPosition.x/this.pdfViewerBase.getZoomFactor(),y:this.currentPosition.y/this.pdfViewerBase.getZoomFactor()}],bounds:{x:this.currentPosition.x,y:this.currentPosition.y,width:5,height:5},sourceDecoraterShapes:this.commandHandler.drawingObject.sourceDecoraterShapes,taregetDecoraterShapes:this.commandHandler.drawingObject.taregetDecoraterShapes,measureType:"Distance",fillColor:this.commandHandler.drawingObject.fillColor,notes:this.commandHandler.drawingObject.notes,strokeColor:this.commandHandler.drawingObject.strokeColor,opacity:this.commandHandler.drawingObject.opacity,thickness:this.commandHandler.drawingObject.thickness,borderDashArray:this.commandHandler.drawingObject.borderDashArray,shapeAnnotationType:"Distance",pageIndex:this.pdfViewerBase.activeElements.activePageID,author:this.commandHandler.drawingObject.author,subject:this.commandHandler.drawingObject.subject,enableShapeLabel:this.commandHandler.enableShapeLabel,leaderHeight:n.leaderLength,isLocked:this.commandHandler.drawingObject.isLocked};this.pdfViewerBase.updateFreeTextProperties(o),this.drawingObject=this.commandHandler.add(o)}},t.prototype.mouseUp=function(t){if(this.dragging){if(e.prototype.mouseMove.call(this,t),this.commandHandler){var i=void 0;i=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"";var n=this.drawingObject;this.commandHandler.nodePropertyChange(n,{vertexPoints:n.vertexPoints,leaderHeight:n.leaderHeight}),this.commandHandler.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.commandHandler.select([n.id],i),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,i)}this.endPoint&&this.endPoint.indexOf("ConnectorSegmentPoint")>-1&&this.dragging&&(this.commandHandler.annotation.updateCalibrateValues(this.drawingObject),this.commandHandler.annotation.addAction(this.pageIndex,null,this.drawingObject,"Addition","",this.drawingObject,this.drawingObject),this.drawingObject=null,this.dragging=!1,e.prototype.mouseUp.call(this,t)),this.drawingObject&&(this.endPoint="ConnectorSegmentPoint_1")}else this.drawingObject&&this.commandHandler.remove(this.drawingObject)},t.prototype.mouseMove=function(t){if(e.prototype.mouseMove.call(this,t),this.inAction&&!1===sf.drawings.Point.equals(this.currentPosition,this.prevPosition)){if(this.currentPosition=t.position,this.dragging=!0,this.currentPosition&&this.prevPosition){var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y,o=void 0;o=t.source&&null!==t.annotationSelectorSettings?t.source.annotationSelectorSettings:"",(this.inAction&&this.commandHandler&&this.drawingObject&&void 0!==this.endPoint&&0!==i||0!==n)&&(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,this.drawingObject,this.currentPosition,this.selectedSegment,t.target,null,o),this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,o))}this.prevPosition=this.currentPosition}return!this.blocked},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},t}(Tr),zr=function(e){function t(t,i){return e.call(this,t,i,!0)||this}return Mr(t,e),t.prototype.mouseDown=function(t){var i=u(t.source);this.undoElement={bounds:{x:i.wrapper.offsetX,y:i.wrapper.offsetY,width:i.wrapper.actualSize.width,height:i.wrapper.actualSize.height},rotateAngle:i.rotateAngle},e.prototype.mouseDown.call(this,t)},t.prototype.mouseUp=function(t){var i,n=t.source;if(this.undoElement.rotateAngle!==n.wrapper.rotateAngle){var o=t.source.annotations[0].annotationSelectorSettings;this.commandHandler.renderSelector(this.pdfViewerBase.activeElements.activePageID,o),i={bounds:{x:t.source.wrapper.offsetX,y:t.source.wrapper.offsetY,width:t.source.wrapper.actualSize.width,height:t.source.wrapper.actualSize.height},rotateAngle:t.source.wrapper.rotateAngle}}this.commandHandler.annotation.addAction(this.pageIndex,null,t.source,"Rotate","",this.undoElement,i),this.commandHandler.annotation.stampAnnotationModule.updateSessionStorage(t.source,null,"Rotate"),this.commandHandler.annotation.stickyNotesAnnotationModule.updateStickyNotes(t.source,null),e.prototype.mouseUp.call(this,t)},t.prototype.mouseMove=function(t){e.prototype.mouseMove.call(this,t);var i=t.source,n=t.source.annotations[0].annotationSelectorSettings;if(this.currentPosition=t.position,i.wrapper){var o={x:i.wrapper.offsetX*this.commandHandler.viewerBase.getZoomFactor(),y:i.wrapper.offsetY*this.commandHandler.viewerBase.getZoomFactor()},s=sf.drawings.Point.findAngle(o,this.currentPosition)+90;s=(s+360)%360,this.blocked=!this.commandHandler.rotate(s-i.wrapper.rotateAngle,n)}return!this.blocked},t.prototype.getTooltipContent=function(e){return Math.round(e.rotateAngle%360).toString()+"°"},t.prototype.mouseLeave=function(e){this.mouseUp(e)},t.prototype.endAction=function(){e.prototype.endAction.call(this)},t}(Tr);function Hr(e,t,i,n,o){if(e instanceof r){if(e.annotations.length)for(var s=0,a=e.annotations;s<a.length;s++){var l=a[s];this.drag(l,t,i,n,o),this.renderSelector(l.pageIndex,n,o)}}else{var d=e;!sf.base.isNullOrUndefined(d.annotations)&&d.annotations.length>0&&!sf.base.isNullOrUndefined(d.annotations[0])?this.dragAnnotation(d.annotations[0],t,i):!sf.base.isNullOrUndefined(d.formFields)&&d.formFields.length>0&&!sf.base.isNullOrUndefined(d.formFields[0])&&this.dragAnnotation(d.formFields[0],t,i)}}function Ur(e,t,i){e.wrapper.offsetX,e.wrapper.offsetY;if(e.wrapper.offsetX+=t,e.wrapper.offsetY+=i,l(e)||"Polygon"===e.shapeAnnotationType){if(e.wrapper.children.length)for(var n=e.wrapper.children,o=0;o<n.length;o++)n[o].offsetX+=t,n[o].offsetY+=i;this.dragControlPoint(e,t,i,!0)}this.nodePropertyChange(e,{bounds:{x:e.wrapper.offsetX,y:e.wrapper.offsetY}}),e.wrapper.measureChildren=!1;var s=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+e.pageIndex);this.pdfViewer.renderDrawing(s,e.pageIndex)}function jr(e,t,i,n,o){for(var s=this.pdfViewer.nameTable[e.id],a=0;a<s.vertexPoints.length;a++)s.vertexPoints[a].x+=t,s.vertexPoints[a].y+=i;return n||this.updateEndPoint(s),!0}function _r(e,t,i,n,o,s,a){var l,d,h;if(l=t instanceof r?t.annotations[0]:t,i={x:i.x/this.pdfViewer.viewerBase.getZoomFactor(),y:i.y/this.pdfViewer.viewerBase.getZoomFactor()},this.checkBoundaryConstraints(void 0,void 0,l.pageIndex,l.wrapper.bounds)){if("Distance"===l.shapeAnnotationType){var p=function(e,t){var i;if("Distance"===e.shapeAnnotationType)for(var n=0,o=void 0,s=0;s<e.wrapper.children.length;s++){var a=sf.drawings.Point.findAngle(e.sourcePoint,e.targetPoint);if(e.wrapper.children[s].id.indexOf("leader")>-1){var r=e.wrapper.children[0].bounds.center;0===n?(o={x:e.sourcePoint.x,y:e.sourcePoint.y-e.leaderHeight},r=e.sourcePoint):(o={x:e.targetPoint.x,y:e.targetPoint.y-e.leaderHeight},r=e.targetPoint);var l=sf.drawings.identityMatrix();if(sf.drawings.rotateMatrix(l,a,r.x,r.y),i=sf.drawings.transformPointByMatrix(l,{x:o.x,y:o.y}),t==="Leader"+n)return{leader:"leader"+n,point:i};n++}}return{leader:"",point:i}}(l,e);if("Leader0"===e)this.pdfViewer.viewerBase.tool instanceof Rr?(l.vertexPoints[0].x=i.x,l.vertexPoints[0].y=i.y):(d=i.x-p.point.x,h=i.y-p.point.y,l.vertexPoints[0].x+=d,l.vertexPoints[0].y+=h);else if("Leader1"===e){var c=l.vertexPoints.length-1;this.pdfViewer.viewerBase.tool instanceof Rr?(l.vertexPoints[c].x=i.x,l.vertexPoints[c].y=i.y):(d=i.x-p.point.x,h=i.y-p.point.y,l.vertexPoints[c].x+=d,l.vertexPoints[c].y+=h)}else{var u=sf.drawings.Point.findAngle(l.sourcePoint,l.targetPoint),f=t.wrapper.children[0].bounds.center,m=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(m,-u,f.x,f.y);var g=sf.drawings.transformPointByMatrix(m,{x:i.x,y:i.y});if("ConnectorSegmentPoint"===e.split("_")[0]){var w=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(w,-u,f.x,f.y);var y=sf.drawings.transformPointByMatrix(w,l.vertexPoints[0]),v=sf.drawings.transformPointByMatrix(w,l.vertexPoints[l.vertexPoints.length-1]);if(h=g.y-y.y,0===l.leaderHeight&&null!=l.leaderHeight)l.leaderHeight=this.pdfViewer.distanceSettings.leaderLength;else{l.leaderHeight+=h,y.y+=h,v.y+=h;var b=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(b,u,f.x,f.y),l.vertexPoints[0]=sf.drawings.transformPointByMatrix(b,y),l.vertexPoints[l.vertexPoints.length-1]=sf.drawings.transformPointByMatrix(b,v)}}}}else if("ConnectorSegmentPoint"===e.split("_")[0]){var S=Number(e.split("_")[1]);d=i.x-l.vertexPoints[S].x,h=i.y-l.vertexPoints[S].y,l.vertexPoints[S].x+=d,l.vertexPoints[S].y+=h,l.vertexPoints.length>2&&"Perimeter"!==t.measureType&&(0===parseFloat(e.split("_")[1])?(l.vertexPoints[l.vertexPoints.length-1].x+=d,l.vertexPoints[l.vertexPoints.length-1].y+=h):parseFloat(e.split("_")[1])===l.vertexPoints.length-1&&(l.vertexPoints[0].x+=d,l.vertexPoints[0].y+=h))}this.nodePropertyChange(l,{vertexPoints:l.vertexPoints}),this.renderSelector(l.pageIndex,a)}return this.pdfViewer.renderDrawing(),!0}function Wr(e,t,i,n){var o=this.pdfViewer.nameTable[e.id];return o.vertexPoints[n].x+=t,o.vertexPoints[n].y+=i,this.pdfViewer.renderDrawing(),!0}function qr(e,t,i,n,o){var s=this.pdfViewer.nameTable[e.id],a=s.wrapper;o||(o=e);var r=o.wrapper,l=r.offsetX-r.actualSize.width*r.pivot.x,d=r.offsetY-r.actualSize.height*r.pivot.y,h=this.getShapePoint(l,d,r.actualSize.width,r.actualSize.height,r.rotateAngle,r.offsetX,r.offsetY,n);void 0!==a.actualSize.width&&void 0!==a.actualSize.height&&this.scaleObject(t,i,h,s,a,o);var p=this.checkBoundaryConstraints(void 0,void 0,e.pageIndex,e.wrapper.bounds);return p||this.scaleObject(1/t,1/i,h,s,a,o),p}function Zr(e,t,i,n,o,s){if(t=t<0?1:t,1!==(e=e<0?1:e)||1!==t){var a=void 0,r=void 0;if(!l(n)){a=(p=n).wrapper.actualSize.width*e,r=p.wrapper.actualSize.height*t,e=a/p.wrapper.actualSize.width,t=r/p.wrapper.actualSize.height}var d=sf.drawings.identityMatrix();s||(s=n);var h=s.wrapper;if(sf.drawings.rotateMatrix(d,-h.rotateAngle,i.x,i.y),sf.drawings.scaleMatrix(d,e,t,i.x,i.y),sf.drawings.rotateMatrix(d,h.rotateAngle,i.x,i.y),!l(n)){var p=n,c=sf.drawings.transformPointByMatrix(d,{x:p.wrapper.offsetX,y:p.wrapper.offsetY});a>0&&(p.wrapper.width=a,p.wrapper.offsetX=c.x),r>0&&(p.wrapper.height=r,p.wrapper.offsetY=c.y),this.nodePropertyChange(n,{bounds:{width:p.wrapper.width,height:p.wrapper.height,x:p.wrapper.offsetX,y:p.wrapper.offsetY}}),n.wrapper.measureChildren=!1;var u=n.pageIndex?n.pageIndex:!sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations)&&this.pdfViewer.selectedItems.annotations.length>0&&!sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0])?this.pdfViewer.selectedItems.annotations[0].pageIndex:!sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.formFields)&&this.pdfViewer.selectedItems.formFields.length>0&&!sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.formFields[0])?this.pdfViewer.selectedItems.formFields[0].pageIndex:0,f=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+u);this.pdfViewer.renderDrawing(f,u)}}}function Yr(e,t,i,n){var o=!0;if(e instanceof r){if(e.annotations&&e.annotations.length)for(var s=0,a=e.annotations;s<a.length;s++){var l=a[s];o=this.scaleAnnotation(l,t,i,n,e)}else if(e.formFields&&e.formFields.length)for(var d=0,h=e.formFields;d<h.length;d++){l=h[d];o=this.scaleAnnotation(l,t,i,n,e)}}else{var p=e;!sf.base.isNullOrUndefined(p.annotations)&&p.annotations.length>0&&!sf.base.isNullOrUndefined(p.annotations[0])?o=this.scaleAnnotation(p.annotations[0],t,i,n,void 0):!sf.base.isNullOrUndefined(p.formFields)&&p.formFields.length>0&&!sf.base.isNullOrUndefined(p.formFields[0])&&(o=this.scaleAnnotation(p.formFields[0],t,i,n,void 0))}return o}function Xr(e,t){var i;e.wrapper.outerBounds,e.wrapper.bounds;if(t.bounds&&(void 0!==t.bounds.width&&(e.bounds.width=e.wrapper.width=t.bounds.width),void 0!==t.bounds.height&&(e.bounds.height=e.wrapper.height=t.bounds.height),void 0!==t.bounds.x&&(e.bounds.x=t.bounds.x-.5*e.bounds.width,e.wrapper.offsetX=t.bounds.x),void 0!==t.bounds.y&&(e.bounds.y=t.bounds.y-.5*e.bounds.height,e.wrapper.offsetY=t.bounds.y),void 0!==t.leaderHeight&&(e.leaderHeight=t.leaderHeight,this.updateConnector(e,e.vertexPoints)),e.wrapper.children.length))for(var n=e.wrapper.children,o=0;o<n.length;o++)if(n[o].id){var s=n[o].id.split("_");if(s.length&&(s.indexOf("perimeter")>-1||s.indexOf("radius")>-1))this.setNodePosition(n[o],e);else if(s.length&&s.indexOf("srcDec")>-1)n[o].offsetX=e.vertexPoints[0].x,n[o].offsetY=e.vertexPoints[0].y;else if(s.length&&s.indexOf("tarDec")>-1)n[o].offsetX=e.vertexPoints[e.vertexPoints.length-1].x,n[o].offsetY=e.vertexPoints[e.vertexPoints.length-1].y;else if(s.length&&s.indexOf("stamp")>-1){var a=0;if(void 0!==e.wrapper.width&&void 0!==e.wrapper.height&&(a=20),e.isDynamicStamp){n[o].width=e.bounds.width-a,n[o].height=e.bounds.height/2-a;var r=n[1],d=this.pdfViewer.stampSettings?this.pdfViewer.stampSettings:this.pdfViewer.annotationSettings;if(d&&(d.maxHeight||d.maxWidth)&&e.bounds.height>60)r.style.fontSize=0!==a?e.bounds.width/a:e.wrapper.bounds.width/20;else if(0!==a){var p=e.rotateAngle>0?e.wrapper.actualSize.width:e.bounds.width;r.style.fontSize=this.fontSizeCalculation(e,r,p-20)}else{p=e.rotateAngle>0?e.wrapper.actualSize.width:e.wrapper.bounds.width;r.style.fontSize=this.fontSizeCalculation(e,r,p-20)}0!==a&&(r.margin.bottom=-n[o].height/2)}else n[o].width=e.bounds.width-a,n[o].height=e.bounds.height-a;n[o].offsetX=e.wrapper.offsetX,n[o].offsetY=e.wrapper.offsetX,n[o].isDirt=!0}}if(void 0!==t.sourceDecoraterShapes&&(e.sourceDecoraterShapes=t.sourceDecoraterShapes,this.updateConnector(e,e.vertexPoints)),void 0!==t.isReadonly&&"FreeText"===e.shapeAnnotationType&&(e.isReadonly=t.isReadonly),void 0!==t.taregetDecoraterShapes&&(e.taregetDecoraterShapes=t.taregetDecoraterShapes,this.updateConnector(e,e.vertexPoints)),void 0!==t.fillColor&&(e.fillColor=t.fillColor,e.wrapper.children[0].style.fill=t.fillColor,(e.enableShapeLabel||e.measureType)&&e.wrapper&&e.wrapper.children))for(var n=e.wrapper.children,c=0;c<n.length;c++)n[c].textNodes&&(e.enableShapeLabel&&(e.labelFillColor=t.fillColor,n[c].style.fill=t.fillColor),e.measureType&&(n[c].style.fill=t.fillColor));if(void 0!==t.markerFillColor){e.markerFillColor=t.markerFillColor;var u=Gr(t.markerFillColor,e.markerOpacity);e.wrapper.children[0].style.fill=u}if(void 0!==t.markerBorderColor&&(e.markerBorderColor=t.markerBorderColor,e.wrapper.children[0].style.strokeColor=e.markerBorderColor),void 0!==t.markerOpacity){e.markerOpacity=t.markerOpacity;u=Gr(e.markerFillColor,e.markerOpacity);e.wrapper.children[0].style.fill=u}if(void 0!==t.overlayText&&(e.overlayText=t.overlayText),e.enableShapeLabel&&void 0!==t.labelFillColor&&e.enableShapeLabel&&e.wrapper&&e.wrapper.children)for(var n=e.wrapper.children,f=0;f<n.length;f++)n[f].textNodes&&(e.labelFillColor=t.labelFillColor,n[f].style.fill=t.labelFillColor);if(void 0!==t.opacity&&("Stamp"===e.shapeAnnotationType||"FreeText"===e.shapeAnnotationType?(e.wrapper.children[1].style.opacity=t.opacity,e.wrapper.children[2]&&(e.wrapper.children[2].style.opacity=t.opacity),e.opacity=t.opacity):("StickyNotes"===e.shapeAnnotationType&&(this.pdfViewer.nameTable[e.annotName].wrapper.children[0].style.opacity=t.opacity),e.opacity=t.opacity),e.wrapper.children[0].style.opacity=t.opacity,e.enableShapeLabel&&e.wrapper&&e.wrapper.children))for(var n=e.wrapper.children,m=0;m<n.length;m++)n[m].textNodes&&(n[m].style.opacity=t.labelOpacity);if(e.enableShapeLabel&&void 0!==t.labelOpacity&&e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var g=0;g<n.length;g++)n[g].textNodes&&(n[g].style.opacity=t.labelOpacity)}if(void 0!==t.rotateAngle&&(e.rotateAngle=t.rotateAngle,e.wrapper.rotateAngle=t.rotateAngle),void 0!==t.strokeColor&&(e.strokeColor=t.strokeColor,e.wrapper.children[0].style.strokeColor=t.strokeColor),void 0!==t.fontColor){if(e.fontColor=t.fontColor,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)(n=e.wrapper.children)[1].style.color=t.fontColor,"Justify"===e.textAlign?n[1].horizontalAlignment="Center":n[1].horizontalAlignment="Auto";if(e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var w=0;w<n.length;w++)n[w].textNodes&&(n[w].style.color=t.fontColor)}}if(void 0!==t.fontFamily){if(e.fontFamily=t.fontFamily,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)(n=e.wrapper.children)[1].style.fontFamily=t.fontFamily;if(e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var v=0;v<n.length;v++)n[v].textNodes&&(n[v].style.fontFamily=t.fontFamily)}}if(void 0!==t.fontSize){if(e.fontSize=t.fontSize,("FreeText"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType)&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length)(n=e.wrapper.children)[1].style.fontSize=t.fontSize,"SignatureText"===e.shapeAnnotationType&&(e.wrapper.children[1].bounds.width=e.bounds.width,n[1].horizontalAlignment="Center",n[1].verticalAlignment="Center",n[1].setOffsetWithRespectToBounds(0,0,"Absolute"));if(e.enableShapeLabel&&e.wrapper&&e.wrapper.children){n=e.wrapper.children;for(var b=0;b<n.length;b++)n[b].textNodes&&(n[b].style.fontSize=t.fontSize)}}if(void 0!==t.font&&"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length){n=e.wrapper.children;void 0!==t.font.isBold&&(n[1].style.bold=t.font.isBold,e.font.isBold=t.font.isBold),void 0!==t.font.isItalic&&(n[1].style.italic=t.font.isItalic,e.font.isItalic=t.font.isItalic),void 0!==t.font.isUnderline&&(t.font.isUnderline&&(e.font.isStrikeout=!1),!0===t.font.isUnderline?n[1].style.textDecoration="Underline":t.font.isStrikeout||(n[1].style.textDecoration="None"),e.font.isUnderline=t.font.isUnderline),void 0!==t.font.isStrikeout&&(t.font.isStrikeout&&(e.font.isUnderline=!1),!0===t.font.isStrikeout?n[1].style.textDecoration="LineThrough":t.font.isUnderline||(n[1].style.textDecoration="None"),e.font.isStrikeout=t.font.isStrikeout)}void 0!==t.textAlign&&(e.textAlign=t.textAlign,"FreeText"===e.shapeAnnotationType&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((n=e.wrapper.children)[1].style.textAlign=t.textAlign,n[1].childNodes.length>=1?"Justify"===e.textAlign?(n[1].childNodes.length>1?n[1].horizontalAlignment="Center":n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Right"===e.textAlign?(n[1].horizontalAlignment="Right",n[1].setOffsetWithRespectToBounds(.97,0,null)):"Left"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Center"===e.textAlign&&(n[1].horizontalAlignment="Center",n[1].setOffsetWithRespectToBounds(.46,0,null)):n[1].horizontalAlignment="Auto"));if(void 0!==t.thickness&&(e.thickness=t.thickness,e.wrapper.children[0].style.strokeWidth=t.thickness),void 0!==t.borderDashArray&&(e.borderDashArray=t.borderDashArray,e.wrapper.children[0].style.strokeDashArray=t.borderDashArray),void 0!==t.borderStyle&&(e.borderStyle=t.borderStyle),void 0!==t.author&&(e.author=t.author),void 0!==t.modifiedDate&&(e.modifiedDate=t.modifiedDate),void 0!==t.subject&&(e.subject=t.subject),void 0!==t.vertexPoints&&(e.vertexPoints=t.vertexPoints,this.pdfViewer.nameTable[e.id].vertexPoints=t.vertexPoints,this.updateConnector(e,t.vertexPoints)),void 0!==t.leaderHeight&&"Polygon"!==e.shapeAnnotationType&&(e.leaderHeight=t.leaderHeight,this.updateConnector(e,e.vertexPoints)),void 0!==t.notes&&(e.notes=t.notes),void 0!==t.annotName&&(e.annotName=t.annotName),"Distance"===e.shapeAnnotationType){for(i=0;i<e.wrapper.children.length;i++){var S=e.wrapper.children[i],A=y(e);S.id.indexOf("leader1")>-1&&this.setLineDistance(e,A,S,!1),S.id.indexOf("leader2")>-1&&this.setLineDistance(e,A,S,!0)}this.updateConnector(e,e.vertexPoints)}if("Polygon"===e.shapeAnnotationType&&t.vertexPoints){e.data=I(e.vertexPoints);var x=e.wrapper.children[0];x.data=e.data,x.canMeasurePath=!0}if(l(e))for(var V=0;V<e.wrapper.children.length;V++){e.wrapper.children[V].textNodes||h(e,e.wrapper.children[V]),!0===e.enableShapeLabel?(e.wrapper.children[V]instanceof sf.drawings.TextElement&&(e.wrapper.children[V].style.fill=e.labelFillColor),e.wrapper.children[V]instanceof sf.drawings.PathElement&&"Perimeter"===e.measureType&&(e.wrapper.children[V].style.fill="transparent")):(e.wrapper.children[V]instanceof sf.drawings.PathElement&&"Perimeter"===e.measureType||e.wrapper.children[V]instanceof sf.drawings.TextElement)&&(e.wrapper.children[V].style.fill="transparent")}if(e&&("FreeText"===e.shapeAnnotationType||!0===e.enableShapeLabel)&&e.wrapper&&e.wrapper.children&&e.wrapper.children.length){n=e.wrapper.children;for(var C=0;C<n.length;C++)n[C].textNodes&&("FreeText"===e.shapeAnnotationType?(t.dynamicText?(n[C].content=t.dynamicText,e.dynamicText=t.dynamicText):n[C].content=e.dynamicText,n[C].width=e.bounds.width):(!0===e.enableShapeLabel&&e.measureType||!0===e.enableShapeLabel)&&(t.labelContent?(n[C].content=t.labelContent,e.labelContent=t.labelContent):n[C].content=e.labelContent,e.notes=n[C].content),n[C].isDirt=!0)}(e.wrapper.measure(new sf.drawings.Size(e.wrapper.bounds.width,e.wrapper.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize),e&&e.formFieldAnnotationType)&&(e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&((n=e.wrapper.children[0]).actualSize.width=e.wrapper.desiredSize.width,n.actualSize.height=e.wrapper.desiredSize.height));if(e&&"FreeText"===e.shapeAnnotationType&&"Text Box"===e.subject){if(e.wrapper&&e.wrapper.children&&e.wrapper.children.length){(n=e.wrapper.children)[1].childNodes.length>=1?"Justify"===e.textAlign?(n[1].childNodes.length>1?n[1].horizontalAlignment="Center":n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Right"===e.textAlign?(n[1].horizontalAlignment="Right",n[1].setOffsetWithRespectToBounds(.97,0,null)):"Left"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(0,0,null)):"Center"===e.textAlign&&(n[1].horizontalAlignment="Center",n[1].setOffsetWithRespectToBounds(.46,0,null)):n[1].horizontalAlignment="Auto";for(var k=0;k<n.length;k++){if(n[k].textNodes&&n[k].textNodes.length>0){n[k].isDirt=!0;var M=n[k].textNodes.length*n[k].textNodes[0].dy,T=e.bounds.height-M;if(T>0&&T<n[k].textNodes[0].dy&&(M+=n[k].textNodes[0].dy),M>e.bounds.height){for(var E="",B=0;B<n[k].textNodes.length;B++){n[k].textNodes[0].dy;E+=n[k].textNodes[B].text}T<0&&(n[k].content=E)}}n[k].width=e.bounds.width}}e.wrapper.measure(new sf.drawings.Size(e.bounds.width,e.bounds.height)),e.wrapper.arrange(e.wrapper.desiredSize)}(this.pdfViewer.renderDrawing(void 0,e.pageIndex),this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.renderSelector(e.pageIndex),e&&"FreeText"===e.shapeAnnotationType)&&(e.wrapper&&e.wrapper.children&&e.wrapper.children.length&&(1===(n=e.wrapper.children)[1].childNodes.length&&"Justify"===e.textAlign?(n[1].horizontalAlignment="Left",n[1].setOffsetWithRespectToBounds(.5,0,null)):n[1].childNodes.length>1&&"Justify"===e.textAlign&&(n[1].horizontalAlignment="Center",n[1].setOffsetWithRespectToBounds(0,0,null))))}function Gr(e,t){return e.replace(/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*[\d.]+\s*\)/,(function(e,i,n,o){return"rgba("+i+","+n+","+o+","+t+")"}))}var Jr=function(){return(Jr=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Kr(e){var t,i=[];this.pdfViewer.clipboardData.pasteIndex=1;for(var n=0;n<e.length;n++)t=u(e[n]),i.push(t);return i}function Qr(e,t){var i=this.pdfViewer.viewerBase.getZoomFactor(),n=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),e||this.pdfViewer.clipboardData.clipObject){var o=e?this.getNewObject(e):this.pdfViewer.clipboardData.clipObject,s=o[0].formFieldAnnotationType;if(o&&(this.pdfViewer.formDesignerInteraction||sf.base.isNullOrUndefined(s))){var a={};0!==this.pdfViewer.clipboardData.pasteIndex&&this.pdfViewer.clearSelection(t);for(var r=0,d=o;r<d.length;r++){var h=d[r];if(!sf.base.isNullOrUndefined(h.formFieldAnnotationType)){var p=this.pdfViewer.formDesignerModule.splitFormFieldName(h),c=0;this.pdfViewer.formDesignerModule&&(this.pdfViewer.formDesignerModule.setFormFieldIndex(),c=this.pdfViewer.formDesignerModule.formFieldIndex,h.name=p+c)}a[h.id]=h}for(var f=0;f<o.length;f++){h=o[f];var m=this.pdfViewer.viewerBase.getElement("_pageDiv_"+t);if(sf.base.isNullOrUndefined(h.formFieldAnnotationType)){var g=event;if(!g||g.clientX||g.clientY||(g={clientX:this.pdfViewer.viewerBase.mouseLeft,clientY:this.pdfViewer.viewerBase.mouseTop}),g=this.pdfViewer.viewerBase.mouseDownEvent,this.pdfViewer.viewerBase.isTouchDesignerMode&&(g={clientX:this.pdfViewer.viewerBase.touchClientX,clientY:this.pdfViewer.viewerBase.touchClientY}),l(h))this.calculateCopyPosition(h,m,g);else if(m){var w=m.getBoundingClientRect();if("Redaction"===h.shapeAnnotationType){var y=h.bounds.width,v=h.bounds.height,b=(g.clientX-w.left)/i,S=(g.clientY-w.top)/i;b+y>w.width-10&&(b=w.width-y-10),S+v>w.height-10&&(S=w.height-v-10),b=Math.max(b,10),S=Math.max(S,10),h.bounds.x=b,h.bounds.y=S}else h.bounds.x=(g.clientX-w.left)/i,h.bounds.y=(g.clientY-w.top)/i}}else 0!==this.pdfViewer.clipboardData.pasteIndex&&(h.bounds.x+=10,h.bounds.y+=10,h.signatureBound&&(h.signatureBound.x+=10/i,h.signatureBound.y+=10/i));var A=u(h);A.pageIndex!==t&&(A.pageIndex=t),"Cut"!==this.pdfViewer.viewerBase.contextMenuModule.previousAction?(A.id+=sf.drawings.randomId(),this.pdfViewer.annotationModule&&"HandWrittenSignature"!==A.shapeAnnotationType&&(A.annotName=A.id,this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(A,o[0],!1)),"SignatureText"!==A.shapeAnnotationType&&"HandWrittenSignature"!==A.shapeAnnotationType&&"SignatureImage"!==A.shapeAnnotationType||this.pdfViewer.viewerBase.signatureModule.storeSignatureData(A.pageIndex,A),sf.base.isNullOrUndefined(A.formFieldAnnotationType)&&this.pdfViewer.annotation.addAction(A.pageIndex,null,A,"Addition","",A,A)):(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationCollection(A,o[0],!0),"SignatureText"!==A.shapeAnnotationType&&"HandWrittenSignature"!==A.shapeAnnotationType&&"SignatureImage"!==A.shapeAnnotationType||this.pdfViewer.viewerBase.signatureModule.storeSignatureData(A.pageIndex,A),sf.base.isNullOrUndefined(A.formFieldAnnotationType)&&this.pdfViewer.annotation.addAction(A.pageIndex,null,A,"Addition","",A,A));var x=void 0;if(sf.base.isNullOrUndefined(A.formFieldAnnotationType)&&(x=this.add(A)),("FreeText"===A.shapeAnnotationType||A.enableShapeLabel)&&x&&this.nodePropertyChange(x,{}),!sf.base.isNullOrUndefined(A.formFieldAnnotationType)){var V=Jr({},A);delete V.formFieldAnnotationType,this.pdfViewer.formDesignerModule.drawFormField(V),this.pdfViewer.annotationModule.addAction(A.pageNumber,null,A,"Addition","",A,A)}this.pdfViewer.select([A.id],this.pdfViewer.annotationSelectorSettings),sf.base.isNullOrUndefined(A.formFieldAnnotationType)&&this.pdfViewer.annotationModule.triggerAnnotationAddEvent(A)}}if(this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer&&this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0);var C=document.getElementById(this.pdfViewer.dataId+"_viewerContainer");null!=C&&C.focus()}this.pdfViewer.clipboardData.pasteIndex++}this.pdfViewer.enableServerDataBinding(n,!0)}function $r(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.removedAnnotationCollection=[]),this.pdfViewer.clipboardData.pasteIndex=0,this.pdfViewer.clipboardData.clipObject=this.copyObjects(),this.pdfViewer.renderDrawing(void 0,e),this.pdfViewer.enableServerDataBinding(t,!0)}function el(){var e=[],t=[];if(this.pdfViewer.clipboardData.childTable={},this.pdfViewer.selectedItems.annotations.length>0){e=this.pdfViewer.selectedItems.annotations;for(var i=0;i<e.length;i++){var n=u(e[i]);t.push(n)}}if(this.pdfViewer.selectedItems.formFields.length>0){var o=this.pdfViewer.selectedItems.formFields[0],s=Jr({},this.pdfViewer.formDesignerModule.getFormFieldByID(o.id));s.formFieldAnnotationType=o.formFieldAnnotationType,(e=[s]).forEach((function(e){t.push(u(e))}))}if(0===this.pdfViewer.clipboardData.pasteIndex)for(var a=0,r=e;a<r.length;a++){var l=r[a];if(this.pdfViewer.nameTable[l.id])if(l.formFieldAnnotationType){var d=Jr({},this.pdfViewer.formDesignerModule.getFormFieldByID(l.id));this.pdfViewer.formDesignerModule.deleteFormFieldById(l.id),this.pdfViewer.annotation.addAction(d.pageNumber,0,d,"DeleteFormField",null,d,d)}else l.annotName?this.pdfViewer.annotationModule.deleteAnnotationById(l.annotName):this.pdfViewer.annotationModule.deleteAnnotation()}return this.sortByZIndex(t,"zIndex"),t}var tl=function(){function e(e){this.isDynamicStamps=!1,this.pdfViewer=e,this.renderer=new sf.drawings.DrawingRenderer("this.pdfViewer.dataId",!1),this.svgRenderer=new sf.drawings.SvgRenderer}return e.prototype.renderLabels=function(e){pe.call(this,e)},e.prototype.createNewZindexTable=function(e){return q.call(this,e)},e.prototype.getPageTable=function(e){return Z.call(this,e)},e.prototype.setZIndex=function(e,t){Y.call(this,t)},e.prototype.initObject=function(e){return N.call(this,e)},e.prototype.initNode=function(e){F.call(this,e)},e.prototype.init=function(e,t){return D.call(this,e,t)},e.prototype.initFormFields=function(e,t,i){return function(e,t,i){switch(e.formFieldAnnotationType){case"Textbox":case"Password":case"CheckBox":case"RadioButton":case"DropDown":case"ListBox":case"SignatureField":case"InitialField":case"Button":(t=new w).id=e.id+"_content",i.children.push(t)}return t}(e,t,i)},e.prototype.initAnnotationObject=function(e,t,i,n,o,s,a,r,l,d,h){return P.call(this,e,t,i,n,o,s,a,r,l,d,h)},e.prototype.textElement=function(e){return function(e){var t=new sf.drawings.TextElement;return h(e,t),t.horizontalAlignment="Center",t.verticalAlignment="SignatureText"===e.shapeAnnotationType?"Center":"Top",t.relativeMode="Object",t.setOffsetWithRespectToBounds(.5,.5,"Absolute"),t}(e)},e.prototype.setNodePosition=function(e,t){!function(e,t){if("Perimeter"===e.shapeAnnotationType)t.offsetX=e.bounds.x+e.bounds.width/2,t.offsetY=e.bounds.y+e.bounds.height/2;else if("Radius"===e.shapeAnnotationType){var i={x:e.bounds.x+e.bounds.width/2+e.bounds.width/4,y:e.bounds.y+e.bounds.height/2},n={x:e.bounds.x+e.bounds.width/2,y:e.bounds.y+e.bounds.height/2},o=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(o,e.rotateAngle,n.x,n.y);var s=sf.drawings.transformPointByMatrix(o,i),a={x:s.x,y:s.y};t.offsetX=a.x,t.offsetY=a.y,t.width=e.bounds.width/2}}(t,e)},e.prototype.initContainer=function(e){return function(e){e.id||(e.id=sf.drawings.randomId());var t=new sf.drawings.Canvas;return t.id=e.id,t.offsetX=e.bounds.x+.5*e.bounds.width,t.offsetY=e.bounds.y+.5*e.bounds.height,t.style.fill="transparent",t.style.strokeColor="transparent",t.rotateAngle=e.rotateAngle,e.wrapper=t,t}(e)},e.prototype.initLine=function(e){return W.call(this,e)},e.prototype.add=function(e){var t=this.pdfViewer.allowServerDataBinding;return this.pdfViewer.enableServerDataBinding(!1),e.formFieldAnnotationType&&this.pdfViewer.formDesignerModule?(sf.base.isNullOrUndefined(e.pageNumber)||(e.pageIndex=e.pageNumber-1),e.rotateAngle||(e.rotateAngle=0),sf.base.isNullOrUndefined(e.bounds)&&(e.bounds={x:0,y:0,left:0,top:0,width:0,height:0}),e.zIndex=-1,e=this.initObject(e),this.pdfViewer.formFields.push(e)):(e=this.updateAnnotationObject(e),e=this.initObject(e),this.pdfViewer.annotations.push(e)),this.pdfViewer.enableServerDataBinding(t,!0),e},e.prototype.updateAnnotationObject=function(e){return function(e){var t=new U;return e&&(e.id&&(t.id=e.id),e.shapeAnnotationType&&(t.shapeAnnotationType=e.shapeAnnotationType),e.type&&(t.type=e.type),e.formFieldAnnotationType&&(t.formFieldAnnotationType=e.formFieldAnnotationType),e.measureType&&(t.measureType=e.measureType),e.author&&(t.author=e.author),e.modifiedDate&&(t.modifiedDate=e.modifiedDate),e.subject&&(t.subject=e.subject),e.notes&&(t.notes=e.notes),e.isCommentLock&&(t.isCommentLock=e.isCommentLock),e.strokeColor&&(t.strokeColor=e.strokeColor),e.fillColor&&(t.fillColor=e.fillColor),e.stampStrokeColor&&(t.stampStrokeColor=e.stampStrokeColor),e.stampFillColor&&(t.stampFillColor=e.stampFillColor),e.data&&(t.data=e.data),null!==e.opacity&&void 0!==e.opacity&&(t.opacity=e.opacity),sf.base.isNullOrUndefined(e.thickness)||(t.thickness=e.thickness),e.borderStyle&&(t.borderStyle=e.borderStyle),e.borderDashArray&&(t.borderDashArray=e.borderDashArray),e.rotateAngle&&(t.rotateAngle=e.rotateAngle),e.isCloudShape&&(t.isCloudShape=e.isCloudShape),e.cloudIntensity&&(t.cloudIntensity=e.cloudIntensity),sf.base.isNullOrUndefined(e.leaderHeight)||(t.leaderHeight=e.leaderHeight),e.lineHeadStart&&(t.lineHeadStart=e.lineHeadStart),e.lineHeadEnd&&(t.lineHeadEnd=e.lineHeadEnd),e.vertexPoints&&(t.vertexPoints=e.vertexPoints),e.sourcePoint&&(t.sourcePoint=e.sourcePoint),e.sourceDecoraterShapes&&(t.sourceDecoraterShapes=e.sourceDecoraterShapes),e.taregetDecoraterShapes&&(t.taregetDecoraterShapes=e.taregetDecoraterShapes),e.targetPoint&&(t.targetPoint=e.targetPoint),e.segments&&(t.segments=e.segments),e.bounds&&(t.bounds=e.bounds),e.pageIndex&&(t.pageIndex=e.pageIndex),e.zIndex&&(t.zIndex=e.zIndex),e.wrapper&&(t.wrapper=e.wrapper),e.isDynamicStamp&&(t.isDynamicStamp=e.isDynamicStamp),e.dynamicText&&(t.dynamicText=e.dynamicText),e.annotName&&(t.annotName=e.annotName),e.review&&(t.review=e.review),e.comments&&(t.comments=e.comments),e.fontColor&&(t.fontColor=e.fontColor),e.fontSize&&(t.fontSize=e.fontSize),e.fontFamily&&(t.fontFamily=e.fontFamily),e.fontStyle&&(t.fontStyle=e.fontStyle),e.enableShapeLabel&&(t.enableShapeLabel=e.enableShapeLabel),e.labelContent&&(t.labelContent=e.labelContent),e.labelFillColor&&(t.labelFillColor=e.labelFillColor),e.labelMaxLength&&(t.labelMaxLength=e.labelMaxLength),e.labelOpacity&&(t.labelOpacity=e.labelOpacity),e.annotationSelectorSettings&&(t.annotationSelectorSettings=e.annotationSelectorSettings),e.labelBorderColor&&(t.labelBorderColor=e.labelBorderColor),e.textAlign&&(t.textAlign=e.textAlign),e.signatureName&&(t.signatureName=e.signatureName),e.minHeight&&(t.minHeight=e.minHeight),e.minWidth&&(t.minWidth=e.minWidth),e.maxHeight&&(t.maxHeight=e.maxHeight),e.maxWidth&&(t.maxWidth=e.maxWidth),e.isLocked&&(t.isLocked=e.isLocked),e.annotationAddMode&&(t.annotationAddMode=e.annotationAddMode),e.annotationSettings&&(t.annotationSettings=e.annotationSettings),e.previousFontSize&&(t.previousFontSize=e.previousFontSize),e.font&&(t.font=e.font),e.labelBounds&&(t.labelBounds=e.labelBounds),e.customData&&(t.customData=e.customData),e.allowedInteractions&&(t.allowedInteractions=e.allowedInteractions),sf.base.isNullOrUndefined(e.isPrint)||(t.isPrint=e.isPrint),sf.base.isNullOrUndefined(e.isReadonly)||(t.isReadonly=e.isReadonly),e.overlayText&&(t.overlayText=e.overlayText),sf.base.isNullOrUndefined(e.isRepeat)||(t.isRepeat=e.isRepeat),e.markerBorderColor&&(t.markerBorderColor=e.markerBorderColor),e.markerFillColor&&(t.markerFillColor=e.markerFillColor),e.markerOpacity&&(t.markerOpacity=e.markerOpacity)),t}(e)},e.prototype.remove=function(e){var t=this.pdfViewer.allowServerDataBinding;this.pdfViewer.enableServerDataBinding(!1);for(var i=e.pageIndex,n=0;n<this.pdfViewer.annotations.length;n++){var o=this.pdfViewer.annotations[n];if(o.id&&(o.id===e.id||o.id.split("_")[0]===e.id)||o.wrapper&&o.wrapper.id===e.id){this.pdfViewer.annotations.splice(n,1);for(var s=this.getPageObjects(e.pageIndex),a=0;a<s.length;a++)s[a].id===e.id&&(s.splice(a,1),"Path"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType?this.refreshCanvasDiagramLayer(void 0,i,e.id):this.pdfViewer.renderDrawing(void 0,i))}}for(n=0;n<this.pdfViewer.formFields.length;n++){var r=this.pdfViewer.formFields[parseInt(n.toString(),10)];if(r.id===e.id||r.wrapper.id===e.id){this.pdfViewer.formFields.splice(n,1);for(s=this.getPageObjects(e.pageIndex),a=0;a<s.length;a++){var l=s[parseInt(a.toString(),10)];if(l.id===e.id){s.splice(a,1);break}l&&l.id&&-1!==l.id.indexOf(e.id)&&s.splice(a,1)}}}this.pdfViewer.enableServerDataBinding(t,!0)},e.prototype.getPageObjects=function(e){return this.getPageTable(e).objects},e.prototype.refreshCanvasDiagramLayer=function(e,t,i){oe.call(this,e,t,i)},e.prototype.isPrintRenderAnnotationVisible=function(e,t){return ae.call(this,e,t)},e.prototype.annotationCallback=function(e){return se.call(this,e)},e.prototype.clearHighlighter=function(e){Q.call(this,e)},e.prototype.getSelectorElement=function(e,t){return ie.call(this,e,t)},e.prototype.getAdornerLayerSvg=function(e,t){return ee.call(this,e,t)},e.prototype.clearSelectorLayer=function(e){G.call(this,e)},e.prototype.renderSelector=function(e,t,i,n){J.call(this,e,t,i,n)},e.prototype.rotate=function(e,t,i,n){if(e)if(i=i||{x:e.wrapper.offsetX,y:e.wrapper.offsetY},e instanceof r||!e.shapeAnnotationType){e.rotateAngle+=t,e.wrapper.rotateAngle+=t;var o=[];o=o.concat(e.annotations),this.rotateObjects(e,o,t,i,null,n)}else this.rotateObjects(e,[e],t,i)},e.prototype.rotateObjects=function(e,t,i,n,o,s){n=ne.call(this,n,i,t,o,e,s)},e.prototype.getParentSvg=function(e,t,i){return te.call(this,e,t,i)},e.prototype.renderBorder=function(e,t,i,n,o,s,a,r){X.call(this,e,t,i,n,o,s,a,r)},e.prototype.getSignBorder=function(e,t,i){he.call(this,e,t,i)},e.prototype.getBorderSelector=function(e,t){de.call(this,e,t)},e.prototype.renderCircularHandle=function(e,t,i,n,o,s,a,r,l,d,h,p,c,u){K.call(this,e,t,i,n,o,s,a,r,l,d,h,p,c,u)},e.prototype.getShapeSize=function(e,t,i,n){re.call(this,e,t,i,n)},e.prototype.getShape=function(e,t){var i;if(t&&"object"!==n(t)&&""!==t){var o=JSON.parse(t);i=sf.base.isNullOrUndefined(o.resizerShape)||"Square"===o.resizerShape?"Square":o.resizerShape}else{o=this.pdfViewer.annotationSelectorSettings;i=sf.base.isNullOrUndefined(o.resizerShape)||"Square"===o.resizerShape?"Square":o.resizerShape,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.lineSettings.annotationSelectorSettings.resizerShape:"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerShape:"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerShape:"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.circleSettings.annotationSelectorSettings.resizerShape:"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerShape:"Distance"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerShape:"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerShape:"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.stampSettings.annotationSelectorSettings.resizerShape:"Image"===e&&this.pdfViewer.customStampSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.customStampSettings.annotationSelectorSettings.resizerShape:"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerShape:("HandWrittenSignature"===e||"SignatureText"===e||"SignatureImage"===e)&&this.pdfViewer.handWrittenSignatureSettings&&this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerShape:"Perimeter"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.perimeterSettings.annotationSelectorSettings.resizerShape:"Area"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.areaSettings.annotationSelectorSettings.resizerShape:"Volume"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.volumeSettings.annotationSelectorSettings.resizerShape:"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerShape:"Redaction"===e&&this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.annotationSelectorSettings&&(i=sf.base.isNullOrUndefined(this.pdfViewer.redactionSettings.annotationSelectorSettings.resizerShape)||"Square"===this.pdfViewer.redactionSettings.annotationSelectorSettings.resizerShape?"Square":this.pdfViewer.redactionSettings.annotationSelectorSettings.resizerShape)}return i},e.prototype.getResizerColors=function(e,t,i,n){le.call(this,e,t,i,n)},e.prototype.renderRotateThumb=function(e,t,i,n,o){new sf.drawings.PathElement;var s,a=e.offsetY-e.actualSize.height*e.pivot.y,r=e.offsetX-e.actualSize.width*e.pivot.x+e.pivot.x*e.actualSize.width,l=a;if(s={x:r=(r+i.tx)*i.scale,y:(l=(l+i.ty)*i.scale)-25},0!==e.rotateAngle||0!==e.parentTransform){var d=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(d,e.rotateAngle+e.parentTransform,(i.tx+e.offsetX)*i.scale,(i.ty+e.offsetY)*i.scale),s=sf.drawings.transformPointByMatrix(d,s)}var h=c(e);h.stroke="black",h.strokeWidth=1,h.opacity=1,h.fill="#FF4081",h.centerX=s.x,h.centerY=s.y,h.radius=4*this.pdfViewer.viewerBase.getZoomFactor(),h.angle=0,h.visible=!0,h.class="e-diagram-rotate-handle",h.id="rotateThumb",this.svgRenderer.drawCircle(t,h,sf.drawings.ThumbsConstraints.Rotate,{"aria-label":""})},e.prototype.renderResizeHandle=function(e,t,i,n,o,s,a,r,l,d,h,p){ce.call(this,e,t,i,n,o,s,a,r,l,d,h,p)},e.prototype.getAllowedInteractions=function(e){return function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++)if("None"!==e[0]&&"Resize"===e[t])return!1;return!0}(e)},e.prototype.getResizerLocation=function(e,t){var i;if(t&&"object"!==n(t)&&""!==t){var o=JSON.parse(t);i=sf.base.isNullOrUndefined(o.resizerLocation)||3===o.resizerLocation?3:o.resizerLocation}else{o=this.pdfViewer.annotationSelectorSettings;i=sf.base.isNullOrUndefined(o.resizerLocation)||3===o.resizerLocation?3:o.resizerLocation,"Line"===e&&this.pdfViewer.lineSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.lineSettings.annotationSelectorSettings.resizerLocation:"LineWidthArrowHead"===e&&this.pdfViewer.arrowSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.arrowSettings.annotationSelectorSettings.resizerLocation:"Rectangle"===e&&this.pdfViewer.rectangleSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.rectangleSettings.annotationSelectorSettings.resizerLocation:"Ellipse"===e&&this.pdfViewer.circleSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.circleSettings.annotationSelectorSettings.resizerLocation:"Polygon"===e&&this.pdfViewer.polygonSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.polygonSettings.annotationSelectorSettings.resizerLocation:"Distance"===e?i=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.distanceSettings.annotationSelectorSettings.resizerLocation:"Radius"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.radiusSettings.annotationSelectorSettings.resizerLocation:"Stamp"===e&&this.pdfViewer.stampSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.stampSettings.annotationSelectorSettings.resizerLocation:"FreeText"===e&&this.pdfViewer.freeTextSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.freeTextSettings.annotationSelectorSettings.resizerLocation:"HandWrittenSignature"!==e&&"SignatureText"!==e&&"SignatureImage"!==e||!this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings?"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings?i=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings.resizerLocation:"Redaction"===e&&this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.annotationSelectorSettings&&(i=sf.base.isNullOrUndefined(this.pdfViewer.redactionSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.redactionSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.redactionSettings.annotationSelectorSettings.resizerLocation):i=sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation)||3===this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation?3:this.pdfViewer.handWrittenSignatureSettings.annotationSelectorSettings.resizerLocation}return i},e.prototype.renderPivotLine=function(e,t,i,n,o){ue.call(this,e,t,i,n,o)},e.prototype.renderEndPointHandle=function(e,t,i,n,o,s,a,r){n=$.call(this,n,e,t,i,o,r)},e.prototype.initSelectorWrapper=function(){this.pdfViewer.selectedItems;this.initWrapper(this)},e.prototype.initWrapper=function(e){var t=new sf.drawings.Container;if(t.measureChildren=!1,t.children=[],this.pdfViewer.selectedItems.formFields&&this.pdfViewer.selectedItems.formFields.length>0)for(var i=0;i<this.pdfViewer.selectedItems.formFields.length;i++){var n=e.pdfViewer.nameTable[this.pdfViewer.selectedItems.formFields[i].id].wrapper;t.children.push(n)}else if(this.pdfViewer.selectedItems.annotations)for(i=0;i<this.pdfViewer.selectedItems.annotations.length;i++)if(!sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[i])){n=e.pdfViewer.nameTable[this.pdfViewer.selectedItems.annotations[i].id].wrapper;t.children.push(n),this.pdfViewer.selectedItems.wrapper=t}return this.pdfViewer.selectedItems.wrapper=t,t},e.prototype.select=function(e,t,i,n){for(var o=this.pdfViewer.selectedItems,s=0;s<e.length;s++){var a=this.pdfViewer.nameTable[e[s]];if(a&&a.formFieldAnnotationType&&this.pdfViewer.formDesignerInteraction)o.formFields.push(a),this.initSelectorWrapper(),o.wrapper.children.push(a.wrapper),this.renderSelector(a.pageIndex,t,a,!0);else if(a&&!a.formFieldAnnotationType&&!(a instanceof r)&&a.wrapper.visible){var l=void 0;a.annotationSettings?(l=a.annotationSettings).isLock=JSON.parse(l.isLock):a.formFieldAnnotationType||(l=this.pdfViewer.annotationModule.findAnnotationSettings(a,!0),a.annotationSettings=l);var d=!a.formFieldAnnotationType&&l.isLock;l&&l.isLock&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",a)&&(d=!1),d||(o.annotations.push(a),this.initSelectorWrapper(),o.wrapper.rotateAngle=o.rotateAngle=0,o.wrapper.children.push(a.wrapper),n||this.renderSelector(a.pageIndex,t,a,!0))}}},e.prototype.dragSelectedObjects=function(e,t,i,n,o){var s=this.pdfViewer.selectedItems;return this.drag(s,e,t,n,o),!0},e.prototype.drag=function(e,t,i,n,o){Hr.call(this,e,t,i,n,o)},e.prototype.dragAnnotation=function(e,t,i){Ur.call(this,e,t,i)},e.prototype.dragControlPoint=function(e,t,i,n,o){return jr.call(this,e,t,i,n,o)},e.prototype.updateEndPoint=function(e){this.nodePropertyChange(e,{vertexPoints:e.vertexPoints}),this.renderSelector(e.pageIndex)},e.prototype.nodePropertyChange=function(e,t){Xr.call(this,e,t)},e.prototype.fontSizeCalculation=function(e,t,i){return L.call(this,e,t,i)},e.prototype.setLineDistance=function(e,t,i,n){!function(e,t,i,n){var o;o=e?M(t,i[1],i[0],e):M(t,i[0],i[1],e),n.data=o.data,n.offsetX=o.offsetX,n.offsetY=o.offsetY,n.rotateAngle=o.rotateAngle,n.width=o.width,n.height=o.height,n.pivot=o.pivot,n.canMeasurePath=!0,n.isDirt=!0}(n,e,t,i)},e.prototype.scaleSelectedItems=function(e,t,i){var n=this.pdfViewer.selectedItems;return this.scale(n,e,t,i)},e.prototype.scale=function(e,t,i,n){return Yr.call(this,e,t,i,n)},e.prototype.scaleObject=function(e,t,i,n,o,s){Zr.call(this,e,t,i,n,o,s)},e.prototype.scaleAnnotation=function(e,t,i,n,o){return qr.call(this,e,t,i,n,o)},e.prototype.checkBoundaryConstraints=function(e,t,i,n,o,s){return me.call(this,e,t,i,n,o,s)},e.prototype.RestrictStamp=function(e){return ge.call(this,e)},e.prototype.getShapeBounds=function(e){return function(e){var t=new sf.drawings.Rect,i=sf.drawings.cornersPointsBeforeRotation(e),n=i.middleLeft,o=i.topCenter,s=i.bottomCenter,a=i.middleRight,r=i.topLeft,l=i.topRight,d=i.bottomLeft,h=i.bottomRight;if(e.corners={topLeft:r,topCenter:o,topRight:l,middleLeft:n,middleRight:a,bottomLeft:d,bottomCenter:s,bottomRight:h},0!==e.rotateAngle||0!==e.parentTransform){var p=sf.drawings.identityMatrix();sf.drawings.rotateMatrix(p,e.rotateAngle+e.parentTransform,e.offsetX,e.offsetY),e.corners.topLeft=r=sf.drawings.transformPointByMatrix(p,r),e.corners.topCenter=o=sf.drawings.transformPointByMatrix(p,o),e.corners.topRight=l=sf.drawings.transformPointByMatrix(p,l),e.corners.middleLeft=n=sf.drawings.transformPointByMatrix(p,n),e.corners.middleRight=a=sf.drawings.transformPointByMatrix(p,a),e.corners.bottomLeft=d=sf.drawings.transformPointByMatrix(p,d),e.corners.bottomCenter=s=sf.drawings.transformPointByMatrix(p,s),e.corners.bottomRight=h=sf.drawings.transformPointByMatrix(p,h)}return t=sf.drawings.Rect.toBounds([r,l,d,h]),e.corners.left=t.left,e.corners.right=t.right,e.corners.top=t.top,e.corners.bottom=t.bottom,e.corners.center=t.center,e.corners.width=t.width,e.corners.height=t.height,t}(e)},e.prototype.getShapePoint=function(e,t,i,n,o,s,a,r){return function(e,t,i,n,o,s,a,r){var l={x:0,y:0},d=sf.drawings.identityMatrix();switch(sf.drawings.rotateMatrix(d,e,t,i),n.x){case 1:switch(n.y){case 1:l=sf.drawings.transformPointByMatrix(d,{x:o+s,y:a+r});break;case 0:l=sf.drawings.transformPointByMatrix(d,{x:o+s,y:a});break;case.5:l=sf.drawings.transformPointByMatrix(d,{x:o+s,y:a+r/2})}break;case 0:switch(n.y){case.5:l=sf.drawings.transformPointByMatrix(d,{x:o,y:a+r/2});break;case 1:l=sf.drawings.transformPointByMatrix(d,{x:o,y:a+r});break;case 0:l=sf.drawings.transformPointByMatrix(d,{x:o,y:a})}break;case.5:switch(n.y){case 0:l=sf.drawings.transformPointByMatrix(d,{x:o+s/2,y:a});break;case.5:l=sf.drawings.transformPointByMatrix(d,{x:o+s/2,y:a+r/2});break;case 1:l=sf.drawings.transformPointByMatrix(d,{x:o+s/2,y:a+r})}}return{x:l.x,y:l.y}}(o,s,a,r,e,i,t,n)},e.prototype.dragConnectorEnds=function(e,t,i,n,o,s,a){return _r.call(this,e,t,i,n,o,s,a)},e.prototype.dragSourceEnd=function(e,t,i,n){return Wr.call(this,e,t,i,n)},e.prototype.updateConnector=function(e,t){!function(e,t){e.vertexPoints=t,v(e,t,e.wrapper.children[0]),e.sourcePoint;var i=e.vertexPoints,n=e.wrapper.children[0];n.canMeasurePath=!0;for(var o=0;o<e.wrapper.children.length;o++)n=e.wrapper.children[o],"Polygon"!==e.shapeAnnotationType&&(n.id.indexOf("srcDec")>-1&&b(e,n,t[0],i[1],!0),e.targetPoint,n.id.indexOf("tarDec")>-1&&b(e,n,t[t.length-1],i[i.length-2],!1))}(e,t)},e.prototype.copy=function(){return this.pdfViewer.clipboardData.pasteIndex=1,this.pdfViewer.clipboardData.clipObject=this.copyObjects(),this.pdfViewer.clipboardData.clipObject},e.prototype.copyObjects=function(){return el.call(this)},e.prototype.getNewObject=function(e){return Kr.call(this,e)},e.prototype.paste=function(e,t){Qr.call(this,e,t)},e.prototype.calculateCopyPosition=function(e,t,i){fe.call(this,e,t,i)},e.prototype.cut=function(e){$r.call(this,e)},e.prototype.sortByZIndex=function(e,t){var i=t||"zIndex";return e=e.sort((function(e,t){return e[""+i]-t[""+i]}))},e}();function il(e,t,i,n,o){var s,a,r,l,d=sf.drawings.createHtmlElement("div",{id:o.element.id+n+"_diagramAdornerLayer",style:"width:"+e.width+"px;height:"+e.height+"px;"+t});if(sf.base.Browser.isDevice&&!o.enableDesktopMode&&(d.style.zIndex="10"),!sf.drawings.getDiagramElement(d.id)){var h=o.viewerBase.getElement("_pageDiv_"+n),p=h.getBoundingClientRect(),c=(s=o.element.id+n+"_diagramAdorner_svg",a=p.width,r=p.height,l=document.createElementNS("http://www.w3.org/2000/svg","svg"),sf.drawings.setAttributeSvg(l,{id:s,width:a,height:r}),l);c.setAttribute("class","e-adorner-layer"+n),c.setAttribute("style","pointer-events:none;"),o.adornerSvgLayer=sf.drawings.createSvgElement("g",{id:o.element.id+"_diagramAdorner"}),o.adornerSvgLayer.setAttribute("style"," pointer-events: all; "),c.appendChild(o.adornerSvgLayer),d.appendChild(c),d.style.width=p.width+"px",d.style.height=p.height+"px",h?h.insertBefore(d,h.childNodes[0]):i.parentElement.appendChild(d);var u=sf.drawings.createSvgElement("g",{id:o.element.id+"_SelectorElement"});o.adornerSvgLayer.appendChild(u),sf.drawings.setAttributeSvg(c,{style:"pointer-events:none;"})}o.viewerBase.applyElementStyles(d,n)}function nl(e,t){for(var i=Object.keys(t),n=0;n<i.length;n++)"style"!==i[parseInt(n.toString(),10)]?e.setAttribute(i[parseInt(n.toString(),10)],t[i[parseInt(n.toString(),10)]]):ol(e,t[i[parseInt(n.toString(),10)]])}function ol(e,t){for(var i=t.split(";"),n=0;n<i.length;n++){var o=i[parseInt(n.toString(),10)].split(":");2===o.length&&(e.style[o[0].trim()]=o[1].trim())}}var sl=function(){function e(e,t){this.inputBoxCount=0,this.isFreeTextValueChange=!1,this.isAddAnnotationProgramatically=!1,this.isInuptBoxInFocus=!1,this.freeTextPageNumbers=[],this.notEditedFreeTexts=[],this.selectedText="",this.isTextSelected=!1,this.selectionStart=0,this.selectionEnd=0,this.isBold=!1,this.isItalic=!1,this.isUnderline=!1,this.isStrikethrough=!1,this.isReadonly=!1,this.isMaximumWidthReached=!1,this.previousText="Type Here",this.pdfViewer=e,this.pdfViewerBase=t,this.updateTextProperties(),this.inputBoxElement=document.createElement("textarea"),this.inputBoxElement.style.position="absolute",this.inputBoxElement.style.Width=this.defautWidth,this.inputBoxElement.style.Height=this.defaultHeight,this.inputBoxElement.style.zIndex="5",this.inputBoxElement.style.fontSize=this.fontSize+"px",this.inputBoxElement.className="free-text-input",this.inputBoxElement.style.resize="none",this.inputBoxElement.style.borderColor=this.borderColor,this.inputBoxElement.style.background=this.fillColor,this.inputBoxElement.style.lineHeight="normal",this.inputBoxElement.style.display="inline-block",this.inputBoxElement.style.borderStyle=this.borderStyle,this.inputBoxElement.style.borderWidth=this.borderWidth+"px",this.inputBoxElement.style.padding=this.padding,this.inputBoxElement.style.paddingLeft="4px",this.inputBoxElement.style.paddingTop="3px",this.inputBoxElement.style.borderRadius="2px",this.inputBoxElement.style.verticalAlign="middle",this.inputBoxElement.style.fontFamily=this.fontFamily,this.inputBoxElement.style.color=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",this.inputBoxElement.style.overflow="hidden",this.inputBoxElement.style.wordBreak=this.wordBreak,this.inputBoxElement.readOnly=this.isReadonly,this.inputBoxElement.addEventListener("focusout",this.onFocusOutInputBox.bind(this)),this.inputBoxElement.addEventListener("keydown",this.onKeyDownInputBox.bind(this)),this.inputBoxElement.addEventListener("mouseup",this.onMouseUpInputBox.bind(this)),this.freeTextPageNumbers=[]}return e.prototype.updateTextProperties=function(){this.defautWidth=this.pdfViewer.freeTextSettings.width?this.pdfViewer.freeTextSettings.width:151,this.defaultHeight=this.pdfViewer.freeTextSettings.height?this.pdfViewer.freeTextSettings.height:24.6,this.borderColor=this.pdfViewer.freeTextSettings.borderColor?this.pdfViewer.freeTextSettings.borderColor:"#ffffff00",this.fillColor=this.pdfViewer.freeTextSettings.fillColor?this.pdfViewer.freeTextSettings.fillColor:"#fff",this.borderStyle=this.pdfViewer.freeTextSettings.borderStyle?this.pdfViewer.freeTextSettings.borderStyle:"solid";var e=this.pdfViewer.freeTextSettings.borderThickness||this.pdfViewer.freeTextSettings.borderWidth;if(this.borderWidth=e||1,this.fontSize=this.pdfViewer.freeTextSettings.fontSize?this.pdfViewer.freeTextSettings.fontSize:16,this.opacity=this.pdfViewer.freeTextSettings.opacity?this.pdfViewer.freeTextSettings.opacity:1,this.fontColor=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",this.author="Guest"!==this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",this.pdfViewer.freeTextSettings.fontFamily){var t=this.pdfViewer.freeTextSettings.fontFamily;this.fontFamily="Helvetica"===t||"Times New Roman"===t||"Courier"===t||"Symbol"===t||"ZapfDingbats"===t?t:"Helvetica"}else this.fontFamily="Helvetica";this.textAlign=this.pdfViewer.freeTextSettings.textAlignment?this.pdfViewer.freeTextSettings.textAlignment:"Left",this.defaultText=this.pdfViewer.freeTextSettings.defaultText?this.pdfViewer.freeTextSettings.defaultText:"Type here",this.isReadonly=!1,this.pdfViewer.freeTextSettings.enableAutoFit?(this.wordBreak="break-all",this.padding="2px"):(this.padding="0px",this.wordBreak="break-word"),(this.pdfViewer.freeTextSettings.isLock||this.pdfViewer.annotationSettings.isLock||this.pdfViewer.freeTextSettings.isReadonly)&&(this.isReadonly=!0),1===this.pdfViewer.freeTextSettings.fontStyle?this.isBold=!0:2===this.pdfViewer.freeTextSettings.fontStyle?this.isItalic=!0:4===this.pdfViewer.freeTextSettings.fontStyle?this.isUnderline=!0:8===this.pdfViewer.freeTextSettings.fontStyle?this.isStrikethrough=!0:this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Italic)?(this.isBold=!0,this.isItalic=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Underline)?(this.isBold=!0,this.isUnderline=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Strikethrough)?(this.isBold=!0,this.isStrikethrough=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Italic|Pt.Underline)?(this.isBold=!0,this.isItalic=!0,this.isUnderline=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Italic|Pt.Strikethrough)?(this.isBold=!0,this.isItalic=!0,this.isStrikethrough=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Underline|Pt.Strikethrough)?(this.isBold=!0,this.isUnderline=!0,this.isStrikethrough=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Italic|Pt.Underline)&&(this.isUnderline=!0,this.isItalic=!0)},e.prototype.renderFreeTextAnnotations=function(e,t,i,n){var o=!1;if(!i)for(var s=0;s<this.freeTextPageNumbers.length;s++)if(this.freeTextPageNumbers[s]===t){o=!0;break}if(e&&!o&&e.length>=1){this.freeTextPageNumbers.push(t);for(var a=0;a<e.length;a++){var r=e[a];if(r.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(r,t,r.AnnotType),r.AnnotType){var l=null;if(r.VertexPoints){l=[];for(var d=0;d<r.VertexPoints.length;d++){var h={x:r.VertexPoints[d].X,y:r.VertexPoints[d].Y};l.push(h)}}r.AnnotationSettings=r.AnnotationSettings?r.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);var p=this.getPaddingValues(r.FontSize),c=(p[0],p[1],sf.base.isNullOrUndefined(r.Bounds.X)?r.Bounds.x:r.Bounds.X-.5),u=sf.base.isNullOrUndefined(r.Bounds.Y)?r.Bounds.y:r.Bounds.Y-.5,f=r.Bounds.Width?r.Bounds.Width:r.Bounds.width,m=r.Bounds.Height?r.Bounds.Height:r.Bounds.height,g=!!r.isAddAnnotationProgramatically&&r.isAddAnnotationProgramatically,w=this.getRotationValue(t,g),y=(r.Rotate,r.PageRotation);1===Math.sign(r.Rotate)?r.Rotate=-r.Rotate+w:r.Rotate=r.Rotate+w;var v=Math.abs(r.Rotate);if(i&&w!==y&&this.pdfViewerBase.isJsonImported){var b=this.pdfViewerBase.pageSize[t],S=r.Bounds.X,A=r.Bounds.Y,x=f,V=m;if(y>0){var C=y/90;1===C?(m=f,f=r.Bounds.Height,c=r.Bounds.Y,u=270!==w?b.height-r.Bounds.X-r.Bounds.Width:b.width-r.Bounds.X-r.Bounds.Width):2===C?270!==w&&90!==w?(c=b.width-r.Bounds.X-r.Bounds.Width,u=b.height-r.Bounds.Y-r.Bounds.Height):(c=b.height-r.Bounds.X-r.Bounds.Width,u=b.width-r.Bounds.Y-r.Bounds.Height):3===C&&(m=f,f=r.Bounds.Height,c=90!==w?b.width-r.Bounds.Y-f:b.height-r.Bounds.Y-f,u=r.Bounds.X),S=c,A=u,x=f,V=m}var I=w/90%4;1===I?(m=f,f=V,c=b.width-A-V-.5,u=S-.5):2===I?(c=b.width-S-x-.5,u=b.height-A-V-.5):3===I?(m=f,f=V,c=A-.5,u=b.height-S-m-.5):0===I&&(c=S-.5,u=A-.5)}if(90===v||270===v){var k=f;c=c-(f=m)/2+(m=k)/2,u+=f/2-m/2}var M=!0;M=sf.base.isNullOrUndefined(r.IsPrint)?sf.base.isNullOrUndefined(r.isPrint)?r.AnnotationSettings.isPrint:r.isPrint:r.IsPrint,r.allowedInteractions=r.AllowedInteractions?r.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(r);var T={author:r.Author,modifiedDate:r.ModifiedDate,subject:r.Subject,id:"freetext"+this.inputBoxCount,rotateAngle:r.Rotate,dynamicText:r.MarkupText,strokeColor:r.StrokeColor,thickness:r.Thickness,fillColor:r.FillColor,bounds:{x:c,y:u,left:c,top:u,width:f,height:m,right:r.Bounds.Right,bottom:r.Bounds.Bottom},annotName:r.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:r.Opacity,fontColor:r.FontColor,fontSize:r.FontSize,pageRotation:w,fontFamily:r.FontFamily,notes:r.MarkupText,textAlign:r.TextAlign,comments:this.pdfViewer.annotationModule.getAnnotationComments(r.Comments,r,r.Author),review:{state:r.State,stateModel:r.StateModel,modifiedDate:r.ModifiedDate,author:r.Author},font:{isBold:r.Font.Bold,isItalic:r.Font.Italic,isStrikeout:r.Font.Strikeout,isUnderline:r.Font.Underline},annotationSelectorSettings:this.getSettings(r),annotationSettings:r.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(r),annotationAddMode:r.annotationAddMode,allowedInteractions:r.allowedInteractions,type:"FreeText",isFreeTextEdited:r.IsFreeTextEdited,isPrint:M,isLocked:r.IsLocked,isCommentLock:r.IsCommentLock,isReadonly:r.IsReadonly};r.IsLocked&&(T.isLocked=r.IsLocked),(g||i)&&(T.isFreeTextEdited=!0),i&&(T.previousFontSize=r.FontSize?r.FontSize:this.fontSize);var E=this.pdfViewer.add(T);if(sf.base.isNullOrUndefined(n)||this.pdfViewer.renderDrawing(n,t),this.pdfViewer.annotationModule.storeAnnotations(t,T,"_annotations_freetext"),this.isAddAnnotationProgramatically){var B={opacity:T.opacity,borderColor:T.strokeColor,borderWidth:T.thickness,author:r.author,subject:r.subject,modifiedDate:r.modifiedDate,fillColor:T.fillColor,fontSize:T.fontSize,width:T.bounds.width,height:T.bounds.height,fontColor:T.fontColor,fontFamily:T.fontFamily,defaultText:T.dynamicText,fontStyle:T.font,textAlignment:T.textAlign};this.pdfViewer.fireAnnotationAdd(T.pageIndex,T.annotName,"FreeText",T.bounds,B)}this.inputBoxCount+=1,this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,this.pdfViewer.nodePropertyChange(E,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1}}}},e.prototype.getSettings=function(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.freeTextSettings.annotationSelectorSettings&&(t=this.pdfViewer.freeTextSettings.annotationSelectorSettings),t},e.prototype.setAnnotationType=function(e){this.pdfViewerBase.disableTextSelectionMode();var t=!1;switch(sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings)||sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||(t=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.freeTextSettings.isLock&&this.pdfViewer.freeTextSettings.isLock),e){case"FreeText":this.currentAnnotationMode="FreeText",this.isBold=!1,this.isUnderline=!1,this.isStrikethrough=!1,this.isItalic=!1,this.updateTextProperties();var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.pdfViewer.drawingObject={shapeAnnotationType:"FreeText",strokeColor:this.borderColor,fillColor:this.fillColor,opacity:this.opacity,notes:"",isCommentLock:!1,thickness:this.borderWidth,borderDashArray:"0",modifiedDate:i,isLocked:t,author:this.pdfViewer.freeTextSettings.author,subject:"Text Box",font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},textAlign:this.textAlign},this.pdfViewer.tool="Select"}},e.prototype.modifyInCollection=function(e,t,i,n){n||this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,s=this.getAnnotations(t,null);if(null!=s&&i){for(var a=0;a<s.length;a++)if(i.id===s[a].id){if("bounds"===e)s[a].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom};else if("fill"===e)s[a].fillColor=i.wrapper.children[0].style.fill;else if("stroke"===e)s[a].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)s[a].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)s[a].thickness=i.wrapper.children[0].style.strokeWidth;else if("notes"===e)s[a].note=i.notes;else{if("delete"===e){o=s.splice(a,1)[0];break}"dynamicText"===e?s[a].dynamicText=i.dynamicText:"fontColor"===e?s[a].fontColor=i.fontColor:"fontSize"===e?s[a].fontSize=i.fontSize:"fontFamily"===e?s[a].fontFamily=i.fontFamily:"textPropertiesChange"===e?s[a].font={isBold:i.font.isBold,isItalic:i.font.isItalic,isStrikeout:i.font.isStrikeout,isUnderline:i.font.isUnderline}:"textAlign"===e?s[a].textAlign=i.textAlign:"isLock"===e?(s[a].annotationSettings&&(s[a].annotationSettings.isLock=i.isLock),s[a].isLocked=i.isLock,s[a].isLock=i.isLock):"allowedInteractions"===e?s[a].allowedInteractions=i.allowedInteractions:"isPrint"===e&&(s[a].annotationSettings&&(s[a].annotationSettings.isPrint=i.isPrint),s[a].isPrint=i.isPrint)}this.pdfViewerBase.isUpdateProgrammatically||(s[a].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()),s[a].isFreeTextEdited=!0,this.pdfViewer.annotationModule.storeAnnotationCollections(s[a],t)}this.manageAnnotations(s,t)}return o},e.prototype.addInCollection=function(e,t){if(t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)}},e.prototype.saveFreeTextAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]);var t=[];this.notEditedFreeTexts=[];for(var i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++){a.annotations[r].isFreeTextEdited||this.notEditedFreeTexts.push(a.annotations[r].annotName),this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),a.annotations[r].bounds=this.getBoundsBasedOnRotation(a.annotations[r].bounds,a.annotations[r].rotateAngle,a.pageIndex,a.annotations[r]),a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex));var l=a.annotations[r].strokeColor;a.annotations[r].strokeColor=JSON.stringify(this.getRgbCode(l));var d=a.annotations[r].fillColor;a.annotations[r].fillColor=JSON.stringify(this.getRgbCode(d));var h=a.annotations[r].fontColor;a.annotations[r].fontColor=JSON.stringify(this.getRgbCode(h)),a.annotations[r].vertexPoints=JSON.stringify(a.annotations[r].vertexPoints),null!==a.annotations[r].rectangleDifference&&(a.annotations[r].rectangleDifference=JSON.stringify(a.annotations[r].rectangleDifference))}s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.isCustomFont=function(e){return"Helvetica"!==e&&"Times New Roman"!==e&&"Courier"!==e&&"Symbol"!==e&&"TimesRoman"!==e},e.prototype.getRotationValue=function(e,t){var i=this.pdfViewerBase.pageSize[e];return!sf.base.isNullOrUndefined(t)&&t||0===i.rotation?0:1===i.rotation?90:2===i.rotation?180:3===i.rotation?270:0},e.prototype.getBoundsBasedOnRotation=function(e,t,i,n){var o=this.getPaddingValues(this.fontSize),s=(o[0],o[1],this.getRotationValue(i));if(n.rotateAngle=t-s,n.pageRotation=s,90===t||-90===t||270===t||-270===t){var a=e.left+e.width/2-e.height/2,r=e.top-(e.width/2-e.height/2);return{x:a+.5,y:r+.5,left:a+.5,top:r+.5,width:e.height,height:e.width}}return{x:e.left+.5,y:e.top+.5,left:e.left+.5,top:e.top+.5,width:e.width,height:e.height}},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_freetext");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_freetext",s)}},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_freetext"]),n){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[s]?o[s].annotations:t}else i=t;return i},e.prototype.getRgbCode=function(e){return Ir.call(this,e)},e.prototype.onFocusOutInputBox=function(){var e=this.pdfViewer.allowServerDataBinding;if(this.pdfViewer.enableServerDataBinding(!1),this.pdfViewerBase.isFreeTextContextMenu)this.inputBoxElement.focus(),this.isTextSelected||window.getSelection().removeAllRanges();else{this.pdfViewer.fireBeforeAddFreeTextAnnotation(this.inputBoxElement.value);var t=this.inputBoxElement.id&&this.inputBoxElement.id.split("_freeText_")[1]&&this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]?parseFloat(this.inputBoxElement.id.split("_freeText_")[1].split("_")[0]):this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t),n=parseFloat(this.inputBoxElement.style.width),o=parseFloat(this.inputBoxElement.style.paddingLeft);if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&!this.isNewFreeTextAnnot){var s=parseFloat(this.inputBoxElement.style.fontSize);this.inputBoxElement.style.width=n+o-s+"px"}if(this.pdfViewer.freeTextSettings.enableAutoFit&&!this.isMaximumWidthReached&&this.isNewFreeTextAnnot){n=parseFloat(this.inputBoxElement.style.width);this.inputBoxElement.style.width=n-8+"px"}var a=parseFloat(this.inputBoxElement.style.height),r=parseFloat(this.inputBoxElement.style.width),l=parseFloat(this.inputBoxElement.style.left);if(this.pdfViewerBase.isMixedSizeDocument)l-=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+t).offsetLeft;var d=parseFloat(this.inputBoxElement.style.top),h=this.pdfViewerBase.getZoomFactor();this.pdfViewer.isValidFreeText&&(this.inputBoxElement.value="Type Here",this.pdfViewer.isValidFreeText=!1);var p=this.inputBoxElement.value,c=!1;if(!0===this.isNewFreeTextAnnot){var u=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),f=this.pdfViewer.annotation.createGUID();this.isNewFreeTextAnnot=!1,c=!0;var m=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,g=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings);this.author=this.author?this.author:this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:"Guest";var w=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("freeText",t+1,"",f,p,null,this.author);var y={author:this.author,modifiedDate:u,subject:"Text Box",id:"free_text"+this.inputBoxCount,rotateAngle:0,dynamicText:p,strokeColor:this.borderColor,thickness:this.borderWidth,fillColor:this.fillColor,bounds:{left:l/h,top:d/h,x:l/h,y:d/h,width:r/h,height:a/h},annotName:f,shapeAnnotationType:"FreeText",type:"FreeText",pageIndex:t,fontColor:this.fontColor,fontSize:this.fontSize,fontFamily:this.fontFamily,opacity:this.opacity,comments:[],textAlign:this.textAlign,font:{isBold:this.isBold,isItalic:this.isItalic,isStrikeout:this.isStrikethrough,isUnderline:this.isUnderline},review:{state:"Unmarked",stateModel:"None",modifiedDate:u,author:this.author},annotationSelectorSettings:m,annotationSettings:g,customData:this.pdfViewer.annotationModule.getData("FreeText"),isPrint:this.pdfViewer.freeTextSettings.isPrint,isLocked:g.isLock,isFreeTextEdited:!0,allowedInteractions:w,isReadonly:this.isReadonly};(w=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(y))&&(y.allowedInteractions=w),this.pdfViewer.enableRtl&&(y.textAlign="Right");var v=this.pdfViewer.add(y),b={x:y.bounds.x,y:y.bounds.y,left:y.bounds.x,top:y.bounds.y,width:y.bounds.width,height:y.bounds.height},S={opacity:y.opacity,borderColor:y.strokeColor,borderWidth:y.thickness,author:v.author,subject:v.subject,modifiedDate:v.modifiedDate,fillColor:y.fillColor,fontSize:y.fontSize,width:y.bounds.width,height:y.bounds.height,fontColor:y.fontColor,fontFamily:y.fontFamily,defaultText:y.dynamicText,fontStyle:y.font,textAlignment:y.textAlign,isLocked:y.isLocked};this.pdfViewer.annotation.storeAnnotations(t,y,"_annotations_freetext"),this.pdfViewer.fireAnnotationAdd(y.pageIndex,y.annotName,"FreeText",b,S),this.pdfViewer.annotation.addAction(t,null,y,"Addition","",y,y),this.pdfViewer.renderSelector(y.pageIndex),this.pdfViewer.clearSelection(y.pageIndex),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.selectedAnnotation=v}if(this.isInuptBoxInFocus=!1,this.selectedAnnotation&&this.pdfViewer.selectedItems.annotations){r/=h;var A=(a/=h)-this.selectedAnnotation.bounds.height,x=void 0;A>0&&(x=(x=this.selectedAnnotation.wrapper.offsetY+A/2)>0?x:void 0);var V=r-this.selectedAnnotation.bounds.width,C=void 0;V>0?C=(C=this.selectedAnnotation.wrapper.offsetX+V/2)>0?C:void 0:(V=Math.abs(V),C=this.selectedAnnotation.wrapper.offsetX-V/2),this.selectedAnnotation.bounds.width=r,this.selectedAnnotation.bounds.height=a,this.pdfViewer.annotation.modifyDynamicTextValue(p,this.selectedAnnotation.annotName),this.selectedAnnotation.dynamicText=p,this.modifyInCollection("dynamicText",t,this.selectedAnnotation,c),this.modifyInCollection("bounds",t,this.selectedAnnotation,c),this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{bounds:{width:this.selectedAnnotation.bounds.width,height:this.selectedAnnotation.bounds.height,y:x,x:C}}),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateFreeText",this.selectedAnnotation.annotName,p,this.selectedAnnotation.isLocked).catch((function(e){throw console.error("Unhandled Exception:",e),e})),sf.base.Browser.isDevice?this.pdfViewer.select([this.selectedAnnotation.id],this.selectedAnnotation.annotationSelectorSettings):this.pdfViewer.renderSelector(this.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings)}this.inputBoxElement.parentElement&&(i&&i.id===this.inputBoxElement.parentElement.id?i.removeChild(this.inputBoxElement):this.inputBoxElement.parentElement.removeChild(this.inputBoxElement));var I=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+t);this.pdfViewer.renderDrawing(I,t),this.inputBoxCount+=1,c||this.previousText===p||this.pdfViewer.annotationModule.triggerAnnotationPropChange(this.selectedAnnotation,!1,!1,!1,!1,!1,!1,!1,!0,this.previousText,p)}this.pdfViewer.enableServerDataBinding(e,!0)},e.prototype.onKeyDownInputBox=function(e){var t=this;(9===e.which||sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0])&&!this.isNewFreeTextAnnot)&&e.preventDefault(),this.selectedAnnotation=this.pdfViewer.selectedItems.annotations&&this.isNewFreeTextAnnot?this.pdfViewer.selectedItems.annotations[0]:this.selectedAnnotation,setTimeout((function(){t.defaultHeight<t.inputBoxElement.scrollHeight&&parseInt(t.inputBoxElement.style.height,10)<t.inputBoxElement.scrollHeight?t.updateFreeTextAnnotationSize(!0):t.updateFreeTextAnnotationSize(!1)}),0)},e.prototype.updateFreeTextAnnotationSize=function(e){var t=this.pdfViewer.freeTextSettings.enableAutoFit;if(t?this.autoFitFreeText():this.isMaximumWidthReached=!0,this.isMaximumWidthReached){var i=this.inputBoxElement.getBoundingClientRect().height;e||this.inputBoxElement.readOnly||(this.inputBoxElement.style.height=this.defaultHeight+"px");var n=this.inputBoxElement.getBoundingClientRect().height-i,o=parseFloat(this.inputBoxElement.style.fontSize),s=this.pdfViewerBase.getZoomFactor();this.defaultHeight*s<this.inputBoxElement.scrollHeight&&parseInt(this.inputBoxElement.style.height,10)<this.inputBoxElement.scrollHeight&&(this.inputBoxElement.style.height=this.inputBoxElement.readOnly?this.inputBoxElement.style.height:this.inputBoxElement.scrollHeight+o/2+"px"),this.inputBoxElement.style.height=n<0&&!this.inputBoxElement.readOnly?i+"px":this.inputBoxElement.style.height}var a=this.pdfViewerBase.getZoomFactor(),r=parseFloat(this.inputBoxElement.style.height),l=parseFloat(this.inputBoxElement.style.width);r/=a,l/=a;var d=0;if(this.selectedAnnotation){var h=this.isCustomFont(this.selectedAnnotation.fontFamily),p=0,c=0;if((p=h?r-this.selectedAnnotation.wrapper.bounds.height:r-this.selectedAnnotation.bounds.height)>0?c=this.selectedAnnotation.wrapper.offsetY+p/2:(p=Math.abs(p),c=this.selectedAnnotation.wrapper.offsetY-p/2),t){var u=0;(u=h?l-this.selectedAnnotation.wrapper.bounds.width:l-this.selectedAnnotation.bounds.width)>0?d=this.selectedAnnotation.wrapper.offsetX+u/2:(u=Math.abs(u),d=this.selectedAnnotation.wrapper.offsetX-u/2)}this.selectedAnnotation.bounds.width=l,this.selectedAnnotation.bounds.height=r,t?this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{bounds:{width:this.selectedAnnotation.bounds.width,height:this.selectedAnnotation.bounds.height,y:c,x:d}}):this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{bounds:{width:this.selectedAnnotation.bounds.width,height:this.selectedAnnotation.bounds.height,y:c}}),this.pdfViewer.renderSelector(this.selectedAnnotation.pageIndex,this.selectedAnnotation.annotationSelectorSettings)}},e.prototype.autoFitFreeText=function(e,t){var i=this.pdfViewerBase.currentPageNumber-1,n=(this.pdfViewerBase.getElement("_pageDiv_"+i),this.pdfViewerBase.getElement("_annotationCanvas_"+i).getContext("2d")),o=this.inputBoxElement.style.fontSize;this.pdfViewer.freeTextSettings.fontStyle===Pt.Bold||"bold"===this.inputBoxElement.style.fontWeight?n.font="bold "+o+" "+this.inputBoxElement.style.fontFamily:n.font=o+" "+this.inputBoxElement.style.fontFamily;var s="",a=[],r=this.inputBoxElement.value;if(r.indexOf("\n")>-1){a=r.split("\n");for(var l=0;l<a.length;l++){var d=n.measureText(a[l]),h=n.measureText(s);d.width>h.width&&(s=a[l])}this.isMaximumWidthReached=!0}else s=r,this.isMaximumWidthReached=!1;var p,c=n.measureText(s),u=(o=parseFloat(this.inputBoxElement.style.fontSize))+o/2;this.isNewFreeTextAnnot?(p=Math.ceil(c.width+18),this.inputBoxElement.style.height=u+"px",this.inputBoxElement.style.top=t-u/2+"px"):p=Math.ceil(c.width)+o+Math.ceil(4),e||(this.inputBoxElement.style.height=u+"px"),this.inputBoxElement.style.width=p+"px";var f=this.pdfViewerBase.getPageWidth(i)-parseFloat(this.inputBoxElement.style.left);if(parseFloat(this.inputBoxElement.style.width)>f)if(this.isMaximumWidthReached=!0,this.isNewAddedAnnot&&e){p-=8,this.inputBoxElement.style.width=p+"px";var m=e+p*this.pdfViewerBase.getZoomFactor(),g=parseFloat(this.inputBoxElement.style.left);m>=this.pdfViewerBase.getPageWidth(i)&&(g=this.pdfViewerBase.getPageWidth(i)-p),this.inputBoxElement.style.left=g+"px"}else this.inputBoxElement.style.width=f+"px"},e.prototype.onMouseUpInputBox=function(e){var t=e.target;this.selectionStart=0,this.selectionEnd=0,3===e.which&&t&&(this.selectionStart=t.selectionStart,this.selectionEnd=t.selectionEnd),3===e.which&&null!=window.getSelection()&&""!==window.getSelection().toString()?this.isTextSelected=!0:this.isTextSelected=!1},e.prototype.addInuptElemet=function(e,t,i,n){void 0===t&&(t=null),sf.base.isNullOrUndefined(i)&&(i=this.pdfViewerBase.currentPageNumber-1),t&&(i=t.pageIndex),null===t&&0===this.pdfViewer.selectedItems.annotations.length&&this.updateTextProperties(),this.inputBoxElement.id=this.pdfViewer.dataId+"_freeText_"+i+"_"+this.inputBoxCount;var o=this.pdfViewerBase.getElement("_pageDiv_"+i),s=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+i),a=this.pdfViewerBase.getZoomFactor();if(this.inputBoxElement.value=t&&t.dynamicText?t.dynamicText:this.defaultText,this.inputBoxElement.style.boxSizing="border-box",this.inputBoxElement.style.left=e.x+"px",this.inputBoxElement.style.top=e.y-this.defaultHeight*a/2+"px",this.pdfViewer.freeTextSettings.enableAutoFit?this.inputBoxElement.style.wordBreak="break-all":this.inputBoxElement.style.wordBreak="break-word",t?(this.applyFreetextStyles(a,t.isReadonly),0===t.thickness&&(this.inputBoxElement.style.borderWidth=0)):this.applyFreetextStyles(a),this.isBold?this.inputBoxElement.style.fontWeight="bold":this.inputBoxElement.style.fontWeight="normal",this.isItalic?this.inputBoxElement.style.fontStyle="italic":this.inputBoxElement.style.fontStyle="normal",this.inputBoxElement.style.textDecoration="none",this.isUnderline&&(this.inputBoxElement.style.textDecoration="underline"),this.isStrikethrough&&(this.inputBoxElement.style.textDecoration="line-through"),this.pdfViewer.enableRtl?(this.inputBoxElement.style.textAlign="right",this.inputBoxElement.style.direction="rtl",this.inputBoxElement.style.left=e.x-this.defautWidth*a/2):this.inputBoxElement.style.textAlign=this.textAlign.toLowerCase(),this.inputBoxElement.style.borderColor=this.borderColor,this.inputBoxElement.style.color=this.fontColor,this.inputBoxElement.style.background=this.fillColor,t&&t.wrapper&&t.wrapper.children[0]&&(this.inputBoxElement.style.opacity=t.wrapper.children[0].style.opacity),!0===this.isNewFreeTextAnnot&&this.pdfViewer.clearSelection(i),t&&t.wrapper&&t.wrapper.bounds){var r=t.wrapper.bounds;r.left&&(this.inputBoxElement.style.left=r.left*a+"px"),r.top&&(this.inputBoxElement.style.top=r.top*a+"px"),this.inputBoxElement.style.height=r.height?r.height*a+"px":this.defaultHeight*a+"px",this.inputBoxElement.style.width=r.width?r.width*a+"px":this.defautWidth*a+"px",this.isCustomFont(t.fontFamily)&&(this.inputBoxElement.style.padding=0),this.selectedAnnotation=t,this.previousText=this.selectedAnnotation.dynamicText,this.selectedAnnotation.dynamicText="",this.inputBoxElement.style.borderColor=this.selectedAnnotation.strokeColor,this.inputBoxElement.style.color=this.selectedAnnotation.fontColor,this.inputBoxElement.style.background=this.selectedAnnotation.fillColor,!0===this.selectedAnnotation.font.isBold&&(this.inputBoxElement.style.fontWeight="bold"),!0===this.selectedAnnotation.font.isItalic&&(this.inputBoxElement.style.fontStyle="italic"),!0===this.selectedAnnotation.font.isUnderline&&(this.inputBoxElement.style.textDecoration="underline"),!0===this.selectedAnnotation.font.isStrikeout&&(this.inputBoxElement.style.textDecoration="line-through"),this.pdfViewer.enableRtl?(this.inputBoxElement.style.textAlign="right",this.inputBoxElement.style.direction="rtl"):this.selectedAnnotation.textAlign&&(this.inputBoxElement.style.textAlign=this.selectedAnnotation.textAlign),this.inputBoxElement.style.fontSize=this.selectedAnnotation.fontSize*a+"px",this.inputBoxElement.style.fontFamily=this.selectedAnnotation.fontFamily,this.pdfViewer.drawing.clearSelectorLayer(i),this.pdfViewer.nodePropertyChange(this.selectedAnnotation,{})}this.pdfViewerBase.isMixedSizeDocument&&(this.inputBoxElement.style.left=e.x+s.offsetLeft+"px"),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.freeTextSettings.enableAutoFit&&this.autoFitFreeText(e.x,e.y),o.appendChild(this.inputBoxElement),!this.pdfViewer.freeTextSettings.enableAutoFit&&this.defaultHeight*a<this.inputBoxElement.scrollHeight&&parseInt(this.inputBoxElement.style.height,10)<this.inputBoxElement.scrollHeight&&(this.inputBoxElement.style.height=this.inputBoxElement.scrollHeight+"px",n&&this.updateFreeTextAnnotationSize(!0)),this.isInuptBoxInFocus=!0,this.inputBoxElement.focus(),!0!==this.isNewFreeTextAnnot&&this.inputBoxElement.value!==this.defaultText||(this.inputBoxElement.select(),this.pdfViewerBase.isFreeTextSelected=!0),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.drawingObject=new U)},e.prototype.applyFreetextStyles=function(e,t){this.inputBoxElement.style.height=this.defaultHeight*e+"px",this.inputBoxElement.style.width=this.defautWidth*e+"px",this.inputBoxElement.style.borderWidth=this.borderWidth*e+"px",this.inputBoxElement.style.fontSize=this.fontSize*e+"px",this.inputBoxElement.style.fontFamily=this.fontFamily,this.inputBoxElement.readOnly=sf.base.isNullOrUndefined(t)?this.isReadonly:t},e.prototype.copySelectedText=function(){if(null!==window.getSelection()){this.selectedText=window.getSelection().toString();try{navigator.clipboard.writeText(this.selectedText)}catch(e){console.warn("Copy to clipboard failed.",e)}}},e.prototype.pasteSelectedText=function(e){if(""!==this.selectedText&&e){var t=e.value;e.value=t.slice(0,this.selectionStart)+this.selectedText+t.slice(this.selectionEnd,t.length)}var i=event;this.onKeyDownInputBox(i)},e.prototype.cutSelectedText=function(e){if(null!==window.getSelection()){var t=e.value;this.selectedText=window.getSelection().toString(),e.value=t.slice(0,e.selectionStart)+t.slice(e.selectionEnd);try{navigator.clipboard.writeText(this.selectedText)}catch(e){console.warn("Copy to clipboard failed.",e)}}},e.prototype.saveImportedFreeTextAnnotations=function(e,t){var i=e;if(i.AnnotType){var n=null;if(i.VertexPoints){n=[];for(var o=0;o<i.VertexPoints.length;o++){var s={x:i.VertexPoints[o].X,y:i.VertexPoints[o].Y};n.push(s)}}i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),i.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(i);var a=sf.base.isNullOrUndefined(i.Bounds.X)?i.Bounds.x:i.Bounds.X,r=sf.base.isNullOrUndefined(i.Bounds.Y)?i.Bounds.y:i.Bounds.Y,l=i.Bounds.Width?i.Bounds.Width:i.Bounds.width,d=i.Bounds.Height?i.Bounds.Height:i.Bounds.height,h=sf.base.isNullOrUndefined(i.IsFreeTextEdited)?i.isFreeTextEdited:i.IsFreeTextEdited,p={author:i.Author,allowedInteractions:i.allowedInteractions,modifiedDate:i.ModifiedDate,subject:i.Subject,id:"freetext",rotateAngle:i.Rotate,dynamicText:i.MarkupText,strokeColor:i.StrokeColor,thickness:i.Thickness,fillColor:i.FillColor,bounds:{x:a,y:r,left:a,top:r,width:l,height:d,right:i.Bounds.Right,bottom:i.Bounds.Bottom},annotName:i.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:i.Opacity,fontColor:i.FontColor,fontSize:i.FontSize,fontFamily:i.FontFamily,notes:i.MarkupText,textAlign:i.TextAlign,comments:this.pdfViewer.annotationModule.getAnnotationComments(i.Comments,i,i.Author),review:{state:i.State,stateModel:i.StateModel,modifiedDate:i.ModifiedDate,author:i.Author},font:{isBold:i.Font.Bold,isItalic:i.Font.Italic,isStrikeout:i.Font.Strikeout,isUnderline:i.Font.Underline},annotationSelectorSettings:this.getSettings(i),annotationSettings:i.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(i),isLocked:i.IsLocked,isPrint:i.IsPrint,isCommentLock:i.IsCommentLock,isReadonly:i.IsReadonly,isFreeTextEdited:h};this.pdfViewer.annotationModule.storeAnnotations(t,p,"_annotations_freetext")}},e.prototype.updateFreeTextAnnotationCollections=function(e,t){var i=e;if(i.AnnotType){var n=null;if(i.VertexPoints){n=[];for(var o=0;o<i.VertexPoints.length;o++){var s={x:i.VertexPoints[o].X,y:i.VertexPoints[o].Y};n.push(s)}}i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),i.IsLocked&&(i.AnnotationSettings.isLock=i.IsLocked),i.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(i);var a=i.Bounds.X?i.Bounds.X:i.Bounds.x,r=i.Bounds.Y?i.Bounds.Y:i.Bounds.y,l=i.Bounds.Width?i.Bounds.Width:i.Bounds.width,d=i.Bounds.Height?i.Bounds.Height:i.Bounds.height;return{author:i.Author,allowedInteractions:i.allowedInteractions,modifiedDate:i.ModifiedDate,subject:i.Subject,id:"freetext",rotateAngle:i.Rotate,dynamicText:i.MarkupText,strokeColor:i.StrokeColor,thickness:i.Thickness,fillColor:i.FillColor,bounds:{x:a,y:r,left:a,top:r,width:l,height:d,right:i.Bounds.Right,bottom:i.Bounds.Bottom},annotationId:i.AnnotName,shapeAnnotationType:"FreeText",pageIndex:t,opacity:i.Opacity,fontColor:i.FontColor,fontSize:i.FontSize,fontFamily:i.FontFamily,notes:i.MarkupText,comments:this.pdfViewer.annotationModule.getAnnotationComments(i.Comments,i,i.Author),review:{state:i.State,stateModel:i.StateModel,modifiedDate:i.ModifiedDate,author:i.Author},font:{isBold:i.Font.Bold,isItalic:i.Font.Italic,isStrikeout:i.Font.Strikeout,isUnderline:i.Font.Underline},pageNumber:t,annotationSettings:i.AnnotationSettings,isPrint:i.IsPrint,isLocked:i.IsLocked,isCommentLock:i.IsCommentLock}}},e.prototype.updateAddAnnotationDetails=function(e,t){e?e.bound?(t.x=e.bound.x?e.bound.x:10,t.y=e.bound.y?e.bound.y:10):(t.x=10,t.y=10):t=(e={offset:{x:1,y:1},pageNumber:0,width:void 0,height:void 0}).offset;var i,n,o,s,a,r,l,d,h,p,c,u,f=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),m=this.pdfViewer.annotation.createGUID(),g=e.fontStyle,w=!1,y=!1,v=!1,b=!1;this.pdfViewer.freeTextSettings.fontStyle===Pt.Bold?w=!0:this.pdfViewer.freeTextSettings.fontStyle===Pt.Italic?b=!0:this.pdfViewer.freeTextSettings.fontStyle===Pt.Underline?y=!0:this.pdfViewer.freeTextSettings.fontStyle===Pt.Strikethrough?v=!0:this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Italic)?(w=!0,b=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Underline)?(w=!0,y=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Strikethrough)?(w=!0,v=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Italic|Pt.Underline)?(w=!0,b=!0,y=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Italic|Pt.Strikethrough)?(w=!0,b=!0,v=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Bold|Pt.Underline|Pt.Strikethrough)?(w=!0,y=!0,v=!0):this.pdfViewer.freeTextSettings.fontStyle===(Pt.Italic|Pt.Underline)&&(y=!0,b=!0),d=!!this.pdfViewer.freeTextSettings.isLock&&this.pdfViewer.freeTextSettings.isLock,h=!this.pdfViewer.freeTextSettings.isPrint||this.pdfViewer.freeTextSettings.isPrint,p=this.pdfViewer.freeTextSettings.opacity?this.pdfViewer.freeTextSettings.opacity:1,i=e.author?e.author:this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:"Guest",n=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",o=this.pdfViewer.freeTextSettings.fontFamily?this.pdfViewer.freeTextSettings.fontFamily:"Helvetica",a=this.pdfViewer.freeTextSettings.fontSize?this.pdfViewer.freeTextSettings.fontSize:16,r=this.pdfViewer.freeTextSettings.borderColor?this.pdfViewer.freeTextSettings.borderColor:"#ffffff00",l=this.pdfViewer.freeTextSettings.defaultText?this.pdfViewer.freeTextSettings.defaultText:"Type Here",s=this.pdfViewer.freeTextSettings.fillColor?this.pdfViewer.freeTextSettings.fillColor:"#ffffff00",c=this.pdfViewer.freeTextSettings.textAlignment?this.pdfViewer.freeTextSettings.textAlignment:"Left",u=this.pdfViewer.freeTextSettings.borderThickness?this.pdfViewer.freeTextSettings.borderThickness:1;var S=this.pdfViewer.freeTextSettings.annotationSelectorSettings?this.pdfViewer.freeTextSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,A=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.freeTextSettings),x=this.pdfViewer.freeTextSettings.allowedInteractions?this.pdfViewer.freeTextSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;A.isLock=!!e.isLock&&e.isLock,A.minHeight=e.minHeight?e.minHeight:0,A.minWidth=e.minWidth?e.minWidth:0,A.maxWidth=e.maxWidth?e.maxWidth:0,A.maxHeight=e.maxHeight?e.maxHeight:0;var V=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.width)?150:this.pdfViewer.freeTextSettings.width,C=sf.base.isNullOrUndefined(this.pdfViewer.freeTextSettings.height)?24.6:this.pdfViewer.freeTextSettings.height;e.width=e.bound&&e.bound.width?e.bound.width:V,e.height=e.bound&&e.bound.height?e.bound.height:C;var I=[],k={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:x,AnnotName:e.Id?e.Id:m,AnnotType:"freeText",AnnotationFlags:"Default",AnnotationIntent:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:S,AnnotationSettings:A,Author:i,Border:{HorizontalRadius:0,VerticalRadius:0,Width:sf.base.isNullOrUndefined(e.borderWidth)?1:e.borderWidth},BorderColor:{IsEmpty:!0,B:255,Blue:1,C:0,G:255},Bounds:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Right:t.x+e.width,Bottom:t.y+e.height},CalloutLines:null,Color:{IsEmpty:!1,B:51,Blue:.2,C:0,G:255},Comments:e.comments?this.pdfViewer.annotation.updateAnnotationCommentsDetails(e.comments,e,i):[],CreatedDate:f,CustomData:e.customData?e.customData:null,ExistingCustomData:null,FillColor:e.fillColor?e.fillColor:s,Flatten:!1,FlattenPopups:!1,Font:{Bold:sf.base.isNullOrUndefined(g)?w:!!g.includes("Bold"),Italic:sf.base.isNullOrUndefined(g)?b:!!g.includes("Italic"),Strikeout:sf.base.isNullOrUndefined(g)?v:!(!g.includes("Strikethrough")||g.includes("Underline")),Underline:sf.base.isNullOrUndefined(g)?y:!!g.includes("Underline")},FontColor:e.fontColor?e.fontColor:n,FontFamily:e.fontFamily?e.fontFamily:o,FontSize:e.fontSize?e.fontSize:a,FreeTextAnnotationType:"Text Box",InnerColor:null,IsCommentLock:!1,IsLocked:sf.base.isNullOrUndefined(e.isLock)?d:e.isLock,IsPrint:sf.base.isNullOrUndefined(e.isPrint)?h:e.isPrint,Layer:null,LineEndingStyle:"OpenArrow",Location:null,MarkupText:e.defaultText?e.defaultText:l,ModifiedDate:e.modifiedDate?e.modifiedDate:f,Name:m,Opacity:sf.base.isNullOrUndefined(e.opacity)?p:e.opacity,Page:null,PageTags:null,ReviewHistory:null,Rotate:0,IsReadonly:!!e.isReadonly&&e.isReadonly,State:e.review?e.review.state:"",StateModel:e.review?e.review.stateModel:"",StrokeColor:e.borderColor?e.borderColor:r,Subject:"Text Box",Text:e.defaultText?e.defaultText:l,TextAlign:e.textAlign?e.textAlign:c,TextMarkupColor:null,Thickness:sf.base.isNullOrUndefined(e.borderWidth)?u:e.borderWidth,isAddAnnotationProgramatically:!0,isFreeTextEdited:!0};return I[0]=k,{freeTextAnnotation:I}},e.prototype.getPaddingValues=function(e){var t=5;return[4,t=e/16*(t-2)]},e}(),al=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t,this.inputBoxElement=document.createElement("input"),this.inputBoxElement.addEventListener("focusout",this.onFocusOutInputBox.bind(this)),this.maxHeight=24.6,this.maxWidth=151,this.fontSize=16,this.isInFocus=!1,this.inputBoxElement.style.position="absolute",this.inputBoxElement.style.fontFamily="Helvetica"}return e.prototype.editLabel=function(e,t){var i=this.pdfViewerBase.currentPageNumber-1,n=this.pdfViewerBase.getElement("_pageDiv_"+i),o=this.pdfViewerBase.getZoomFactor();if(this.inputBoxElement.value=t.labelContent,this.inputBoxElement.select(),t.labelContent="",this.pdfViewer.nodePropertyChange(t,{}),this.inputBoxElement.style.left=e.x*o+"px",this.inputBoxElement.style.top=e.y*o+"px",this.inputBoxElement.style.maxHeight=this.maxHeight*o+"px",this.inputBoxElement.style.maxWidth=this.maxWidth*o+"px",this.inputBoxElement.style.fontSize=this.fontSize*o+"px",this.inputBoxElement.style.textAlign="center",t&&t.wrapper&&t.wrapper.bounds){this.inputBoxElement.style.width=t.wrapper.bounds.width?t.wrapper.bounds.width/2*o+1+"px":this.maxWidth*o+"px";var s=parseFloat(this.inputBoxElement.style.width);s=s>this.maxWidth*o?this.maxWidth*o:s,t.wrapper.bounds.left&&(this.inputBoxElement.style.left=(t.wrapper.bounds.left+t.wrapper.bounds.width/2-s/(2*o))*o+"px"),t.wrapper.bounds.top&&("Line"===t.shapeAnnotationType||"LineWidthArrowHead"===t.shapeAnnotationType||"Distance"===t.shapeAnnotationType||"Polygon"===t.shapeAnnotationType?this.inputBoxElement.style.top=(t.wrapper.bounds.top+t.wrapper.bounds.height/2-this.maxHeight)*o+"px":this.inputBoxElement.style.top=(t.wrapper.bounds.top+t.wrapper.bounds.height/2-this.maxHeight/2)*o+"px"),this.inputBoxElement.maxLength=t.labelMaxLength,this.inputBoxElement.fontFamily=t.fontFamily,this.inputBoxElement.style.color=t.fontColor,this.inputBoxElement.style.border="1px solid #ffffff00",this.inputBoxElement.style.padding="2px",this.inputBoxElement.style.background=t.labelFillColor}n.appendChild(this.inputBoxElement),this.isInFocus=!0,this.inputBoxElement.focus()},e.prototype.onFocusOutInputBox=function(){var e=this.pdfViewerBase.currentPageNumber-1,t=this.pdfViewerBase.getElement("_pageDiv_"+e),i=parseFloat(this.inputBoxElement.style.height),n=parseFloat(this.inputBoxElement.style.width);this.isInFocus=!1;var o=this.pdfViewer.selectedItems.annotations[0];o&&(n=(n-1)/this.pdfViewerBase.getZoomFactor(),i=(i-1)/this.pdfViewerBase.getZoomFactor(),o.labelContent=this.inputBoxElement.value,o.notes=this.inputBoxElement.value,"Rectangle"===o.shapeAnnotationType||"Ellipse"===o.shapeAnnotationType||"Line"===o.shapeAnnotationType||"LineWidthArrowHead"===o.shapeAnnotationType?this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("labelContent",e,o):"Radius"===o.shapeAnnotationType&&o.measureType&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("labelContent",e,o),this.pdfViewer.nodePropertyChange(o,{}),this.pdfViewer.renderSelector(o.pageIndex,this.pdfViewer.annotationSelectorSettings)),t.removeChild(this.inputBoxElement);var s=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+e);this.pdfViewer.renderDrawing(s,e)},e.prototype.calculateLabelBounds=function(e,t){var i={};if(e){var n=0,o=0,s=0;void 0===t&&(t=this.pdfViewerBase.currentPageNumber-1);var a=this.pdfViewerBase.pageSize[t].rotation;e.width&&(s=(s=e.width/2)>0&&s<151?s:151),e.left&&(o=e.left+e.width/2-s/2),e.top&&(n=e.top+e.height/2-12.3),i=1===a||3===a?{left:o,top:n,width:s-24.6+s/2,height:49.2+s,right:0,bottom:0}:{left:o,top:n,width:s,height:24.6,right:0,bottom:0}}return i},e.prototype.calculateLabelBoundsFromLoadedDocument=function(e){var t={};if(e){var i=0,n=0,o=0;e.Width&&(o=(o=e.Width/2)>0&&o<151?o:151),e.Left&&(n=e.Left+e.Width/2-o/2),e.Top&&(i=e.Top+e.Height/2-12.3),t={left:n,top:i,width:o,height:24.6,right:0,bottom:0}}return t},e}();function rl(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.annotName||t[i].annotationId===e.annotationId||"Redaction"===e.shapeAnnotationType&&t[i].annotationId===e.id){this.removedAnnotationCollection.push(t[i]),this.pdfViewer.annotationCollection.splice(i,1);break}}function ll(e,t,i){var n,o=this.pdfViewer.annotationCollection;if(o.length){var s=o.filter((function(e){return e.annotationId===t}));n=s[0],this.updateAnnotationCollection(s[0])}var a=this.getTypeOfAnnotation(e),r=this.pdfViewerBase.documentAnnotationCollections[i];if(r[""+a].length)for(var l=0;l<r[""+a].length;l++)if(r[""+a][l].AnnotName===e.annotationId){var d=r[""+a][l];this.removedDocumentAnnotationCollection.push(d),r[""+a].splice(l,1);break}return n}function dl(e,t,i,n){var o=this,s=[];this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.deleteTextMarkupAnnotation(),t&&"textMarkup"!==i&&this.pdfViewer.annotationCollection.filter((function(e){return e.annotationId===n})).forEach((function(e){var t=e.uniqueKey;if("string"==typeof t&&Object.prototype.hasOwnProperty.call(o.pdfViewer.nameTable,t)){var i=o.pdfViewer.nameTable[""+[t]];s.push(i)}}));var a=s.length>0?s[0]:this.pdfViewer.selectedItems.annotations[0];if(this.isDeleteKeyboardClick=e,a){var r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_formfields"),l=[];if(T=JSON.parse(r)){for(var d=0;d<T.length;d++)T[d].uniqueID===a.id&&(T[d].Value="",T[d].FontFamily=""),l.push(T[d]);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_formfields",JSON.stringify(l))}}var h=!1,p=!1;if(s.length>0||this.pdfViewer.selectedItems.annotations.length>0){var c=s.length>0?s[0]:this.pdfViewer.selectedItems.annotations[0],u=c.shapeAnnotationType;if("Path"===u||"SignatureField"===c.formFieldAnnotationType||"InitialField"===c.formFieldAnnotationType||"HandWrittenSignature"===u||"SignatureText"===u||"SignatureImage"===u)(S=document.getElementById(c.id))&&S.disabled&&(p=!0);if(c.annotationSettings&&(h=c.annotationSettings.isLock)&&this.checkAllowedInteractions("Delete",c)&&(h=!1),!h&&!p){var f=c.pageIndex,m=c.shapeAnnotationType,g=void 0;"Line"===m||"LineWidthArrowHead"===m||"Polygon"===m||"Ellipse"===m||"Rectangle"===m||"Radius"===m||"Distance"===m?(sf.base.isNullOrUndefined(c.measureType)||""===c.measureType?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(c,"shape"),this.updateImportAnnotationCollection(c,f,"shapeAnnotation")):(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(c,"measure"),this.updateImportAnnotationCollection(c,f,"measureShapeAnnotation")),g=this.modifyInCollections(c,"delete")):"FreeText"===m?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(c,"FreeText","delete"),g=this.modifyInCollections(c,"delete"),this.updateImportAnnotationCollection(c,f,"freeTextAnnotation")):"HandWrittenSignature"===m||"SignatureImage"===m||"SignatureText"===m?g=this.modifyInCollections(c,"delete"):"Ink"===m?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(c,"Ink","delete"),g=this.modifyInCollections(c,"delete"),this.updateImportAnnotationCollection(c,f,"signatureInkAnnotation")):"Redaction"===m?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(c,"Redaction","delete"),g=this.modifyInCollections(c,"delete"),this.updateImportAnnotationCollection(c,f,"redactionAnnotation")):(g=s.length>0?s[0]:this.pdfViewer.selectedItems.annotations[0],this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(g,g.shapeAnnotationType,"delete"),this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(c,null,"delete")),"StickyNotes"===m&&this.updateImportAnnotationCollection(c,f,"stickyNotesAnnotation"),"Stamp"!==m&&"Image"!==m||this.updateImportAnnotationCollection(c,f,"stampAnnotations"),(!this.pdfViewer.enableFormDesigner||"SignatureText"!==m&&"SignatureImage"!==m&&"Path"!==m)&&this.pdfViewer.annotation.addAction(f,null,c,"Delete","",g,c);var w=void 0;""!==c.annotName?w=document.getElementById(c.annotName):g&&""!==g.annotName&&(w=document.getElementById(g.annotName)),w&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",c.annotName,f).catch((function(e){throw console.error("Unhandled Exception:",e),e}));var y=s.length>0?s[0]:this.pdfViewer.selectedItems.annotations[0],v=y.annotName,b=this.getAnnotationType(y.shapeAnnotationType,y.measureType);if("Path"===m||"SignatureField"===y.formFieldAnnotationType||"InitialField"===y.formFieldAnnotationType||"HandWrittenSignature"===m||"SignatureText"===m||"SignatureImage"===m){var S=document.getElementById(y.id),A=document.getElementById(y.id+"_html_element");if(null!==S||sf.base.isNullOrUndefined(A)||(S=A.children[0].children[0]),S&&S.classList.contains("e-pdfviewer-signatureformfields-signature")&&(S.className="e-pdfviewer-signatureformfields",S.style.pointerEvents="",S.parentElement.style.pointerEvents="",this.pdfViewer.formFieldsModule.updateDataInSession(S,"")),this.pdfViewer.enableFormDesigner&&y.id){var x=y.id.split("_")[0];this.updateSignatureDeleteStatus(x,S)}this.pdfViewer.retrieveFormFieldsClientSide=!0;var V=this.pdfViewer.retrieveFormFields();this.pdfViewer.retrieveFormFieldsClientSide=!1;for(var C=0;C<V.length;C++)y.id===V[C].id&&(V[C].value="",V[C].signatureType="")}this.updateAnnotationCollection(c);var I=this.pdfViewer.nameTable[c.id.split("_")[0]];if(null!=I&&("SignatureField"===I.formFieldAnnotationType||"InitialField"===I.formFieldAnnotationType||"SignatureField"===I.annotName||"InitialField"===I.annotName)){I.wrapper.children.splice(I.wrapper.children.indexOf(c.wrapper.children[0]),1);var k=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===c.id})),M=void 0;k>-1&&(M=this.pdfViewer.formFieldCollections[k].name);r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_formfields");for(var T=JSON.parse(r),E=(l=[],0);E<this.pdfViewer.formFieldCollections.length;E++){if(M===this.pdfViewer.formFieldCollections[E].name&&M===T[E].FieldName){var B=this.pdfViewer.formFieldCollections[E];T[E].Value="";var P=this.getAnnotationsFromCollections(B.id);g=this.modifyInCollections(P,"delete"),this.pdfViewer.annotation.addAction(P.pageIndex,null,P,"Delete","",g,P),this.updateInputFieldDivElement(P);var D=this.pdfViewer.nameTable[P.id];D.wrapper.children.splice(D.wrapper.children.indexOf(P.wrapper.children[0]),1),this.pdfViewer.remove(P)}l.push(T[E])}window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_formfields",JSON.stringify(l))}if(!c||"Redaction"!==c.type&&"Redaction"!==c.shapeAnnotationType||this.pdfViewer.annotationModule.redactionAnnotationModule.redactionOverlayText.removeRedactionOverlayText(c),this.pdfViewer.remove(c),this.pdfViewer.renderDrawing(),this.pdfViewer.clearSelection(f),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.pdfViewerBase.fireDocumentEditedEvent("AnnotationDeleted"),this.pdfViewerBase.tool=null,this.pdfViewer.tool=null,"Path"===y.shapeAnnotationType||"HandWrittenSignature"===y.shapeAnnotationType||"SignatureText"===y.shapeAnnotationType||"SignatureImage"===y.shapeAnnotationType){var N={left:y.bounds.x,top:y.bounds.y,width:y.bounds.width,height:y.bounds.height};this.pdfViewer.fireSignatureRemove(f,y.signatureName,y.shapeAnnotationType,N)}else this.pdfViewer.annotationModule&&this.pdfViewer.fireAnnotationRemove(f,v,b,y.bounds);this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.enableTextSelectionMode()}}this.updateToolbar(!0),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&!h&&(this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!1,!0),this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!1))}function hl(e,t){if(e){this.isAnnotDeletionApiCall=!0,this.annotationSelected=!1;var i="string"==typeof e?this.getAnnotationsFromAnnotationCollections(e):null,n=i?i.shapeAnnotationType:null;(t&&"textMarkup"===n||void 0===t)&&this.selectAnnotation(e),this.deleteAnnotation(!1,t,n,e),this.isAnnotDeletionApiCall=!1}}function pl(){if(this.isAnnotationSelected&&this.selectAnnotationId){var e=this.getAnnotationsFromAnnotationCollections(this.selectAnnotationId),t=this.selectAnnotationId,i=e.pageNumber,n=this.pdfViewer.annotationSelectorSettings;if(e&&this.annotationPageIndex>=0&&this.annotationPageIndex===i){if(this.previousIndex&&this.pdfViewer.clearSelection(this.previousIndex),this.pdfViewer.clearSelection(i),this.previousIndex=i,"textMarkup"===e.shapeAnnotationType){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(i,!0);var o=this.pdfViewerBase.getElement("_annotationCanvas_"+i),s=this.getTextMarkupAnnotations(i,e);s&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.isSelectedAnnotation=!0,this.textMarkupAnnotationModule.showHideDropletDiv(!0),this.textMarkupAnnotationModule.annotationClickPosition=null,this.textMarkupAnnotationModule.selectAnnotation(s,o,i),this.textMarkupAnnotationModule.currentTextMarkupAnnotation=s,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=i,this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.textMarkupAnnotationModule.isSelectedAnnotation=!1)}else"stamp"===e.shapeAnnotationType||"stamp"===e.ShapeAnnotationType?(this.pdfViewer.select([e.uniqueKey],n),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===e.shapeAnnotationType||"sticky"===e.ShapeAnnotationType?(this.pdfViewer.select([e.annotationId],n),this.pdfViewer.annotation.onAnnotationMouseDown()):e.uniqueKey?(this.pdfViewer.select([e.uniqueKey],n),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([e.annotationId],n),this.pdfViewer.annotation.onAnnotationMouseDown());var a=document.getElementById(this.pdfViewer.dataId+"_commantPanel");if(a&&"block"===a.style.display){var r=document.getElementById(t);r&&(r.classList.contains("e-pv-comments-border")||r.firstElementChild&&r.firstElementChild.click())}}this.isAnnotationSelected=!1,this.selectAnnotationId=null,this.annotationPageIndex=null}}function cl(e){var t=[],i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(i){var n=JSON.parse(i);if(n)if(n[C=this.getPageCollection(n,e)]){var o=n[C].annotations;if(o&&o.length>0)for(var s=0;s<o.length;s++)t.push(o[s])}}var a=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(a){var r=JSON.parse(a);if(r)if(r[C=this.getPageCollection(r,e)]){var l=r[C].annotations;if(l&&l.length>0)for(s=0;s<l.length;s++)t.push(l[s])}}var d=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_redaction");if(d){var h=JSON.parse(d);if(h)if(h[C=this.getPageCollection(h,e)]){var p=h[C].annotations;if(p&&p.length>0)for(s=0;s<p.length;s++)t.push(p[s])}}var c=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(c){var u=JSON.parse(c);if(u)if(u[C=this.getPageCollection(u,e)]){var f=u[C].annotations;if(f&&f.length>0)for(s=0;s<f.length;s++)t.push(f[s])}}var m=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(m){var g=JSON.parse(m);if(g)if(g[C=this.getPageCollection(g,e)]){var w=g[C].annotations;if(w&&w.length>0)for(s=0;s<w.length;s++)t.push(w[s])}}var y=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_freetext");if(y){var v=JSON.parse(y);if(v)if(v[C=this.getPageCollection(v,e)]){var b=v[C].annotations;if(b&&b.length>0)for(s=0;s<b.length;s++)t.push(b[s])}}var S=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(S){var A=JSON.parse(S);if(A)if(A[C=this.getPageCollection(A,e)]){var x=A[C].annotations;if(x&&x.length>0)for(s=0;s<x.length;s++)t.push(x[s])}}var V=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(V){var C,I=JSON.parse(V);if(I)if(I[C=this.getPageCollection(I,e)]){var k=I[C].annotations;if(k&&k.length>0)for(s=0;s<k.length;s++)t.push(k[s])}}return t}function ul(e,t,i,n,o,s,a){this.clearAnnotationCanvas(e),this.shapeAnnotationModule&&(a?this.shapeAnnotationModule.renderShapeAnnotations(t,e,!0):this.shapeAnnotationModule.renderShapeAnnotations(t,e)),this.measureAnnotationModule&&(a?this.measureAnnotationModule.renderMeasureShapeAnnotations(i,e,!0):this.measureAnnotationModule.renderMeasureShapeAnnotations(i,e)),this.redactionAnnotationModule&&(a?this.redactionAnnotationModule.renderRedactionAnnotations(o,e):this.redactionAnnotationModule.renderRedactionAnnotations(o,e,s)),sf.base.isNullOrUndefined(s)&&(s=this.pdfViewerBase.getElement("_annotationCanvas_"+e)),this.pdfViewer.drawing.refreshCanvasDiagramLayer(s,e),this.textMarkupAnnotationModule&&(a?this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(n,e,!0):this.textMarkupAnnotationModule.renderTextMarkupAnnotationsInPage(n,e))}function fl(e,t,i,n,o){var s={x:1,y:1},a=0;t&&(a=t.pageNumber?t.pageNumber:0);var r=null,l=[];this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),"FreeText"===e?(l[a]=this.pdfViewer.annotation.freeTextAnnotationModule.updateAddAnnotationDetails(t,s),this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically=!0):"StickyNotes"===e?(l[a]=this.pdfViewer.annotation.stickyNotesAnnotationModule.updateAddAnnotationDetails(t,s),this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically=!0):"Highlight"===e||"Underline"===e||"Strikethrough"===e||"Squiggly"===e?(("Highlight"===e||"Underline"===e||"Strikethrough"===e||"Squiggly"===e)&&(r=t),l[a]=this.pdfViewer.annotation.textMarkupAnnotationModule.updateAddAnnotationDetails(e,r),this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically=!0):"Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e?(("Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e)&&(r=t),l[a]=this.pdfViewer.annotation.shapeAnnotationModule.updateAddAnnotationDetails(e,r,s),this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically=!0):"Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e?(("Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e)&&(r=t),l[a]=this.pdfViewer.annotation.measureAnnotationModule.updateAddAnnotationDetails(e,r,s),this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically=!0):"Stamp"===e||"Image"===e?(l[a]=t&&"Image"===e?this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(t,s,a,i,n,o,!0):this.pdfViewer.annotation.stampAnnotationModule.updateAddAnnotationDetails(t,s,a,i,n,o),this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically=!0):"Ink"===e?(l[a]=this.pdfViewer.annotation.inkAnnotationModule.updateAddAnnotationDetails(t,s,a),this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically=!0):"Redaction"===e&&(l[a]=this.pdfViewer.annotation.redactionAnnotationModule.updateAddAnnotationDetails(t,s),this.pdfViewer.annotation.redactionAnnotationModule.isAddAnnotationProgramatically=!0);var d={pdfAnnotation:l};this.pdfViewerBase.isAddAnnotation=!0,this.pdfViewerBase.importAnnotations(d),this.pdfViewerBase.isAddAnnotation=!1,this.updateAddAnnotationProgramaticallyValue()}function ml(e,t,i,n){var o,s=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+n);if(this.pdfViewerBase.isStorageExceed&&(s=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]),s){var a=JSON.parse(s),r=this.getPageCollection(a,t);if(a[r]&&null!==(o=a[r].annotations)){for(var l=0;l<o.length;l++)if(o[l].annotName===e){var d=this.modifyAnnotationProperties(o[l],i,n);o[l]=d}this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_"+n),a[r]&&(a[r].annotations=o);var h=JSON.stringify(a);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_"+n,h)}}}function gl(e,t){if(t){t.className="e-pdfviewer-signatureformfields",t.style.pointerEvents="all";var i=this.findSignatureFieldById(this.pdfViewer.formDesignerCollections,e);if(i){this.pdfViewer.formDesignerModule.changedProperties=[];var n=u(this.pdfViewer.formDesignerModule.getFormFieldByID(e)),o=this.pdfViewer.annotations.find((function(e){return e.id===i.id+"_content"}));o&&this.pdfViewer.remove(o),this.resetSignatureFieldContent(i),this.updateGroupedSignatureDelete(e,i.name);var s=this.pdfViewer.formDesignerModule.getFormFieldByID(e);this.pdfViewer.formDesignerModule.changedProperties.push("Value"),this.pdfViewer.fireFormFieldPropertyChanged("FormFieldPropertyChanged",n,s,this.pdfViewer.formDesignerModule.changedProperties),this.pdfViewer.annotation.addAction(n.pageNumber,null,s,"SignatureValueChange","",n,s)}}}function wl(e){e.value="",e.signatureBound=null,e.signatureType=null,e.fontFamily=null,this.pdfViewer.nameTable[e.id+"_content"]&&delete this.pdfViewer.nameTable[e.id+"_content"]}function yl(e,t){for(var i=this.filterSignatureFieldsByFieldName(this.pdfViewer.formDesignerCollections,t),n=function(t){var n=i[t];if(n.id!==e){var s=o.pdfViewer.annotations.find((function(e){return e.id===n.id+"_content"}));if(s){var a=o.pdfViewer.nameTable[n.id];null==a||"SignatureField"!==a.formFieldAnnotationType&&"InitialField"!==a.formFieldAnnotationType&&"SignatureField"!==a.annotName&&"InitialField"!==a.annotName||a.wrapper.children.splice(a.wrapper.children.indexOf(s.wrapper.children[0]),1),o.pdfViewer.remove(s),o.resetSignatureFieldContent(n);var r=document.getElementById(n.id);r&&(r.className="e-pdfviewer-signatureformfields",r.style.pointerEvents="all")}else o.resetSignatureFieldContent(n)}},o=this,s=0;s<i.length;s++)n(s)}function vl(e){var t=document.getElementById(e.id),i=document.getElementById(e.id+"_html_element");null!==t||sf.base.isNullOrUndefined(i)||(t=i.children[0].children[0]),(t&&t.classList.contains("e-pdfviewer-signatureformfields-signature")||t.classList.contains("e-pdfviewer-signatureformfields"))&&(t.className="e-pdfviewer-signatureformfields",t.style.pointerEvents="",t.parentElement.style.pointerEvents="",this.pdfViewer.formFieldsModule.updateDataInSession(t,""))}function bl(e){var t,i=(t=e.uniqueKey?this.pdfViewer.nameTable[e.uniqueKey]:this.pdfViewer.selectedItems.annotations[0]).pageIndex;if("HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType){var n=u(t),o=u(t);t.opacity!==e.opacity&&(o.opacity=e.opacity,this.pdfViewer.nodePropertyChange(t,{opacity:e.opacity}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!0,!1,n.opacity,o.opacity),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Opacity","",n,o)),t.strokeColor!==e.strokeColor&&(o.strokeColor=e.strokeColor,this.pdfViewer.nodePropertyChange(t,{strokeColor:e.strokeColor}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!0,!1,!1,n.strokeColor,o.strokeColor),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",n,o)),t.thickness!==e.thickness&&(o.thickness=e.thickness,this.pdfViewer.nodePropertyChange(t,{thickness:e.thickness}),this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!1,!0,n.thickness,o.thickness),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",n,o)),t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.pdfViewer.renderDrawing(),this.pdfViewerBase.signatureModule.modifySignatureCollection(null,i,t,!0)}}function Sl(e,t,i){var n=this.pdfViewer.toolbar,o=i.bounds,s={height:o.height,width:o.width,x:o.x,y:o.y};if(!this.pdfViewerBase.signatureAdded){var a={bounds:s,opacity:i.opacity,thickness:i.thickness,strokeColor:i.strokeColor};this.pdfViewer.fireSignatureSelect(e,t,a)}"HandWrittenSignature"!==i.shapeAnnotationType||i.annotationSettings.isLock||i.isLocked||n&&n.annotationToolbarModule&&n.annotationToolbarModule.enableSignaturePropertiesTools(!0)}function Al(e,t,i,n,o,s,a){var r;if("Rotate"===n||"Stamp"===i.shapeAnnotationType){r={pageIndex:e,index:t,annotation:"Rotate"===n?JSON.parse(JSON.stringify(i.annotations[0])):JSON.parse(JSON.stringify(i)),action:n,modifiedProperty:o,undoElement:s,redoElement:a}}else r={pageIndex:e,index:t,annotation:i,action:n,modifiedProperty:o,undoElement:s,redoElement:a};this.actionCollection.push(r),this.checkFormFieldTypeAction(i,n)&&this.pdfViewer.formDesignerModule.addUndoRedoCollection(i,n,s,a),this.updateToolbar()}function xl(){try{this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");var e=this.actionCollection.pop();if(e){if(this.checkFormFieldTypeAction(e.annotation,e.action))this.pdfViewer.formDesignerModule.formDesignerUndoAction();else{var t=this.pdfViewer.nameTable[e.annotation.id];if(e){var i=e.annotation.shapeAnnotationType;switch(this.isUndoRedoAction=!0,this.isUndoAction=!0,e.action){case"Text Markup Added":case"Text Markup Deleted":this.textMarkupAnnotationModule&&(this.textMarkupAnnotationModule.undoTextMarkupAction(e.annotation,e.pageIndex,e.index,e.action,e),"Text Markup Added"===e.action&&this.pdfViewer.annotation.undoCommentsElement.pop());break;case"Text Markup Property modified":this.textMarkupAnnotationModule&&(e.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(e.annotation,e.pageIndex,e.undoElement,e.modifiedProperty,!0));break;case"Drag":case"Resize":l(e.annotation)?this.pdfViewer.nodePropertyChange(t,{bounds:e.undoElement.bounds,vertexPoints:e.undoElement.vertexPoints,leaderHeight:e.undoElement.leaderHeight}):this.pdfViewer.nodePropertyChange(t,{bounds:e.undoElement.bounds}),!t||"Redaction"!==t.type&&"Redaction"!==t.shapeAnnotationType||this.pdfViewer.annotationModule.redactionAnnotationModule.redactionOverlayText.removeRedactionOverlayText(t),"Distance"!==e.annotation.measureType&&"Perimeter"!==e.annotation.measureType&&"Area"!==e.annotation.measureType&&"Radius"!==e.annotation.measureType&&"Volume"!==e.annotation.measureType||(this.pdfViewer.nodePropertyChange(t,{notes:e.undoElement.notes}),this.updateCalibrateValues(t)),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([t.id]),d(e.annotation.shapeAnnotationType)&&this.modifyInCollections(t,"bounds");break;case"Addition":var n=!1,o=e.annotation;if("Line"===i||"LineWidthArrowHead"===i||"Polygon"===i||"Ellipse"===i||"Rectangle"===i||"Radius"===i||"Distance"===i){""===o.measureType||sf.base.isNullOrUndefined(o.measureType)?this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o,"shape"):this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o,"measure"),n=!0;var s=o.wrapper?o.wrapper:null;s&&s.bounds&&(o.bounds=s.bounds),e.duplicate=this.modifyInCollections(o,"delete")}"Redaction"!==i&&"redaction"!==i||(n=!0,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o,"Redaction","delete"),e.duplicate=this.modifyInCollections(o,"delete")),"Stamp"!==i&&"Image"!==i||(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o,o.shapeAnnotationType,"delete"),this.stampAnnotationModule.updateSessionStorage(o,null,"delete"),n=!0),"FreeText"!==i&&"HandWrittenSignature"!==i&&"SignatureImage"!==i&&"SignatureText"!==i&&"Ink"!==i||(n=!0,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o,o.shapeAnnotationType,"delete"),e.duplicate=this.modifyInCollections(o,"delete")),n||this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(o,o.shapeAnnotationType,"delete");var a=void 0!==o.pageIndex?o.pageIndex:o.pageNumber;this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.remove(o),this.pdfViewer.renderDrawing(null,a),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1),this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!1)),this.pdfViewer.annotation.undoCommentsElement.pop(),document.getElementById(e.annotation.annotName)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",o.annotName,a).catch((function(e){throw console.error("Unhandled Exception:",e),e}));break;case"Comment":var r=e.annotation,h=void 0!==r.pageIndex?r.pageIndex:r.pageNumber;if(this.pdfViewer.annotation.undoCommentsElement.pop(),document.getElementById(e.annotation.annotName)){var p=this.getAnnotationFromSessionStorage(e,h),c={};if(e.isNoteModified)c={Id:r.annotName,note:e.prevNote},null!=p.note&&(p.note=e.prevNote);else if(e.isReplyModified){if(c={Id:r.annotName,editComments:e.prevReply},null!=p.comments&&p.comments.length>0){var u=p.comments.findIndex((function(t){return t.annotName===e.prevReply.annotName}));-1!==u&&(p.comments[u]=e.prevReply)}}else c={Id:r.annotName,removeComments:!0},null!=p&&(null!=p.comments&&p.comments.length>0?p.comments=p.comments.slice(0,p.comments.length-1):null!=p.note&&(p.note=""));this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCommentItem",c).catch((function(e){throw console.error("Unhandled Exception:",e),e})),this.stickyNotesAnnotationModule.updateUndoRedoCollections(p,h)}break;case"Delete":"Line"!==i&&"LineWidthArrowHead"!==i&&"Polygon"!==i&&"Ellipse"!==i&&"Rectangle"!==i&&"Radius"!==i&&"Distance"!==i||(""===e.annotation.measureType||sf.base.isNullOrUndefined(e.annotation.measureType)?(i="shape",this.shapeAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement)):(i="shape_measure",this.measureAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement))),"Redaction"!==i&&"redaction"!==i||this.redactionAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement),"Stamp"===i||"Image"===i?this.stampAnnotationModule.updateDeleteItems(e.annotation.pageIndex,e.annotation):"FreeText"===i?this.freeTextAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement):"Ink"===i?this.inkAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement):"StickyNotes"===i?this.stickyNotesAnnotationModule.addInCollection(e.annotation.pageIndex,e.undoElement):"HandWrittenSignature"!==i&&"Path"!==i&&"SignatureText"!==i&&"SignatureImage"!==i||("SignatureField"===e.annotation.annotName&&this.updateFormFieldUndoRedoAction(e.annotation,i,e.annotation.data,e.annotation.fontFamily,!0),this.pdfViewerBase.signatureModule.addInCollection(e.annotation.pageIndex,e.undoElement));var f=this.pdfViewer.add(e.annotation);("FreeText"===i||f.enableShapeLabel)&&f&&this.pdfViewer.nodePropertyChange(f,{});var m=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]];null==m||"SignatureField"!==m.formFieldAnnotationType&&"InitialField"!==m.formFieldAnnotationType||(m.wrapper.children.push(e.annotation.wrapper.children[0]),"SignatureText"===e.annotation.shapeAnnotationType&&m.wrapper.children.push(e.annotation.wrapper.children[1])),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),"HandWrittenSignature"!==i&&"Path"!==i&&"SignatureText"!==i&&"SignatureImage"!==i&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(e.annotation.pageIndex,i);break;case"RedactionPropertyChange":e.undoElement&&"Redaction"===e.undoElement.shapeAnnotationType&&this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.editAnnotation(e.undoElement);break;case"AddRedactPages":this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);for(var g=[],w=[],y=0;y<e.annotation.length;y++){a=void 0!==(o=e.annotation[y]).pageIndex?o.pageIndex:0;g.push(this.modifyInCollections(o,"delete")),this.pdfViewer.remove(o),this.pdfViewer.renderDrawing(null,a),this.pdfViewer.annotation.undoCommentsElement.pop(),document.getElementById(e.annotation[y].annotName)&&w.push({annotId:o.annotName,pageNumber:a})}w.length>0&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemovePageRedactionComment",w).catch((function(e){throw console.error("Unhandled Exception:",e),e})),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1),this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!1)),e.duplicate=g;break;case"FormField Value Change":this.updateFormFieldUndoRedoAction(e.annotation,i,null,null);break;case"stampOpacity":this.pdfViewer.nodePropertyChange(t,{opacity:e.undoElement.opacity}),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(t,null,!0);break;case"Shape Stroke":this.pdfViewer.nodePropertyChange(t,{strokeColor:e.undoElement.strokeColor}),this.modifyInCollections(t,"stroke"),this.pdfViewer.renderDrawing();break;case"Shape Fill":this.pdfViewer.nodePropertyChange(t,{fillColor:e.undoElement.fillColor}),this.modifyInCollections(t,"fill"),this.pdfViewer.renderDrawing();break;case"Shape Opacity":this.pdfViewer.nodePropertyChange(t,{opacity:e.undoElement.opacity}),"StickyNotes"===t.shapeAnnotationType?(this.stickyNotesAnnotationModule.updateOpacityValue(t),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(t,null,!0)):this.modifyInCollections(t,"opacity"),this.pdfViewer.renderDrawing();break;case"Shape Thickness":this.pdfViewer.nodePropertyChange(t,{thickness:e.undoElement.thickness}),this.modifyInCollections(t,"thickness"),this.pdfViewer.renderDrawing();break;case"Line properties change":this.pdfViewer.nodePropertyChange(t,{fillColor:e.undoElement.fillColor,borderDashArray:e.undoElement.borderDashArray,borderStyle:e.undoElement.borderStyle,strokeColor:e.undoElement.strokeColor,opacity:e.undoElement.opacity,thickness:e.undoElement.thickness,sourceDecoraterShapes:this.getArrowType(e.undoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(e.undoElement.lineHeadEnd)}),this.updateCollectionForLineProperty(t),this.pdfViewer.renderDrawing();break;case"Text Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0);break;case"Status Property Added":case"Comments Reply Deleted":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(e.annotation,e.action,e.undoElement);break;case"dynamicText Change":this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,t.dynamicText=e.undoElement.dynamicText;var v=this.pdfViewer.selectedItems.annotations[0];v&&(v.dynamicText=e.undoElement.dynamicText,v.bounds.height=e.undoElement.bounds.height),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.undoAction(t,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(t,null,!0),this.modifyInCollections(t,"dynamicText"),v?this.pdfViewer.nodePropertyChange(v,{}):this.pdfViewer.nodePropertyChange(t,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID);break;case"fontColor":this.pdfViewer.nodePropertyChange(t,{fontColor:e.undoElement.fontColor}),this.modifyInCollections(t,"fontColor"),this.pdfViewer.renderDrawing();break;case"fontSize":this.pdfViewer.nodePropertyChange(t,{fontSize:e.undoElement.fontSize}),this.modifyInCollections(t,"fontSize"),this.pdfViewer.renderDrawing();break;case"fontFamily":this.pdfViewer.nodePropertyChange(t,{fontFamily:e.undoElement.fontFamily}),this.modifyInCollections(t,"fontFamily"),this.pdfViewer.renderDrawing();break;case"textAlign":this.pdfViewer.nodePropertyChange(t,{textAlign:e.undoElement.textAlign}),this.modifyInCollections(t,"textAlign"),this.pdfViewer.renderDrawing();break;case"textPropertiesChange":this.pdfViewer.nodePropertyChange(t,{font:e.undoElement.font}),this.modifyInCollections(t,"textPropertiesChange"),this.pdfViewer.renderDrawing();break;case"Rotate":this.pdfViewer.nodePropertyChange(t,{bounds:e.undoElement.bounds,rotateAngle:e.undoElement.rotateAngle}),this.modifyInCollections(t,"bounds"),this.modifyInCollections(t,"rotateAngle"),this.pdfViewer.renderDrawing()}"Stamp"===e.annotation.shapeAnnotationType&&(e.annotation=JSON.parse(JSON.stringify(e.annotation)))}}this.redoCollection.push(e)}this.updateToolbar(),this.isUndoRedoAction=!1,this.isUndoAction=!1}catch(e){throw console.error("Unhandled Exception:",e),e}}function Vl(){try{this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");var e=this.redoCollection.pop();if(e){if(this.checkFormFieldTypeAction(e.annotation,e.action))this.pdfViewer.formDesignerModule.formDesignerRedoAction();else{var t=this.pdfViewer.nameTable[e.annotation.id];if(e){var i=e.annotation.shapeAnnotationType;switch(this.isUndoRedoAction=!0,e.action){case"Text Markup Property modified":this.textMarkupAnnotationModule&&(e.annotation=this.textMarkupAnnotationModule.undoRedoPropertyChange(e.annotation,e.pageIndex,e.redoElement,e.modifiedProperty));break;case"Text Markup Added":case"Text Markup Deleted":this.textMarkupAnnotationModule&&("Text Markup Added"===e.action?this.textMarkupAnnotationModule.redoTextMarkupAction(e.duplicate,e.pageIndex,e.index,e.action,e):this.textMarkupAnnotationModule.redoTextMarkupAction(e.annotation,e.pageIndex,e.index,e.action,e));break;case"Drag":case"Resize":l(e.annotation)?this.pdfViewer.nodePropertyChange(t,{bounds:e.redoElement.bounds,vertexPoints:e.redoElement.vertexPoints,leaderHeight:e.redoElement.leaderHeight}):this.pdfViewer.nodePropertyChange(t,{bounds:e.redoElement.bounds}),!t||"Redaction"!==t.type&&"Redaction"!==t.shapeAnnotationType||this.pdfViewer.annotationModule.redactionAnnotationModule.redactionOverlayText.removeRedactionOverlayText(t),"Distance"!==e.annotation.measureType&&"Perimeter"!==e.annotation.measureType&&"Area"!==e.annotation.measureType&&"Radius"!==e.annotation.measureType&&"Volume"!==e.annotation.measureType||(this.pdfViewer.nodePropertyChange(t,{notes:e.redoElement.notes}),this.updateCalibrateValues(t)),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([t.id]),d(e.annotation.shapeAnnotationType)&&this.modifyInCollections(t,"bounds");break;case"Addition":var n=void 0!==e.annotation.pageIndex?e.annotation.pageIndex:e.annotation.pageNumber,o=void 0;"Line"!==i&&"LineWidthArrowHead"!==i&&"Polygon"!==i&&"Ellipse"!==i&&"Rectangle"!==i&&"Radius"!==i&&"Distance"!==i||(""===e.annotation.measureType||sf.base.isNullOrUndefined(e.annotation.measureType)?(i="shape",this.shapeAnnotationModule.addInCollection(n,e.duplicate)):(i="shape_measure",this.measureAnnotationModule.addInCollection(n,e.duplicate))),"Redaction"!==i&&"redaction"!==i||this.redactionAnnotationModule.addInCollection(n,e.duplicate),"FreeText"===i&&this.freeTextAnnotationModule.addInCollection(n,e.duplicate),"Stamp"!==i&&"stamp"!==i&&"Image"!==i||this.stampAnnotationModule.updateDeleteItems(n,e.redoElement),"HandWrittenSignature"!==i&&"SignatureText"!==i&&"SignatureImage"!==i||this.pdfViewerBase.signatureModule.addInCollection(n,e.duplicate),"Ink"===i&&this.inkAnnotationModule.addInCollection(n,e.duplicate),"StickyNotes"===i&&this.storeStickyAnnotations(n,e.redoElement),o=e.annotation,o=this.pdfViewer.add(e.duplicate?this.pdfViewer.nameTable[e.annotation.id]:e.annotation),this.pdfViewer.select([e.annotation.id]),("FreeText"===i||o.enableShapeLabel)&&o&&(o=this.pdfViewer.add(e.annotation),this.pdfViewer.nodePropertyChange(o,{})),this.pdfViewer.renderDrawing(null,n),"HandWrittenSignature"!==i&&"Path"!==i&&"SignatureText"!==i&&"SignatureImage"!==i&&(e.redoElement=this.getAnnotationFromSessionStorage(e,n),this.pdfViewer.annotation.undoCommentsElement.push(e.redoElement),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(e.annotation.pageIndex,i));break;case"Comment":var s=void 0!==e.annotation.pageIndex?e.annotation.pageIndex:e.annotation.pageNumber;if(this.pdfViewer.annotation.undoCommentsElement.push(e.redoElement),"HandWrittenSignature"!==i&&"Path"!==i&&"SignatureText"!==i&&"SignatureImage"!==i){var a=this.getAnnotationFromSessionStorage(e,s),r={};if(e.isNoteModified)r={Id:e.annotation.annotName,note:e.note},null!=a.note&&(a.note=e.note),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCommentItem",r).catch((function(e){throw console.error("Unhandled Exception:",e),e})),this.stickyNotesAnnotationModule.updateUndoRedoCollections(a,s);else if(e.isReplyModified){if(r={Id:a.annotName,editComments:e.comments},null!=a.comments&&a.comments.length>0)-1!==(h=a.comments.findIndex((function(t){return t.annotName===e.prevReply.annotName})))&&(a.comments[h]=e.comments);this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCommentItem",r).catch((function(e){throw console.error("Unhandled Exception:",e),e})),this.stickyNotesAnnotationModule.updateUndoRedoCollections(a,s)}else{if(null!=e.note&&(e.annotation.note=e.note,a.note=e.note,r={Id:a.annotName,note:e.note,addReply:sf.base.isNullOrUndefined(e.comments)?null:e.comments}),null!=e.comments){var h;if(null!=e.annotation.comments&&e.annotation.comments.length>0)-1===(h=e.annotation.comments.findIndex((function(t){return t.annotName===e.comments.annotName})))&&e.annotation.comments.push(e.comments);else e.annotation.comments.push(e.comments);a.comments=e.annotation.comments}this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCommentItem",r).catch((function(e){throw console.error("Unhandled Exception:",e),e})),this.stickyNotesAnnotationModule.updateUndoRedoCollections(a,s)}}break;case"Delete":var p=!1,c=e.annotation.shapeAnnotationType;"Line"!==i&&"LineWidthArrowHead"!==i&&"Polygon"!==i&&"Ellipse"!==i&&"Rectangle"!==i&&"Radius"!==i&&"Distance"!==i||(c=""===e.annotation.measureType||sf.base.isNullOrUndefined(e.annotation.measureType)?"shape":"measure",this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,c,"delete"),this.modifyInCollections(e.annotation,"delete"),p=!0),"Redaction"!==i&&"redaction"!==i||(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,i,"delete"),this.modifyInCollections(e.annotation,"delete"),p=!0),"Stamp"!==i&&"Image"!==i||(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,c,"delete"),this.stampAnnotationModule.updateSessionStorage(e.annotation,null,"delete"),p=!0),"FreeText"!==i&&"HandWrittenSignature"!==i&&"Path"!==i&&"SignatureText"!==i&&"SignatureImage"!==i||("SignatureField"===e.annotation.annotName&&this.updateFormFieldUndoRedoAction(e.annotation,i,null,null,!0),this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,c,"delete"),this.modifyInCollections(e.annotation,"delete")),p||this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(e.annotation,c,"delete");var u=this.pdfViewer.nameTable[e.annotation.id.split("_")[0]];null==u||"SignatureField"!==u.formFieldAnnotationType&&"InitialField"!==u.formFieldAnnotationType||(u.wrapper.children.splice(u.wrapper.children.indexOf(e.annotation.wrapper.children[0]),1),"SignatureText"===e.annotation.shapeAnnotationType&&u.wrapper.children.splice(u.wrapper.children.indexOf(e.annotation.wrapper.children[1]),1)),this.pdfViewer.clearSelection(e.annotation.pageIndex),this.pdfViewer.remove(e.annotation),this.pdfViewer.renderDrawing(null,e.annotation.pageIndex),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1),this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!1)),document.getElementById(e.annotation.annotName)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",e.annotation.annotName,e.annotation.pageIndex).catch((function(e){throw console.error("Unhandled Exception:",e),e}));break;case"RedactionPropertyChange":e.redoElement&&"Redaction"===e.redoElement.shapeAnnotationType&&this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.editAnnotation(e.redoElement);break;case"AddRedactPages":for(var f=[],m=0;m<e.annotation.length;m++){n=void 0!==e.annotation[m].pageIndex?e.annotation[m].pageIndex:e.annotation[m].pageNumber;var g=e.annotation[m];this.redactionAnnotationModule.addInCollection(n,e.duplicate[m]);o=this.pdfViewer.add(g);this.pdfViewer.select([g.id]),this.pdfViewer.renderDrawing(null,n),f.push({annotId:o.annotName,pageNumber:o.pageIndex+1,author:o.author})}this.pdfViewer.annotation.stickyNotesAnnotationModule.addPageRedactionComments(f);break;case"FormField Value Change":this.updateFormFieldUndoRedoAction(e.annotation,i,e.annotation.data,e.annotation.fontFamily);break;case"stampOpacity":this.pdfViewer.nodePropertyChange(t,{opacity:e.redoElement.opacity}),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(t,null,!0);break;case"Shape Stroke":this.pdfViewer.nodePropertyChange(t,{strokeColor:e.redoElement.strokeColor}),this.modifyInCollections(t,"stroke"),this.pdfViewer.renderDrawing();break;case"Shape Fill":this.pdfViewer.nodePropertyChange(t,{fillColor:e.redoElement.fillColor}),this.modifyInCollections(t,"fill"),this.pdfViewer.renderDrawing();break;case"Shape Opacity":this.pdfViewer.nodePropertyChange(t,{opacity:e.redoElement.opacity}),"StickyNotes"===e.annotation.shapeAnnotationType?(this.stickyNotesAnnotationModule.updateOpacityValue(t),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(t,null,!0)):this.modifyInCollections(t,"opacity"),this.pdfViewer.renderDrawing();break;case"Shape Thickness":this.pdfViewer.nodePropertyChange(t,{thickness:e.redoElement.thickness}),this.modifyInCollections(t,"thickness"),this.pdfViewer.renderDrawing();break;case"Line properties change":this.pdfViewer.nodePropertyChange(t,{fillColor:e.redoElement.fillColor,strokeColor:e.redoElement.strokeColor,opacity:e.redoElement.opacity,thickness:e.redoElement.thickness,sourceDecoraterShapes:this.getArrowType(e.redoElement.lineHeadStart),taregetDecoraterShapes:this.getArrowType(e.redoElement.lineHeadEnd),borderDashArray:e.redoElement.borderDashArray,borderStyle:e.redoElement.borderStyle}),this.updateCollectionForLineProperty(t),this.pdfViewer.renderDrawing();break;case"Text Property Added":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e.annotation,null,!0);break;case"Status Property Added":case"Comments Reply Deleted":e.annotation=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(e.annotation,e.action);break;case"dynamicText Change":this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!0,t.dynamicText=e.redoElement.dynamicText;var w=this.pdfViewer.selectedItems.annotations[0];w&&(w.dynamicText=e.redoElement.dynamicText,w.bounds.height=e.redoElement.bounds.height),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.redoAction(t,e.action,e.undoElement),this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(t,null,!0),this.modifyInCollections(t,"dynamicText"),w?this.pdfViewer.nodePropertyChange(w,{}):this.pdfViewer.nodePropertyChange(t,{}),this.pdfViewer.annotation.freeTextAnnotationModule.isFreeTextValueChange=!1,this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.pdfViewer.select([t.id]);break;case"fontColor":this.pdfViewer.nodePropertyChange(t,{fontColor:e.redoElement.fontColor}),this.modifyInCollections(t,"fontColor"),this.pdfViewer.renderDrawing();break;case"fontSize":this.pdfViewer.nodePropertyChange(t,{fontSize:e.redoElement.fontSize}),this.modifyInCollections(t,"fontSize"),this.pdfViewer.renderDrawing();break;case"fontFamily":this.pdfViewer.nodePropertyChange(t,{fontFamily:e.redoElement.fontFamily}),this.modifyInCollections(t,"fontFamily"),this.pdfViewer.renderDrawing();break;case"textAlign":this.pdfViewer.nodePropertyChange(t,{textAlign:e.redoElement.textAlign}),this.modifyInCollections(t,"textAlign"),this.pdfViewer.renderDrawing();break;case"textPropertiesChange":this.pdfViewer.nodePropertyChange(t,{font:e.redoElement.font}),this.modifyInCollections(t,"textPropertiesChange"),this.pdfViewer.renderDrawing();break;case"Rotate":this.pdfViewer.nodePropertyChange(t,{bounds:e.redoElement.bounds,rotateAngle:e.redoElement.rotateAngle}),this.modifyInCollections(t,"bounds"),this.modifyInCollections(t,"rotateAngle"),this.pdfViewer.renderDrawing()}e.redoElement&&void 0!==e.redoElement.modifiedDate&&(e.annotation.modifiedDate=e.redoElement.modifiedDate),"Stamp"===e.annotation.shapeAnnotationType&&(e.annotation=JSON.parse(JSON.stringify(e.annotation)))}}this.actionCollection.push(e)}this.updateToolbar(),this.isUndoRedoAction=!1}catch(e){throw console.error("Unhandled Exception:",e),e}}function Cl(e,t,i,n,o){if("Path"===t||"HandWrittenSignature"===t||"SignatureText"===t||"SignatureImage"===t){var s=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_formfields"),a=JSON.parse(s),r=[];if(a){for(var l=0;l<a.length;l++)a[l].uniqueID===e.id&&(a[l].Value=i,"Path"!==t&&"HandWrittenSignature"!==t&&"SignatureImage"!==t&&(a[l].FontFamily=n)),r.push(a[l]);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_formfields",JSON.stringify(r))}var d=document.getElementById(e.id),h=document.getElementById(e.id+"_html_element");null!==d||sf.base.isNullOrUndefined(h)||(d=h.children[0].children[0]),sf.base.isNullOrUndefined(i)?d&&d.classList.contains("e-pdfviewer-signatureformfields-signature")&&(d.className="e-pdfviewer-signatureformfields",d.style.pointerEvents="",this.pdfViewer.formFieldsModule.updateDataInSession(d,"")):d&&d.classList.contains("e-pdfviewer-signatureformfields")&&(d.className="e-pdfviewer-signatureformfields-signature",d.style.pointerEvents="none",this.pdfViewer.formFieldsModule.updateDataInSession(d,"")),this.pdfViewer.retrieveFormFieldsClientSide=!0;var p=this.pdfViewer.retrieveFormFields();this.pdfViewer.retrieveFormFieldsClientSide=!1;for(var c=0;c<p.length;c++)e.id===p[c].id&&(p[c].value=i,"Path"!==t&&"HandWrittenSignature"!==t&&"SignatureImage"!==t&&(p[c].signatureType=n));var u=void 0!==e.pageIndex?e.pageIndex:e.pageNumber;o||(sf.base.isNullOrUndefined(i)?(this.pdfViewer.clearSelection(u),this.pdfViewer.remove(e)):(this.pdfViewer.add(e),this.pdfViewer.select([e.id])),this.pdfViewer.renderDrawing(null,u))}}function Il(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]),!i)return null;var n=JSON.parse(i),o=this.getPageCollection(n,e);if(n[o]){for(var s=0;s<n[o].annotations.length;s++)if(n[o].annotations[s].annotName===t.annotationId)return n[o].annotations[s];return null}}function kl(e){var t;return"Highlight"===e&&this.pdfViewer.highlightSettings.customData?t=this.pdfViewer.highlightSettings.customData:"Underline"===e&&this.pdfViewer.underlineSettings.customData?t=this.pdfViewer.underlineSettings.customData:"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.customData?t=this.pdfViewer.strikethroughSettings.customData:"Squiggly"===e&&this.pdfViewer.squigglySettings.customData?t=this.pdfViewer.squigglySettings.customData:this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData),t}function Ml(){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.textMarkupAnnotationModule.clearCurrentSelectedAnnotation(),this.textMarkupAnnotationModule.clearCurrentAnnotationSelection(this.textMarkupAnnotationModule.selectTextMarkupCurrentPage);else if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations[0]){var e=this.pdfViewer.selectedItems.annotations[0];this.pdfViewer.clearSelection(e.pageIndex)}else this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1)}function Tl(e,t){var i,o;if("object"===n(e)&&(o=(i=e).annotationId,i=this.getAnnotationsFromAnnotationCollections(o)),"string"==typeof e&&(i=this.getAnnotationsFromAnnotationCollections(e),o=e),i){var s,a=i.pageNumber;s=this.findRenderPageList(a);var r=this.pdfViewer.annotationSelectorSettings;if(i&&a>=0){if("textMarkup"===i.shapeAnnotationType)if(i.rect||i.bounds){var l=this.pdfViewerBase.pageSize[a].top*this.pdfViewerBase.getZoomFactor()+this.getAnnotationTop(i)*this.pdfViewerBase.getZoomFactor();if(!this.isAnnotDeletionApiCall&&t){var d=(l-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(d,10),this.pdfViewerBase.viewerContainer.scrollLeft=this.getAnnotationLeft(i)*this.pdfViewerBase.getZoomFactor()}}else this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(a+1);else if(i.bounds){l=this.scrollTopLeftValue(i,a);if(!this.isAnnotDeletionApiCall&&t){var h=(l.top-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(h,10),this.pdfViewerBase.viewerContainer.scrollLeft=l.left}}else this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(a+1);if(s){if(this.previousIndex&&this.pdfViewer.clearSelection(this.previousIndex),this.pdfViewer.clearSelection(a),this.previousIndex=a,"textMarkup"===i.shapeAnnotationType){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(a,!0);var p=this.pdfViewerBase.getElement("_annotationCanvas_"+a),c=this.getTextMarkupAnnotations(a,i);c&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.isSelectedAnnotation=!0,this.textMarkupAnnotationModule.showHideDropletDiv(!0),this.textMarkupAnnotationModule.annotationClickPosition=null,this.textMarkupAnnotationModule.selectAnnotation(c,p,a,null,!0),this.textMarkupAnnotationModule.currentTextMarkupAnnotation=c,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=a,this.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0),this.textMarkupAnnotationModule.isSelectedAnnotation=!1)}else"stamp"===i.shapeAnnotationType||"stamp"===i.ShapeAnnotationType?(this.pdfViewer.select([i.uniqueKey],r),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===i.shapeAnnotationType||"sticky"===i.ShapeAnnotationType?(this.pdfViewer.select([i.annotationId],r),this.pdfViewer.annotation.onAnnotationMouseDown()):"FreeText"===i.shapeAnnotationType?(this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(i.fontFamily),this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(i.fontSize),this.pdfViewer.select([i.uniqueKey],r),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([i.uniqueKey],r),this.pdfViewer.annotation.onAnnotationMouseDown());var u=document.getElementById(this.pdfViewer.dataId+"_commantPanel");if(u&&"block"===u.style.display){var f=document.getElementById(o);f&&(f.classList.contains("e-pv-comments-border")||f.firstChildElement&&f.firstChildElement.click())}}else(i.uniqueKey||"textMarkup"===i.shapeAnnotationType&&"Imported Annotation"===i.annotationAddMode)&&(this.selectAnnotationId=o,this.isAnnotationSelected=!0,this.annotationPageIndex=a,this.selectAnnotationFromCodeBehind())}if(!s&&!i.uniqueKey&&this.isAnnotDeletionApiCall){var m=this.updateCollectionForNonRenderedPages(i,o,a);m.pageIndex=a,this.pdfViewer.annotation.addAction(a,null,m,"Delete","",m,m),this.undoCommentsElement.push(m),this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",i.annotationId,i.pageNumber)}}}function El(e,t){var i={};return"Line"===e&&"Arrow"!==t&&this.pdfViewer.lineSettings.customData?i=this.pdfViewer.lineSettings.customData:"LineWidthArrowHead"!==e&&"Arrow"!==t||!this.pdfViewer.arrowSettings.customData?"Rectangle"!==e&&"Square"!==e||!this.pdfViewer.rectangleSettings.customData?"Ellipse"!==e&&"Circle"!==e||!this.pdfViewer.circleSettings.customData?"Polygon"===e&&this.pdfViewer.polygonSettings.customData?i=this.pdfViewer.polygonSettings.customData:this.pdfViewer.annotationSettings.customData&&(i=this.pdfViewer.annotationSettings.customData):i=this.pdfViewer.circleSettings.customData:i=this.pdfViewer.rectangleSettings.customData:i=this.pdfViewer.arrowSettings.customData,i}function Bl(e,t){if(e=sf.base.isNullOrUndefined(this.pdfViewer.selectedItems.annotations[0])?e:this.pdfViewer.selectedItems.annotations[0]){if(this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null),(this.pdfViewerBase.tool instanceof Lr||this.pdfViewerBase.tool instanceof Rr)&&!this.pdfViewerBase.tool.dragging){var i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate};this.getAnnotationIndex(e.pageIndex,e.id),e.bounds&&(e.bounds.x,e.bounds.y,e.bounds.width,e.bounds.height);this.pdfViewerBase.tool instanceof Rr&&(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),this.pdfViewerBase.isAnnotationAdded&&"Distance"!==e.measureType||(""===e.measureType||sf.base.isNullOrUndefined(e.measureType)?"Redaction"===e.shapeAnnotationType?this.redactionAnnotationModule.renderRedactionAnnotations(e,this.pdfViewer.annotation.getEventPageNumber(t)):this.shapeAnnotationModule.renderShapeAnnotations(e,this.pdfViewer.annotation.getEventPageNumber(t)):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Radius"!==e.measureType||this.measureAnnotationModule.renderMeasureShapeAnnotations(e,this.pdfViewer.annotation.getEventPageNumber(t))),this.pdfViewerBase.updateDocumentEditedProperty(!0)}else this.pdfViewerBase.tool instanceof Br||this.pdfViewerBase.tool instanceof Fr?(this.pdfViewerBase.updateDocumentEditedProperty(!0),this.oldProperties=e.bounds||null,""===e.measureType||sf.base.isNullOrUndefined(e.measureType)?"FreeText"===e.shapeAnnotationType?this.pdfViewer.annotation.freeTextAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType?this.pdfViewerBase.signatureModule.modifySignatureCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Ink"===e.shapeAnnotationType?this.inkAnnotationModule.modifySignatureInkCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Stamp"===e.shapeAnnotationType||"Image"===e.shapeAnnotationType?this.stampAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Redaction"===e.shapeAnnotationType?this.pdfViewer.annotation.redactionAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Radius"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType||this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e),this.pdfViewerBase.tool instanceof Fr&&(e.formFieldAnnotationType||this.triggerAnnotationResize(e)),this.pdfViewerBase.tool instanceof Br&&"Select"!==this.pdfViewerBase.action&&(e.formFieldAnnotationType||this.triggerAnnotationMove(e))):this.pdfViewerBase.tool instanceof Nr&&(this.pdfViewerBase.updateDocumentEditedProperty(!0),this.oldProperties=e.bounds||null,""===e.measureType||sf.base.isNullOrUndefined(e.measureType)?"Line"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType&&"Polygon"!==e.shapeAnnotationType||this.pdfViewer.annotation.shapeAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType||("Distance"===e.measureType&&this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("leaderLength",this.pdfViewer.annotation.getEventPageNumber(t),e),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("bounds",this.pdfViewer.annotation.getEventPageNumber(t),e)),this.triggerAnnotationResize(e));this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&("HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType)&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0)),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar&&(this.pdfViewer.toolbarModule.annotationToolbarModule.clearTextMarkupMode(),""===e.measureType||sf.base.isNullOrUndefined(e.measureType)?this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode():"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType&&"Radius"!==e.measureType||this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode(),1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableAnnotationPropertiesTools(!0))}}function Pl(e){var t;return"Distance"!==e&&"Distance calculation"!==e||!this.pdfViewer.distanceSettings.customData?"Line"!==e&&"Perimeter calculation"!==e||!this.pdfViewer.lineSettings.customData?"Polygon"!==e&&"Area calculation"!==e&&"Volume calculation"!==e||!this.pdfViewer.polygonSettings.customData?"Radius"!==e&&"Radius calculation"!==e||!this.pdfViewer.radiusSettings.customData?this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData):t=this.pdfViewer.radiusSettings.customData:t=this.pdfViewer.polygonSettings.customData:t=this.pdfViewer.lineSettings.customData:t=this.pdfViewer.distanceSettings.customData,t}function Dl(){if(this.pdfViewer.enableAnnotation&&this.pdfViewer.enableMeasureAnnotation){var e="1 "+this.pdfViewer.measurementSettings.conversionUnit+" = "+this.pdfViewer.measurementSettings.scaleRatio+" "+this.pdfViewer.measurementSettings.displayUnit;this.measureAnnotationModule.updateMeasureValues(e,this.pdfViewer.measurementSettings.displayUnit,this.pdfViewer.measurementSettings.conversionUnit,this.pdfViewer.measurementSettings.depth)}}function Nl(e,t){"Distance"===e.measureType?(e.notes=function(e,t,i){for(var n,o=0;o<e.wrapper.children.length;o++){var s=e.wrapper.children[o];s&&!sf.base.isNullOrUndefined(s.content)&&(n=i.setConversion(p([t[0],t[1]])*i.pixelToPointFactor,e),s.content=n,s.childNodes[0].text=s.content,s.refreshTextElement())}return n}(e,e.vertexPoints,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null,null)):"Radius"===e.measureType?(e.notes=function(e,t){for(var i,n=0;n<e.wrapper.children.length;n++){var o=e.wrapper.children[n];o&&!sf.base.isNullOrUndefined(o.content)&&(i=t.setConversion(e.bounds.width/2*t.pixelToPointFactor,e),o.content=i,2===o.childNodes.length?(o.childNodes[0].text=i,o.childNodes.splice(o.childNodes.length-1,1)):o.childNodes[0].text=i,o.refreshTextElement())}return i}(e,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null,null)):"Perimeter"===e.measureType?(e.notes=V(e,e.vertexPoints,this.measureAnnotationModule),!0===e.enableShapeLabel&&(e.labelContent=e.notes),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null,null)):"Area"===e.measureType?(e.notes=this.measureAnnotationModule.calculateArea(e.vertexPoints,e.id,e.pageIndex),!0===e.enableShapeLabel&&(e.labelContent=e.notes,C(e)),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null,null)):"Volume"===e.measureType&&(e.notes=this.measureAnnotationModule.calculateVolume(e.vertexPoints,e.id,e.pageIndex),!0===e.enableShapeLabel&&(e.labelContent=e.notes,C(e)),this.pdfViewer.annotation.measureAnnotationModule.modifyInCollection("notes",e.pageIndex,e,t),this.pdfViewer.annotation.stickyNotesAnnotationModule.addTextToComments(e.annotName,e.notes),this.renderAnnotations(e.pageIndex,null,null,null,null,null))}function Fl(e,t){var i="None";switch(e){case this.pdfViewer.localeObj.getConstant("None"):i="None";break;case this.pdfViewer.localeObj.getConstant("Open Arrow"):i="OpenArrow";break;case this.pdfViewer.localeObj.getConstant("Closed Arrow"):i="Arrow";break;case this.pdfViewer.localeObj.getConstant("Round Arrow"):i="Circle";break;case this.pdfViewer.localeObj.getConstant("Square Arrow"):i="Square";break;case this.pdfViewer.localeObj.getConstant("Diamond Arrow"):i="Diamond";break;case this.pdfViewer.localeObj.getConstant("Butt"):i="Butt"}return i}function Ll(e){var t=this.pdfViewer.localeObj.getConstant("None");switch(e){case"Arrow":t=this.pdfViewer.localeObj.getConstant("Closed");break;case"OpenArrow":t=this.pdfViewer.localeObj.getConstant("Open Arrow");break;case"Circle":t=this.pdfViewer.localeObj.getConstant("Round");break;case"None":case"Square":case"Diamond":t=this.pdfViewer.localeObj.getConstant(e);break;case"Butt":t=this.pdfViewer.localeObj.getConstant("Butt")}return t}function Ol(e,t){this.pdfViewer.enableShapeLabel&&e&&t&&(t.labelSettings={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor})}function Rl(e,t){var i=this.freeTextAnnotationModule;i.inputBoxElement.style.fontFamily=t,i.autoFitFreeText();var n=this.pdfViewerBase.getZoomFactor(),o=(parseFloat(i.inputBoxElement.style.paddingLeft),e.bounds.height*n),s=parseFloat(i.inputBoxElement.style.width)-8;s/=n;var a=(o/=n)-e.bounds.height,r=void 0;a>0?r=(r=e.wrapper.offsetY+a/2)>0?r:void 0:(a=Math.abs(a),r=(r=e.wrapper.offsetY-a/2)>0?r:void 0);var l=s-e.bounds.width,d=void 0;l>0?d=(d=e.wrapper.offsetX+l/2)>0?d:void 0:(l=Math.abs(l),d=e.wrapper.offsetX-l/2),e.bounds.width=s,e.bounds.height=o,this.pdfViewer.nodePropertyChange(e,{fontFamily:t,bounds:{width:e.bounds.width,height:e.bounds.height,y:r,x:d}}),this.pdfViewer.renderSelector(e.pageIndex,this.pdfViewer.annotationSelectorSettings),this.modifyInCollections(e,"bounds")}function zl(e,t){var i={author:t.author,isLocked:this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock,allowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(t),modifiedDate:t.modifiedDate,subject:"Sticky Note",shapeAnnotationType:"sticky",pageNumber:e,type:"StickyNotes",note:"",opacity:t.opacity,pathData:"",state:"",stateModel:"",color:"rgba(255,255,0)",comments:[],annotName:t.annotName,bounds:{x:t.bounds.x,y:t.bounds.y,left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},review:{state:"",stateModel:"",modifiedDate:"",author:t.author},annotationSelectorSettings:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings?this.pdfViewer.stickyNotesSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,customData:this.getData("sticky"),annotationSettings:{isLock:!1},isPrint:t.isPrint,isCommentLock:!1};this.storeAnnotations(e,i,"_annotations_sticky")}function Hl(){if(this.pdfViewer.enableCommentPanel){var e=0,t=0,i=document.getElementById(this.pdfViewer.dataId+"_commantPanel");if(i&&"none"===i.style.display){if(this.pdfViewer.enableRtl&&(i.style.right="",i.style.left="0px"),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var n=this.pdfViewer.element.getElementsByClassName("e-pv-annotation-tools-close-icon");n[0].classList.remove("e-control"),n[0].classList.remove("e-btn"),n[0].classList.remove("e-lib"),document.getElementById("pdfViewer_commentPanelTitle").style.left="37px",document.getElementById("pdfViewer_commentPanelTitle").style.top="10px"}if(i.style.display="block",sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations.length>0||this.textMarkupAnnotationModule.currentTextMarkupAnnotation){for(var o=this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0]:this.textMarkupAnnotationModule.currentTextMarkupAnnotation,s=sf.base.isNullOrUndefined(o.pageIndex)?o.pageNumber:o.pageIndex,a=0;a<this.pdfViewer.pageCount;a++){if(p=document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+(a+1))){var r=p.children[0],l="true"===r.ariaExpanded,d=r.children[1].firstElementChild;!d||a===s&&l||!(a!==s&&l||a===s)||d.click()}}var h=document.getElementById(o.annotName);h&&h.firstElementChild&&h.firstElementChild.click()}else if(this.pdfViewer.annotationCollection.length>0)for(a=0;a<this.pdfViewer.pageCount;a++){var p;if(p=document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+(a+1))){var c=p.children[0];c.children[1].firstElementChild&&"true"===c.ariaExpanded&&c.children[1].firstElementChild.click()}}this.pdfViewerBase.mobileScrollerContainer.style.display="none"}else{var u=document.getElementById(this.pdfViewer.dataId+"_commantPanel");if(u&&"block"===u.style.display&&this.pdfViewer.selectedItems&&0!==this.pdfViewer.selectedItems.annotations.length){var f=document.getElementById(this.pdfViewer.selectedItems.annotations[0].annotName);f&&(f.classList.contains("e-pv-comments-border")||(f.firstElementChild&&f.firstElementChild.children.length>=1&&f.firstElementChild.children[1].firstElementChild?f.firstElementChild.children[1].firstElementChild.click():f.firstElementChild&&f.firstElementChild.click()))}}var m=this.pdfViewer.element.getElementsByClassName("e-pv-annotation-toolbar");m=sf.base.isNullOrUndefined(m)?m:m[0];var g=this.pdfViewer.element.getElementsByClassName("e-pv-formdesigner-toolbar");g=sf.base.isNullOrUndefined(g)?g:g[0];var w=!1,y=this.pdfViewer.element.getElementsByClassName("e-pv-redaction-toolbar");if(y=sf.base.isNullOrUndefined(y)?y:y[0],!sf.base.isNullOrUndefined(y)&&this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations&&0===this.pdfViewer.selectedItems.annotations.length)w=!(m&&0!==m.clientHeight);if(!sf.base.isNullOrUndefined(y)&&this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0){var v=this.pdfViewer.selectedItems.annotations[0];!v||"Redaction"!==v.type&&"Redaction"!==v.shapeAnnotationType||(w=!0)}w?this.pdfViewer._dotnetInstance.invokeMethodAsync("ShowRedactionToolbar",null).catch((function(e){throw console.error("Unhandled Exception:",e),e})):this.pdfViewer.enableAnnotationToolbar&&(sf.base.isNullOrUndefined(m)||m&&0===m.clientHeight)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("ShowAnnotationToolbar",null).catch((function(e){throw console.error("Unhandled Exception:",e),e})),this.pdfViewerBase.navigationPane.commentPanelResizer=document.getElementById(this.pdfViewer.dataId+"_commentPanelResizer"),this.pdfViewerBase.navigationPane.commentPanelResizer&&(this.pdfViewer.enableRtl&&(this.pdfViewerBase.navigationPane.commentPanelResizer.className="e-pv-comment-panel-resizer e-left"),this.pdfViewerBase.navigationPane.commentPanelResizer.style.display="block");var b=document.getElementById(this.pdfViewer.dataId+"_resize");this.pdfViewer.toolbar&&this.pdfViewer.toolbar.toolbarElement&&(e=this.pdfViewer.toolbar.toolbarElement.getBoundingClientRect().height),m&&(t=m.getBoundingClientRect().height),g&&0===t&&(t=g.getBoundingClientRect().height),y&&0===t&&(t=y.getBoundingClientRect().height),i.style.top=e+t+"px",i&&i.clientHeight&&b&&""===b.style.top&&(b.style.top=i.clientHeight/2+"px");var S=document.getElementById(this.pdfViewer.dataId+"_viewerContainer"),A=document.getElementById(this.pdfViewer.dataId+"_pageViewContainer");S&&(this.pdfViewer.enableRtl?S.style.left=this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px":S.style.right=this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px",S.style.width=this.pdfViewer.element.clientWidth-this.pdfViewerBase.navigationPane.getViewerContainerLeft()-this.pdfViewerBase.navigationPane.getViewerContainerRight()+"px",A.style.width=S.offsetWidth-this.pdfViewerBase.navigationPane.getViewerContainerScrollbarWidth()+"px"),this.pdfViewerBase.updateZoomValue(),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewerBase.updateCommentPanelasTabletSize(i)}}}function Ul(e){if(e.modifiedDate&&(e.modifiedDate=this.setAnnotationModifiedDate(e.modifiedDate)),e.comments&&e.comments.length>0)for(var t=0;t<e.comments.length;t++)e.comments[t].modifiedDate&&(e.comments[t].modifiedDate=this.setAnnotationModifiedDate(e.comments[t].modifiedDate),e.comments[t].review&&e.comments[t].review.modifiedDate&&(e.comments[t].review.modifiedDate=this.setAnnotationModifiedDate(e.comments[t].review.modifiedDate)));e.review&&e.review.modifiedDate&&(e.review.modifiedDate=this.setAnnotationModifiedDate(e.review.modifiedDate))}function jl(e,t,i){var n=[],o=null,s=this.convertPropertyNamesToUpperCaseFirstLetter(e);if(s&&s.length>0)for(var a=0;a<s.length;a++){var r=s[a];o={AnnotName:r.AnnotName?r.AnnotName:this.pdfViewer.annotation.createGUID(),ParentId:t.AnnotName,Subject:"Comments",Author:r.Author||i,ModifiedDate:r.ModifiedDate?r.ModifiedDate:this.stickyNotesAnnotationModule.getDateAndTime(),Note:r.Note,IsCommentLock:!!r.IsCommentLock&&r.IsCommentLock,State:r.State?r.State:r.Review&&r.Review.State?r.Review.State:"",StateModel:r.StateModel?r.StateModel:r.Review&&r.Review.StateModel?r.Review.StateModel:"Review",Comments:[],Review:{State:r.State?r.State:r.Review&&r.Review.State?r.Review.State:"",StateModel:r.StateModel?r.StateModel:r.Review&&r.Review.StateModel?r.Review.StateModel:"Review",ModifiedDate:r.ModifiedDate?r.ModifiedDate:this.stickyNotesAnnotationModule.getDateAndTime(),Author:r.Author||i},IsLock:r.IsLock},n[n.length]=o}return n}function _l(){var e=this.pdfViewer.selectedItems.annotations?this.pdfViewer.selectedItems.annotations.length>0?this.pdfViewer.selectedItems.annotations[0]:this.textMarkupAnnotationModule.currentTextMarkupAnnotation:null;e&&this.pdfViewer.focusElement(e.annotName)}function Wl(e,t,i){if(this.pdfViewerBase.annotationComments[t]){var n=this.pdfViewerBase.annotationComments[t][""+i];if(n||n.length>0){var o=n.findIndex((function(t){return t.AnnotName===e.annotName}));-1!==o&&n.splice(o,1)}}}function ql(e,t){var i;return"sticky"===e?i="Guest"!==this.pdfViewer.stickyNotesSettings.author?this.pdfViewer.stickyNotesSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"stamp"===e?i="Guest"!==this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"shape"===e?"Line"===t?i="Guest"!==this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"LineWidthArrowHead"===t||"Arrow"===t?i="Guest"!==this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Circle"===t||"Ellipse"===t||"Oval"===t?i="Guest"!==this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Rectangle"===t||"Square"===t?i="Guest"!==this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Polygon"===t&&(i="Guest"!==this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"measure"===e?"Distance"===t||"Distance calculation"===t?i="Guest"!==this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Perimeter"===t||"Perimeter calculation"===t?i="Guest"!==this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Radius"===t||"Radius calculation"===t?i="Guest"!==this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Area"===t||"Area calculation"===t?i="Guest"!==this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Volume"!==t&&"Volume calculation"!==t||(i="Guest"!==this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"textMarkup"===e?i="Highlight"===t?"Guest"!==this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Underline"===t?"Guest"!==this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Strikethrough"===t?"Guest"!==this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"Squiggly"===t?"Guest"!==this.pdfViewer.squigglySettings.author?this.pdfViewer.squigglySettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":this.pdfViewer.annotationSettings.author:"freeText"===e?i="Guest"!==this.pdfViewer.freeTextSettings.author?this.pdfViewer.freeTextSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest":"ink"===e&&(i="Guest"!==this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"),i||(i=this.pdfViewer.annotationSettings.author),i}function Zl(e){var t=this.pdfViewer.annotations;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].id===e)return t[i]}function Yl(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e.annotName)return this.pdfViewer.annotationCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}}function Xl(){if(Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500){for(var e=window.sessionStorage.length,t=[],i=0;i<e;i++)window.sessionStorage.key(i)&&window.sessionStorage.key(i).split("_")[3]&&"annotations"===window.sessionStorage.key(i).split("_")[3]&&(this.pdfViewerBase.annotationStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i)),t.push(window.sessionStorage.key(i)));if(t)for(i=0;i<t.length;i++)window.sessionStorage.removeItem(t[i])}}function Gl(e){var t=this;if("object"!==n(e)||null===e)return e;if(Array.isArray(e))return e.map((function(e){return t.convertPropertyNamesToUpperCaseFirstLetter(e)}));var i={};for(var o in e){if(Object.prototype.hasOwnProperty.call(e,o))i[""+(o.charAt(0).toUpperCase()+o.slice(1))]=this.convertPropertyNamesToUpperCaseFirstLetter(e[""+o])}return i}function Jl(e){var t;return e.ExistingCustomData&&!e.CustomData?t=JSON.parse(e.ExistingCustomData):null===e.CustomData?("sticky"===e.shapeAnnotationType&&(t=this.pdfViewer.stickyNotesSettings.customData),"Stamp"===e.shapeAnnotationType&&(t=this.pdfViewer.stampSettings.customData),"FreeText"===e.shapeAnnotationType&&(t=this.pdfViewer.freeTextSettings.customData),"shape"===e.id&&(t=this.getShapeData(e.ShapeAnnotationType,e.subject)),"measure"===e.id&&(t=this.getMeasureData(e.Subject)),"textMarkup"===e.shapeAnnotationType&&(t=this.getTextMarkupData(e.subject)),"Ink"===e.shapeAnnotationType&&(t=this.pdfViewer.inkAnnotationSettings.customData)):t=e.CustomData,t}function Kl(e,t,i){var n=this.pdfViewer.viewerBase.importedAnnotation[t];if(n){var o=void 0;if("shape"===i?o=n.shapeAnnotation:"shape_measure"===i?o=n.measureShapeAnnotation:"freeText"===i?o=n.freeTextAnnotation:"stamp"===i?o=n.stampAnnotations:"sticky"===i?o=n.stickyNotesAnnotation:"textMarkup"===i&&(o=n.textMarkupAnnotation),o)for(var s=0;s<o.length;s++)if(o[s].AnnotName===e.AnnotName)return"Imported Annotation"}return"Existing Annotation"}function Ql(e){var t;return"FreeText"===e&&this.pdfViewer.freeTextSettings.customData?t=this.pdfViewer.freeTextSettings.customData:"image"!==e&&"Stamp"!==e||!this.pdfViewer.stampSettings.customData?"sticky"===e&&this.pdfViewer.stickyNotesSettings.customData?t=this.pdfViewer.stickyNotesSettings.customData:this.pdfViewer.annotationSettings.customData&&(t=this.pdfViewer.annotationSettings.customData):t=this.pdfViewer.stampSettings.customData,t}function $l(e){var t=!1,i=this.pdfViewerBase.renderedPagesList;if(i)for(var n=0;n<i.length;n++)if(i[n]===e)return t=!0;return t}function ed(e){var t=this.pdfViewer.annotations;if(e){if("textMarkup"===e.shapeAnnotationType)return e.pageNumber;if(t)for(var i=0;i<t.length;i++)if(t[i].annotName===e.annotationId)return t[i].pageIndex}}function td(e){var t=this.pdfViewer.annotationCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].annotationId===e)return t[i];0!==this.pdfViewer.selectedItems.annotations.length||sf.base.isNullOrUndefined(this.pdfViewer.nameTable[""+e])||this.pdfViewer.selectedItems.annotations.push(this.pdfViewer.nameTable[""+e])}function id(e,t){for(var i=this.pdfViewer.drawing.getPageObjects(e),n=null,o=0;o<i.length;o++)if(i[o].id===t){n=o;break}return n}function nd(){return this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]?this.pdfViewer.selectedItems.annotations[0]:void 0}function od(e){var t=this.pdfViewer.formFieldCollection;if(t&&e)for(var i=0;i<t.length;i++)if(t[i].formFieldId===e.annotName)return this.pdfViewer.formFieldCollection.splice(i,1),{isExisting:!0,position:i};return{isExisting:!1,position:null}}function sd(e,t,i,n){var o=this.pdfViewer.allowServerDataBinding;if(this.stampAnnotationModule&&(this.stampAnnotationModule.isNewStampAnnot=!1),this.pdfViewer.enableServerDataBinding(!1),"None"!==e&&this.triggerAnnotationUnselectEvent(),"None"===e)this.clearAnnotationMode();else if("Highlight"===e||"Strikethrough"===e||"Squiggly"===e||"Underline"===e)this.textMarkupAnnotationModule&&(this.textMarkupAnnotationModule.isSelectionMaintained=!1,this.textMarkupAnnotationModule.drawTextMarkupAnnotations(e.toString()));else if("Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e)this.clearAnnotationMode(),this.shapeAnnotationModule&&this.shapeAnnotationModule.setAnnotationType(e);else if("Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e)this.measureAnnotationModule&&this.measureAnnotationModule.setAnnotationType(e);else if("FreeText"===e&&this.freeTextAnnotationModule)this.freeTextAnnotationModule.setAnnotationType("FreeText"),this.freeTextAnnotationModule.isNewFreeTextAnnot=!0,this.freeTextAnnotationModule.isNewAddedAnnot=!0;else if("HandWrittenSignature"===e&&this.pdfViewerBase.signatureModule)this.pdfViewerBase.signatureModule.setAnnotationMode();else if("Initial"===e&&this.pdfViewerBase.signatureModule)this.pdfViewerBase.signatureModule.setInitialMode();else if("Ink"===e&&this.inkAnnotationModule)this.inkAnnotationModule.setAnnotationMode();else if("StickyNotes"===e&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule){this.pdfViewerBase.isCommentIconAdded=!0,this.pdfViewerBase.isAddComment=!0;var s=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1));s&&s.addEventListener("mousedown",this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this))}else if("Redaction"===e&&this.pdfViewer.annotation.redactionAnnotationModule)this.clearAnnotationMode(),this.pdfViewer.annotation.redactionAnnotationModule&&this.pdfViewer.annotation.redactionAnnotationModule.setAnnotationType(e);else if("Stamp"===e&&this.pdfViewer.annotation.stampAnnotationModule)if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,t){var a=t;this.pdfViewerBase.isDynamicStamp=!0,this.stampAnnotationModule.retrieveDynamicStampAnnotation(a)}else if(i){a=i;this.pdfViewerBase.isDynamicStamp=!1,this.stampAnnotationModule.retrievestampAnnotation(a)}else if(n){a=n;this.pdfViewerBase.isDynamicStamp=!1,this.stampAnnotationModule.retrievestampAnnotation(a)}this.pdfViewer.enableServerDataBinding(o,!0),this.pdfViewerBase.initiateTextSelection()}function ad(){if(this.textMarkupAnnotationModule&&(this.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.freeTextAnnotationModule&&(this.freeTextAnnotationModule.isNewFreeTextAnnot=!1,this.freeTextAnnotationModule.isNewAddedAnnot=!1),this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode=""),this.pdfViewerBase.isShapeAnnotationModule()&&(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode=""),this.pdfViewerBase.isCalibrateAnnotationModule()&&(this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode=""),this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber,10);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}if(this.pdfViewer.annotationModule.stickyNotesAnnotationModule&&(this.pdfViewerBase.isCommentIconAdded=!1,this.pdfViewerBase.isAddComment=!1),this.pdfViewer.annotationModule.stampAnnotationModule){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){var t=this.pdfViewer.selectedItems;t&&t.annotations&&t.annotations.length>0&&("Stamp"===t.annotations[0].shapeAnnotationType||"Image"===t.annotations[0].shapeAnnotationType)&&this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode&&this.pdfViewer.remove(t.annotations[0])}this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!1,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!1,this.pdfViewerBase.stampAdded=!1}this.pdfViewerBase.tool&&(this.pdfViewerBase.tool=null),this.pdfViewer.tool&&(this.pdfViewer.tool=null),this.pdfViewerBase.action&&(this.pdfViewerBase.action=""),this.pdfViewer.toolbar&&this.pdfViewerBase.updateStampItems()}function rd(){this.pdfViewer.annotation.freeTextAnnotationModule.isAddAnnotationProgramatically=!1,this.pdfViewer.annotation.stickyNotesAnnotationModule.isAddAnnotationProgramatically=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.isAddAnnotationProgramatically=!1,this.pdfViewer.annotation.shapeAnnotationModule.isAddAnnotationProgramatically=!1,this.pdfViewer.annotation.measureAnnotationModule.isAddAnnotationProgramatically=!1,this.pdfViewer.annotation.stampAnnotationModule.isAddAnnotationProgramatically=!1,this.pdfViewer.annotation.inkAnnotationModule.isAddAnnotationProgramatically=!1,this.pdfViewer.annotation.redactionAnnotationModule.isAddAnnotationProgramatically=!1}function ld(){var e=!1,t=this.findCurrentAnnotation();return t&&this.checkIsLockSettings(t)&&this.checkAllowedInteractions("Select",t)&&(e=!0),e}function dd(){return this.pdfViewer.enableChunkMessages?this.pdfViewer.jsonObjectToGetBlobInfo(this.pdfViewer.annotationCollection,!0):this.pdfViewer.annotationCollection}function hd(){this.popupNote=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_annotation_note",className:"e-pv-annotation-note",styles:"display:none"}),this.popupNoteAuthor=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_annotation_note_author",className:"e-pv-annotation-note-author"}),this.popupNote.appendChild(this.popupNoteAuthor),this.popupNoteContent=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_annotation_note_content",className:"e-pv-annotation-note-content"}),this.popupNote.appendChild(this.popupNoteContent),this.pdfViewerBase.mainContainer.appendChild(this.popupNote)}function pd(){this.actionCollection=[],this.redoCollection=[],this.pdfViewerBase.customStampCollection=[],this.popupNote||this.createNote()}function cd(e,t,i,n,o){var s=this.pdfViewerBase.mainContainer.getBoundingClientRect(),a=this.popupNote.getBoundingClientRect();i&&(this.popupNoteAuthor.textContent=i),this.popupNoteContent.textContent=n,"Highlight"===o?this.popupNote.style.backgroundColor="rgb(237, 232, 177)":"Underline"===o?this.popupNote.style.backgroundColor="rgb(187, 241, 191)":("Strikethrough"===o||"Squiggly"===o)&&(this.popupNote.style.backgroundColor="rgb(242, 188, 207)"),this.popupNote.style.display="block";var r=e.pageY-s.top+5,l=e.pageX-s.left+5;l+a.width>s.width&&(l-=a.width),r+a.height>s.height&&(r-=a.height),this.popupNote.style.top=r+"px",this.popupNote.style.left=l+"px"}function ud(){this.popupNote&&(this.popupNote.style.display="none")}function fd(e){var t="";if("Line"===e||"Arrow"===e||"Rectangle"===e||"Circle"===e||"Polygon"===e||"Distance"===e||"Perimeter"===e||"Area"===e||"Radius"===e||"Volume"===e?t="Draw on the active page to insert.":"FreeText"===e?t="Touch on the active page to insert.":"Ink"===e?t="Draw and touch the Ink tool again to add.":"StickyNotes"===e||"Stamp"===e?t="Touch on the active page to insert.":"HandWrittenSignature"===e&&(t="Touch on the active page to sign."),""!==t){var i=(this.pdfViewer.element.clientWidth-220)/2,n=this.pdfViewer.element.clientHeight/2,o=document.getElementById(this.pdfViewer.dataId+"_annotation_message");if(o){o.style.pointerEvents="none";var s=o.firstElementChild;s?s.firstElementChild.firstElementChild.textContent=t:this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToastMessageXYPosition",t,i,n).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}}}function md(){var e=this,t=this.pdfViewer.dataId;this.popupElement=sf.base.createElement("div",{id:t+"_popup_annotation_note",className:"e-pv-annotation-popup-menu",styles:"display:none"});var i=sf.base.createElement("div",{id:t+"_popup_header",className:"e-pv-annotation-popup-header"});this.authorPopupElement=sf.base.createElement("div",{id:t+"_popup_author",className:"e-pv-annotation-popup-author"}),i.appendChild(this.authorPopupElement);var n=sf.base.createElement("span",{id:t+"_popup_close",className:"e-pv-annotation-popup-close e-pv-icon"});i.appendChild(n),this.popupElement.appendChild(i),this.modifiedDateElement=sf.base.createElement("div",{id:t+"_popup_modified_time",className:"e-pv-annotation-modified-time"}),this.popupElement.appendChild(this.modifiedDateElement);var o=sf.base.createElement("div",{id:t+"_popup_content_container",className:"e-pv-annotation-popup-note-container"});this.noteContentElement=sf.base.createElement("div",{id:t+"_popup_content",className:"e-pv-annotation-popup-content"}),this.noteContentElement.contentEditable="true",o.appendChild(this.noteContentElement),this.popupElement.appendChild(o),this.pdfViewerBase.viewerContainer.appendChild(this.popupElement),n.addEventListener("click",this.saveClosePopupMenu.bind(this)),n.addEventListener("touchend",this.saveClosePopupMenu.bind(this)),this.popupElement.addEventListener("mousedown",this.onPopupElementMoveStart.bind(this)),this.popupElement.addEventListener("mousemove",this.onPopupElementMove.bind(this)),window.addEventListener("mouseup",this.onPopupElementMoveEnd.bind(this)),this.popupElement.addEventListener("touchstart",this.onPopupElementMoveStart.bind(this)),this.popupElement.addEventListener("touchmove",this.onPopupElementMove.bind(this)),window.addEventListener("touchend",this.onPopupElementMoveEnd.bind(this)),this.noteContentElement.addEventListener("mousedown",(function(){e.noteContentElement.focus()}))}function gd(){var e,t=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,i=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].sourceDecoraterShapes),n=this.getArrowString(this.pdfViewer.selectedItems.annotations[0].taregetDecoraterShapes),o=!1;parseInt(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray,10)>=3?e="Dashed":"2"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray?e="Dotted":"0"===this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeDashArray&&(e="Solid"),"Perimeter"===this.pdfViewer.selectedItems.annotations[0].measureType&&(o=!0),this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenPropertiesDialog",t,i,n,e,o).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}function wd(){var e=document.querySelector("#"+this.pdfViewer.dataId+"_line_thickness"),t=document.querySelector("#"+this.pdfViewer.dataId+"_properties_fill_color_button"),i=document.querySelector("#"+this.pdfViewer.dataId+"_properties_stroke_color_button"),n=document.querySelector("#"+this.pdfViewer.dataId+"_properties_leader_length");e.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth,t.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,i.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,this.onStrokeColorChange(i.value),this.onFillColorChange(t.value),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(n.value=parseInt(this.pdfViewer.selectedItems.annotations[0].leaderHeight.toString(),10))}function yd(){this.strokeColorPicker&&(this.strokeColorPicker.destroy(),this.strokeColorPicker=null),this.fillColorPicker&&(this.fillColorPicker.destroy(),this.fillColorPicker=null),this.endArrowDropDown&&(this.endArrowDropDown.destroy(),this.endArrowDropDown=null),this.startArrowDropDown&&(this.startArrowDropDown.destroy(),this.startArrowDropDown=null),this.opacitySlider&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.thicknessBox&&(this.thicknessBox.destroy(),this.thicknessBox=null),this.lineStyleDropDown&&(this.lineStyleDropDown.destroy(),this.lineStyleDropDown=null),this.leaderLengthBox&&(this.leaderLengthBox.destroy(),this.leaderLengthBox=null),this.propertiesDialog&&(this.propertiesDialog.destroy(),this.propertiesDialog=null);var e=this.pdfViewerBase.getElement("_properties_window");e&&e.parentElement.removeChild(e)}function vd(){var e=this,t=this.pdfViewer.dataId,i=[{text:this.pdfViewer.localeObj.getConstant("None")},{text:this.pdfViewer.localeObj.getConstant("Open Arrow")},{text:this.pdfViewer.localeObj.getConstant("Closed Arrow")},{text:this.pdfViewer.localeObj.getConstant("Round Arrow")},{text:this.pdfViewer.localeObj.getConstant("Square Arrow")},{text:this.pdfViewer.localeObj.getConstant("Diamond Arrow")}],n=sf.base.createElement("div",{id:t+"_properties_appearance"}),o=sf.base.createElement("div",{className:"e-pv-properties-line-style-prop"});n.appendChild(o);var s=this.createInputElement(this.pdfViewer.localeObj.getConstant("Start Arrow"),o,"text","button",!0,"e-pv-properties-line-start",t+"_properties_line_start");this.startArrowDropDown=new sf.splitbuttons.DropDownButton({items:i,cssClass:"e-pv-properties-line-start",select:this.onStartArrowHeadStyleSelect.bind(this)},s);var a=this.createInputElement(this.pdfViewer.localeObj.getConstant("End Arrow"),o,"text","button",!0,"e-pv-properties-line-end",t+"_properties_line_end"),r=sf.base.createElement("div",{className:"e-pv-properties-border-style"});n.appendChild(r),this.endArrowDropDown=new sf.splitbuttons.DropDownButton({items:i,cssClass:"e-pv-properties-line-end",select:this.onEndArrowHeadStyleSelect.bind(this)},a);var l=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Style"),r,"text","button",!0,"e-pv-properties-line-style",t+"_properties_line_style"),d=this.createStyleList();this.lineStyleDropDown=new sf.splitbuttons.DropDownButton({cssClass:"e-pv-properties-line-style",target:d},l);var h=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Thickness"),r,"text","input",!0,"e-pv-properties-line-thickness",t+"_properties_thickness");this.thicknessBox=new sf.inputs.NumericTextBox({value:0,format:"## pt",cssClass:"e-pv-properties-line-thickness",min:0,max:12},h);var p=sf.base.createElement("div",{className:"e-pv-properties-color-style"});n.appendChild(p);var c=this.createInputElement(this.pdfViewer.localeObj.getConstant("Fill Color"),p,"color","button",!0,"e-pv-properties-line-fill-color",t+"_properties_fill_color");this.fillColorPicker=this.createColorPicker(t+"_properties_fill_color",!0),this.fillColorPicker.change=function(t){var i=""===t.currentValue.hex?"#ffffff00":t.currentValue.hex;e.fillDropDown.toggle(),e.updateColorInIcon(e.fillDropDown.element,i)},this.fillDropDown=this.createDropDownButton(c,"e-pv-properties-fill-color-icon",this.fillColorPicker.element.parentElement),this.fillDropDown.beforeOpen=this.onFillDropDownBeforeOpen.bind(this),this.fillDropDown.open=function(){e.fillColorPicker.refresh()};var u=this.createInputElement(this.pdfViewer.localeObj.getConstant("Line Color"),p,"color","button",!0,"e-pv-properties-line-stroke-color",t+"_properties_stroke_color");this.strokeColorPicker=this.createColorPicker(t+"_properties_stroke_color",!1),this.strokeColorPicker.change=function(t){var i=""===t.currentValue.hex?"#ffffff00":t.currentValue.hex;e.strokeDropDown.toggle(),e.updateColorInIcon(e.strokeDropDown.element,i)},this.strokeDropDown=this.createDropDownButton(u,"e-pv-properties-stroke-color-icon",this.strokeColorPicker.element.parentElement),this.strokeDropDown.beforeOpen=this.onStrokeDropDownBeforeOpen.bind(this),this.strokeDropDown.open=function(){e.strokeColorPicker.refresh()};var f=sf.base.createElement("div",{className:"e-pv-properties-opacity-style"});n.appendChild(f);var m=this.createInputElement(this.pdfViewer.localeObj.getConstant("Opacity"),f,"","div",!0,"e-pv-properties-line-opacity",t+"_properties_opacity");if(this.opacitySlider=new sf.inputs.Slider({type:"MinRange",max:100,min:0,cssClass:"e-pv-properties-line-opacity",change:function(){e.updateOpacityIndicator()}},m),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType){var g=this.createInputElement(this.pdfViewer.localeObj.getConstant("Leader Length"),f,"text","input",!0,"e-pv-properties-line-leader-length",t+"_properties_leader_length");this.leaderLengthBox=new sf.inputs.NumericTextBox({value:0,format:"## pt",cssClass:"e-pv-properties-line-leader-length",min:0,max:100},g)}return n}function bd(){var e=this,t=sf.base.createElement("ul");document.body.appendChild(t);var i=this.createListForStyle("solid");i.addEventListener("click",(function(){e.setThickness("0","solid")})),t.appendChild(i);var n=this.createListForStyle("dotted");n.addEventListener("click",(function(){e.setThickness("2","dotted")})),t.appendChild(n);var o=this.createListForStyle("dashed");return o.addEventListener("click",(function(){e.setThickness("3","dashed")})),t.appendChild(o),t}function Sd(e,t,i,n,o,s,a){var r=sf.base.createElement("div",{id:a+"_container",className:s+"-container"});if(o){var l=sf.base.createElement("div",{id:a+"_label",className:s+"-label"});l.textContent=e,r.appendChild(l)}this.pdfViewer.localeObj.getConstant("Opacity")===e&&(this.opacityIndicator=sf.base.createElement("span",{className:"e-pv-properties-opacity-indicator"}),r.appendChild(this.opacityIndicator));var d=sf.base.createElement(n,{id:a});return"input"===n&&(d.type=i),r.appendChild(d),t.appendChild(r),d}function Ad(e,t,i,n){var o,s,a,r=document.querySelector("#"+this.pdfViewer.dataId+"_line_thickness"),l=document.querySelector("#"+this.pdfViewer.dataId+"_properties_fill_color_button"),d=document.querySelector("#"+this.pdfViewer.dataId+"_properties_stroke_color_button"),h=document.querySelector("#"+this.pdfViewer.dataId+"_properties_opacity"),p=this.getArrowTypeFromDropDown(e,!0),c=this.getArrowTypeFromDropDown(t,!0),f=parseInt(r.value,10);o=""===(o=this.getValue(d.children[0].style.borderBottomColor,"hex"))?"#ffffff00":o,s=""===(s=this.getValue(l.children[0].style.borderBottomColor,"hex"))?"#ffffff00":s,a=n?n/100:h.value/100,i&&("Solid"===i?this.setThickness("0","solid"):"Dotted"===i?this.setThickness("2","dotted"):"Dashed"===i&&this.setThickness("3","dashed"));var m=this.pdfViewer.selectedItems.annotations[0],g=u(m),w=u(m),y={},v=!1,b=!1,S=!1,A=!1,x=!1,V=!1,C=!1;p!==m.sourceDecoraterShapes&&(y.sourceDecoraterShapes=p,w.lineHeadStart=this.getArrowString(p),x=!0),c!==m.taregetDecoraterShapes&&(y.taregetDecoraterShapes=c,w.lineHeadEnd=this.getArrowString(c),V=!0),f!==m.wrapper.children[0].style.strokeWidth&&(y.thickness=f,w.thickness=f,S=!0),o!==m.wrapper.children[0].style.strokeColor&&(y.strokeColor=o,w.strokeColor=o,b=!0),s!==m.wrapper.children[0].style.fill&&(y.fillColor=s,w.fillColor=s,v=!0),a!==m.wrapper.children[0].style.opacity&&(y.opacity=a,w.opacity=a,A=!0),this.selectedLineDashArray!==m.wrapper.children[0].style.strokeDashArray&&(y.borderDashArray=this.selectedLineDashArray,y.borderStyle=this.selectedLineStyle,w.borderDashArray=y.borderDashArray,w.borderStyle=y.borderStyle,C=!0);var I=document.querySelector("#"+this.pdfViewer.dataId+"_properties_leader_length");if("Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&parseInt(I.value,10)!==this.pdfViewer.selectedItems.annotations[0].leaderHeight&&(y.leaderHeight=parseInt(I.value,10)),this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],y),this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill=s,this.triggerAnnotationPropChange(this.pdfViewer.selectedItems.annotations[0],v,b,S,A,x,V,C),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"thickness"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"stroke"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"fill"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"opacity"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"dashArray"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"startArrow"),this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"endArrow"),"Distance"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&this.modifyInCollections(this.pdfViewer.selectedItems.annotations[0],"leaderLength"),this.pdfViewer.selectedItems.annotations[0])if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var k=this.pdfViewerBase.blazorUIAdaptor.isLineAnnotationFillColorEnabled()?"Shape":"Line";this.pdfViewer._dotnetInstance.invokeMethodAsync("MobileAnnotationPropertyUpdate",k)}else this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!0);this.pdfViewer.annotation.addAction(m.pageIndex,null,m,"Line properties change","",g,w),this.renderAnnotations(m.pageIndex,null,null,null,null)}function xd(e){if(this.textMarkupAnnotationModule&&(this.currentAnnotPageNumber=this.getEventPageNumber(e),this.textMarkupAnnotationModule&&(e.target!==this.noteContentElement||e.target.contains(this.noteContentElement.childNodes[0]))&&(this.hidePopupNote(),!this.popupElement))){this.createTextMarkupPopup(),this.popupElement.style.display="block",this.authorPopupElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.author,this.modifiedDateElement.textContent=this.getProperDate(this.textMarkupAnnotationModule.currentTextMarkupAnnotation.modifiedDate),this.noteContentElement.textContent=this.textMarkupAnnotationModule.currentTextMarkupAnnotation.note;var t=this.popupElement.getBoundingClientRect(),i=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+this.currentAnnotPageNumber),n=i.getBoundingClientRect(),o=e.clientY-n.top+parseFloat(i.style.top),s=e.clientX;s+t.width>parseFloat(i.style.left)+parseFloat(i.style.width)?this.popupElement.style.left=s-t.width+"px":this.popupElement.style.left=s+"px",o+t.height>parseFloat(i.style.top)+parseFloat(i.style.height)?this.popupElement.style.top=o-t.height+"px":this.popupElement.style.top=o+"px",this.isPopupNoteVisible=!0}}function Vd(e){if("touchstart"===e.type&&(e=e.changedTouches[0]),e.target.id!==this.noteContentElement.id||!e.target.contains(this.noteContentElement.childNodes[0])){this.isPopupMenuMoved=!0;var t=this.popupElement.getBoundingClientRect();this.clientX=e.clientX-t.left,this.clientY=e.clientY-t.top+this.pdfViewerBase.pageSize[this.currentAnnotPageNumber].top*this.pdfViewerBase.getZoomFactor()}}function Cd(e){if("touchmove"===e.type&&(e=e.changedTouches[0]),this.isPopupMenuMoved&&(e.target.id!==this.noteContentElement.id||!e.target.contains(this.noteContentElement.childNodes[0]))){var t=e.clientX-this.clientX+parseFloat(this.popupElement.style.left),i=e.clientY-this.clientY+parseFloat(this.popupElement.style.top);this.clientX=e.clientX,this.clientY=e.clientY;var n=this.popupElement.getBoundingClientRect(),o=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+this.currentAnnotPageNumber);t>parseFloat(o.style.left)&&t+n.width<parseFloat(o.style.left)+parseFloat(o.style.width)?this.popupElement.style.left=t+"px":this.popupElement.style.left=parseFloat(this.popupElement.style.left)+"px",i>parseFloat(o.style.top)&&i+n.height<parseFloat(o.style.top)+parseFloat(o.style.height)?this.popupElement.style.top=i+"px":this.popupElement.style.top=parseFloat(this.popupElement.style.top)+"px"}}function Id(){this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.saveNoteContent(this.currentAnnotPageNumber,this.noteContentElement.innerText),this.closePopupMenu()}function kd(){this.popupElement&&(this.popupElement.parentElement.removeChild(this.popupElement),this.popupElement=null,this.isPopupNoteVisible=!1)}function Md(e,t){var i=sf.base.createElement("input",{id:e+"_target"});document.body.appendChild(i);var n=new sf.inputs.ColorPicker({inline:!0,mode:"Palette",enableOpacity:!1,value:"#000000",showButtons:!1,modeSwitcher:!1,noColor:t});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(i),n}function Td(e,t,i){var n=new sf.splitbuttons.DropDownButton({iconCss:t+" e-pv-icon",target:i});return this.pdfViewer.enableRtl&&(n.enableRtl=!0),n.appendTo(e),n}function Ed(){1===this.pdfViewer.selectedItems.annotations.length&&(this.fillColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor),this.fillColorPicker.refresh()}function Bd(){1===this.pdfViewer.selectedItems.annotations.length&&(this.strokeColorPicker.value=this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor),this.strokeColorPicker.refresh()}function Pd(e){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateUndoRedoButtons(),this.pdfViewer.viewerBase.blazorUIAdaptor.canUndoRedo(),this.actionCollection&&0===this.actionCollection.length?this.pdfViewerBase.updateDocumentEditedProperty(!1):this.pdfViewerBase.updateDocumentEditedProperty(!0),e&&this.pdfViewerBase.updateDocumentEditedProperty(!0)}function Dd(){var e;if(this.setAnnotationMode("None"),this.pdfViewer.toolbarModule&&(e=this.pdfViewer.toolbarModule.annotationToolbarModule),!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(e){var t=this.pdfViewer.selectedItems;t&&t.annotations&&t.annotations.length>0?"HandWrittenSignature"===t.annotations[0].shapeAnnotationType&&this.pdfViewerBase.currentSignatureAnnot&&(this.pdfViewer.remove(t.annotations[0]),e.enableTextMarkupAnnotationPropertiesTools(!1)):e.enableTextMarkupAnnotationPropertiesTools(!1),this.pdfViewerBase.isSignatureAdded=!1}}else this.pdfViewer.toolbarModule.deSelectItem(this.pdfViewer.toolbarModule.CommentElement),this.pdfViewerBase.isSignatureAdded=!1;e&&e.DeselectItems()}function Nd(e){var t=e.shapeAnnotationType;if("Stamp"===t||"Image"===t||"Path"===t||"FreeText"===t||"StickyNotes"===t||"Ink"===t){var i=void 0;i="FreeText"===t?{opacity:e.opacity,borderColor:e.strokeColor,borderWidth:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,fillColor:e.fillColor,fontSize:e.fontSize,width:e.bounds.width,height:e.bounds.height,fontColor:e.fontColor,fontFamily:e.fontFamily,defaultText:e.dynamicText,fontStyle:e.font,textAlignment:e.textAlign}:{opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,data:e.data};var n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height},o=this.getAnnotationType(e.shapeAnnotationType,e.measureType);this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,i)}else if("SignatureText"===t||"SignatureImage"===t||"HandWrittenSignature"===t){n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height};this.pdfViewer.fireSignatureAdd(e.pageIndex,e.signatureName,e.shapeAnnotationType,n,e.opacity,e.strokeColor,e.thickness,e.data)}else{var s={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate};n={left:e.bounds.x,top:e.bounds.y,width:e.bounds.width,height:e.bounds.height};"Line"!==(o=this.getAnnotationType(e.shapeAnnotationType,e.measureType))&&"Arrow"!==o&&"Distance"!==o&&"Perimeter"!==o||(s.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),s.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),s.borderDashArray=e.borderDashArray);var a=void 0;this.pdfViewer.enableShapeLabel?(a={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor},this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,s,null,null,null,a)):this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,s)}}function Fd(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]){var e=this.pdfViewer.selectedItems.annotations[0];"HandWrittenSignature"!==e.shapeAnnotationType&&"SignatureText"!==e.shapeAnnotationType&&"SignatureImage"!==e.shapeAnnotationType&&"Path"!==e.shapeAnnotationType&&(this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageIndex,e),this.pdfViewer.clearSelection(e.pageIndex))}}function Ld(e,t,i,n,o,s,a,r,l,d,h){this.getAnnotationIndex(e.pageIndex,e.id);var p=this.getAnnotationType(e.shapeAnnotationType,e.measureType),c={name:"annotationPropertiesChange",pageIndex:e.pageIndex,annotationId:e.annotName,annotationType:p,isColorChanged:t,isOpacityChanged:o,isThicknessChanged:n,isStrokeColorChanged:i};l&&(c.isFreeTextChanged=l,c.previousText=d,c.currentText=h),s&&(c.isLineHeadStartStyleChanged=s),a&&(c.isLineHeadEndStyleChanged=a),r&&(c.isBorderDashArrayChanged=r),this.pdfViewer.triggerEventData("AnnotationPropertiesChanged",c),this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated")}function Od(e){var t,i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,isLocked:e.isLocked},n={x:e.wrapper.bounds.x,y:e.wrapper.bounds.y,left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,width:e.wrapper.bounds.width,height:e.wrapper.bounds.height},o=this.getAnnotationType(e.shapeAnnotationType,e.measureType);o&&(i.type=o),"FreeText"!==o&&"Redaction"!==o||(i.fontColor=e.fontColor,i.fontSize=e.fontSize,i.fontFamily=e.fontFamily,i.textAlignment=e.textAlign),i.content="FreeText"===o?e.dynamicText:e.overlayText,"Line"!==o&&"Arrow"!==o&&"Distance"!==o&&"Perimeter"!==o||(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel?(t={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor},this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,i,null,null,null,t)):this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,o,n,i)}function Rd(e,t){var i,n={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,isLocked:e.isLocked},o=e.bounds,s={left:o.x,top:o.y,x:o.x,y:o.y,width:o.width,height:o.height};i=this.oldProperties?{left:this.oldProperties.x?this.oldProperties.x:o.x,top:this.oldProperties.y?this.oldProperties.y:o.y,width:o.width,height:o.height}:{left:o.x,top:o.y,width:o.width,height:o.height};var a=this.getAnnotationType(e.shapeAnnotationType,e.measureType);a&&(n.type=a),"FreeText"!==a&&"Redaction"!==a||(n.fontColor=e.fontColor,n.fontSize=e.fontSize,n.fontFamily=e.fontFamily,n.textAlignment=e.textAlign),n.content="FreeText"===a?e.dynamicText:e.overlayText,"Line"!==a&&"Arrow"!==a&&"Distance"!==a&&"Perimeter"!==a||(n.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),n.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),n.borderDashArray=e.borderDashArray),"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?(this.pdfViewer.fireSignatureMove(e.pageIndex,e.signatureName,e.shapeAnnotationType,e.opacity,e.strokeColor,e.thickness,i,s),this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated")):(t?this.pdfViewer.fireAnnotationMoving(e.pageIndex,e.annotName,a,n,i,s):this.pdfViewer.fireAnnotationMove(e.pageIndex,e.annotName,a,n,i,s),t||this.pdfViewerBase.tool.startPosition.x===this.pdfViewerBase.prevPosition.x&&this.pdfViewerBase.tool.startPosition.y===this.pdfViewerBase.prevPosition.y||this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated"))}function zd(e){var t,i={opacity:e.opacity,fillColor:e.fillColor,strokeColor:e.strokeColor,thickness:e.thickness,author:e.author,subject:e.subject,modifiedDate:e.modifiedDate,isLocked:e.isLocked},n=(this.getAnnotationIndex(e.pageIndex,e.id),e.bounds),o={left:n.x,top:n.y,x:n.x,y:n.y,width:n.width,height:n.height},s={left:this.oldProperties.x,top:this.oldProperties.y,width:this.oldProperties.width,height:this.oldProperties.height},a=this.getAnnotationType(e.shapeAnnotationType,e.measureType);a&&(i.type=a),"FreeText"!==a&&"Redaction"!==a||(i.fontColor=e.fontColor,i.fontSize=e.fontSize,i.fontFamily=e.fontFamily,i.textAlignment=e.textAlign),i.content="FreeText"===a?e.dynamicText:e.overlayText,"Line"!==a&&"Arrow"!==a&&"Distance"!==a&&"Perimeter"!==a||(i.lineHeadStartStyle=this.getArrowString(e.sourceDecoraterShapes),i.lineHeadEndStyle=this.getArrowString(e.taregetDecoraterShapes),i.borderDashArray=e.borderDashArray),this.pdfViewer.enableShapeLabel&&"HandWrittenSignature"!==e.shapeAnnotationType?(t={fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,opacity:e.labelOpacity,labelContent:e.labelContent,fillColor:e.labelFillColor,notes:e.notes},this.pdfViewer.fireAnnotationResize(e.pageIndex,e.annotName,a,o,i,null,null,null,t)):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewer.fireSignatureResize(e.pageIndex,e.signatureName,e.shapeAnnotationType,e.opacity,e.strokeColor,e.thickness,o,s):this.pdfViewer.fireAnnotationResize(e.pageIndex,e.annotName,a,o,i),this.pdfViewerBase.tool.startPosition.x===this.pdfViewerBase.prevPosition.x&&this.pdfViewerBase.tool.startPosition.y===this.pdfViewerBase.prevPosition.y||this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated")}function Hd(e){var t,i,n,o,s,a=!1;if(this.pdfViewerBase.isUpdateProgrammatically=!0,this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?(i=(t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation).annotName,o=this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectTextMarkupCurrentPage):this.pdfViewer.selectedItems.annotations[0]&&(i=(t=this.pdfViewer.selectedItems.annotations[0]).annotName,o=t.pageIndex),!sf.base.isNullOrUndefined(e.uniqueKey)){if((t=this.pdfViewer.nameTable[e.uniqueKey]).annotationSettings.isLock=e.annotationSettings.isLock,(s=this.pdfViewer.annotationCollection.filter((function(e){return e.annotationId===t.annotName}))).length>0&&(s[0].annotationSettings.isLock=t.annotationSettings.isLock),i=t.annotName,o=t.pageIndex,e.allowedInteractions)for(var r=e.allowedInteractions.length,l=0;l<r;l++)0===e.allowedInteractions[l]&&(e.allowedInteractions[l]=jt.Select),1===e.allowedInteractions[l]&&(e.allowedInteractions[l]=jt.Move),2===e.allowedInteractions[l]&&(e.allowedInteractions[l]=jt.Resize),3===e.allowedInteractions[l]&&(e.allowedInteractions[l]=jt.Delete),4===e.allowedInteractions[l]&&(e.allowedInteractions[l]=jt.PropertyChange),5===e.allowedInteractions[l]&&(e.allowedInteractions[l]=jt.None);e.allowedInteractions=e.allowedInteractions?e.allowedInteractions:this.updateAnnotationAllowedInteractions(e),t.allowedInteractions!==e.allowedInteractions&&(t.allowedInteractions=e.allowedInteractions,this.modifyInCollections(t,"allowedInteractions"))}if(t||"sticky"===e.shapeAnnotationType&&void 0!==e.annotationId&&((t=this.pdfViewer.nameTable[e.annotationId]).annotationSettings.isLock=e.annotationSettings.isLock,i=t.annotName,o=t.pageIndex),!("Highlight"!==e.type&&"Underline"!==e.type&&"Strikethrough"!==e.type&&"Squiggly"!==e.type||this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&e.Id===t.annotName)){t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.getAnnotations(e.pageNumber,e);for(l=0;l<t.length;l++)if(e.Id===t[l].annotName){a=!0,t=t[l],this.textMarkupAnnotationModule.currentTextMarkupAnnotation=t,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=t.pageNumber,t.allowedInteractions!==e.allowedInteractions&&(t.allowedInteractions=e.allowedInteractions,this.textMarkupAnnotationModule.modifyAnnotationProperty("allowedInteractions",t.allowedInteractions,null)),o=t.pageNumber,i=e.Id;break}}if(t){var d=u(t),h=u(t);if("Highlight"!==e.type&&"Underline"!==e.type&&"Strikethrough"!==e.type&&"Squiggly"!==e.type||(n="textMarkup"),"Highlight"===e.type||"Underline"===e.type||"Strikethrough"===e.type||"Squiggly"===e.type){if(t.annotationSettings&&e.annotationSettings&&t.annotationSettings.isLock!==e.annotationSettings.isLock){var p=this.textMarkupAnnotationModule.modifyAnnotationProperty("AnnotationSettings",e.annotationSettings.isLock,null);this.textMarkupAnnotationModule.manageAnnotations(p,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage)}if(t.isLocked!==e.isLock){p=this.textMarkupAnnotationModule.modifyAnnotationProperty("IsLock",e.isLock,null);this.textMarkupAnnotationModule.manageAnnotations(p,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage)}if(t.textMarkupContent!==e.textMarkupContent){p=this.textMarkupAnnotationModule.modifyAnnotationProperty("TextMarkupContent",e.textMarkupContent,null);this.textMarkupAnnotationModule.manageAnnotations(p,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage)}if(t.isPrint!==e.isPrint){p=this.textMarkupAnnotationModule.modifyAnnotationProperty("IsPrint",e.isPrint,null);this.textMarkupAnnotationModule.manageAnnotations(p,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage)}t.opacity!==e.opacity&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,e.opacity),t.color!==!sf.base.isNullOrUndefined(e.color)&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(e.color),JSON.stringify(t.bounds)!==JSON.stringify(e.bounds)&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyBoundsProperty(e.bounds),n="textMarkup",a&&(this.textMarkupAnnotationModule.currentTextMarkupAnnotation=null,this.textMarkupAnnotationModule.selectTextMarkupCurrentPage=null)}else if(e&&"Image"===e.type&&e.customStampSource)n="stamp",t.data!==e.customStampSource&&(t.data=e.customStampSource,t.wrapper.children[0].imageSource=e.customStampSource),e.opacity&&t.opacity!==e.opacity&&(this.annotationPropertyChange(t,e.opacity,"Shape Opacity",d,h),this.modifyInCollections(t,"opacity")),this.calculateAnnotationBounds(t,e),this.boundsChanged&&(this.pdfViewer.drawing.select([e.uniqueKey],this.pdfViewer.annotationSelectorSettings),this.modifyInCollections(t,"bounds"),this.boundsChanged=!1),t.isPrint!==e.isPrint&&(t.isPrint=e.isPrint,this.modifyInCollections(t,"isPrint")),t.isLocked!==e.isLock&&(t.isLocked=e.isLock,t.annotationSettings.isLock=e.isLock,this.modifyInCollections(t,"isLock"));else if("StickyNotes"===e.type||"Stamp"===e.type||"sticky"===e.shapeAnnotationType||"stamp"===e.shapeAnnotationType)e.opacity&&t.opacity!==e.opacity&&(this.annotationPropertyChange(t,e.opacity,"Shape Opacity",d,h),this.modifyInCollections(t,"opacity")),this.calculateAnnotationBounds(t,e),this.boundsChanged&&(this.pdfViewer.drawing.select([e.uniqueKey],this.pdfViewer.annotationSelectorSettings),this.modifyInCollections(t,"bounds"),this.boundsChanged=!1),t.isPrint!==e.isPrint&&(t.isPrint=e.isPrint,this.modifyInCollections(t,"isPrint")),t.isLocked!==e.isLock&&(t.isLocked=e.isLock,t.annotationSettings.isLock=e.isLock,this.modifyInCollections(t,"isLock")),n="StickyNotes"===e.type||"sticky"===e.shapeAnnotationType?"sticky":"stamp";else if("Ink"===e.type||"Shape"===e.type||"Distance"===e.type||"Volume"===e.type||"Radius"===e.type||"Area"===e.type||"Perimeter"===e.type||"Measure"===e.type||"Line"===e.type||"Arrow"===e.type||"Square"===e.type||"Circle"===e.type||"Polygon"===e.type||"Polyline"===e.type||"Rectangle"===e.type){if("Rectangle"!==e.type&&"Circle"!==e.type&&"Radius"!==e.type&&"Ink"!==e.type||(this.calculateAnnotationBounds(t,e),"Radius"===e.type&&(this.updateCalibrateValues(t),e.note=t.notes)),sf.base.isNullOrUndefined(e.opacity)||t.opacity===e.opacity||(this.annotationPropertyChange(t,e.opacity,"Shape Opacity",d,h),this.modifyInCollections(t,"opacity")),t.isPrint!==e.isPrint&&(t.isPrint=e.isPrint,this.modifyInCollections(t,"isPrint")),e.fillColor&&t.fillColor!==e.fillColor?(h.fillColor=e.fillColor,e.labelSettings&&e.labelSettings.fillColor&&(e.labelSettings.fillColor=e.fillColor),this.pdfViewer.nodePropertyChange(t,{fillColor:e.fillColor}),this.modifyInCollections(t,"fill"),this.triggerAnnotationPropChange(t,!0,!1,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Fill","",d,h)):e.fillColor=t.fillColor,e.strokeColor&&t.strokeColor!==e.strokeColor?(h.strokeColor=e.strokeColor,this.pdfViewer.nodePropertyChange(t,{strokeColor:e.strokeColor}),this.modifyInCollections(t,"stroke"),this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",d,h)):e.strokeColor=t.strokeColor,sf.base.isNullOrUndefined(e.thickness)||t.thickness===e.thickness||(h.thickness=e.thickness,this.pdfViewer.nodePropertyChange(t,{thickness:e.thickness}),this.modifyInCollections(t,"thickness"),this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",d,h)),t.subject!==e.subject&&(h.subject=e.subject,this.pdfViewer.nodePropertyChange(t,{subject:e.subject}),this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",d,h)),t.isLocked!==e.isLock&&(h.isLock=e.isLock,e.isLocked=e.isLock,t.isLock=e.isLock,t.isLocked=e.isLock,t.annotationSettings.isLock=e.isLock,this.modifyInCollections(t,"isLock")),"Distance"===e.type&&e.leaderLength!==t.leaderHeight&&this.pdfViewer.nodePropertyChange(t,{leaderHeight:e.leaderLength}),("Line"===e.type||"Arrow"===e.type||"Volume"===e.type||"Distance"===e.type||"Perimeter"===e.type||"Area"===e.type||"Polyline"===e.type||"Polygon"===e.type)&&JSON.stringify(t.vertexPoints)!==JSON.stringify(e.vertexPoints)){var c=e.vertexPoints;t.vertexPoints=c,this.pdfViewer.nodePropertyChange(t,{vertexPoints:c}),this.pdfViewer.drawing.select([e.uniqueKey],this.pdfViewer.annotationSelectorSettings),this.modifyInCollections(t,"bounds"),this.updateCalibrateValues(t),"Distance"!==e.type&&"Perimeter"!==e.type&&"Area"!==e.type&&"Volume"!==e.type||(e.note=t.notes)}if("Rectangle"!==e.type&&"Circle"!==e.type&&"Radius"!==e.type&&"Ink"!==e.type||!this.boundsChanged||(this.pdfViewer.drawing.select([e.uniqueKey],this.pdfViewer.annotationSelectorSettings),this.modifyInCollections(t,"bounds"),this.boundsChanged=!1),"Line"===e.type||"Arrow"===e.type||"Distance"===e.type||"Perimeter"===e.type){var f=!1,m=!1,g=!1;d.lineHeadStart=t.sourceDecoraterShapes,d.lineHeadEnd=t.taregetDecoraterShapes,h.lineHeadStart=this.pdfViewer.annotation.getArrowType(e.lineHeadStartStyle),h.lineHeadEnd=this.pdfViewer.annotation.getArrowType(e.lineHeadEndStyle),h.borderDashArray=e.borderDashArray,t.taregetDecoraterShapes!==h.lineHeadEnd&&(m=!0),t.sourceDecoraterShapes!==h.lineHeadStart&&(f=!0),t.borderDashArray!==e.borderDashArray&&(g=!0),(f||m||g)&&(this.pdfViewer.nodePropertyChange(t,{sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(e.lineHeadStartStyle),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(e.lineHeadEndStyle),borderDashArray:e.borderDashArray}),f&&this.modifyInCollections(t,"startArrow"),m&&this.modifyInCollections(t,"endArrow"),this.triggerAnnotationPropChange(t,!1,!1,!1,!1,f,m,g),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Line properties change","",d,h))}"Shape"!==e.type&&"Line"!==e.type&&"Arrow"!==e.type&&"Rectangle"!==e.type&&"Circle"!==e.type&&"Polygon"!==e.type||(n="shape"),"Ink"!==e.type&&"Ink"!==e.shapeAnnotationType||(n="ink"),"Measure"!==e.type&&"Distance calculation"!==e.subject&&"Perimeter calculation"!==e.subject&&"Radius calculation"!==e.subject&&"Area calculation"!==e.subject&&"Volume calculation"!==e.subject||(n="shape_measure")}else if("Redaction"===e.type||"Redaction"===e.shapeAnnotationType)n="redaction",this.calculateAnnotationBounds(t,e),this.boundsChanged&&(this.pdfViewer.drawing.select([e.uniqueKey],this.pdfViewer.annotationSelectorSettings),this.modifyInCollections(t,"bounds"),this.boundsChanged=!1),e.fillColor&&t.fillColor!==e.fillColor&&(h.fillColor=e.fillColor,t.fillColor=e.fillColor,this.modifyInCollections(t,"fillColor"),this.triggerAnnotationPropChange(t,!0,!1,!1,!1)),e.annotationProperties||(e.annotationProperties={}),sf.base.isNullOrUndefined(e.annotationProperties.overlayText)||(e.overlayText=e.annotationProperties.overlayText),sf.base.isNullOrUndefined(e.annotationProperties.isRepeat)||(e.isRepeat=e.annotationProperties.isRepeat),e.annotationProperties.markerBorderColor&&(e.markerBorderColor=e.annotationProperties.markerBorderColor),e.annotationProperties.markerFillColor&&(e.markerFillColor=e.annotationProperties.markerFillColor),e.annotationProperties.markerOpacity&&(e.markerOpacity=e.annotationProperties.markerOpacity),e.markerFillColor&&t.markerFillColor!==e.markerFillColor&&(h.markerFillColor=e.markerFillColor,this.pdfViewer.nodePropertyChange(t,{markerFillColor:e.markerFillColor}),this.modifyInCollections(t,"fill"),this.triggerAnnotationPropChange(t,!0,!1,!1,!1)),e.markerBorderColor&&t.markerBorderColor!==e.markerBorderColor&&(h.markerBorderColor=e.markerBorderColor,this.pdfViewer.nodePropertyChange(t,{markerBorderColor:e.markerBorderColor}),this.modifyInCollections(t,"stroke"),this.triggerAnnotationPropChange(t,!1,!0,!1,!1)),sf.base.isNullOrUndefined(e.markerOpacity)||t.markerOpacity===e.markerOpacity||(h.markerOpacity=e.markerOpacity,this.pdfViewer.nodePropertyChange(t,{markerOpacity:e.markerOpacity}),this.modifyInCollections(t,"opacity"),this.triggerAnnotationPropChange(t,!1,!0,!1,!1)),sf.base.isNullOrUndefined(e.overlayText)||t.overlayText===e.overlayText||(h.overlayText=e.overlayText,this.pdfViewer.nodePropertyChange(t,{overlayText:e.overlayText}),this.modifyInCollections(t,"overlayText"),this.triggerAnnotationPropChange(t,!1,!0,!1,!1)),e.fontColor&&t.fontColor!==e.fontColor&&(t.fontColor=e.fontColor,this.pdfViewer.nodePropertyChange(t,{fontColor:e.fontColor}),this.modifyInCollections(t,"fontColor")),sf.base.isNullOrUndefined(e.fontSize)||t.fontSize===e.fontSize||(t.fontSize=e.fontSize,this.pdfViewer.nodePropertyChange(t,{fontSize:e.fontSize}),this.modifyInCollections(t,"fontSize")),e.fontFamily&&t.fontFamily!==e.fontFamily&&(t.fontFamily=e.fontFamily,this.pdfViewer.nodePropertyChange(t,{fontFamily:e.fontFamily}),this.modifyInCollections(t,"fontFamily")),e.textAlign&&t.textAlign!==e.textAlign&&(t.textAlign=e.textAlign,this.pdfViewer.nodePropertyChange(t,{textAlign:e.textAlign}),this.modifyInCollections(t,"textAlign")),sf.base.isNullOrUndefined(e.isRepeat)||t.isRepeat===e.isRepeat||(t.isRepeat=e.isRepeat,this.modifyInCollections(t,"isRepeat")),sf.base.isNullOrUndefined(e.useOverlayText)||t.useOverlayText===e.useOverlayText||(t.useOverlayText=e.useOverlayText,this.modifyInCollections(t,"useOverlayText")),t.isPrint!==e.isPrint&&(t.isPrint=e.isPrint,this.modifyInCollections(t,"isPrint")),t.isLock!==e.isLock&&(t.isLock=e.isLock,t.annotationSettings.isLock=e.isLock,this.modifyInCollections(t,"isLock"));else if("FreeText"===e.type||"FreeText"===e.shapeAnnotationType){n="freetext";var w=this.pdfViewer.freeTextSettings.fontColor?this.pdfViewer.freeTextSettings.fontColor:"#000",y=this.pdfViewer.freeTextSettings.fillColor?this.pdfViewer.freeTextSettings.fillColor:"#ffffff00",v=this.pdfViewer.freeTextSettings.borderColor?this.pdfViewer.freeTextSettings.borderColor:"#ffffff00";if(this.pdfViewer.freeTextSettings.enableAutoFit&&t.dynamicText!==e.content){var b=this.pdfViewerBase.getElement("_annotationCanvas_"+t.pageIndex).getContext("2d"),S=e.fontSize,A=void 0,x=e.fontFamily,V=this.pdfViewerBase.getZoomFactor();A=e.font.isBold?"bold "+S+"px "+x:S+"px "+x,b.font=A;var C="",I=[],k=e.content?e.content:e.dynamicText;if(k.indexOf("\n")>-1){I=k.split("\n");for(var M=0;M<I.length;M++){var T=b.measureText(I[M]),E=b.measureText(C);T.width>E.width&&(C=I[M])}}else C=k;var B=b.measureText(C);e.bounds.width=Math.ceil(B.width+18);var P=this.pdfViewerBase.getElement("_pageDiv_"+e.pageIndex).clientWidth-e.bounds.left*V;e.bounds.width>P&&(e.bounds.width=P/V);var D=e.bounds.height;e.bounds.height=D>=t.bounds.height?D:t.bounds.height}e.content=e.content?e.content:e.dynamicText,e.fillColor=e.fillColor?e.fillColor:y,e.fontColor=e.fontColor?e.fontColor:w,e.borderColor=e.borderColor?e.borderColor:v,e.strokeColor=e.borderColor,e.thickness=e.borderWidth,sf.base.isNullOrUndefined(e.note)&&(e.note=e.content),this.calculateAnnotationBounds(t,e),this.boundsChanged&&(this.pdfViewer.drawing.select([e.uniqueKey],this.pdfViewer.annotationSelectorSettings),this.modifyInCollections(t,"bounds"),this.boundsChanged=!1);var N=e.fontStyle;e.font={isBold:!sf.base.isNullOrUndefined(N)&&!!N.includes("Bold"),isItalic:!sf.base.isNullOrUndefined(N)&&!!N.includes("Italic"),isStrikeout:!sf.base.isNullOrUndefined(N)&&!(!N.includes("Strikethrough")||N.includes("Underline")),isUnderline:!sf.base.isNullOrUndefined(N)&&!!N.includes("Underline")};var F=t.fontSize!==e.fontSize,L=t.fontSize>e.fontSize;if(this.pdfViewer.nodePropertyChange(t,{opacity:e.opacity,fontColor:e.fontColor,fontSize:e.fontSize,fontFamily:e.fontFamily,dynamicText:e.content?e.content:e.dynamicText,fillColor:e.fillColor,textAlign:e.textAlign,strokeColor:e.borderColor,thickness:e.borderWidth,font:e.font,isReadonly:e.isReadonly}),F){var O=this.freeTextAnnotationModule;this.changeFontSizeOfInput(t,e.fontSize,L,O),O.inputBoxElement.blur(),this.triggerAnnotationPropChange(t,!1,!1,!1,!0)}t.isPrint!==e.isPrint&&(t.isPrint=e.isPrint,this.modifyInCollections(t,"isPrint")),t.isLocked!==e.isLock&&(t.isLock=e.isLock,t.annotationSettings.isLock=e.isLock,this.modifyInCollections(t,"isLock")),e.opacity&&t.opacity!==e.opacity&&this.triggerAnnotationPropChange(t,!1,!1,!1,!0),e.fillColor&&t.fillColor!==e.fillColor&&this.triggerAnnotationPropChange(t,!0,!1,!1,!1),e.strokeColor&&t.strokeColor!==e.strokeColor&&this.triggerAnnotationPropChange(t,!1,!0,!1,!1),e.thickness&&t.thickness!==e.thickness&&this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateFreeText",e.Id,e.content,e.isLock).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}t.customData!==e.customData&&(t.customData=e.customData),e&&!0===e.isCommentLock&&(t.isCommentLock=e.isCommentLock),t.isPrint=e.isPrint;var R=!1;if(e){var z={};t.note!==e.note&&(t.note=e.note,z.note=e.note,R=!0),t.state!==e.state&&(t.state=e.state,z.state=e.state,R=!0),t.isLocked!==e.isLock&&(t.isLocked=e.isLock,z.isLock=e.isLock,R=!0),t.modifiedDate!==e.modifiedDate&&(t.modifiedDate=e.modifiedDate,z.modifiedDate=e.modifiedDate,this.isUndoRedoAction&&"redaction"===n||(R=!0)),t.author!==e.author&&(t.author=e.author,z.author=e.author,R=!0),t.stateModel!==e.stateModel&&(t.stateModel=e.stateModel,z.stateModel=e.stateModel,R=!0),sf.base.isNullOrUndefined(t.review)||sf.base.isNullOrUndefined(e.review)?t.review=e.review:(t.review.state!==e.review.state&&(t.review.state=e.review.state,z.state=e.review.state,R=!0),t.review.stateModel!==e.review.stateModel&&(t.review.stateModel=e.review.stateModel,z.stateModel=e.review.stateModel,R=!0));var H=0;if(!sf.base.isNullOrUndefined(t.comments)&&t.comments.length>0){for(var U=t.comments,j=function(i){var n=t.comments[i];!sf.base.isNullOrUndefined(e.comments)&&e.comments.length>0?-1===e.comments.findIndex((function(e){return e.annotName===n.annotName}))&&(sf.base.isNullOrUndefined(z.deleteComments)&&(z.deleteComments=[]),U=U.filter((function(e){return e.annotName!==n.annotName})),z.deleteComments[H]=n.annotName,H++):(sf.base.isNullOrUndefined(z.deleteComments)&&(z.deleteComments=[]),U=U.filter((function(e){return e.annotName!==n.annotName})),z.deleteComments[H]=n.annotName,H++)},_=0;_<t.comments.length;_++)j(_);t.comments=U}var W=function(i){var n=e.comments[i],o=t.comments.findIndex((function(e){return e.annotName===n.annotName})),s=!1;if(-1!==o){var a=t.comments[o];a.author!==n.author&&(a.author=n.author,s=!0),a.modifiedDate!==n.modifiedDate&&(a.modifiedDate=n.modifiedDate,s=!0),a.note!==n.note&&(a.note=n.note,s=!0),a.state!==n.state&&(a.state=n.state,s=!0),(sf.base.isNullOrUndefined(a.state)||""===a.state)&&(sf.base.isNullOrUndefined(n.review)||a.review.state===n.review.state||(a.state=n.review.state,s=!0)),sf.base.isNullOrUndefined(z.editComments)&&(z.editComments=[]);var r={shapeAnnotationType:"sticky",author:a.author,modifiedDate:a.modifiedDate,note:a.note,state:a.state,stateModel:a.stateModel,comments:[],review:{state:a.state,stateModel:a.stateModel,modifiedDate:a.modifiedDate,author:a.author},annotName:a.annotName,parentId:t.annotName,subject:"Comments",isLock:e.isLock};s&&(e.comments[o]=r,t.comments[o]=r,z.editComments[o]=r)}else{sf.base.isNullOrUndefined(n.annotName)&&(n.annotName=q.pdfViewer.annotation.createGUID()),sf.base.isNullOrUndefined(n.parentId)&&(n.parentId=t.annotName),sf.base.isNullOrUndefined(n.author)&&(n.author=t.author),sf.base.isNullOrUndefined(n.modifiedDate)&&(n.modifiedDate=q.stickyNotesAnnotationModule.getDateAndTime()),(sf.base.isNullOrUndefined(n.state)||""===n.state)&&(sf.base.isNullOrUndefined(n.review)||sf.base.isNullOrUndefined(n.review.state)||(n.state=n.review.state)),sf.base.isNullOrUndefined(z.comments)&&(z.comments=[]);r={shapeAnnotationType:"sticky",author:n.author,modifiedDate:n.modifiedDate,note:n.note,state:n.state,stateModel:n.stateModel,comments:[],review:{state:n.state,stateModel:n.stateModel,modifiedDate:n.modifiedDate,author:n.author},annotName:n.annotName,parentId:t.annotName,subject:"Comments",isLock:e.isLock};e.comments[i]=r,t.comments[i]=r,z.comments[i]=r,R=!0}},q=this;for(_=0;_<e.comments.length;_++)W(_);R&&(z.Id=t.annotName,this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateComments",z).catch((function(e){throw console.error("Unhandled Exception:",e),e})))}"Highlight"!==e.type&&"Underline"!==e.type&&"Strikethrough"!==e.type&&"Squiggly"!==e.type?(this.pdfViewer.renderDrawing(),this.updateCollection(i,o,e,n)):R&&this.updateCollection(i,o,e,n)}this.pdfViewerBase.isUpdateProgrammatically=!1}function Ud(e,t,i,n,o,s){var a;"textMarkup"===i.shapeAnnotationType?a={type:"TextMarkup",subType:i.subject,opacity:i.opacity,color:i.color,textMarkupContent:i.textMarkupContent,textMarkupStartIndex:i.textMarkupStartIndex,textMarkupEndIndex:i.textMarkupEndIndex,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"StickyNotes"===i.shapeAnnotationType?a={type:"StickyNotes",opacity:i.opacity,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType?a={type:"Stamp",opacity:i.opacity,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"Ink"===i.shapeAnnotationType?a={type:"Ink",opacity:i.opacity,strokeColor:i.strokeColor,thickness:i.thickness,width:i.bounds.width,height:i.bounds.height,left:i.bounds.x,top:i.bounds.y,data:i.data,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"HandWrittenSignature"===i.shapeAnnotationType?a={type:"HandWrittenSignature",opacity:i.opacity,strokeColor:i.strokeColor,thickness:i.thickness,width:i.bounds.width,height:i.bounds.height,left:i.bounds.x,top:i.bounds.y,data:i.data,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData}:"Redaction"===i.shapeAnnotationType?a={type:"Redaction",opacity:i.opacity,markerFillColor:i.markerFillColor||"rgba(255, 255, 255, 1)",markerBorderColor:i.markerBorderColor||"rgba(255, 0, 0, 1)",markerOpacity:i.markerOpacity||1,overlayText:i.overlayText||"",isRepeat:i.isRepeat||!1,fontColor:i.fontColor||"rgba(255, 0, 0, 1)",fillColor:i.fillColor||"rgba(0, 0, 0, 1)",fontSize:i.fontSize||12,fontFamily:i.fontFamily||"Helvetica",textAlign:i.textAlign||"center",width:i.bounds.width,height:i.bounds.height,left:i.bounds.x,top:i.bounds.y,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"FreeText"===i.shapeAnnotationType?a={type:"FreeText",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,content:i.dynamicText,fontFamily:i.fontFamily,fontSize:i.fontSize,fontColor:i.fontColor,textAlign:i.textAlign,fontStyle:this.updateFreeTextFontStyle(i.font),isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:""===i.measureType?"Line"===i.shapeAnnotationType?a={type:"Shape",subType:"Line",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:this.getArrowString(i.sourceDecoraterShapes),lineHeadEndStyle:this.getArrowString(i.taregetDecoraterShapes),isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"Arrow"===i.shapeAnnotationType||"LineWidthArrowHead"===i.shapeAnnotationType?a={type:"Shape",subType:"Arrow",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:this.getArrowString(i.sourceDecoraterShapes),lineHeadEndStyle:this.getArrowString(i.taregetDecoraterShapes),isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"Rectangle"===i.shapeAnnotationType?a={type:"Shape",subType:"Rectangle",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"Circle"===i.shapeAnnotationType||"Ellipse"===i.shapeAnnotationType?a={type:"Shape",subType:"Circle",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"Polygon"===i.shapeAnnotationType&&(a={type:"Shape",subType:"Polygon",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}):""!==i.measureType&&("Distance"===i.measureType?a={type:"Measure",subType:"Distance",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:this.getArrowString(i.sourceDecoraterShapes),lineHeadEndStyle:this.getArrowString(i.taregetDecoraterShapes),isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"Perimeter"===i.measureType?a={type:"Measure",subType:"Perimeter",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,borderDashArray:i.borderDashArray,lineHeadStartStyle:this.getArrowString(i.sourceDecoraterShapes),lineHeadEndStyle:this.getArrowString(i.taregetDecoraterShapes),isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"Area"===i.measureType?a={type:"Measure",subType:"Area",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"Radius"===i.measureType?a={type:"Measure",subType:"Radius",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}:"Volume"===i.measureType&&(a={type:"Measure",subType:"Volume",opacity:i.opacity,fillColor:i.fillColor,strokeColor:i.strokeColor,thickness:i.thickness,calibrate:i.calibrate,annotationId:i.annotName,isLock:i.isLocked,isPrint:i.isPrint,customData:i.customData,author:i.author,modifiedDate:i.modifiedDate}));var r=[],l=this.getOverlappedAnnotations(i,t);if(l&&this.overlappedCollections){for(var d=[],h=0;h<l.length;h++)if("textMarkup"!==l[h].shapeAnnotationType&&this.overlappedCollections||s){for(var p=0;p<this.overlappedCollections.length;p++)if(l[h].annotName===this.overlappedCollections[p].annotName){d.push(l[h]);break}}else d.push(l[h]);l=d}if(this.pdfViewer.enableMultiLineOverlap)for(h=0;h<l.length;h++)if("textMarkup"===l[h].shapeAnnotationType){var c=!1;for(p=0;p<l[h].bounds.length;p++){var f=this.orderTextMarkupBounds(l[h].bounds[p]),m=this.textMarkupAnnotationModule.annotationClickPosition;m&&(m.x||m.y)?f.left<=m.x&&f.left+f.width>=m.x&&f.top<=m.y&&f.top+f.height>=m.y&&(c=!0):c=!0}c||l.splice(h,1)}if(l&&l.length>0){n=l;for(h=0;h<n.length;h++){var g=u(n[h]);g.annotationId=n[h].annotName,e===n[h].annotName&&i.measureType&&"Volume"===i.measureType&&(g.calibrate=n[h].calibrate),delete g.annotName,r.push(g)}}else r=null;this.addFreeTextProperties(i,a);var w=i.annotationAddMode;if(o)"Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType?this.pdfViewerBase.isNewStamp||this.pdfViewer.fireAnnotationDoubleClick(e,t,a):sf.base.Browser.isDevice&&a&&"FreeText"!==a.type?this.pdfViewer.fireAnnotationDoubleClick(e,t,a):sf.base.Browser.isDevice&&a&&"FreeText"===a.type?this.pdfViewer.toolbarModule.annotationToolbarModule.adjustMobileToolbar(!0):this.pdfViewer.fireAnnotationDoubleClick(e,t,a);else if("Stamp"===i.shapeAnnotationType||"Image"===i.shapeAnnotationType)!this.pdfViewerBase.isNewStamp&&this.annotationSelected&&(r?this.pdfViewer.fireAnnotationSelect(e,t,a,r,null,null,w):this.pdfViewer.fireAnnotationSelect(e,t,a,null,null,null,w));else{var y=void 0;this.textMarkupAnnotationModule&&0===(y=this.textMarkupAnnotationModule.multiPageCollectionList(i)).length&&(y=null),this.annotationSelected&&(r?(s=!1,this.pdfViewer.fireAnnotationSelect(e,t,a,r,y,s,w)):(s=!0,this.pdfViewer.fireAnnotationSelect(e,t,a,null,y,s,w)))}this.annotationSelected=!0}function jd(){var e=!1,t=this.pdfViewer.selectedItems.annotations,i=this.pdfViewer.selectedItems.annotations[0];i&&i.annotationSettings&&(e=i.annotationSettings.isLock)&&this.checkAllowedInteractions("PropertyChange",i)&&(e=!1),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||!e&&t&&t.length>0&&t[0]&&("Stamp"===t[0].shapeAnnotationType||"Image"===t[0].shapeAnnotationType||"StickyNotes"===t[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableStampAnnotationPropertiesTools(!0):"Path"===t[0].shapeAnnotationType||"SignatureImage"===t[0].shapeAnnotationType||"SignatureText"===t[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1):"FreeText"===t[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!0):"Redaction"===t[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableRedactionAnnotationPropertiesTools(!0):"HandWrittenSignature"===t[0].shapeAnnotationType||"Ink"===t[0].shapeAnnotationType?this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(!0):1===t.length&&null===t[0].formFieldAnnotationType&&this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!0)),sf.base.Browser.isDevice&&!e&&t&&t.length>0&&t[0]&&"Redaction"===t[0].shapeAnnotationType&&this.pdfViewer.toolbar.annotationToolbarModule.enableRedactionAnnotationPropertiesTools(!0)}function _d(e){var t,i=e.target,n=i.parentElement;return i.classList.contains("e-pv-hyperlink")?i=n:n&&n.classList.contains("foreign-object")&&n.parentElement&&n.parentElement.parentElement&&n.parentElement.parentElement.parentElement?i=n.parentElement.parentElement.parentElement:i.classList.contains("e-pdfviewer-formFields")&&(i=n),i&&(t=i.id.split("_text_")[1]||i.id.split("_textLayer_")[1]||i.id.split("_annotationCanvas_")[1]||i.id.split("_pageDiv_")[1]),isNaN(parseInt(t,10))&&((i=(e=this.pdfViewerBase.annotationEvent&&this.pdfViewerBase.annotationEvent.target.id===i.id?this.pdfViewerBase.annotationEvent:e).target)&&i.id&&(t=i.id.split("_text_")[1]||i.id.split("_textLayer_")[1]||i.id.split("_annotationCanvas_")[1]||i.id.split("_pageDiv_")[1]),!sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(this.pdfViewerBase.annotationEvent)||sf.base.isNullOrUndefined(this.pdfViewerBase.annotationEvent.target)||(t=this.pdfViewerBase.annotationEvent.target.id.split("_textLayer_")[1])),parseInt(t,10)}function Wd(){if(0!==this.pdfViewer.selectedItems.annotations.length)this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(this.enableBasedOnType(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!0),sf.base.Browser.isDevice||this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems()),this.pdfViewerBase.disableTextSelectionMode();else{if(!this.pdfViewer.textSelectionModule||this.pdfViewerBase.isPanMode||this.pdfViewer.formDesignerInteraction||this.pdfViewer.textSelectionModule.enableTextSelectionMode(),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)){var e=this.pdfViewer.toolbar.annotationToolbarModule.inkAnnotationSelected;!this.pdfViewer.annotation.freeTextAnnotationModule||this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus||e||(this.pdfViewer.toolbar.annotationToolbarModule.enableAnnotationPropertiesTools(!1),this.pdfViewer.toolbar.annotationToolbarModule.enableFreeTextAnnotationPropertiesTools(!1)),this.pdfViewer.toolbar.annotationToolbarModule.updateAnnnotationPropertyItems(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!1)}var t=this.pdfViewer.element.getElementsByClassName("e-pv-redaction-toolbar"),i=0;(t=sf.base.isNullOrUndefined(t)?t:t[0])&&(i=t.getBoundingClientRect().height),sf.base.Browser.isDevice&&i>0&&this.pdfViewer._dotnetInstance.invokeMethodAsync("DisableDeleteButton").catch((function(e){throw console.error("Unhandled Exception:",e),e}))}}function qd(){1===this.pdfViewer.selectedItems.annotations.length&&null===this.pdfViewer.selectedItems.annotations[0].formFieldAnnotationType&&this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&(this.enableBasedOnType(),this.pdfViewer.toolbar.annotationToolbarModule.selectAnnotationDeleteItem(!0))}function Zd(e){var t=this.findCurrentAnnotation();t&&t.annotationSettings&&(t.annotationSettings.isLock?this.checkAllowedInteractions("Delete",t)?e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0):e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!1):e.enableItems([this.pdfViewer.localeObj.getConstant("Delete Context")],!0))}function Yd(){var e=this.findCurrentAnnotation();return!(!e||!e.annotationSettings)&&(!e.annotationSettings.isLock||!!this.checkAllowedInteractions("Delete",e))}function Xd(e){if(!sf.base.isNullOrUndefined(e)&&e.length>0)for(var t=0;t<e.length;t++)this.addAnnotation(e[t].type,e[t])}function Gd(e){if(e)for(var t=0;t<e.length;t++)this.deleteAnnotationById(e[t],!0)}function Jd(e,t){var i=this.pdfViewer.selectedItems.annotations[0],n=u(i),o=u(i),s=1;s=t?e:e.value/100,i.opacity!==s&&(o.opacity=s,this.pdfViewer.nodePropertyChange(i,{opacity:s}),"StickyNotes"===i.shapeAnnotationType?this.stickyNotesAnnotationModule.updateOpacityValue(i):this.modifyInCollections(i,"opacity"),"HandWrittenSignature"===i.shapeAnnotationType||"SignatureImage"===i.shapeAnnotationType||"SignatureText"===i.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(i.pageIndex,i.signatureName,i.shapeAnnotationType,!1,!0,!1,n.opacity,o.opacity):this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"Shape Opacity","",n,o),this.pdfViewer.renderDrawing())}function Kd(e){var t=this.pdfViewer.selectedItems.annotations[0],i=u(t),n=u(t);n.fontColor=e,this.pdfViewer.nodePropertyChange(t,{fontColor:e}),this.modifyInCollections(t,"fontColor"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontColor","",i,n),this.pdfViewer.renderDrawing()}function Qd(e){var t=this.pdfViewer.selectedItems.annotations[0],i=u(t),n=u(t);n.fontFamily=e,this.pdfViewer.freeTextSettings.enableAutoFit?this.updateFontFamilyRenderSize(t,e):this.pdfViewer.nodePropertyChange(t,{fontFamily:e}),this.modifyInCollections(t,"fontFamily"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontFamily","",i,n),this.pdfViewer.renderDrawing()}function $d(e){var t=this.pdfViewer.selectedItems.annotations[0],i=u(t),n=u(t);n.fontSize=e;var o=this.freeTextAnnotationModule;if(t.fontSize=e,o&&!o.isNewFreeTextAnnot&&""!==t.dynamicText){if(t){var s=t.previousFontSize>e;this.changeFontSizeOfInput(t,e,s,o),this.pdfViewer.renderSelector(t.pageIndex,this.pdfViewer.annotationSelectorSettings),t.previousFontSize=e}this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"fontSize","",i,n),this.pdfViewer.renderDrawing()}}function eh(e,t,i,n){var o=e.bounds.x,s=e.bounds.y;if(n.addInuptElemet({x:o,y:s},e),e){i&&(n.inputBoxElement.style.height="auto",n.inputBoxElement.style.height=n.inputBoxElement.scrollHeight+5+"px");var a=parseFloat(n.inputBoxElement.style.height),r=parseFloat(n.inputBoxElement.style.width),l=this.pdfViewerBase.getZoomFactor();r/=l;var d=(a/=l)-e.bounds.height,h=void 0;d>0?h=(h=e.wrapper.offsetY+d/2)>0?h:void 0:(d=Math.abs(d),h=(h=e.wrapper.offsetY-d/2)>0?h:void 0);var p=r-e.bounds.width,c=void 0;p>0?c=(c=e.wrapper.offsetX+p/2)>0?c:void 0:(p=Math.abs(p),c=e.wrapper.offsetX-p/2),e.bounds.width=r,e.bounds.height=a,this.pdfViewer.nodePropertyChange(e,{fontSize:t,bounds:{width:e.bounds.width,height:e.bounds.height,y:h,x:c}}),this.modifyInCollections(e,"fontSize"),this.modifyInCollections(e,"bounds")}}function th(e){var t=this.pdfViewer.selectedItems.annotations[0],i=u(t),n=u(t);n.textAlign=e,this.pdfViewer.nodePropertyChange(t,{textAlign:e}),this.modifyInCollections(t,"textAlign"),this.triggerAnnotationPropChange(t,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"textAlign","",i,n),this.pdfViewer.renderDrawing()}function ih(e,t){var i=this.pdfViewer.selectedItems.annotations[0],n=u(i),o=u(i);"bold"===t?o.font.isBold=e.isBold:"italic"===t?o.font.isItalic=e.isItalic:"underline"===t?(o.font.isUnderline=e.isUnderline,o.font.isUnderline&&o.font.isStrikeout&&(o.font.isStrikeout=!1)):"strikeout"===t&&(o.font.isStrikeout=e.isStrikeout,o.font.isUnderline&&o.font.isStrikeout&&(o.font.isUnderline=!1)),this.pdfViewer.nodePropertyChange(i,{font:e}),this.modifyInCollections(i,"textPropertiesChange"),this.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"textPropertiesChange","",n,o),this.pdfViewer.renderDrawing()}function nh(e){var t=this.pdfViewer.selectedItems.annotations[0];if(t.thickness!==e){var i=u(t),n=u(t);n.thickness=e,this.pdfViewer.nodePropertyChange(t,{thickness:e}),this.modifyInCollections(t,"thickness"),"HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!1,!1,!0,i.thickness,n.thickness):this.triggerAnnotationPropChange(t,!1,!1,!0,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Thickness","",i,n),this.pdfViewer.renderDrawing()}}function oh(e){var t=this.pdfViewer.selectedItems.annotations[0],i=u(t),n=u(t);n.strokeColor=e,this.pdfViewer.nodePropertyChange(t,{strokeColor:e}),this.modifyInCollections(t,"stroke"),"HandWrittenSignature"===t.shapeAnnotationType||"SignatureText"===t.shapeAnnotationType||"SignatureImage"===t.shapeAnnotationType?this.pdfViewer.fireSignaturePropertiesChange(t.pageIndex,t.signatureName,t.shapeAnnotationType,!0,!1,!1,i.strokeColor,n.strokeColor):this.triggerAnnotationPropChange(t,!1,!0,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Stroke","",i,n),this.pdfViewer.renderDrawing()}function sh(e){var t=this.pdfViewer.selectedItems.annotations[0],i=u(t),n=u(t);n.fillColor=e,this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{fillColor:e}),this.modifyInCollections(t,"fill"),this.triggerAnnotationPropChange(t,!0,!1,!1,!1),this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Shape Fill","",i,n),this.pdfViewer.renderDrawing()}function ah(e,t){var i=null;if(i=this.pdfViewer.selectedItems.annotations.filter((function(e){return e.annotName===t}))[0]){var n=u(i),o=u(i);i.dynamicText=e,o.dynamicText=e,""===n.dynamicText&&(n.dynamicText=this.freeTextAnnotationModule.previousText),this.pdfViewer.nodePropertyChange(this.pdfViewer.selectedItems.annotations[0],{dynamicText:e}),n.dynamicText!==o.dynamicText&&(this.pdfViewer.annotation.addAction(i.pageIndex,null,i,"dynamicText Change","",n,o),this.modifyInCollections(i,"dynamicText")),this.pdfViewer.renderDrawing()}}function rh(e,t,i){if(t&&!0===t.isCommentLock&&(e.isCommentLock=t.isCommentLock),t.comments)for(var n=0;n<t.comments.length;n++)!0===t.comments[n].isLock&&(e.comments[n].isLock=t.comments[n].isLock);if(e.comments=t.comments,t&&""!==t.note&&void 0!==t.note&&(e.note=t.note),sf.base.isNullOrUndefined(t.review)||(e.review.state!==t.review.state&&(e.review.state=t.review.state),e.review.stateModel!==t.review.stateModel&&(e.review.stateModel=t.review.stateModel)),e.modifiedDate!==t.modifiedDate&&(e.modifiedDate=t.modifiedDate),"textMarkup"===i)e.opacity=t.opacity,e.color=t.color,e.allowedInteractions=t.allowedInteractions;else if("sticky"===i||"stamp"===i)t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,t.stampAnnotationPath&&(e.stampAnnotationPath=t.stampAnnotationPath);else if("ink"===i)t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions;else if("shape"===i||"shape_measure"===i){if("Line"===t.type||"Arrow"===t.type||"Distance"===t.type||"Perimeter"===t.type?(t.bounds&&(e.bounds=t.bounds),t.vertexPoint&&(e.vertexPoints=t.vertexPoints),e.opacity=t.opacity,e.fillColor=t.fillColor,e.strokeColor=t.strokeColor,e.thickness=t.thickness,e.borderDashArray=t.borderDashArray,e.lineHeadStart=this.getArrowTypeForCollection(t.lineHeadStartStyle),e.lineHeadEnd=this.getArrowTypeForCollection(t.lineHeadEndStyle),e.leaderLength=t.leaderLength,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions):(t.bounds&&(e.bounds=t.bounds),t.vertexPoint&&(e.vertexPoints=t.vertexPoints),e.opacity=t.opacity,t.strokeColor&&(e.strokeColor=t.strokeColor),t.fillColor&&(e.fillColor=t.fillColor),e.thickness=t.thickness,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,t.calibrate&&e.annotName===t.annotationId&&e.calibrate.depth!==t.calibrate.depth&&(e.calibrate.depth=t.calibrate.depth,this.pdfViewer.annotationModule.measureAnnotationModule.volumeDepth=t.calibrate.depth,e.note=this.pdfViewer.annotationModule.measureAnnotationModule.calculateVolume(e.vertexPoints))),this.pdfViewer.enableShapeLabel&&t.labelSettings){var o=t.labelSettings.labelContent;e.note=o,e.fontSize=t.labelSettings.fontSize,e.labelFillColor=t.labelSettings.fillColor,e.labelContent&&(e.labelContent=o),e.labelSettings&&(e.labelSettings=t.labelSettings)}}else"redaction"===i?(t.bounds&&(e.bounds=t.bounds,sf.base.isNullOrUndefined(e.bounds.left)&&(e.bounds.left=t.bounds.x),sf.base.isNullOrUndefined(e.bounds.top)&&(e.bounds.top=t.bounds.y)),e.opacity=t.opacity,e.markerFillColor=t.markerFillColor,e.markerBorderColor=t.markerBorderColor,e.markerOpacity=t.markerOpacity,e.overlayText=t.overlayText,e.fontColor=t.fontColor,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.textAlign=t.textAlign,e.isRepeat=t.isRepeat,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions):"freetext"===i&&(t.bounds&&(e.bounds=t.bounds),e.opacity=t.opacity,e.strokeColor=t.strokeColor,e.thickness=t.thickness,t.content&&(e.dynamicText=t.content),e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontColor=t.fontColor,e.fillColor=t.fillColor,e.font=t.font?t.font:t.fontStyle,e.textAlign=t.textAlign,e.annotationSettings=t.annotationSettings,e.allowedInteractions=t.allowedInteractions,e.isReadonly=t.isReadonly);return e.author!==t.author&&(e.review.author=t.author,e.author=t.author),e.customData=t.customData,this.pdfViewerBase.isUpdateProgrammatically||(e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()),e.isPrint=t.isPrint,e.isLocked=t.isLock,e}function lh(e,t){var i=this.updateAnnotationAllowedInteractions(e);if(i&&i.length>0)for(var n=0;n<i.length;n++)if("Select"===t){if("Move"===i[n]||"Resize"===i[n]||"Delete"===i[n]||"PropertyChange"===i[n]||"Select"===i[n])return!0}else if(i[n]===t)return!0;return!1}function dh(e){var t=["None"];return e&&("FreeText"===e.shapeAnnotationType&&this.pdfViewer.freeTextSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.freeTextSettings.allowedInteractions,e.allowedInteractions):"Ink"===e.shapeAnnotationType&&this.pdfViewer.inkAnnotationSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.inkAnnotationSettings.allowedInteractions,e.allowedInteractions):"StickyNotes"!==e.shapeAnnotationType&&"sticky"!==e.shapeAnnotationType||!this.pdfViewer.stickyNotesSettings?e.shapeAnnotationType&&"stamp"===e.shapeAnnotationType.toLowerCase()&&this.pdfViewer.stampSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.stampSettings.allowedInteractions,e.allowedInteractions):"Image"===e.shapeAnnotationType&&this.pdfViewer.customStampSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.customStampSettings.allowedInteractions,e.allowedInteractions):"Redaction"===e.shapeAnnotationType&&this.pdfViewer.redactionSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.redactionSettings.allowedInteractions,e.allowedInteractions):"textMarkup"===e.shapeAnnotationType?"Highlight"===e.textMarkupAnnotationType&&this.pdfViewer.highlightSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.highlightSettings.allowedInteractions,e.allowedInteractions):"Underline"===e.textMarkupAnnotationType&&this.pdfViewer.underlineSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.underlineSettings.allowedInteractions,e.allowedInteractions):"Strikethrough"===e.textMarkupAnnotationType&&this.pdfViewer.strikethroughSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.strikethroughSettings.allowedInteractions,e.allowedInteractions):"Squiggly"===e.textMarkupAnnotationType&&this.pdfViewer.squigglySettings&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.squigglySettings.allowedInteractions,e.allowedInteractions)):"HandWrittenSignature"===e.shapeAnnotationType&&this.pdfViewer.handWrittenSignatureSettings&&this.pdfViewer.handWrittenSignatureSettings.allowedInteractions?t=this.checkAllowedInteractionSettings(this.pdfViewer.handWrittenSignatureSettings.allowedInteractions,e.allowedInteractions):""!==e.measureType?"Distance"===e.measureType&&this.pdfViewer.distanceSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.distanceSettings.allowedInteractions,e.allowedInteractions):"Perimeter"===e.measureType&&this.pdfViewer.perimeterSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.perimeterSettings.allowedInteractions,e.allowedInteractions):"Radius"===e.measureType&&this.pdfViewer.radiusSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.radiusSettings.allowedInteractions,e.allowedInteractions):"Area"===e.measureType&&this.pdfViewer.areaSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.areaSettings.allowedInteractions,e.allowedInteractions):"Volume"===e.measureType&&this.pdfViewer.volumeSettings&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.volumeSettings.allowedInteractions,e.allowedInteractions)):"Line"===e.shapeAnnotationType&&this.pdfViewer.lineSettings?t=this.checkAllowedInteractionSettings(this.pdfViewer.lineSettings.allowedInteractions,e.allowedInteractions):"Arrow"!==e.shapeAnnotationType&&"LineWidthArrowHead"!==e.shapeAnnotationType||!this.pdfViewer.arrowSettings?"Circle"!==e.shapeAnnotationType&&"Ellipse"!==e.shapeAnnotationType&&"Oval"!==e.shapeAnnotationType||!this.pdfViewer.circleSettings?"Rectangle"!==e.shapeAnnotationType&&"Square"!==e.shapeAnnotationType||!this.pdfViewer.rectangleSettings?"Polygon"===e.shapeAnnotationType&&this.pdfViewer.polygonSettings&&(t=this.checkAllowedInteractionSettings(this.pdfViewer.polygonSettings.allowedInteractions,e.allowedInteractions)):t=this.checkAllowedInteractionSettings(this.pdfViewer.rectangleSettings.allowedInteractions,e.allowedInteractions):t=this.checkAllowedInteractionSettings(this.pdfViewer.circleSettings.allowedInteractions,e.allowedInteractions):t=this.checkAllowedInteractionSettings(this.pdfViewer.arrowSettings.allowedInteractions,e.allowedInteractions):t=this.checkAllowedInteractionSettings(this.pdfViewer.stickyNotesSettings.allowedInteractions,e.allowedInteractions)),t}function hh(e){this.modifyInCollections(e,"fill"),this.modifyInCollections(e,"stroke"),this.modifyInCollections(e,"opacity"),this.modifyInCollections(e,"thickness"),this.modifyInCollections(e,"dashArray"),this.modifyInCollections(e,"startArrow"),this.modifyInCollections(e,"endArrow")}function ph(e){var t=document.querySelector("#"+this.pdfViewer.dataId+"_properties_fill_color_button");"transparent"!==e&&(t.children[0].style.borderBottomColor=e)}function ch(e,t){var i;return""===e.measureType||sf.base.isNullOrUndefined(e.measureType)?i="FreeText"===e.shapeAnnotationType?this.freeTextAnnotationModule.modifyInCollection(t,e.pageIndex,e):"HandWrittenSignature"===e.shapeAnnotationType||"SignatureText"===e.shapeAnnotationType||"SignatureImage"===e.shapeAnnotationType?this.pdfViewerBase.signatureModule.modifySignatureCollection(t,e.pageIndex,e):"Stamp"===e.shapeAnnotationType||"Image"===e.shapeAnnotationType?this.stampAnnotationModule.modifyInCollection(t,e.pageIndex,e):"Ink"===e.shapeAnnotationType?this.inkAnnotationModule.modifySignatureInkCollection(t,e.pageIndex,e):"Redaction"===e.shapeAnnotationType?this.redactionAnnotationModule.modifyInCollection(t,e.pageIndex,e):"StickyNotes"===e.shapeAnnotationType?this.stickyNotesAnnotationModule.modifyInCollection(t,e.pageIndex,e):this.shapeAnnotationModule.modifyInCollection(t,e.pageIndex,e):"Distance"!==e.measureType&&"Perimeter"!==e.measureType&&"Radius"!==e.measureType&&"Area"!==e.measureType&&"Volume"!==e.measureType||(i=this.measureAnnotationModule.modifyInCollection(t,e.pageIndex,e)),this.isUndoRedoAction?(this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e,null,!0),this.isUndoAction&&(e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())):"bounds"!==t&&this.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e),i}function uh(e){var t=document.querySelector("#"+this.pdfViewer.dataId+"_properties_stroke_color_button");"transparent"!==e&&(t.children[0].style.borderBottomColor=e)}function fh(e,t){this.selectedLineDashArray=e,"0"===e?this.selectedLineStyle="Solid":"2"!==e&&"3"!==e||(this.selectedLineStyle="Dashed")}function mh(e,t,i,n,o){var s=this.pdfViewerBase.getElement("_annotationCanvas_"+n);if(s)return this.updateCanvas(s,t,i,n),s;var a=sf.base.createElement("canvas",{id:this.pdfViewer.dataId+"_annotationCanvas_"+n,className:"e-pv-annotation-canvas"});return this.updateCanvas(a,t,i,n),e.appendChild(a),a}function gh(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e),i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getZoomRatio(i);if(t){var o=this.pdfViewerBase.pageSize[e].width,s=this.pdfViewerBase.pageSize[e].height;t.width=o*n,t.height=s*n,t.style.width=o*i+"px",t.style.height=s*i+"px"}}function wh(e,t,i,n){var o=this.pdfViewerBase.getZoomRatio();e.width=t*o,e.height=i*o,e.style.width=t+"px",e.style.height=i+"px",e.style.position="absolute",e.style.zIndex="1",this.pdfViewerBase.applyElementStyles(e,n)}function yh(){this.shapeAnnotationModule&&(this.shapeAnnotationModule.shapeCount=0),this.measureAnnotationModule&&(this.measureAnnotationModule.measureShapeCount=0),this.textMarkupAnnotationModule&&this.textMarkupAnnotationModule.clear(),this.stickyNotesAnnotationModule&&this.stickyNotesAnnotationModule.clear(),this.pdfViewer.refresh(),this.undoCommentsElement=[],this.redoCommentsElement=[],this.overlappedAnnotations=[],this.previousIndex=null,this.isShapeCopied=!1,this.pdfViewer.annotation&&this.pdfViewer.annotation.stampAnnotationModule&&(this.pdfViewer.annotation.stampAnnotationModule.renderedStampCollection=[]),this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.freeTextPageNumbers=[],this.freeTextAnnotationModule.previousText="Type Here"),this.pdfViewer.annotation&&this.pdfViewer.annotation.inkAnnotationModule&&(this.pdfViewer.annotation.inkAnnotationModule.inkAnnotationindex=[]),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape_measure"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp"),window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky")}function vh(e,t,i){var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i);n&&(n.style.width=e+"px",n.style.height=t+"px",this.pdfViewerBase.applyElementStyles(n,i))}function bh(e,t){if(t){if(1!==t.length)return t;if("None"!==t[0])return t}if(e){if(1!==e.length)return e;if("None"!==e[0])return e}return this.pdfViewer.annotationSettings.allowedInteractions?this.pdfViewer.annotationSettings.allowedInteractions:["None"]}function Sh(e,t){var i=this.pdfViewer.annotationSettings;if(e){var n=e.shapeAnnotationType;"StickyNotes"===n&&this.pdfViewer.stickyNotesSettings?i=this.pdfViewer.stickyNotesSettings:"Stamp"===n||"Image"===n?(i=this.pdfViewer.stampSettings,"image"!==n&&"Image"!==n||(i=this.pdfViewer.customStampSettings)):"FreeText"===n?i=this.pdfViewer.freeTextSettings:"HandWrittenSignature"===n?i=this.pdfViewer.handWrittenSignatureSettings:""===e.measureType?"Line"===n?i=this.pdfViewer.lineSettings:"Arrow"===n||"LineWidthArrowHead"===n?i=this.pdfViewer.arrowSettings:"Rectangle"===n?i=this.pdfViewer.rectangleSettings:"Circle"===n||"Ellipse"===n?i=this.pdfViewer.circleSettings:"Polygon"===n&&this.pdfViewer.polygonSettings&&(i=this.pdfViewer.polygonSettings):""!==e.measureType&&("Distance"===e.measureType?i=this.pdfViewer.distanceSettings:"Perimeter"===e.measureType?i=this.pdfViewer.perimeterSettings:"Area"===e.measureType?i=this.pdfViewer.areaSettings:"Radius"===e.measureType?i=this.pdfViewer.radiusSettings:"Volume"===e.measureType&&(i=this.pdfViewer.volumeSettings))}var o=e?e.annotationSettings:{};return o&&(o.minWidth||o.maxWidth||o.minHeight||o.maxHeight)?this.updateSettings(o):t?this.updateSettings(i):i}function Ah(e){var t=this.pdfViewer.annotationSettings;return"sticky"===e.AnnotType?t=this.pdfViewer.stickyNotesSettings:"stamp"===e.AnnotType||"image"===e.AnnotType||"Image"===e.AnnotType?(t=this.pdfViewer.stampSettings,"image"!==e.Subject&&"Image"!==e.Subject||(t=this.pdfViewer.customStampSettings)):"freeText"===e.AnnotType?t=this.pdfViewer.freeTextSettings:"ink"===e.AnnotType?t=this.pdfViewer.inkAnnotationSettings:"shape"===e.AnnotType?"Line"===e.Subject?t=this.pdfViewer.lineSettings:"Arrow"===e.Subject||"LineWidthArrowHead"===e.Subject?t=this.pdfViewer.arrowSettings:"Rectangle"===e.Subject||"Square"===e.Subject?t=this.pdfViewer.rectangleSettings:"Circle"===e.Subject||"Ellipse"===e.Subject||"Oval"===e.Subject?t=this.pdfViewer.circleSettings:"Polygon"===e.Subject&&(t=this.pdfViewer.polygonSettings):"shape_measure"===e.AnnotType&&("Distance"===e.Subject||"Distance calculation"===e.Subject?t=this.pdfViewer.distanceSettings:"Perimeter"===e.Subject||"Perimeter calculation"===e.Subject?t=this.pdfViewer.perimeterSettings:"Area"===e.Subject||"Area calculation"===e.Subject?t=this.pdfViewer.areaSettings:"Radius"===e.Subject||"Radius calculation"===e.Subject?t=this.pdfViewer.radiusSettings:"Volume"!==e.Subject&&"Volume calculation"!==e.Subject||(t=this.pdfViewer.volumeSettings)),this.updateSettings(t)}function xh(e){var t=!1;return e&&("FreeText"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.freeTextSettings.isLock):"Ink"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.inkAnnotationSettings.isLock):"StickyNotes"===e.shapeAnnotationType||"sticky"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.stickyNotesSettings.isLock):e.shapeAnnotationType&&"stamp"===e.shapeAnnotationType.toLowerCase()?t=this.checkLockSettings(this.pdfViewer.stampSettings.isLock):"Image"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.customStampSettings.isLock):"textMarkup"===e.shapeAnnotationType?"Highlight"===e.textMarkupAnnotationType?t=this.checkLockSettings(this.pdfViewer.highlightSettings.isLock):"Underline"===e.textMarkupAnnotationType?t=this.checkLockSettings(this.pdfViewer.underlineSettings.isLock):"Strikethrough"===e.textMarkupAnnotationType?t=this.checkLockSettings(this.pdfViewer.strikethroughSettings.isLock):"Squiggly"===e.textMarkupAnnotationType&&(t=this.checkLockSettings(this.pdfViewer.squigglySettings.isLock)):""!==e.measureType?"Distance"===e.measureType?t=this.checkLockSettings(this.pdfViewer.distanceSettings.isLock):"Perimeter"===e.measureType?t=this.checkLockSettings(this.pdfViewer.perimeterSettings.isLock):"Radius"===e.measureType?t=this.checkLockSettings(this.pdfViewer.radiusSettings.isLock):"Area"===e.measureType?t=this.checkLockSettings(this.pdfViewer.areaSettings.isLock):"Volume"===e.measureType&&(t=this.checkLockSettings(this.pdfViewer.volumeSettings.isLock)):"Line"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.lineSettings.isLock):"Arrow"===e.shapeAnnotationType||"LineWidthArrowHead"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.arrowSettings.isLock):"Circle"===e.shapeAnnotationType||"Ellipse"===e.shapeAnnotationType||"Oval"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.circleSettings.isLock):"Rectangle"===e.shapeAnnotationType||"Square"===e.shapeAnnotationType?t=this.checkLockSettings(this.pdfViewer.rectangleSettings.isLock):"Polygon"===e.shapeAnnotationType&&(t=this.checkLockSettings(this.pdfViewer.polygonSettings.isLock))),t}function Vh(e){var t=0,i=0,n=0,o=0,s=this.pdfViewer.annotationSettings;return e.minWidth||e.maxWidth||e.minHeight||e.maxHeight?(t=e.maxHeight?e.maxHeight:2e3,i=e.maxWidth?e.maxWidth:2e3,n=e.minHeight?e.minHeight:0,o=e.minWidth?e.minWidth:0):(s.minWidth||s.maxWidth||s.minHeight||s.maxHeight)&&(t=s.maxHeight?s.maxHeight:2e3,i=s.maxWidth?s.maxWidth:2e3,n=s.minHeight?s.minHeight:0,o=s.minWidth?s.minWidth:0),{minWidth:o,maxWidth:i,minHeight:n,maxHeight:t,isLock:e.isLock?e.isLock:!!s.isLock&&s.isLock,isPrint:e.isPrint}}function Ch(e){var t=!1;return(e||this.pdfViewer.annotationSettings.isLock)&&(t=!0),t}function Ih(e,t){var i=this.pdfViewerBase.convertBounds(e.wrapper.bounds),n=this.pdfViewerBase.convertBounds(t.bound);if(i&&n&&(JSON.stringify(i)!==JSON.stringify(n)&&Math.abs(i.Y-n.Y)>2||Math.abs(i.X-n.X)>2||Math.abs(i.Width-n.Width)>2||Math.abs(i.Height-n.Height)>2)){var o={x:n.X+n.Width/2,y:n.Y+n.Height/2,width:n.Width,height:n.Height};this.pdfViewer.nodePropertyChange(e,{bounds:o}),this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),this.triggerAnnotationPropChange(e,!1,!1,!1,!1),this.boundsChanged=!0}}function kh(e,t,i){var n=t;"Ink"===e.shapeAnnotationType&&(n={left:t.x,top:t.y,height:t.height,width:t.width});for(var o=parseInt(n.left,10),s=parseInt(n.top,10),a=parseInt(n.top+n.height,10),r=parseInt(n.left+n.width,10),l=0;l<i.length;l++)if(e.annotName===i[l].annotName)this.checkOverlappedCollections(i[l],this.overlappedAnnotations);else{var d=1;"textMarkup"===i[l].shapeAnnotationType&&(d=i[l].bounds.length);for(var h=0;h<d;h++){var p=void 0,c=i[l].bounds;if("Ink"===i[l].shapeAnnotationType&&(c={left:c.x,top:c.y,height:c.height,width:c.width}),p="textMarkup"!==i[l].shapeAnnotationType&&1===d?c:this.orderTextMarkupBounds(c[h])){var u=!1;(o<=parseInt(p.left,10)&&r>=parseInt(p.left,10)||o<=parseInt(p.left+p.width,10)&&r>=parseInt(p.left+p.width,10))&&(u=!0),u&&(u=s<=parseInt(p.top,10)&&a>=parseInt(p.top,10)||s<=parseInt(p.top+p.height,10)&&a>=parseInt(p.top+p.height,10)),u?this.checkOverlappedCollections(i[l],this.overlappedAnnotations):((parseInt(p.left,10)<=o&&parseInt(p.left+p.width,10)>=o||r>=parseInt(p.left,10)&&r<=parseInt(p.left+p.width,10))&&(u=!0),u&&(u=parseInt(p.top,10)<=s&&parseInt(p.top+p.height,10)>=s||a>=parseInt(p.top,10)&&a<=parseInt(p.top+p.height,10)),u?this.checkOverlappedCollections(i[l],this.overlappedAnnotations):((o<=parseInt(p.left,10)&&r>=parseInt(p.left,10)||o<=parseInt(p.left+p.width,10)&&r>=parseInt(p.left+p.width,10))&&(u=!0),u&&(u=parseInt(p.top,10)<=s&&parseInt(p.top+p.height,10)>=s||a>=parseInt(p.top,10)&&a<=parseInt(p.top+p.height,10)),u?this.checkOverlappedCollections(i[l],this.overlappedAnnotations):((parseInt(p.left,10)<=o&&parseInt(p.left+p.width,10)>=o||r>=parseInt(p.left,10)&&r<=parseInt(p.left+p.width,10))&&(u=!0),u&&(u=s<=parseInt(p.top,10)&&a>=parseInt(p.top,10)||s<=parseInt(p.top+p.height,10)&&a>=parseInt(p.top+p.height,10)),u&&this.checkOverlappedCollections(i[l],this.overlappedAnnotations))))}}}}function Mh(e,t){var i=e.bounds.top,n=e.bounds.left;if(-1!==["Line","LineWidthArrowHead","Volume","Area","Distance","Perimeter","Polygon"].indexOf(e.type)){var o=this.pdfViewer.nameTable[e.uniqueKey||e.id];o&&(i=o.wrapper.bounds.top,n=o.wrapper.bounds.left)}"Ink"===e.shapeAnnotationType&&(i=e.bounds.y,n=e.bounds.x);var s=n*this.pdfViewerBase.getZoomFactor();return{top:this.pdfViewerBase.pageSize[t].top*this.pdfViewerBase.getZoomFactor()+i*this.pdfViewerBase.getZoomFactor(),left:s}}function Th(e,t){var i=this.pdfViewerBase.pageSize[t];return i?1===i.rotation?{x:e.y,y:i.width-(e.x+e.width),width:e.height,height:e.width}:2===i.rotation?{x:i.width-e.x-e.width,y:i.height-e.y-e.height,width:e.width,height:e.height}:3===i.rotation?{x:i.height-e.y-e.height,y:e.x,width:e.height,height:e.width}:e:e}function Eh(e,t,i){var n=this.pdfViewerBase.pageSize[t];return n?1===n.rotation?i?{left:e.top,top:n.width-(e.left+e.width),width:i.height,height:i.width}:{left:e.top,top:n.width-(e.left+e.width),width:e.height,height:e.width}:2===n.rotation?i?{left:n.width-e.left-e.width,top:n.height-e.top-e.height,width:i.width,height:i.height}:{left:n.width-e.left-e.width,top:n.height-e.top-e.height,width:e.width,height:e.height}:3===n.rotation?i?{left:n.height-e.top-e.height,top:e.left,width:i.height,height:i.width}:{left:n.height-e.top-e.height,top:e.left,width:e.height,height:e.width}:i?{left:e.left,top:e.top,width:i.width,height:i.height}:e:e}function Bh(e,t){if(e){var i=this.pdfViewerBase.pageSize[t];if(1===i.rotation){for(var n=[],o=0;o<e.length;o++){var s={x:e[o].y,y:i.width-e[o].x};n.push(s)}return n}if(2===i.rotation){var a=[];for(o=0;o<e.length;o++){s={x:i.width-e[o].x,y:i.height-e[o].y};a.push(s)}return a}if(3===i.rotation){var r=[];for(o=0;o<e.length;o++){s={x:i.height-e[o].y,y:e[o].x};r.push(s)}return r}return e}return[]}function Ph(e,t){if(this.overlappedAnnotations=[],e&&e.bounds)if("textMarkup"===e.shapeAnnotationType)for(var i=0;i<e.bounds.length;i++){var n=this.orderTextMarkupBounds(e.bounds[i]);this.calculateOverlappedAnnotationBounds(e,n,t)}else this.calculateOverlappedAnnotationBounds(e,e.bounds,t);return this.overlappedAnnotations}function Dh(e,t){for(var i,n=this.getPageShapeAnnotations(t),o=0;o<n.length;o++)if(e.annotName===n[o].annotName){i=n[o];break}return this.findOverlappedAnnotations(i,n)}function Nh(e){if(!e||!e.startsWith("#"))throw new Error("Invalid hex color");if(3!==(e=e.replace("#","").trim()).length&&4!==e.length||(e=e.split("").map((function(e){return e+e})).join("")),6!==e.length&&8!==e.length)throw new Error("Invalid hex length");return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16),8===e.length?parseInt(e.slice(6,8),16):255]}function Fh(e){try{var t=Nh(e),i=t[0],n=t[1],o=t[2],s=t[3];return[i,n,o,parseFloat((s/255).toFixed(2))]}catch(e){return[]}}function Lh(e,t){if(t=t?t.toLowerCase():"hex","r"===e[0]){var i=this.convertRgbToNumberArray(e);if("hex"===t||"hexa"===t){var n=this.rgbToHex(i);return"hex"===t?n.slice(0,7):n}return"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===t?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===e[0]){i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(e));if("rgba"===t)return this.convertToRgbString(i);if("hex"===t||"hexa"===t){var o=this.rgbToHex(i);return"hex"===t?o.slice(0,7):o}return"rgb"===t?this.convertToRgbString(i.slice(0,3)):"null"}e=this.roundValue(e);var s=this.hexToRgb(e);return"rgb"!==t&&"hsv"!==t||(s=s.slice(0,3)),"rgba"===t||"rgb"===t?this.convertToRgbString(s):"hsva"===t||"hsv"===t?this.convertToHsvString(this.rgbToHsv.apply(this,s)):"hex"===t?e.slice(0,7):"a"===t?s[3].toString():"null"}function Oh(e){return e.length?"#"+this.hex(e[0])+this.hex(e[1])+this.hex(e[2])+(sf.base.isNullOrUndefined(e[3])?"":0!==e[3]?(Math.round(255*e[3])+65536).toString(16).substring(-2):"00"):""}function Rh(e,t){if(this.isFormFieldShape){var i=this.checkFormDesignCollection(e);(n=u(e)).formFieldId=e.annotName,n.pageNumber=t,delete n.annotName,e.id&&(n.uniqueKey=e.id,delete n.id),i.isExisting?this.pdfViewer.formFieldCollection.splice(i.position,0,n):this.pdfViewer.formFieldCollection.push(n)}else{var n;i=this.checkAnnotationCollection(e);(n=u(e)).annotationId=e.annotName,n.pageNumber=t,delete n.annotName,"stamp"===e.shapeAnnotationType&&(n.uniqueKey=e.randomId,delete n.randomId),"sticky"!==e.shapeAnnotationType&&"StickyNotes"!==e.shapeAnnotationType||(n.uniqueKey=e.annotName),e.id&&(n.uniqueKey=e.id,delete n.id),n.customData&&e.customData&&JSON.stringify(n.customData)!==JSON.stringify(e.customData)&&(n.customData=e.customData),i.isExisting?this.pdfViewer.annotationCollection.splice(i.position,0,n):this.pdfViewer.annotationCollection.push(n)}}function zh(e,t,i){Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500&&(this.clearAnnotationStorage(),this.pdfViewerBase.isStorageExceed=!0);var n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]);var o=0;if(n){this.storeAnnotationCollections(t,e);var s=JSON.parse(n);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+i);var a=this.pdfViewer.annotationModule.getPageCollection(s,e);if(s[a])s[a].annotations.push(t),o=s[a].annotations.indexOf(t);else{var r={pageIndex:e,annotations:[]};r.annotations.push(t),o=r.annotations.indexOf(t),s.push(r)}h=JSON.stringify(s);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+i,h)}else{this.storeAnnotationCollections(t,e);var l={pageIndex:e,annotations:[]};l.annotations.push(t),o=l.annotations.indexOf(t);var d=[];d.push(l);var h=JSON.stringify(d);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]=h:window.sessionStorage.setItem(this.pdfViewerBase.documentId+i,h)}return o}function Hh(e,t,i){var n,o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]),o){var s=JSON.parse(o),a=this.pdfViewer.annotationModule.getPageCollection(s,e);n=s[a]?s[a].annotations:null}else n=null;return n}function Uh(e,t){var i=e.annotation,n=i.shapeAnnotationType;(i.indent||i.measureType)&&(n="shape_measure");var o=this.stickyNotesAnnotationModule.getAnnotations(t,null,n),s=-1;o&&o.length>0&&(s=o.findIndex((function(e){return e.annotName===i.annotName})));return-1!==s?o[s]:e.redoElement?e.redoElement:e.undoElement}function jh(e){var t=this;if(this.pdfViewer.annotationModule&&this.pdfViewer.viewerBase.updateExportItem())return new Promise((function(i,n){t.pdfViewer.viewerBase.createRequestForExportAnnotations(!0,e,!0).then((function(e){i(e)}))}));return null}function _h(e,t,i){if(this.pdfViewerBase.isImportAction&&this.pdfViewerBase.importedAnnotation&&this.pdfViewerBase.importedAnnotation[t]){var n=this.pdfViewerBase.importedAnnotation[t];if(n[""+i])for(var o=0;o<n[""+i].length;o++)if(e.annotName===n[""+i][o].AnnotName||e.annotName===n[""+i][o].annotName){this.pdfViewerBase.importedAnnotation[t][""+i].splice(o,1);break}}var s=this.pdfViewerBase.documentAnnotationCollections;if(s&&s[t]){var a=s[t];if(a&&a[""+i])for(o=0;o<a[""+i].length;o++)if(e.annotName===a[""+i][o].AnnotName){this.pdfViewerBase.documentAnnotationCollections[t][""+i].splice(o,1),this.removeAnnotationComments(e,t,i);break}}}var Wh=function(){function e(e){this.pdfViewer=e}return e.prototype.renderRedactionOverlayText=function(e,t){if(e&&"diagram_helper"!==e.id&&""!==e.overlayText){if(!e||!e.wrapper)return;var i=e.overlayText||"REDACTED",n=e.textAlign||"center",o=e.isRepeat||!1,s=e.fontFamily||"Helvetica",a=e.fontSize||12,r=e.fontColor||"#rgba(255, 0, 0, 1)";this.removeRedactionOverlayText(e);var l=this.pdfViewer.dataId+"_textLayer_"+e.pageIndex,d=document.getElementById(l);if(!d)return;var h=e.bounds||{x:0,y:0,width:0,height:0},p=this.pdfViewer.viewerBase.getZoomFactor(),c=document.createElement("div");if(c.id=this.pdfViewer.dataId+"_redactionOverlay_"+e.id,c.className="e-pv-redaction-overlay-text",c.style.position="absolute",c.style.left=(h.x||0)*p+"px",c.style.top=(h.y||0)*p+"px",c.style.width=(h.width||0)*p+"px",c.style.height=(h.height||0)*p+"px",c.style.padding="5px",c.style.boxSizing="border-box",c.style.overflow="hidden",c.style.pointerEvents="none",c.style.fontFamily=s,c.style.fontSize=a*p+"px",c.style.color=r,c.style.textAlign=n,d.appendChild(c),e.overlayElement=c,o)this.renderRepeatedTextHtml(c,i,a*p,n);else{var u=document.createElement("div");u.textContent=i,u.style.wordWrap="break-word",u.style.wordBreak="break-word",u.style.width="100%",u.style.height="100%",u.style.display="flex",u.style.flexDirection="column",u.style.fontWeight="550",c.appendChild(u),(h.height||0)>1.5*(h.width||0)?this.applyVerticalTextLayout(u,i,n):(u.style.justifyContent="flex-start",u.style.alignItems=this.getAlignStyle(n),u.textContent=i)}}},e.prototype.removeRedactionOverlayText=function(e){if(e){var t=this.pdfViewer.dataId+"_redactionOverlay_"+e.id,i=document.getElementById(t);i&&i.parentNode&&i.parentNode.removeChild(i)}},e.prototype.getAlignStyle=function(e){switch(e.toLowerCase()){case"left":return"flex-start";case"right":return"flex-end";case"center":return"center";default:return"flex-start"}},e.prototype.applyVerticalTextLayout=function(e,t,i){e.innerHTML="",e.style.alignItems=this.getAlignStyle(i),e.style.fontWeight="550";var n=e.parentElement?parseFloat(e.parentElement.style.width):0;t.split(" ");if(n<30)for(var o=0;o<t.length;o++){var s=document.createElement("div");s.textContent=t[o],s.style.textAlign=i,e.appendChild(s)}else e.textContent=t,e.style.wordBreak="break-all"},e.prototype.renderRepeatedTextHtml=function(e,t,i,n){e.innerHTML="";var o=document.createElement("div");o.style.display="flex",o.style.flexDirection="column",o.style.width="100%",o.style.height="100%",o.style.justifyContent="space-between",o.style.fontWeight="550";var s=1.2*i,a=parseFloat(e.style.height),r=parseFloat(e.style.width),l=a>1.5*r,d=a-10,h=Math.max(1,Math.floor(d/s)),p=r-10,c=document.createElement("span");c.style.visibility="hidden",c.style.position="absolute",c.style.whiteSpace="nowrap",c.style.fontFamily=e.style.fontFamily,c.style.fontSize=i+"px",c.style.fontWeight="550",c.textContent=t+" ",document.body.appendChild(c);var u=c.getBoundingClientRect().width;document.body.removeChild(c);var f=Math.floor(p/u);if(0===f&&(f=1),l){var m=document.createElement("div");m.style.width="100%",m.style.height="100%",m.style.display="flex",m.style.flexDirection="column",m.style.justifyContent="flex-start",m.style.textAlign=n;for(var g="",w=0;w<2*h;w++)g+=t+" ";m.textContent=g,o.appendChild(m)}else for(w=0;w<h;w++){var y=document.createElement("div");nl(y,{style:"width:100%; text-align:"+n+"; white-space:nowrap; line-height:"+s+"px; overflow:hidden;"});var v="";"right"===n.toLowerCase()||n.toLowerCase();for(var b=0;b<f;b++)v+=t+" ";v.length>0&&(v=v.substring(0,v.length-1)),y.textContent=v,o.appendChild(y)}e.appendChild(o)},e.prototype.updateRedactionAfterEdit=function(e){e&&"Redaction"===e.shapeAnnotationType&&(this.removeRedactionOverlayText(e),this.renderRedactionOverlayText(e),this.pdfViewer&&this.pdfViewer.renderDrawing(null,e.pageIndex))},e}(),qh=function(){function e(e,t){this.redactionCount=0,this.isAddAnnotationProgramatically=!1,this.isRedactionHovered=!1,this.hoveredRedactionId="",this.pdfViewer=e,this.pdfViewerBase=t,this.redactionOverlayText=new Wh(e),this.initializeRedactionProperties()}return e.prototype.updateAddAnnotationDetails=function(e,t){e.annotationProperties||(e.annotationProperties={}),e?(t.x=e.bound&&void 0!==e.bound.x?e.bound.x:10,t.y=e.bound&&void 0!==e.bound.y?e.bound.y:10):t=(e={offset:{x:10,y:10},pageNumber:0}).bound||{x:10,y:10};var i=e.annotationSelectorSettings||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.annotationSelectorSettings||this.pdfViewer.annotationSelectorSettings,n=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.redactionSettings),o=e.allowedInteractions||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.allowedInteractions||this.pdfViewer.annotationSettings.allowedInteractions,s=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),a="redaction_"+this.pdfViewer.annotation.createGUID(),r=void 0!==e.pageNumber?e.pageNumber:0,l=e.author||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.author||this.pdfViewer.annotationSettings.author||"Guest",d=this.pdfViewer.annotationModule.hexToRgba(e.annotationProperties.markerFillColor||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.markerFillColor||"rgba(255, 255, 255, 1)"),h=this.pdfViewer.annotationModule.hexToRgba(e.fillColor||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.fillColor||"rgba(0, 0, 0, 0)"),p=this.pdfViewer.annotationModule.hexToRgba(e.annotationProperties.markerBorderColor||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.markerBorderColor||"rgba(255, 0, 0, 1)"),c=e.annotationProperties.markerOpacity||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.markerOpacity||1,u=e.annotationProperties.isRepeat||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.isRepeat||!1,f=sf.base.isNullOrUndefined(e.isPrint)?!(this.pdfViewer.redactionSettings&&!sf.base.isNullOrUndefined(this.pdfViewer.redactionSettings.isPrint))||!!this.pdfViewer.redactionSettings.isPrint:!!e.isPrint,m=sf.base.isNullOrUndefined(e.isLock)?!(!this.pdfViewer.redactionSettings||sf.base.isNullOrUndefined(this.pdfViewer.redactionSettings.isLock))&&!!this.pdfViewer.redactionSettings.isLock:!!e.isLock,g=e.annotationProperties.overlayText||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.overlayText||"",w=this.pdfViewer.annotationModule.hexToRgba(e.fontColor||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.fontColor||"rgba(255, 0, 0, 1)"),y=sf.base.isNullOrUndefined(e.fontSize)?this.pdfViewer.redactionSettings&&!sf.base.isNullOrUndefined(this.pdfViewer.redactionSettings.fontSize)&&this.pdfViewer.redactionSettings.fontSize||10:e.fontSize||10,v=e.fontFamily||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.fontFamily||"Helvetica",b=e.textAlign||this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.textAlign||"center",S=e.bound&&e.bound.width||100,A=e.bound&&e.bound.height||50;n.isLock=m,n.minHeight=e.minHeight||0,n.minWidth=e.minWidth||0,n.maxWidth=e.maxWidth||0,n.maxHeight=e.maxHeight||0;var x=[],V={Id:"redaction"+this.redactionCount++||!1,AllowedInteractions:e.allowedInteractions||o,AnnotName:a,AnnotType:"redaction",AnnotationSelectorSettings:i,AnnotationSettings:n,Author:l,Bound:{X:t.x,Y:t.y,Width:S,Height:A,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:A,IsEmpty:!1,Width:S}},Comments:[],CustomData:e.customData||null,CreatedDate:s,ExistingCustomData:null,FillColor:h,FontColor:w,FontSize:y,FontFamily:v,IsCommentLock:!1,IsLocked:m,IsPrint:f,MarkerFillColor:d,MarkerBorderColor:p,MarkerOpacity:c,ModifiedDate:s,Note:"",OverlayText:g,IsRepeat:u||!1,RotateAngle:"RotateAngle0",ShapeAnnotationType:"Redaction",State:"",StateModel:"Review",Subject:"Redaction",TextAlign:b};x[0]=V;var C=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_redaction"),I=[];C&&(I=JSON.parse(C));var k={shapeAnnotationType:"Redaction",author:l,modifiedDate:s,subject:"Redaction",note:"",bounds:{x:t.x,y:t.y,left:t.x,top:t.y,width:S,height:A,right:t.x+S,bottom:t.y+A},rotateAngle:"0",isLocked:m,annotName:a,pageNumber:r,annotationId:a,annotationSelectorSettings:i,customData:e.customData||{},overlayText:g,isRepeat:e.annotationProperties.isRepeat||!1,fontColor:w,fillColor:h,fontSize:y,fontFamily:v,textAlign:b,markerFillColor:d,markerBorderColor:p,markerOpacity:c,isPrint:f,id:x[0].Id,comments:[],review:{},isCommentLock:!1,isReadonly:!1,annotationSettings:n,allowedInteractions:o},M=this.pdfViewer.annotation.getPageCollection(I,r);if(-1!==M&&I[M])I[M].annotations.push(k);else{var T={pageIndex:r,annotations:[k]};I.push(T)}return x[0].Id=k.id,{redactionAnnotation:x}},e.prototype.handleRedactionHover=function(e,t){var i=e.id||"",n=!1;if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0&&"diagram_helper"===this.pdfViewer.selectedItems.annotations[0].id&&(n=!0),"diagram_helper"!==i&&"diagram_helper"!==this.hoveredRedactionId&&!n&&(this.isRedactionHovered&&this.hoveredRedactionId!==i&&this.resetRedactionHover(),!this.isRedactionHovered||this.hoveredRedactionId!==i)){if(e.originalFillColor=e.markerFillColor||"",e.wrapper&&e.wrapper.children&&e.wrapper.children.length>0&&e.fillColor){var o=Gr(e.fillColor,1);e.wrapper.children[0].style.fill=o,e.wrapper.children[0].style.strokeColor=o}e.overlayText&&this.redactionOverlayText.renderRedactionOverlayText(e);var s=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t);s&&this.pdfViewer.renderDrawing(s,t),this.isRedactionHovered=!0,this.hoveredRedactionId=i}},e.prototype.resetRedactionHover=function(){if(this.isRedactionHovered){if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations)for(var e=0;e<this.pdfViewer.selectedItems.annotations.length;e++){if((n=this.pdfViewer.selectedItems.annotations[e])&&"Redaction"===n.shapeAnnotationType){if(n.overlayText&&this.redactionOverlayText.removeRedactionOverlayText(n),n.originalFillColor){if(n.wrapper&&n.wrapper.children&&n.wrapper.children.length>0){var t=Gr(n.originalFillColor,n.markerOpacity);n.wrapper.children[0].style.fill=t,n.wrapper.children[0].style.strokeColor=n.markerBorderColor}delete n.originalFillColor}(o=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+n.pageIndex))&&this.pdfViewer.renderDrawing(o,n.pageIndex)}}if(this.pdfViewer.nameTable)if(this.hoveredRedactionId&&this.pdfViewer.nameTable[this.hoveredRedactionId]){if((n=this.pdfViewer.nameTable[this.hoveredRedactionId])&&"Redaction"===n.shapeAnnotationType){if(n.overlayText&&this.redactionOverlayText.removeRedactionOverlayText(n),n.originalFillColor){if(n.wrapper&&n.wrapper.children&&n.wrapper.children.length>0){t=Gr(n.originalFillColor,n.markerOpacity);n.wrapper.children[0].style.fill=t,n.wrapper.children[0].style.strokeColor=n.markerBorderColor}delete n.originalFillColor}(o=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+n.pageIndex))&&this.pdfViewer.renderDrawing(o,n.pageIndex)}}else for(var i in this.pdfViewer.nameTable){var n;if(Object.prototype.hasOwnProperty.call(this.pdfViewer.nameTable,i))if((n=this.pdfViewer.nameTable[i])&&"Redaction"===n.shapeAnnotationType){if(n.overlayText&&this.redactionOverlayText.removeRedactionOverlayText(n),n.originalFillColor){if(n.wrapper&&n.wrapper.children&&n.wrapper.children.length>0){t=Gr(n.originalFillColor,n.markerOpacity);n.wrapper.children[0].style.fill=t,n.wrapper.children[0].style.strokeColor=n.markerBorderColor}delete n.originalFillColor}var o;(o=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+n.pageIndex))&&this.pdfViewer.renderDrawing(o,n.pageIndex)}}this.isRedactionHovered=!1,this.hoveredRedactionId=""}},e.prototype.getRgbCode=function(e){return Ir.call(this,e)},e.prototype.initializeRedactionProperties=function(){this.pdfViewer.redactionSettings?(this.redactionFillColor=this.pdfViewer.redactionSettings.markerFillColor||"rgba(0, 0, 0, 1)",this.redactionMarkerFillColor=this.pdfViewer.redactionSettings.markerFillColor||"rgba(255, 255, 255, 1)",this.redactionBorderColor=this.pdfViewer.redactionSettings.markerBorderColor||"rgba(255, 0, 0, 1)",this.redactionOutlineOpacity=this.pdfViewer.redactionSettings.markerOpacity||1,this.redactionOpacity=this.pdfViewer.redactionSettings.opacity||1):(this.redactionFillColor="rgba(0, 0, 0, 1)",this.redactionMarkerFillColor="rgba(255, 255, 255, 1)",this.redactionBorderColor="rgba(255, 0, 0, 1)",this.redactionOutlineOpacity=1,this.redactionOpacity=1)},e.prototype.renderRedactionAnnotations=function(e,t,i){if(e)if(e.length>0)for(var n=0;n<e.length;n++){var o=e[n],s=!1,a=this.getAnnotations(t,null);if(null!==a)for(var r=0;r<a.length;r++){var l=o.annotName?o.annotName:o.AnnotName,d=a[r].annotName?a[r].annotName:a[r].AnnotName;if(d&&l&&d===l){s=!0;break}}if(!s){o.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(o,t,o.AnnotType);var h,p=o.Bound,c=o.Author||"";o.AnnotationSettings=o.AnnotationSettings?o.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(o),o.allowedInteractions=o.AllowedInteractions?o.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var u=!0;u=sf.base.isNullOrUndefined(o.IsPrint)?sf.base.isNullOrUndefined(o.isPrint)?o.AnnotationSettings.isPrint:o.isPrint:o.IsPrint,o.IsLocked&&(o.AnnotationSettings.isLock=o.IsLocked);var f={author:c,modifiedDate:(h={shapeAnnotationType:"Redaction",author:c,modifiedDate:o.ModifiedDate||(new Date).toLocaleString(),subject:o.Subject||"",note:o.Note||"",bounds:{x:p.X,y:p.Y,left:p.X,top:p.Y,width:p.Width,height:p.Height,right:p.Right,bottom:p.Bottom},rotateAngle:o.RotateAngle||"0",isLocked:o.IsLocked||!1,annotName:o.AnnotName,pageNumber:t,annotationSelectorSettings:o.AnnotationSelectorSettings||this.pdfViewer.annotationSelectorSettings,customData:this.pdfViewer.annotation.getCustomData(o),overlayText:o.OverlayText||"",isRepeat:o.IsRepeat,fontColor:o.FontColor||"rgba(255, 0, 0, 1)",fillColor:o.FillColor||"rgba(0, 0, 0, 1)",fontSize:o.FontSize||14,fontFamily:o.FontFamily||"Helvetica",textAlign:o.TextAlign||"center",markerFillColor:o.MarkerFillColor||"rgba(255, 255, 255, 1)",markerBorderColor:o.MarkerBorderColor||"rgba(255, 0, 0, 1)",markerOpacity:o.MarkerOpacity||1,annotationSettings:o.AnnotationSettings,allowedInteractions:o.allowedInteractions,isPrint:u,annotationId:o.AnnotName||"",id:o.Id||"redaction"+this.redactionCount++||this.pdfViewer.annotationModule.createGUID()||"redaction_id",comments:this.pdfViewer.annotationModule.getAnnotationComments(o.Comments,o,o.Author),review:{state:o.State,stateModel:o.StateModel,modifiedDate:o.ModifiedDate,author:o.Author},isCommentLock:!1,isReadonly:o.IsReadonly||!1}).modifiedDate,annotName:h.annotName,pageIndex:t,bounds:{x:p.X,y:p.Y,width:p.Width,height:p.Height},strokeColor:h.markerBorderColor,fillColor:h.fillColor,opacity:h.markerOpacity||1,thickness:1,id:h.id,shapeAnnotationType:"Redaction",type:"Redaction",subject:h.subject,notes:h.note,annotationSelectorSettings:h.annotationSelectorSettings,annotationSettings:h.annotationSettings,annotationAddMode:o.annotationAddMode,allowedInteractions:o.allowedInteractions,isLocked:o.isLocked,isPrint:u,overlayText:h.overlayText,isRepeat:h.isRepeat,markerFillColor:h.markerFillColor,markerBorderColor:h.markerBorderColor||"rgba(255, 0, 0, 1)",markerOpacity:h.markerOpacity||1,fontColor:h.fontColor,fontSize:h.fontSize,fontFamily:h.fontFamily,textAlign:h.textAlign};if(this.pdfViewer.add(f),this.drawRedactionAnnotation(t,f,i),this.pdfViewer.annotationModule.storeAnnotations(t,h,"_annotations_redaction"),this.isAddAnnotationProgramatically){var m={type:h.shapeAnnotationType,markerBorderColor:f.strokeColor,markerFillColor:h.markerFillColor,opacity:f.opacity,overlayText:h.overlayText||"",fontColor:h.fontColor,fontSize:h.fontSize||14,fontFamily:h.fontFamily,textAlign:h.textAlign,author:c,subject:h.subject,modifiedDate:h.modifiedDate};this.pdfViewer.fireAnnotationAdd(f.pageIndex||0,f.annotName||"","Redaction",h.bounds,m)}}}else if(e.shapeAnnotationType&&"Redaction"===e.shapeAnnotationType){(o=this.createAnnotationObject(e))&&(this.pdfViewer.annotationModule.storeAnnotations(t,o,"_annotations_redaction"),this.pdfViewer.annotationModule.triggerAnnotationAdd(e))}},e.prototype.createAnnotationObject=function(e){var t,i=this.pdfViewer.annotation.createGUID();if(e.formFieldAnnotationType||this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("redaction",e.pageIndex+1,e.shapeAnnotationType,i,"",null,e.author),e.id){var n=this.pdfViewer.nameTable[e.id];this.updateRedactionProperties(n)}e.annotName=i,t=e.wrapper.bounds?{x:e.wrapper.bounds.x,y:e.wrapper.bounds.y,left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,height:e.wrapper.bounds.height,width:e.wrapper.bounds.width,right:e.wrapper.bounds.right,bottom:e.wrapper.bounds.bottom}:{x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0};var o={shapeAnnotationType:"Redaction",author:e.author,modifiedDate:e.modifiedDate||(new Date).toLocaleString(),subject:e.subject||"",note:e.note||"",bounds:t,rotateAngle:e.rotateAngle||"0",isLocked:e.isLocked||!1,annotName:e.annotName,pageNumber:e.pageIndex,annotationSelectorSettings:e.annotationSelectorSettings||this.pdfViewer.annotationSelectorSettings,customData:this.pdfViewer.redactionSettings.customData||{},overlayText:e.overlayText||"",isRepeat:e.isRepeat,fontColor:e.fontColor||"rgba(255, 0, 0, 1)",fillColor:e.fillColor||"rgba(0, 0, 0, 1)",fontSize:e.fontSize||14,fontFamily:e.fontFamily||"Helvetica",textAlign:e.textAlign||"center",markerFillColor:e.markerFillColor||"rgba(255, 255, 255, 1)",markerBorderColor:e.markerBorderColor||"rgba(255, 0, 0, 1)",markerOpacity:e.markerOpacity||1,annotationSettings:e.annotationSettings,allowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),isPrint:e.isPrint,annotationId:e.annotName||"",id:e.id||"",comments:e.comments,isCommentLock:e.isCommentLock,isReadonly:e.isReadonly||!1,review:e.review||{state:"",stateModel:"",modifiedDate:"",author:""}};return this.updateRedactionProperties(o),o},e.prototype.updateRedactionProperties=function(e){if(this.pdfViewer.redactionSettings){var t=this.pdfViewer.redactionSettings;e.fillColor=sf.base.isNullOrUndefined(t.fillColor)?sf.base.isNullOrUndefined(e.fillColor)?"rgba(0, 0, 0, 1)":e.fillColor:t.fillColor,e.fontColor=sf.base.isNullOrUndefined(t.fontColor)?sf.base.isNullOrUndefined(e.fontColor)?"rgba(255, 0, 0, 1)":e.fontColor:t.fontColor,e.isRepeat=sf.base.isNullOrUndefined(t.isRepeat)?!sf.base.isNullOrUndefined(e.isRepeat)&&e.isRepeat:t.isRepeat,e.overlayText=sf.base.isNullOrUndefined(t.overlayText)?sf.base.isNullOrUndefined(e.overlayText)?"":e.overlayText:t.overlayText,e.fontSize=sf.base.isNullOrUndefined(t.fontSize)?sf.base.isNullOrUndefined(e.fontSize)?14:e.fontSize:t.fontSize,e.fontFamily=sf.base.isNullOrUndefined(t.fontFamily)?sf.base.isNullOrUndefined(e.fontFamily)?"Helvetica":e.fontFamily:t.fontFamily,e.textAlign=sf.base.isNullOrUndefined(t.textAlign)?sf.base.isNullOrUndefined(e.textAlign)?"center":e.textAlign:t.textAlign,e.markerFillColor=sf.base.isNullOrUndefined(t.markerFillColor)?sf.base.isNullOrUndefined(e.markerFillColor)?"rgba(255, 255, 255, 1)":e.markerFillColor:t.markerFillColor,e.markerBorderColor=sf.base.isNullOrUndefined(t.markerBorderColor)?sf.base.isNullOrUndefined(e.markerBorderColor)?"rgba(255, 0, 0, 1)":e.markerBorderColor:t.markerBorderColor,e.markerOpacity=sf.base.isNullOrUndefined(t.markerOpacity)?sf.base.isNullOrUndefined(e.markerOpacity)?1:e.markerOpacity:t.markerOpacity}},e.prototype.drawRedactionAnnotation=function(e,t,i){t.bounds;if(i)this.pdfViewer.renderDrawing(i,e);else{var n=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+e);n&&this.pdfViewer.renderDrawing(n,e)}},e.prototype.getSettings=function(e){var t={};return t.pageNumber=e.pageNumber,t.bounds=e.bounds,t.annotationSelectorSettings=this.getSelector("Redaction",e.subject),t.markerFillColor=e.markerFillColor||this.redactionFillColor,t.markerBorderColor=e.markerBorderColor||this.redactionBorderColor,t.markerOpacity=e.markerOpacity||this.redactionOutlineOpacity,t.opacity=e.opacity||this.redactionOpacity,t.overlayText=e.overlayText||"",t.fontColor=e.fontColor||"rgba(255, 0, 0, 1)",t.fontSize=e.fontSize||14,t.fontFamily=e.fontFamily||"Helvetica",t.textAlign=e.textAlign||"center",t},e.prototype.setAnnotationType=function(e){if("Redaction"===e){this.initializeRedactionProperties(),this.pdfViewerBase.disableTextSelectionMode();var t=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),i="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.redactionSettings&&this.pdfViewer.redactionSettings.author?this.pdfViewer.redactionSettings.author:"Guest";this.pdfViewer.drawingObject={shapeAnnotationType:"Redaction",type:"Redaction",strokeColor:this.redactionBorderColor,fillColor:this.pdfViewer.redactionSettings.fillColor||"rgba(0, 0, 0, 1)",fontColor:this.pdfViewer.redactionSettings.fontColor||"rgba(255, 0, 0, 1)",opacity:1,notes:"",thickness:1,fontSize:14,fontFamily:"Helvetica",borderDashArray:"0",textAlign:"center",modifiedDate:t,author:i,subject:"Redaction",overlayText:this.pdfViewer.redactionSettings.overlayText||"",markerFillColor:this.redactionMarkerFillColor,markerBorderColor:this.redactionBorderColor,markerOpacity:this.redactionOutlineOpacity,isCommentLock:!1},this.pdfViewer.tool="DrawTool"}},e.prototype.updateRedactionAnnotationCollections=function(e,t){var i=null;if(e){var n=!1;e.IsLocked&&(n=e.IsLocked);var o=e.Author||"",s=e.AllowedInteractions||this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);if(e.Bound){var a={id:"redaction"+this.redactionCount++,shapeAnnotationType:"Redaction",author:o,modifiedDate:e.ModifiedDate||(new Date).toLocaleString(),subject:e.Subject||"",note:e.Note||"",overlayText:e.OverlayText||"",fontColor:e.FontColor||"rgba(255, 0, 0, 1)",fontSize:e.FontSize||14,fontFamily:e.FontFamily||"Helvetica",textAlign:e.TextAlign||"center",markerFillColor:e.MarkerFillColor||"rgba(255, 255, 255, 1)",markerBorderColor:e.MarkerBorderColor||"rgba(255, 0, 0, 1)",markerOpacity:e.MarkerOpacity||1,fillColor:e.fillColor||"rgba(0, 0, 0, 1)",isRepeat:e.IsRepeat||!1,bounds:{x:e.Bound.X,y:e.Bound.Y,left:e.Bound.X,top:e.Bound.Y,width:e.Bound.Width,height:e.Bound.Height,right:e.Bound.Right,bottom:e.Bound.Bottom},rotateAngle:e.RotateAngle||"0",isLocked:n,annotationId:e.AnnotName,pageNumber:t,customData:this.pdfViewer.annotation.getCustomData(e),allowedInteractions:s,annotName:e.AnnotName,annotationSelectorSettings:this.getSelector("Redaction",e.Subject),annotationSettings:e.AnnotationSettings||this.pdfViewer.annotationModule.updateAnnotationSettings(e),isPrint:void 0===e.IsPrint||e.IsPrint,comments:e.Comments?this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author):[],review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},isCommentLock:e.IsCommentLock,isReadonly:e.IsReadonly||!1};a.isLocked&&(a.annotationSettings.isLock=a.isLocked),i=a}}return i},e.prototype.modifyInCollection=function(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null;i&&"bounds"===e&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(i,!0);var o=this.getAnnotations(t,null);if(null!=o&&i){for(var s=0;s<o.length;s++)if(i.id===o[s].id){if("bounds"===e)o[s].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom};else if("fillColor"===e)o[s].fillColor=i.fillColor;else if("useOverlayText"===e)o[s].useOverlayText=i.useOverlayText;else if("isRepeat"===e)o[s].isRepeat=i.isRepeat;else if("fill"===e)o[s].markerFillColor=i.wrapper.children[0].style.fill;else if("stroke"===e)o[s].markerBorderColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[s].markerOpacity=i.markerOpacity;else if("overlayText"===e)o[s].overlayText=i.overlayText;else if("fontColor"===e)o[s].fontColor=i.fontColor;else if("fontSize"===e)o[s].fontSize=i.fontSize;else if("fontFamily"===e)o[s].fontFamily=i.fontFamily;else if("textAlign"===e)o[s].textAlign=i.textAlign;else if("notes"===e)o[s].note=i.notes;else{if("delete"===e){n=o.splice(s,1)[0];break}"isLock"===e?(o[s].annotationSettings&&(o[s].annotationSettings.isLock=i.isLock),o[s].isLock=i.isLock):"allowedInteractions"===e?o[s].allowedInteractions=i.allowedInteractions:"isPrint"===e&&(o[s].annotationSettings&&(o[s].annotationSettings.isPrint=i.isPrint),o[s].isPrint=i.isPrint)}this.pdfViewerBase.isUpdateProgrammatically||(o[s].modifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime()),this.pdfViewer.annotationModule.storeAnnotationCollections(o[s],t)}this.manageAnnotations(o,t)}return n},e.prototype.addInCollection=function(e,t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_redaction");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_redaction"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_redaction");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_redaction"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_redaction",s)}},e.prototype.saveImportedRedactionAnnotations=function(e,t){if(e){var i={shapeAnnotationType:"Redaction",author:e.Author||"",modifiedDate:e.ModifiedDate||(new Date).toLocaleString(),subject:e.Subject||"",note:e.Note||"",bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.X+e.Bounds.Width,bottom:e.Bounds.Y+e.Bounds.Height},rotateAngle:e.RotateAngle||"0",isLocked:e.IsLocked||!1,annotName:e.AnnotName,pageNumber:t,annotationId:e.AnnotName,annotationSelectorSettings:e.AnnotationSelectorSettings||this.pdfViewer.annotationSelectorSettings,customData:this.pdfViewer.annotation.getCustomData(e),overlayText:e.OverlayText||"",isRepeat:e.IsRepeat||!1,fontColor:e.FontColor||"rgba(255, 0, 0, 1)",fillColor:e.FillColor||"rgba(0, 0, 0, 1)",fontSize:e.FontSize||14,fontFamily:e.FontFamily||"Helvetica",textAlign:e.TextAlign||"center",markerFillColor:e.MarkerFillColor||"rgba(255, 255, 255, 1)",markerBorderColor:e.MarkerBorderColor||"rgba(255, 0, 0, 1)",markerOpacity:e.MarkerOpacity||1,isPrint:void 0===e.IsPrint||e.IsPrint,id:e.Id||this.pdfViewer.annotationModule.createGUID()||"redaction_id",comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},isCommentLock:e.IsCommentLock||!1,isReadonly:e.IsReadonly||!1,annotationSettings:e.AnnotationSettings||this.pdfViewer.annotationModule.updateAnnotationSettings(e),allowedInteractions:e.AllowedInteractions||this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e)},n={author:i.author,modifiedDate:i.modifiedDate,annotName:i.annotName,pageIndex:t,bounds:{x:i.bounds.x,y:i.bounds.y,width:i.bounds.width,height:i.bounds.height},strokeColor:i.markerBorderColor,fillColor:i.fillColor,opacity:i.markerOpacity,thickness:1,id:i.annotName,shapeAnnotationType:"Redaction",type:"Redaction",subject:i.subject,notes:i.note,annotationSelectorSettings:i.annotationSelectorSettings,annotationSettings:i.annotationSettings,annotationAddMode:"Imported Annotation",isLocked:i.isLocked,isPrint:i.isPrint,overlayText:i.overlayText,isRepeat:i.isRepeat,markerFillColor:i.markerFillColor,markerBorderColor:i.markerBorderColor,markerOpacity:i.markerOpacity,fontColor:i.fontColor,fontSize:i.fontSize,fontFamily:i.fontFamily,textAlign:i.textAlign};this.pdfViewer.add(n),this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_redaction")}},e.prototype.getSelector=function(e,t){return{resizerShape:"Square",resizerSize:8,resizerFillColor:"#FF4081",resizerBorderColor:"#FF4081",selectionBorderColor:"#FF4081"}},e.prototype.saveRedactionAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_redaction");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_redaction"]);for(var t=[],i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++){this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]);var l=a.annotations[r].bounds;a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(l,a.pageIndex));var d=a.annotations[r].markerFillColor||"";a.annotations[r].markerFillColor=JSON.stringify(this.getRgbCode(d));var h=a.annotations[r].markerBorderColor||"";a.annotations[r].markerBorderColor=JSON.stringify(this.getRgbCode(h));var p=a.annotations[r].fillColor||"";if(a.annotations[r].fillColor=JSON.stringify(this.getRgbCode(p)),a.annotations[r].fontColor){var c=a.annotations[r].fontColor||"";a.annotations[r].fontColor=JSON.stringify(this.getRgbCode(c))}}a.annotations=a.annotations.filter((function(e){return e})),s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.getAnnotations=function(e,t){var i=[],n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_redaction");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_redaction"]),n){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);o[s]?i=o[s].annotations:t&&(i=t)}else t&&(i=t);return i},e}(),Zh=function(){function e(e,t){this.isDeleteKeyboardClick=!1,this.isUndoRedoAction=!1,this.isUndoAction=!1,this.annotationSelected=!0,this.isAnnotDeletionApiCall=!1,this.removedDocumentAnnotationCollection=[],this.isShapeCopied=!1,this.actionCollection=[],this.redoCollection=[],this.isPopupNoteVisible=!1,this.undoCommentsElement=[],this.redoCommentsElement=[],this.selectAnnotationId=null,this.boundsChanged=!1,this.isAnnotationSelected=!1,this.annotationPageIndex=null,this.previousIndex=null,this.overlappedAnnotations=[],this.overlappedCollections=[],this.isFormFieldShape=!1,this.removedAnnotationCollection=[],this.oldProperties=null,this.pdfViewer=e,this.pdfViewerBase=t,this.pdfViewer.enableTextMarkupAnnotation&&(this.textMarkupAnnotationModule=new Jh(this.pdfViewer,this.pdfViewerBase)),this.pdfViewer.enableShapeAnnotation&&(this.shapeAnnotationModule=new Bp(this.pdfViewer,this.pdfViewerBase)),this.pdfViewer.enableMeasureAnnotation&&(this.measureAnnotationModule=new Ap(this.pdfViewer,this.pdfViewerBase)),this.stampAnnotationModule=new Zp(this.pdfViewer,this.pdfViewerBase),this.stickyNotesAnnotationModule=new gu(this.pdfViewer,this.pdfViewerBase),this.freeTextAnnotationModule=new sl(this.pdfViewer,this.pdfViewerBase),this.inputElementModule=new al(this.pdfViewer,this.pdfViewerBase),this.inkAnnotationModule=new wu(this.pdfViewer,this.pdfViewerBase),this.redactionAnnotationModule=new qh(this.pdfViewer,this.pdfViewerBase)}return e.prototype.closeAnnotationToolbar=function(){Dd.call(this)},e.prototype.setAnnotationMode=function(e,t,i,n){sd.call(this,e,t,i,n)},e.prototype.deleteAnnotationById=function(e,t){hl.call(this,e,t)},e.prototype.clearAnnotationMode=function(){ad.call(this)},e.prototype.deleteAnnotation=function(e,t,i,n){dl.call(this,e,t,i,n)},e.prototype.updateSignatureDeleteStatus=function(e,t){gl.call(this,e,t)},e.prototype.resetSignatureFieldContent=function(e){wl.call(this,e)},e.prototype.findSignatureFieldById=function(e,t){return e.find((function(e){return e.id===t}))},e.prototype.updateGroupedSignatureDelete=function(e,t){yl.call(this,e,t)},e.prototype.filterSignatureFieldsByFieldName=function(e,t){return function(e,t){return e.filter((function(e){return e.name===t}))}(e,t)},e.prototype.getAnnotationsFromCollections=function(e){return Zl.call(this,e)},e.prototype.updateInputFieldDivElement=function(e){vl.call(this,e)},e.prototype.storeAnnotationCollections=function(e,t){Rh.call(this,e,t)},e.prototype.checkFormDesignCollection=function(e){return od.call(this,e)},e.prototype.getCustomData=function(e){return Jl.call(this,e)},e.prototype.getShapeData=function(e,t){return El.call(this,e,t)},e.prototype.getMeasureData=function(e){return Pl.call(this,e)},e.prototype.getTextMarkupData=function(e){return kl.call(this,e)},e.prototype.getData=function(e){return Ql.call(this,e)},e.prototype.clearAnnotationStorage=function(){Xl.call(this)},e.prototype.checkAnnotationCollection=function(e){return Yl.call(this,e)},e.prototype.updateAnnotationCollection=function(e){rl.call(this,e)},e.prototype.updateImportAnnotationCollection=function(e,t,i){_h.call(this,e,t,i)},e.prototype.removeAnnotationComments=function(e,t,i){Wl.call(this,e,t,i)},e.prototype.selectAnnotation=function(e,t){Tl.call(this,e,t)},e.prototype.scrollTopLeftValue=function(e,t){return Mh.call(this,e,t)},e.prototype.updateCollectionForNonRenderedPages=function(e,t,i){return ll.call(this,e,t,i)},e.prototype.getTypeOfAnnotation=function(e){return function(e){var t;return e.id&&"shape"===e.id.toLowerCase()?t="shapeAnnotation":e.id&&"measure"===e.id.toLowerCase()?t="measureShapeAnnotation":e.id&&"freetext"===e.id.toLowerCase()?t="freeTextAnnotation":e.shapeAnnotationType&&"textmarkup"===e.shapeAnnotationType.toLowerCase()?t="textMarkupAnnotation":e.shapeAnnotationType&&"stamp"===e.shapeAnnotationType.toLowerCase()?t="stampAnnotations":e.shapeAnnotationType&&"ink"===e.shapeAnnotationType.toLowerCase()?t="signatureInkAnnotation":e.shapeAnnotationType&&"sticky"===e.shapeAnnotationType.toLowerCase()&&(t="stickyNotesAnnotation"),t}(e)},e.prototype.showCommentsPanelInBlazor=function(){Hl.call(this)},e.prototype.clearSelection=function(){Ml.call(this)},e.prototype.getAnnotationTop=function(e){return function(e){return e.bounds?e.bounds[0].Top?e.bounds[0].Top:e.bounds[0].top:e.rect?e.rect.Top?e.rect.Top:e.rect.top:0}(e)},e.prototype.getAnnotationLeft=function(e){return function(e){return e.rect?e.rect.Left?e.rect.Left:e.rect.left:e.bounds[0].Left?e.bounds[0].Left:e.bounds[0].left}(e)},e.prototype.selectAnnotationFromCodeBehind=function(){pl.call(this)},e.prototype.findRenderPageList=function(e){return $l.call(this,e)},e.prototype.getPageNumberFromAnnotationCollections=function(e){return ed.call(this,e)},e.prototype.getAnnotationsFromAnnotationCollections=function(e){return td.call(this,e)},e.prototype.getTextMarkupAnnotations=function(e,t){return Il.call(this,e,t)},e.prototype.getAnnotationType=function(e,t){return function(e,t){var i;if(""===e||sf.base.isNullOrUndefined(e))switch(t){case"Line":i="Line";break;case"LineWidthArrowHead":i="Arrow";break;case"Rectangle":i="Rectangle";break;case"Ellipse":i="Circle";break;case"Polygon":i="Polygon";break;case"Stamp":i="Stamp";break;case"Image":i="Image";break;case"FreeText":i="FreeText";break;case"Ink":i="Ink";break;case"StickyNotes":i="StickyNotes";break;case"Redaction":i="Redaction"}else switch(e){case"Distance":i="Distance";break;case"Perimeter":i="Perimeter";break;case"Area":i="Area";break;case"Radius":i="Radius";break;case"Volume":i="Volume"}return i}(t,e)},e.prototype.getAnnotationIndex=function(e,t){return id.call(this,e,t)},e.prototype.initializeCollection=function(){pd.call(this)},e.prototype.addAction=function(e,t,i,n,o,s,a){Al.call(this,e,t,i,n,o,s,a)},e.prototype.checkFormFieldTypeAction=function(e,t){return function(e,t){if(!sf.base.isNullOrUndefined(e.formFieldAnnotationType))return!0;switch(t){case"AddProgrammticalFormFields":case"DeleteProgrammticalFormFields":case"DeleteFormField":case"TextValueChange":case"CheckBoxChange":case"RadioButtonChange":case"DropDownChange":case"ListBoxChange":case"UpdateFormField":case"SignatureValueChange":return!0}return!1}(e,t)},e.prototype.undo=function(){xl.call(this)},e.prototype.getAnnotationFromSessionStorage=function(e,t){return Uh.call(this,e,t)},e.prototype.updateFormFieldUndoRedoAction=function(e,t,i,n,o){Cl.call(this,e,t,i,n,o)},e.prototype.redo=function(){Vl.call(this)},e.prototype.storeStickyAnnotations=function(e,t){zl.call(this,e,t)},e.prototype.updateCollectionForLineProperty=function(e){hh.call(this,e)},e.prototype.updateToolbar=function(e){Pd.call(this,e)},e.prototype.createNote=function(){hd.call(this)},e.prototype.showPopupNote=function(e,t,i,n,o){cd.call(this,e,t,i,n,o)},e.prototype.hidePopupNote=function(){ud.call(this)},e.prototype.createTextMarkupPopup=function(){md.call(this)},e.prototype.onPopupElementMoveStart=function(e){Vd.call(this,e)},e.prototype.onPopupElementMove=function(e){Cd.call(this,e)},e.prototype.onPopupElementMoveEnd=function(){this.isPopupMenuMoved=!1},e.prototype.saveClosePopupMenu=function(){Id.call(this)},e.prototype.closePopupMenu=function(){kd.call(this)},e.prototype.showAnnotationPopup=function(e){xd.call(this,e)},e.prototype.modifyOpacity=function(e,t){Jd.call(this,e,t)},e.prototype.modifyFontColor=function(e){Kd.call(this,e)},e.prototype.modifyFontFamily=function(e){Qd.call(this,e)},e.prototype.modifyFontSize=function(e){$d.call(this,e)},e.prototype.changeFontSizeOfInput=function(e,t,i,n){eh.call(this,e,t,i,n)},e.prototype.modifyTextAlignment=function(e){th.call(this,e)},e.prototype.modifyTextProperties=function(e,t){ih.call(this,e,t)},e.prototype.modifyThickness=function(e){nh.call(this,e)},e.prototype.modifyStrokeColor=function(e){oh.call(this,e)},e.prototype.modifyFillColor=function(e){sh.call(this,e)},e.prototype.modifyDynamicTextValue=function(e,t){ah.call(this,e,t)},e.prototype.modifyInCollections=function(e,t){return ch.call(this,e,t)},e.prototype.createPropertiesWindow=function(){gd.call(this)},e.prototype.updatePropertiesWindowInBlazor=function(){wd.call(this)},e.prototype.destroyPropertiesWindow=function(){yd.call(this)},e.prototype.refreshColorPicker=function(e){e.setProperties({value:e.value},!0),e.refresh()},e.prototype.createAppearanceTab=function(){return vd.call(this)},e.prototype.createContent=function(e){return function(e){var t=sf.base.createElement("div",{className:"e-pv-properties-line-style-content"});return t.textContent=e,t}(e)},e.prototype.onStrokeDropDownBeforeOpen=function(){Bd.call(this)},e.prototype.onFillDropDownBeforeOpen=function(){Ed.call(this)},e.prototype.createStyleList=function(){return bd.call(this)},e.prototype.createColorPicker=function(e,t){return Md.call(this,e,t)},e.prototype.createDropDownButton=function(e,t,i){return Td.call(this,e,t,i)},e.prototype.updateColorInIcon=function(e,t){e.childNodes[0].style.borderBottomColor=t},e.prototype.onFillColorChange=function(e){ph.call(this,e)},e.prototype.onStrokeColorChange=function(e){uh.call(this,e)},e.prototype.setThickness=function(e,t){fh.call(this,e,t)},e.prototype.createDropDownContent=function(e){return function(e){var t=sf.base.createElement("div",{className:"e-pv-line-styles-content-container"}),i=sf.base.createElement("span",{className:"e-pv-line-styles-content",styles:"border-bottom-style:"+e});return t.appendChild(i),t}(e)},e.prototype.createListForStyle=function(e){return function(e){var t=sf.base.createElement("li",{className:"e-menu-item"}),i=sf.base.createElement("div",{className:"e-pv-line-styles-container"}),n=sf.base.createElement("span",{className:"e-pv-line-styles-item",styles:"border-bottom-style:"+e});return i.appendChild(n),t.appendChild(i),t}(e)},e.prototype.onStartArrowHeadStyleSelect=function(e){this.startArrowDropDown.content=this.createContent(e.item.text).outerHTML},e.prototype.onEndArrowHeadStyleSelect=function(e){this.endArrowDropDown.content=this.createContent(e.item.text).outerHTML},e.prototype.createInputElement=function(e,t,i,n,o,s,a){return Sd.call(this,e,t,i,n,o,s,a)},e.prototype.updateOpacityIndicator=function(){this.opacityIndicator.textContent=this.opacitySlider.value+"%"},e.prototype.onOkClicked=function(e,t,i,n){Ad.call(this,e,t,i,n)},e.prototype.onCancelClicked=function(){this.propertiesDialog.hide()},e.prototype.getArrowTypeFromDropDown=function(e,t){return Fl.call(this,e,t)},e.prototype.getArrowString=function(e){return Ll.call(this,e)},e.prototype.onAnnotationMouseUp=function(){Wd.call(this)},e.prototype.onShapesMouseup=function(e,t){Bl.call(this,e,t)},e.prototype.updateCalibrateValues=function(e,t){Nl.call(this,e,t)},e.prototype.onAnnotationMouseDown=function(){qd.call(this)},e.prototype.enableBasedOnType=function(){jd.call(this)},e.prototype.getProperDate=function(e){return function(e){var t=new Date(e.toString());if(isNaN(t.getFullYear())){var i=e.slice(2,16);i=i.slice(0,4)+"/"+i.slice(4,6)+"/"+i.slice(6,8)+" "+i.slice(8,10)+":"+i.slice(10,12)+":"+i.slice(12,14),t=new Date(i)}return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}(e)},e.prototype.getPageCollection=function(e,t){return function(e,t){for(var i=null,n=0;n<e.length;n++)if(e[n].pageIndex===t){i=n;break}return i}(e,t)},e.prototype.getAnnotationWithId=function(e,t){return function(e,t){for(var i,n=0;n<e.length;n++)t===e[n].id&&(i=e[n]);return i}(e,t)},e.prototype.getEventPageNumber=function(e){return _d.call(this,e)},e.prototype.getAnnotationComments=function(e,t,i){return function(e,t){var i=[],n=null;if(e&&e.length>0)for(var o=0;o<e.length;o++){var s=e[o];n={shapeAnnotationType:"sticky",author:s.Author,modifiedDate:s.ModifiedDate,note:s.Note,state:s.State,stateModel:s.StateModel,comments:[],review:{state:s.State,stateModel:s.StateModel,modifiedDate:s.ModifiedDate,author:s.Author},annotName:s.AnnotName,parentId:t.AnnotName,subject:"Comments",isLock:s.IsLock},i[i.length]=n}return i}(e,t)},e.prototype.getRandomNumber=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){return(16*Math.random()|0).toString(16)}))},e.prototype.createGUID=function(){return this.getRandomNumber()},e.prototype.createAnnotationLayer=function(e,t,i,n,o){return mh.call(this,e,t,i,n,o)},e.prototype.resizeAnnotations=function(e,t,i){vh.call(this,e,t,i)},e.prototype.clearAnnotationCanvas=function(e){gh.call(this,e)},e.prototype.renderAnnotations=function(e,t,i,n,o,s,a){ul.call(this,e,t,i,n,o,s,a)},e.prototype.storeAnnotations=function(e,t,i){return zh.call(this,e,t,i)},e.prototype.getArrowType=function(e){return function(e){var t="None";switch(e){case"ClosedArrow":case"Closed":t="Arrow";break;case"OpenArrow":case"Open":t="OpenArrow";break;case"Square":t="Square";break;case"Circle":case"Round":t="Circle";break;case"Diamond":t="Diamond";break;case"Butt":t="Butt"}return t}(e)},e.prototype.getArrowTypeForCollection=function(e){return function(e){var t;switch(e){case"ClosedArrow":case"Arrow":t="ClosedArrow";break;case"OpenArrow":case"Square":case"Circle":case"Diamond":case"None":t=e.toString();break;case"Round":t="Circle";break;case"Butt":t="Butt"}return t}(e)},e.prototype.getBounds=function(e,t,i){return Eh.call(this,e,t,i)},e.prototype.getInkBounds=function(e,t){return Th.call(this,e,t)},e.prototype.getVertexPoints=function(e,t){return Bh.call(this,e,t)},e.prototype.getStoredAnnotations=function(e,t,i){return Hh.call(this,e,t,i)},e.prototype.triggerAnnotationPropChange=function(e,t,i,n,o,s,a,r,l,d,h){Ld.call(this,e,t,i,n,o,s,a,r,l,d,h)},e.prototype.triggerAnnotationAdd=function(e){Od.call(this,e)},e.prototype.triggerAnnotationResize=function(e){zd.call(this,e)},e.prototype.triggerAnnotationMove=function(e,t){Rd.call(this,e,t)},e.prototype.annotationSelect=function(e,t,i,n,o,s){Ud.call(this,e,t,i,n,o,s)},e.prototype.selectSignature=function(e,t,i){Sl.call(this,e,t,i)},e.prototype.editSignature=function(e){bl.call(this,e)},e.prototype.editAnnotation=function(e){Hd.call(this,e)},e.prototype.annotationPropertyChange=function(e,t,i,n,o){this.pdfViewer.nodePropertyChange(e,{opacity:t}),this.triggerAnnotationPropChange(e,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(e.pageIndex,null,e,i,"",n,o)},e.prototype.calculateAnnotationBounds=function(e,t){Ih.call(this,e,t)},e.prototype.updateFreeTextProperties=function(e){!function(e){e.labelSettings&&(e.labelSettings.fillColor&&(e.labelFillColor=e.labelSettings.fillColor),e.labelSettings.fontColor&&(e.fontColor=e.labelSettings.fontColor),e.labelSettings.fontSize&&(e.fontSize=e.labelSettings.fontSize),e.labelSettings.fontFamily&&(e.fontFamily=e.labelSettings.fontFamily),e.labelSettings.opacity&&(e.labelOpacity=e.labelSettings.opacity),e.labelSettings.labelContent&&(e.labelContent=e.labelSettings.labelContent))}(e)},e.prototype.addFreeTextProperties=function(e,t){Ol.call(this,e,t)},e.prototype.updateMeasurementSettings=function(){Dl.call(this)},e.prototype.updateCollection=function(e,t,i,n){ml.call(this,e,t,i,n)},e.prototype.modifyAnnotationProperties=function(e,t,i){return rh.call(this,e,t,i)},e.prototype.updateAnnotationAuthor=function(e,t){return ql.call(this,e,t)},e.prototype.updateFreeTextFontStyle=function(e){return function(e){return 1===e.isBold?1:2===e.isItalic?2:4===e.isUnderline?4:e.isStrikeout?8:{isBold:e.isBold,isItalic:e.isItalic,isUnderline:e.isUnderline,isStrikeout:e.isUnderline}}(e)},e.prototype.setFreeTextFontStyle=function(e){return function(e){return 1===e?{isBold:!0}:2===e?{isItalic:!0}:4===e?{isUnderline:!0}:8===e?{isStrikeout:!0}:{isBold:e.isBold,isItalic:e.isItalic,isUnderline:e.isUnderline,isStrikeout:e.isUnderline}}(e)},e.prototype.findAnnotationSettings=function(e,t){return Sh.call(this,e,t)},e.prototype.updateAnnotationSettings=function(e){return Ah.call(this,e)},e.prototype.updateSettings=function(e){return Vh.call(this,e)},e.prototype.getOverlappedAnnotations=function(e,t){return Dh.call(this,e,t)},e.prototype.getPageShapeAnnotations=function(e){return cl.call(this,e)},e.prototype.findOverlappedAnnotations=function(e,t){return Ph.call(this,e,t)},e.prototype.calculateOverlappedAnnotationBounds=function(e,t,i){kh.call(this,e,t,i)},e.prototype.findAnnotationMode=function(e,t,i){return Kl.call(this,e,t,i)},e.prototype.checkOverlappedCollections=function(e,t){!function(e,t){if(e.length>0){for(var i=!1,n=0;n<e.length;n++)if(t.annotName===e[n].annotName&&t.bounds===e[n].bounds){i=!0;break}i||e.push(t)}else e.push(t)}(t,e)},e.prototype.orderTextMarkupBounds=function(e){return function(e){return e.Left||e.Width?{left:e.Left,top:e.Top,height:e.Height,width:e.Width}:{left:e.left,top:e.top,height:e.height,width:e.width}}(e)},e.prototype.updateModifiedDate=function(e){Ul.call(this,e)},e.prototype.setAnnotationModifiedDate=function(e){return function(e){var t;if(""===e)return e;var i=parseInt(e.split(" ")[1].split(":")[0],10);t=3===e.split(" ").length?i+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" "+e.split(" ")[2]:i>=12?12===i?i+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" PM":i-12+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" PM":i+":"+e.split(" ")[1].split(":")[1]+":"+e.split(" ")[1].split(":")[2]+" AM";var n=e.split(" ")[0];return e.split(",").length>1?n+" "+t:n+", "+t}(e)},e.prototype.clear=function(){yh.call(this)},e.prototype.retrieveAnnotationCollection=function(){return dd.call(this)},e.prototype.rgbaToHex=function(e){return Cr(e)},e.prototype.hexToRgba=function(e){try{var t=Nh(e);return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+(t[3]/255).toFixed(2)+")"}catch(t){return e}},e.prototype.getRedactionSettings=function(){if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0){var e=this.pdfViewer.selectedItems.annotations[0];if(e&&"Redaction"===e.shapeAnnotationType)return{fillColor:this.rgbaToHex(e.fillColor)||"rgba(0, 0, 0, 1)",markerBorderColor:this.rgbaToHex(e.markerBorderColor)||"rgba(255, 0, 0, 1)",markerFillColor:this.rgbaToHex(e.markerFillColor)||"rgba(255, 255, 255, 1)",markerOpacity:e.markerOpacity||1,fontFamily:e.fontFamily||"Helvetica",fontSize:e.fontSize||14,fontColor:this.rgbaToHex(e.fontColor)||"rgba(255, 0, 0, 1)",textAlign:e.textAlign||"Center",isRepeat:e.isRepeat||!1,overlayText:e.overlayText||""}}return null},e.prototype.checkAllowedInteractions=function(e,t){return lh.call(this,t,e)},e.prototype.checkContextMenuDeleteItem=function(e){Zd.call(this,e)},e.prototype.isEnableDelete=function(){return Yd.call(this)},e.prototype.findCurrentAnnotation=function(){return nd.call(this)},e.prototype.updateAnnotationAllowedInteractions=function(e){return dh.call(this,e)},e.prototype.checkIsLockSettings=function(e){return xh.call(this,e)},e.prototype.checkLockSettings=function(e){return Ch.call(this,e)},e.prototype.restrictContextMenu=function(){return ld.call(this)},e.prototype.checkAllowedInteractionSettings=function(e,t){return bh.call(this,e,t)},e.prototype.getValue=function(e,t){return Lh.call(this,e,t)},e.prototype.convertRgbToNumberArray=function(e){return function(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map((function(e,t){return 3!==t?parseInt(e,10):parseFloat(e)}))}(e)},e.prototype.convertToRgbString=function(e){return e.length?4===e.length?"rgba("+e.join()+")":"rgb("+e.join()+")":""},e.prototype.convertToHsvString=function(e){return 4===e.length?"hsva("+e.join()+")":"hsv("+e.join()+")"},e.prototype.roundValue=function(e){return function(e){if(!e)return"";"#"!==e[0]&&(e="#"+e);var t=e.length;if(4===t&&(e+="f",t=5),5===t){for(var i="",n=1,o=e.length;n<o;n++)i+=e.charAt(n)+e.charAt(n);e="#"+i,t=9}return 7===t&&(e+="ff"),e}(e)},e.prototype.hexToRgb=function(e){return Fh.call(this,e)},e.prototype.rgbToHsv=function(e,t,i,n){return function(e,t,i,n){e/=255,t/=255,i/=255;var o,s=Math.max(e,t,i),a=Math.min(e,t,i),r=s,l=s-a,d=0===s?0:l/s;if(s===a)o=0;else{switch(s){case e:o=(t-i)/l+(t<i?6:0);break;case t:o=(i-e)/l+2;break;case i:o=(e-t)/l+4}o/=6}var h=[Math.round(360*o),Math.round(1e3*d)/10,Math.round(1e3*r)/10];return sf.base.isNullOrUndefined(n)||h.push(n),h}(e,t,i,n)},e.prototype.hsvToRgb=function(e,t,i,n){return function(e,t,i,n){var o,s,a;if(t/=100,0===(e/=100))return o=s=a=t,[Math.round(255*o),Math.round(255*s),Math.round(255*a),i];n/=60;var r=Math.floor(n),l=n-r,d=t*(1-e),h=t*(1-e*l),p=t*(1-e*(1-l));switch(r){case 0:o=t,s=p,a=d;break;case 1:o=h,s=t,a=d;break;case 2:o=d,s=t,a=p;break;case 3:o=d,s=h,a=t;break;case 4:o=p,s=d,a=t;break;default:o=t,s=d,a=h}var c=[Math.round(255*o),Math.round(255*s),Math.round(255*a)];return sf.base.isNullOrUndefined(i)||c.push(i),c}(t,i,n,e)},e.prototype.rgbToHex=function(e){return Oh.call(this,e)},e.prototype.exportAnnotationsAsStream=function(e){return jh.call(this,e)},e.prototype.hex=function(e){return function(e){return sf.base.isNullOrUndefined(e)?"0":("0"+e.toString(16)).slice(-2)}(e)},e.prototype.cloneObject=function(e){return JSON.parse(JSON.stringify(e))},e.prototype.destroy=function(){this.destroyPropertiesWindow(),this.textMarkupAnnotationModule.clear()},e.prototype.getModuleName=function(){return"Annotation"},e.prototype.getVertexPointsXY=function(e){return function(e){return e.map((function(e){return{X:e.x,Y:e.y}}))}(e)},e.prototype.addAnnotations=function(e){Xd.call(this,e)},e.prototype.deleteAnnotations=function(e){Gd.call(this,e)},e.prototype.addAnnotation=function(e,t,i,n,o){fl.call(this,e,t,i,n,o)},e.prototype.updateAddAnnotationProgramaticallyValue=function(){rd.call(this)},e.prototype.updateAnnotationCommentsDetails=function(e,t,i){return jl.call(this,e,t,i)},e.prototype.convertPropertyNamesToUpperCaseFirstLetter=function(e){return Gl.call(this,e)},e.prototype.triggerAnnotationAddEvent=function(e){Nd.call(this,e)},e.prototype.triggerAnnotationUnselectEvent=function(){Fd.call(this)},e.prototype.updateFontFamilyRenderSize=function(e,t){Rl.call(this,e,t)},e.prototype.updateCanvas=function(e,t,i,n){wh.call(this,e,t,i,n)},e.prototype.ShowToastMessage=function(e){fd.call(this,e)},e.prototype.focusComment=function(){_l.call(this)},e}(),Yh=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},Xh=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}},Gh=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderHyperlinkContent=function(e,t){if(this.pdfViewer.enableHyperlink){var i=e.hyperlinks,n=e.hyperlinkBounds;this.linkAnnotation=e.linkAnnotation,this.linkPage=e.linkPage,this.annotationY=e.annotationLocation,i&&i.length>0&&n.length>0&&this.renderWebLink(i,n,t,e.textWebLinkBorderWidth,e.textWebLinkBorderColor),this.linkAnnotation&&this.linkAnnotation.length>0&&this.linkPage.length>0&&this.renderDocumentLink(this.linkAnnotation,this.linkPage,this.annotationY,t,e.hyperLinkBorderWidth,e.hyperLinkBorderColor)}},e.prototype.disableHyperlinkNavigationUnderObjects=function(e,t,i){if(ye(i,i.pdfViewer,t).length>0)t.target.classList.contains("e-pv-hyperlink")&&(e.style.cursor="move",e.style.pointerEvents="none",e.title="");else{var n=document.getElementsByClassName("e-pv-hyperlink");if(n&&n.length>0)for(var o=0;o<n.length;o++)"none"===n[o].style.pointerEvents&&(n[o].style.pointerEvents="all"),n[o].title||(n[o].title=n[o].href)}},e.prototype.renderWebLink=function(e,t,i,n,o){for(var s=this,a=this,r=!1,l=function(l){var h=sf.base.createElement("a",{id:"weblinkdiv_"+l,attrs:{onblur:"this.style.boxShadow = ''"}});h.addEventListener("keyup",(function(e){"Tab"===e.key&&(h.style.boxShadow="0px 0px 0px 1px black")}));var p=t[l];if((h=d.setHyperlinkProperties(h,p,i,l,n,o,!0)).title=e[l],e[l]&&1===e[l].split("http").length){var c="http://"+e[l];h.setAttribute("href",c)}else h.setAttribute("href",e[l]);"CurrentTab"===d.pdfViewer.hyperlinkOpenState?(h.target="_self",h.onclick=function(t){return Yh(s,void 0,void 0,(function(){var i;return Xh(this,(function(n){switch(n.label){case 0:return r?[3,4]:(t.preventDefault(),a.pdfViewerBase.tool instanceof Rr||a.pdfViewerBase.tool instanceof Or?[2,!1]:[3,1]);case 1:return[4,a.pdfViewer.fireHyperlinkClick(e[l],h)];case 2:return(i=n.sent())&&(r=!0,h.click()),[2,i];case 3:return[3,5];case 4:return r=!1,[2,!0];case 5:return[2]}}))}))},h.onmouseover=function(){a.triggerHyperlinkEvent(h)}):"NewTab"===d.pdfViewer.hyperlinkOpenState?(h.target="_blank",h.onclick=function(t){return Yh(s,void 0,void 0,(function(){var i;return Xh(this,(function(n){switch(n.label){case 0:return r?[3,4]:(t.preventDefault(),a.pdfViewerBase.tool instanceof Rr||a.pdfViewerBase.tool instanceof Or?[2,!1]:[3,1]);case 1:return[4,a.pdfViewer.fireHyperlinkClick(e[l],h)];case 2:return(i=n.sent())&&(r=!0,h.click()),[2,i];case 3:return[3,5];case 4:return r=!1,[2,!0];case 5:return[2]}}))}))},h.onmouseover=function(){a.triggerHyperlinkEvent(h)}):"NewWindow"===d.pdfViewer.hyperlinkOpenState&&(h.onclick=function(t){return Yh(s,void 0,void 0,(function(){return Xh(this,(function(i){switch(i.label){case 0:return t.preventDefault(),a.pdfViewerBase.tool instanceof Rr||a.pdfViewerBase.tool instanceof Or?[2,!1]:[3,1];case 1:return[4,a.pdfViewer.fireHyperlinkClick(e[l],h)];case 2:return i.sent()&&window.open(h.href,"_blank","scrollbars=yes,resizable=yes"),[2,!1]}}))}))},h.onmouseover=function(){a.triggerHyperlinkEvent(h)});var u=document.getElementById(d.pdfViewer.dataId+"_pageDiv_"+i);sf.base.isNullOrUndefined(u)||u.appendChild(h)},d=this,h=0;h<e.length;h++)l(h)},e.prototype.triggerHyperlinkEvent=function(e){return!(this.pdfViewerBase.tool instanceof Rr||this.pdfViewerBase.tool instanceof Or)&&(this.pdfViewer.fireHyperlinkHover(e),!0)},e.prototype.renderDocumentLink=function(e,t,i,n,o,s){for(var a=this,r=function(r){var d=sf.base.createElement("a",{id:"linkdiv_"+r,attrs:{onblur:"this.style.boxShadow = ''"}});d.addEventListener("keyup",(function(e){"Tab"===e.key&&(d.style.boxShadow="0px 0px 0px 1px black")}));var h=e[r];if((d=l.setHyperlinkProperties(d,h,n,r,o,s,!1)).setAttribute("href","javascript:void(0)"),void 0!==t[r]&&t[r]>=0){var p=l.pdfViewerBase.pageSize[n].height,c=void 0,u=void 0,f=l.pdfViewerBase.pageSize[t[r]];f&&(0!==i.length?(c=i[r],u=f.top*l.pdfViewerBase.getZoomFactor()+(p-c)*l.pdfViewerBase.getZoomFactor()):u=f.top*l.pdfViewerBase.getZoomFactor()),void 0!==u&&(d.name=u.toString(),d.onclick=function(){return a.pdfViewerBase.tool instanceof Rr||a.pdfViewerBase.tool instanceof Or||(a.pdfViewerBase.viewerContainer.scrollTop=parseInt(d.name,10)),!1});var m=document.getElementById(l.pdfViewer.dataId+"_pageDiv_"+n);sf.base.isNullOrUndefined(m)||m.appendChild(d)}else{m=document.getElementById(l.pdfViewer.dataId+"_pageDiv_"+n);sf.base.isNullOrUndefined(m)||m.appendChild(d)}},l=this,d=0;d<e.length;d++)r(d)},e.prototype.setHyperlinkProperties=function(e,t,i,n,o,s,a){return e.className="e-pv-hyperlink",e.style.background="transparent",e.style.position="absolute",e.style.left=t.Left*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=t.Top*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t.Width*this.pdfViewerBase.getZoomFactor()+"px",t.Height<0?(e.style.height=-t.Height*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(t.Top+t.Height)*this.pdfViewerBase.getZoomFactor()+"px"):e.style.height=(t.Height<0?-t.Height:t.Height)*this.pdfViewerBase.getZoomFactor()+"px",e.style.color="transparent",a||null==o||null==s||null==s[n]||(e.style.border=o[n]+"px solid rgb("+s[n].R+", "+s[n].G+", "+s[n].B+")"),a&&null!=o&&null!=o&&null!=s[n]&&(e.style.border=o[n]+"px solid rgb("+s[n].R+", "+s[n].G+", "+s[n].B+")"),this.pdfViewerBase.applyElementStyles(e,i),e},e.prototype.modifyZindexForTextSelection=function(e,t){if(this.pdfViewerBase.pageCount>0){var i=this.pdfViewerBase.getElement("_pageDiv_"+e);if(i)for(var n=i.childNodes,o=0;o<n.length;o++){var s=n[o];"A"===s.tagName&&(t?s.classList.add("e-pv-onselection"):s.classList.remove("e-pv-onselection"))}}},e.prototype.modifyZindexForHyperlink=function(e,t){t?e.classList.add("e-pv-onselection"):e.classList.remove("e-pv-onselection")},e.prototype.destroy=function(){for(var e=0;e<this.pdfViewerBase.pageCount-1;e++){var t=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+e);if(t){var i=t.getElementsByTagName("a");if(0!==i.length)for(var n=i.length-1;n>=0;n--)i[n].parentNode.removeChild(i[n])}}},e.prototype.getModuleName=function(){return"LinkAnnotation"},e}(),Jh=function(){function e(e,t){var i=this;this.currentTextMarkupAddMode="",this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null,this.isAddAnnotationProgramatically=!1,this.currentAnnotationIndex=null,this.isAnnotationSelect=!1,this.isDropletClicked=!1,this.isRightDropletClicked=!1,this.isLeftDropletClicked=!1,this.isSelectionMaintained=!1,this.isExtended=!1,this.isNewAnnotation=!1,this.selectedTextMarkup=null,this.multiPageCollection=[],this.triggerAddEvent=!1,this.isSelectedAnnotation=!1,this.dropletHeight=20,this.annotationClickPosition={},this.maintainSelection=function(e){i.isDropletClicked=!0,i.pdfViewer.textSelectionModule.initiateSelectionByTouch(),i.isExtended=!0,i.pdfViewer.textSelectionModule.selectionRangeArray=[]},this.selectionEnd=function(e){i.isDropletClicked&&(i.isDropletClicked=!1)},this.annotationLeftMove=function(e){i.isDropletClicked&&(i.isLeftDropletClicked=!0)},this.annotationRightMove=function(e){i.isDropletClicked&&(i.isRightDropletClicked=!0)},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createAnnotationSelectElement=function(){this.dropDivAnnotationLeft=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_droplet_left",className:"e-pv-drop"}),this.dropDivAnnotationLeft.style.borderRight="2px solid",this.dropDivAnnotationRight=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_droplet_right",className:"e-pv-drop"}),this.dropDivAnnotationRight.style.borderLeft="2px solid",this.dropElementLeft=sf.base.createElement("div",{className:"e-pv-droplet",id:this.pdfViewer.dataId+"_dropletspan_left"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivAnnotationLeft.appendChild(this.dropElementLeft),this.dropElementRight=sf.base.createElement("div",{className:"e-pv-droplet",id:this.pdfViewer.dataId+"_dropletspan_right"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropDivAnnotationRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivAnnotationRight),this.dropElementLeft.style.top="20px",this.dropElementRight.style.top="20px",this.dropElementRight.style.left="-8px",this.dropElementLeft.style.left="-8px",this.dropDivAnnotationLeft.style.display="none",this.dropDivAnnotationRight.style.display="none",this.dropDivAnnotationLeft.addEventListener("mousedown",this.maintainSelection),this.dropDivAnnotationLeft.addEventListener("mousemove",this.annotationLeftMove),this.dropDivAnnotationLeft.addEventListener("mouseup",this.selectionEnd),this.dropDivAnnotationRight.addEventListener("mousedown",this.maintainSelection),this.dropDivAnnotationRight.addEventListener("mousemove",this.annotationRightMove),this.dropDivAnnotationRight.addEventListener("mouseup",this.selectionEnd)},e.prototype.textSelect=function(e,t,i){if(this.isLeftDropletClicked){var n=this.dropDivAnnotationRight.getBoundingClientRect(),o=this.dropDivAnnotationLeft.getBoundingClientRect(),s=t,a=i;e.classList.contains("e-pv-text")&&(o.top-25>n.top?this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,s,a,!0):this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,s,a,!1),this.updateLeftposition(s,a))}else if(this.isRightDropletClicked){n=this.dropDivAnnotationLeft.getBoundingClientRect(),s=t,a=i;e.classList.contains("e-pv-text")&&(a>=n.top?this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,s,a,!0):this.pdfViewer.textSelectionModule.textSelectionOnDrag(e,s,a,!1),this.updatePosition(s,a))}},e.prototype.showHideDropletDiv=function(e){var t=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode;this.isEnableTextMarkupResizer(t)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationRight&&(e?(this.dropDivAnnotationLeft.style.display="none",this.dropDivAnnotationRight.style.display="none"):(this.dropDivAnnotationLeft.style.display="",this.dropDivAnnotationRight.style.display="",this.updateDropletStyles(t)))},e.prototype.isEnableTextMarkupResizer=function(e){var t=!1;return e?("Highlight"===e&&this.pdfViewer.highlightSettings.enableTextMarkupResizer||"Underline"===e&&this.pdfViewer.underlineSettings.enableTextMarkupResizer||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.enableTextMarkupResizer||"Squiggly"===e&&this.pdfViewer.squigglySettings.enableTextMarkupResizer||this.pdfViewer.enableTextMarkupResizer)&&(t=!0):(this.pdfViewer.enableTextMarkupResizer||this.pdfViewer.highlightSettings.enableTextMarkupResizer||this.pdfViewer.underlineSettings.enableTextMarkupResizer||this.pdfViewer.strikethroughSettings.enableTextMarkupResizer||this.pdfViewer.squigglySettings.enableTextMarkupResizer)&&(t=!0),t},e.prototype.updateDropletStyles=function(e){this.isEnableTextMarkupResizer(e)&&this.dropDivAnnotationLeft&&this.dropDivAnnotationLeft.offsetWidth>0&&(this.dropDivAnnotationLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.width=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropDivAnnotationRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.height=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementLeft.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px",this.dropElementRight.style.top=this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px")},e.prototype.updateAnnotationBounds=function(){this.isSelectionMaintained=!1;var e=this.currentTextMarkupAnnotation;if(e&&e.isMultiSelect)this.showHideDropletDiv(!0),this.updateMultiAnnotBounds(e);else if(e&&e.bounds){var t=!0;document.activeElement&&"INPUT"===document.activeElement.tagName&&(t=!1),t&&(this.retreieveSelection(e,null),this.pdfViewer.textSelectionModule.maintainSelection(this.selectTextMarkupCurrentPage,!1),this.isSelectionMaintained=!0,window.getSelection().removeAllRanges())}},e.prototype.updateMultiAnnotBounds=function(e){if(!e.annotpageNumbers&&(r=this.getAnnotations(e.pageNumber,null)))for(var t=0;t<r.length;t++)if(r[t].annotName===e.annotName){e=r[t];break}for(var i=e.annotpageNumbers[0],n=e.annotpageNumbers[0],o=0;o<e.annotpageNumbers.length;o++){var s=e.annotpageNumbers[o];s>=n&&(n=s),s<=i&&(i=s)}for(var a=i;a<=n;a++){var r;if(r=this.getAnnotations(a,null))for(var l=0;l<e.annotNameCollection.length;l++){var d=e.annotNameCollection[l];for(t=0;t<r.length;t++)if(r[t].annotName===d){var h=r[t];this.retreieveSelection(h,null),this.pdfViewer.textSelectionModule.maintainSelection(h.pageNumber,!1)}}}this.isSelectionMaintained=!0,window.getSelection().removeAllRanges()},e.prototype.retreieveSelection=function(e,t){for(var i=0;i<e.bounds.length;i++){var n=e.bounds[i],o=(n.left?n.left:n.Left)*this.pdfViewerBase.getZoomFactor(),s=(n.top?n.top:n.Top)*this.pdfViewerBase.getZoomFactor(),a=(n.width?n.width:n.Width)*this.pdfViewerBase.getZoomFactor(),r=(n.height?n.height:n.Height,this.pdfViewerBase.getElement("_textLayer_"+e.pageNumber));if(r){for(var l=r.childNodes,d=0;d<l.length;d++)if(l[d]){var h=l[d].getBoundingClientRect(),p=this.getClientValueTop(h.top,e.pageNumber),c=h.left-this.pdfViewerBase.getElement("_pageDiv_"+e.pageNumber).getBoundingClientRect().left,u=c+h.width,f=parseInt(l[d].style.left,10),m=parseInt(l[d].style.top,10),g=this.pdfViewer.textSelectionModule.checkLeftBounds(c,f,u,o),w=this.pdfViewer.textSelectionModule.checkTopBounds(p,m,s);if(g&&w){t=l[d];break}}if(null!=t){var y=this.pdfViewerBase.getElement("_textLayer_"+e.pageNumber).getBoundingClientRect();this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(t,o+y.left,s+y.top,!1),e.bounds.length-1===i&&this.pdfViewer.textSelectionModule.textSelectionOnMouseMove(t,o+y.left+a,s+y.top,!1)}}}},e.prototype.updatePosition=function(e,t,i){this.showHideDropletDiv(!1);var n=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,o=this.getClientValueTop(t,this.pdfViewerBase.currentPageNumber-1),s=document.getElementById(this.pdfViewer.dataId+"_droplet_right");s.style.top=i?o*this.pdfViewerBase.getZoomFactor()+n*this.pdfViewerBase.getZoomFactor()+"px":o+n*this.pdfViewerBase.getZoomFactor()+"px",s.style.left=e+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left+"px"},e.prototype.updateLeftposition=function(e,t,i){this.showHideDropletDiv(!1);var n=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,o=this.getClientValueTop(t,this.pdfViewerBase.currentPageNumber-1),s=document.getElementById(this.pdfViewer.dataId+"_droplet_left");s.style.display="",s.style.top=i?o*this.pdfViewerBase.getZoomFactor()+n*this.pdfViewerBase.getZoomFactor()+"px":o+n*this.pdfViewerBase.getZoomFactor()+"px",s.style.left=e+this.pdfViewerBase.viewerContainer.scrollLeft-this.pdfViewerBase.viewerContainer.getBoundingClientRect().left-this.dropletHeight*this.pdfViewerBase.getZoomFactor()+"px"},e.prototype.getClientValueTop=function(e,t){return this.pdfViewerBase.getElement("_pageDiv_"+t)?e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top:e},e.prototype.renderTextMarkupAnnotationsInPage=function(e,t,i){var n=this.pdfViewerBase.getElement("_annotationCanvas_"+t);i?(this.renderTextMarkupAnnotations(null,t,n,this.pdfViewerBase.getZoomFactor()),this.renderTextMarkupAnnotations(e,t,n,this.pdfViewerBase.getZoomFactor(),!0)):this.renderTextMarkupAnnotations(e,t,n,this.pdfViewerBase.getZoomFactor())},e.prototype.renderTextMarkupAnnotations=function(e,t,i,n,o){if(i){var s=i.getContext("2d");s.setTransform(1,0,0,1,0,0),s.setLineDash([]);var a=void 0;if(a=o?e:this.getAnnotations(t,e))for(var r=0;r<a.length;r++){var l=a[r],d=null,h=void 0;if(l.TextMarkupAnnotationType){if(o&&!l.isAlreadyAdded&&this.pdfViewerBase.isJsonImported){for(var p=[],c=0;c<l.Bounds.length;c++)l.Bounds[c]=this.pdfViewerBase.importJsonForRotatedDocuments(l.Rotate,t,l.Bounds[c],l.AnnotationRotation),l.Bounds[c].left=l.Bounds[c].X,l.Bounds[c].top=l.Bounds[c].Y,p.push(l.Bounds[c]);l.Bounds=p,h=this.pdfViewerBase.isPageRotated}l.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(l,t,l.AnnotType),l.Author||(l.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("textMarkup",l.TextMarkupAnnotationType)),l.Subject||(l.Subject=l.TextMarkupAnnotationType),l.AnnotationSettings?l.AnnotationSettings={isLock:l.AnnotationSettings.isLock}:l.AnnotationSettings=this.getAnnotationSettings(l.TextMarkupAnnotationType),sf.base.isNullOrUndefined(l.IsLock)||!l.AnnotationSettings||l.AnnotationSettings.isLock||(l.AnnotationSettings.isLock=l.IsLock);var u=!0;if(u=sf.base.isNullOrUndefined(l.IsPrint)?this.getIsPrintValue(l.TextMarkupAnnotationType):l.IsPrint,l.allowedInteractions=l.AllowedInteractions?l.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(l),d={textMarkupAnnotationType:l.TextMarkupAnnotationType,color:l.Color,allowedInteractions:l.allowedInteractions,opacity:l.Opacity,bounds:l.Bounds,author:l.Author,subject:l.Subject,modifiedDate:l.ModifiedDate,note:l.Note,rect:l.Rect,annotName:l.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(l.Comments,l,l.Author),review:{state:l.State,stateModel:l.StateModel,modifiedDate:l.ModifiedDate,author:l.Author},shapeAnnotationType:"textMarkup",pageNumber:t,textMarkupContent:l.TextMarkupContent,textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(l),customData:this.pdfViewer.annotation.getCustomData(l),annotationAddMode:l.annotationAddMode,annotationSettings:l.AnnotationSettings,isPrint:u,isLocked:l.IsLock,isCommentLock:l.IsCommentLock,isAnnotationRotated:h,annotationRotation:l.AnnotationRotation},l.IsMultiSelect&&(d.annotNameCollection=l.AnnotNameCollection,d.annotpageNumbers=l.AnnotpageNumbers,d.isMultiSelect=l.IsMultiSelect),l.textMarkupContent&&""!==l.textMarkupContent&&(d.textMarkupContent=l.textMarkupContent,d.textMarkupStartIndex=l.textMarkupStartIndex,d.textMarkupEndIndex=l.textMarkupEndIndex),this.pdfViewer.annotationModule.storeAnnotations(t,d,"_annotations_textMarkup"),this.isAddAnnotationProgramatically){var f={opacity:d.opacity,author:l.author,subject:l.subject,modifiedDate:l.modifiedDate?l.modifiedDate:l.ModifiedDate,width:d.bounds.width,height:d.bounds.height};this.pdfViewer.fireAnnotationAdd(d.pageNumber,d.annotName,l.TextMarkupAnnotationType,d.bounds,f)}}var m=l.TextMarkupAnnotationType?l.TextMarkupAnnotationType:l.textMarkupAnnotationType,g=l.Bounds?l.Bounds:l.bounds,w=sf.base.isNullOrUndefined(l.Opacity)?l.opacity:l.Opacity,y=l.Color?l.Color:l.color,v=l.AnnotationRotation?l.AnnotationRotation:l.annotationRotation;sf.base.isNullOrUndefined(l.IsLock)||(l.AnnotationSettings.isLock=l.IsLock);var b=!0;switch(l.TextMarkupAnnotationType&&(b=l.IsPrint),l.textMarkupAnnotationType&&(b=l.isPrint),m){case"Highlight":this.renderHighlightAnnotation(g,w,y,s,n,b,t);break;case"Strikethrough":this.renderStrikeoutAnnotation(g,w,y,s,n,t,b,v);break;case"Squiggly":this.renderSquigglyAnnotation(g,w,y,s,n,t,b,v);break;case"Underline":this.renderUnderlineAnnotation(g,w,y,s,n,t,b,v)}}var S=!1;if(this.currentTextMarkupAnnotation&&this.currentTextMarkupAnnotation.annotpageNumbers)for(var A=0;A<this.currentTextMarkupAnnotation.annotpageNumbers.length;A++)if(t===this.currentTextMarkupAnnotation.annotpageNumbers[A]){S=!0,this.isAnnotationSelect=!1;break}(t===this.selectTextMarkupCurrentPage||S)&&(this.isAnnotationSelect?this.isAnnotationSelect=!1:this.maintainAnnotationSelection())}},e.prototype.getSettings=function(e){return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.TextMarkupAnnotationType)},e.prototype.drawTextMarkupAnnotations=function(e){this.isTextMarkupAnnotationMode=!0,this.currentTextMarkupAddMode=e;var t=!0;this.multiPageCollection=[];var i=this.pdfViewer.textSelectionModule?this.pdfViewer.textSelectionModule.selectionRangeArray:[];i.length>0&&!this.isSelectionMaintained&&this.convertSelectionToTextMarkup(e,i,this.pdfViewerBase.getZoomFactor());var n,o=window.getSelection();if(o&&o.anchorNode&&(n=o.anchorNode.parentElement),this.isEnableTextMarkupResizer(e)&&this.isExtended&&window.getSelection().toString()){if((l=this.getDrawnBounds())[0]&&l[0].bounds)for(var s=this.currentTextMarkupAnnotation,a=0;a<l.length;a++)if(s&&s.pageNumber===l[a].pageIndex)this.currentTextMarkupAnnotation=s,this.selectTextMarkupCurrentPage=l[a].pageIndex,this.updateTextMarkupAnnotationBounds(l,a);else if(s&&""===e&&(e=s.textMarkupAnnotationType),s.isMultiSelect)s.isMultiSelect&&s.annotNameCollection&&this.modifyCurrentAnnotation(s,l,a);else{var r=!1;this.isMultiAnnotation(e)&&(this.multiPageCollection.push(s),r=!0),this.drawTextMarkups(e,l[a].bounds,l[a].pageIndex,l[a].rect,this.pdfViewerBase.getZoomFactor(),l[a].textContent,l[a].startIndex,l[a].endIndex,r,n)}}else if(window.getSelection().toString()){var l=this.getDrawnBounds();r=this.isMultiPageAnnotations(l,e);if(l.length>0)for(var d=0;d<l.length;d++)""===e&&(t=!1),this.drawTextMarkups(e,l[d].bounds,l[d].pageIndex,l[d].rect,this.pdfViewerBase.getZoomFactor(),l[d].textContent,l[d].startIndex,l[d].endIndex,r,n)}if(this.multiPageCollection)for(var h=0;h<this.multiPageCollection.length;h++)this.updateAnnotationNames(this.multiPageCollection[h],this.multiPageCollection[h].pageNumber);this.isExtended=!1,this.isSelectionMaintained=!1,t&&this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.isEnableTextMarkupResizer(e)&&this.updateAnnotationBounds()},e.prototype.isMultiPageAnnotations=function(e,t){for(var i=!1,n=0;n<e.length;n++)if(e[n].pageIndex!==e[0].pageIndex&&this.isMultiAnnotation(t)){i=!0;break}return i},e.prototype.isMultiAnnotation=function(e){var t=!1;return("Highlight"===e&&this.pdfViewer.highlightSettings.enableMultiPageAnnotation||"Underline"===e&&this.pdfViewer.underlineSettings.enableMultiPageAnnotation||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.enableMultiPageAnnotation||"Squiggly"===e&&this.pdfViewer.squigglySettings.enableMultiPageAnnotation||this.pdfViewer.enableMultiPageAnnotation)&&(t=!0),t},e.prototype.modifyCurrentAnnotation=function(e,t,i){for(var n=0;n<e.annotNameCollection.length;n++){var o=e.annotNameCollection[n],s=this.getAnnotations(t[i].pageIndex,null);if(s)for(var a=0;a<s.length;a++)if(s[a].annotName===o){this.currentTextMarkupAnnotation=s[a],this.selectTextMarkupCurrentPage=t[i].pageIndex,this.updateTextMarkupAnnotationBounds(t,i);break}}},e.prototype.drawAnnotationSelector=function(e,t,i){for(var n=0;n<e.bounds.length;n++){var o=e.bounds[n],s=o.left?o.left:o.Left,a=o.top?o.top:o.Top,r=o.width?o.width:o.Width,l=o.height?o.height:o.Height;i||(i=this.pdfViewerBase.getElement("_annotationCanvas_"+e.pageNumber)),this.drawAnnotationSelectRect(i,this.getMagnifiedValue(s-.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(a-.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(r+.5,this.pdfViewerBase.getZoomFactor()),this.getMagnifiedValue(l+.5,this.pdfViewerBase.getZoomFactor()),t)}},e.prototype.selectMultiPageAnnotations=function(e){for(var t=0;t<e.annotNameCollection.length;t++){var i=e.annotNameCollection[t];if(i!==e.annotName)for(var n=0;n<e.annotpageNumbers.length;n++){var o=e.annotpageNumbers[n],s=this.getAnnotations(o,null);if(s)for(var a=0;a<s.length;a++)if(s[a].annotName===i){var r=s[a];this.drawAnnotationSelector(r,e)}}}},e.prototype.deletMultiPageAnnotation=function(e){for(var t=0;t<e.annotNameCollection.length;t++){var i=e.annotNameCollection[t];if(i!==e.annotName)for(var n=0;n<e.annotpageNumbers.length;n++){var o=e.annotpageNumbers[n],s=this.getAnnotations(o,null);if(s)for(var a=0;a<s.length;a++)if(s[a].annotName===i){var r,l=s[a];r=s.splice(a,1)[0],this.pdfViewer.annotationModule.addAction(o,a,r,"Text Markup Deleted",null),this.currentAnnotationIndex=a,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(r,"textMarkup");var d=document.getElementById(r.annotName);d&&1!==d.parentElement.childElementCount&&d.remove(),this.pdfViewer.annotationModule.updateAnnotationCollection(l),this.manageAnnotations(s,o),this.pdfViewer.annotationModule.updateImportAnnotationCollection(l,l.pageNumber,"textMarkupAnnotation");l.annotName,l.bounds;this.pdfViewer.annotationModule.renderAnnotations(o,null,null,null,null)}}}},e.prototype.modifyMultiPageAnnotations=function(e,t,i){for(var n=0;n<e.annotNameCollection.length;n++){var o=e.annotNameCollection[n];if(o!==e.annotName)for(var s=0;s<e.annotpageNumbers.length;s++){var a=e.annotpageNumbers[s],r=this.getAnnotations(a,null);if(r)for(var l=0;l<r.length;l++)r[l].annotName===o&&("Color"===t?r[l].color=i:r[l].opacity=i,r[l].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentAnnotationIndex=l,null!==status&&"changed"!==status||this.pdfViewer.annotationModule.addAction(r[l].pageNumber,l,r[l],"Text Markup Property modified",t),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(r[l]),this.manageAnnotations(r,a),this.pdfViewer.annotationModule.renderAnnotations(a,null,null,null,null))}}},e.prototype.convertSelectionToTextMarkup=function(e,t,i){var n=!1;this.triggerAddEvent=!1,this.multiPageCollection=[];for(var o=0;o<t.length;o++){var s=t[o].textContent,a=void 0;if(t[o].startNode===t[o].endNode){var r=document.getElementById(t[o].startNode).textContent;a=this.getIndexNumbers(t[o].pageNumber,s,r)}else a=this.getIndexNumbers(t[o].pageNumber,s);if(!n)for(var l=1;l<t.length;l++)if(t[l].pageNumber!==t[0].pageNumber&&this.isMultiAnnotation(e)){n=!0;break}this.isMultiAnnotation(e)&&t.length-1===o&&(this.triggerAddEvent=!0),this.drawTextMarkups(e,t[o].rectangleBounds,t[o].pageNumber,t[o].bound,i,s,a.startIndex,a.endIndex,n,document.getElementById(t[o].startNode))}},e.prototype.updateTextMarkupAnnotationBounds=function(e,t){if(this.currentTextMarkupAnnotation){var i=this.getAnnotations(e[t].pageIndex,null),n=null;if(i){for(var o=0;o<i.length;o++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[o])&&(i[o].bounds=e[t].bounds,i[o].textMarkupContent=e[t].textContent,i[o].textMarkupStartIndex=e[t].startIndex,i[o].textMarkupEndIndex=e[t].endIndex,i[o].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=i[o]);if(this.manageAnnotations(i,e[t].pageIndex),this.currentTextMarkupAnnotation=null,this.pdfViewer.annotationModule.renderAnnotations(e[t].pageIndex,null,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0),n){var s={opacity:n.opacity,color:n.color,author:n.author,subject:n.subject,modifiedDate:n.modifiedDate},a=this.multiPageCollectionList(n);a.length>0?e.length-1===t&&this.pdfViewer.fireAnnotationResize(e[t].pageIndex,n.annotName,n.textMarkupAnnotationType,n.bounds,s,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,null,a):this.pdfViewer.fireAnnotationResize(e[t].pageIndex,n.annotName,n.textMarkupAnnotationType,n.bounds,s,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,null)}this.currentAnnotationIndex=null,this.selectTextMarkupCurrentPage=null}}},e.prototype.multiPageCollectionList=function(e){var t=[];if(e.isMultiSelect&&e.annotNameCollection){t.push(e);for(var i=0;i<e.annotNameCollection.length;i++){var n=e.annotNameCollection[i];if(n!==e.annotName)for(var o=0;o<e.annotpageNumbers.length;o++){var s=e.annotpageNumbers[o],a=this.getAnnotations(s,null);if(a)for(var r=0;r<a.length;r++)a[r].annotName===n&&t.push(a[r])}}}return t},e.prototype.updateAnnotationNames=function(e,t){if(e){var i=this.getAnnotations(t,null);if(i){for(var n=0;n<i.length;n++)if(e.annotName===i[n].annotName){for(var o=[],s=[],a=0;a<this.multiPageCollection.length;a++)o.push(this.multiPageCollection[a].annotName),s.push(this.multiPageCollection[a].pageNumber);i[n].isMultiSelect=!0,i[n].annotNameCollection=o,i[n].annotpageNumbers=s,i[n]}this.manageAnnotations(i,t)}}},e.prototype.updateAnnotationContent=function(e,t){if(e){var i=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(i){for(var n=0;n<i.length;n++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[n])&&(i[n].textMarkupContent=t.textContent,i[n].textMarkupStartIndex=t.startIndex,i[n].textMarkupEndIndex=t.endIndex,i[n]),this.pdfViewer.annotationModule.storeAnnotationCollections(i[n],this.selectTextMarkupCurrentPage);this.manageAnnotations(i,this.selectTextMarkupCurrentPage)}}},e.prototype.drawTextMarkups=function(e,t,i,n,o,s,a,r,l,d){var h=null;this.isNewAnnotation=!1;var p,c,u="Guest",f=this.getPageContext(i),m=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.highlightColor=this.highlightColor?this.highlightColor:this.pdfViewer.highlightSettings.color?this.pdfViewer.highlightSettings.color:"#ffff00",this.underlineColor=this.underlineColor?this.underlineColor:this.pdfViewer.underlineSettings.color?this.pdfViewer.underlineSettings.color:"#00ff00",this.strikethroughColor=this.strikethroughColor?this.strikethroughColor:this.pdfViewer.strikethroughSettings.color?this.pdfViewer.strikethroughSettings.color:"#ff0000",this.squigglyColor=this.squigglyColor?this.squigglyColor:this.pdfViewer.squigglySettings.color?this.pdfViewer.squigglySettings.color:"#00ff00",this.highlightOpacity=this.highlightOpacity?this.highlightOpacity:this.pdfViewer.highlightSettings.opacity?this.pdfViewer.highlightSettings.opacity:1,this.underlineOpacity=this.underlineOpacity?this.underlineOpacity:this.pdfViewer.underlineSettings.opacity?this.pdfViewer.underlineSettings.opacity:1,this.strikethroughOpacity=this.strikethroughOpacity?this.strikethroughOpacity:this.pdfViewer.strikethroughSettings.opacity?this.pdfViewer.strikethroughSettings.opacity:1,this.squigglyOpacity=this.squigglyOpacity?this.squigglyOpacity:this.pdfViewer.squigglySettings.opacity?this.pdfViewer.squigglySettings.opacity:1,this.annotationAddMode="UI Drawn Annotation";var g=this.pdfViewerBase.pageSize[i],w=0,y=this.getAngle(g.rotation);if(f){switch(f.setLineDash([]),e){case"Highlight":this.isNewAnnotation=!0,p="Highlight",u="Guest"!==this.pdfViewer.highlightSettings.author&&this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",c=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:"None",(h=this.getAddedAnnotation(e,this.highlightColor,this.highlightOpacity,t,u,p,m,"",!1,n,i,s,a,r,l,c,w))&&this.renderHighlightAnnotation(h.bounds,h.opacity,h.color,f,o,h.isPrint,i),this.currentTextMarkupAnnotation=h,this.selectTextMarkupCurrentPage=i,this.drawAnnotationSelector(h,h,f.canvas);break;case"Strikethrough":this.isNewAnnotation=!0,p="Strikethrough",u="Guest"!==this.pdfViewer.strikethroughSettings.author&&this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",c=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:"None",d&&""!==d.style.transform&&(w=d.style.transform.startsWith("rotate(90deg)")?Math.abs(y-90):d.style.transform.startsWith("rotate(180deg)")?Math.abs(y-180):d.style.transform.startsWith("rotate(-90deg)")?Math.abs(y-270):y),(h=this.getAddedAnnotation(e,this.strikethroughColor,this.strikethroughOpacity,t,u,p,m,"",!1,n,i,s,a,r,l,c,w))&&this.renderStrikeoutAnnotation(h.bounds,h.opacity,h.color,f,o,i,h.isPrint,h.annotationRotation),this.currentTextMarkupAnnotation=h,this.selectTextMarkupCurrentPage=i,this.drawAnnotationSelector(h,h,f.canvas);break;case"Squiggly":this.isNewAnnotation=!0,p="Squiggly",u="Guest"!==this.pdfViewer.squigglySettings.author&&this.pdfViewer.squigglySettings.author?this.pdfViewer.squigglySettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",c=this.pdfViewer.squigglySettings.allowedInteractions?this.pdfViewer.squigglySettings.allowedInteractions:"None",d&&""!==d.style.transform&&(w=d.style.transform.startsWith("rotate(90deg)")?Math.abs(y-90):d.style.transform.startsWith("rotate(180deg)")?Math.abs(y-180):d.style.transform.startsWith("rotate(-90deg)")?Math.abs(y-270):y),(h=this.getAddedAnnotation(e,this.squigglyColor,this.squigglyOpacity,t,u,p,m,"",!1,n,i,s,a,r,l,c,w))&&this.renderSquigglyAnnotation(h.bounds,h.opacity,h.color,f,o,i,h.isPrint,h.annotationRotation),this.currentTextMarkupAnnotation=h,this.selectTextMarkupCurrentPage=i,this.drawAnnotationSelector(h,h,f.canvas);break;case"Underline":this.isNewAnnotation=!0,p="Underline",u="Guest"!==this.pdfViewer.underlineSettings.author&&this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest",c=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:"None",d&&""!==d.style.transform&&(w=d.style.transform.startsWith("rotate(90deg)")?Math.abs(y-90):d.style.transform.startsWith("rotate(180deg)")?Math.abs(y-180):d.style.transform.startsWith("rotate(-90deg)")?Math.abs(y-270):y),(h=this.getAddedAnnotation(e,this.underlineColor,this.underlineOpacity,t,u,p,m,"",!1,n,i,s,a,r,l,c,w))&&this.renderUnderlineAnnotation(h.bounds,h.opacity,h.color,f,o,i,h.isPrint,h.annotationRotation),this.currentTextMarkupAnnotation=h,this.selectTextMarkupCurrentPage=i,this.drawAnnotationSelector(h,h,f.canvas)}if(this.isNewAnnotation=!1,h){this.pdfViewerBase.updateDocumentEditedProperty(!0);var v={opacity:h.opacity,color:h.color,author:h.author,subject:h.subject,modifiedDate:h.modifiedDate,isLocked:h.isLocked};this.pdfViewer.annotationModule.actionCollection[this.pdfViewer.annotationModule.actionCollection.length-1].index;this.isMultiAnnotation(e)?this.triggerAddEvent&&this.pdfViewer.fireAnnotationAdd(i,h.annotName,e,h.bounds,v,s,a,r,null,this.multiPageCollection):this.pdfViewer.fireAnnotationAdd(i,h.annotName,e,h.bounds,v,s,a,r)}}},e.prototype.getAngle=function(e){var t=0;if(e)switch(e){case 0:t=0;break;case 1:t=90;break;case 2:t=180;break;case 3:t=270}return t},e.prototype.retreiveTextIndex=function(e){if(""===e.textMarkupContent){this.retreieveSelection(e,null);var t=this.getDrawnBounds();window.getSelection().removeAllRanges(),t[0]&&t[0].bounds&&(this.updateAnnotationContent(e,t[0]),e.textMarkupContent=t[0].textContent,e.textMarkupStartIndex=t[0].startIndex,e.textMarkupEndIndex=t[0].endIndex)}return e},e.prototype.renderHighlightAnnotation=function(e,t,i,n,o,s,a){for(var r=this.pdfViewerBase.getZoomRatio(o),l=0;l<e.length;l++){var d=e[l];n.beginPath();var h=d.X?d.X:d.left,p=d.Y?d.Y:d.top,c=d.Width?d.Width:d.width,u=d.Height?d.Height:d.height,f=d.Rotation?d.Rotation:d.rotation;h=h||d.x,p=p||d.y,f>=0&&(f=Math.abs(f)/90),2===f?u-=1:1!==f&&3!==f||(c-=1),n.canvas.id===this.pdfViewer.dataId+"_print_annotation_layer_"+a?s&&(n.rect(h*r,p*r,c*r,u*r),n.globalAlpha=.5*t,n.closePath(),n.fillStyle=i,n.msFillRule="nonzero",n.fill()):(n.rect(h*r,p*r,c*r,u*r),n.globalAlpha=.5*t,n.closePath(),n.fillStyle=i,n.msFillRule="nonzero",n.fill(),n.globalAlpha=1)}n.save()},e.prototype.renderStrikeoutAnnotation=function(e,t,i,n,o,s,a,r){for(var l=0;l<e.length;l++){var d=this.getProperBounds(e[l]),h=this.pdfViewerBase.pageSize[s],p=this.pdfViewerBase.getZoomRatio(o),c=h.rotation;e[l].rotation&&(c=Math.abs(e[l].rotation)/90),n.canvas.id===this.pdfViewer.element.id+"_print_annotation_layer_"+s?a&&(1===c?this.drawLine(t,d.x+d.width/2,d.y,d.width,d.height,i,p,n,s,e[l].rotation):2===c?this.drawLine(t,d.x,d.y+d.height/2,d.width,d.height,i,p,n,s,e[l].rotation):3===c?this.drawLine(t,d.x,d.y,d.width/2,d.height,i,p,n,s,e[l].rotation):this.drawLine(t,d.x,d.y,d.width,d.height/2,i,p,n,s,e[l].rotation)):1===c?this.drawLine(t,d.x+d.width/2,d.y,d.width,d.height,i,p,n,s,e[l].rotation):2===c?this.drawLine(t,d.x,d.y+d.height/2,d.width,d.height,i,p,n,s,e[l].rotation):3===c?this.drawLine(t,d.x,d.y,d.width/2,d.height,i,p,n,s,e[l].rotation):this.drawLine(t,d.x,d.y,d.width,d.height/2,i,p,n,s,e[l].rotation)}},e.prototype.renderSquigglyAnnotation=function(e,t,i,n,o,s,a,r){for(var l=0;l<e.length;l++){var d=this.getProperBounds(e[l]),h=this.pdfViewerBase.getZoomRatio(o);n.canvas.id===this.pdfViewer.dataId+"_print_annotation_layer_"+s?a&&this.drawSquiggly(t,d.x,d.y,d.width,d.height,i,h,n,s,e[l].rotation):this.drawSquiggly(t,d.x,d.y,d.width,d.height,i,h,n,s,e[l].rotation)}},e.prototype.drawSquiggly=function(e,t,i,n,o,s,a,r,l,d){r.globalAlpha=e,r.strokeStyle=s,r.lineWidth=.85*a,r.setLineDash([]),r.save();var h=t*a,p=i*a,c=n*a,u=o*a;r.beginPath(),r.rect(h,p,c,u),r.clip();var f=this.pdfViewerBase.pageSize[l].rotation;d>=0&&(f=Math.abs(d)/90);var m,g,w,y,v=0,b=0;if(a>=1?0===f||2===f?(v=Math.max(3.75,.13*o*a),b=Math.max(4,.15*o*a)):1!==f&&3!==f||(v=Math.max(3.75,.13*n*a),b=Math.max(4,.15*n*a)):0===f||2===f?(v=Math.max(.35,.13*o*a),b=Math.max(.5,.15*o*a)):1!==f&&3!==f||(v=Math.max(.35,.13*n*a),b=Math.max(.5,.15*n*a)),r.beginPath(),0===f)for(m=t*a,g=(i+o)*a,w=(t+n)*a,r.moveTo(m,g);m<w;)r.lineTo(m+v,g-b),m+=v,r.lineTo(m+v,g),m+=v;else if(1===f)for(m=t*a,g=i*a,y=(i+o)*a,r.moveTo(m,g);g<y;)r.lineTo(m+b,g+v),g+=v,r.lineTo(m,g+v),g+=v;else if(2===f)for(m=(t+n)*a,g=i*a,w=t*a,r.moveTo(m,g);m>w;)r.lineTo(m-v,g+b),m-=v,r.lineTo(m-v,g),m-=v;else if(3===f)for(m=(t+n)*a,g=(i+o)*a,y=i*a,r.moveTo(m,g);g>y;)r.lineTo(m-b,g-v),g-=v,r.lineTo(m,g-v),g-=v;r.stroke(),r.closePath(),r.restore()},e.prototype.renderUnderlineAnnotation=function(e,t,i,n,o,s,a,r){for(var l=0;l<e.length;l++){var d=this.getProperBounds(e[l]),h=this.pdfViewerBase.getZoomRatio(o);n.canvas.id===this.pdfViewer.dataId+"_print_annotation_layer_"+s?a&&this.drawLine(t,d.x,d.y,d.width,d.height,i,h,n,s,e[l].rotation):this.drawLine(t,d.x,d.y,d.width,d.height,i,h,n,s,e[l].rotation)}},e.prototype.getProperBounds=function(e){var t=e.X?e.X:e.left,i=e.Y?e.Y:e.top,n=e.Width?e.Width:e.width,o=e.Height?e.Height:e.height;return{x:t=t||e.x,y:i=i||e.y,width:n,height:o}},e.prototype.drawLine=function(e,t,i,n,o,s,a,r,l,d){r.globalAlpha=e,r.setLineDash([]),r.beginPath();var h=this.pdfViewerBase.pageSize[l].rotation;if(d>=0&&(h=Math.abs(d)/90),0===h||2===h?o-=1:1!==h&&3!==h||(n-=1),1===h){var p=this.alignToPixel(t*a);r.moveTo(p,this.alignToPixel(i*a)),r.lineTo(p,this.alignToPixel((i+o)*a))}else if(2===h){var c=this.alignToPixel(i*a);r.moveTo(this.alignToPixel(t*a),c),r.lineTo(this.alignToPixel((n+t)*a),c)}else if(3===h){p=this.alignToPixel((n+t)*a);r.moveTo(p,this.alignToPixel(i*a)),r.lineTo(p,this.alignToPixel((i+o)*a))}else{c=this.alignToPixel((i+o)*a);r.moveTo(this.alignToPixel(t*a),c),r.lineTo(this.alignToPixel((n+t)*a),c)}r.lineWidth=1,r.strokeStyle=s,r.closePath(),r.msFillRule="nonzero",r.stroke()},e.prototype.alignToPixel=function(e){return Math.round(e)+.5},e.prototype.printTextMarkupAnnotations=function(e,t,i,n,o,s,a,r){var l=sf.base.createElement("canvas",{id:this.pdfViewer.dataId+"_print_annotation_layer_"+t});l.style.width="816px",l.style.height="1056px";var d=this.pdfViewerBase.pageSize[t].width,h=this.pdfViewerBase.pageSize[t].height,p=this.pdfViewerBase.getZoomFactor(),c=this.pdfViewerBase.getZoomRatio(p);l.height=h*c,l.width=d*c;var u=this.getAnnotations(t,null,"_annotations_textMarkup"),f=this.getAnnotations(t,null,"_annotations_shape"),m=this.getAnnotations(t,null,"_annotations_shape_measure"),g=this.getAnnotations(t,null,"_annotations_stamp"),w=this.getAnnotations(t,null,"_annotations_sticky");g||f||w||m?this.pdfViewer.renderDrawing(l,t):(this.pdfViewer.annotation.renderAnnotations(t,n,o,null,null,l),this.pdfViewer.annotation.stampAnnotationModule.renderStampAnnotations(i,t,l),this.pdfViewer.annotation.freeTextAnnotationModule.renderFreeTextAnnotations(a,t,!1,l),this.pdfViewer.annotation.inkAnnotationModule.renderExistingInkSignature(r,t,!1,l),this.pdfViewer.annotation.stickyNotesAnnotationModule.renderStickyNotesAnnotations(s,t,l));var y=this.pdfViewerBase.getZoomFactor();return u?this.renderTextMarkupAnnotations(null,t,l,y):this.renderTextMarkupAnnotations(e,t,l,y),l.toDataURL()},e.prototype.saveTextMarkupAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]);for(var t=[],i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++){if(this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),this.pdfViewerBase.isJsonExported)if(a.annotations[r].isAnnotationRotated)a.annotations[r].bounds=this.getBoundsForSave(a.annotations[r].bounds,o);else{var l=this.pdfViewerBase.pageSize[a.pageIndex];l&&(a.annotations[r].annotationRotation=l.rotation)}a.annotations[r].bounds=JSON.stringify(this.getBoundsForSave(a.annotations[r].bounds,a.pageIndex));var d=a.annotations[r].color;a.annotations[r].color=JSON.stringify(this.getRgbCode(d)),a.annotations[r].rect=JSON.stringify(a.annotations[r].rect)}s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.deleteTextMarkupAnnotation=function(){if(this.currentTextMarkupAnnotation){var e=!1;if(this.currentTextMarkupAnnotation.annotationSettings&&(e=this.currentTextMarkupAnnotation.annotationSettings.isLock,this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",this.currentTextMarkupAnnotation)&&(e=!1)),!e){var t=null;this.showHideDropletDiv(!0);var i=this.currentTextMarkupAnnotation;this.currentTextMarkupAnnotation.isMultiSelect&&i.annotNameCollection&&this.deletMultiPageAnnotation(i);var n=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(n){for(var o=0;o<n.length;o++){if(this.currentTextMarkupAnnotation.annotName===n[o].annotName)t=n.splice(o,1)[0],this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,o,t,"Text Markup Deleted",null),this.currentAnnotationIndex=o,this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(t,"textMarkup"),document.getElementById(t.annotName)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",t.annotName,this.currentAnnotationIndex).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}this.pdfViewer.annotationModule.updateAnnotationCollection(this.currentTextMarkupAnnotation),this.manageAnnotations(n,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.updateImportAnnotationCollection(this.currentTextMarkupAnnotation,this.currentTextMarkupAnnotation.pageNumber,"textMarkupAnnotation");var s=this.currentTextMarkupAnnotation.annotName,a=this.currentTextMarkupAnnotation.bounds;this.currentTextMarkupAnnotation=null,this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.pdfViewerBase.fireDocumentEditedEvent("AnnotationDeleted");var r=this.multiPageCollectionList(i);r.length>0?(r.push(t),this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,s,t.textMarkupAnnotationType,a,t.textMarkupContent,t.textMarkupStartIndex,t.textMarkupEndIndex,r)):this.pdfViewer.fireAnnotationRemove(this.selectTextMarkupCurrentPage,s,t.textMarkupAnnotationType,a,t.textMarkupContent,t.textMarkupStartIndex,t.textMarkupEndIndex),this.currentAnnotationIndex=null,this.selectTextMarkupCurrentPage=null,sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.toolbarModule.showToolbar(!0)}}}},e.prototype.modifyColorProperty=function(e){if(this.currentTextMarkupAnnotation){var t=this.modifyAnnotationProperty("Color",e,null);this.manageAnnotations(t,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0);var i=this.currentTextMarkupAnnotation,n=this.multiPageCollectionList(i);n.length>0?(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!0,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex,n),this.currentAnnotationIndex=null):(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!0,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex),this.currentAnnotationIndex=null)}},e.prototype.modifyBoundsProperty=function(e){if(this.currentTextMarkupAnnotation){var t=this.modifyAnnotationProperty("Bounds",e,null);this.manageAnnotations(t,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null,null),this.pdfViewerBase.updateDocumentEditedProperty(!0);var i=this.currentTextMarkupAnnotation,n=this.multiPageCollectionList(i);n.length>0?(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!1,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex,n),this.currentAnnotationIndex=null):(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,i.annotName,i.textMarkupAnnotationType,!1,!1,!1,!1,i.textMarkupContent,i.textMarkupStartIndex,i.textMarkupEndIndex),this.currentAnnotationIndex=null)}},e.prototype.modifyOpacityProperty=function(e,t){if(this.currentTextMarkupAnnotation){var i=void 0;if((i=null!=t?this.modifyAnnotationProperty("Opacity",t,"changed"):this.modifyAnnotationProperty("Opacity",e.value/100,e.name))&&(this.manageAnnotations(i,this.selectTextMarkupCurrentPage),this.pdfViewer.annotationModule.renderAnnotations(this.selectTextMarkupCurrentPage,null,null,null,null),!sf.base.isNullOrUndefined(t)||"changed"===e.name)){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=this.currentTextMarkupAnnotation,o=this.multiPageCollectionList(n);o.length>0?(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,n.annotName,n.textMarkupAnnotationType,!1,!0,!1,!1,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex,o),this.currentAnnotationIndex=null):(this.pdfViewer.fireAnnotationPropertiesChange(this.selectTextMarkupCurrentPage,n.annotName,n.textMarkupAnnotationType,!1,!0,!1,!1,n.textMarkupContent,n.textMarkupStartIndex,n.textMarkupEndIndex),this.currentAnnotationIndex=null)}}},e.prototype.modifyAnnotationProperty=function(e,t,i,n){this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");var o=this.currentTextMarkupAnnotation;o.isMultiSelect&&o.annotNameCollection&&this.modifyMultiPageAnnotations(o,e,t);var s=this.getAnnotations(this.selectTextMarkupCurrentPage,null),a=this.getAnnotations(this.selectTextMarkupCurrentPage,null);if(a)for(var r=0;r<a.length;r++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(a[r])&&("Color"===e?a[r].color=t:"Opacity"===e?a[r].opacity=t:"AnnotationSettings"===e?a[r].annotationSettings={isLock:t}:"IsPrint"===e?a[r].isPrint=t:"Bounds"===e?a[r].bounds=t:"IsLock"===e?(a[r].annotationSettings={isLock:t},a[r].isLocked=t):"allowedInteractions"===e?a[r].allowedInteractions=t:"TextMarkupContent"===e&&(a[r].textMarkupContent=t),this.pdfViewerBase.isUpdateProgrammatically||(a[r].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()),this.currentAnnotationIndex=r,null!==i&&"changed"!==i||this.pdfViewer.annotationModule.addAction(this.selectTextMarkupCurrentPage,r,this.currentTextMarkupAnnotation,"Text Markup Property modified",e,s[r],a[r]),this.currentTextMarkupAnnotation=a[r],this.pdfViewerBase.isUpdateProgrammatically||this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(a[r]),this.pdfViewer.annotationModule.storeAnnotationCollections(a[r],this.selectTextMarkupCurrentPage));return a},e.prototype.undoTextMarkupAction=function(e,t,i,n,o){var s=this.getAnnotations(t,null);s&&("Text Markup Added"===n?(this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(s[i],"textMarkup"),document.getElementById(s[i].annotName)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",e.annotName,t).catch((function(e){throw console.error("Unhandled Exception:",e),e})),o.duplicate=s.splice(i,1)[0]):"Text Markup Deleted"===n&&(s.splice(i,0,e),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(t,e.shapeAnnotationType)));this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(s,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null,null)},e.prototype.undoRedoPropertyChange=function(e,t,i,n,o){for(var s,a=this.getAnnotations(t,null),r=0;r<a.length;r++)if(a[r].annotName===e.annotName){s=r;break}return a&&("Color"===n?(a[s].color=i.color,e.color=i.color):(a[s].opacity=i.opacity,e.opacity=i.opacity),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(e,null,!0),o&&(e.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())),this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(a,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null,null),e},e.prototype.redoTextMarkupAction=function(e,t,i,n,o){var s=this.getAnnotations(t,null);if(s)if("Text Markup Added"===n){var a=this.pdfViewer.annotationModule.getAnnotationFromSessionStorage(o,t);this.pdfViewer.annotation.undoCommentsElement.push(o.duplicate);var r=o.annotation.pageNumber?o.annotation.pageNumber:o.annotation.pageIndex?o.annotation.pageIndex:null;this.pdfViewer.annotationModule.stickyNotesAnnotationModule.addAnnotationComments(r,o.annotation.shapeAnnotationType),this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateUndoRedoCollections(a,r),s.push(e)}else if("Text Markup Deleted"===n){this.pdfViewer.annotation.stickyNotesAnnotationModule.findPosition(s[i],"textMarkup"),document.getElementById(s[i].annotName)&&this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveCommentsCollection",e.annotName,t).catch((function(e){throw console.error("Unhandled Exception:",e),e})),s.splice(i,1)}this.clearCurrentAnnotation(),this.pdfViewerBase.updateDocumentEditedProperty(!0),this.manageAnnotations(s,t),this.pdfViewer.annotationModule.renderAnnotations(t,null,null,null,null)},e.prototype.saveNoteContent=function(e,t){var i=this.getAnnotations(e,null);if(i)for(var n=0;n<i.length;n++)JSON.stringify(this.currentTextMarkupAnnotation)===JSON.stringify(i[n])&&(i[n].note=t);this.manageAnnotations(i,e),this.pdfViewerBase.updateDocumentEditedProperty(!0)},e.prototype.clearCurrentAnnotation=function(){if(!this.isExtended){this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection||(this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null);var e=!1;this.pdfViewer.annotation.freeTextAnnotationModule&&this.pdfViewer.annotation.freeTextAnnotationModule.isInuptBoxInFocus&&(e=!0),e||this.enableAnnotationPropertiesTool(!1)}},e.prototype.clearCurrentAnnotationSelection=function(e,t){this.isAnnotationSelect=!!t;for(var i=e-2>=0?e-2:0,n=e+2<this.pdfViewerBase.pageCount?e+2:this.pdfViewerBase.pageCount-1,o=i;o<=n;o++)this.clearAnnotationSelection(o)},e.prototype.getBoundsForSave=function(e,t){for(var i=[],n=0;n<e.length;n++){var o=this.getAnnotationBounds(e[n],t);i.push(o)}return i},e.prototype.getAnnotationBounds=function(e,t){var i=e.left?e.left:e.Left?e.Left:0,n=e.top?e.top:e.Top?e.Top:0,o=e.height?e.height:e.Height?e.Height:0,s=e.width?e.width:e.Width?e.Width:0,a=this.pdfViewerBase.pageSize[t];return i=i||e.x,n=n||e.y,a?1===a.rotation?{left:n,top:a.width-(i+s),width:o,height:s}:2===a.rotation?{left:a.width-i-s,top:a.height-n-o,width:s,height:o}:3===a.rotation?{left:a.height-n-o,top:i,width:o,height:s}:{left:i,top:n,width:s,height:o}:{left:i,top:n,width:s,height:o}},e.prototype.getRgbCode=function(e){return Ir.call(this,e)},e.prototype.getDrawnBounds=function(){var e=[],t=window.getSelection();if(null!==t.anchorNode){var i=document.createRange(),n=this.pdfViewerBase.textLayer.isBackWardSelection(t);if(t.anchorNode===t.focusNode){var o=this.pdfViewerBase.textLayer.getPageIndex(t.anchorNode);if(!isNaN(o)){var s=this.pdfViewerBase.getElement("_pageDiv_"+o).getBoundingClientRect();this.pdfViewerBase.isMixedSizeDocument&&(s=this.pdfViewerBase.getElement("_textLayer_"+o).getBoundingClientRect()),n?(i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset)):t.anchorOffset<t.focusOffset?(t.anchorOffset,t.focusOffset,i.setStart(t.anchorNode,t.anchorOffset),i.setEnd(t.focusNode,t.focusOffset)):(t.focusOffset,t.anchorOffset,i.setStart(t.focusNode,t.focusOffset),i.setEnd(t.anchorNode,t.anchorOffset));var a=i.getBoundingClientRect(),r=this.pdfViewerBase.pageSize[o],l=0,d=(this.getAngle(r.rotation),void 0);(d=i.startContainer.parentElement?i.startContainer.parentElement:i.startContainer.parentNode)&&""!==d.style.transform&&(l=d.style.transform.startsWith("rotate(90deg)")?90:d.style.transform.startsWith("rotate(180deg)")?180:d.style.transform.startsWith("rotate(-90deg)")||d.style.transform.startsWith("rotate(270deg)")?270:0);var h=this.getIndexNumbers(o,i.toString(),i.commonAncestorContainer.textContent.toString()),p={x:this.getDefaultValue(a.left-s.left),y:this.getDefaultValue(a.top-s.top),left:this.getDefaultValue(a.left-s.left),top:this.getDefaultValue(a.top-s.top),width:this.getDefaultValue(a.width),height:this.getDefaultValue(a.height),right:this.getDefaultValue(a.right-s.left),bottom:this.getDefaultValue(a.bottom-s.top),rotation:l},c=[];c.push(p);var u={x:p.left,y:p.top,left:p.left,top:p.top,right:p.right,bottom:p.bottom,rotation:l};e.push({pageIndex:o,bounds:c,rect:u,startIndex:h.startIndex,endIndex:h.endIndex,textContent:i.toString()})}}else{var f=void 0,m=void 0,g=void 0,w=void 0;n?(f=t.focusNode,g=t.focusOffset,m=t.anchorNode,w=t.anchorOffset):(f=t.anchorNode,g=t.anchorOffset,m=t.focusNode,w=t.focusOffset);for(var y=this.pdfViewerBase.textLayer.getPageIndex(f),v=this.pdfViewerBase.textLayer.getTextIndex(f,y),b=this.pdfViewerBase.textLayer.getPageIndex(m),S=this.pdfViewerBase.textLayer.getTextIndex(m,b),A=0,x=0,V=0,C=y;C<=b;C++){var I=[],k=void 0,M=void 0,T=void 0,E=void 0,B=this.pdfViewerBase.getElement("_textLayer_"+C).childNodes;s=this.pdfViewerBase.getElement("_pageDiv_"+C).getBoundingClientRect();this.pdfViewerBase.isMixedSizeDocument&&(s=this.pdfViewerBase.getElement("_textLayer_"+C).getBoundingClientRect());for(var P=V=C===y?v:0;P<B.length;P++){d=B[P];P===V?(k=V,T=C===y?g:0):(M=P,E=C===b?w:d.textContent.length),A=P===v&&C===y?g:0,x=P===S&&C===b?w:d.textContent.length;for(var D=0;D<d.childNodes.length;D++){var N=d.childNodes[D];i.setStart(N,A),i.setEnd(N,x)}a=i.getBoundingClientRect(),r=this.pdfViewerBase.pageSize[C],l=0,this.getAngle(r.rotation);d&&""!==d.style.transform&&(l=d.style.transform.startsWith("rotate(90deg)")?90:d.style.transform.startsWith("rotate(180deg)")?180:d.style.transform.startsWith("rotate(-90deg)")||d.style.transform.startsWith("rotate(270deg)")?270:0);p={x:this.getDefaultValue(a.left-s.left),y:this.getDefaultValue(a.top-s.top),left:this.getDefaultValue(a.left-s.left),top:this.getDefaultValue(a.top-s.top),width:this.getDefaultValue(a.width),height:this.getDefaultValue(a.height),right:this.getDefaultValue(a.right-s.left),bottom:this.getDefaultValue(a.bottom-s.top),rotation:l};if(null!=I&&I.length>=1){var F=I[I.length-1],L=0;0!==F.rotation&&180!==F.rotation||F.rotation!==p.rotation?90!==F.rotation&&270!==F.rotation||F.rotation!==p.rotation||(90===F.rotation?(L=Math.abs(p.y-(F.y+F.height)))>30||p.left!==F.left?I.push(p):L<30&&F.left===p.left&&(F.height+=p.height):270===F.rotation&&(F.left===p.left?(F.height+=p.height,F.top>p.top&&(F.top=p.top)):I.push(p))):0===F.rotation?(L=Math.abs(p.x-(F.x+F.width)))>30||p.top!==F.top?I.push(p):L<30&&F.top===p.top&&(F.width+=p.width):180===F.rotation&&(F.top===p.top?(F.width+=p.width,F.left>p.left&&(F.left=p.left)):I.push(p))}else I.push(p);if(i.detach(),C===b&&P===S)break}M||(M=k),E||(E=x);var O=this.pdfViewerBase.getElement("_text_"+C+"_"+k).childNodes[0],R=this.pdfViewerBase.getElement("_text_"+C+"_"+M).childNodes[0],z=document.createRange();z.setStart(O,T),z.setEnd(R,E);var H=z.getBoundingClientRect(),U=z.toString(),j=(h=this.getIndexNumbers(C,U),{x:this.getDefaultValue(H.left-s.left),y:this.getDefaultValue(H.top-s.top),left:this.getDefaultValue(H.left-s.left),top:this.getDefaultValue(H.top-s.top),width:this.getDefaultValue(H.width),height:this.getDefaultValue(H.height),right:this.getDefaultValue(H.right-s.left),bottom:this.getDefaultValue(H.bottom-s.top)});u={x:j.left,y:j.top,left:j.left,top:j.top,right:j.right,bottom:j.bottom};e.push({pageIndex:C,bounds:I,rect:u,startIndex:h.startIndex,endIndex:h.endIndex,textContent:U})}}}return t.removeAllRanges(),e},e.prototype.getIndexNumbers=function(e,t,i){var n,o,s=this.pdfViewerBase.getLinkInformation(e);if(s){for(var a=0,r=s.pageText,l=0;l<e;l++)if(this.pdfViewer.isExtractText){var d=this.pdfViewer.textSearchModule.documentTextCollection[l][l],h=d.pageText?d.pageText:d.PageText;if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection&&this.pdfViewer.textSearchModule.isTextRetrieved)this.pdfViewer.textSearchModule.documentTextCollection[l]&&(a+=h.length);else if(this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.documentTextCollection){if(!(e<=this.pdfViewer.textSearchModule.documentTextCollection.length)){a=0;break}this.pdfViewer.textSearchModule.documentTextCollection[l]&&(a+=h.length)}}if(sf.base.isNullOrUndefined(i))n=r.indexOf(t)+a;else n=r.indexOf(i)+i.indexOf(t)+a;o=n+(t.length-1)}return{startIndex:n,endIndex:o}},e.prototype.rerenderAnnotationsPinch=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);if(t){var i=this.pdfViewerBase.getElement("_old_annotationCanvas_"+e);i&&(t?(i.id=t.id,t.parentElement.removeChild(t)):i.id=this.pdfViewer.dataId+"_annotationCanvas_"+e,t=i),t.style.width="",t.style.height="",this.pdfViewer.restrictZoomRequest?(t.style.width=this.pdfViewerBase.pageSize[e].width*this.pdfViewerBase.getZoomFactor()+"px",t.style.height=this.pdfViewerBase.pageSize[e].height*this.pdfViewerBase.getZoomFactor()+"px"):(t.width=this.pdfViewerBase.pageSize[e].width*this.pdfViewerBase.getZoomFactor(),t.height=this.pdfViewerBase.pageSize[e].height*this.pdfViewerBase.getZoomFactor()),this.renderTextMarkupAnnotations(null,e,t,this.pdfViewerBase.getZoomFactor())}},e.prototype.rerenderAnnotations=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.dataId+"_old_annotationCanvas_"+e),i=0;i<t.length;i++)t[i]&&t[i].parentElement.removeChild(t[i]);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+e);n&&(n.style.display="block")},e.prototype.onTextMarkupAnnotationMouseUp=function(e){var t=this.pdfViewer.annotationModule.getEventPageNumber(e);if(sf.base.isNullOrUndefined(t)||isNaN(t))this.pdfViewerBase.isClickedOnScrollBar(e,!0)||(this.clearCurrentAnnotation(),this.clearCurrentAnnotationSelection(t));else{var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);this.currentTextMarkupAnnotation?this.selectedTextMarkup=this.currentTextMarkupAnnotation:this.selectedTextMarkup=null,this.clearCurrentSelectedAnnotation();var n=this.getCurrentMarkupAnnotation(e.clientX,e.clientY,t,i);if(n&&!window.getSelection().toString()){var o=!1,s=!1;if(n.annotationSettings&&n.annotationSettings.isLock&&(o=n.annotationSettings.isLock)&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",n)&&(o=!1,s=!this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",n)),!o){var a=i.parentElement.getBoundingClientRect(),r=e.clientX-a.left,l=e.clientY-a.top;this.annotationClickPosition={x:r,y:l},this.selectAnnotation(n,i,t,e),this.currentTextMarkupAnnotation=n,this.selectTextMarkupCurrentPage=t,s||this.enableAnnotationPropertiesTool(!0);var d=document.getElementById(this.pdfViewer.dataId+"_commantPanel");if(d&&"block"===d.style.display){var h=document.getElementById(n.annotName);h&&(h.firstElementChild&&h.firstElementChild.children.length>=1&&h.firstElementChild.children[1].firstElementChild?h.firstElementChild.children[1].firstElementChild.click():h.firstElementChild&&h.firstElementChild.click())}}}else{this.clearCurrentAnnotation();var p=this.pdfViewer.selectedItems;sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&!this.pdfViewerBase.isAddComment&&p.annotations&&0===p.annotations.length&&p.formFields&&0===p.formFields.length&&("Select"!==this.pdfViewerBase.action&&(this.pdfViewerBase.action="Select",this.pdfViewer.tool="Select",this.pdfViewerBase.tool=this.pdfViewerBase.getTool("Select")),this.pdfViewer._dotnetInstance.invokeMethodAsync("AdjustMobileToolbar").catch((function(e){throw console.error("Unhandled Exception:",e),e})))}this.pdfViewer.isMaintainSelection&&!this.pdfViewer.textSelectionModule.isTextSelection?n&&this.clearCurrentAnnotationSelection(t):this.clearCurrentAnnotationSelection(t)}},e.prototype.onTextMarkupAnnotationTouchEnd=function(e){var t=this.pdfViewer.annotationModule.getEventPageNumber(e);if(sf.base.isNullOrUndefined(t)||isNaN(t))if(null!=this.selectTextMarkupCurrentPage&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var i=this.selectTextMarkupCurrentPage;this.selectTextMarkupCurrentPage=null,this.clearAnnotationSelection(i)}else this.clearCurrentAnnotation(),this.clearCurrentAnnotationSelection(t);else{this.currentTextMarkupAnnotation?this.selectedTextMarkup=this.currentTextMarkupAnnotation:this.selectedTextMarkup=null,this.clearCurrentAnnotationSelection(t);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+t);this.clearCurrentSelectedAnnotation();var o=this.getCurrentMarkupAnnotation(e.touches[0].clientX,e.touches[0].clientY,t,n);if(o){var s=!1;if(o.annotationSettings&&o.annotationSettings.isLock&&(s=o.annotationSettings.isLock),!s){var a=n.parentElement.getBoundingClientRect(),r=e.touches[0].clientX-a.left,l=e.touches[0].clientY-a.top;this.annotationClickPosition={x:r,y:l},this.selectAnnotation(o,n,t,e),this.currentTextMarkupAnnotation=o,this.selectTextMarkupCurrentPage=t,this.enableAnnotationPropertiesTool(!0);var d=document.getElementById(o.annotName);d&&(sf.base.Browser.isDevice||d.firstChild.click())}}else this.clearCurrentAnnotation();this.clearCurrentAnnotationSelection(t)}},e.prototype.clearCurrentSelectedAnnotation=function(){if(this.currentTextMarkupAnnotation){this.clearAnnotationSelection(this.selectTextMarkupCurrentPage);var e=this.currentTextMarkupAnnotation;this.pdfViewer.fireAnnotationUnSelect(e.annotName,e.pageNumber,e),this.clearCurrentAnnotation()}},e.prototype.onTextMarkupAnnotationMouseMove=function(e){var t=e.target,i=parseInt(t.id.split("_text_")[1],10)||parseInt(t.id.split("_textLayer_")[1],10)||parseInt(t.id.split("_annotationCanvas_")[1],10);if(e.target&&(t.id.indexOf("_text")>-1||t.id.indexOf("_annotationCanvas")>-1||t.classList.contains("e-pv-hyperlink"))&&this.pdfViewer.annotation){i=this.pdfViewer.annotation.getEventPageNumber(e);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+i),o=this.getCurrentMarkupAnnotation(e.clientX,e.clientY,i,n);if(o){t.style.cursor="pointer";var s=this.pdfViewerBase.getMousePosition(e),a=this.pdfViewerBase.relativePosition(e),r={left:a.x,top:a.y},l={left:s.x,top:s.y},d={opacity:o.opacity,color:o.color,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate,isLocked:o.isLocked};this.pdfViewerBase.isMousedOver=!0,this.pdfViewer.fireAnnotationMouseover(o.annotName,o.pageNumber,o.textMarkupAnnotationType,o.bounds,d,l,r)}else this.pdfViewer.annotationModule.hidePopupNote(),this.pdfViewerBase.isPanMode&&!this.pdfViewerBase.getAnnotationToolStatus()&&(t.style.cursor="grab"),this.pdfViewerBase.isMousedOver&&!this.pdfViewerBase.isFormFieldMousedOver&&(this.pdfViewer.fireAnnotationMouseLeave(i),this.pdfViewerBase.isMousedOver=!1)}},e.prototype.showPopupNote=function(e,t){t.note&&this.pdfViewer.annotationModule.showPopupNote(e,t.color,t.author,t.note,t.textMarkupAnnotationType)},e.prototype.getCurrentMarkupAnnotation=function(e,t,i,n){var o=[];if(n){var s=n.parentElement.getBoundingClientRect();n.clientWidth!==n.parentElement.clientWidth&&(s=n.getBoundingClientRect());var a=e-s.left,r=t-s.top,l=this.getAnnotations(i,null),d=!1;if(l)for(var h=0;h<l.length;h++)for(var p=l[h],c=0;c<p.bounds.length;c++){var u=p.bounds[c],f=u.left?u.left:u.Left,m=u.top?u.top:u.Top,g=u.width?u.width:u.Width,w=u.height?u.height:u.Height;if(a>=this.getMagnifiedValue(f,this.pdfViewerBase.getZoomFactor())&&a<=this.getMagnifiedValue(f+g,this.pdfViewerBase.getZoomFactor())&&r>=this.getMagnifiedValue(m,this.pdfViewerBase.getZoomFactor())&&r<=this.getMagnifiedValue(m+w,this.pdfViewerBase.getZoomFactor()))o.push(p),d=!0;else if(d){d=!1;break}}var y=null;return o.length>1?y=this.compareCurrentAnnotations(o):1===o.length&&(y=o[0]),y}return null},e.prototype.compareCurrentAnnotations=function(e){for(var t,i=null,n=0;n<e.length&&n!==e.length-1;n++){var o=e[n].bounds,s=o[0].left?o[0].left:o[0].Left,a=o[0].top?o[0].top:o[0].Top,r=e[n+1].bounds,l=r[0].left?r[0].left:r[0].Left,d=r[0].top?r[0].top:r[0].Top;s<l||a<d?(t=l,i=e[n+1]):(t=s,i=e[n]),t&&n===e.length-2&&t===s&&t===l&&(t=l,i=e[n+1])}return i},e.prototype.clearAnnotationSelection=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e);t&&(t.getContext("2d").setLineDash([]),this.pdfViewer.annotationModule.renderAnnotations(e,null,null,null,null))},e.prototype.selectAnnotation=function(e,t,i,n,o){this.pdfViewer.selectedItems.annotations[0]&&(this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex),this.pdfViewer.clearSelection(this.selectTextMarkupCurrentPage));var s=!1;if(e.annotationSettings&&e.annotationSettings.isLock&&(s=e.annotationSettings.isLock)&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",e)&&(s=!1),!s){var a=!1;this.currentTextMarkupAnnotation||(a=!0),this.selectedTextMarkup&&e&&!o&&(a=this.selectedTextMarkup.annotName!==e.annotName),isNaN(i)||(this.selectTextMarkupCurrentPage=i,this.currentTextMarkupAnnotation=e,e=this.retreiveTextIndex(e),this.currentTextMarkupAnnotation=e),this.isSelectedAnnotation&&this.pdfViewer.textSelectionModule&&(this.pdfViewerBase.isSelection=!0,this.updateAnnotationBounds());var r=n;if(this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&e&&r&&!r.touches&&this.updateCurrentResizerPosition(e),this.drawAnnotationSelector(e,this.currentTextMarkupAnnotation,t),e.isMultiSelect&&e.annotNameCollection&&this.selectMultiPageAnnotations(e),""!==e.annotName&&!this.isNewAnnotation&&a){var l=!1;r||(l=!0),this.pdfViewer.annotationModule.annotationSelect(e.annotName,this.selectTextMarkupCurrentPage,e,null,!1,l),this.selectedTextMarkup=null}e&&this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&(this.isTextMarkupAnnotationMode=!0)}},e.prototype.updateCurrentResizerPosition=function(e){if(e||(e=this.currentTextMarkupAnnotation),e&&this.isEnableTextMarkupResizer(e.textMarkupAnnotationType)&&e){var t=this.pdfViewerBase.getElement("_textLayer_"+this.selectTextMarkupCurrentPage);if(t){var i=t.getBoundingClientRect(),n=e.bounds[0].left?e.bounds[0].left:e.bounds[0].Left,o=e.bounds[0].top?e.bounds[0].top:e.bounds[0].Top;this.updateLeftposition(n*this.pdfViewerBase.getZoomFactor()+i.left,i.top+o,!0);var s=e.bounds[e.bounds.length-1],a=s.left?s.left:s.Left,r=s.top?s.top:s.Top,l=s.width?s.width:s.Width;this.updatePosition((a+l)*this.pdfViewerBase.getZoomFactor()+i.left,r+i.top,!0)}}},e.prototype.drawAnnotationSelectRect=function(e,t,i,n,o,s){var a=this.pdfViewerBase.getZoomRatio();if(e){var r=e.getContext("2d");if(r.setTransform(1,0,0,1,0,0),r.beginPath(),"string"==typeof s.annotationSelectorSettings){(d=0===JSON.parse(s.annotationSelectorSettings).selectorLineDashArray.length?[4]:JSON.parse(s.annotationSelectorSettings).selectorLineDashArray).length>2&&(d=[d[0],d[1]]),r.setLineDash(d),r.globalAlpha=1,r.rect(t*a,i*a,n*a,o*a),r.closePath();var l=""===JSON.parse(s.annotationSelectorSettings).selectionBorderColor?"#0000ff":JSON.parse(s.annotationSelectorSettings).selectionBorderColor;r.strokeStyle=l,r.lineWidth=1===JSON.parse(s.annotationSelectorSettings).selectionBorderThickness?1:s.annotationSelectorSettings.selectionBorderThickness,r.stroke(),r.save()}else{var d;(d=0===s.annotationSelectorSettings.selectorLineDashArray.length?[4]:s.annotationSelectorSettings.selectorLineDashArray).length>2&&(d=[d[0],d[1]]),r.setLineDash(d),r.globalAlpha=1,r.rect(t*a,i*a,n*a,o*a),r.closePath();l=""===s.annotationSelectorSettings.selectionBorderColor?"#0000ff":s.annotationSelectorSettings.selectionBorderColor;r.strokeStyle=l,r.lineWidth=s.annotationSelectorSettings.selectionBorderThickness?1:s.annotationSelectorSettings.selectionBorderThickness,r.stroke(),r.save()}}},e.prototype.enableAnnotationPropertiesTool=function(e){if(this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container")),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&0===this.pdfViewer.selectedItems.annotations.length&&this.pdfViewer.toolbarModule.annotationToolbarModule){this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(e);var t=e;this.isTextMarkupAnnotationMode&&(t=!0),this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(t),this.currentTextMarkupAnnotation?this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,this.currentTextMarkupAnnotation.color):sf.base.isNullOrUndefined(this.isTextMarkupAnnotationMode)||this.isTextMarkupAnnotationMode||this.pdfViewer.toolbarModule.annotationToolbarModule.updateColorInIcon(this.pdfViewer.toolbarModule.annotationToolbarModule.colorDropDownElementInBlazor,"#000000")}},e.prototype.maintainAnnotationSelection=function(){if(this.currentTextMarkupAnnotation){var e=this.pdfViewerBase.getElement("_annotationCanvas_"+this.selectTextMarkupCurrentPage);e&&this.selectAnnotation(this.currentTextMarkupAnnotation,e,this.selectTextMarkupCurrentPage)}},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_textMarkup");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_textMarkup"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_textMarkup",s)}},e.prototype.getAnnotations=function(e,t,i){var n;null!=i&&void 0!==i||(i="_annotations_textMarkup");var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+i]),o){var s=JSON.parse(o),a=this.pdfViewer.annotationModule.getPageCollection(s,e);n=s[a]?s[a].annotations:t}else n=t;return n},e.prototype.getAddedAnnotation=function(e,t,i,n,o,s,a,r,l,d,h,p,c,u,f,m,g){var w=a||this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),y=this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("textMarkup",h+1,e,y,"",null,o);var v=this.getAnnotationSettings(e),b=this.getIsPrintValue(e),S={textMarkupAnnotationType:e,color:t,opacity:i,bounds:n,author:o,allowedInteractions:m,subject:s,modifiedDate:w,note:r,rect:d,annotName:y,comments:[],review:{state:"",stateModel:"",author:o,modifiedDate:w},shapeAnnotationType:"textMarkup",pageNumber:h,textMarkupContent:p,textMarkupStartIndex:c,textMarkupEndIndex:u,isMultiSelect:f,annotationSelectorSettings:this.getSelector(e),customData:this.pdfViewer.annotation.getTextMarkupData(s),annotationAddMode:this.annotationAddMode,annotationSettings:v,isPrint:b,isLocked:!1,isCommentLock:l,isAnnotationRotated:!1,annotationRotation:g};if(S){var A=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(S),x=this.pdfViewer.annotationModule.checkIsLockSettings(S);S.isLocked=x,A&&(S.allowedInteractions=A)}f&&this.multiPageCollection.push(S);var V=!1;f&&this.isExtended&&(V=!0),document.getElementById(y)&&!V?document.getElementById(y).addEventListener("mouseup",this.annotationDivSelect(S,h)):null!=S&&this.annotationDivSelect(S,h);var C=this.pdfViewer.annotationModule.storeAnnotations(h,S,"_annotations_textMarkup");return this.pdfViewer.annotationModule.addAction(h,C,S,"Text Markup Added",null,S,S),S},e.prototype.getSelector=function(e){var t=this.pdfViewer.annotationSelectorSettings;return"Highlight"===e&&this.pdfViewer.highlightSettings.annotationSelectorSettings?t=this.pdfViewer.highlightSettings.annotationSelectorSettings:"Underline"===e&&this.pdfViewer.underlineSettings.annotationSelectorSettings?t=this.pdfViewer.underlineSettings.annotationSelectorSettings:"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.annotationSelectorSettings?t=this.pdfViewer.strikethroughSettings.annotationSelectorSettings:"Squiggly"===e&&this.pdfViewer.squigglySettings.annotationSelectorSettings&&(t=this.pdfViewer.squigglySettings.annotationSelectorSettings),t},e.prototype.getAnnotationSettings=function(e){var t={isLock:!1};return("Highlight"===e&&this.pdfViewer.highlightSettings.isLock||"Underline"===e&&this.pdfViewer.underlineSettings.isLock||"Strikethrough"===e&&this.pdfViewer.strikethroughSettings.isLock||"Squiggly"===e&&this.pdfViewer.squigglySettings.isLock||this.pdfViewer.annotationSettings.isLock)&&(t={isLock:!0}),t},e.prototype.getIsPrintValue=function(e){var t=!0;return"Highlight"===e&&(t=this.pdfViewer.highlightSettings.isPrint),"Underline"===e&&(t=this.pdfViewer.underlineSettings.isPrint),"Strikethrough"===e&&(t=this.pdfViewer.strikethroughSettings.isPrint),"Squiggly"===e&&(t=this.pdfViewer.squigglySettings.isPrint),t},e.prototype.annotationDivSelect=function(e,t){var i=this.pdfViewerBase.getElement("_annotationCanvas_"+t);if(this.selectAnnotation(e,i,t),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.annotationToolbarModule&&this.pdfViewer.enableAnnotationToolbar){this.pdfViewer.toolbarModule.annotationToolbarModule.clearShapeMode(),this.pdfViewer.toolbarModule.annotationToolbarModule.clearMeasureMode();var n=!1;e.annotationSettings&&e.annotationSettings.isLock&&(n=e.annotationSettings.isLock),n?(this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",e)&&this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",e)&&this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0)):(this.pdfViewer.toolbarModule.annotationToolbarModule.enableTextMarkupAnnotationPropertiesTools(!0),this.pdfViewer.toolbarModule.annotationToolbarModule.selectAnnotationDeleteItem(!0)),this.pdfViewer.toolbarModule.annotationToolbarModule.isToolbarHidden=!1}},e.prototype.getPageContext=function(e){var t=this.pdfViewerBase.getElement("_annotationCanvas_"+e),i=null;return t&&(i=t.getContext("2d")),i},e.prototype.getDefaultValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},e.prototype.getMagnifiedValue=function(e,t){return e*t},e.prototype.saveImportedTextMarkupAnnotations=function(e,t){var i;e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("textMarkup",e.Subject),e.AnnotationSettings&&e.AnnotationSettings.isLock?e.AnnotationSettings={isLock:e.AnnotationSettings.isLock}:e.AnnotationSettings=this.getAnnotationSettings(e.TextMarkupAnnotationType),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),i={textMarkupAnnotationType:e.TextMarkupAnnotationType,color:e.Color,opacity:e.Opacity,allowedInteractions:e.allowedInteractions,bounds:e.Bounds,author:e.Author,subject:e.Subject,modifiedDate:e.ModifiedDate,note:e.Note,rect:e.Rect,annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},shapeAnnotationType:"textMarkup",pageNumber:t,textMarkupContent:e.TextMarkupContent,textMarkupStartIndex:0,textMarkupEndIndex:0,annotationSelectorSettings:this.getSettings(e),customData:this.pdfViewer.annotation.getCustomData(e),isMultiSelect:e.IsMultiSelect,annotNameCollection:e.AnnotNameCollection,annotpageNumbers:e.AnnotpageNumbers,annotationAddMode:this.annotationAddMode,annotationSettings:e.AnnotationSettings,isPrint:e.isPrint,isLocked:e.IsLock,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_textMarkup")},e.prototype.updateTextMarkupAnnotationCollections=function(e,t){return e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{textMarkupAnnotationType:e.TextMarkupAnnotationType,allowedInteractions:e.allowedInteractions,color:e.Color,opacity:e.Opacity,bounds:e.Bounds,author:e.Author,subject:e.Subject,modifiedDate:e.ModifiedDate,note:e.Note,rect:e.Rect,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},shapeAnnotationType:"textMarkup",pageNumber:t,isMultiSelect:e.IsMultiSelect,annotNameCollection:e.AnnotNameCollection,annotpageNumbers:e.AnnotpageNumbers,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isLocked:e.IsLock,isCommentLock:e.IsCommentLock}},e.prototype.updateTextMarkupSettings=function(e){"highlightSettings"===e&&(this.highlightColor=this.pdfViewer.highlightSettings.color?this.pdfViewer.highlightSettings.color:this.highlightColor,this.highlightOpacity=this.pdfViewer.highlightSettings.opacity?this.pdfViewer.highlightSettings.opacity:this.highlightOpacity),"underlineSettings"===e&&(this.underlineColor=this.pdfViewer.underlineSettings.color?this.pdfViewer.underlineSettings.color:this.underlineColor,this.underlineOpacity=this.pdfViewer.underlineSettings.opacity?this.pdfViewer.underlineSettings.opacity:this.underlineOpacity),"strikethroughSettings"===e&&(this.strikethroughColor=this.pdfViewer.strikethroughSettings.color?this.pdfViewer.strikethroughSettings.color:this.strikethroughColor,this.strikethroughOpacity=this.pdfViewer.strikethroughSettings.opacity?this.pdfViewer.strikethroughSettings.opacity:this.strikethroughOpacity),"squigglySettings"===e&&(this.squigglyColor=this.pdfViewer.squigglySettings.color?this.pdfViewer.squigglySettings.color:this.strikethroughColor,this.squigglyOpacity=this.pdfViewer.squigglySettings.opacity?this.pdfViewer.squigglySettings.opacity:this.squigglyOpacity)},e.prototype.clear=function(){this.selectTextMarkupCurrentPage=null,this.currentTextMarkupAnnotation=null,this.annotationClickPosition=null,window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_textMarkup")},e.prototype.getOffsetPoints=function(e){for(var t=[],i=0;i<e.length;i++)t[i]={X:e[i].x?e[i].x:e[i].X,Y:e[i].y?e[i].y:e[i].Y,Width:e[i].width?e[i].width:e[i].Width,Height:e[i].height?e[i].height:e[i].Height,Left:e[i].x?e[i].x:e[i].X,Top:e[i].y?e[i].y:e[i].Y};return t},e.prototype.updateAddAnnotationDetails=function(e,t){t||(t={pageNumber:0});var i=null,n=null,o="",s=null,a="",r=[],l=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),d=t.Id?t.Id:this.pdfViewer.annotation.createGUID(),h="";"Highlight"===e?(i=this.pdfViewer.highlightSettings.annotationSelectorSettings?this.pdfViewer.highlightSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.highlightSettings),n=this.pdfViewer.highlightSettings.allowedInteractions?this.pdfViewer.highlightSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Highlight",a=this.pdfViewer.highlightSettings.color?this.pdfViewer.highlightSettings.color:"#ffff00",h="Guest"!==this.pdfViewer.highlightSettings.author&&this.pdfViewer.highlightSettings.author?this.pdfViewer.highlightSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"Underline"===e?(i=this.pdfViewer.underlineSettings.annotationSelectorSettings?this.pdfViewer.underlineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.underlineSettings),n=this.pdfViewer.underlineSettings.allowedInteractions?this.pdfViewer.underlineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Underline",a=this.pdfViewer.underlineSettings.color?this.pdfViewer.underlineSettings.color:"#00ff00",h="Guest"!==this.pdfViewer.underlineSettings.author&&this.pdfViewer.underlineSettings.author?this.pdfViewer.underlineSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"Strikethrough"===e?(i=this.pdfViewer.strikethroughSettings.annotationSelectorSettings?this.pdfViewer.strikethroughSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.strikethroughSettings),n=this.pdfViewer.strikethroughSettings.allowedInteractions?this.pdfViewer.strikethroughSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Strikethrough",a=this.pdfViewer.strikethroughSettings.color?this.pdfViewer.strikethroughSettings.color:"#ff0000",h="Guest"!==this.pdfViewer.strikethroughSettings.author&&this.pdfViewer.strikethroughSettings.author?this.pdfViewer.strikethroughSettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"):"Squiggly"===e&&(i=this.pdfViewer.squigglySettings.annotationSelectorSettings?this.pdfViewer.squigglySettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.squigglySettings),n=this.pdfViewer.squigglySettings.allowedInteractions?this.pdfViewer.squigglySettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,o="Squiggly",a=this.pdfViewer.squigglySettings.color?this.pdfViewer.squigglySettings.color:"#00ff00",h="Guest"!==this.pdfViewer.squigglySettings.author&&this.pdfViewer.squigglySettings.author?this.pdfViewer.squigglySettings.author:this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:"Guest"),s.isLock=!!t.isLock&&t.isLock,r=t.bounds?this.getOffsetPoints(t.bounds):[{X:1,Y:1,Width:100,Height:14,Left:1,Top:1,Location:{X:1,Y:1},Size:{Height:14,IsEmpty:!1,Width:100}}];var p=[],c={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:n,AnnotName:d,AnnotNameCollection:null,AnnotType:"textMarkup",TextMarkupAnnotationType:o,AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:i,AnnotationSettings:s,Author:t.author?t.author:h,Bounds:r,Color:t.color?t.color:a,Comments:t.comments?this.pdfViewer.annotation.updateAnnotationCommentsDetails(t.comments,t,h):[],CreatedDate:l,CustomData:t.customData?t.customData:null,ExistingCustomData:null,EnableMultiPageAnnotation:!!t.enableMultiPageAnnotation&&t.enableMultiPageAnnotation,EnableTextMarkupResizer:!!t.enableTextMarkupResizer&&t.enableTextMarkupResizer,IsCommentLock:!!t.isCommentLock&&t.isCommentLock,IsMultiSelect:!!t.isMultiSelect&&t.isMultiSelect,IsLock:!!t.isLock&&t.isLock,IsPrint:!!sf.base.isNullOrUndefined(t.isPrint)||t.isPrint,ModifiedDate:t.modifiedDate?t.modifiedDate:l,Note:t.note?t.note:"",Opacity:sf.base.isNullOrUndefined(t.opacity)?1:t.opacity,Rect:{},State:t.review?t.review.state:"",StateModel:t.review?t.review.stateModel:"",Subject:o,TextMarkupContent:t.textMarkupContent,TextMarkupStartIndex:t.textMarkupStartIndex,TextMarkupEndIndex:t.textMarkupEndIndex};return p[0]=c,{textMarkupAnnotation:p}},e}();function Kh(e,t,i){if(e)if(e.length>=1){if(!this.pdfViewer.annotation.getStoredAnnotations(t,e,"_annotations_shape_measure")||i)for(var n=0;n<e.length;n++){var o=e[n],s=null;this.measureShapeCount=this.measureShapeCount+1,o.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(o,t,o.AnnotType);var a=void 0;if(o.ShapeAnnotationType){i&&this.pdfViewerBase.isJsonImported&&(o.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(o.Rotate,t,o.Bounds,o.AnnotationRotation),a=this.pdfViewerBase.isPageRotated);var r=null;if(o.VertexPoints)if(r=[],i&&this.pdfViewerBase.isJsonImported)r=this.pdfViewerBase.calculateVertexPoints(o.Rotate,t,o.VertexPoints,o.AnnotationRotation);else for(var l=0;l<o.VertexPoints.length;l++){var d={x:o.VertexPoints[l].X?o.VertexPoints[l].X:o.VertexPoints[l].x,y:o.VertexPoints[l].Y?o.VertexPoints[l].Y:o.VertexPoints[l].y};r.push(d)}o.Bounds&&!0===o.EnableShapeLabel&&(o.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(o.Bounds),o.LabelBorderColor=o.LabelBorderColor?o.LabelBorderColor:o.StrokeColor,o.FontColor=o.FontColor?o.FontColor:o.StrokeColor,o.LabelFillColor=o.LabelFillColor?o.LabelFillColor:o.FillColor,o.FontSize=o.FontSize?o.FontSize:16,o.LabelSettings=o.LabelSettings?o.LabelSettings:this.pdfViewer.shapeLabelSettings),o.AnnotationSettings=o.AnnotationSettings?o.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(o),o.allowedInteractions=o.AllowedInteractions?o.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var h=!0;h=sf.base.isNullOrUndefined(o.IsPrint)?sf.base.isNullOrUndefined(o.isPrint)?o.AnnotationSettings.isPrint:o.isPrint:o.IsPrint;var p={ratio:o.Calibrate.Ratio,x:this.getNumberFormatArray(o.Calibrate.X),distance:this.getNumberFormatArray(o.Calibrate.Distance),area:this.getNumberFormatArray(o.Calibrate.Area),angle:this.getNumberFormatArray(o.Calibrate.Angle),volume:this.getNumberFormatArray(o.Calibrate.Volume),targetUnitConversion:o.Calibrate.TargetUnitConversion};o.Calibrate.Depth&&(p.depth=o.Calibrate.Depth);var c=o.Bounds.X?o.Bounds.X:o.Bounds.x,u=o.Bounds.Y?o.Bounds.Y:o.Bounds.y,f=o.Bounds.Width?o.Bounds.Width:o.Bounds.width,m=o.Bounds.Height?o.Bounds.Height:o.Bounds.height,g=(s={id:"measure"+this.measureShapeCount,shapeAnnotationType:o.ShapeAnnotationType,author:o.Author,allowedInteractions:o.allowedInteractions,modifiedDate:o.ModifiedDate,subject:o.Subject,note:o.Note,strokeColor:o.StrokeColor,fillColor:o.FillColor,opacity:o.Opacity,thickness:o.Thickness,rectangleDifference:o.RectangleDifference,borderStyle:o.BorderStyle,borderDashArray:o.BorderDashArray,rotateAngle:o.RotateAngle,isCloudShape:o.IsCloudShape,cloudIntensity:o.CloudIntensity,vertexPoints:r,lineHeadStart:o.LineHeadStart,lineHeadEnd:o.LineHeadEnd,isLocked:o.IsLocked,isLock:o.IsLocked,bounds:{x:c,y:u,left:c,top:u,width:f,height:m,right:o.Bounds.Right,bottom:o.Bounds.Bottom},caption:o.Caption,captionPosition:o.CaptionPosition,calibrate:p,leaderLength:o.LeaderLength,leaderLineExtension:o.LeaderLineExtension,leaderLineOffset:o.LeaderLineOffset,indent:o.Indent,annotName:o.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(o.Comments,o,o.Author),review:{state:o.State,stateModel:o.StateModel,modifiedDate:o.ModifiedDate,author:o.Author},labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,type:this.getMeasureType(o.ShapeAnnotationType,o.Indent),labelBounds:o.LabelBounds,annotationSelectorSettings:this.getSettings(o),labelSettings:o.LabelSettings,annotationSettings:o.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(o),isPrint:h,isCommentLock:o.IsCommentLock,isAnnotationRotated:a}).vertexPoints;null==r&&(g=[]),o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o.allowedInteractions=o.AllowedInteractions?o.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var w={id:"measure"+this.measureShapeCount,type:this.getMeasureType(s.shapeAnnotationType,s.indent),shapeAnnotationType:this.getShapeType(s),author:s.author,allowedInteractions:o.allowedInteractions,modifiedDate:s.modifiedDate,subject:s.subject,notes:s.note,fillColor:s.fillColor,strokeColor:s.strokeColor,opacity:s.opacity,thickness:s.thickness,borderStyle:s.borderStyle,borderDashArray:s.borderDashArray.toString(),rotateAngle:parseFloat(s.rotateAngle.split("Angle")[1]),isCloudShape:s.isCloudShape,cloudIntensity:s.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(s.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(s.lineHeadStart),vertexPoints:g,bounds:{x:s.bounds.left,y:s.bounds.top,left:s.bounds.left,top:s.bounds.top,width:s.bounds.width,height:s.bounds.height},leaderHeight:s.leaderLength,pageIndex:t,annotName:s.annotName,comments:s.comments,review:s.review,measureType:this.getMeasureType(s.shapeAnnotationType,s.indent),labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,labelBounds:o.LabelBounds,annotationSelectorSettings:o.AnnotationSelectorSettings,annotationSettings:s.annotationSettings,annotationAddMode:o.annotationAddMode,isPrint:h,isLocked:o.IsLocked,isCommentLock:s.isCommentLock};if(this.pdfViewer.annotation.storeAnnotations(t,s,"_annotations_shape_measure"),this.isAddAnnotationProgramatically){var y={opacity:w.opacity,strokeColor:w.strokeColor,thickness:w.thickness,modifiedDate:w.modifiedDate,width:w.bounds.width,height:w.bounds.height};this.pdfViewer.fireAnnotationAdd(w.pageIndex,w.annotName,w.type,w.bounds,y)}this.pdfViewer.add(w)}}}else if(e.shapeAnnotationType){s=this.createAnnotationObject(e);this.pdfViewer.annotationModule.storeAnnotations(t,s,"_annotations_shape_measure"),this.pdfViewer.annotationModule.triggerAnnotationAdd(e)}}function Qh(e){this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.Subject)}function $h(e){var t="Guest";this.updateMeasureproperties(),this.pdfViewerBase.disableTextSelectionMode();var i=!1;switch(e){case"Distance":this.currentAnnotationMode="Distance";this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:"Guest",sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings)||(i=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.distanceSettings.isLock&&this.pdfViewer.distanceSettings.isLock),this.pdfViewer.drawingObject={sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.distanceEndHead),measureType:"Distance",fillColor:this.distanceFillColor,notes:"",strokeColor:this.distanceStrokeColor,leaderHeight:this.leaderLength,opacity:this.distanceOpacity,thickness:this.distanceThickness,borderDashArray:this.distanceDashArray.toString(),shapeAnnotationType:"Distance",author:t,subject:"Distance calculation",isCommentLock:!1,isLocked:i},this.pdfViewer.tool="Distance";break;case"Perimeter":this.currentAnnotationMode="Perimeter";this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:"Guest",sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings)||(i=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.perimeterSettings.isLock&&this.pdfViewer.perimeterSettings.isLock),this.pdfViewer.drawingObject={shapeAnnotationType:"LineWidthArrowHead",fillColor:this.perimeterFillColor,notes:"",strokeColor:this.perimeterStrokeColor,opacity:this.perimeterOpacity,thickness:this.perimeterThickness,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterStartHead),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.perimeterEndHead),measureType:"Perimeter",borderDashArray:this.perimeterDashArray.toString(),author:t,subject:"Perimeter calculation",isCommentLock:!1,isLocked:i},this.pdfViewer.tool="Perimeter";break;case"Area":this.currentAnnotationMode="Area";var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:"Guest",sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.areaSettings)||(i=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.areaSettings.isLock&&this.pdfViewer.areaSettings.isLock),this.pdfViewer.drawingObject={shapeAnnotationType:"Polygon",fillColor:this.areaFillColor,notes:"",strokeColor:this.areaStrokeColor,thickness:this.areaThickness,opacity:this.areaOpacity,measureType:"Area",modifiedDate:n,borderStyle:"",borderDashArray:"0",author:t,subject:"Area calculation",isCommentLock:!1,isLocked:i},this.pdfViewer.tool="Polygon";break;case"Radius":this.currentAnnotationMode="Radius";var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:"Guest",sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings)||(i=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.radiusSettings.isLock&&this.pdfViewer.radiusSettings.isLock),this.pdfViewer.drawingObject={shapeAnnotationType:"Radius",fillColor:this.radiusFillColor,notes:"",strokeColor:this.radiusStrokeColor,opacity:this.radiusOpacity,thickness:this.radiusThickness,measureType:"Radius",modifiedDate:o,borderStyle:"",borderDashArray:"0",author:t,subject:"Radius calculation",isCommentLock:!1,isLocked:i},this.pdfViewer.tool="DrawTool";break;case"Volume":this.currentAnnotationMode="Volume";var s=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:"Guest",sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.isLock)||(i=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.volumeSettings.isLock&&this.pdfViewer.volumeSettings.isLock),this.pdfViewer.drawingObject={shapeAnnotationType:"Polygon",notes:"",fillColor:this.volumeFillColor,strokeColor:this.volumeStrokeColor,opacity:this.volumeOpacity,thickness:this.volumeThickness,measureType:"Volume",modifiedDate:s,borderStyle:"",borderDashArray:"0",author:t,subject:"Volume calculation",isCommentLock:!1,isLocked:i},this.pdfViewer.tool="Polygon"}}function ep(){this.distanceFillColor=this.pdfViewer.distanceSettings.fillColor?this.pdfViewer.distanceSettings.fillColor:"#ff0000",this.distanceStrokeColor=this.pdfViewer.distanceSettings.strokeColor?this.pdfViewer.distanceSettings.strokeColor:"#ff0000",this.distanceOpacity=this.pdfViewer.distanceSettings.opacity?this.pdfViewer.distanceSettings.opacity:1,this.distanceThickness=this.pdfViewer.distanceSettings.thickness?this.pdfViewer.distanceSettings.thickness:1,this.distanceDashArray=this.pdfViewer.distanceSettings.borderDashArray?this.pdfViewer.distanceSettings.borderDashArray:0,this.leaderLength=null!=this.pdfViewer.distanceSettings.leaderLength?this.pdfViewer.distanceSettings.leaderLength:40,this.distanceStartHead=this.pdfViewer.distanceSettings.lineHeadStartStyle?this.pdfViewer.distanceSettings.lineHeadStartStyle:"Closed",this.distanceEndHead=this.pdfViewer.distanceSettings.lineHeadEndStyle?this.pdfViewer.distanceSettings.lineHeadEndStyle:"Closed",this.perimeterFillColor=this.pdfViewer.perimeterSettings.fillColor?this.pdfViewer.perimeterSettings.fillColor:"#ffffff00",this.perimeterStrokeColor=this.pdfViewer.perimeterSettings.strokeColor?this.pdfViewer.perimeterSettings.strokeColor:"#ff0000",this.perimeterOpacity=this.pdfViewer.perimeterSettings.opacity?this.pdfViewer.perimeterSettings.opacity:1,this.perimeterThickness=this.pdfViewer.perimeterSettings.thickness?this.pdfViewer.perimeterSettings.thickness:1,this.perimeterDashArray=this.pdfViewer.perimeterSettings.borderDashArray?this.pdfViewer.perimeterSettings.borderDashArray:0,this.perimeterStartHead=this.pdfViewer.perimeterSettings.lineHeadStartStyle?this.pdfViewer.perimeterSettings.lineHeadStartStyle:"Open",this.perimeterEndHead=this.pdfViewer.perimeterSettings.lineHeadEndStyle?this.pdfViewer.perimeterSettings.lineHeadEndStyle:"Open",this.areaFillColor=this.pdfViewer.areaSettings.fillColor?this.pdfViewer.areaSettings.fillColor:"#ffffff00",this.areaStrokeColor=this.pdfViewer.areaSettings.strokeColor?this.pdfViewer.areaSettings.strokeColor:"#ff0000",this.areaOpacity=this.pdfViewer.areaSettings.opacity?this.pdfViewer.areaSettings.opacity:1,this.areaThickness=this.pdfViewer.areaSettings.thickness?this.pdfViewer.areaSettings.thickness:1,this.radiusFillColor=this.pdfViewer.radiusSettings.fillColor?this.pdfViewer.radiusSettings.fillColor:"#ffffff00",this.radiusStrokeColor=this.pdfViewer.radiusSettings.strokeColor?this.pdfViewer.radiusSettings.strokeColor:"#ff0000",this.radiusOpacity=this.pdfViewer.radiusSettings.opacity?this.pdfViewer.radiusSettings.opacity:1,this.radiusThickness=this.pdfViewer.radiusSettings.thickness?this.pdfViewer.radiusSettings.thickness:1,this.volumeFillColor=this.pdfViewer.volumeSettings.fillColor?this.pdfViewer.volumeSettings.fillColor:"#ffffff00",this.volumeStrokeColor=this.pdfViewer.volumeSettings.strokeColor?this.pdfViewer.volumeSettings.strokeColor:"#ff0000",this.volumeOpacity=this.pdfViewer.volumeSettings.opacity?this.pdfViewer.volumeSettings.opacity:1,this.volumeThickness=this.pdfViewer.volumeSettings.thickness?this.pdfViewer.volumeSettings.thickness:1,this.unit=this.pdfViewer.measurementSettings.conversionUnit.toLowerCase(),this.displayUnit=this.pdfViewer.measurementSettings.displayUnit.toLowerCase(),this.ratio=this.pdfViewer.measurementSettings.scaleRatio,this.volumeDepth=this.pdfViewer.measurementSettings.depth,this.scaleRatioString="1 "+this.unit+" = "+this.ratio.toString()+" "+this.displayUnit}function tp(e){var t,i,n=this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("shape_measure",e.pageIndex+1,e.measureType,n,e.notes,null,e.author),e.annotName=n,e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("measure",e.subject),e.wrapper.bounds?(t={x:e.wrapper.bounds.x,y:e.wrapper.bounds.y,left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,height:e.wrapper.bounds.height,width:e.wrapper.bounds.width,right:e.wrapper.bounds.right,bottom:e.wrapper.bounds.bottom},i=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(e.wrapper.bounds)):(t={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0},i={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0});var o=parseInt(e.borderDashArray,10);o=isNaN(o)?0:o;var s={ratio:this.scaleRatioString,x:[this.createNumberFormat("x")],distance:[this.createNumberFormat("d")],area:[this.createNumberFormat("a")]};"Volume"===e.measureType&&(s.depth=this.volumeDepth);var a=this.pdfViewer.annotationModule.findAnnotationSettings(e,!0),r=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);e.isPrint=a.isPrint;var l=this.pdfViewer.shapeLabelSettings,d={borderColor:e.strokeColor,fillColor:e.fillColor,fontColor:e.fontColor,fontSize:e.fontSize,labelContent:e.labelContent,labelHeight:l.labelHeight,labelWidth:l.labelMaxWidth,opacity:e.opacity};return{id:e.id,shapeAnnotationType:this.getMeasureAnnotType(e.measureType),type:this.getMeasureType(this.getMeasureAnnotType(e.measureType),this.getIndent(e.measureType)),author:e.author,allowedInteractions:r,subject:e.subject,note:e.notes,strokeColor:e.strokeColor,fillColor:e.fillColor,opacity:e.opacity,thickness:e.thickness,borderStyle:e.borderStyle,borderDashArray:o,bounds:t,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:"RotateAngle"+e.rotateAngle,isCloudShape:e.isCloudShape,cloudIntensity:e.cloudIntensity,vertexPoints:e.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(e.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(e.taregetDecoraterShapes),rectangleDifference:[],isLocked:a.isLock,leaderLength:e.leaderHeight,leaderLineExtension:2,leaderLineOffset:0,calibrate:s,caption:!0,captionPosition:"Top",indent:this.getIndent(e.measureType),annotName:n,comments:[],review:{state:"",stateModel:"",modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:e.author},labelContent:e.labelContent,enableShapeLabel:e.enableShapeLabel,labelFillColor:e.labelFillColor,labelBorderColor:e.labelBorderColor,fontColor:e.fontColor,fontSize:e.fontSize,labelBounds:i,annotationSelectorSettings:this.getSelector(e.subject),labelSettings:d,annotationSettings:a,customData:this.pdfViewer.annotation.getMeasureData(e.subject),isPrint:e.isPrint,isCommentLock:e.isCommentLock,isAnnotationRotated:!1}}function ip(e){var t=this.pdfViewer.annotationSelectorSettings;return"Distance calculation"===e&&this.pdfViewer.distanceSettings.annotationSelectorSettings?t=this.pdfViewer.distanceSettings.annotationSelectorSettings:"Perimeter calculation"===e&&this.pdfViewer.perimeterSettings.annotationSelectorSettings?t=this.pdfViewer.perimeterSettings.annotationSelectorSettings:"Area calculation"===e&&this.pdfViewer.areaSettings.annotationSelectorSettings?t=this.pdfViewer.areaSettings.annotationSelectorSettings:"Radius calculation"===e&&this.pdfViewer.radiusSettings.annotationSelectorSettings?t=this.pdfViewer.radiusSettings.annotationSelectorSettings:"Volume calculation"===e&&this.pdfViewer.volumeSettings.annotationSelectorSettings&&(t=this.pdfViewer.volumeSettings.annotationSelectorSettings),t}function np(e){var t=1,i=this.displayUnit;return"x"===e&&(t=this.getFactor(this.unit)),"a"===e&&(i="sq "+this.displayUnit),{unit:i,fractionalType:"D",conversionFactor:t,denominator:100,formatDenominator:!1}}function op(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]);for(var t=[],i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++){if(this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),0===a.annotations[r].bounds.height&&(a.annotations[r].bounds.height=.01),0===a.annotations[r].bounds.width&&(a.annotations[r].bounds.width=.01),this.pdfViewerBase.isJsonExported)if(a.annotations[r].isAnnotationRotated)a.annotations[r].bounds=this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex),a.annotations[r].vertexPoints=this.pdfViewer.annotation.getVertexPoints(a.annotations[r].vertexPoints,a.pageIndex);else{var l=this.pdfViewerBase.pageSize[a.pageIndex];l&&(a.annotations[r].annotationRotation=l.rotation)}a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex));var d=a.annotations[r].strokeColor;a.annotations[r].strokeColor=JSON.stringify(this.getRgbCode(d));var h=a.annotations[r].fillColor;if(a.annotations[r].fillColor=JSON.stringify(this.getRgbCode(h)),a.annotations[r].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(a.annotations[r].vertexPoints,a.pageIndex)),null!==a.annotations[r].rectangleDifference&&(a.annotations[r].rectangleDifference=JSON.stringify(a.annotations[r].rectangleDifference)),a.annotations[r].calibrate=this.getStringifiedMeasure(a.annotations[r].calibrate),!0===a.annotations[r].enableShapeLabel){a.annotations[r].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(a.annotations[r].bounds),a.pageIndex));var p=a.annotations[r].labelFillColor;a.annotations[r].labelFillColor=JSON.stringify(this.getRgbCode(p));var c=a.annotations[r].labelBorderColor;a.annotations[r].labelBorderColor=JSON.stringify(this.getRgbCode(c)),a.annotations[r].labelSettings.fillColor=p;var u=a.annotations[r].labelSettings.fontColor;a.annotations[r].fontColor=JSON.stringify(this.getRgbCode(u))}}s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)}function sp(){var e=document.querySelector("#"+this.pdfViewer.dataId+"_src_unit"),t=document.querySelector("#"+this.pdfViewer.dataId+"_dest_unit"),i=document.querySelector("#"+this.pdfViewer.dataId+"_ratio_input"),n=document.querySelector("#"+this.pdfViewer.dataId+"_dest_input"),o=document.querySelector("#"+this.pdfViewer.dataId+"_depth_input");e&&t&&i&&n&&o&&(this.unit=e.value,this.displayUnit=t.value,this.ratio=parseInt(n.value,10)/parseInt(i.value,10),this.volumeDepth=parseInt(o.value,10)),this.scaleRatioString=parseInt(i.value,10)+" "+this.unit+" = "+parseInt(n.value,10)+" "+this.displayUnit,this.updateMeasureValues(this.scaleRatioString,this.displayUnit,this.unit,this.volumeDepth)}function ap(e){for(var t,i=0;i<e.items.length;i++){var n=e.items[i];this.unit===n.text&&(t=n.label)}return t}function rp(e,t,i,n){this.scaleRatioString=e,this.displayUnit=t,this.unit=i,this.volumeDepth=n;for(var o=0;o<this.pdfViewerBase.pageCount;o++){var s=this.getAnnotations(o,null);if(s)for(var a=0;a<s.length;a++){var r=(s=this.getAnnotations(o,null))[a];r.annotationSettings.isLock||(r.calibrate.ratio=e,r.calibrate.x[0].unit=t,r.calibrate.distance[0].unit=t,r.calibrate.area[0].unit=t,r.calibrate.x[0].conversionFactor=this.getFactor(i),"PolygonVolume"===r.indent&&(r.calibrate.depth=n),s[a]=r,this.manageAnnotations(s,o),this.pdfViewer.annotation.updateCalibrateValues(this.getAnnotationBaseModel(r.id)))}this.pdfViewer.annotation.renderAnnotations(o,null,null,null,null,null,!1)}}function lp(e){for(var t=null,i=0;i<this.pdfViewer.annotations.length;i++)if(e===this.pdfViewer.annotations[i].id){t=this.pdfViewer.annotations[i];break}return t}function dp(e,t,i,n){n||this.pdfViewerBase.updateDocumentEditedProperty(!0);var o=null,s=this.getAnnotations(t,null);if(null!=s&&i){for(var a=0;a<s.length;a++)if(i.id===s[a].id){if("bounds"===e)this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(i,!0),"Line"===s[a].shapeAnnotationType||"Polyline"===s[a].shapeAnnotationType||"Polygon"===s[a].shapeAnnotationType?(s[a].vertexPoints=i.vertexPoints,s[a].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom}):s[a].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom},!0===s[a].enableShapeLabel&&i.wrapper&&(s[a].labelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(i.wrapper.bounds));else if("fill"===e)s[a].fillColor=i.wrapper.children[0].style.fill,this.pdfViewer.enableShapeLabel&&(s[a].labelFillColor=i.wrapper.children[0].style.fill);else if("stroke"===e)s[a].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)s[a].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)s[a].thickness=i.wrapper.children[0].style.strokeWidth;else if("dashArray"===e)s[a].borderDashArray=i.wrapper.children[0].style.strokeDashArray,s[a].borderStyle=i.borderStyle;else if("startArrow"===e)s[a].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(i.sourceDecoraterShapes);else if("endArrow"===e)s[a].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(i.taregetDecoraterShapes);else if("leaderLength"===e)s[a].leaderLength=i.leaderHeight;else if("notes"===e)s[a].note=i.notes,!0===s[a].enableShapeLabel&&(s[a].labelContent=i.notes);else{if("delete"===e){o=s.splice(a,1)[0];break}if("labelContent"===e){s[a].note=i.labelContent,s[a].labelContent=i.labelContent;break}"fontColor"===e?s[a].fontColor=i.fontColor:"fontSize"===e?s[a].fontSize=i.fontSize:"isLock"===e?(s[a].annotationSettings&&(s[a].annotationSettings.isLock=i.isLock),s[a].isLocked=i.isLock,s[a].isLock=i.isLock):"allowedInteractions"===e?s[a].allowedInteractions=i.allowedInteractions:"isPrint"===e&&(s[a].annotationSettings&&(s[a].annotationSettings.isPrint=i.isPrint),s[a].isPrint=i.isPrint)}this.pdfViewerBase.isUpdateProgrammatically||(s[a].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()),this.pdfViewer.annotationModule.storeAnnotationCollections(s[a],t)}this.manageAnnotations(s,t)}return o}function hp(e,t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)}function pp(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape_measure",s)}}function cp(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape_measure");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape_measure"]),n){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[s]?o[s].annotations:t}else i=t;return i}function up(e,t,i){var n=null,o=this.getAnnotations(e,null);if(null!=o)for(var s=0;s<o.length;s++)if(t){if(t===o[s].id){n=o[s];break}}else if(i&&i===o[s].annotName){n=o[s];break}return n}function fp(e,t){var i,n,o,s;if(e&&!isNaN(t)){var a=this.getCurrentObject(t,e);a?(i=this.getCurrentRatio(a.calibrate.ratio),n=a.calibrate.x[0].unit,o=a.calibrate.x[0].conversionFactor,s=a.calibrate.depth):(i=this.ratio,n=this.displayUnit,o=this.getFactor(this.unit),s=this.volumeDepth)}else i=this.ratio,n=this.displayUnit,o=this.getFactor(this.unit),s=this.volumeDepth;return{ratio:i,unit:n,factor:o,depth:s}}function mp(e,t,i){var n=this.getCurrentValues(t,i),o=this.getArea(e,n.factor,n.unit)*n.ratio;if("ft_in"===n.unit){var s=Math.round(100*o)/100;if(s>=12){if((s=(s=(Math.round(s/12*100)/100).toString()).split("."))[1]){var a=0;return s[1].charAt(1)?(a=parseInt(s[1].charAt(0),10)+"."+parseInt(s[1].charAt(1),10),a=Math.round(a)):a=s[1],a?s[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+a+" "+this.pdfViewer.localeObj.getConstant("in"):s[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")}return s[0]+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("ft")}return Math.round(100*o)/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant("in")}return"m"===n.unit?100*o/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(n.unit):Math.round(100*o)/100+" "+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(n.unit)}function gp(e,t,i){var n=this.getCurrentValues(t,i),o=n.depth?n.depth:this.volumeDepth,s=this.getArea(e,n.factor,n.unit)*(o*this.convertUnitToPoint(n.unit)*n.factor)*n.ratio;if("ft_in"===n.unit){var a=Math.round(100*s)/100;if(a>=12){if((a=(a=(Math.round(a/12*100)/100).toString()).split("."))[1]){var r=0;return a[1].charAt(1)?(r=parseInt(a[1].charAt(0),10)+"."+parseInt(a[1].charAt(1),10),r=Math.round(r)):r=a[1],r?a[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+r+" "+this.pdfViewer.localeObj.getConstant("in"):a[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")}return a[0]+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("ft")}return Math.round(100*s)/100+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant("in")}return Math.round(100*s)/100+" "+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant(n.unit)}function wp(e,t,i){for(var n=0,o=e.length-1,s=0;s<e.length;s++)n+=(e[o].x*this.pixelToPointFactor*t+e[s].x*this.pixelToPointFactor*t)*(e[o].y*this.pixelToPointFactor*t-e[s].y*this.pixelToPointFactor*t),o=s;return"ft_in"===i?Math.abs(2*n):Math.abs(n/2)}function yp(e,t,i){var n;if("ft_in"===i){var o=Math.round(t*e*100)/100;if(o>=12)if((o=(o=(Math.round(o/12*100)/100).toString()).split("."))[1]){var s=0;o[1].charAt(1)?(s=parseInt(o[1].charAt(0),10)+"."+parseInt(o[1].charAt(1),10),s=Math.round(s)):s=o[1],n=s?o[0]+" "+this.pdfViewer.localeObj.getConstant("ft")+" "+s+" "+this.pdfViewer.localeObj.getConstant("in"):o[0]+" "+this.pdfViewer.localeObj.getConstant("ft")}else n=o[0]+" "+this.pdfViewer.localeObj.getConstant("ft");else n=Math.round(t*e*100)/100+" "+this.pdfViewer.localeObj.getConstant("in")}else n=Math.round(t*e*100)/100+" "+this.pdfViewer.localeObj.getConstant(i);return n}function vp(e,t){var i,n=null;if(e.VertexPoints){n=[];for(var o=0;o<e.VertexPoints.length;o++){var s={x:e.VertexPoints[o].X,y:e.VertexPoints[o].Y};n.push(s)}}var a={ratio:e.Calibrate.Ratio,x:this.getNumberFormatArray(e.Calibrate.X),distance:this.getNumberFormatArray(e.Calibrate.Distance),area:this.getNumberFormatArray(e.Calibrate.Area),angle:this.getNumberFormatArray(e.Calibrate.Angle),volume:this.getNumberFormatArray(e.Calibrate.Volume),targetUnitConversion:e.Calibrate.TargetUnitConversion};e.Calibrate.Depth&&(a.depth=e.Calibrate.Depth),e.Bounds&&!0===e.EnableShapeLabel&&(e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16,e.LabelSettings=e.LabelSettings?e.LabelSettings:this.pdfViewer.shapeLabelSettings),e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("measure",e.Subject),i={id:"measure",shapeAnnotationType:e.ShapeAnnotationType,allowedInteractions:e.AllowedInteractions,type:this.getMeasureType(e.ShapeAnnotationType,e.Indent),author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},caption:e.Caption,captionPosition:e.CaptionPosition,calibrate:a,leaderLength:e.LeaderLength,leaderLineExtension:e.LeaderLineExtension,leaderLineOffset:e.LeaderLineOffset,indent:e.Indent,annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,annotationSelectorSettings:this.getSettings(e),labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_shape_measure")}function bp(e,t){var i=null;if(e.VertexPoints){i=[];for(var n=0;n<e.VertexPoints.length;n++){var o={x:e.VertexPoints[n].X,y:e.VertexPoints[n].Y};i.push(o)}}var s={ratio:e.Calibrate.Ratio,x:this.getNumberFormatArray(e.Calibrate.X),distance:this.getNumberFormatArray(e.Calibrate.Distance),area:this.getNumberFormatArray(e.Calibrate.Area),angle:this.getNumberFormatArray(e.Calibrate.Angle),volume:this.getNumberFormatArray(e.Calibrate.Volume),targetUnitConversion:e.Calibrate.TargetUnitConversion};if(e.Calibrate.Depth&&(s.depth=e.Calibrate.Depth),e.Bounds&&!0===e.EnableShapeLabel){e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16;var a=this.pdfViewer.shapeLabelSettings,r={borderColor:e.StrokeColor,fillColor:e.FillColor,fontColor:e.FontColor,fontSize:e.FontSize,labelContent:e.LabelContent,labelHeight:a.labelHeight,labelWidth:a.labelWidth,opacity:e.Opacity};e.LabelSettings=e.LabelSettings?e.LabelSettings:r}return e.AnnotationSelectorSettings=e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),{id:"measure",shapeAnnotationType:e.ShapeAnnotationType,allowedInteractions:e.AllowedInteractions,type:this.getMeasureType(e.ShapeAnnotationType,e.Indent),author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:i,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},caption:e.Caption,captionPosition:e.CaptionPosition,calibrate:s,leaderLength:e.LeaderLength,leaderLineExtension:e.LeaderLineExtension,leaderLineOffset:e.LeaderLineOffset,indent:e.Indent,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,pageNumber:t,annotationSelectorSettings:e.AnnotationSelectorSettings,labelSettings:e.labelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint}}function Sp(e,t,i){t?t.bound?(i.x=t.bound.x?t.bound.x:10,i.y=t.bound.y?t.bound.y:10):(i.x=10,i.y=10):i=(t={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=null,o=null,s=null,a="",r="",l="",d=!1,h=[],p="",c="",u="",f=0,m=0,g=!0,w=!1,y=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),v=this.pdfViewer.annotation.createGUID();if("Distance"===e){if(n=this.pdfViewer.distanceSettings.annotationSelectorSettings?this.pdfViewer.distanceSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.distanceSettings),this.pdfViewer.distanceSettings.allowedInteractions,o=this.pdfViewer.distanceSettings.allowedInteractions,a="LineDimension",r="Line",l="Distance calculation",d=!0,g=!!sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.isPrint)||this.pdfViewer.distanceSettings.isPrint,w=!sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.isLock)&&this.pdfViewer.distanceSettings.isLock,p=t.author?t.author:this.pdfViewer.distanceSettings.author?this.pdfViewer.distanceSettings.author:"Guest",c=this.pdfViewer.distanceSettings.fillColor?this.pdfViewer.distanceSettings.fillColor:"#ffffff00",u=this.pdfViewer.distanceSettings.strokeColor?this.pdfViewer.distanceSettings.strokeColor:"#ff0000",f=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.opacity)?1:this.pdfViewer.distanceSettings.opacity,m=sf.base.isNullOrUndefined(this.pdfViewer.distanceSettings.thickness)?1:this.pdfViewer.distanceSettings.thickness,t.vertexPoints&&t.vertexPoints.length>0){h=[];for(var b=t.vertexPoints.length>1?2:1,S=0;S<b;S++){var A=t.vertexPoints[S];h.push(A)}if(1===b){var x={x:h[0].x+100,y:h[0].y};h.push(x)}}else i.y=50,h=[{x:i.x,y:i.y},{x:i.x+100,y:i.y}];t.width=t.width?t.width:1,t.height=t.height?t.height:1}else if("Perimeter"===e){if(n=this.pdfViewer.perimeterSettings.annotationSelectorSettings?this.pdfViewer.perimeterSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.perimeterSettings),o=this.pdfViewer.perimeterSettings.allowedInteractions?this.pdfViewer.perimeterSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolyLineDimension",r="Polyline",l="Perimeter calculation",d=!0,g=!!sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.isPrint)||this.pdfViewer.perimeterSettings.isPrint,w=!sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.isLock)&&this.pdfViewer.perimeterSettings.isLock,p=t.author?t.author:this.pdfViewer.perimeterSettings.author?this.pdfViewer.perimeterSettings.author:"Guest",c=this.pdfViewer.perimeterSettings.fillColor?this.pdfViewer.perimeterSettings.fillColor:"#ffffff00",u=this.pdfViewer.perimeterSettings.strokeColor?this.pdfViewer.perimeterSettings.strokeColor:"#ff0000",f=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.opacity)?1:this.pdfViewer.perimeterSettings.opacity,m=sf.base.isNullOrUndefined(this.pdfViewer.perimeterSettings.thickness)?1:this.pdfViewer.perimeterSettings.thickness,t.vertexPoints&&t.vertexPoints.length>0){h=[];b=t.vertexPoints.length>1?t.vertexPoints.length:1;if(h=t.vertexPoints,1===b){x={x:h[0].x+85,y:h[0].y};h.push(x),x={x:i.x+86,y:i.y+62},h.push(x)}}else h=[{x:i.x,y:i.y},{x:i.x+85,y:i.y},{x:i.x+86,y:i.y+62}];t.width=t.width?t.width:1,t.height=t.height?t.height:1}else if("Area"===e){if(n=this.pdfViewer.areaSettings.annotationSelectorSettings?this.pdfViewer.areaSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.areaSettings),o=this.pdfViewer.areaSettings.allowedInteractions?this.pdfViewer.areaSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolygonDimension",r="Polygon",l="Area calculation",g=!!sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.isPrint)||this.pdfViewer.areaSettings.isPrint,w=!sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.isLock)&&this.pdfViewer.areaSettings.isLock,p=t.author?t.author:this.pdfViewer.areaSettings.author?this.pdfViewer.areaSettings.author:"Guest",c=this.pdfViewer.areaSettings.fillColor?this.pdfViewer.areaSettings.fillColor:"#ffffff00",u=this.pdfViewer.areaSettings.strokeColor?this.pdfViewer.areaSettings.strokeColor:"#ff0000",f=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.opacity)?1:this.pdfViewer.areaSettings.opacity,m=sf.base.isNullOrUndefined(this.pdfViewer.areaSettings.thickness)?1:this.pdfViewer.areaSettings.thickness,t.vertexPoints&&t.vertexPoints.length){if((h=t.vertexPoints).length>2)(V=h[h.length-1]).x===h[0].x&&V.y===h[0].y||h.push(h[0]);else if(1===h.length){x={x:h[0].x+50,y:h[0].y};h.push(x)}}else h=[{x:i.x,y:i.y},{x:i.x+88,y:i.y-1},{x:i.x+89,y:i.y+53},{x:i.x,y:i.y}];t.width=t.width?t.width:1,t.height=t.height?t.height:1}else if("Radius"===e)n=this.pdfViewer.radiusSettings.annotationSelectorSettings?this.pdfViewer.radiusSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.radiusSettings),o=this.pdfViewer.radiusSettings.allowedInteractions?this.pdfViewer.radiusSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolygonRadius",r="Circle",l="Radius calculation",g=!!sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.isPrint)||this.pdfViewer.radiusSettings.isPrint,w=!sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.isLock)&&this.pdfViewer.radiusSettings.isLock,p=t.author?t.author:this.pdfViewer.radiusSettings.author?this.pdfViewer.radiusSettings.author:"Guest",c=this.pdfViewer.radiusSettings.fillColor?this.pdfViewer.radiusSettings.fillColor:"#ffffff00",u=this.pdfViewer.radiusSettings.strokeColor?this.pdfViewer.radiusSettings.strokeColor:"#ff0000",f=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.opacity)?1:this.pdfViewer.radiusSettings.opacity,m=sf.base.isNullOrUndefined(this.pdfViewer.radiusSettings.thickness)?1:this.pdfViewer.radiusSettings.thickness,t.width=t.bound&&t.bound.width?t.bound.width:100,t.height=t.bound&&t.bound.height?t.bound.height:100,h=null;else if("Volume"===e){var V;if(n=this.pdfViewer.volumeSettings.annotationSelectorSettings?this.pdfViewer.volumeSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.volumeSettings),o=this.pdfViewer.volumeSettings.allowedInteractions?this.pdfViewer.volumeSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="PolygonVolume",r="Polygon",l="Volume calculation",g=!!sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.isPrint)||this.pdfViewer.volumeSettings.isPrint,w=!sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.isLock)&&this.pdfViewer.volumeSettings.isLock,p=t.author?t.author:this.pdfViewer.volumeSettings.author?this.pdfViewer.volumeSettings.author:"Guest",c=this.pdfViewer.volumeSettings.fillColor?this.pdfViewer.volumeSettings.fillColor:"#ffffff00",u=this.pdfViewer.volumeSettings.strokeColor?this.pdfViewer.volumeSettings.strokeColor:"#ff0000",f=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.opacity)?1:this.pdfViewer.volumeSettings.opacity,m=sf.base.isNullOrUndefined(this.pdfViewer.volumeSettings.thickness)?1:this.pdfViewer.volumeSettings.thickness,t.vertexPoints&&t.vertexPoints.length){if((h=t.vertexPoints).length>2)(V=h[h.length-1]).x===h[0].x&&V.y===h[0].y||h.push(h[0]);else if(1===h.length){x={x:h[0].x+50,y:h[0].y};h.push(x)}}else h=[{x:i.x,y:i.y},{x:i.x,y:i.y+109},{x:i.x+120,y:i.y+109},{x:i.x+120,y:i.y-1},{x:i.x,y:i.y}];t.width=t.width?t.width:1,t.height=t.height?t.height:1}s.isLock=!!t.isLock&&t.isLock,s.minHeight=t.minHeight?t.minHeight:0,s.minWidth=t.minWidth?t.minWidth:0,s.maxWidth=t.maxWidth?t.maxWidth:0,s.maxHeight=t.maxHeight?t.maxHeight:0;var C=96,I=.013888888888888888,k=1,M="in",T="";if(h||"Radius"===e||"Volume"===e)if("Distance"===e||"Perimeter"===e||"Radius"===e){var E=0;if("Radius"===e)E=t.width/2*this.pixelToPointFactor;else{for(var B=0;B<h.length-1;B++)E+=Math.sqrt(Math.pow(h[B].x-h[B+1].x,2)+Math.pow(h[B].y-h[B+1].y,2));E*=this.pixelToPointFactor}var P=E*k;T=this.convertPointToUnits(I,P,M)}else if("Area"===e||"Volume"===e){var D=0,N=h.length-1;for(B=0;B<h.length;B++)D+=(h[N].x*this.pixelToPointFactor*I+h[B].x*this.pixelToPointFactor*I)*(h[N].y*this.pixelToPointFactor*I-h[B].y*this.pixelToPointFactor*I),N=B;D=Math.abs(D/2),"Volume"===e?(D=D*(C*this.convertUnitToPoint(M)*I)*k,T=Math.round(100*D)/100+this.pdfViewer.localeObj.getConstant("cu")+" "+this.pdfViewer.localeObj.getConstant(M)):T=Math.round(100*D)/100+this.pdfViewer.localeObj.getConstant("sq")+" "+this.pdfViewer.localeObj.getConstant(M)}h&&(h=this.pdfViewer.annotation.getVertexPointsXY(h));var F=[],L={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:o,AnnotName:t.Id?t.Id:v,AnnotType:"shape_measure",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:n,AnnotationSettings:s,Author:p,BorderDashArray:t.borderDashArray?t.borderDashArray:0,BorderStyle:"Solid",Bounds:{X:i.x,Y:i.y,Width:t.width,Height:t.height,Left:i.x,Top:i.y,Location:{X:i.x,Y:i.y},Size:{Height:t.height,IsEmpty:!1,Width:t.width}},Calibrate:{Area:[{ConversionFactor:1,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"sq in"}],Depth:96,Distance:[{ConversionFactor:1,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"in"}],Ratio:"1 in = 1 in",TargetUnitConversion:0,Volume:null,X:[{ConversionFactor:.013888889,Denominator:100,FormatDenominator:!1,FractionalType:"D",Unit:"in"}]},Caption:!0,CaptionPosition:"Top",CloudIntensity:0,Comments:t.comments?this.pdfViewer.annotation.updateAnnotationCommentsDetails(t.comments,t,p):[],CustomData:t.customData?t.customData:null,CreatedDate:y,EnableShapeLabel:!1,ExistingCustomData:t.customData?t.customData:null,FillColor:t.fillColor?t.fillColor:c,FontColor:null,FontSize:0,Indent:a,IsCloudShape:!1,IsCommentLock:!1,IsLocked:sf.base.isNullOrUndefined(t.isLock)?w:t.isLock,IsPrint:sf.base.isNullOrUndefined(t.isPrint)?g:t.isPrint,LabelBorderColor:null,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:null,LabelFillColor:null,LabelSettings:null,LeaderLength:sf.base.isNullOrUndefined(t.leaderLength)?30:t.leaderLength,LeaderLineExtension:t.leaderLineExtension?t.leaderLineExtension:2,LeaderLineOffset:t.leaderLineOffset?t.leaderLineOffset:0,LineHeadEnd:t.lineHeadEndStyle?t.lineHeadEndStyle:d?"ClosedArrow":"None",LineHeadStart:t.lineHeadStartStyle?t.lineHeadStartStyle:d?"ClosedArrow":"None",ModifiedDate:t.modifiedDate?t.modifiedDate:y,Note:t.note?t.note:T,Opacity:sf.base.isNullOrUndefined(t.opacity)?f:t.opacity,RectangleDifference:null,RotateAngle:"RotateAngle0",ShapeAnnotationType:r,State:t.review?t.review.state:"",StateModel:t.review?t.review.stateModel:"Review",StrokeColor:t.strokeColor?t.strokeColor:u,Subject:l,Thickness:sf.base.isNullOrUndefined(t.thickness)?m:t.thickness,VertexPoints:h};return F[0]=L,{measureShapeAnnotation:F}}var Ap=function(){function e(e,t){this.measureShapeCount=0,this.isAddAnnotationProgramatically=!1,this.pdfViewer=e,this.pdfViewerBase=t}return Object.defineProperty(e.prototype,"pixelToPointFactor",{get:function(){return.75},enumerable:!1,configurable:!0}),e.prototype.renderMeasureShapeAnnotations=function(e,t,i){Kh.call(this,e,t,i)},e.prototype.getSettings=function(e){return Qh.call(this,e)},e.prototype.setAnnotationType=function(e){$h.call(this,e)},e.prototype.updateMeasureproperties=function(){ep.call(this)},e.prototype.createAnnotationObject=function(e){return tp.call(this,e)},e.prototype.getSelector=function(e){return ip.call(this,e)},e.prototype.getMeasureAnnotType=function(e){return function(e){var t;switch(e){case"Distance":t="Line";break;case"Perimeter":t="Polyline";break;case"Area":case"Volume":t="Polygon";break;case"Radius":t="Circle"}return t}(e)},e.prototype.getShapeType=function(e){return function(e){var t;return"Line"===e.shapeAnnotationType?t="Distance":"Polyline"===e.shapeAnnotationType?t="LineWidthArrowHead":"Polygon"===e.shapeAnnotationType&&"PolygonDimension"===e.indent?t="Polygon":"Polygon"===e.shapeAnnotationType&&"PolygonRadius"===e.indent||"Circle"===e.shapeAnnotationType?t="Radius":"Polygon"===e.shapeAnnotationType&&"PolygonVolume"===e.indent&&(t="Polygon"),t}(e)},e.prototype.getMeasureType=function(e,t){return function(e,t){var i;return"Line"===e?i="Distance":"Polyline"===e?i="Perimeter":"Polygon"===e&&"PolygonDimension"===t?i="Area":"Polygon"===e&&"PolygonRadius"===t||"Circle"===e?i="Radius":"Polygon"===e&&"PolygonVolume"===t&&(i="Volume"),i}(e,t)},e.prototype.getIndent=function(e){return function(e){var t;switch(e){case"Distance":t="LineDimension";break;case"Perimeter":t="PolyLineDimension";break;case"Area":t="PolygonDimension";break;case"Radius":t="PolygonRadius";break;case"Volume":t="PolygonVolume"}return t}(e)},e.prototype.getNumberFormatArray=function(e){return function(e){var t=[];if(e)for(var i=0;i<e.length;i++)t[i]={unit:e[i].Unit,fractionalType:e[i].FractionalType,conversionFactor:e[i].ConversionFactor,denominator:e[i].Denominator,formatDenominator:e[i].FormatDenominator};return t}(e)},e.prototype.createNumberFormat=function(e){return np.call(this,e)},e.prototype.saveMeasureShapeAnnotations=function(){return op.call(this)},e.prototype.createScaleRatioWindow=function(){this.pdfViewer._dotnetInstance.invokeMethodAsync("OpenScaleRatioDialog").catch((function(e){throw console.error("Unhandled Exception:",e),e}))},e.prototype.convertUnitSelect=function(e){this.convertUnit.content=this.createContent(e.item.text).outerHTML},e.prototype.dispUnitSelect=function(e){this.dispUnit.content=this.createContent(e.item.text).outerHTML,this.depthUnit.content=this.createContent(e.item.text).outerHTML},e.prototype.depthUnitSelect=function(e){this.depthUnit.content=this.createContent(e.item.text).outerHTML},e.prototype.createContent=function(e){var t=sf.base.createElement("div",{className:"e-pv-scale-unit-content"});return t.textContent=e,t},e.prototype.createInputElement=function(e,t,i,n){return function(e,t,i,n){var o=sf.base.createElement("div",{id:e+"_container",className:t+"-container"}),s=sf.base.createElement(i,{id:e});return"input"===i&&(s.type="text"),o.appendChild(s),n.appendChild(o),s}(i,t,e,n)},e.prototype.onOkClicked=function(){sp.call(this)},e.prototype.restoreUnit=function(e){return ap.call(this,e)},e.prototype.updateMeasureValues=function(e,t,i,n){rp.call(this,e,t,i,n)},e.prototype.getAnnotationBaseModel=function(e){return lp.call(this,e)},e.prototype.getContent=function(e){return e.split("</div>")[0].split('">')[1]},e.prototype.setConversion=function(e,t){var i;if(t){var n=t.pageIndex;"diagram_helper"===t.id&&(n=t.pageIndex?t.pageIndex:this.pdfViewerBase.activeElements.activePageID,t=this.getCurrentObject(n,null,t.annotName)),i=t?this.getCurrentValues(t.id,n):this.getCurrentValues()}else i=this.getCurrentValues();var o=e*i.ratio;return this.convertPointToUnits(i.factor,o,i.unit)},e.prototype.onCancelClicked=function(){this.scaleRatioDialog.hide()},e.prototype.modifyInCollection=function(e,t,i,n){return dp.call(this,e,t,i,n)},e.prototype.addInCollection=function(e,t){hp.call(this,e,t)},e.prototype.manageAnnotations=function(e,t){pp.call(this,e,t)},e.prototype.getAnnotations=function(e,t){return cp.call(this,e,t)},e.prototype.getCurrentObject=function(e,t,i){return up.call(this,e,t,i)},e.prototype.getCurrentValues=function(e,t){return fp.call(this,e,t)},e.prototype.getCurrentRatio=function(e){return function(e){var t=e.split(" ");return"="===t[3]?parseFloat(t[4])/parseFloat(t[0]):parseFloat(t[3])/parseFloat(t[0])}(e)},e.prototype.calculateArea=function(e,t,i){return mp.call(this,e,t,i)},e.prototype.getArea=function(e,t,i){return wp.call(this,e,t,i)},e.prototype.calculateVolume=function(e,t,i){return gp.call(this,e,t,i)},e.prototype.calculatePerimeter=function(e){var t=sf.drawings.Point.getLengthFromListOfPoints(e.vertexPoints);return this.setConversion(t*this.pixelToPointFactor,e)},e.prototype.getFactor=function(e){return function(e){var t;switch(e){case"in":t=1/72;break;case"cm":t=1/28.346;break;case"mm":t=1/2.835;break;case"pt":t=1;break;case"p":t=1/12;break;case"ft":t=1/864;break;case"ft_in":t=1/72;break;case"m":t=1/2834.64567}return t}(e)},e.prototype.convertPointToUnits=function(e,t,i){return yp.call(this,e,t,i)},e.prototype.convertUnitToPoint=function(e){return function(e){var t;switch(e){case"in":t=72;break;case"cm":t=28.346;break;case"mm":t=2.835;break;case"pt":t=1;break;case"p":t=12;break;case"ft":t=864;break;case"ft_in":t=72;break;case"m":t=2834.64567}return t}(e)},e.prototype.getStringifiedMeasure=function(e){return function(e){return sf.base.isNullOrUndefined(e)||(e.angle=JSON.stringify(e.angle),e.area=JSON.stringify(e.area),e.distance=JSON.stringify(e.distance),e.volume=JSON.stringify(e.volume)),JSON.stringify(e)}(e)},e.prototype.getRgbCode=function(e){return Ir.call(this,e)},e.prototype.saveImportedMeasureAnnotations=function(e,t){vp.call(this,e,t)},e.prototype.updateMeasureAnnotationCollections=function(e,t){return bp.call(this,e,t)},e.prototype.updateAddAnnotationDetails=function(e,t,i){return Sp.call(this,e,t,i)},e}();function xp(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]);for(var t=[],i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++){if(this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),0===a.annotations[r].bounds.height&&(a.annotations[r].bounds.height=.01),0===a.annotations[r].bounds.width&&(a.annotations[r].bounds.width=.01),this.pdfViewerBase.isJsonExported)if(a.annotations[r].isAnnotationRotated)a.annotations[r].bounds=this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex),a.annotations[r].vertexPoints=this.pdfViewer.annotation.getVertexPoints(a.annotations[r].vertexPoints,a.pageIndex);else{var l=this.pdfViewerBase.pageSize[a.pageIndex];l&&(a.annotations[r].annotationRotation=l.rotation)}a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex));var d=a.annotations[r].strokeColor;a.annotations[r].strokeColor=JSON.stringify(this.getRgbCode(d));var h=a.annotations[r].fillColor;if(sf.base.isNullOrUndefined(h)?a.annotations[r].fillColor="transparent":a.annotations[r].fillColor=JSON.stringify(this.getRgbCode(h)),a.annotations[r].vertexPoints=JSON.stringify(this.pdfViewer.annotation.getVertexPoints(a.annotations[r].vertexPoints,a.pageIndex)),null!==a.annotations[r].rectangleDifference&&(a.annotations[r].rectangleDifference=JSON.stringify(a.annotations[r].rectangleDifference)),!0===a.annotations[r].enableShapeLabel){a.annotations[r].labelBounds=JSON.stringify(this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(JSON.parse(a.annotations[r].bounds)));var p=a.annotations[r].labelFillColor;a.annotations[r].labelFillColor=JSON.stringify(this.getRgbCode(p));var c=a.annotations[r].labelBorderColor;a.annotations[r].labelBorderColor=JSON.stringify(this.getRgbCode(c)),a.annotations[r].labelSettings.fillColor=p;var u=a.annotations[r].labelSettings.fontColor;a.annotations[r].fontColor=JSON.stringify(this.getRgbCode(u))}}a.annotations=a.annotations.filter((function(e){return e})),s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)}function Vp(e,t){var i,n=null;if(e.Author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape",e.Subject),e.VertexPoints){n=[];for(var o=0;o<e.VertexPoints.length;o++){var s={x:e.VertexPoints[o].X,y:e.VertexPoints[o].Y};n.push(s)}}e.Bounds&&!0===e.EnableShapeLabel&&(e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16,e.LabelSettings=e.LabelSettings?e.LabelSettings:this.pdfViewer.shapeLabelSettings),e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),i={id:"shape",shapeAnnotationType:e.ShapeAnnotationType,type:this.getShapeType(e.ShapeAnnotationType,e.LineHeadStart,e.LineHeadEnd),author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,pageNumber:t,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:n,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},annotName:e.AnnotName,bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,labelBounds:e.LabelBounds,annotationSelectorSettings:this.getSettings(e),labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isAnnotationRotated:!1},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_shape")}function Cp(e,t){var i=null;if(e.VertexPoints){i=[];for(var n=0;n<e.VertexPoints.length;n++){var o={x:e.VertexPoints[n].X,y:e.VertexPoints[n].Y};i.push(o)}}if(e.Bounds&&!0===e.EnableShapeLabel){e.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(e.Bounds),e.LabelBorderColor=e.LabelBorderColor?e.LabelBorderColor:e.StrokeColor,e.FontColor=e.FontColor?e.FontColor:e.StrokeColor,e.LabelFillColor=e.LabelFillColor?e.LabelFillColor:e.FillColor,e.FontSize=e.FontSize?e.FontSize:16;var s=this.pdfViewer.shapeLabelSettings,a={borderColor:e.StrokeColor,fillColor:e.FillColor,fontColor:e.FontColor,fontSize:e.FontSize,labelContent:e.LabelContent,labelHeight:s.labelHeight,labelWidth:s.labelWidth,opacity:e.Opacity};e.LabelSettings=e.LabelSettings?e.LabelSettings:a}return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{id:"shape",shapeAnnotationType:e.ShapeAnnotationType,type:this.getShapeType(e.ShapeAnnotationType,e.LineHeadStart,e.LineHeadEnd),author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,thickness:e.Thickness,rectangleDifference:e.RectangleDifference,borderStyle:e.BorderStyle,borderDashArray:e.BorderDashArray,rotateAngle:e.RotateAngle,isCloudShape:e.IsCloudShape,cloudIntensity:e.CloudIntensity,vertexPoints:i,lineHeadStart:e.LineHeadStart,lineHeadEnd:e.LineHeadEnd,isLocked:e.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},annotationId:e.AnnotName,bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},labelContent:e.LabelContent,enableShapeLabel:e.EnableShapeLabel,labelFillColor:e.LabelFillColor,labelBorderColor:e.LabelBorderColor,fontColor:e.FontColor,fontSize:e.FontSize,fontFamily:e.FontFamily,labelBounds:e.LabelBounds,pageNumber:t,labelSettings:e.LabelSettings,annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint}}function Ip(e,t,i){t?t.bound?(i.x=t.bound.x?t.bound.x:10,i.y=t.bound.y?t.bound.y:10):(i.x=10,i.y=10):i=(t={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n=null,o=null,s=null,a="",r=!1,l=null,d="",h="",p="",c=0,u=0,f=!0,m=!1,g=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),w=this.pdfViewer.annotation.createGUID();if("Line"===e){if(n=this.pdfViewer.lineSettings.annotationSelectorSettings?this.pdfViewer.lineSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.lineSettings),o=this.pdfViewer.lineSettings.allowedInteractions?this.pdfViewer.lineSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Line",p=this.pdfViewer.lineSettings.strokeColor?this.pdfViewer.lineSettings.strokeColor:"#ff0000",h=this.pdfViewer.lineSettings.fillColor?this.pdfViewer.lineSettings.fillColor:"#ffffff00",d=t.author?t.author:this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:"Guest",c=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.opacity)?1:this.pdfViewer.lineSettings.opacity,f=!!sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.isPrint)||this.pdfViewer.lineSettings.isPrint,m=!sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.isLock)&&this.pdfViewer.lineSettings.isLock,u=sf.base.isNullOrUndefined(this.pdfViewer.lineSettings.thickness)?1:this.pdfViewer.lineSettings.thickness,t.vertexPoints&&t.vertexPoints.length>0){l=[];for(var y=t.vertexPoints.length>1?2:1,v=0;v<y;v++){var b=t.vertexPoints[v];l.push(b)}if(1===y){var S={x:l[0].x+100,y:l[0].y};l.push(S)}}else l=[{x:i.x,y:i.y},{x:i.x+100,y:i.y}];t.width=t.width?t.width:1,t.height=t.height?t.height:1}else if("Arrow"===e){if(n=this.pdfViewer.arrowSettings.annotationSelectorSettings?this.pdfViewer.arrowSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.arrowSettings),o=this.pdfViewer.arrowSettings.allowedInteractions?this.pdfViewer.arrowSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Line",r=!0,p=this.pdfViewer.arrowSettings.strokeColor?this.pdfViewer.arrowSettings.strokeColor:"#ff0000",h=this.pdfViewer.arrowSettings.fillColor?this.pdfViewer.arrowSettings.fillColor:"#ffffff00",d=t.author?t.author:this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:"Guest",c=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.opacity)?1:this.pdfViewer.arrowSettings.opacity,f=!!sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.isPrint)||this.pdfViewer.arrowSettings.isPrint,m=!sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.isLock)&&this.pdfViewer.arrowSettings.isLock,u=sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings.thickness)?1:this.pdfViewer.arrowSettings.thickness,r=!0,t.vertexPoints&&t.vertexPoints.length>0){l=[];for(y=t.vertexPoints.length>1?2:1,v=0;v<y;v++){b=t.vertexPoints[v];l.push(b)}if(1===y){S={x:l[0].x+100,y:l[0].y};l.push(S)}}else l=[{x:i.x,y:i.y},{x:i.x+100,y:i.y}];t.width=t.width?t.width:1,t.height=t.height?t.height:1}else if("Rectangle"===e)n=this.pdfViewer.rectangleSettings.annotationSelectorSettings?this.pdfViewer.rectangleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.rectangleSettings),o=this.pdfViewer.rectangleSettings.allowedInteractions?this.pdfViewer.rectangleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Square",f=!!sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.isPrint)||this.pdfViewer.rectangleSettings.isPrint,m=!sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.isLock)&&this.pdfViewer.rectangleSettings.isLock,d=t.author?t.author:this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:"Guest",h=this.pdfViewer.rectangleSettings.fillColor?this.pdfViewer.rectangleSettings.fillColor:"#ffffff00",p=this.pdfViewer.rectangleSettings.strokeColor?this.pdfViewer.rectangleSettings.strokeColor:"#ff0000",c=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.opacity)?1:this.pdfViewer.rectangleSettings.opacity,u=sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings.thickness)?1:this.pdfViewer.rectangleSettings.thickness,t.width=t.bound&&t.bound.width?t.bound.width:150,t.height=t.bound&&t.bound.height?t.bound.height:75;else if("Circle"===e)n=this.pdfViewer.circleSettings.annotationSelectorSettings?this.pdfViewer.circleSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.circleSettings),o=this.pdfViewer.circleSettings.allowedInteractions?this.pdfViewer.circleSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Circle",p=this.pdfViewer.circleSettings.strokeColor?this.pdfViewer.circleSettings.strokeColor:"#ff0000",h=this.pdfViewer.circleSettings.fillColor?this.pdfViewer.circleSettings.fillColor:"#ffffff00",d=t.author?t.author:this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:"Guest",c=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.opacity)?1:this.pdfViewer.circleSettings.opacity,f=!!sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.isPrint)||this.pdfViewer.circleSettings.isPrint,m=!sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.isLock)&&this.pdfViewer.circleSettings.isLock,u=sf.base.isNullOrUndefined(this.pdfViewer.circleSettings.thickness)?1:this.pdfViewer.circleSettings.thickness,t.width=t.bound&&t.bound.width?t.bound.width:100,t.height=t.bound&&t.bound.height?t.bound.height:90;else if("Polygon"===e){if(n=this.pdfViewer.polygonSettings.annotationSelectorSettings?this.pdfViewer.polygonSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.polygonSettings),o=this.pdfViewer.polygonSettings.allowedInteractions?this.pdfViewer.polygonSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,a="Polygon",p=this.pdfViewer.polygonSettings.strokeColor?this.pdfViewer.polygonSettings.strokeColor:"#ff0000",h=this.pdfViewer.polygonSettings.fillColor?this.pdfViewer.polygonSettings.fillColor:"#ffffff00",d=t.author?t.author:this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:"Guest",c=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.opacity)?1:this.pdfViewer.polygonSettings.opacity,f=!!sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.isPrint)||this.pdfViewer.polygonSettings.isPrint,m=!sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.isLock)&&this.pdfViewer.polygonSettings.isLock,u=sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings.thickness)?1:this.pdfViewer.polygonSettings.thickness,t.vertexPoints&&t.vertexPoints.length){if((l=t.vertexPoints).length>2){var A=l[l.length-1];A.x===l[0].x&&A.y===l[0].y||l.push(l[0])}else if(1===l.length){S={x:l[0].x+50,y:l[0].y};l.push(S)}}else i.y=39,l=[{x:i.x,y:i.y},{x:i.x+42,y:i.y-29},{x:i.x+89,y:i.y-1},{x:i.x+78,y:i.y+42},{x:i.x+11,y:i.y+42},{x:i.x,y:i.y}];t.width=t.width?t.width:1,t.height=t.height?t.height:1}s.isLock=!!t.isLock&&t.isLock,s.minHeight=t.minHeight?t.minHeight:0,s.minWidth=t.minWidth?t.minWidth:0,s.maxWidth=t.maxWidth?t.maxWidth:0,s.maxHeight=t.maxHeight?t.maxHeight:0,l&&(l=this.pdfViewer.annotation.getVertexPointsXY(l));var x=[],V={AllowedInteractions:t.allowedInteractions?t.allowedInteractions:o,AnnotName:t.Id?t.Id:w,AnnotType:"shape",AnnotationSelectorSettings:t.annotationSelectorSettings?t.annotationSelectorSettings:n,AnnotationSettings:s,Author:d,BorderDashArray:t.borderDashArray?t.borderDashArray:0,BorderStyle:"Solid",Bounds:{X:i.x,Y:i.y,Width:t.width,Height:t.height,Left:i.x,Top:i.y,Location:{X:i.x,Y:i.y},Size:{Height:t.height,IsEmpty:!1,Width:t.width}},CloudIntensity:0,Comments:t.comments?this.pdfViewer.annotation.updateAnnotationCommentsDetails(t.comments,t,d):[],CustomData:t.customData?t.customData:null,CreatedDate:g,EnableShapeLabel:!sf.base.isNullOrUndefined(t.enableShapeLabel)&&t.enableShapeLabel,ExistingCustomData:null,FillColor:t.fillColor?t.fillColor:h,FontColor:t.fontColor,FontSize:t.fontSize,FontFamily:t.fontFamily,IsCloudShape:!1,IsCommentLock:!1,IsLocked:sf.base.isNullOrUndefined(t.isLock)?m:t.isLock,IsPrint:sf.base.isNullOrUndefined(t.isPrint)?f:t.isPrint,LabelBorderColor:t.labelBorderColor,LabelBounds:{X:0,Y:0,Width:0,Height:0},LabelContent:t.labelContent,LabelFillColor:t.labelFillColor,LabelSettings:null,LineHeadEnd:t.lineHeadEndStyle?t.lineHeadEndStyle:r?"ClosedArrow":"None",LineHeadStart:t.lineHeadStartStyle?t.lineHeadStartStyle:r?"ClosedArrow":"None",ModifiedDate:t.modifiedDate?t.modifiedDate:g,Note:t.note?t.note:"",Opacity:sf.base.isNullOrUndefined(t.opacity)?c:t.opacity,RectangleDifference:null,RotateAngle:"RotateAngle0",ShapeAnnotationType:a,State:t.review?t.review.state:"",StateModel:t.review?t.review.stateModel:"Review",StrokeColor:t.strokeColor?t.strokeColor:p,Subject:e.toString(),Thickness:sf.base.isNullOrUndefined(t.thickness)?u:t.thickness,VertexPoints:l};return x[0]=V,{shapeAnnotation:x}}function kp(e){this.updateShapeProperties(),this.pdfViewerBase.disableTextSelectionMode();var t="Guest",i=!1;switch(e){case"Line":this.currentAnnotationMode="Line";var n=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.lineSettings.author?this.pdfViewer.lineSettings.author:"Guest",sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.lineSettings)||(i=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.lineSettings.isLock&&this.pdfViewer.lineSettings.isLock),this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Line"),fillColor:this.lineFillColor,notes:"",strokeColor:this.lineStrokeColor,opacity:this.lineOpacity,thickness:this.lineThickness,modifiedDate:n,borderDashArray:this.lineDashArray.toString(),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.lineEndHead.toString()),author:t,subject:"Line",lineHeadStart:this.lineStartHead,lineHeadEnd:this.lineEndHead,isCommentLock:!1,isLocked:i},this.pdfViewer.tool="Line";break;case"Arrow":this.currentAnnotationMode="Arrow";var o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.arrowSettings.author?this.pdfViewer.arrowSettings.author:"Guest",sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.arrowSettings)||(i=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.arrowSettings.isLock&&this.pdfViewer.arrowSettings.isLock),this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Arrow"),opacity:this.arrowOpacity,sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowStartHead.toString()),taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(this.arrowEndHead.toString()),fillColor:this.arrowFillColor,strokeColor:this.arrowStrokeColor,notes:"",thickness:this.arrowThickness,borderDashArray:this.arrowDashArray.toString(),author:t,subject:"Arrow",modifiedDate:o,lineHeadStart:this.arrowStartHead,lineHeadEnd:this.arrowEndHead,isCommentLock:!1,isLocked:i},this.pdfViewer.tool="Line";break;case"Rectangle":this.currentAnnotationMode="Rectangle";var s=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.rectangleSettings.author?this.pdfViewer.rectangleSettings.author:"Guest",sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.rectangleSettings)||(i=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.rectangleSettings.isLock&&this.pdfViewer.rectangleSettings.isLock),this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Rectangle"),strokeColor:this.rectangleStrokeColor,fillColor:this.rectangleFillColor,opacity:this.rectangleOpacity,notes:"",thickness:this.rectangleThickness,borderDashArray:"0",modifiedDate:s,author:t,subject:"Rectangle",isCommentLock:!1,isLocked:i},this.pdfViewer.tool="DrawTool";break;case"Circle":this.currentAnnotationMode="Circle";var a=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.circleSettings.author?this.pdfViewer.circleSettings.author:"Guest",sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.circleSettings)||(i=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.circleSettings.isLock&&this.pdfViewer.circleSettings.isLock),this.pdfViewer.drawingObject={shapeAnnotationType:this.setShapeType("Circle"),strokeColor:this.circleStrokeColor,fillColor:this.circleFillColor,opacity:this.circleOpacity,notes:"",thickness:this.circleThickness,borderDashArray:"0",modifiedDate:a,author:t,subject:"Circle",isCommentLock:!1,isLocked:i},this.pdfViewer.tool="DrawTool";break;case"Polygon":this.currentAnnotationMode="Polygon";var r=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();t="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.polygonSettings.author?this.pdfViewer.polygonSettings.author:"Guest",sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.polygonSettings)||(i=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.polygonSettings.isLock&&this.pdfViewer.polygonSettings.isLock),this.pdfViewer.drawingObject={strokeColor:this.polygonStrokeColor,fillColor:this.polygonFillColor,opacity:this.polygonOpacity,thickness:this.polygonThickness,borderDashArray:"0",notes:"",author:t,subject:"Polygon",modifiedDate:r,borderStyle:"",isCommentLock:!1,isLocked:i},this.pdfViewer.tool="Polygon"}}function Mp(e,t,i){if(e)if(e.length>=1){if(!this.pdfViewer.annotation.getStoredAnnotations(t,e,"_annotations_shape")||i)for(var n=0;n<e.length;n++){var o=e[n];o.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(o,t,o.AnnotType);var s=null;this.shapeCount=this.shapeCount+1;var a=void 0;if(o.ShapeAnnotationType){i&&!o.isAlreadyAdded&&this.pdfViewerBase.isJsonImported&&(o.Bounds=this.pdfViewerBase.importJsonForRotatedDocuments(o.Rotate,t,o.Bounds,o.AnnotationRotation),a=this.pdfViewerBase.isPageRotated);var r=null;if(o.VertexPoints)if(r=[],i&&this.pdfViewerBase.isJsonImported)r=this.pdfViewerBase.calculateVertexPoints(o.Rotate,t,o.VertexPoints,o.AnnotationRotation);else for(var l=0;l<o.VertexPoints.length;l++){var d={x:o.VertexPoints[l].X?o.VertexPoints[l].X:o.VertexPoints[l].x,y:o.VertexPoints[l].Y?o.VertexPoints[l].Y:o.VertexPoints[l].y};r.push(d)}o.Bounds&&!0===o.EnableShapeLabel&&(o.LabelBounds=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBoundsFromLoadedDocument(o.Bounds),o.LabelBorderColor=o.LabelBorderColor?o.LabelBorderColor:o.StrokeColor,o.FontColor=o.FontColor?o.FontColor:o.StrokeColor,o.LabelFillColor=o.LabelFillColor?o.LabelFillColor:o.FillColor,o.FontSize=o.FontSize?o.FontSize:16,o.LabelSettings=o.LabelSettings?o.LabelSettings:this.pdfViewer.shapeLabelSettings),o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,o.AnnotationSettings=o.AnnotationSettings?o.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(o),o.allowedInteractions=o.AllowedInteractions?o.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var h=!0;h=sf.base.isNullOrUndefined(o.IsPrint)?sf.base.isNullOrUndefined(o.isPrint)?o.AnnotationSettings.isPrint:o.isPrint:o.IsPrint;var p=o.Bounds.X?o.Bounds.X:o.Bounds.x,c=o.Bounds.Y?o.Bounds.Y:o.Bounds.y,u=o.Bounds.Width?o.Bounds.Width:o.Bounds.width,f=o.Bounds.Height?o.Bounds.Height:o.Bounds.height,m=(s={id:"shape"+this.shapeCount,shapeAnnotationType:o.ShapeAnnotationType,author:o.Author,allowedInteractions:o.allowedInteractions,modifiedDate:o.ModifiedDate,subject:o.Subject,pageNumber:t,type:this.getShapeType(o.ShapeAnnotationType,o.LineHeadStart,o.LineHeadEnd),note:o.Note,strokeColor:o.StrokeColor,fillColor:o.FillColor,opacity:o.Opacity,thickness:o.Thickness,rectangleDifference:o.RectangleDifference,borderStyle:o.BorderStyle,borderDashArray:o.BorderDashArray,rotateAngle:o.RotateAngle,isCloudShape:o.IsCloudShape,cloudIntensity:o.CloudIntensity,vertexPoints:r,lineHeadStart:o.LineHeadStart,lineHeadEnd:o.LineHeadEnd,isLocked:o.IsLocked,isLock:o.IsLocked,comments:this.pdfViewer.annotationModule.getAnnotationComments(o.Comments,o,o.Author),review:{state:o.State,stateModel:o.StateModel,modifiedDate:o.ModifiedDate,author:o.Author},annotName:o.AnnotName,bounds:{x:p,y:c,left:p,top:c,width:u,height:f,right:o.Bounds.Right,bottom:o.Bounds.Bottom},labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,fontFamily:o.FontFamily,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,labelBounds:o.LabelBounds,annotationSelectorSettings:this.getSettings(o),labelSettings:o.LabelSettings,annotationSettings:o.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(o),isPrint:h,isCommentLock:o.IsCommentLock,isAnnotationRotated:a}).vertexPoints;null==r&&(m=[]),o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;var g={id:"shape"+this.shapeCount,type:this.getShapeType(o.ShapeAnnotationType,o.LineHeadStart,o.LineHeadEnd),shapeAnnotationType:this.getShapeType(o.ShapeAnnotationType,o.LineHeadStart,o.LineHeadEnd),author:s.author,allowedInteractions:s.allowedInteractions,modifiedDate:s.modifiedDate,annotName:s.annotName,subject:s.subject,notes:s.note,fillColor:s.fillColor,strokeColor:s.strokeColor,opacity:s.opacity,thickness:s.thickness,borderStyle:s.borderStyle,borderDashArray:s.borderDashArray?s.borderDashArray.toString():"0",rotateAngle:parseFloat(s.rotateAngle.split("Angle")[1]),comments:s.comments,review:s.review,isCloudShape:s.isCloudShape,cloudIntensity:s.cloudIntensity,taregetDecoraterShapes:this.pdfViewer.annotation.getArrowType(s.lineHeadEnd),sourceDecoraterShapes:this.pdfViewer.annotation.getArrowType(s.lineHeadStart),vertexPoints:m,bounds:{x:s.bounds.left,y:s.bounds.top,width:s.bounds.width,height:s.bounds.height},pageIndex:s.pageNumber,labelContent:o.LabelContent,enableShapeLabel:o.EnableShapeLabel,labelFillColor:o.LabelFillColor,fontColor:o.FontColor,fontFamily:o.FontFamily,labelBorderColor:o.LabelBorderColor,fontSize:o.FontSize,labelBounds:o.LabelBounds,annotationSelectorSettings:o.AnnotationSelectorSettings,annotationSettings:s.annotationSettings,annotationAddMode:o.annotationAddMode,isPrint:h,isLocked:o.IsLocked,isCommentLock:s.isCommentLock};this.pdfViewer.add(g);if(this.pdfViewer.annotationModule.storeAnnotations(t,s,"_annotations_shape"),this.isAddAnnotationProgramatically){var w={opacity:g.opacity,strokeColor:g.strokeColor,thickness:g.thickness,modifiedDate:g.modifiedDate,width:g.bounds.width,height:g.bounds.height};this.pdfViewer.fireAnnotationAdd(g.pageIndex,g.annotName,this.getShapeAnnotationType(s.shapeAnnotationType),s.bounds,w)}}}}else if(e.shapeAnnotationType){s=this.createAnnotationObject(e);sf.base.isNullOrUndefined(e.formFieldAnnotationType)||""===e.formFieldAnnotationType?this.pdfViewer.annotationModule.isFormFieldShape=!1:this.pdfViewer.annotationModule.isFormFieldShape=!0,this.pdfViewer.annotationModule.storeAnnotations(t,s,"_annotations_shape"),this.pdfViewer.annotationModule.triggerAnnotationAdd(e)}}function Tp(e){var t,i,n=this.pdfViewer.annotation.createGUID();e.annotName=n,e.formFieldAnnotationType||this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("shape",e.pageIndex+1,e.shapeAnnotationType,n,"",null,e.author),e.wrapper.bounds?(t={x:e.wrapper.bounds.x,y:e.wrapper.bounds.y,left:e.wrapper.bounds.x,top:e.wrapper.bounds.y,height:e.wrapper.bounds.height,width:e.wrapper.bounds.width,right:e.wrapper.bounds.right,bottom:e.wrapper.bounds.bottom},i=this.pdfViewer.annotationModule.inputElementModule.calculateLabelBounds(e.wrapper.bounds)):(t={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0},i={x:0,y:0,left:0,top:0,height:0,width:0,right:0,bottom:0}),"Line"===e.subject&&"Polygon"===e.shapeAnnotationType?e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape","Polygon"):e.author=this.pdfViewer.annotationModule.updateAnnotationAuthor("shape",e.subject);var o=parseInt(e.borderDashArray,10);o=isNaN(o)?0:o;var s=this.pdfViewer.annotationModule.findAnnotationSettings(e,!0);e.isPrint=s.isPrint;var a=this.pdfViewer.shapeLabelSettings,r={borderColor:e.strokeColor,fillColor:e.fillColor,fontColor:e.fontColor,fontSize:e.fontSize,labelContent:e.labelContent,labelHeight:a.labelHeight,labelWidth:a.labelMaxWidth,opacity:e.opacity};return{id:e.id,shapeAnnotationType:this.getShapeAnnotType(e.shapeAnnotationType),type:this.getShapeType(e.shapeAnnotationType,e.lineHeadStart,e.lineHeadEnd),author:e.author,allowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),subject:e.subject,note:e.notes,strokeColor:e.strokeColor,annotName:n,comments:[],review:{state:"",stateModel:"",modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),author:e.author},fillColor:e.fillColor,opacity:e.opacity,thickness:e.thickness,pageNumber:e.pageIndex,borderStyle:e.borderStyle,borderDashArray:o,bounds:t,modifiedDate:this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),rotateAngle:"RotateAngle"+e.rotateAngle,isCloudShape:e.isCloudShape,cloudIntensity:e.cloudIntensity,vertexPoints:e.vertexPoints,lineHeadStart:this.pdfViewer.annotation.getArrowTypeForCollection(e.sourceDecoraterShapes),lineHeadEnd:this.pdfViewer.annotation.getArrowTypeForCollection(e.taregetDecoraterShapes),rectangleDifference:[],isLocked:s.isLock,labelContent:e.labelContent,enableShapeLabel:e.enableShapeLabel,labelFillColor:e.labelFillColor,fontColor:e.fontColor,labelBorderColor:e.labelBorderColor,fontSize:e.fontSize,labelBounds:i,annotationSelectorSettings:this.getSelector(e.shapeAnnotationType,e.subject),labelSettings:r,annotationSettings:s,customData:this.pdfViewer.annotation.getShapeData(e.shapeAnnotationType,e.subject),isPrint:e.isPrint,isCommentLock:e.isCommentLock,isAnnotationRotated:!1}}function Ep(e){this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.ShapeAnnotationType,e.Subject)}var Bp=function(){function e(e,t){this.shapeCount=0,this.isAddAnnotationProgramatically=!1,this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderShapeAnnotations=function(e,t,i){Mp.call(this,e,t,i)},e.prototype.getSettings=function(e){return Ep.call(this,e)},e.prototype.setAnnotationType=function(e){kp.call(this,e)},e.prototype.updateShapeProperties=function(){this.lineFillColor=this.pdfViewer.lineSettings.fillColor?this.pdfViewer.lineSettings.fillColor:"#ffffff00",this.lineStrokeColor=this.pdfViewer.lineSettings.strokeColor?this.pdfViewer.lineSettings.strokeColor:"#ff0000",this.lineThickness=this.pdfViewer.lineSettings.thickness?this.pdfViewer.lineSettings.thickness:1,this.lineOpacity=this.pdfViewer.lineSettings.opacity?this.pdfViewer.lineSettings.opacity:1,this.lineDashArray=this.pdfViewer.lineSettings.borderDashArray?this.pdfViewer.lineSettings.borderDashArray:0,this.lineStartHead=this.pdfViewer.lineSettings.lineHeadStartStyle?this.pdfViewer.lineSettings.lineHeadStartStyle:"None",this.lineEndHead=this.pdfViewer.lineSettings.lineHeadEndStyle?this.pdfViewer.lineSettings.lineHeadEndStyle:"None",this.arrowFillColor=this.pdfViewer.arrowSettings.fillColor?this.pdfViewer.arrowSettings.fillColor:"#ffffff00",this.arrowStrokeColor=this.pdfViewer.arrowSettings.strokeColor?this.pdfViewer.arrowSettings.strokeColor:"#ff0000",this.arrowThickness=this.pdfViewer.arrowSettings.thickness?this.pdfViewer.arrowSettings.thickness:1,this.arrowOpacity=this.pdfViewer.arrowSettings.opacity?this.pdfViewer.arrowSettings.opacity:1,this.arrowDashArray=this.pdfViewer.arrowSettings.borderDashArray?this.pdfViewer.arrowSettings.borderDashArray:0,this.arrowStartHead=this.pdfViewer.arrowSettings.lineHeadStartStyle?this.pdfViewer.arrowSettings.lineHeadStartStyle:"Closed",this.arrowEndHead=this.pdfViewer.arrowSettings.lineHeadEndStyle?this.pdfViewer.arrowSettings.lineHeadEndStyle:"Closed",this.rectangleFillColor=this.pdfViewer.rectangleSettings.fillColor?this.pdfViewer.rectangleSettings.fillColor:"#ffffff00",this.rectangleStrokeColor=this.pdfViewer.rectangleSettings.strokeColor?this.pdfViewer.rectangleSettings.strokeColor:"#ff0000",this.rectangleThickness=this.pdfViewer.rectangleSettings.thickness?this.pdfViewer.rectangleSettings.thickness:1,this.rectangleOpacity=this.pdfViewer.rectangleSettings.opacity?this.pdfViewer.rectangleSettings.opacity:1,this.circleFillColor=this.pdfViewer.circleSettings.fillColor?this.pdfViewer.circleSettings.fillColor:"#ffffff00",this.circleStrokeColor=this.pdfViewer.circleSettings.strokeColor?this.pdfViewer.circleSettings.strokeColor:"#ff0000",this.circleThickness=this.pdfViewer.circleSettings.thickness?this.pdfViewer.circleSettings.thickness:1,this.circleOpacity=this.pdfViewer.circleSettings.opacity?this.pdfViewer.circleSettings.opacity:1,this.polygonFillColor=this.pdfViewer.polygonSettings.fillColor?this.pdfViewer.polygonSettings.fillColor:"#ffffff00",this.polygonStrokeColor=this.pdfViewer.polygonSettings.strokeColor?this.pdfViewer.polygonSettings.strokeColor:"#ff0000",this.polygonThickness=this.pdfViewer.polygonSettings.thickness?this.pdfViewer.polygonSettings.thickness:1,this.polygonOpacity=this.pdfViewer.polygonSettings.opacity?this.pdfViewer.polygonSettings.opacity:1},e.prototype.setShapeType=function(e){var t;switch(e){case"Line":t="Line";break;case"Circle":t="Ellipse";break;case"Square":t="Rectangle";break;case"Polyline":t="Line";break;case"Arrow":t="LineWidthArrowHead"}return t},e.prototype.getShapeAnnotationType=function(e){return function(e){var t="Rectangle";switch(e){case"Line":t="Line";break;case"Circle":t="Circle";break;case"Square":t="Rectangle";break;case"Polyline":t="Line";break;case"Polygon":t="Polygon";break;case"Redaction":t="Redaction"}return t}(e)},e.prototype.getShapeType=function(e,t,i){return function(e,t,i){var n="Rectangle";switch(e){case"Line":n="Line";break;case"Circle":n="Ellipse";break;case"Square":n="Rectangle";break;case"Polyline":n="Line";break;case"Polygon":n="Polygon";break;case"Redaction":n="Redaction"}return"Line"!==e&&"Polyline"!==e||"None"===t&&"None"===i||(n="LineWidthArrowHead"),n}(e,t,i)},e.prototype.getShapeAnnotType=function(e){return function(e){var t;switch(e){case"Line":case"LineWidthArrowHead":t="Line";break;case"Rectangle":t="Square";break;case"Ellipse":t="Circle";break;case"Polygon":t="Polygon";break;case"Redaction":t="Redaction"}return t}(e)},e.prototype.modifyInCollection=function(e,t,i){sf.base.isNullOrUndefined(i.formFieldAnnotationType)||""===i.formFieldAnnotationType?this.pdfViewer.annotationModule.isFormFieldShape=!1:this.pdfViewer.annotationModule.isFormFieldShape=!0,this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null;i&&"bounds"===e&&this.pdfViewer.annotationModule.stickyNotesAnnotationModule.updateAnnotationModifiedDate(i,!0);var o=this.getAnnotations(t,null);if(null!=o&&i){for(var s=0;s<o.length;s++)if(i.id===o[s].id){if("bounds"===e){if("Line"===o[s].shapeAnnotationType||"Polygon"===o[s].shapeAnnotationType?(o[s].vertexPoints=i.vertexPoints,o[s].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom}):o[s].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height,right:i.bounds.right,bottom:i.bounds.bottom},!0===o[s].enableShapeLabel&&i.wrapper){var a=0,r=0,l=0;i.wrapper.bounds.width&&(l=(l=i.wrapper.bounds.width/2)>0&&l<151?l:151),i.wrapper.bounds.left&&(r=i.wrapper.bounds.left+i.wrapper.bounds.width/2-l/2),i.wrapper.bounds.top&&(a=i.wrapper.bounds.top+i.wrapper.bounds.height/2-12.3),o[s].labelBounds={left:r,top:a,width:l,height:24.6,right:0,bottom:0}}}else if("fill"===e)o[s].fillColor=i.wrapper.children[0].style.fill;else if("stroke"===e)o[s].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[s].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)o[s].thickness=i.wrapper.children[0].style.strokeWidth;else if("dashArray"===e)o[s].borderDashArray=i.wrapper.children[0].style.strokeDashArray,o[s].borderStyle=i.borderStyle;else if("startArrow"===e)o[s].lineHeadStart=this.pdfViewer.annotation.getArrowTypeForCollection(i.sourceDecoraterShapes);else if("endArrow"===e)o[s].lineHeadEnd=this.pdfViewer.annotation.getArrowTypeForCollection(i.taregetDecoraterShapes);else if("notes"===e)o[s].note=i.notes;else{if("delete"===e){n=o.splice(s,1)[0];break}if("labelContent"===e){o[s].note=i.labelContent,o[s].labelContent=i.labelContent;break}"fontColor"===e?o[s].fontColor=i.fontColor:"fontSize"===e?o[s].fontSize=i.fontSize:"isLock"===e?(o[s].annotationSettings&&(o[s].annotationSettings.isLock=i.isLock),o[s].isLocked=i.isLock,o[s].isLock=i.isLock):"allowedInteractions"===e?o[s].allowedInteractions=i.allowedInteractions:"isPrint"===e&&(o[s].annotationSettings&&(o[s].annotationSettings.isPrint=i.isPrint),o[s].isPrint=i.isPrint)}this.pdfViewerBase.isUpdateProgrammatically||(o[s].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()),this.pdfViewer.annotationModule.storeAnnotationCollections(o[s],t)}this.manageAnnotations(o,t)}return n},e.prototype.addInCollection=function(e,t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageAnnotations(i,e)},e.prototype.saveShapeAnnotations=function(){return xp.call(this)},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_shape");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_shape",s)}},e.prototype.createAnnotationObject=function(e){return Tp.call(this,e)},e.prototype.getSelector=function(e,t){return ip.call(this,e,t)},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_shape");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_shape"]),n){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[s]?o[s].annotations:t}else i=t;return i},e.prototype.getRgbCode=function(e){return Ir.call(this,e)},e.prototype.saveImportedShapeAnnotations=function(e,t){Vp.call(this,e,t)},e.prototype.updateShapeAnnotationCollections=function(e,t){return Cp.call(this,e,t)},e.prototype.updateAddAnnotationDetails=function(e,t,i){return Ip.call(this,e,t,i)},e}();function Pp(e,t,i,n){var o=!1;if(e)for(var s=new Set(this.renderedStampCollection),a=0,r=e;a<r.length;a++){var l=r[a];if(!s.has(l)){o=!1;break}o=!0}if(n&&(o=!1),e&&!o)for(var d=0;d<e.length;d++){var h=e[d];h.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(h,t,h.AnnotType);var p=h.Apperarance,c=h.Rect,u=h.Opacity,f=(h.AnnotationSelectorSettings,parseFloat(e[d].pageNumber));isNaN(f)&&(f=e[d].PageNumber);var m=h.IsDynamic;document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+f);h.AnnotationSettings=h.AnnotationSettings?h.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings);var g=this.stampImageData(h);if(this.pdfViewerBase.isDynamicStamp=!1,this.dynamicText="",m){this.retrieveDynamicStampAnnotation(h.Subject);for(var w=0;w<p.length;w++){if("string"===(A=p[w]).type&&void 0!==A.text){var y=void 0;"("===A.text.charAt(0)&&(2===(y=n?A.text:A.text.split("(")[1].split(")")[0]).split("(").length?y.split("(")[1].split(")")[0].toLowerCase()!==h.Subject.toLowerCase()&&(this.dynamicText+=y.split("(")[1].split(")")[0]):y.toLowerCase()!==h.Subject.toLowerCase()&&(this.dynamicText+=y)),this.pdfViewerBase.isDynamicStamp=!0}}}else this.retrievestampAnnotation(h.Subject);if(sf.base.isNullOrUndefined(h.StampType)||h.StampType&&g)if(this.renderedStampCollection.push(e[d]),m&&h.Subject&&"Draft"!==h.Subject&&!g){this.retrieveDynamicStampAnnotation(h.Subject),this.isExistingStamp=!0;var v=this.calculateImagePosition(c,!0),b=h.RotateAngle;for(w=0;w<p.length;w++){if("string"===(A=p[w]).type&&void 0!==A.text){y=void 0;"("===A.text.charAt(0)&&(2===(y=n?A.text:A.text.split("(")[1].split(")")[0]).split("(").length?y.split("(")[1].split(")")[0].toLowerCase()!==h.Subject.toLowerCase()&&(this.dynamicText+=y.split("(")[1].split(")")[0]):y.toLowerCase()!==h.Subject.toLowerCase()&&(this.dynamicText+=y))}}this.renderStamp(v.left,v.top,v.width,v.height,f,u,b,i,h,!0)}else if(h.Subject&&!g){this.retrievestampAnnotation(h.Subject),this.isExistingStamp=!0;v=this.calculateImagePosition(c,!0),b=h.RotateAngle;this.renderStamp(v.left,v.top,v.width,v.height,f,u,b,i,h),this.isExistingStamp=!1}else if(p)for(var S=0;S<p.length;S++){var A,x=(A=p[S]).imagedata,V=(A.matrix,A.CreationDate),C=A.ModifiedDate,I=A.RotateAngle;if(x){var k=void 0;window.customStampCollection&&window.customStampCollection.get(h.AnnotName)?k=window.customStampCollection.get(h.AnnotName):(k=new Image).src=x;k.complete,this.customStampLoad(this,c,h,f,k,V,C,I,u,i)}}}}function Dp(e,t,i,n,o,s,a,r,l,d){sf.base.Browser.isDevice&&(this.pdfViewerBase.customStampCount+=1);var h,p="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest";if(this.pdfViewerBase.isDynamicStamp){var c=(new Date).toString().split(" ").splice(1,3).join(" "),u=(new Date).toLocaleTimeString();this.dynamicText="By "+p+" at "+u+" , "+c+" "}d&&(this.dynamicText+=" ",this.pdfViewerBase.isDynamicStamp=!0);var f=null,m=(l&&l.annotationAddMode,this.currentStampAnnotation);if(m){if(null!==i&&null!==n){m.width=i,m.height=n,m.Opacity=s,m.RotateAngle=a;var g=l.AnnotName;m.AnnotName=g;var w=l.State;m.State=w;var y=l.AnnotationSettings;m.AnnotationSettings=y||this.pdfViewer.annotationModule.updateAnnotationSettings(m);var v=l.AnnotationSelectorSettings;m.AnnotationSelectorSettings=v||this.pdfViewer.annotationSelectorSettings;var b=l.ModifiedDate;m.ModifiedDate=b;var S=l.StateNodel;m.StateModel=S;var A=l.IsCommentLock;m.IsCommentLock=A;var x=l.Note;m.Note=x;var V=l.Author;m.Author=V;var C=l.Subject;m.Subject=C;var I=this.pdfViewer.annotation.getCustomData(l);m.allowedInteractions=l.AllowedInteractions?l.AllowedInteractions:l.allowedInteractions?l.allowedInteractions:["None"],m.CustomData=I;var k=!0;k=sf.base.isNullOrUndefined(l.IsPrint)?sf.base.isNullOrUndefined(l.isPrint)?l.AnnotationSettings.isPrint:l.isPrint:l.IsPrint,m.isPrint=k;var M=!1;M=sf.base.isNullOrUndefined(l.IsLock)?sf.base.isNullOrUndefined(l.isLocked)?l.AnnotationSettings.isLock:l.isLocked:l.IsLock,m.isLocked=M,null===m.Author&&(m.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest");var T=l.Comments;m.Comments=this.pdfViewer.annotationModule.getAnnotationComments(T,l,V)}else{g=this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",o+1,"",g,"",m.state,m.author),m.AnnotationSettings=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),m.AnnotName=g,m.Comments=[],m.State="",m.StateModel="",m.Note="",m.Opacity=1,m.RotateAngle=0,m.ModifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),m.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest"}var E=sf.drawings.processPathData(m.pathdata),B=sf.drawings.splitArrayCollection(E),P=l?l.annotationAddMode:"UI Drawn Annotation";m.AnnotationSelectorSettings=m.AnnotationSelectorSettings?m.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,h={id:"stamp"+this.pdfViewerBase.customStampCount,author:m.Author,bounds:{x:e,y:t,left:e,top:t,width:m.width,height:m.height},pageIndex:o,data:m.pathdata,modifiedDate:m.ModifiedDate,shapeAnnotationType:"Stamp",type:"Stamp",strokeColor:m.strokeColor,fillColor:m.fillColor,opacity:m.Opacity,stampFillColor:m.stampFillColor,stampStrokeColor:m.stampStrokeColor,rotateAngle:m.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotName:m.AnnotName,notes:m.Note,comments:m.Comments,review:{state:m.State,stateModel:m.StateModel,modifiedDate:m.ModifiedDate,author:m.Author},subject:m.iconName,annotationSelectorSettings:m.AnnotationSelectorSettings,annotationSettings:m.AnnotationSettings,allowedInteractions:m.allowedInteractions,annotationAddMode:P,isPrint:m.isPrint,isLocked:m.isLocked,isCommentLock:m.IsCommentLock},f={stampAnnotationType:"path",author:m.Author,modifiedDate:m.ModifiedDate,subject:m.Subject,note:m.Note,type:"Stamp",strokeColor:m.strokeColor,fillColor:m.fillColor,opacity:m.Opacity,stampFillcolor:m.stampFillColor,rotateAngle:m.RotateAngle,creationDate:m.creationDate,pageNumber:o,icon:m.iconName,stampAnnotationPath:B,randomId:"stamp"+this.pdfViewerBase.customStampCount,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{x:e,y:t,left:e,top:t,width:m.width,height:m.height},annotName:m.AnnotName,comments:m.Comments,review:{state:m.State,stateModel:m.StateModel,author:m.Author,modifiedDate:m.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(m),annotationSettings:m.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(m),allowedInteractions:m.allowedInteractions,isPrint:m.isPrint,isLocked:m.isLocked,isCommentLock:m.IsCommentLock,isMaskedImage:m.IsMaskedImage,customStampName:"",template:m?m.StampTemplate:null,templateSize:m?m.templateSize:0},this.storeStampInSession(o,f),this.isAddAnnotationProgramatically&&this.triggerAnnotationAdd(h,m),this.pdfViewer.add(h),sf.base.isNullOrUndefined(r)&&(r=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+o)),this.pdfViewer.renderDrawing(r,o),this.pdfViewerBase.stampAdded&&(this.triggerAnnotationAdd(h,m),this.pdfViewerBase.isNewStamp=!0,this.pdfViewer.annotation.addAction(o,null,h,"Addition","",h,h)),this.pdfViewerBase.stampAdded=!1,this.isExistingStamp||(m.creationDate=(new Date).toLocaleDateString(),m.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())}this.resetAnnotation()}function Np(e,t,i,n,o,s,a,r,l,d,h,p){var c,u,f,m,g=null,w=this.pdfViewer.customStampSettings.left>0&&this.pdfViewer.customStampSettings.top>0,y=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),v=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,b=!(sf.base.isNullOrUndefined(d)||!d.StampTemplate);sf.base.Browser.isDevice&&(this.pdfViewerBase.customStampCount+=1);var S=!0,A=!0,x=this.currentStampAnnotation;l?(c=d.AnnotName,u=d.Author,m=d.IsCommentLock,y=d.AnnotationSettings?d.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),v=d.AllowedInteractions?d.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(d),null===u&&(u="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest"),d.IsLocked&&(y.isLock=d.IsLocked),d.AnnotationSettings=y,S=sf.base.isNullOrUndefined(d.IsPrint)?sf.base.isNullOrUndefined(d.isPrint)?y.isPrint:d.isPrint:d.IsPrint,A=sf.base.isNullOrUndefined(d.IsLock)?sf.base.isNullOrUndefined(d.IsLocked)?y.isLock:d.IsLocked:d.IsLock):(c=this.pdfViewer.annotation.createGUID(),u="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest",m=!1),o||(o=d.ModifiedDate?d.ModifiedDate:(new Date).toLocaleString());var V=d?d.annotationAddMode:"UI Drawn Annotation ",C={id:"stamp"+this.pdfViewerBase.customStampCount,author:u,allowedInteractions:v,bounds:{x:e.left,y:e.top,left:e.left,top:e.top,width:e.width,height:e.height},pageIndex:t,data:p?i.src:"",modifiedDate:o,shapeAnnotationType:"Image",type:"Image",opacity:a,rotateAngle:null!=d?d.RotateAngle:0,annotName:c,comments:[],review:{state:null!=d?d.State:"",stateModel:null!=d?d.StateModel:"",modifiedDate:null!=d?d.ModifiedDate:"",author:u},annotationSettings:y,annotationAddMode:V,signatureName:h,isPrint:S,isLocked:A,isCommentLock:m};this.currentStampAnnotation=C;var I=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;if(l||w){d||(this.isStampAnnotSelected=!1,(d=C).Note="",d.State="",d.StateModel="",this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",t+1,"",c,"",null,u));var k="";if(x){var M=sf.drawings.processPathData(x.pathdata);k=sf.drawings.splitArrayCollection(M)}if(g="Stamp"===d.StampType?{stampAnnotationType:"path",author:d.Author,modifiedDate:d.ModifiedDate,subject:d.Subject,note:d.Note,type:"Stamp",strokeColor:d.strokeColor,fillColor:x.fillColor,opacity:d.Opacity,stampFillcolor:x.stampFillColor,rotateAngle:d.RotateAngle,creationDate:d.creationDate,pageNumber:t,icon:x.iconName,stampAnnotationPath:k,randomId:"stamp"+this.pdfViewerBase.customStampCount,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{x:e.left,y:e.top,left:e.left,top:e.top,width:e.width,height:e.height},annotName:d.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(d.Comments,d,d.Author),review:{state:d.State,stateModel:d.StateModel,author:d.Author,modifiedDate:d.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(d),annotationSettings:d.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(d),allowedInteractions:v,isPrint:d.isPrint,isLocked:d.IsLocked,isCommentLock:d.IsCommentLock,isMaskedImage:d.IsMaskedImage,customStampName:"",template:d?d.StampTemplate:null,templateSize:d?d.templateSize:0}:{stampAnnotationType:"image",type:"Image",author:u,allowedInteractions:v,modifiedDate:o,subject:"",note:d.Note,strokeColor:"",fillColor:"",opacity:a,rotateAngle:null!=d?d.RotateAngle:0,creationDate:n,pageNumber:t,icon:"",stampAnnotationPath:p?i.src:"",randomId:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e.left,y:e.top,left:e.left,top:e.top,width:e.width,height:e.height},stampFillcolor:"",isDynamicStamp:!1,annotName:c,comments:this.pdfViewer.annotationModule.getAnnotationComments(d.Comments,d,d.Author),review:{state:d.State,stateModel:d.StateModel,author:u,modifiedDate:o},shapeAnnotationType:"stamp",annotationSelectorSettings:I,annotationSettings:y,customData:this.pdfViewer.annotation.getCustomData(d),isPrint:S,isLocked:C.isLocked,isCommentLock:m,isMaskedImage:d.IsMaskedImage,customStampName:d.CustomStampName,template:b?d.StampTemplate:null,templateSize:d?d.templateSize:0},C.comments=this.pdfViewer.annotationModule.getAnnotationComments(d.Comments,d,d.Author),C.review={state:d.State,stateModel:d.StateModel,author:u,modifiedDate:o},this.isAddAnnotationProgramatically){var T={opacity:C.opacity,borderColor:C.strokeColor,borderWidth:C.thickness,author:d.author,subject:d.subject,modifiedDate:d.modifiedDate,fillColor:C.fillColor,fontSize:C.fontSize,width:C.bounds.width,height:C.bounds.height,fontColor:C.fontColor,fontFamily:C.fontFamily,defaultText:C.dynamicText,fontStyle:C.font,textAlignment:C.textAlign};this.customStampName=this.customStampName?this.customStampName:this.currentStampAnnotation.signatureName?this.currentStampAnnotation.signatureName:d.id,this.pdfViewer.fireAnnotationAdd(C.pageIndex,C.annotName,"Image",C.bounds,T,null,null,null,null,null,this.customStampName),this.customStampName=null}this.pdfViewer.add(C),sf.base.isNullOrUndefined(r)&&(r=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+t)),this.pdfViewer.renderDrawing(r,t),this.pdfViewerBase.stampAdded&&this.pdfViewer.annotation.addAction(t,null,C,"Addition","",C,C)}sf.base.Browser.isDevice||(this.pdfViewerBase.customStampCount+=1);var E=this;d&&(f=d.AnnotName,i.setAttribute("annotationId",f)),null!=g&&(g.stampAnnotationPath=""===g.stampAnnotationPath?i.src:g.stampAnnotationPath,this.storeStampInSession(t,g)),i.onload=function(){var e=E.pdfViewer.drawing.getPageObjects(t),n=i.src;if(e&&e.length>0)for(var o=0;o<e.length;o++)if(e[o].annotName===f){var s=E.pdfViewer.nameTable[e[o].id];if(!sf.base.isNullOrUndefined(s)&&"Image"===s.shapeAnnotationType){if(i.getAttribute("annotationId")===s.annotName){var a=s.wrapper.children[0];sf.base.isNullOrUndefined(a)||(a.source=""===a.source?n:a.source,a.imageSource=""===a.imageSource?n:a.imageSource),C.data=""===C.data?n:C.data}for(var l=0;l<E.pdfViewer.annotations.length;l++)if(E.pdfViewer.annotations[l].annotName===e[o].annotName){E.pdfViewer.annotations[l].data=C.data;break}E.currentStampAnnotation=C,E.pdfViewer.renderDrawing(r,t)}}}}function Fp(e,t){var i={opacity:e.opacity,borderColor:e.strokeColor,borderWidth:e.thickness,author:t.author,subject:t.subject,modifiedDate:t.modifiedDate,fillColor:e.fillColor,fontSize:e.fontSize,width:e.bounds.width,height:e.bounds.height,fontColor:e.fontColor,fontFamily:e.fontFamily,defaultText:e.dynamicText,fontStyle:e.font,textAlignment:e.textAlign,isLocked:e.isLocked};this.pdfViewer.fireAnnotationAdd(e.pageIndex,e.annotName,"Stamp",e.bounds,i)}function Lp(e,t,i){var n=this.pdfViewerBase.getZoomFactor();e/=n,t/=n;var o,s="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest",a=!1;if(this.pdfViewerBase.isDynamicStamp)if(this.pdfViewer.dateTimeFormat){var r=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();this.dynamicText="By "+s+" at "+r+" "}else{var l=(new Date).toString().split(" ").splice(1,3).join(" "),d=(new Date).toLocaleTimeString();this.dynamicText="By "+s+" at "+d+" , "+l+"   "}var h=this.currentStampAnnotation;return h&&"Image"===h.shapeAnnotationType?(sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.customStampSettings)||(a=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.customStampSettings.isLock&&this.pdfViewer.customStampSettings.isLock),o={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:h.bounds.width,height:h.bounds.height},pageIndex:i,data:h.data,modifiedDate:h.modifiedDate,shapeAnnotationType:"Image",opacity:h.opacity,rotateAngle:h.RotationAngle,comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:h.author},isLocked:a}):h&&(sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.stampSettings)||(a=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.stampSettings.isLock&&this.pdfViewer.stampSettings.isLock),o={id:"stamp"+this.pdfViewerBase.customStampCount,bounds:{x:e,y:t,width:h.width,height:h.height},pageIndex:i,data:h.pathdata,shapeAnnotationType:"Stamp",strokeColor:h.strokeColor,fillColor:h.fillColor,opacity:.5,stampFillColor:h.stampFillColor,stampStrokeColor:h.stampStrokeColor,rotateAngle:h.RotateAngle,isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,subject:h.iconName,annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,isLocked:a}),this.pdfViewerBase.currentSignatureAnnot&&("SignatureText"===(h=this.pdfViewerBase.currentSignatureAnnot).shapeAnnotationType?o={id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:h.bounds.width,height:h.bounds.height},pageIndex:i,data:h.data,modifiedDate:"",shapeAnnotationType:"SignatureText",thickness:h.thickness,strokeColor:h.strokeColor,opacity:h.opacity,signatureName:h.signatureName,fontFamily:h.fontFamily,fontSize:h.bounds.height/2}:"SignatureImage"===h.shapeAnnotationType?o={id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:h.bounds.width,height:h.bounds.height},pageIndex:i,data:h.data,modifiedDate:"",shapeAnnotationType:"SignatureImage",thickness:h.thickness,strokeColor:h.strokeColor,opacity:h.opacity,signatureName:h.signatureName}:(sf.base.isNullOrUndefined(this.pdfViewer.annotationSettings)||sf.base.isNullOrUndefined(this.pdfViewer.handWrittenSignatureSettings)||(a=this.pdfViewer.annotationSettings.isLock?this.pdfViewer.annotationSettings.isLock:!!this.pdfViewer.handWrittenSignatureSettings.isLock&&this.pdfViewer.handWrittenSignatureSettings.isLock),o={id:"sign"+this.pdfViewerBase.signatureCount,bounds:{x:e,y:t,width:h.bounds.width,height:h.bounds.height},pageIndex:i,data:h.data,shapeAnnotationType:"HandWrittenSignature",thickness:h.thickness,strokeColor:h.strokeColor,opacity:h.opacity,signatureName:h.signatureName,isLocked:a})),o}function Op(e,t){var i=this,n=this.pdfViewerBase.stampAdded,o=this.pdfViewerBase.currentPageNumber-1,s=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+o),a=new Image,r=this;a.onload=function(){var e=i.pdfViewerBase.getZoomFactor(),l=i.pdfViewer.customStampSettings.width>0?i.pdfViewer.customStampSettings.width:100,d=i.pdfViewer.customStampSettings.height>0?i.pdfViewer.customStampSettings.height:100,h={width:l,height:d,left:i.pdfViewer.customStampSettings.left>0&&i.pdfViewer.customStampSettings.left<parseFloat(s.style.width)?i.pdfViewer.customStampSettings.left:(parseFloat(s.style.width)/2-l/2)/e,top:i.pdfViewer.customStampSettings.top>0&&i.pdfViewer.customStampSettings.top<parseFloat(s.style.height)?i.pdfViewer.customStampSettings.top:(parseFloat(s.style.height)/2-d/2)/e},p=(new Date).toLocaleDateString(),c=i.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime();r.renderCustomImage(h,o,a,p,c,0,1,null,null,null,t,n)},a.src=e}function Rp(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null,o=!1;if(t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),t.author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest",i){var s=t.annotName?t.annotName:this.pdfViewer.annotation.createGUID();this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("stamp",e+1,"",s,"",t.state,t.author),t.annotName=s,t.Comments=[],t.State="",t.StateModel="",t.Note="",t.Opacity=1,t.RotateAngle=0}"Stamp"===t.shapeAnnotationType&&(t.isPrint=this.pdfViewer.stampSettings.isPrint);var a=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,r=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if("Image"===t.shapeAnnotationType){t.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.customStampSettings.author?this.pdfViewer.customStampSettings.author:"Guest",t.isPrint=this.pdfViewer.customStampSettings.isPrint;var l=this.pdfViewer.annotationModule.undoCommentsElement;if(!this.customStampName)for(var d=0;d<l.length;d++)t.annotName===l[d].annotName&&(this.customStampName=l[d].customStampName);n={stampAnnotationType:"image",author:t.author,modifiedDate:t.modifiedDate,subject:t.Subject,note:"",strokeColor:"",fillColor:"",opacity:i,rotateAngle:"0",creationDate:t.currentDate,pageNumber:e,icon:"",stampAnnotationPath:t.data,randomId:t.id,bounds:{x:t.bounds.x,y:t.bounds.y,left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},stampFillcolor:"",isDynamicStamp:!1,annotName:t.annotName,comments:[],review:{state:"",stateModel:"",author:t.author,modifiedDate:t.modifiedDate},shapeAnnotationType:"stamp",type:"Image",annotationSelectorSettings:a,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),customData:this.pdfViewer.annotationModule.getData("image"),isPrint:t.isPrint,isLocked:this.pdfViewer.annotationModule.checkIsLockSettings(t),allowedInteractions:r,isCommentLock:!1,isMaskedImage:t.isMaskedImage,customStampName:this.customStampName,template:t?t.StampTemplate:null,templateSize:t?t.templateSize:0}}else n=t.stampAnnotationType?{stampAnnotationType:t.stampAnnotationType,author:t.author,modifiedDate:t.modifiedDate,subject:t.Subject?t.Subject:t.subject,note:t.Note?t.Note:t.note,strokeColor:t.strokeColor,fillColor:t.fillColor,opacity:t.opacity,stampFillcolor:t.stampFillcolor,rotateAngle:t.rotateAngle,creationDate:t.creationDate,pageNumber:t.pageNumber,icon:t.icon,stampAnnotationPath:t.stampAnnotationPath,randomId:t.randomId,isDynamicStamp:t.isDynamicStamp,dynamicText:t.dynamicText,bounds:{x:t.bounds.left,y:t.bounds.top,left:t.bounds.left,top:t.bounds.top,width:t.bounds.width,height:t.bounds.height},annotName:t.annotName,comments:t.Comments?t.Comments:t.comments,review:{state:t.State?t.State:t.review.state,stateModel:t.StateModel?t.StateModel:t.review.stateModel,author:t.author?t.author:t.review.author,modifiedDate:t.ModifiedDate?t.ModifiedDate:t.review.modifiedDate},shapeAnnotationType:"stamp",type:"Stamp",annotationSelectorSettings:a,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(t.stampAnnotationType),isPrint:t.isPrint,isLocked:this.pdfViewer.annotationModule.checkIsLockSettings(t),allowedInteractions:r,isCommentLock:t.isCommentLock,isMaskedImage:t.isMaskedImage,customStampName:"",template:t?t.StampTemplate:null,templateSize:t?t.templateSize:0}:{stampAnnotationType:t.shapeAnnotationType,author:t.author,modifiedDate:t.modifiedDate,subject:t.subject,note:t.notes,strokeColor:t.strokeColor,fillColor:t.fillColor,opacity:t.opacity,stampFillcolor:t.stampFillColor,rotateAngle:t.rotateAngle,creationDate:t.creationDate,pageNumber:t.pageIndex,icon:t.subject,stampAnnotationPath:t.data,randomId:t.id,isDynamicStamp:t.isDynamicStamp,dynamicText:t.dynamicText,shapeAnnotationType:"stamp",type:"Stamp",bounds:{x:t.bounds.x,y:t.bounds.y,left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},annotName:t.annotName,comments:t.Comments,review:{state:t.State,stateModel:t.StateModel,author:t.author,modifiedDate:t.ModifiedDate},annotationSelectorSettings:a,annotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),customData:this.pdfViewer.annotationModule.getData(t.shapeAnnotationType),isPrint:t.isPrint,isLocked:this.pdfViewer.annotationModule.checkIsLockSettings(t),allowedInteractions:r,isCommentLock:t.isCommentLock,isMaskedImage:t.isMaskedImage,customStampName:"",template:t?t.StampTemplate:null,templateSize:t?t.templateSize:0};if(n&&(r=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(n))&&(n.allowedInteractions=r),i){if("Image"!==t.shapeAnnotationType){var h=sf.drawings.processPathData(t.data),p=sf.drawings.splitArrayCollection(h);n.stampAnnotationPath=p}if(t.creationDate=(new Date).toLocaleDateString(),!sf.base.Browser.isDevice&&t.wrapper&&(n.bounds.width=t.wrapper.actualSize.width,n.bounds.height=t.wrapper.actualSize.height,n.bounds.left=t.wrapper.bounds.x,n.bounds.top=t.wrapper.bounds.y,n.bounds.x=t.wrapper.bounds.x,n.bounds.y=t.wrapper.bounds.y),n.opacity=i,this.pdfViewerBase.stampAdded){this.storeStampInSession(e,n),o=!0;var c={left:n.bounds.left,top:n.bounds.top,width:n.bounds.width,height:n.bounds.height};this.pdfViewerBase.updateDocumentEditedProperty(!0);var u={opacity:n.opacity,author:n.author,modifiedDate:n.modifiedDate,isLocked:n.isLocked};this.pdfViewerBase.stampAdded=!1,"Image"===t.shapeAnnotationType?(this.pdfViewer.fireAnnotationAdd(n.pageNumber,n.annotName,"Image",c,u,null,null,null,null,null,this.customStampName),this.customStampName=null):this.pdfViewer.fireAnnotationAdd(n.pageNumber,n.annotName,"Stamp",c,u),this.pdfViewer.annotation.addAction(e,null,t,"Addition","",t,n)}}o||this.storeStampInSession(e,n)}function zp(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.stampSettings.annotationSelectorSettings&&(t=this.pdfViewer.stampSettings.annotationSelectorSettings),t}function Hp(){this.pdfViewerBase.isDynamicStamp=!1,this.dynamicText="",this.currentStampAnnotation=null,sf.base.Browser.isDevice||(this.pdfViewerBase.customStampCount+=1)}function Up(e){var t;if(e){switch(e.trim()){case"Revised":t={iconName:"Revised",pathdata:"M19.68,21.22a3.94,3.94,0,0,1-1.1-1.9L16,11.87l-.21-.64a20.77,20.77,0,0,0,2.11-.58,7.24,7.24,0,0,0,2-1.09,5.65,5.65,0,0,0,1.72-2.12,5.4,5.4,0,0,0,.52-2.2A4.15,4.15,0,0,0,19.1,1.05a14.58,14.58,0,0,0-4.72-.6H5.31v.86a7,7,0,0,1,2,.33c.3.14.45.48.45,1a6.1,6.1,0,0,1-.14,1.08l-.21.8L3.31,19.32a3.35,3.35,0,0,1-.94,1.78,3.58,3.58,0,0,1-1.74.57v.86h9.83v-.86a6.22,6.22,0,0,1-2-.35c-.29-.15-.43-.52-.43-1.11,0-.1,0-.21,0-.31a2.36,2.36,0,0,1,0-.28l.28-1.14,1.95-6.86h.93l3.56,10.91h6.25v-.88A3.05,3.05,0,0,1,19.68,21.22ZM13.29,10.31a14,14,0,0,1-2.63.23l2-7.56a2.67,2.67,0,0,1,.52-1.17,1.4,1.4,0,0,1,1-.3,2.74,2.74,0,0,1,2.33.91,3.72,3.72,0,0,1,.69,2.3,6.4,6.4,0,0,1-.49,2.52,6.72,6.72,0,0,1-1.06,1.82A4.11,4.11,0,0,1,13.29,10.31ZM26,.45H43.74l-1.4,6.27-.88-.15a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.11-1.69a2.9,2.9,0,0,0-1.68.32A2.34,2.34,0,0,0,33.26,3l-1.95,7.33a13.55,13.55,0,0,0,4.48-.56c.68-.32,1.44-1.3,2.27-2.92l.91.11-2.44,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4A7.57,7.57,0,0,0,31,11.38l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.85,9.85,0,0,0,40.73,16l.81.14-1.95,6.42h-18v-.9a3.43,3.43,0,0,0,1.42-.53A3.42,3.42,0,0,0,24,19.32L28,4.51c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.15-.91-.44-1.06a6.85,6.85,0,0,0-2-.34ZM63.4,3.37,51,23.15H49.9L47.39,6.34a17.25,17.25,0,0,0-.93-4.24c-.25-.43-.93-.7-2.05-.79V.45h9.86v.86a5.47,5.47,0,0,0-1.72.19,1.14,1.14,0,0,0-.81,1.16,3,3,0,0,0,0,.31l0,.32L53.5,16.43l6.24-9.85c.49-.79.94-1.57,1.33-2.36a4.45,4.45,0,0,0,.6-1.85.88.88,0,0,0-.61-.9,6.11,6.11,0,0,0-1.52-.16V.45h6.34v.86a3.88,3.88,0,0,0-1.16.5A5.73,5.73,0,0,0,63.4,3.37ZM70.08,20c0,.11,0,.22,0,.31,0,.56.15.91.45,1.06a6.39,6.39,0,0,0,1.95.35v.86H62.63v-.86a3.58,3.58,0,0,0,1.74-.57,3.35,3.35,0,0,0,.94-1.78l4-14.81q.18-.63.27-1a3.78,3.78,0,0,0,.09-.75c0-.56-.16-.91-.47-1.06a7,7,0,0,0-2-.34V.45h9.83v.86a3.61,3.61,0,0,0-1.75.58,3.37,3.37,0,0,0-.91,1.78L70.4,18.48l-.26,1.14Zm19.26-7.23a6.37,6.37,0,0,1,1.07,3.62,6.58,6.58,0,0,1-2.06,4.71,7.54,7.54,0,0,1-5.65,2.1A10.15,10.15,0,0,1,80.89,23a11.42,11.42,0,0,1-1.8-.49l-.83-.3-.58-.2a2,2,0,0,0-.38,0,1,1,0,0,0-.78.26,3.89,3.89,0,0,0-.52.92H75l1.19-7.4,1,.07a14.63,14.63,0,0,0,.28,2.3,5.27,5.27,0,0,0,2.79,3.44,4.73,4.73,0,0,0,2.06.44,3.85,3.85,0,0,0,3.07-1.26,4.39,4.39,0,0,0,1.09-2.94q0-2.09-4.05-5.25c-2.7-2.22-4-4.26-4-6.14a6.31,6.31,0,0,1,1.78-4.53,6.51,6.51,0,0,1,5-1.87,9.67,9.67,0,0,1,1.82.18A6.54,6.54,0,0,1,88,.45l.84.28.56.13a2.59,2.59,0,0,0,.52.06,1.4,1.4,0,0,0,.88-.24,2.2,2.2,0,0,0,.53-.6h1L91,6.69l-.85-.12L90,5.49a6,6,0,0,0-1-2.62,3.82,3.82,0,0,0-3.38-1.73A3,3,0,0,0,82.9,2.53a3.6,3.6,0,0,0-.58,2,3.44,3.44,0,0,0,.59,2,6,6,0,0,0,1,1l2.85,2.33A12.75,12.75,0,0,1,89.34,12.72ZM110.27,16l.81.14-2,6.42H90.85v-.86a3.66,3.66,0,0,0,1.74-.57,3.42,3.42,0,0,0,.93-1.78l4-14.81c.1-.37.18-.72.25-1a4.23,4.23,0,0,0,.09-.78c0-.56-.14-.91-.44-1.06a6.85,6.85,0,0,0-2-.34V.45h17.77l-1.4,6.27L111,6.57a6,6,0,0,0-.78-3.4c-.84-1.12-2.54-1.69-5.1-1.69a2.92,2.92,0,0,0-1.69.32A2.34,2.34,0,0,0,102.8,3l-2,7.33a13.55,13.55,0,0,0,4.48-.56c.69-.32,1.44-1.3,2.27-2.92l.92.11-2.45,9-.91-.16a7.27,7.27,0,0,0,.09-.82q0-.35,0-.57a2.69,2.69,0,0,0-1-2.4,7.57,7.57,0,0,0-3.79-.64l-2.17,8c0,.2-.09.38-.12.57a2.62,2.62,0,0,0,0,.43.92.92,0,0,0,.35.74,2.54,2.54,0,0,0,1.49.29,13.84,13.84,0,0,0,5.11-.84A9.81,9.81,0,0,0,110.27,16Zm22.65-13Q130.39.45,125.52.45h-9.58v.86a7,7,0,0,1,2,.34c.31.15.47.5.47,1.06a3.61,3.61,0,0,1-.09.74c-.06.29-.15.64-.26,1.06L114,19.31a3.18,3.18,0,0,1-1.15,1.91,3.57,3.57,0,0,1-1.53.45v.86h9.47a14.87,14.87,0,0,0,10.95-4.14,12,12,0,0,0,3.75-8.77A8.94,8.94,0,0,0,132.92,2.94ZM129,15.36q-2.62,6.06-8.52,6.05a2.46,2.46,0,0,1-1.42-.29,1.05,1.05,0,0,1-.4-.93,2.24,2.24,0,0,1,0-.34,2.65,2.65,0,0,1,.08-.43l4.55-16.67a2,2,0,0,1,.54-.92,2.2,2.2,0,0,1,1.44-.35,4.74,4.74,0,0,1,4.47,2.22,7.9,7.9,0,0,1,.83,3.9A19.32,19.32,0,0,1,129,15.36Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.47,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Reviewed":t={iconName:"Reviewed",pathdata:"M17.37,18.25a3.47,3.47,0,0,1-1-1.67L14.17,10c0-.07-.1-.26-.19-.56A14.71,14.71,0,0,0,15.83,9a6.08,6.08,0,0,0,1.76-1A4.92,4.92,0,0,0,19.1,6.14a4.71,4.71,0,0,0,.46-1.93A3.65,3.65,0,0,0,16.86.52,12.83,12.83,0,0,0,12.72,0h-8V.75a6.62,6.62,0,0,1,1.72.3c.26.12.39.41.39.88a4.56,4.56,0,0,1-.13.94c0,.2-.1.44-.17.7L3,16.58a2.87,2.87,0,0,1-.82,1.56,3.15,3.15,0,0,1-1.53.51v.75H9.27v-.75a5.88,5.88,0,0,1-1.74-.31c-.25-.13-.37-.46-.37-1a2.53,2.53,0,0,1,0-.28,1.44,1.44,0,0,1,0-.24l.24-1,1.71-6H10l3.13,9.59h5.49v-.77A2.71,2.71,0,0,1,17.37,18.25ZM11.75,8.67a12.06,12.06,0,0,1-2.3.19L11.2,2.22a2.2,2.2,0,0,1,.46-1,1.19,1.19,0,0,1,.87-.27,2.41,2.41,0,0,1,2.05.8,3.29,3.29,0,0,1,.6,2A5.63,5.63,0,0,1,14.75,6a6.06,6.06,0,0,1-.93,1.59A3.65,3.65,0,0,1,11.75,8.67ZM22.9,0H38.52L37.29,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L27.59,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1-2.16,7.93-.79-.15c0-.27.06-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11A6.61,6.61,0,0,0,27.3,9.6l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L34.86,19.4H19.05v-.79a2.88,2.88,0,0,0,1.28-.47,2.94,2.94,0,0,0,.82-1.56l3.56-13q.13-.49.21-.9A3.26,3.26,0,0,0,25,2q0-.73-.39-.93A6.44,6.44,0,0,0,22.9.75ZM55.79,2.57,44.86,20h-.93L41.72,5.17a16.05,16.05,0,0,0-.81-3.73c-.22-.37-.82-.6-1.81-.69V0h8.67V.75a5,5,0,0,0-1.52.17,1,1,0,0,0-.7,1,2.53,2.53,0,0,0,0,.28l0,.27L47.09,14l5.48-8.66C53,4.69,53.4,4,53.75,3.32a4,4,0,0,0,.52-1.63.78.78,0,0,0-.54-.8A5.88,5.88,0,0,0,52.4.75V0H58V.75a3.55,3.55,0,0,0-1,.44A5.18,5.18,0,0,0,55.79,2.57ZM62,18.34a6,6,0,0,0,1.71.31v.75H55.12v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56L61,3.57c.1-.37.18-.68.23-.93A2.81,2.81,0,0,0,61.34,2c0-.49-.13-.8-.41-.93a6.61,6.61,0,0,0-1.71-.3V0h8.63V.75a3.17,3.17,0,0,0-1.53.51,3,3,0,0,0-.8,1.57l-3.58,13-.22,1a2.74,2.74,0,0,0,0,.28,1.41,1.41,0,0,0,0,.28C61.64,17.9,61.78,18.21,62,18.34ZM69.13,0H84.75L83.52,5.51l-.78-.13a5.34,5.34,0,0,0-.68-3c-.74-1-2.24-1.48-4.49-1.48a2.68,2.68,0,0,0-1.49.27,2.09,2.09,0,0,0-.54,1L73.82,8.67a12.08,12.08,0,0,0,3.94-.5,5.69,5.69,0,0,0,2-2.56l.81.1L78.4,13.64l-.79-.15c0-.27.07-.51.08-.71s0-.37,0-.5a2.34,2.34,0,0,0-.85-2.11,6.61,6.61,0,0,0-3.33-.57l-1.91,7.08a4.91,4.91,0,0,0-.1.5,2,2,0,0,0,0,.38.83.83,0,0,0,.31.65,2.29,2.29,0,0,0,1.31.25,12.21,12.21,0,0,0,4.49-.73,8.69,8.69,0,0,0,4.51-4.09l.71.12L81.1,19.4H65v-.75a3.15,3.15,0,0,0,1.53-.51,2.94,2.94,0,0,0,.82-1.56l3.56-13q.14-.49.21-.9A3.26,3.26,0,0,0,71.24,2q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3Zm39.15,2.83L100,20h-.84L97.41,5.85,90.67,20h-.84L87.58,3.13A3.83,3.83,0,0,0,87,1.23,2.84,2.84,0,0,0,85.33.71V0h8.06V.75A2.55,2.55,0,0,0,92.27,1a1.33,1.33,0,0,0-.66,1.31c0,.06,0,.13,0,.19s0,.15,0,.26l1.15,10.16,4.32-9a1,1,0,0,0,0-.27,3.33,3.33,0,0,0-.64-2.38A2.5,2.5,0,0,0,95.06.71V0h7.78V.71a2.9,2.9,0,0,0-1.4.34c-.27.19-.41.6-.41,1.24,0,.13,0,.32,0,.55,0,.4.08.88.14,1.47l1,8.47,4.51-9.42a7.12,7.12,0,0,0,.29-.74,2.48,2.48,0,0,0,.14-.79.9.9,0,0,0-.48-.93,3.25,3.25,0,0,0-1.34-.19V0h5.41V.71a2.34,2.34,0,0,0-1.1.35A4.56,4.56,0,0,0,108.28,2.83Zm16.45,10.81.71.12-1.71,5.64H107.66v-.75a3.15,3.15,0,0,0,1.53-.51,2.87,2.87,0,0,0,.82-1.56l3.57-13q.12-.49.21-.9a3.17,3.17,0,0,0,.08-.69q0-.73-.39-.93a6.44,6.44,0,0,0-1.72-.3V0h15.62l-1.23,5.51-.78-.13a5.26,5.26,0,0,0-.68-3C124,1.4,122.46.91,120.2.91a2.64,2.64,0,0,0-1.48.27,2.09,2.09,0,0,0-.55,1l-1.72,6.45a12,12,0,0,0,3.94-.5,5.62,5.62,0,0,0,2-2.56l.81.1L121,13.64l-.79-.15c0-.27.06-.51.07-.71s0-.37,0-.5a2.34,2.34,0,0,0-.86-2.11,6.57,6.57,0,0,0-3.32-.57l-1.91,7.08a5,5,0,0,0-.11.5,3.14,3.14,0,0,0,0,.38.8.8,0,0,0,.31.65,2.25,2.25,0,0,0,1.3.25,12.26,12.26,0,0,0,4.5-.73A8.67,8.67,0,0,0,124.73,13.64ZM144.64,2.19Q142.41,0,138.14,0h-8.42V.75a6.61,6.61,0,0,1,1.71.3c.28.13.41.44.41.93a2.81,2.81,0,0,1-.08.66c0,.25-.12.56-.23.93l-3.56,13a2.78,2.78,0,0,1-1,1.68,3.44,3.44,0,0,1-1.35.4v.75h8.32a13.06,13.06,0,0,0,9.63-3.64,10.49,10.49,0,0,0,3.3-7.7A7.87,7.87,0,0,0,144.64,2.19ZM141.2,13.1q-2.31,5.32-7.48,5.32a2.27,2.27,0,0,1-1.26-.25,1,1,0,0,1-.34-.82,1.62,1.62,0,0,1,0-.3,2.16,2.16,0,0,1,.08-.38l4-14.65a1.63,1.63,0,0,1,.47-.81A2,2,0,0,1,138,.91a4.16,4.16,0,0,1,3.93,1.95,7,7,0,0,1,.72,3.42A16.82,16.82,0,0,1,141.2,13.1Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Received":t={iconName:"Received",pathdata:"M18.17,8.76a5,5,0,0,0,1.57-1.93,5,5,0,0,0,.47-2A3.76,3.76,0,0,0,17.42,1,13,13,0,0,0,13.13.48H4.89v.78a6.49,6.49,0,0,1,1.77.31c.27.12.41.43.41.91a5.87,5.87,0,0,1-.13,1c-.05.2-.12.44-.19.72L3.06,17.64a3,3,0,0,1-.84,1.61,3.36,3.36,0,0,1-1.59.53v.77H9.57v-.77a6.17,6.17,0,0,1-1.8-.32c-.26-.14-.39-.48-.39-1a2.46,2.46,0,0,1,0-.28,1.78,1.78,0,0,1,0-.26l.25-1,1.78-6.25h.84l3.24,9.92h5.66v-.8A2.76,2.76,0,0,1,18,19.36a3.57,3.57,0,0,1-1-1.72l-2.31-6.78c0-.07-.09-.27-.19-.58.87-.2,1.51-.38,1.92-.52A6.56,6.56,0,0,0,18.17,8.76Zm-2.93-2.1a6.19,6.19,0,0,1-1,1.65,3.85,3.85,0,0,1-2.14,1.14,12.92,12.92,0,0,1-2.39.2l1.81-6.87A2.5,2.5,0,0,1,12,1.72a1.27,1.27,0,0,1,.9-.27,2.5,2.5,0,0,1,2.12.83,3.35,3.35,0,0,1,.62,2.09A5.81,5.81,0,0,1,15.24,6.66ZM30.3,2.78,28.52,9.45a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,31.66,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76,9,9,0,0,0,4.67-4.23l.73.13-1.77,5.83H19.8v-.83A2.83,2.83,0,0,0,21,19.25a3.09,3.09,0,0,0,.85-1.61L25.54,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H39.82l-1.27,5.7-.81-.13A5.44,5.44,0,0,0,37,3Q35.9,1.42,32.4,1.42a2.69,2.69,0,0,0-1.54.29A2.08,2.08,0,0,0,30.3,2.78ZM56.56,6.1c0-.07,0-.18,0-.33a4.89,4.89,0,0,0-1.12-3.53,3.75,3.75,0,0,0-2.82-1.16c-2.33,0-4.35,1.55-6.07,4.63a17.09,17.09,0,0,0-2.31,8.43c0,2.08.47,3.5,1.43,4.27a4.89,4.89,0,0,0,3.11,1.15,6.84,6.84,0,0,0,4.14-1.45A11.51,11.51,0,0,0,55,16l.91.66A10.08,10.08,0,0,1,52.26,20a9.33,9.33,0,0,1-4.34,1.11A8.56,8.56,0,0,1,42,19a7.25,7.25,0,0,1-2.35-5.67A13.53,13.53,0,0,1,43.22,4a11.19,11.19,0,0,1,8.56-4A12.34,12.34,0,0,1,55,.44,13.17,13.17,0,0,0,56.9.88a1,1,0,0,0,.71-.24A2.94,2.94,0,0,0,58.06,0H59L57.45,7l-.94-.18C56.54,6.42,56.55,6.17,56.56,6.1Zm18,8.49.74.13-1.78,5.83H56.87v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L63,4.17c.09-.34.16-.65.22-.93a3.35,3.35,0,0,0,.09-.71c0-.5-.14-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48H77.26L76,6.18l-.81-.13A5.44,5.44,0,0,0,74.48,3q-1.14-1.54-4.64-1.54a2.69,2.69,0,0,0-1.54.29,2.08,2.08,0,0,0-.56,1.07L66,9.45A12.53,12.53,0,0,0,70,8.94a5.91,5.91,0,0,0,2-2.66l.84.11-2.23,8.2-.82-.15c0-.28.07-.53.08-.74a5.17,5.17,0,0,0,0-.52A2.43,2.43,0,0,0,69.1,11a6.87,6.87,0,0,0-3.44-.58l-2,7.32a3.61,3.61,0,0,0-.11.51,2.31,2.31,0,0,0,0,.4.83.83,0,0,0,.32.67,2.32,2.32,0,0,0,1.35.26,12.58,12.58,0,0,0,4.65-.76A8.91,8.91,0,0,0,74.52,14.59Zm31-11.45-11.31,18h-1L91,5.83A16.56,16.56,0,0,0,90.12,2c-.2-.34-.71-.56-1.51-.67a3,3,0,0,0-1.31.48,3.08,3.08,0,0,0-.82,1.62l-3.7,13.47-.24,1c0,.1,0,.2-.05.3s0,.2,0,.28c0,.51.14.83.41,1a6.21,6.21,0,0,0,1.77.32v.77H75.72v-.77a3.31,3.31,0,0,0,1.58-.53,3.09,3.09,0,0,0,.85-1.61L81.83,4.17c.11-.38.19-.7.25-.95a3.75,3.75,0,0,0,.08-.69c0-.5-.15-.82-.43-1A6.49,6.49,0,0,0,80,1.26V.48H97.22v.78a4.92,4.92,0,0,0-1.57.18,1,1,0,0,0-.73,1.05,2.81,2.81,0,0,0,0,.29l0,.28,1.56,12,5.67-9a24.21,24.21,0,0,0,1.21-2.14,4.07,4.07,0,0,0,.54-1.68.79.79,0,0,0-.55-.82A5.69,5.69,0,0,0,102,1.26V.48h5.76v.78a3.5,3.5,0,0,0-1,.46A5.16,5.16,0,0,0,105.52,3.14Zm16.83,11.45.73.13-1.77,5.83H104.69v-.77a3.31,3.31,0,0,0,1.58-.53,3,3,0,0,0,.85-1.61l3.69-13.47c.08-.34.16-.65.22-.93a4,4,0,0,0,.08-.71c0-.5-.13-.82-.4-1a6.34,6.34,0,0,0-1.78-.31V.48h16.16l-1.28,5.7-.8-.13A5.43,5.43,0,0,0,122.3,3q-1.14-1.54-4.64-1.54a2.67,2.67,0,0,0-1.53.29,2.16,2.16,0,0,0-.57,1.07l-1.78,6.67a12.53,12.53,0,0,0,4.08-.51,5.91,5.91,0,0,0,2.06-2.66l.83.11-2.22,8.2-.82-.15c0-.28.06-.53.08-.74s0-.38,0-.52a2.45,2.45,0,0,0-.88-2.18,6.9,6.9,0,0,0-3.44-.58l-2,7.32c-.05.18-.08.35-.11.51a3.58,3.58,0,0,0,0,.4.81.81,0,0,0,.32.67,2.28,2.28,0,0,0,1.35.26,12.62,12.62,0,0,0,4.65-.76A9,9,0,0,0,122.35,14.59ZM142.94,2.75Q140.63.48,136.21.48h-8.7v.78a6.66,6.66,0,0,1,1.77.31q.42.21.42,1a2.91,2.91,0,0,1-.08.68q-.08.39-.24,1L125.7,17.62a2.93,2.93,0,0,1-1,1.75,3.54,3.54,0,0,1-1.39.41v.77h8.61a13.5,13.5,0,0,0,10-3.76,10.84,10.84,0,0,0,3.41-8A8.14,8.14,0,0,0,142.94,2.75ZM139.38,14q-2.38,5.51-7.74,5.5a2.35,2.35,0,0,1-1.29-.26,1,1,0,0,1-.36-.85,1.78,1.78,0,0,1,0-.31,2.08,2.08,0,0,1,.08-.39l4.13-15.15a1.76,1.76,0,0,1,.49-.84A2,2,0,0,1,136,1.42a4.32,4.32,0,0,1,4.07,2A7.17,7.17,0,0,1,140.83,7,17.49,17.49,0,0,1,139.38,14Z",opacity:1,strokeColor:"",fillColor:"#192760",width:127.70402,height:55.84601,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Approved":t={iconName:"Approved",pathdata:"M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:127.70402,height:55.84601,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Confidential":t={iconName:"Confidential",pathdata:"M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:127.70402,height:55.84601,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"NotApproved":case"Not Approved":t={iconName:"Not Approved",pathdata:"M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:127.70402,height:55.84601,stampFillColor:"#f6dedd",stampStrokeColor:""}}if(t)return t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentStampAnnotation=t,t}}function jp(e){if(e){var t=void 0;switch(e.trim()){case"Approved":t={iconName:"Approved",pathdata:"M19,20.22H10.55v-.71a4.26,4.26,0,0,0,1.79-.41,1.37,1.37,0,0,0,.53-1.29c0-.22,0-.75-.16-1.58,0-.17-.11-.89-.29-2.15H6.06l-1.72,3a4,4,0,0,0-.31.66,2,2,0,0,0-.14.69c0,.41.12.67.37.78a5.42,5.42,0,0,0,1.53.3v.71H0v-.71A4,4,0,0,0,1.21,19a5.68,5.68,0,0,0,1.28-1.56L13.45.07h.76L17,17a4.35,4.35,0,0,0,.7,2.08,2.4,2.4,0,0,0,1.31.44Zm-6.83-7.31L11.13,5.73,6.76,12.91Zm7.18,6.52a3,3,0,0,0,1.33-.49,3,3,0,0,0,.84-1.59L25.19,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22,9.53,9.53,0,0,1-5.69,1.58l-.85,0-1.71-.11L26,16.6l-.25,1a1,1,0,0,0-.05.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76H19.39Zm8.52-9.66.54.06h.48a5.81,5.81,0,0,0,2.3-.36,3.47,3.47,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,8.94,8.94,0,0,0,.3-2,3.29,3.29,0,0,0-.58-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.71,2.71,0,0,0-.46,1Zm8,9.69a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59L42,4.11c.07-.3.14-.6.2-.9a3.14,3.14,0,0,0,.1-.72,1,1,0,0,0-.58-1,5.68,5.68,0,0,0-1.57-.23V.48h8.47a9.68,9.68,0,0,1,3.57.57,4,4,0,0,1,2.71,4,4.93,4.93,0,0,1-2.2,4.22A9.53,9.53,0,0,1,47,10.87l-.85,0-1.71-.11L42.79,16.6l-.25,1a1.45,1.45,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.14.81.4.94a6.31,6.31,0,0,0,1.76.31v.76h-8.7Zm8.74-9.69.54.06h.48A5.81,5.81,0,0,0,48,9.48a3.41,3.41,0,0,0,1.4-1.18,6.24,6.24,0,0,0,.86-2,9,9,0,0,0,.31-2,3.29,3.29,0,0,0-.59-2,2.3,2.3,0,0,0-2-.79,1.23,1.23,0,0,0-.93.28,2.88,2.88,0,0,0-.46,1Zm7.95,9.69a3.27,3.27,0,0,0,1.56-.52A3.06,3.06,0,0,0,55,17.35L58.64,4.11l.18-.71a4.72,4.72,0,0,0,.13-1c0-.47-.13-.77-.4-.9a6.74,6.74,0,0,0-1.74-.3V.48h8.11A13,13,0,0,1,69.14,1a3.7,3.7,0,0,1,2.74,3.75,4.8,4.8,0,0,1-.46,2,5,5,0,0,1-1.54,1.9,6.55,6.55,0,0,1-1.79,1,19.35,19.35,0,0,1-1.89.52c.1.3.16.49.2.57l2.27,6.66a3.49,3.49,0,0,0,1,1.7,3.08,3.08,0,0,0,1.6.41v.76H65.33l-3.19-9.76h-.83L59.57,16.6l-.25,1a1.87,1.87,0,0,0,0,.25,2.64,2.64,0,0,0,0,.28q0,.8.39,1a5.88,5.88,0,0,0,1.76.32v.76H52.62ZM63.94,9.3a3.79,3.79,0,0,0,2.11-1.13A6,6,0,0,0,67,6.55a5.84,5.84,0,0,0,.44-2.26,3.31,3.31,0,0,0-.61-2,2.47,2.47,0,0,0-2.09-.81,1.25,1.25,0,0,0-.88.26,2.34,2.34,0,0,0-.47,1.05L61.59,9.5A13.42,13.42,0,0,0,63.94,9.3ZM76.39,4.53Q80.26,0,85,0a7.34,7.34,0,0,1,5.23,1.92,6.76,6.76,0,0,1,2,5.19,13.9,13.9,0,0,1-3.62,9.07q-3.86,4.61-8.88,4.6a7.06,7.06,0,0,1-5.13-1.92,6.86,6.86,0,0,1-2-5.14A14,14,0,0,1,76.39,4.53ZM77.3,18a2.56,2.56,0,0,0,2.57,1.78A4.62,4.62,0,0,0,83,18.47,14.42,14.42,0,0,0,86,13.54a27.18,27.18,0,0,0,1.52-4.83,20.67,20.67,0,0,0,.54-4.11,4.38,4.38,0,0,0-.73-2.55A2.62,2.62,0,0,0,85,1q-3.68,0-6.19,6.54a24.29,24.29,0,0,0-1.9,8.26A5.91,5.91,0,0,0,77.3,18ZM102.23.48v.76a5.19,5.19,0,0,0-1.55.17,1,1,0,0,0-.72,1,2.46,2.46,0,0,0,0,.28L100,3l1.52,11.76L107.11,6c.44-.71.84-1.41,1.2-2.11a4.06,4.06,0,0,0,.53-1.66.79.79,0,0,0-.55-.81,6.11,6.11,0,0,0-1.35-.14V.48h5.67v.76a3.31,3.31,0,0,0-1,.45,5.33,5.33,0,0,0-1.18,1.4L99.26,20.78h-.94l-2.25-15A15.49,15.49,0,0,0,95.24,2c-.22-.39-.84-.62-1.83-.71V.48Zm7.35,19a3.19,3.19,0,0,0,1.55-.52,3,3,0,0,0,.84-1.59l3.62-13.24c.09-.34.16-.64.22-.92a3.27,3.27,0,0,0,.09-.7c0-.5-.14-.81-.4-.94a6.13,6.13,0,0,0-1.75-.31V.48h15.89l-1.25,5.6L127.6,6a5.32,5.32,0,0,0-.7-3q-1.12-1.52-4.56-1.51a2.61,2.61,0,0,0-1.51.28,2.12,2.12,0,0,0-.56,1.06L118.52,9.3a12.1,12.1,0,0,0,4-.51,5.8,5.8,0,0,0,2-2.61l.82.1-2.19,8.07-.81-.14c0-.28.07-.52.08-.73s0-.37,0-.51a2.4,2.4,0,0,0-.87-2.15,6.76,6.76,0,0,0-3.38-.57l-1.94,7.2a3.34,3.34,0,0,0-.11.51,3.67,3.67,0,0,0,0,.39.81.81,0,0,0,.32.66,2.3,2.3,0,0,0,1.33.26,12.39,12.39,0,0,0,4.57-.75A8.84,8.84,0,0,0,127,14.35l.72.13-1.74,5.74H109.58Zm18.27,0a3.27,3.27,0,0,0,1.37-.41,2.85,2.85,0,0,0,1-1.71l3.63-13.23c.1-.38.18-.69.23-1a3,3,0,0,0,.09-.67c0-.5-.15-.81-.42-.94A6.38,6.38,0,0,0,132,1.24V.48h8.57c2.9,0,5.1.74,6.62,2.22a8,8,0,0,1,2.26,6,10.72,10.72,0,0,1-3.35,7.84,13.3,13.3,0,0,1-9.8,3.7h-8.47ZM144.4,3.39a4.23,4.23,0,0,0-4-2,2,2,0,0,0-1.29.31,1.74,1.74,0,0,0-.48.83l-4.07,14.9a3.24,3.24,0,0,0-.07.39,1.69,1.69,0,0,0,0,.3,1,1,0,0,0,.36.84,2.27,2.27,0,0,0,1.27.26q5.26,0,7.62-5.42a17.25,17.25,0,0,0,1.43-6.94A7,7,0,0,0,144.4,3.39Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:149.474,height:20.783,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Confidential":t={iconName:"Confidential",pathdata:"M13.71,0,12.63,6.9,12,6.73c0-.41,0-.66,0-.73s0-.18,0-.32a6.16,6.16,0,0,0-.79-3.47,2.37,2.37,0,0,0-2-1.14c-1.64,0-3.07,1.51-4.29,4.55a22,22,0,0,0-1.64,8.29c0,2,.34,3.44,1,4.2A3,3,0,0,0,6.5,19.24a4.08,4.08,0,0,0,2.93-1.43,10.47,10.47,0,0,0,1.5-2.09l.64.65A8.84,8.84,0,0,1,9,19.72a5.24,5.24,0,0,1-3.08,1.09,5.16,5.16,0,0,1-4.21-2.08A8.68,8.68,0,0,1,0,13.16,16.5,16.5,0,0,1,2.55,3.92Q5.1,0,8.61,0a6.35,6.35,0,0,1,2.25.43,6.62,6.62,0,0,0,1.38.43.55.55,0,0,0,.5-.23A2.61,2.61,0,0,0,13.06,0ZM27.49,7.11a17.19,17.19,0,0,1-2.61,9.07q-2.77,4.61-6.39,4.6a4.42,4.42,0,0,1-3.7-1.92,8.47,8.47,0,0,1-1.43-5.14A17.31,17.31,0,0,1,16,4.53C17.88,1.51,20,0,22.25,0A4.53,4.53,0,0,1,26,1.92,8.27,8.27,0,0,1,27.49,7.11ZM24.42,4.6a5.71,5.71,0,0,0-.53-2.55A1.76,1.76,0,0,0,22.24,1q-2.65,0-4.45,6.54a31.93,31.93,0,0,0-1.37,8.26A8.15,8.15,0,0,0,16.67,18c.34,1.19,1,1.78,1.85,1.78a2.9,2.9,0,0,0,2.28-1.29,15.85,15.85,0,0,0,2.13-4.93A34.08,34.08,0,0,0,24,8.71,28.5,28.5,0,0,0,24.42,4.6ZM42.75,1.3l.3-.06V.48H38.69v.76a2.55,2.55,0,0,1,1.16.33,1.8,1.8,0,0,1,.51,1.48,10.11,10.11,0,0,1-.13,1.34c-.06.41-.14.87-.24,1.39l-1.65,8.34L33.73.48H29.45v.76a2.66,2.66,0,0,1,1,.24,1.88,1.88,0,0,1,.65,1.06l.09.3L28.81,15a20.72,20.72,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.55,2.55,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,.05-.79c.06-.43.17-1.09.34-2L31.89,4.38l5.52,16.33h.52l3-15a22.58,22.58,0,0,1,.87-3.42A1.42,1.42,0,0,1,42.75,1.3ZM55.53.48H44.23v.76a3.63,3.63,0,0,1,1.26.3c.19.13.29.42.29.9a7.08,7.08,0,0,1-.09,1c0,.2-.08.44-.13.71L43,17.34a3.47,3.47,0,0,1-.59,1.58,1.91,1.91,0,0,1-1.13.54v.76h6.29v-.76a2.13,2.13,0,0,1-1-.19A1.23,1.23,0,0,1,46,18.1c0-.1,0-.21,0-.31s0-.23.05-.35l1.4-7.21a3.15,3.15,0,0,1,2.37.64A3.21,3.21,0,0,1,50.38,13c0,.11,0,.28,0,.49s0,.46-.06.75l.58.14,1.58-8.07-.59-.1a5.79,5.79,0,0,1-1.43,2.59,6.17,6.17,0,0,1-2.77.52l1.26-6.54a2.06,2.06,0,0,1,.42-1.08,1.39,1.39,0,0,1,1-.26c1.62,0,2.7.51,3.24,1.54a7.11,7.11,0,0,1,.49,3l.57.13Zm3.69,17.71c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1L62.06,3.36a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H57.44v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1L56.16,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.3,3.3,0,0,1-1.26-.32C59.32,19,59.22,18.69,59.22,18.19Zm18-9.51a13,13,0,0,1-2.42,7.84,8.31,8.31,0,0,1-7,3.7H61.6v-.76a2,2,0,0,0,1-.41,3.14,3.14,0,0,0,.73-1.71L65.93,4.11c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.17A5.52,5.52,0,0,1,75.53,2.7,9.91,9.91,0,0,1,77.17,8.68ZM74,6.87a9.22,9.22,0,0,0-.53-3.48,2.91,2.91,0,0,0-2.87-2,1.12,1.12,0,0,0-.93.31,1.81,1.81,0,0,0-.35.83l-2.93,14.9a3,3,0,0,0-.05.39c0,.11,0,.21,0,.3a1.17,1.17,0,0,0,.25.84,1.3,1.3,0,0,0,.92.26q3.8,0,5.49-5.42A23.26,23.26,0,0,0,74,6.87Zm11.3,11.65a6.72,6.72,0,0,1-3.29.75,1.3,1.3,0,0,1-1-.26,1,1,0,0,1-.23-.66,3.28,3.28,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.4-7.2a3.73,3.73,0,0,1,2.43.57A2.87,2.87,0,0,1,85.43,13c0,.14,0,.31,0,.51s0,.45-.06.73l.59.14,1.57-8.07-.59-.1a5.79,5.79,0,0,1-1.46,2.61,6.5,6.5,0,0,1-2.89.51l1.26-6.56a2.41,2.41,0,0,1,.41-1.06c.16-.19.52-.28,1.08-.28,1.65,0,2.75.5,3.29,1.51a7,7,0,0,1,.5,3l.57.13.9-5.6H79.14v.76a3.35,3.35,0,0,1,1.26.31c.19.13.29.44.29.94a5,5,0,0,1-.07.7c0,.28-.09.58-.15.92L77.86,17.35a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.13.52v.76H87.91l1.25-5.74-.52-.13A7.69,7.69,0,0,1,85.34,18.52ZM105.8,1.24V.48h-4.37v.76a2.55,2.55,0,0,1,1.16.33,1.77,1.77,0,0,1,.52,1.48A10.58,10.58,0,0,1,103,4.39c-.06.41-.13.87-.23,1.39l-1.66,8.34L96.47.48H92.19v.76a2.61,2.61,0,0,1,1,.24,1.83,1.83,0,0,1,.65,1.06l.1.3L91.55,15a19,19,0,0,1-1,3.61,1.61,1.61,0,0,1-1.19.9v.76h4.42v-.76a2.59,2.59,0,0,1-1.13-.32,1.67,1.67,0,0,1-.56-1.44,7.13,7.13,0,0,1,0-.79c.06-.43.17-1.09.35-2L94.63,4.38l5.52,16.33h.53l2.95-15a22.93,22.93,0,0,1,.86-3.42,1.42,1.42,0,0,1,1-1Zm11.4,4.9L118,.48H106.28l-.82,5,.55.2a8,8,0,0,1,1.87-3.16,3.7,3.7,0,0,1,2.7-1.06l-3.12,15.85a2.94,2.94,0,0,1-.87,1.85,2.48,2.48,0,0,1-1.34.26v.76h7v-.76a4.24,4.24,0,0,1-1.43-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.18-1,3-15.1a2.73,2.73,0,0,1,1.79.63c.75.7,1.13,2,1.17,3.94Zm3.57,12.05c0-.08,0-.17,0-.27s0-.2,0-.3l.17-1,2.62-13.24a3.44,3.44,0,0,1,.59-1.6,2,2,0,0,1,1.12-.52V.48H119v.76a3.47,3.47,0,0,1,1.26.31c.2.13.3.44.3.94a4.25,4.25,0,0,1-.06.67c0,.26-.09.57-.17,1l-2.61,13.24a3.52,3.52,0,0,1-.6,1.59,2,2,0,0,1-1.12.52v.76h6.33v-.76a3.36,3.36,0,0,1-1.26-.32C120.87,19,120.77,18.69,120.77,18.19Zm28.86-3.71-1.24,5.74H130.3v-.71a2.48,2.48,0,0,0,1.3-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.21-2.15h-4.58l-1.24,3a5.1,5.1,0,0,0-.22.66,2.45,2.45,0,0,0-.1.69c0,.41.09.67.26.78a3.05,3.05,0,0,0,1.11.3v.71h-4.17v-.71a2.66,2.66,0,0,0,.87-.53,5.79,5.79,0,0,0,.92-1.56L132.39.07h.55L135,17a5.53,5.53,0,0,0,.5,2.08,1.67,1.67,0,0,0,1.14.46v0a1.93,1.93,0,0,0,1.12-.52,3.52,3.52,0,0,0,.6-1.6l2.61-13.23c.08-.38.13-.69.17-1a4.36,4.36,0,0,0,.06-.67c0-.5-.1-.81-.3-.94a3.47,3.47,0,0,0-1.26-.31V.48h6.73v.76a3.23,3.23,0,0,0-1.49.48,3.06,3.06,0,0,0-.64,1.64l-2.77,14.08c0,.16-.05.3-.07.44s0,.29,0,.47a.79.79,0,0,0,.31.71,1.55,1.55,0,0,0,.87.21,6.83,6.83,0,0,0,3.79-1,8.42,8.42,0,0,0,2.81-3.88ZM131.5,12.91l-.78-7.18-3.14,7.18Z",opacity:1,strokeColor:"",fillColor:"#192760",width:149.633,height:20.811,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Witness":t={iconName:"Witness",pathdata:"M19.63,2.67,12.77,16.84h-.69L10.63,5.17,5.05,16.84H4.36L2.5,2.92A3.13,3.13,0,0,0,2,1.35,2.38,2.38,0,0,0,.63.91V.33H7.3V1a2.27,2.27,0,0,0-.92.17A1.11,1.11,0,0,0,5.84,2.2v.16c0,.05,0,.13,0,.22L6.81,11l3.57-7.48a.79.79,0,0,0,0-.23,2.78,2.78,0,0,0-.53-2A2.23,2.23,0,0,0,8.68.91V.33h6.45V.91A2.42,2.42,0,0,0,14,1.2c-.23.16-.34.5-.34,1,0,.11,0,.26,0,.46s.07.73.12,1.21l.8,7L18.3,3.11c.09-.19.17-.4.25-.62a2.11,2.11,0,0,0,.11-.65.73.73,0,0,0-.4-.76,2.73,2.73,0,0,0-1.1-.17V.33h4.47V.91a1.92,1.92,0,0,0-.91.3A3.66,3.66,0,0,0,19.63,2.67ZM29.76.33H22.62V1A5.07,5.07,0,0,1,24,1.2c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L21.17,14.05a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,25,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,29.76,1ZM41.9,4.88l.63,0,.86-4.6H30.2l-.93,4.1.62.16A6.6,6.6,0,0,1,32,2a5.22,5.22,0,0,1,3.06-.86L31.53,14.05a2.24,2.24,0,0,1-1,1.5,3.67,3.67,0,0,1-1.51.21v.62H37v-.62a6,6,0,0,1-1.62-.24c-.26-.1-.39-.36-.39-.77,0-.07,0-.14,0-.21s0-.16.05-.27l.2-.83L38.57,1.16a3.76,3.76,0,0,1,2,.52A3.69,3.69,0,0,1,41.9,4.88ZM59.24,1,59.58,1V.33H54.65V1A3.78,3.78,0,0,1,56,1.22a1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13l-1.87,6.79L49.05.33H44.21V1a3.51,3.51,0,0,1,1.13.2,1.51,1.51,0,0,1,.74.85l.1.25L43.49,12.1A13.5,13.5,0,0,1,42.4,15a1.87,1.87,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.64-1.17,3.55,3.55,0,0,1,.06-.64q.11-.53.39-1.59L47,3.5,53.2,16.78h.59L57.13,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,59.24,1Zm7.26.31a2.11,2.11,0,0,1,1.23-.23c1.87,0,3.1.41,3.71,1.23A4.39,4.39,0,0,1,72,4.78l.64.11,1-4.56H60.75V1a5,5,0,0,1,1.42.25c.22.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-3,10.77a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h13.3l1.42-4.66-.59-.11A7.1,7.1,0,0,1,67.75,15a10,10,0,0,1-3.72.61A1.86,1.86,0,0,1,63,15.4a.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.48,5.48,0,0,1,2.75.47,2,2,0,0,1,.71,1.75c0,.11,0,.25,0,.41s0,.37-.06.6l.65.11L70.2,5.05,69.54,5a4.69,4.69,0,0,1-1.65,2.12,10.06,10.06,0,0,1-3.26.41l1.42-5.33A1.75,1.75,0,0,1,66.5,1.31ZM80.88.83a2.77,2.77,0,0,1,2.46,1.26A4.36,4.36,0,0,1,84,4l.08.78.62.08,1-4.8H85a1.77,1.77,0,0,1-.38.43A1,1,0,0,1,84,.67a2.76,2.76,0,0,1-.37,0l-.41-.1-.61-.2a4.78,4.78,0,0,0-.79-.2A6.71,6.71,0,0,0,80.46,0a4.76,4.76,0,0,0-3.62,1.36,4.61,4.61,0,0,0-1.29,3.29q0,2.05,2.94,4.47t2.94,3.82a3.19,3.19,0,0,1-.79,2.14,2.8,2.8,0,0,1-2.23.92,3.43,3.43,0,0,1-1.5-.33,3.82,3.82,0,0,1-2-2.5,10.33,10.33,0,0,1-.2-1.67L74,11.45l-.87,5.38h.73a2.85,2.85,0,0,1,.38-.67A.75.75,0,0,1,74.8,16a1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.62,8.62,0,0,0,1.3.35,7.53,7.53,0,0,0,1.32.12,5.48,5.48,0,0,0,4.11-1.53,4.77,4.77,0,0,0,1.49-3.43,4.59,4.59,0,0,0-.77-2.63,9.31,9.31,0,0,0-1.87-2L79.61,5.5a4.31,4.31,0,0,1-.74-.77,2.55,2.55,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.23,2.23,0,0,1,80.88.83Zm12.31,0a2.8,2.8,0,0,1,2.47,1.26A4.49,4.49,0,0,1,96.35,4l.08.78.62.08,1-4.8h-.71a1.62,1.62,0,0,1-.39.43,1,1,0,0,1-.64.18,2.9,2.9,0,0,1-.38,0l-.41-.1-.61-.2a4.65,4.65,0,0,0-.78-.2A6.88,6.88,0,0,0,92.77,0a4.73,4.73,0,0,0-3.61,1.36,4.57,4.57,0,0,0-1.3,3.29q0,2.05,2.94,4.47c2,1.54,3,2.81,3,3.82a3.2,3.2,0,0,1-.8,2.14,2.78,2.78,0,0,1-2.23.92,3.36,3.36,0,0,1-1.49-.33A3.68,3.68,0,0,1,88,14.73a3.76,3.76,0,0,1-.81-1.56A10.6,10.6,0,0,1,87,11.5l-.7-.05-.86,5.38h.72a2.85,2.85,0,0,1,.38-.67.78.78,0,0,1,.57-.19,1.12,1.12,0,0,1,.27,0l.42.15.61.22a8.74,8.74,0,0,0,1.31.35,7.37,7.37,0,0,0,1.32.12,5.49,5.49,0,0,0,4.11-1.53,4.81,4.81,0,0,0,1.49-3.43,4.67,4.67,0,0,0-.77-2.63A9.57,9.57,0,0,0,94,7.2L91.93,5.5a4,4,0,0,1-.74-.77,2.48,2.48,0,0,1-.43-1.45,2.68,2.68,0,0,1,.42-1.44A2.2,2.2,0,0,1,93.19.83Z",opacity:1,strokeColor:"",fillColor:"#192760",width:97.39,height:16.84,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"InitialHere":case"Initial Here":t={iconName:"Initial Here",pathdata:"M6.36,15.51a5.09,5.09,0,0,0,1.42.25v.62H.63v-.62a2.62,2.62,0,0,0,1.27-.42,2.47,2.47,0,0,0,.68-1.29l3-10.77c.08-.3.15-.56.19-.77A2.86,2.86,0,0,0,5.78,2c0-.41-.11-.66-.34-.77A5.07,5.07,0,0,0,4,1V.33h7.14V1a2.76,2.76,0,0,0-1.27.42,2.5,2.5,0,0,0-.66,1.3l-3,10.77-.19.83c0,.08,0,.16,0,.24a2,2,0,0,0,0,.23C6,15.14,6.14,15.4,6.36,15.51ZM27,1,27.36,1V.33H22.43V1a3.78,3.78,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.71-.27,1.13L22,11.43,16.83.33H12V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.11.25-2.7,9.85A13,13,0,0,1,10.18,15a1.85,1.85,0,0,1-1.35.72v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.19,1.19,0,0,1-.63-1.17,4.72,4.72,0,0,1,.05-.64q.1-.53.39-1.59l2.39-8.6L21,16.78h.6L24.91,4.6a15.29,15.29,0,0,1,1-2.78A1.51,1.51,0,0,1,27,1ZM35.78.33H28.64V1a5.16,5.16,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L27.19,14.05a2.47,2.47,0,0,1-.68,1.29,2.66,2.66,0,0,1-1.27.42v.62h7.15v-.62A5.09,5.09,0,0,1,31,15.51c-.22-.11-.33-.37-.33-.77a2,2,0,0,1,0-.23,2,2,0,0,1,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,35.78,1Zm12.76,4.6.87-4.6H36.22l-.93,4.1.62.16A6.52,6.52,0,0,1,38,2a5.21,5.21,0,0,1,3-.86L37.55,14.05a2.24,2.24,0,0,1-1,1.5,3.7,3.7,0,0,1-1.51.21v.62H43v-.62a5.79,5.79,0,0,1-1.61-.24c-.26-.1-.39-.36-.39-.77a1.48,1.48,0,0,1,0-.21,2,2,0,0,1,0-.27l.2-.83L44.58,1.16a3.77,3.77,0,0,1,2,.52,3.74,3.74,0,0,1,1.31,3.2Zm4,9.81a.93.93,0,0,1,0-.23,2,2,0,0,1,0-.24l.18-.83,3-10.77a2.42,2.42,0,0,1,.67-1.3A2.72,2.72,0,0,1,57.72,1V.33H50.57V1A5.26,5.26,0,0,1,52,1.2c.23.11.34.36.34.77a2.28,2.28,0,0,1-.07.54,7.71,7.71,0,0,1-.19.77l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62h7.14v-.62a5.07,5.07,0,0,1-1.41-.25C52.69,15.4,52.58,15.14,52.58,14.74Zm32-3.13.57.11-1.4,4.66H63.34v-.57a3.65,3.65,0,0,0,1.46-.34c.29-.16.43-.51.43-1,0-.18,0-.61-.13-1.29,0-.14-.09-.73-.23-1.75H59.69l-1.4,2.44a3.38,3.38,0,0,0-.25.54,1.64,1.64,0,0,0-.11.56q0,.5.3.63a4.41,4.41,0,0,0,1.25.25v.57H54.76v-.57a3.36,3.36,0,0,0,1-.43,4.58,4.58,0,0,0,1-1.27L65.7,0h.62l2.3,13.72a3.49,3.49,0,0,0,.56,1.7,2.34,2.34,0,0,0,1.29.37v0a2.58,2.58,0,0,0,1.26-.42,2.46,2.46,0,0,0,.68-1.3L75.35,3.28c.09-.3.16-.56.2-.77A2.86,2.86,0,0,0,75.61,2c0-.41-.11-.66-.34-.77A5.17,5.17,0,0,0,73.85,1V.33h7.61V1a4.77,4.77,0,0,0-1.69.39A2.27,2.27,0,0,0,79,2.67L75.92,14.12c0,.13,0,.25-.07.36a2.21,2.21,0,0,0,0,.39.59.59,0,0,0,.35.57,2.33,2.33,0,0,0,1,.17,10.06,10.06,0,0,0,4.28-.84A7.67,7.67,0,0,0,84.6,11.61ZM64.7,10.44,63.81,4.6l-3.55,5.84Zm38,4.32a.71.71,0,0,1,0-.16s0-.16.07-.34l.2-.83L106,2.67a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,107.9,1V.33h-7.15V1a4.45,4.45,0,0,1,1.27.19.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74l-1.14,4.16h-5.7L96.7,2.67a2.27,2.27,0,0,1,.73-1.33A4.77,4.77,0,0,1,99.12,1V.33H91.51V1a5.09,5.09,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c-.05.24-.1.48-.17.73L90.07,14a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3.11,3.11,0,0,1,0-.57c0-.16.1-.43.19-.8L95.12,8.5h5.7L99.31,14a2.21,2.21,0,0,1-.74,1.33,4.36,4.36,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.8.8,0,0,1,102.73,14.76Zm13.38.24a10.07,10.07,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.36,2.36,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.25,0,.41s0,.37-.07.6l.66.11,1.78-6.56L117.89,5a4.63,4.63,0,0,1-1.65,2.12A10,10,0,0,1,113,7.5l1.43-5.33a1.6,1.6,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47l.65.11,1-4.56H109.1V1a5.1,5.1,0,0,1,1.43.25c.21.11.32.36.32.77a3.63,3.63,0,0,1-.07.57c0,.22-.11.47-.18.74l-2.95,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H119l1.42-4.66-.58-.11A7.17,7.17,0,0,1,116.11,15ZM144.36,2.17,142.93,7.5a10.13,10.13,0,0,0,3.27-.41A4.69,4.69,0,0,0,147.84,5l.67.08-1.78,6.56-.66-.11c0-.23.06-.43.07-.6s0-.3,0-.41a2,2,0,0,0-.7-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.36,2.36,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.07,10.07,0,0,0,3.72-.61,7.14,7.14,0,0,0,3.73-3.39l.58.11L149,16.38H131l-2.59-7.93h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.81a4.87,4.87,0,0,0,1.43.25v.62h-7.14v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.72A4.8,4.8,0,0,0,124,1V.33h6.6a10.58,10.58,0,0,1,3.42.43,3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4,4,0,0,1,134.66,7a5.47,5.47,0,0,1-1.45.8c-.33.11-.85.25-1.54.42a4.73,4.73,0,0,0,.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.53,2.53,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74A2.73,2.73,0,0,0,140.8,2c0-.41-.11-.66-.32-.77A5.1,5.1,0,0,0,139.05,1V.33H152l-1,4.56-.65-.11a4.32,4.32,0,0,0-.56-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.67,1.67,0,0,0,144.36,2.17ZM131.54,6.59a5,5,0,0,0,.77-1.32,4.68,4.68,0,0,0,.36-1.84,2.74,2.74,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66,1,1,0,0,0-.72.22,2,2,0,0,0-.38.85l-1.45,5.49a10.33,10.33,0,0,0,1.91-.16A3.07,3.07,0,0,0,131.54,6.59Z",opacity:1,strokeColor:"",fillColor:"#192760",width:151.345,height:16.781,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"SignHere":case"Sign Here":t={iconName:"Sign Here",pathdata:"M6.38,1.9A2.56,2.56,0,0,0,6,3.34a2.49,2.49,0,0,0,.44,1.45,3.9,3.9,0,0,0,.73.76l2.07,1.7a9.34,9.34,0,0,1,1.87,2.06,4.6,4.6,0,0,1,.78,2.63,4.78,4.78,0,0,1-1.5,3.43A5.46,5.46,0,0,1,6.23,16.9a7.34,7.34,0,0,1-1.31-.12,7.48,7.48,0,0,1-1.31-.36L3,16.2l-.42-.14a1.12,1.12,0,0,0-.27,0,.71.71,0,0,0-.57.19,2.85,2.85,0,0,0-.38.67H.63l.87-5.38.69,0a10.34,10.34,0,0,0,.2,1.68,3.82,3.82,0,0,0,2,2.5,3.42,3.42,0,0,0,1.5.32,2.76,2.76,0,0,0,2.23-.92A3.14,3.14,0,0,0,8.94,13c0-1-1-2.29-2.94-3.82S3.06,6.08,3.06,4.71A4.59,4.59,0,0,1,4.35,1.42,4.76,4.76,0,0,1,8,.06,6.71,6.71,0,0,1,9.29.19a4.78,4.78,0,0,1,.79.2l.61.2.41.1a2.76,2.76,0,0,0,.37,0,1,1,0,0,0,.65-.18A1.75,1.75,0,0,0,12.5.12h.72l-1,4.8-.62-.08-.09-.79a4.45,4.45,0,0,0-.69-1.91A2.78,2.78,0,0,0,8.39.89,2.2,2.2,0,0,0,6.38,1.9ZM22.8.39H15.66V1a4.71,4.71,0,0,1,1.41.25c.23.11.34.36.34.77a2.86,2.86,0,0,1-.06.54c0,.21-.11.47-.19.77L14.21,14.11a2.47,2.47,0,0,1-.68,1.29,2.62,2.62,0,0,1-1.27.42v.62h7.15v-.62A4.63,4.63,0,0,1,18,15.56c-.22-.1-.33-.36-.33-.77a1.8,1.8,0,0,1,0-.22c0-.08,0-.16,0-.24l.19-.83,3-10.77a2.5,2.5,0,0,1,.66-1.3A2.76,2.76,0,0,1,22.8,1ZM38.09,9.14V8.52H31.18v.62a5.05,5.05,0,0,1,1.44.28c.22.1.32.35.32.75a13.35,13.35,0,0,1-.54,2.54,19.13,19.13,0,0,1-.54,1.87A1.85,1.85,0,0,1,31,15.66a3.77,3.77,0,0,1-1.78.35A3.71,3.71,0,0,1,27,15.38c-1.09-.77-1.64-2.13-1.64-4.08a13.74,13.74,0,0,1,1.78-6.69q2.05-3.72,5-3.72a2.93,2.93,0,0,1,3,1.86,6.09,6.09,0,0,1,.4,2.48l.69.08L37.44,0h-.71a2.44,2.44,0,0,1-.41.53.82.82,0,0,1-.58.2A9.14,9.14,0,0,1,34.33.36,9.23,9.23,0,0,0,31.73,0a9.4,9.4,0,0,0-7.46,3.42,10.46,10.46,0,0,0-2.65,7,5.88,5.88,0,0,0,2.2,4.83,7.77,7.77,0,0,0,5,1.64A13.06,13.06,0,0,0,32,16.52a14.26,14.26,0,0,0,2.33-.75l.67-.3,1.2-4.36a4.15,4.15,0,0,1,.62-1.59A2.28,2.28,0,0,1,38.09,9.14ZM50.36,1a3.36,3.36,0,0,1,1.31.27,1.25,1.25,0,0,1,.58,1.2,6.26,6.26,0,0,1-.15,1.09c-.07.33-.16.7-.27,1.13L50,11.48,44.76.39H39.93V1a3.49,3.49,0,0,1,1.12.2,1.51,1.51,0,0,1,.74.85l.1.25L39.2,12.16a12.62,12.62,0,0,1-1.09,2.93,1.86,1.86,0,0,1-1.35.73v.62h5v-.62a3.62,3.62,0,0,1-1.28-.26,1.21,1.21,0,0,1-.63-1.17,4.72,4.72,0,0,1,0-.64q.1-.52.39-1.59l2.39-8.6,6.23,13.28h.6L52.84,4.66a15.29,15.29,0,0,1,1-2.78A1.52,1.52,0,0,1,55,1.05l.34,0V.39H50.36Zm22.33,13.8a.66.66,0,0,1,0-.15c0-.05,0-.16.07-.34l.2-.83L75.91,2.73a2.43,2.43,0,0,1,.79-1.39A2.78,2.78,0,0,1,77.86,1V.39H70.71V1A4.45,4.45,0,0,1,72,1.2a.81.81,0,0,1,.47.83,2.73,2.73,0,0,1-.07.57c0,.22-.1.47-.17.74L71.07,7.5h-5.7l1.29-4.77a2.27,2.27,0,0,1,.73-1.33A4.36,4.36,0,0,1,69.08,1V.39H61.47V1a4.73,4.73,0,0,1,1.42.25c.22.11.33.36.33.77a2.93,2.93,0,0,1-.08.58c0,.24-.1.48-.17.73L60,14.1a2.73,2.73,0,0,1-.65,1.29,2.47,2.47,0,0,1-1.3.43v.62h7.15v-.62a5.13,5.13,0,0,1-1.42-.24c-.21-.1-.31-.34-.31-.72a3,3,0,0,1,0-.57c0-.16.1-.43.19-.8l1.35-4.94h5.7L69.27,14.1a2.21,2.21,0,0,1-.74,1.33,4.77,4.77,0,0,1-1.69.39v.62h7.63v-.62a4.72,4.72,0,0,1-1.25-.17A.82.82,0,0,1,72.69,14.81Zm13.38.25a10.28,10.28,0,0,1-3.72.61,1.86,1.86,0,0,1-1.08-.21.67.67,0,0,1-.26-.54,2.23,2.23,0,0,1,0-.32,3.38,3.38,0,0,1,.09-.41l1.58-5.86a5.51,5.51,0,0,1,2.75.47,2,2,0,0,1,.7,1.75c0,.11,0,.24,0,.41s0,.37-.07.59l.66.12,1.78-6.56L87.85,5a4.75,4.75,0,0,1-1.64,2.12,10.13,10.13,0,0,1-3.27.41l1.43-5.33a1.56,1.56,0,0,1,.45-.86,2.07,2.07,0,0,1,1.23-.23c1.86,0,3.1.41,3.71,1.23a4.32,4.32,0,0,1,.56,2.47L91,5,92,.39H79.06V1a4.75,4.75,0,0,1,1.43.25c.21.11.32.36.32.77a2.73,2.73,0,0,1-.07.57c0,.22-.11.47-.18.74l-3,10.77a2.4,2.4,0,0,1-.68,1.29,2.58,2.58,0,0,1-1.26.42v.62H89l1.41-4.66-.58-.11A7.22,7.22,0,0,1,86.07,15.06ZM114.32,2.23l-1.43,5.33a10.13,10.13,0,0,0,3.27-.41A4.75,4.75,0,0,0,117.8,5l.67.08-1.78,6.56-.66-.12c0-.22.06-.42.07-.59s0-.3,0-.41a2,2,0,0,0-.71-1.75,5.51,5.51,0,0,0-2.75-.47l-1.58,5.86a3.38,3.38,0,0,0-.09.41,2.23,2.23,0,0,0,0,.32.67.67,0,0,0,.26.54,1.86,1.86,0,0,0,1.08.21,10.28,10.28,0,0,0,3.72-.61,7.22,7.22,0,0,0,3.73-3.39l.58.11-1.41,4.66h-18L98.33,8.51h-.68l-1.42,5-.2.83,0,.2a1.77,1.77,0,0,0,0,.23c0,.43.1.7.31.8a4.51,4.51,0,0,0,1.43.26v.62H90.59v-.62a2.58,2.58,0,0,0,1.26-.42,2.4,2.4,0,0,0,.68-1.29l3-10.77.15-.57a4.09,4.09,0,0,0,.1-.79c0-.38-.11-.62-.32-.73A5.3,5.3,0,0,0,94,1V.39h6.6A10.58,10.58,0,0,1,104,.82a3,3,0,0,1,2.24,3.05,4,4,0,0,1-.38,1.6A4.06,4.06,0,0,1,104.62,7a5.32,5.32,0,0,1-1.45.8c-.33.11-.84.25-1.54.42.08.24.13.4.16.46l1.85,5.42a2.81,2.81,0,0,0,.8,1.38,2.42,2.42,0,0,0,1.23.32,2.64,2.64,0,0,0,1.22-.41,2.47,2.47,0,0,0,.68-1.29l2.94-10.77c.07-.27.13-.52.18-.74a2.73,2.73,0,0,0,.07-.57c0-.41-.11-.66-.32-.77A4.75,4.75,0,0,0,109,1V.39h12.93l-1,4.56-.64-.11a4.39,4.39,0,0,0-.57-2.47c-.61-.82-1.85-1.23-3.71-1.23a2.07,2.07,0,0,0-1.23.23A1.7,1.7,0,0,0,114.32,2.23ZM101.5,6.64a4.76,4.76,0,0,0,.77-1.31,4.68,4.68,0,0,0,.36-1.84,2.72,2.72,0,0,0-.5-1.67,2,2,0,0,0-1.7-.66.94.94,0,0,0-.71.22,1.81,1.81,0,0,0-.39.85L97.88,7.72a10.33,10.33,0,0,0,1.91-.16A3,3,0,0,0,101.5,6.64Z",opacity:1,strokeColor:"",fillColor:"#192760",width:121.306,height:16.899,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Accepted":t={iconName:"Accepted",pathdata:"M22.409294,0.00021190348 C22.64747,0.0056831966 22.875833,0.11701412 23.023336,0.32638185 23.631345,1.1873664 25.36437,2.8183636 27.4584,4.1123583 28.000408,4.4483535 28.015407,5.227338 27.477398,5.5713293 23.803344,7.9272954 12.881201,15.464245 9.4751583,23.800168 9.2091556,24.452168 8.3321453,24.542164 7.9521352,23.95016 6.0691143,21.014182 1.8990528,14.526234 0.095028103,11.832258 -0.13796928,11.485277 0.081027784,11.023275 0.49603404,10.97927 1.9670546,10.824272 4.8490969,10.421291,6.5811144,9.5293013 6.9811216,9.3233086 7.4691268,9.5782811 7.5601316,10.019287 7.847138,11.400286 8.4021459,13.83224 8.952148,14.781236 8.952148,14.781236 16.385246,3.2303471 21.985326,0.10638282 22.119951,0.031756414 22.266389,-0.003070501 22.409294,0.00021190348 z",opacity:1,strokeColor:"",fillColor:"#516c30",width:27.873,height:24.346,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Rejected":t={iconName:"Rejected",pathdata:"M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:22.588,height:22.586,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"Rejected_with_border":t={iconName:"Rejected_with_border",pathdata:"M3.8779989,0 L11.294,7.4140023 18.710001,0 22.588001,3.8779911 15.172998,11.293032 22.588001,18.707033 18.710001,22.586 11.294,15.169985 3.8779989,22.586 0,18.707033 7.4150017,11.293032 0,3.8779911 z",opacity:1,strokeColor:"",fillColor:"#192760",width:22.588,height:24.346,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotApproved":case"Not Approved":t={iconName:"Not Approved",pathdata:"M0,19.46a1.56,1.56,0,0,0,1.16-.9A19.84,19.84,0,0,0,2.1,15L4.42,2.84l-.09-.3a1.82,1.82,0,0,0-.64-1.06,2.41,2.41,0,0,0-1-.24V.48H6.88l4.49,13.64L13,5.78c.09-.52.17-1,.22-1.39a10.11,10.11,0,0,0,.13-1.34,1.83,1.83,0,0,0-.49-1.48,2.49,2.49,0,0,0-1.13-.33V.48H16v.76l-.29.06a1.42,1.42,0,0,0-1,1,23.7,23.7,0,0,0-.84,3.42L11,20.71h-.51L5.1,4.38,3,15c-.17.87-.28,1.53-.33,2a5.32,5.32,0,0,0,0,.79,1.69,1.69,0,0,0,.54,1.44,2.48,2.48,0,0,0,1.1.32v.76H0ZM17.73,4.53C19.54,1.51,21.55,0,23.79,0a4.4,4.4,0,0,1,3.66,1.92,8.52,8.52,0,0,1,1.43,5.19,17.56,17.56,0,0,1-2.53,9.07q-2.7,4.61-6.21,4.6a4.24,4.24,0,0,1-3.6-1.92,8.6,8.6,0,0,1-1.39-5.14A17.68,17.68,0,0,1,17.73,4.53ZM18.37,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29,16.41,16.41,0,0,0,2.06-4.93,35.53,35.53,0,0,0,1.06-4.83A28.26,28.26,0,0,0,25.9,4.6a5.86,5.86,0,0,0-.52-2.55A1.7,1.7,0,0,0,23.78,1Q21.2,1,19.45,7.53a33,33,0,0,0-1.33,8.26A8.15,8.15,0,0,0,18.37,18Zm11.08,1.48a2.34,2.34,0,0,0,1.3-.26,3,3,0,0,0,.85-1.85l3-15.85A3.54,3.54,0,0,0,32,2.56a8,8,0,0,0-1.82,3.16l-.53-.2.8-5H41.81l-.74,5.66-.54-.07c0-1.92-.41-3.24-1.13-3.94a2.6,2.6,0,0,0-1.74-.63L34.79,16.6l-.17,1a2.43,2.43,0,0,0,0,.33,2.26,2.26,0,0,0,0,.26c0,.5.11.82.33.95a3.94,3.94,0,0,0,1.39.3v.76H29.45Zm26.65.76H50.18v-.71a2.28,2.28,0,0,0,1.25-.41,1.64,1.64,0,0,0,.37-1.29c0-.22,0-.75-.11-1.58,0-.17-.08-.89-.2-2.15H47l-1.2,3c-.08.2-.15.42-.22.66a2.84,2.84,0,0,0-.09.69c0,.41.08.67.25.78a2.91,2.91,0,0,0,1.08.3v.71H42.79v-.71a2.44,2.44,0,0,0,.85-.53,5.59,5.59,0,0,0,.9-1.56L52.21.07h.53l2,16.88A5.46,5.46,0,0,0,55.2,19a1.36,1.36,0,0,0,.9.43Zm-4.76-7.31-.76-7.18-3,7.18Zm4.95,6.53a1.82,1.82,0,0,0,1-.5,3.56,3.56,0,0,0,.58-1.59L60.42,4.11c.06-.3.1-.6.15-.9a5.46,5.46,0,0,0,.06-.72c0-.52-.13-.86-.4-1a2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.26.73,1.9,2.07,1.9,4a5.81,5.81,0,0,1-1.54,4.22,5.32,5.32,0,0,1-4,1.58l-.59,0-1.2-.11L61,16.6l-.17,1a2.72,2.72,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29c0,.5.09.81.28.94a3.26,3.26,0,0,0,1.23.31v.76h-6Zm6-9.67.38.06H63a3,3,0,0,0,1.62-.36,2.87,2.87,0,0,0,1-1.18,7.28,7.28,0,0,0,.6-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.44,1.44,0,0,0-1.39-.79.71.71,0,0,0-.65.28,3.7,3.7,0,0,0-.32,1Zm5.61,9.69A1.86,1.86,0,0,0,69,18.94a3.54,3.54,0,0,0,.59-1.59L72.15,4.11q.09-.45.15-.9a5.73,5.73,0,0,0,.07-.72,1.1,1.1,0,0,0-.41-1,2.88,2.88,0,0,0-1.1-.23V.48h5.93a5,5,0,0,1,2.5.57c1.27.73,1.9,2.07,1.9,4a5.77,5.77,0,0,1-1.54,4.22,5.31,5.31,0,0,1-4,1.58l-.6,0-1.2-.11L72.74,16.6l-.17,1a2.72,2.72,0,0,0,0,.3c0,.1,0,.19,0,.29,0,.5.1.81.29.94a3.15,3.15,0,0,0,1.23.31v.76h-6.1Zm6.12-9.69.38.06h.33a3,3,0,0,0,1.62-.36,3,3,0,0,0,1-1.18,7.67,7.67,0,0,0,.59-2,11.67,11.67,0,0,0,.22-2,4.4,4.4,0,0,0-.41-2,1.43,1.43,0,0,0-1.38-.79.73.73,0,0,0-.66.28,3.7,3.7,0,0,0-.32,1Zm5.57,9.69a1.9,1.9,0,0,0,1.09-.52,3.56,3.56,0,0,0,.58-1.59L83.84,4.11c0-.27.09-.51.13-.71a7.08,7.08,0,0,0,.09-1c0-.47-.1-.77-.28-.9a3.53,3.53,0,0,0-1.22-.3V.48h5.68a6.57,6.57,0,0,1,3,.53q1.92,1,1.92,3.75a6.79,6.79,0,0,1-.32,2,5.23,5.23,0,0,1-1.08,1.9,4.56,4.56,0,0,1-1.25,1,11.62,11.62,0,0,1-1.33.52c.07.3.12.49.14.57l1.59,6.66a4.07,4.07,0,0,0,.69,1.7,1.72,1.72,0,0,0,1.13.41v.76H88.52l-2.23-9.76h-.58L84.49,16.6l-.17,1a1,1,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28c0,.53.09.86.26,1a3.11,3.11,0,0,0,1.24.32v.76H79.63ZM87.55,9.3A2.59,2.59,0,0,0,89,8.17a7.24,7.24,0,0,0,.66-1.62A8.18,8.18,0,0,0,90,4.29a4.32,4.32,0,0,0-.43-2,1.5,1.5,0,0,0-1.45-.81.71.71,0,0,0-.62.26,2.78,2.78,0,0,0-.33,1.05L85.91,9.5A6.63,6.63,0,0,0,87.55,9.3Zm8.72-4.77Q99,0,102.32,0A4.37,4.37,0,0,1,106,1.92a8.46,8.46,0,0,1,1.44,5.19,17.58,17.58,0,0,1-2.54,9.07q-2.7,4.61-6.21,4.6a4.27,4.27,0,0,1-3.6-1.92,8.67,8.67,0,0,1-1.38-5.14A17.68,17.68,0,0,1,96.27,4.53ZM96.9,18c.33,1.19.93,1.78,1.8,1.78a2.83,2.83,0,0,0,2.22-1.29A16.63,16.63,0,0,0,103,13.54a37.1,37.1,0,0,0,1.06-4.83,29.49,29.49,0,0,0,.38-4.11,5.86,5.86,0,0,0-.51-2.55A1.71,1.71,0,0,0,102.31,1C100.6,1,99.15,3.17,98,7.53a33.42,33.42,0,0,0-1.33,8.26A8.57,8.57,0,0,0,96.9,18ZM114.35.48v.76a2.57,2.57,0,0,0-1.08.17,1.07,1.07,0,0,0-.5,1,2.53,2.53,0,0,0,0,.28,2.64,2.64,0,0,0,0,.28l1.07,11.76L117.77,6c.31-.71.59-1.41.84-2.11A5.25,5.25,0,0,0,119,2.19a.85.85,0,0,0-.38-.81,3.09,3.09,0,0,0-.95-.14V.48h4v.76a2.08,2.08,0,0,0-.73.45,5.35,5.35,0,0,0-.82,1.4l-7.79,17.69h-.66L110,5.74A22,22,0,0,0,109.46,2c-.16-.39-.58-.62-1.28-.71V.48Zm5.15,19a1.83,1.83,0,0,0,1.08-.52,3.42,3.42,0,0,0,.59-1.59l2.54-13.24c.06-.34.11-.64.15-.92a4.83,4.83,0,0,0,.06-.7c0-.5-.09-.81-.28-.94a3.14,3.14,0,0,0-1.22-.31V.48h11.12l-.87,5.6L132.11,6a7,7,0,0,0-.49-3c-.52-1-1.59-1.51-3.19-1.51-.55,0-.9.09-1.06.28A2.44,2.44,0,0,0,127,2.74L125.76,9.3a6.21,6.21,0,0,0,2.81-.51A6,6,0,0,0,130,6.18l.58.1L129,14.35l-.56-.14c0-.28,0-.52,0-.73s0-.37,0-.51a2.92,2.92,0,0,0-.61-2.15,3.55,3.55,0,0,0-2.37-.57l-1.36,7.2a4.79,4.79,0,0,0-.07.51,3.28,3.28,0,0,0,0,.39,1,1,0,0,0,.22.66,1.24,1.24,0,0,0,.93.26,6.43,6.43,0,0,0,3.21-.75,7.67,7.67,0,0,0,3.21-4.17l.5.13-1.22,5.74H119.5Zm12.79,0a1.87,1.87,0,0,0,1-.41,3.23,3.23,0,0,0,.71-1.71L136.5,4.11c.07-.38.13-.69.17-1a5.89,5.89,0,0,0,.05-.67c0-.5-.1-.81-.29-.94a3.32,3.32,0,0,0-1.22-.31V.48h6a5.35,5.35,0,0,1,4.63,2.22,10.11,10.11,0,0,1,1.58,6,13.3,13.3,0,0,1-2.34,7.84,8,8,0,0,1-6.86,3.7h-5.93ZM143.87,3.39a2.84,2.84,0,0,0-2.79-2,1.08,1.08,0,0,0-.91.31,1.93,1.93,0,0,0-.34.83L137,17.44a3.1,3.1,0,0,0-.06.39c0,.11,0,.21,0,.3a1.22,1.22,0,0,0,.24.84,1.26,1.26,0,0,0,.9.26q3.67,0,5.33-5.42a23.91,23.91,0,0,0,1-6.94A9.45,9.45,0,0,0,143.87,3.39Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:147.425,height:20.783,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"Draft":t={iconName:"Draft",pathdata:"M24.92,3Q22,.46,16.4.46h-11v.87a9.38,9.38,0,0,1,2.24.35q.54.23.54,1.08a3.24,3.24,0,0,1-.1.76c-.07.29-.17.65-.31,1.08L3.08,19.69a3.26,3.26,0,0,1-1.32,1.95A4.67,4.67,0,0,1,0,22.1V23H10.91q7.8,0,12.61-4.22a11.56,11.56,0,0,0,4.32-8.94A8.58,8.58,0,0,0,24.92,3ZM20.41,15.66a10.18,10.18,0,0,1-9.8,6.18A3.18,3.18,0,0,1,9,21.54a1,1,0,0,1-.46-.95,2.47,2.47,0,0,1,0-.35,3,3,0,0,1,.1-.44l5.24-17a1.91,1.91,0,0,1,.62-.95,2.81,2.81,0,0,1,1.66-.35c2.44,0,4.15.76,5.15,2.27a7.29,7.29,0,0,1,.94,4A17.63,17.63,0,0,1,20.41,15.66ZM49.75,9.74a5.84,5.84,0,0,0,2-2.16,5.1,5.1,0,0,0,.59-2.24c0-2.1-1.18-3.53-3.54-4.27A18.67,18.67,0,0,0,43.36.46H32.92v.87a8.79,8.79,0,0,1,2.24.35c.35.14.52.48.52,1a5.36,5.36,0,0,1-.17,1.11c-.06.23-.14.5-.23.8L30.61,19.7a3.26,3.26,0,0,1-1.08,1.81,4.44,4.44,0,0,1-2,.59V23H38.85V22.1a8.54,8.54,0,0,1-2.28-.36c-.32-.15-.49-.53-.49-1.13,0-.11,0-.21,0-.32a1.15,1.15,0,0,1,.06-.28l.31-1.16,2.25-7h1.07L43.89,23h7.64V22.1a4.27,4.27,0,0,1-2.07-.47,3.91,3.91,0,0,1-1.27-1.93l-2.92-7.6a4.67,4.67,0,0,1-.25-.65c1.1-.23,1.91-.42,2.43-.59A8.49,8.49,0,0,0,49.75,9.74ZM46,7.39a6.73,6.73,0,0,1-1.21,1.84,5,5,0,0,1-2.72,1.29,19.56,19.56,0,0,1-3,.23L41.38,3A2.54,2.54,0,0,1,42,1.85a1.76,1.76,0,0,1,1.14-.31,3.38,3.38,0,0,1,2.69.93,3.52,3.52,0,0,1,.79,2.34A5.94,5.94,0,0,1,46,7.39Zm27.9,11.85L70.29,0h-1L55.21,19.78a6.61,6.61,0,0,1-1.66,1.78,5.3,5.3,0,0,1-1.55.6V23h7.45v-.81a8,8,0,0,1-2-.34.85.85,0,0,1-.47-.89,2,2,0,0,1,.17-.79,5.32,5.32,0,0,1,.4-.75L59.8,16H68c.22,1.44.35,2.25.37,2.45a16,16,0,0,1,.2,1.81,1.51,1.51,0,0,1-.67,1.47,6.38,6.38,0,0,1-2.31.46V23H77.1v-.81a4.28,4.28,0,0,1-2.28-.55A4.47,4.47,0,0,1,73.93,19.24ZM60.7,14.64l5.62-8.19,1.4,8.19ZM84,.46h20.2l-1.61,6.39-1-.15a5.61,5.61,0,0,0-.88-3.43Q99.2,1.52,94.86,1.51a3.56,3.56,0,0,0-1.76.3A2.05,2.05,0,0,0,92.34,3L90.1,10.5A16.53,16.53,0,0,0,95,9.91c.77-.33,1.62-1.32,2.56-3l1.06.12-2.82,9.2-1-.17c0-.33.08-.61.1-.85s0-.43,0-.56a2.76,2.76,0,0,0-1-2.38c-.66-.49-2.07-.73-4.23-.73l-2.5,8.22a3.56,3.56,0,0,0-.09.39,1.55,1.55,0,0,0,0,.37,1.32,1.32,0,0,0,1,1.33,5.52,5.52,0,0,0,1.78.21V23H78.58V22.1a4.35,4.35,0,0,0,2-.61,3.33,3.33,0,0,0,1.06-1.8L86.32,4.6c.09-.31.16-.58.23-.81a5.05,5.05,0,0,0,.16-1.1c0-.53-.17-.87-.52-1A8.7,8.7,0,0,0,84,1.33Zm24.1,0h20.89l-1.37,6.46-1-.08c-.07-2.2-.76-3.69-2.09-4.49a6.61,6.61,0,0,0-3.2-.72L116,18.84,115.7,20a2.63,2.63,0,0,0-.07.38,1.51,1.51,0,0,0,0,.3c0,.57.2.94.61,1.08a11.19,11.19,0,0,0,2.56.34V23H106.2V22.1a6.49,6.49,0,0,0,2.4-.3,3.19,3.19,0,0,0,1.56-2.1l5.58-18.07a9.07,9.07,0,0,0-4.83,1.2,9.52,9.52,0,0,0-3.34,3.61l-1-.23Z",opacity:1,strokeColor:"",fillColor:"#192760",width:128.941,height:22.97,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Final":t={iconName:"Final",pathdata:"M24.94,6l-1.06-.13a4.37,4.37,0,0,0-.91-3q-1.51-1.54-6-1.54a4.28,4.28,0,0,0-1.83.26,1.8,1.8,0,0,0-.78,1.08L12,9.21a20.26,20.26,0,0,0,5.15-.52A6.49,6.49,0,0,0,19.8,6.1l1.1.1L18,14.27l-1.09-.15a6.34,6.34,0,0,0,.11-.74c0-.22,0-.38,0-.5a2.26,2.26,0,0,0-1-2.09c-.68-.42-2.15-.63-4.39-.63L9,17.37a3.09,3.09,0,0,0-.1.34,1.22,1.22,0,0,0,0,.32,1.18,1.18,0,0,0,1,1.17,7,7,0,0,0,1.86.18v.77H0v-.77a5.14,5.14,0,0,0,2.11-.53,3,3,0,0,0,1.1-1.58L8.06,4c.09-.27.17-.5.23-.7a3.74,3.74,0,0,0,.18-1,.83.83,0,0,0-.55-.89,10.94,10.94,0,0,0-2.33-.3V.4h21Zm8.54,12.11a1.49,1.49,0,0,1,0-.28,2.46,2.46,0,0,1,.07-.29l.3-1L38.76,3.29a2.93,2.93,0,0,1,1.09-1.6A5.42,5.42,0,0,1,42,1.17V.4H30.17v.77a10.52,10.52,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.26-.18.57-.32,1L27.79,17.28a2.94,2.94,0,0,1-1.12,1.59,5.28,5.28,0,0,1-2.09.51v.77H36.36v-.77A10.22,10.22,0,0,1,34,19.07.89.89,0,0,1,33.48,18.12ZM66.19,2.24a2.53,2.53,0,0,1,1.87-1l.56-.06V.4H60.5v.77a8,8,0,0,1,2.16.33,1.47,1.47,0,0,1,1,1.48,5.61,5.61,0,0,1-.25,1.34c-.11.4-.25.87-.43,1.38l-3.08,8.35L51.26.4h-8v.77a8.44,8.44,0,0,1,1.86.24,2.26,2.26,0,0,1,1.22,1.05l.17.31L42.11,14.88a13.74,13.74,0,0,1-1.8,3.61,3.36,3.36,0,0,1-2.22.89v.77h8.23v-.77a7.75,7.75,0,0,1-2.1-.31,1.45,1.45,0,0,1-1-1.44,3.56,3.56,0,0,1,.1-.79,16.15,16.15,0,0,1,.64-2L47.85,4.31,58.11,20.64h1l5.5-15A15.48,15.48,0,0,1,66.19,2.24Zm23,17.13v.78H78.08v-.71A7.47,7.47,0,0,0,80.49,19a1.25,1.25,0,0,0,.7-1.29A13.26,13.26,0,0,0,81,16.16c0-.18-.16-.89-.39-2.15H72.06l-2.3,3a3.7,3.7,0,0,0-.42.66,1.54,1.54,0,0,0-.18.69.74.74,0,0,0,.49.78,10.28,10.28,0,0,0,2.06.3v.71H63.94v-.71a6.43,6.43,0,0,0,1.63-.53,6.63,6.63,0,0,0,1.72-1.56L82,0h1l3.78,16.88A3.69,3.69,0,0,0,87.7,19,3.53,3.53,0,0,0,89.24,19.37Zm-8.93-6.53L78.86,5.65,73,12.84Zm32.8,1.44a11.51,11.51,0,0,1-5.23,3.88,21.36,21.36,0,0,1-7,1A4.88,4.88,0,0,1,99.22,19a.74.74,0,0,1-.58-.71,2.33,2.33,0,0,1,0-.48c0-.13.08-.28.13-.43L104,3.29a2.72,2.72,0,0,1,1.19-1.64,9.4,9.4,0,0,1,2.79-.48V.4H95.4v.77a10.42,10.42,0,0,1,2.34.31.88.88,0,0,1,.56.94,2.58,2.58,0,0,1-.11.67c-.07.25-.17.57-.31.94L93,17.27a2.92,2.92,0,0,1-1.12,1.6,4.59,4.59,0,0,1-1.71.47v.81h21.55l2.32-5.74Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:114.058,height:20.639,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"Completed":t={iconName:"Completed",pathdata:"M16.37,0,15.08,6.9l-.79-.17c0-.41,0-.66,0-.73a2.73,2.73,0,0,0,0-.32,5.33,5.33,0,0,0-.94-3.47A3,3,0,0,0,11,1.07c-2,0-3.68,1.51-5.13,4.55a18.84,18.84,0,0,0-2,8.29q0,3.06,1.2,4.2a3.82,3.82,0,0,0,2.64,1.13,5.3,5.3,0,0,0,3.51-1.43,10.75,10.75,0,0,0,1.78-2.09l.77.65a9.32,9.32,0,0,1-3.12,3.35A7,7,0,0,1,7,20.81a6.66,6.66,0,0,1-5-2.08,7.72,7.72,0,0,1-2-5.57A14.57,14.57,0,0,1,3.05,3.92Q6.1,0,10.29,0A8.92,8.92,0,0,1,13,.43a9.09,9.09,0,0,0,1.65.43.72.72,0,0,0,.6-.23A2.55,2.55,0,0,0,15.6,0ZM32.83,7.11a15.24,15.24,0,0,1-3.11,9.07q-3.31,4.61-7.63,4.6a5.63,5.63,0,0,1-4.42-1.92A7.47,7.47,0,0,1,16,13.72a15.27,15.27,0,0,1,3.18-9.19Q22.46,0,26.57,0a5.82,5.82,0,0,1,4.5,1.92A7.35,7.35,0,0,1,32.83,7.11ZM29.16,4.6a4.92,4.92,0,0,0-.63-2.55,2.14,2.14,0,0,0-2-1.06Q23.4,1,21.24,7.53a27.45,27.45,0,0,0-1.63,8.26A6.68,6.68,0,0,0,19.92,18a2.24,2.24,0,0,0,2.2,1.78,3.71,3.71,0,0,0,2.73-1.29,15,15,0,0,0,2.54-4.93,30.56,30.56,0,0,0,1.3-4.83A23,23,0,0,0,29.16,4.6Zm21.2,13.62a3.83,3.83,0,0,1,.08-.75,8.6,8.6,0,0,1,.19-.88L53.75,3.31a3,3,0,0,1,.85-1.67,2.72,2.72,0,0,1,1.21-.4V.48H50.42L42.66,14.39,41.21.48h-5.8v.76a4.65,4.65,0,0,1,1.45.21c.26.11.38.37.38.78a4.57,4.57,0,0,1-.08.75c-.06.28-.13.61-.23,1L34.34,15a16.85,16.85,0,0,1-1.16,3.65,1.9,1.9,0,0,1-1.42.86v.76h5.3v-.76a3.22,3.22,0,0,1-1.32-.29A1.48,1.48,0,0,1,35,17.74a8.32,8.32,0,0,1,.17-1.42c.07-.37.17-.82.3-1.37L38.06,4.23l1.71,16.38h.71L50,3.76l-3.2,13.58A2.84,2.84,0,0,1,46,19a4.06,4.06,0,0,1-1.76.49v.76h7.93v-.76a4.79,4.79,0,0,1-1.49-.31Q50.36,19,50.36,18.22ZM67.69,9.29a7.39,7.39,0,0,1-4.89,1.58l-.73,0-1.48-.11L59.21,16.6l-.21,1a1,1,0,0,0,0,.3,2.83,2.83,0,0,0,0,.29c0,.5.12.81.35.94a4.74,4.74,0,0,0,1.51.31v.76H53.31v-.76a2.52,2.52,0,0,0,1.33-.52,3.18,3.18,0,0,0,.72-1.59L58.48,4.11q.1-.45.18-.9a4.48,4.48,0,0,0,.08-.72,1,1,0,0,0-.49-1,4.36,4.36,0,0,0-1.36-.23V.48h7.29a7.29,7.29,0,0,1,3.07.57,4,4,0,0,1,2.33,4A5.22,5.22,0,0,1,67.69,9.29Zm-1.8-5a3.65,3.65,0,0,0-.51-2,1.85,1.85,0,0,0-1.7-.79,1,1,0,0,0-.8.28,3.27,3.27,0,0,0-.4,1l-1.66,7,.47.06h.41a4.37,4.37,0,0,0,2-.36,3.14,3.14,0,0,0,1.2-1.18,6.51,6.51,0,0,0,.74-2A9.87,9.87,0,0,0,65.89,4.25Zm16.9,10.1a8.71,8.71,0,0,1-3.35,3.88,9.36,9.36,0,0,1-4.53,1,2.15,2.15,0,0,1-1-.21.75.75,0,0,1-.37-.71,3.18,3.18,0,0,1,0-.47c0-.14,0-.28.08-.44l3.3-14.08a2.94,2.94,0,0,1,.77-1.64,4.47,4.47,0,0,1,1.79-.48V.48h-8v.76a4.8,4.8,0,0,1,1.5.31c.23.13.35.44.35.94a4.36,4.36,0,0,1-.06.67c0,.26-.12.57-.21,1L69.9,17.34a3.18,3.18,0,0,1-.72,1.6,2.53,2.53,0,0,1-1.34.52v.76H81.91l1.49-5.74ZM85.73,1.24a4.59,4.59,0,0,1,1.5.31c.23.13.34.44.34.94a3.84,3.84,0,0,1-.07.7c0,.28-.11.58-.19.92L84.2,17.35a3.18,3.18,0,0,1-.72,1.59,2.27,2.27,0,0,1-1.06.47h-.07v.8H96.2l1.5-5.74-.62-.13a8.14,8.14,0,0,1-3.94,4.17,9.39,9.39,0,0,1-3.94.75A1.75,1.75,0,0,1,88.06,19a.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.16,5.16,0,0,1,2.91.57A2.58,2.58,0,0,1,93.24,13c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14,1.88-8.07L95,6.18a5.62,5.62,0,0,1-1.74,2.61,9.05,9.05,0,0,1-3.45.51l1.51-6.56a2.23,2.23,0,0,1,.47-1.06,2,2,0,0,1,1.3-.28c2,0,3.29.5,3.93,1.51a6.13,6.13,0,0,1,.6,3l.68.13L99.4.48H85.73ZM114,6.14l.92-5.66h-14l-1,5,.66.2a7.81,7.81,0,0,1,2.23-3.16,4.91,4.91,0,0,1,3.23-1.06l-3.73,15.85a2.84,2.84,0,0,1-1,1.85,3.48,3.48,0,0,1-1.6.26v.76h8.4v-.76a5.82,5.82,0,0,1-1.71-.3c-.27-.13-.41-.45-.41-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.21-1,3.53-15.1a3.65,3.65,0,0,1,2.14.63c.89.7,1.35,2,1.39,3.94Zm9.44,12.38a9.39,9.39,0,0,1-3.94.75,1.77,1.77,0,0,1-1.14-.26.87.87,0,0,1-.27-.66,3.28,3.28,0,0,1,0-.39,5,5,0,0,1,.09-.51l1.67-7.2a5.12,5.12,0,0,1,2.91.57,2.58,2.58,0,0,1,.75,2.15c0,.14,0,.31,0,.51s0,.45-.07.73l.7.14L126,6.28l-.7-.1a5.78,5.78,0,0,1-1.74,2.61,9.16,9.16,0,0,1-3.46.51l1.51-6.56a2.14,2.14,0,0,1,.48-1.06,2,2,0,0,1,1.3-.28c2,0,3.28.5,3.92,1.51a6,6,0,0,1,.6,3l.68.13,1.08-5.6H116v.76a4.67,4.67,0,0,1,1.51.31c.22.13.34.44.34.94a4,4,0,0,1-.08.7c0,.28-.11.58-.18.92l-3.12,13.24a3.18,3.18,0,0,1-.72,1.59,2.56,2.56,0,0,1-1.34.52v.76h14.06l1.5-5.74-.62-.13A8.14,8.14,0,0,1,123.39,18.52Zm23.32-9.84a11.62,11.62,0,0,1-2.89,7.84,10.6,10.6,0,0,1-8.42,3.7h-7.29v-.76a2.58,2.58,0,0,0,1.18-.41,2.94,2.94,0,0,0,.88-1.71l3.11-13.23c.09-.38.16-.69.21-1a4.49,4.49,0,0,0,.07-.67c0-.5-.12-.81-.36-.94a4.8,4.8,0,0,0-1.5-.31V.48h7.36a7.16,7.16,0,0,1,5.69,2.22A8.72,8.72,0,0,1,146.71,8.68ZM143,6.87a8,8,0,0,0-.64-3.48,3.52,3.52,0,0,0-3.44-2,1.52,1.52,0,0,0-1.11.31,1.75,1.75,0,0,0-.41.83l-3.5,14.9c0,.14,0,.27-.07.39s0,.21,0,.3a1.06,1.06,0,0,0,.3.84,1.75,1.75,0,0,0,1.1.26q4.53,0,6.55-5.42A19.84,19.84,0,0,0,143,6.87Z",opacity:1,strokeColor:"",fillColor:"#516c30",width:146.706,height:20.811,stampFillColor:"#e6eddf",stampStrokeColor:""};break;case"ForPublicRelease":case"For Public Release":t={iconName:"For Public Release",pathdata:"M10.33.48l-.65,5.6L9.27,6a9.74,9.74,0,0,0-.36-3A2.27,2.27,0,0,0,6.57,1.4a.85.85,0,0,0-.71.26,2.67,2.67,0,0,0-.3,1.08L4.65,9.28a3.45,3.45,0,0,0,2-.52,6.65,6.65,0,0,0,1-2.59l.43.1L7,14.34l-.42-.14c0-.29,0-.54,0-.75s0-.38,0-.49a4.17,4.17,0,0,0-.39-2.09,1.91,1.91,0,0,0-1.71-.64l-1,7.21c0,.13,0,.24,0,.35s0,.21,0,.31a1.45,1.45,0,0,0,.38,1.17,1.17,1.17,0,0,0,.72.19v.76H0v-.76a1.31,1.31,0,0,0,.82-.54,4.39,4.39,0,0,0,.42-1.58L3.13,4.11c0-.27.06-.51.09-.71,0-.41.07-.73.07-1a1.34,1.34,0,0,0-.21-.9,2.13,2.13,0,0,0-.91-.3V.48ZM20.5,7.11a22.43,22.43,0,0,1-1.88,9.07q-2,4.61-4.62,4.6a3,3,0,0,1-2.67-1.92,10.91,10.91,0,0,1-1-5.14,22.46,22.46,0,0,1,1.92-9.19Q14.23,0,16.71,0a3.11,3.11,0,0,1,2.72,1.92A10.72,10.72,0,0,1,20.5,7.11ZM18.28,4.6a7.7,7.7,0,0,0-.38-2.55c-.26-.7-.65-1-1.19-1-1.28,0-2.35,2.17-3.22,6.53a43.69,43.69,0,0,0-1,8.26,10.72,10.72,0,0,0,.19,2.2c.24,1.18.69,1.77,1.33,1.77s1.16-.43,1.65-1.29a19.35,19.35,0,0,0,1.54-4.93A48.7,48.7,0,0,0,18,8.71,38.21,38.21,0,0,0,18.28,4.6Zm11.59.16a8.73,8.73,0,0,1-.24,2,5.64,5.64,0,0,1-.8,1.9,3.49,3.49,0,0,1-.93,1,7.31,7.31,0,0,1-1,.52c0,.3.08.49.1.57l1.18,6.66a4.54,4.54,0,0,0,.52,1.7,1.1,1.1,0,0,0,.83.41v.76H26.46l-1.65-9.76h-.43l-.91,6.14-.13,1a2,2,0,0,0,0,.25,2.62,2.62,0,0,0,0,.28,1.57,1.57,0,0,0,.2,1,1.77,1.77,0,0,0,.92.32v.76H19.86v-.76a1.33,1.33,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L23,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.22A3.79,3.79,0,0,1,28.44,1C29.4,1.66,29.87,2.91,29.87,4.76Zm-2.31-.47a5.77,5.77,0,0,0-.32-2,1.12,1.12,0,0,0-1.09-.81.5.5,0,0,0-.46.26,3.87,3.87,0,0,0-.24,1.05L24.52,9.5a3.73,3.73,0,0,0,1.22-.2,2.1,2.1,0,0,0,1.1-1.13,8.41,8.41,0,0,0,.49-1.62A10.75,10.75,0,0,0,27.56,4.29Zm14.92.78a7.06,7.06,0,0,1-1.14,4.22,3.5,3.5,0,0,1-3,1.58l-.44,0-.89-.11-.84,5.86-.12,1a1.45,1.45,0,0,0,0,.3,2.81,2.81,0,0,0,0,.29,1.38,1.38,0,0,0,.21.94,1.93,1.93,0,0,0,.91.31v.76H32.65v-.76a1.28,1.28,0,0,0,.8-.52,4.3,4.3,0,0,0,.44-1.59L35.77,4.11c0-.3.08-.6.11-.9a5.21,5.21,0,0,0,0-.72,1.29,1.29,0,0,0-.3-1,1.82,1.82,0,0,0-.81-.23V.48h4.4a3,3,0,0,1,1.86.57C42,1.78,42.48,3.12,42.48,5.07Zm-2.23-.82a5.74,5.74,0,0,0-.3-2,1.07,1.07,0,0,0-1-.79.5.5,0,0,0-.49.28,5.11,5.11,0,0,0-.24,1l-1,7,.28.06h.25a1.79,1.79,0,0,0,1.2-.36,2.88,2.88,0,0,0,.73-1.18,10.56,10.56,0,0,0,.44-2A15.74,15.74,0,0,0,40.25,4.25Zm12.91-3V.48H50v.76a1.46,1.46,0,0,1,.82.32A2,2,0,0,1,51.24,3a15,15,0,0,1-.14,1.57q0-.17-.15,1.17l-.89,6.16a29.63,29.63,0,0,1-1,4.77c-.55,1.63-1.31,2.44-2.28,2.44a1.59,1.59,0,0,1-1.38-.77,4.16,4.16,0,0,1-.5-2.23q0-.63.15-2c.06-.5.15-1.14.27-1.93l1.26-8.84a4.13,4.13,0,0,1,.46-1.66,1.66,1.66,0,0,1,1-.46V.48H43.34v.76a2,2,0,0,1,.9.3,1.3,1.3,0,0,1,.21.9,7.27,7.27,0,0,1,0,.75c0,.29-.07.59-.11.92l-1,7.24c-.16,1.14-.27,1.93-.32,2.38a19.16,19.16,0,0,0-.12,2,6.13,6.13,0,0,0,1,3.71,2.93,2.93,0,0,0,2.43,1.33c1.39,0,2.45-.9,3.17-2.69a29.58,29.58,0,0,0,1.23-5.61l1-6.74A24.45,24.45,0,0,1,52.3,2.1,1.22,1.22,0,0,1,53.16,1.24Zm7.14,9.82a5.87,5.87,0,0,1,.68,3,8.55,8.55,0,0,1-1,4.27,3.68,3.68,0,0,1-3.48,1.84H51.82v-.76a1.3,1.3,0,0,0,.72-.4,3.94,3.94,0,0,0,.52-1.71L55,4.1c0-.39.09-.72.12-1s0-.46,0-.6c0-.53-.07-.86-.23-1A1.64,1.64,0,0,0,54,1.24V.48h4.17a3.4,3.4,0,0,1,2.67,1,4.91,4.91,0,0,1,1,3.38,5.33,5.33,0,0,1-1.17,3.61,4.8,4.8,0,0,1-1.68,1.22A4.84,4.84,0,0,1,60.3,11.06Zm-1.66,2.45a3.81,3.81,0,0,0-.73-2.74,2.63,2.63,0,0,0-1.58-.52l-1,7.2a4,4,0,0,0-.05.4c0,.15,0,.32,0,.51a.9.9,0,0,0,.33.82,1.13,1.13,0,0,0,.59.12c1,0,1.67-.87,2.1-2.59A13.54,13.54,0,0,0,58.64,13.51Zm.12-5.29A5.92,5.92,0,0,0,59.4,6.1a12.74,12.74,0,0,0,.13-1.74,6.54,6.54,0,0,0-.29-2.11,1.11,1.11,0,0,0-1.13-.81.49.49,0,0,0-.49.32,3.52,3.52,0,0,0-.23,1l-.94,6.62A7.45,7.45,0,0,0,58,9,1.8,1.8,0,0,0,58.76,8.22Zm11.71,6.14a8.78,8.78,0,0,1-2,3.87,4,4,0,0,1-2.74,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.22-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2-14.08a3.8,3.8,0,0,1,.47-1.64,1.94,1.94,0,0,1,1.08-.48V.48H63.6v.76a2,2,0,0,1,.91.31,1.36,1.36,0,0,1,.22.94c0,.2,0,.42,0,.67s-.07.57-.13,1L62.68,17.34a4.31,4.31,0,0,1-.44,1.6,1.28,1.28,0,0,1-.8.52v.76h8.5l.9-5.74ZM76.89.48H72.32v.76a1.92,1.92,0,0,1,.9.31c.15.13.22.44.22.94a5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1L71.39,17.35A4.35,4.35,0,0,1,71,18.94a1.33,1.33,0,0,1-.81.52v.76h4.57v-.76a1.81,1.81,0,0,1-.91-.32,1.39,1.39,0,0,1-.21-.94c0-.09,0-.18,0-.28l0-.3.12-1L75.65,3.36a4.43,4.43,0,0,1,.43-1.6,1.3,1.3,0,0,1,.81-.52Zm8.46.15A.38.38,0,0,1,85,.87a4.12,4.12,0,0,1-1-.44A3.51,3.51,0,0,0,82.37,0Q79.84,0,78,3.92a21.42,21.42,0,0,0-1.84,9.24,11.15,11.15,0,0,0,1.2,5.57,3.51,3.51,0,0,0,3.05,2.08,3.15,3.15,0,0,0,2.21-1.09,8.92,8.92,0,0,0,1.89-3.35L84,15.72A11.08,11.08,0,0,1,83,17.81a2.71,2.71,0,0,1-2.12,1.43,2,2,0,0,1-1.59-1.13,8.33,8.33,0,0,1-.74-4.2A29.46,29.46,0,0,1,79.7,5.62Q81,1.08,82.8,1.07c.59,0,1.07.38,1.45,1.14a8,8,0,0,1,.57,3.47,2.73,2.73,0,0,1,0,.32c0,.08,0,.32,0,.73l.48.17L86.05,0h-.47A2.93,2.93,0,0,1,85.35.63Zm21.41,13.73.37.12-.9,5.74H94.72l-1.66-9.76h-.43l-.91,6.14-.13,1c0,.08,0,.16,0,.25s0,.19,0,.28a1.57,1.57,0,0,0,.2,1,1.81,1.81,0,0,0,.92.32v.76H88.11v-.76a1.3,1.3,0,0,0,.81-.52,4.35,4.35,0,0,0,.43-1.59L91.24,4.11c0-.27.07-.51.09-.71a8.23,8.23,0,0,0,.07-1,1.3,1.3,0,0,0-.21-.9,2.08,2.08,0,0,0-.91-.3V.48h4.23A3.81,3.81,0,0,1,96.7,1c1,.65,1.43,1.9,1.43,3.75a8.73,8.73,0,0,1-.24,2,5.66,5.66,0,0,1-.81,1.9,3.49,3.49,0,0,1-.93,1,6.73,6.73,0,0,1-1,.52c0,.3.09.49.1.57l1.18,6.66a4.74,4.74,0,0,0,.52,1.7,1,1,0,0,0,.78.39,1.23,1.23,0,0,0,.78-.5A4.3,4.3,0,0,0,99,17.35l1.88-13.24c.05-.34.09-.64.12-.92a6.28,6.28,0,0,0,0-.7,1.45,1.45,0,0,0-.2-.94,2,2,0,0,0-.91-.31V.48h8.26l-.65,5.6L107.1,6a9.57,9.57,0,0,0-.36-3,2.3,2.3,0,0,0-2.38-1.51c-.41,0-.67.09-.78.28a2.87,2.87,0,0,0-.29,1.06l-.91,6.56a3.57,3.57,0,0,0,2.08-.51,6.59,6.59,0,0,0,1.06-2.61l.42.1-1.14,8.08-.42-.15c0-.28,0-.52.05-.73s0-.37,0-.51a3.6,3.6,0,0,0-.46-2.15,2.14,2.14,0,0,0-1.75-.57l-1,7.2a4.7,4.7,0,0,0-.06.51c0,.16,0,.29,0,.39a1.12,1.12,0,0,0,.17.66.77.77,0,0,0,.69.26,3.77,3.77,0,0,0,2.37-.75A7.71,7.71,0,0,0,106.76,14.36ZM95.09,8.17a7.75,7.75,0,0,0,.49-1.62,10.75,10.75,0,0,0,.23-2.26,5.77,5.77,0,0,0-.32-2,1.11,1.11,0,0,0-1.08-.81.48.48,0,0,0-.46.26,3.44,3.44,0,0,0-.25,1.05L92.78,9.5A3.78,3.78,0,0,0,94,9.3,2.08,2.08,0,0,0,95.09,8.17Zm21.32,6.19a8.67,8.67,0,0,1-2,3.87,4,4,0,0,1-2.73,1,.89.89,0,0,1-.63-.21.93.93,0,0,1-.23-.7c0-.19,0-.35,0-.48s0-.28,0-.44l2-14.08a3.84,3.84,0,0,1,.46-1.64,2,2,0,0,1,1.08-.48V.48h-4.86v.76a2,2,0,0,1,.91.31,1.38,1.38,0,0,1,.21.94,5.56,5.56,0,0,1,0,.67c0,.26-.07.57-.12,1l-1.89,13.23a4.16,4.16,0,0,1-.43,1.6,1.27,1.27,0,0,1-.81.52v.76h8.51l.9-5.74Zm8.64,0a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.13-8.08-.42-.1a6.79,6.79,0,0,1-1,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56a2.87,2.87,0,0,1,.29-1.06c.12-.19.38-.28.78-.28A2.3,2.3,0,0,1,125,2.91a9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31,1.45,1.45,0,0,1,.2.94,6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74Zm10.29,5.15v.71h-4.65v-.71a1.44,1.44,0,0,0,.93-.41,2.08,2.08,0,0,0,.27-1.29c0-.22,0-.75-.08-1.58,0-.17-.06-.89-.15-2.15h-3.31l-.89,3a5.32,5.32,0,0,0-.16.66,3.4,3.4,0,0,0-.08.69,1.06,1.06,0,0,0,.2.78,1.68,1.68,0,0,0,.79.3v.71h-3v-.71a1.8,1.8,0,0,0,.63-.53,6.45,6.45,0,0,0,.67-1.56L132.19.07h.4L134.06,17a7.15,7.15,0,0,0,.36,2.08A1.13,1.13,0,0,0,135.34,19.51Zm-3.79-6.6L131,5.73l-2.27,7.18Zm9.6-4-1.32-2.09a4.57,4.57,0,0,1-.47-.94,5.12,5.12,0,0,1-.28-1.78,5.57,5.57,0,0,1,.27-1.77c.27-.83.7-1.24,1.29-1.24s1.21.51,1.57,1.54A8.78,8.78,0,0,1,142.65,5l.06,1,.39.1.63-5.91h-.46a2.09,2.09,0,0,1-.25.54.46.46,0,0,1-.41.21.57.57,0,0,1-.24-.05,1.23,1.23,0,0,1-.26-.12l-.39-.24a2.34,2.34,0,0,0-.5-.25,2.41,2.41,0,0,0-.85-.16,2.55,2.55,0,0,0-2.31,1.67,9.11,9.11,0,0,0-.83,4.05,10.47,10.47,0,0,0,1.88,5.5A9.21,9.21,0,0,1,141,16a6.49,6.49,0,0,1-.5,2.63,1.59,1.59,0,0,1-1.43,1.14,1.42,1.42,0,0,1-1-.4,3.55,3.55,0,0,1-.78-1.16,7.09,7.09,0,0,1-.52-1.92c-.05-.43-.1-1.12-.13-2.06l-.44-.06-.55,6.62h.46a4.11,4.11,0,0,1,.25-.82.36.36,0,0,1,.36-.23.47.47,0,0,1,.17,0,2.38,2.38,0,0,1,.27.18l.39.27a3.52,3.52,0,0,0,.84.43,2.48,2.48,0,0,0,.84.15,2.91,2.91,0,0,0,2.63-1.88,9.24,9.24,0,0,0,1-4.21,9.85,9.85,0,0,0-.49-3.24A12.1,12.1,0,0,0,141.15,8.92Zm7.75-7.24c.12-.19.38-.28.78-.28a2.3,2.3,0,0,1,2.38,1.51,9.57,9.57,0,0,1,.36,3l.41.13.65-5.6h-8.26v.76a1.93,1.93,0,0,1,.91.31c.14.13.2.44.2.94a6.28,6.28,0,0,1,0,.7c0,.28-.07.58-.11.92l-1.89,13.24a4.35,4.35,0,0,1-.43,1.59,1.33,1.33,0,0,1-.81.52v.76h8.5l.91-5.74-.38-.12a7.71,7.71,0,0,1-2.38,4.16,3.82,3.82,0,0,1-2.38.75.77.77,0,0,1-.69-.26,1.2,1.2,0,0,1-.17-.66c0-.1,0-.23,0-.39a4.7,4.7,0,0,1,.06-.51l1-7.2a2.17,2.17,0,0,1,1.76.57,3.69,3.69,0,0,1,.45,2.15c0,.14,0,.31,0,.51s0,.45,0,.73l.42.15,1.14-8.08-.43-.1a6.79,6.79,0,0,1-1.05,2.61,3.63,3.63,0,0,1-2.09.51l.91-6.56A2.87,2.87,0,0,1,148.9,1.68Z",opacity:1,strokeColor:"",fillColor:"#192760",width:153.485,height:20.812,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"NotForPublicRelease":case"Not For Public Release":t={iconName:"Not For Public Release",pathdata:"M9,2.35q-.21.9-.51,3.48L6.69,21.05H6.38L3.11,4.45,1.85,15.19c-.1.89-.17,1.56-.2,2s0,.55,0,.81A2.39,2.39,0,0,0,2,19.45a1.09,1.09,0,0,0,.67.33v.77H0v-.77a1.22,1.22,0,0,0,.71-.91,33.91,33.91,0,0,0,.57-3.68L2.7,2.88l-.06-.3a2.09,2.09,0,0,0-.39-1.07,1,1,0,0,0-.59-.25V.48H4.2L6.93,14.36l1-8.49c.06-.53.11-1,.14-1.4.06-.63.08-1.08.08-1.37a2.67,2.67,0,0,0-.3-1.5,1.07,1.07,0,0,0-.69-.34V.48H9.73v.78l-.18.06C9.29,1.41,9.09,1.75,9,2.35ZM16.74,2a13.19,13.19,0,0,1,.87,5.28,27.45,27.45,0,0,1-1.54,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.31,13.31,0,0,1-.85-5.23A27.59,27.59,0,0,1,10.82,4.6C11.91,1.53,13.15,0,14.51,0,15.41,0,16.16.65,16.74,2Zm-.95,2.73a9.33,9.33,0,0,0-.31-2.59c-.21-.72-.54-1.08-1-1.08-1.05,0-1.92,2.21-2.64,6.64a54.69,54.69,0,0,0-.81,8.4,14.21,14.21,0,0,0,.15,2.23c.2,1.2.57,1.8,1.1,1.8s.95-.43,1.35-1.31a22.84,22.84,0,0,0,1.26-5c.28-1.55.49-3.19.65-4.91S15.79,5.74,15.79,4.68Zm2.3.93.32.21A10.7,10.7,0,0,1,19.52,2.6a1.87,1.87,0,0,1,1.6-1.08L19.27,17.63a4,4,0,0,1-.52,1.88,1,1,0,0,1-.79.27v.77h4.17v-.77a1.72,1.72,0,0,1-.85-.3,1.56,1.56,0,0,1-.2-1,2.44,2.44,0,0,1,0-.27c0-.08,0-.2,0-.33l.11-1L23,1.52A1.31,1.31,0,0,1,24,2.17a8.49,8.49,0,0,1,.69,4l.33.07L25.5.48H18.57ZM28.75.48v.78a1.39,1.39,0,0,1,.74.31,1.44,1.44,0,0,1,.18.9q0,.36-.06,1c0,.2-.05.44-.07.71L28,17.62a5.34,5.34,0,0,1-.35,1.61,1.05,1.05,0,0,1-.67.55v.77H30.7v-.77a.82.82,0,0,1-.6-.2,1.69,1.69,0,0,1-.31-1.18c0-.11,0-.22,0-.32l0-.35.83-7.33a1.42,1.42,0,0,1,1.4.64,5,5,0,0,1,.33,2.13c0,.12,0,.28,0,.5s0,.47,0,.76l.34.15.94-8.21-.35-.1a8.12,8.12,0,0,1-.85,2.64,2.42,2.42,0,0,1-1.64.52l.74-6.65a3.34,3.34,0,0,1,.25-1.1.64.64,0,0,1,.59-.26A1.91,1.91,0,0,1,34.28,3a11.32,11.32,0,0,1,.29,3.06l.34.13.54-5.7Zm15,6.75a27.46,27.46,0,0,1-1.55,9.22q-1.65,4.66-3.79,4.67-1.35,0-2.19-1.95a13.49,13.49,0,0,1-.85-5.23A27.59,27.59,0,0,1,37,4.6Q38.65,0,40.69,0c.91,0,1.65.65,2.23,2A13.17,13.17,0,0,1,43.8,7.23ZM42,4.68a9.3,9.3,0,0,0-.32-2.59c-.21-.72-.53-1.08-1-1.08Q39.12,1,38,7.65a54.69,54.69,0,0,0-.81,8.4,13,13,0,0,0,.16,2.23c.2,1.2.56,1.8,1.09,1.8s1-.43,1.35-1.31a23.28,23.28,0,0,0,1.27-5c.27-1.55.49-3.19.64-4.91S42,5.74,42,4.68ZM50.32,1c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,7.2,7.2,0,0,1-.66,1.93,3.45,3.45,0,0,1-.77,1,5.58,5.58,0,0,1-.8.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.85.85,0,0,0,.69.42v.77H48.69l-1.36-9.92H47l-.75,6.25-.1,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H43.27v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L45.84,4.18c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46A2.67,2.67,0,0,1,50.32,1Zm-.73,3.34a7.2,7.2,0,0,0-.26-2.09c-.18-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,4.46,4.46,0,0,0-.2,1.06L47.1,9.65a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,49,8.31a10,10,0,0,0,.4-1.65A12.71,12.71,0,0,0,49.59,4.37Zm11.1-3.3c.77.74,1.16,2.1,1.16,4.09a8.51,8.51,0,0,1-.94,4.28A2.78,2.78,0,0,1,58.48,11h-.36l-.73-.12-.69,6-.11,1c0,.1,0,.2,0,.3s0,.2,0,.3a1.7,1.7,0,0,0,.17.95,1.47,1.47,0,0,0,.75.32v.77H53.77v-.77a1.07,1.07,0,0,0,.66-.53,4.83,4.83,0,0,0,.36-1.61L56.34,4.17l.09-.9c0-.31,0-.55,0-.74a1.58,1.58,0,0,0-.25-1,1.33,1.33,0,0,0-.67-.23V.48h3.62A2.11,2.11,0,0,1,60.69,1.07ZM60,4.32a7,7,0,0,0-.25-2.06c-.17-.53-.45-.8-.84-.8a.4.4,0,0,0-.4.29,6.14,6.14,0,0,0-.2,1L57.5,9.93l.23.06h.21a1.3,1.3,0,0,0,1-.36,3.17,3.17,0,0,0,.6-1.2,12.69,12.69,0,0,0,.36-2A19.64,19.64,0,0,0,60,4.32Zm10.6-3.06V.48H68v.78a1.17,1.17,0,0,1,.68.32A2.43,2.43,0,0,1,69,3.05c0,.32,0,.85-.11,1.6,0-.12,0,.27-.12,1.18l-.73,6.26a36.28,36.28,0,0,1-.8,4.86c-.45,1.65-1.07,2.47-1.87,2.47a1.27,1.27,0,0,1-1.13-.78,5.05,5.05,0,0,1-.41-2.27c0-.43,0-1.1.13-2,.05-.51.12-1.17.21-2l1-9a4.69,4.69,0,0,1,.38-1.69,1.24,1.24,0,0,1,.8-.47V.48H62.55v.78a1.39,1.39,0,0,1,.74.31,1.56,1.56,0,0,1,.17.91c0,.21,0,.47,0,.76s-.06.6-.1.94l-.85,7.36c-.14,1.15-.23,2-.27,2.42-.06.76-.1,1.44-.1,2a7.4,7.4,0,0,0,.81,3.78,2.35,2.35,0,0,0,2,1.35c1.14,0,2-.91,2.6-2.74a35.69,35.69,0,0,0,1-5.7l.79-6.85a30.83,30.83,0,0,1,.58-3.7A1.15,1.15,0,0,1,70.61,1.26Zm5.86,10a7.16,7.16,0,0,1,.56,3.1,10.31,10.31,0,0,1-.86,4.34,2.93,2.93,0,0,1-2.86,1.87h-3.8v-.77a1.07,1.07,0,0,0,.59-.41,4.64,4.64,0,0,0,.43-1.73L72.08,4.17c0-.4.08-.73.1-1s0-.46,0-.61a1.83,1.83,0,0,0-.19-1,1.22,1.22,0,0,0-.73-.28V.48h3.43a2.58,2.58,0,0,1,2.19,1.06A5.92,5.92,0,0,1,77.69,5a6.3,6.3,0,0,1-1,3.67,4.18,4.18,0,0,1-1.39,1.24A4.36,4.36,0,0,1,76.47,11.24Zm-1.36,2.49a4.59,4.59,0,0,0-.6-2.79,2,2,0,0,0-1.3-.52l-.84,7.32c0,.12,0,.25,0,.4s0,.33,0,.52a1.06,1.06,0,0,0,.27.84.77.77,0,0,0,.48.11c.8,0,1.38-.87,1.73-2.63A17.3,17.3,0,0,0,75.11,13.73Zm.1-5.38a7.33,7.33,0,0,0,.52-2.15,15,15,0,0,0,.11-1.77,7.89,7.89,0,0,0-.24-2.14c-.16-.55-.46-.83-.93-.83a.42.42,0,0,0-.4.33,4.42,4.42,0,0,0-.19,1l-.77,6.73a5.23,5.23,0,0,0,1.27-.36A1.77,1.77,0,0,0,75.21,8.35Zm9.61,6.24a9.73,9.73,0,0,1-1.66,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1,1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44L81.91,3.41a4.53,4.53,0,0,1,.38-1.66,1.47,1.47,0,0,1,.88-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1L78.42,17.62a5.28,5.28,0,0,1-.35,1.63,1.12,1.12,0,0,1-.67.53v.77h7l.73-5.83ZM90.09,1.26V.48H86.34v.78a1.38,1.38,0,0,1,.74.32,1.59,1.59,0,0,1,.18.95q0,.3,0,.69c0,.25-.06.57-.11.95L85.58,17.64a5.41,5.41,0,0,1-.36,1.61,1.07,1.07,0,0,1-.66.53v.77h3.75v-.77a1.47,1.47,0,0,1-.75-.32,1.78,1.78,0,0,1-.17-1c0-.08,0-.18,0-.28s0-.2,0-.3l.1-1L89.07,3.41a5.68,5.68,0,0,1,.35-1.62A1.1,1.1,0,0,1,90.09,1.26Zm7-.62a.33.33,0,0,1-.3.24,3.1,3.1,0,0,1-.82-.44A2.5,2.5,0,0,0,94.59,0Q92.51,0,91,4a26.57,26.57,0,0,0-1.51,9.39,13.57,13.57,0,0,0,1,5.67c.66,1.41,1.49,2.11,2.5,2.11A2.46,2.46,0,0,0,94.79,20a9.66,9.66,0,0,0,1.55-3.4L96,16a12.68,12.68,0,0,1-.89,2.13c-.54,1-1.12,1.45-1.74,1.45-.47,0-.91-.39-1.31-1.15a10.33,10.33,0,0,1-.6-4.27,36.59,36.59,0,0,1,1-8.43c.72-3.08,1.57-4.63,2.54-4.63.48,0,.88.39,1.19,1.16a10,10,0,0,1,.47,3.53V6.1c0,.07,0,.32,0,.74L97,7l.64-7h-.38A4.28,4.28,0,0,1,97,.64Zm17.57,14,.31.13-.75,5.83h-9.45l-1.35-9.92H103l-.74,6.25-.11,1c0,.08,0,.16,0,.26v.28a1.94,1.94,0,0,0,.16,1,1.39,1.39,0,0,0,.75.32v.77H99.3v-.77a1.12,1.12,0,0,0,.67-.53,5.18,5.18,0,0,0,.35-1.61l1.55-13.46c0-.28.06-.52.08-.72,0-.42,0-.75,0-1a1.48,1.48,0,0,0-.17-.91,1.39,1.39,0,0,0-.74-.31V.48h3.46a2.64,2.64,0,0,1,1.8.55c.78.66,1.17,1.93,1.17,3.8a11,11,0,0,1-.19,2,6.57,6.57,0,0,1-.66,1.93,3.61,3.61,0,0,1-.76,1,6.48,6.48,0,0,1-.81.52c0,.31.07.51.08.58l1,6.78a5.63,5.63,0,0,0,.42,1.72.84.84,0,0,0,.65.4,1.06,1.06,0,0,0,.64-.51,5.41,5.41,0,0,0,.36-1.61l1.54-13.47c0-.34.07-.65.1-.92s0-.52,0-.72a1.61,1.61,0,0,0-.17-.95,1.31,1.31,0,0,0-.74-.32V.48h6.78l-.53,5.7-.34-.13a11.8,11.8,0,0,0-.3-3.09,1.92,1.92,0,0,0-2-1.54c-.33,0-.55.1-.64.29a3.46,3.46,0,0,0-.24,1.07L111,9.45a2.6,2.6,0,0,0,1.72-.51,7.79,7.79,0,0,0,.86-2.66l.35.11-.93,8.2-.35-.15c0-.28,0-.53,0-.74v-.52a4.42,4.42,0,0,0-.37-2.18,1.56,1.56,0,0,0-1.44-.58l-.83,7.32c0,.18,0,.35,0,.51s0,.3,0,.4a1.45,1.45,0,0,0,.13.67c.09.18.28.26.57.26a2.72,2.72,0,0,0,2-.76A8.33,8.33,0,0,0,114.61,14.59ZM105,8.31a9.81,9.81,0,0,0,.41-1.65,13.72,13.72,0,0,0,.18-2.29,6.87,6.87,0,0,0-.26-2.09c-.17-.55-.47-.83-.89-.83a.4.4,0,0,0-.38.27,5.05,5.05,0,0,0-.2,1.06l-.76,6.87a2.39,2.39,0,0,0,1-.2A2,2,0,0,0,105,8.31Zm17.51,6.28a9.86,9.86,0,0,1-1.67,3.94,2.93,2.93,0,0,1-2.25,1,.64.64,0,0,1-.51-.21,1.1,1.1,0,0,1-.19-.71c0-.19,0-.35,0-.49s0-.29,0-.44l1.64-14.32A4.53,4.53,0,0,1,120,1.75a1.47,1.47,0,0,1,.89-.49V.48h-4v.78a1.39,1.39,0,0,1,.75.32,1.59,1.59,0,0,1,.18.95c0,.2,0,.43,0,.68s0,.58-.1,1l-1.55,13.45a5.28,5.28,0,0,1-.35,1.63,1.1,1.1,0,0,1-.66.53v.77h7l.74-5.83Zm7.09,0a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33,0-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51l.75-6.67A3.46,3.46,0,0,1,127,1.71c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13.54-5.7H124v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83Zm8.45,5.24v.72h-3.83v-.72a1.11,1.11,0,0,0,.77-.41,2.52,2.52,0,0,0,.23-1.31c0-.23,0-.77-.07-1.62,0-.17-.05-.9-.13-2.18h-2.71l-.74,3c0,.2-.09.43-.13.67a4.44,4.44,0,0,0-.06.71,1.27,1.27,0,0,0,.16.79,1.35,1.35,0,0,0,.65.3v.72h-2.47v-.72a1.66,1.66,0,0,0,.52-.54,7.25,7.25,0,0,0,.55-1.58L135.49.07h.33L137,17.23a8.87,8.87,0,0,0,.3,2.11A.9.9,0,0,0,138.08,19.83ZM135,13.12l-.47-7.3-1.86,7.3Zm7.88-4-1.09-2.13a6.38,6.38,0,0,1-.39-1,6.65,6.65,0,0,1-.23-1.82,6.93,6.93,0,0,1,.23-1.8q.33-1.26,1-1.26c.57,0,1,.53,1.3,1.57a10.87,10.87,0,0,1,.36,2.39l0,1,.33.1.51-6h-.38a2.26,2.26,0,0,1-.2.54.38.38,0,0,1-.34.22.54.54,0,0,1-.19-.05l-.22-.13-.32-.25a2.36,2.36,0,0,0-.41-.25,1.82,1.82,0,0,0-.7-.16c-.81,0-1.44.57-1.9,1.7a11.21,11.21,0,0,0-.68,4.12,12.36,12.36,0,0,0,1.55,5.58,10.74,10.74,0,0,1,1.54,4.78,7.8,7.8,0,0,1-.41,2.67c-.28.76-.67,1.15-1.17,1.15a1.07,1.07,0,0,1-.79-.4,3.78,3.78,0,0,1-.64-1.18,7.79,7.79,0,0,1-.42-1.95c-.05-.44-.08-1.14-.11-2.1l-.36-.06-.46,6.73h.38a6.32,6.32,0,0,1,.2-.83.31.31,0,0,1,.3-.24.21.21,0,0,1,.14,0,1.06,1.06,0,0,1,.22.18l.32.27a3,3,0,0,0,.69.44,1.72,1.72,0,0,0,.69.15c.92,0,1.64-.63,2.16-1.91a11.22,11.22,0,0,0,.78-4.28,12.2,12.2,0,0,0-.4-3.29A14.21,14.21,0,0,0,142.85,9.07Zm6.36-7.36c.09-.19.31-.29.64-.29a1.92,1.92,0,0,1,2,1.54,11.8,11.8,0,0,1,.3,3.09l.33.13L153,.48h-6.79v.78a1.31,1.31,0,0,1,.75.32,1.7,1.7,0,0,1,.17.95,6.75,6.75,0,0,1,0,.72c0,.27-.05.58-.09.92l-1.55,13.47a5.18,5.18,0,0,1-.35,1.61,1.12,1.12,0,0,1-.67.53v.77h7l.75-5.83-.31-.13a8.33,8.33,0,0,1-2,4.23,2.73,2.73,0,0,1-2,.76c-.29,0-.48-.08-.57-.26a1.45,1.45,0,0,1-.13-.67c0-.1,0-.23,0-.4s0-.33.05-.51l.83-7.32a1.58,1.58,0,0,1,1.44.58,4.42,4.42,0,0,1,.37,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.34.15.94-8.2-.35-.11a7.71,7.71,0,0,1-.87,2.66,2.56,2.56,0,0,1-1.71.51L149,2.78A3.46,3.46,0,0,1,149.21,1.71Z",opacity:1,strokeColor:"",fillColor:"#192760",width:152.969,height:21.152,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"ForComment":case"For Comment":t={iconName:"For Comment",pathdata:"M14.1.48l-.89,5.6L12.65,6a7.14,7.14,0,0,0-.48-3c-.54-1-1.6-1.54-3.19-1.54a1.37,1.37,0,0,0-1,.26,2.06,2.06,0,0,0-.42,1.08L6.35,9.28a6,6,0,0,0,2.73-.52,5.92,5.92,0,0,0,1.41-2.59l.58.1L9.52,14.34,9,14.2c0-.29,0-.54.05-.75s0-.38,0-.49a3.15,3.15,0,0,0-.55-2.09,3.07,3.07,0,0,0-2.32-.64L4.77,17.44c0,.13,0,.24-.06.35s0,.21,0,.31a1.23,1.23,0,0,0,.53,1.17,2,2,0,0,0,1,.19v.76H0v-.76a1.91,1.91,0,0,0,1.12-.54,3.56,3.56,0,0,0,.58-1.58L4.27,4.11c.05-.27.09-.51.12-.71a7.42,7.42,0,0,0,.1-1c0-.48-.1-.77-.29-.9A3.54,3.54,0,0,0,3,1.24V.48ZM28,7.11a17.42,17.42,0,0,1-2.57,9.07q-2.75,4.61-6.3,4.6a4.33,4.33,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.41-5.14,17.56,17.56,0,0,1,2.62-9.19Q19.43,0,22.82,0a4.48,4.48,0,0,1,3.72,1.92A8.46,8.46,0,0,1,28,7.11ZM25,4.6a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.88,2.88,0,0,0,2.25-1.29,16.48,16.48,0,0,0,2.1-4.93,37.09,37.09,0,0,0,1.07-4.83A28.26,28.26,0,0,0,25,4.6Zm15.83.16a6.49,6.49,0,0,1-.33,2,5.12,5.12,0,0,1-1.09,1.9,4.65,4.65,0,0,1-1.27,1,11.5,11.5,0,0,1-1.35.52c.07.3.12.49.14.57l1.62,6.66a3.79,3.79,0,0,0,.7,1.7,1.75,1.75,0,0,0,1.14.41v.76H36.13l-2.26-9.76h-.59L32,16.6l-.17,1,0,.25a2.62,2.62,0,0,0,0,.28q0,.8.27,1a3,3,0,0,0,1.25.32v.76H27.11v-.76a1.93,1.93,0,0,0,1.11-.52,3.54,3.54,0,0,0,.59-1.59L31.38,4.11c.06-.27.1-.51.13-.71a6,6,0,0,0,.1-1c0-.47-.1-.77-.29-.9a3.54,3.54,0,0,0-1.24-.3V.48h5.76a6.77,6.77,0,0,1,3,.53Q40.79,2,40.79,4.76Zm-3.16-.47a4.35,4.35,0,0,0-.44-2,1.54,1.54,0,0,0-1.48-.81.75.75,0,0,0-.63.26,2.78,2.78,0,0,0-.33,1.05L33.48,9.5a6.85,6.85,0,0,0,1.67-.2,2.55,2.55,0,0,0,1.49-1.13,6.37,6.37,0,0,0,.67-1.62A7.81,7.81,0,0,0,37.63,4.29ZM58.49,0a2.61,2.61,0,0,1-.32.63.55.55,0,0,1-.49.24A7,7,0,0,1,56.31.43,6.15,6.15,0,0,0,54.1,0q-3.47,0-6,3.92a16.73,16.73,0,0,0-2.51,9.24,8.73,8.73,0,0,0,1.64,5.57,5,5,0,0,0,7.19,1A8.89,8.89,0,0,0,57,16.37l-.64-.65a10.47,10.47,0,0,1-1.47,2.09A4,4,0,0,1,52,19.24a2.89,2.89,0,0,1-2.17-1.13c-.67-.75-1-2.15-1-4.2a22.2,22.2,0,0,1,1.62-8.29q1.8-4.54,4.23-4.55a2.33,2.33,0,0,1,2,1.14,6.16,6.16,0,0,1,.78,3.47c0,.14,0,.25,0,.32s0,.32,0,.73l.66.17L59.12,0ZM72.71,7.11a17.33,17.33,0,0,1-2.57,9.07c-1.82,3.07-3.93,4.6-6.3,4.6a4.34,4.34,0,0,1-3.65-1.92,8.53,8.53,0,0,1-1.4-5.14A17.55,17.55,0,0,1,61.4,4.53Q64.15,0,67.54,0a4.48,4.48,0,0,1,3.72,1.92A8.39,8.39,0,0,1,72.71,7.11Zm-3-2.51a5.72,5.72,0,0,0-.52-2.55,1.72,1.72,0,0,0-1.63-1c-1.74,0-3.2,2.17-4.39,6.53a32.66,32.66,0,0,0-1.35,8.26,8.24,8.24,0,0,0,.26,2.2c.33,1.18.94,1.77,1.82,1.77a2.85,2.85,0,0,0,2.25-1.29,16,16,0,0,0,2.1-4.93,34.08,34.08,0,0,0,1.07-4.83A28.26,28.26,0,0,0,69.68,4.6Zm17.5,13.62a4.63,4.63,0,0,1,.07-.75c0-.3.09-.59.15-.88L90,3.31a3.32,3.32,0,0,1,.7-1.67,2,2,0,0,1,1-.4V.48H87.23l-6.4,13.91L79.63.48H74.84v.76a3.29,3.29,0,0,1,1.2.21c.21.11.31.37.31.78a4.35,4.35,0,0,1-.07.75c0,.28-.11.61-.18,1L74,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76H76.2v-.76a2.31,2.31,0,0,1-1.09-.29,1.6,1.6,0,0,1-.58-1.43,8.8,8.8,0,0,1,.14-1.42c0-.37.14-.82.24-1.37L77,4.24l1.41,16.37H79L86.89,3.76,84.25,17.34A2.94,2.94,0,0,1,83.61,19a2.87,2.87,0,0,1-1.44.49v.76h6.54v-.76a3.39,3.39,0,0,1-1.23-.31Q87.18,19,87.18,18.22Zm17.73,0a4.63,4.63,0,0,1,.07-.75c0-.3.1-.59.16-.88l2.58-13.28a3.24,3.24,0,0,1,.69-1.67,2,2,0,0,1,1-.4V.48H105l-6.4,13.91L97.36.48H92.57v.76a3.29,3.29,0,0,1,1.2.21c.21.11.32.37.32.78A5.65,5.65,0,0,1,94,3c0,.28-.11.61-.19,1L91.69,15a19.63,19.63,0,0,1-1,3.65,1.54,1.54,0,0,1-1.17.86v.76h4.38v-.76a2.33,2.33,0,0,1-1.1-.29,1.6,1.6,0,0,1-.58-1.43,10.12,10.12,0,0,1,.14-1.42c.06-.37.14-.82.25-1.37L94.76,4.24l1.41,16.37h.59l7.86-16.85L102,17.34a3.1,3.1,0,0,1-.64,1.63,3,3,0,0,1-1.45.49v.76h6.55v-.76a3.46,3.46,0,0,1-1.24-.31Q104.91,19,104.91,18.22Zm11.52.3a6.56,6.56,0,0,1-3.25.75,1.27,1.27,0,0,1-.94-.26,1,1,0,0,1-.22-.66,3,3,0,0,1,0-.39,4.88,4.88,0,0,1,.08-.51l1.38-7.2a3.65,3.65,0,0,1,2.4.57,2.92,2.92,0,0,1,.62,2.15c0,.14,0,.31,0,.51s0,.45-.06.73l.58.15,1.55-8.08-.58-.1a5.92,5.92,0,0,1-1.44,2.61,6.32,6.32,0,0,1-2.85.51L115,2.74a2.44,2.44,0,0,1,.39-1.06,1.43,1.43,0,0,1,1.07-.28c1.63,0,2.71.5,3.25,1.51a7.37,7.37,0,0,1,.49,3l.56.13.89-5.6H110.31v.76a3.28,3.28,0,0,1,1.25.31c.19.13.28.44.28.94a4.83,4.83,0,0,1-.06.7c0,.28-.09.58-.16.92l-2.57,13.24a3.54,3.54,0,0,1-.59,1.59,1.93,1.93,0,0,1-1.11.52v.76H119l1.24-5.74-.51-.12A7.7,7.7,0,0,1,116.43,18.52ZM136.6,1.24V.48h-4.3v.76a2.5,2.5,0,0,1,1.14.33A1.8,1.8,0,0,1,134,3.05a10.58,10.58,0,0,1-.14,1.34c-.05.41-.13.87-.22,1.39L132,14.12,127.41.48h-4.22v.76a2.53,2.53,0,0,1,1,.24,1.82,1.82,0,0,1,.64,1.06l.1.3L122.55,15a19.54,19.54,0,0,1-1,3.61,1.59,1.59,0,0,1-1.18.9v.76h4.37v-.76a2.5,2.5,0,0,1-1.12-.32,1.67,1.67,0,0,1-.55-1.44,5.32,5.32,0,0,1,0-.79c0-.43.17-1.09.34-2l2.08-10.57L131,20.71h.52l2.91-15a24.72,24.72,0,0,1,.85-3.42,1.42,1.42,0,0,1,1-1Zm.48-.76-.81,5,.54.2a8.1,8.1,0,0,1,1.85-3.16,3.63,3.63,0,0,1,2.66-1.06l-3.08,15.85a3,3,0,0,1-.86,1.85,2.42,2.42,0,0,1-1.32.26v.76H143v-.76a4,4,0,0,1-1.41-.3c-.23-.13-.34-.45-.34-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.17-1,2.92-15.1a2.64,2.64,0,0,1,1.76.63c.74.7,1.12,2,1.15,3.94l.55.07L148.6.48Z",opacity:1,strokeColor:"",fillColor:"#192760",width:148.603,height:20.812,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"Void":t={iconName:"Void",pathdata:"M27.88,1.72a6.53,6.53,0,0,0-1.81,1.42L9,21.12H7.54L4.09,5.83A11.83,11.83,0,0,0,2.82,2Q2.3,1.4,0,1.26V.48H13.54v.78a11,11,0,0,0-2.37.18q-1.11.27-1.11,1.05a1.43,1.43,0,0,0,0,.29c0,.09,0,.19,0,.28l2.35,12,8.56-9a25.11,25.11,0,0,0,1.83-2.14,3.15,3.15,0,0,0,.82-1.68c0-.41-.28-.69-.84-.82a12.57,12.57,0,0,0-2.08-.15V.48h8.7v.78A7.11,7.11,0,0,0,27.88,1.72ZM57.37,7.23q0,4.85-5.56,9.22a21.41,21.41,0,0,1-13.62,4.67,14.41,14.41,0,0,1-7.89-1.95,6,6,0,0,1-3-5.23q0-4.92,5.66-9.34A21.12,21.12,0,0,1,46.2,0a15,15,0,0,1,8,2A6,6,0,0,1,57.37,7.23ZM50.82,4.68a3.46,3.46,0,0,0-1.13-2.59A4.93,4.93,0,0,0,46.17,1q-5.64,0-9.49,6.64c-1.94,3.36-2.92,6.16-2.92,8.4a4.27,4.27,0,0,0,.56,2.23q1.08,1.8,3.93,1.8a9.24,9.24,0,0,0,4.87-1.31,15.24,15.24,0,0,0,4.54-5A21.81,21.81,0,0,0,50,8.85,14.23,14.23,0,0,0,50.82,4.68ZM66,18.49a1.49,1.49,0,0,1,0-.28c0-.1,0-.2.08-.3l.35-1L72,3.41a2.94,2.94,0,0,1,1.25-1.62,6.79,6.79,0,0,1,2.4-.53V.48H62.19v.78a13.27,13.27,0,0,1,2.67.32.88.88,0,0,1,.64.95,2.38,2.38,0,0,1-.12.69c-.08.25-.2.57-.36.95L59.45,17.64a3,3,0,0,1-1.28,1.61,6.84,6.84,0,0,1-2.39.53v.77H69.27v-.77a13.72,13.72,0,0,1-2.67-.32A.9.9,0,0,1,66,18.49Zm38.25-9.67q0,4.59-5.15,8-5.73,3.77-15,3.76h-13v-.77a7.4,7.4,0,0,0,2.1-.41,3.08,3.08,0,0,0,1.57-1.75L80.28,4.17c.16-.38.28-.7.37-1a2.27,2.27,0,0,0,.12-.68.89.89,0,0,0-.64-.95,13.41,13.41,0,0,0-2.68-.32V.48H90.6q6.68,0,10.15,2.27A6.92,6.92,0,0,1,104.23,8.82ZM97.58,7a5.28,5.28,0,0,0-1.13-3.54q-1.77-2-6.14-2a4.24,4.24,0,0,0-2,.32,1.77,1.77,0,0,0-.74.84L81.35,17.73a1.72,1.72,0,0,0-.12.39,1.89,1.89,0,0,0,0,.31.89.89,0,0,0,.54.85,5.1,5.1,0,0,0,2,.26q8.07,0,11.68-5.5A12.61,12.61,0,0,0,97.58,7Z",opacity:1,strokeColor:"",fillColor:"#8a251a",width:104.233,height:21.123,stampFillColor:"#f6dedd",stampStrokeColor:""};break;case"PreliminaryResults":case"Preliminary Results":t={iconName:"Preliminary Results",pathdata:"M9.23,5.08q0-3-1.32-4.08A2.6,2.6,0,0,0,6.17.41H2v.78a1.5,1.5,0,0,1,.76.23,1.39,1.39,0,0,1,.28,1c0,.19,0,.43,0,.73s-.07.61-.1.91L1.17,17.56a4.76,4.76,0,0,1-.41,1.62A1.18,1.18,0,0,1,0,19.7v.78H4.25V19.7a1.77,1.77,0,0,1-.86-.31,1.5,1.5,0,0,1-.2-1c0-.09,0-.19,0-.3a1.36,1.36,0,0,1,0-.29l.12-1,.78-6L5,11h.41a3.21,3.21,0,0,0,2.78-1.6A7.57,7.57,0,0,0,9.23,5.08ZM7,6.32a10,10,0,0,1-.42,2,3,3,0,0,1-.68,1.21,1.63,1.63,0,0,1-1.13.36H4.53l-.27-.06,1-7.15a4.75,4.75,0,0,1,.22-1,.45.45,0,0,1,.46-.29,1,1,0,0,1,1,.8,6.22,6.22,0,0,1,.29,2.06A18,18,0,0,1,7,6.32ZM23.4,18.75a3.35,3.35,0,0,1-2.23.76.68.68,0,0,1-.64-.26,1.27,1.27,0,0,1-.16-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.4-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67a3,3,0,0,1,.28-1.08c.11-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,26,6l.39.13L27,.41H19.2v.78a1.67,1.67,0,0,1,.86.31,1.52,1.52,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93L18.33,17.56a4.59,4.59,0,0,1-.4,1.62,1.22,1.22,0,0,1-.74.51,1,1,0,0,1-.73-.4A5.08,5.08,0,0,1,16,17.56l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.23,3.23,0,0,0,.87-1,6,6,0,0,0,.76-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.4,3.4,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21-.05.45-.09.73L9.31,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8L26,14.65l-.35-.13A7.9,7.9,0,0,1,23.4,18.75ZM13.67,9.38a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,13.67,9.38ZM35,14.65l-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L29.15,4.1q.08-.57.12-1c0-.26,0-.48,0-.68a1.42,1.42,0,0,0-.21-1,1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49,4.17,4.17,0,0,0-.44,1.66L29.49,17.65c0,.16,0,.31,0,.45a3.47,3.47,0,0,0,0,.48,1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm2.79,4.73a1.61,1.61,0,0,0,.85.32v.78H34.39V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L37.33,4.1c.05-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L37.78,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,37.83,19.38Zm12.2,0a1.81,1.81,0,0,0,.85.31v.78h-4.5V19.7a1.64,1.64,0,0,0,1-.49,4,4,0,0,0,.44-1.66l1.81-13.8-5.4,17.12h-.4l-1-16.64L41.39,15.12c-.07.56-.13,1-.17,1.39-.06.61-.09,1.09-.09,1.45a2,2,0,0,0,.4,1.45,1.19,1.19,0,0,0,.75.29v.78h-3V19.7a1.21,1.21,0,0,0,.81-.87,29.47,29.47,0,0,0,.66-3.71L42.21,4c0-.38.09-.71.12-1a5.41,5.41,0,0,0,.05-.75c0-.42-.07-.69-.21-.8a1.69,1.69,0,0,0-.83-.21V.41h3.29l.83,14.14L49.85.41h3.07v.78a1.12,1.12,0,0,0-.69.41,4.08,4.08,0,0,0-.48,1.69L50,16.79c0,.29-.08.59-.11.89s0,.56,0,.76A1.41,1.41,0,0,0,50,19.39Zm5,0a1.61,1.61,0,0,0,.85.32v.78H51.56V19.7a1.18,1.18,0,0,0,.76-.52,4.76,4.76,0,0,0,.41-1.62L54.5,4.1c0-.38.09-.7.11-1a5.83,5.83,0,0,0,0-.68,1.5,1.5,0,0,0-.2-1,1.71,1.71,0,0,0-.85-.31V.41h4.29v.78a1.22,1.22,0,0,0-.77.52,4.9,4.9,0,0,0-.39,1.63L55,16.8l-.11,1,0,.29c0,.11,0,.2,0,.29A1.52,1.52,0,0,0,55,19.38ZM66.13,5.75,64.13,21h-.36L60,4.38,58.6,15.12c-.12.89-.2,1.55-.23,2a7.32,7.32,0,0,0,0,.81,2.17,2.17,0,0,0,.38,1.46,1.32,1.32,0,0,0,.77.32v.78h-3V19.7a1.26,1.26,0,0,0,.81-.91,29,29,0,0,0,.65-3.67L59.56,2.81,59.5,2.5a2,2,0,0,0-.45-1.06,1.21,1.21,0,0,0-.67-.25V.41h2.9L64.4,14.28,65.52,5.8c.07-.53.12-1,.16-1.41.06-.62.09-1.08.09-1.36a2.45,2.45,0,0,0-.34-1.51,1.39,1.39,0,0,0-.79-.33V.41h3v.78l-.21.06c-.29.08-.52.43-.68,1A34.22,34.22,0,0,0,66.13,5.75ZM83.27,1A3.41,3.41,0,0,0,81.21.41h-4v.78a1.74,1.74,0,0,1,.85.3c.14.13.2.43.2.91,0,.24,0,.56-.06,1,0,.21-.06.45-.09.73L76.38,17.56A4.53,4.53,0,0,1,76,19.18a1.18,1.18,0,0,1-.76.52v0a1,1,0,0,1-.67-.45,8.11,8.11,0,0,1-.34-2.12L72.83,0h-.38L67.11,17.64a6.42,6.42,0,0,1-.63,1.58,1.84,1.84,0,0,1-.59.54v.72h2.83v-.72a1.68,1.68,0,0,1-.75-.31,1.16,1.16,0,0,1-.18-.79,3.46,3.46,0,0,1,.07-.7,5.16,5.16,0,0,1,.15-.67l.84-3H72c.08,1.28.13,2,.13,2.18.06.85.08,1.39.08,1.61a2.26,2.26,0,0,1-.25,1.31,1.43,1.43,0,0,1-.88.42v.72H79.5V19.7a1.58,1.58,0,0,1-.86-.32,1.7,1.7,0,0,1-.19-1c0-.1,0-.2,0-.29a1.81,1.81,0,0,1,0-.25l.12-1,.85-6.24h.41l1.55,9.92h2.9V19.7a1,1,0,0,1-.79-.41A5.15,5.15,0,0,1,83,17.56l-1.11-6.77c0-.08,0-.27-.09-.58a5.53,5.53,0,0,0,.92-.53,3.52,3.52,0,0,0,.87-1,6.16,6.16,0,0,0,.75-1.93,9.67,9.67,0,0,0,.23-2C84.61,2.89,84.16,1.62,83.27,1ZM69.19,13.05l2.13-7.3.53,7.3Zm13-6.47a8.39,8.39,0,0,1-.46,1.65,2,2,0,0,1-1,1.15,3.29,3.29,0,0,1-1.14.2l.87-6.87a3.61,3.61,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08A11,11,0,0,1,82.22,6.58ZM90.48.41h3v.78a1.07,1.07,0,0,0-.55.41,6.13,6.13,0,0,0-.77,1.62l-2.72,8-.72,5.55c0,.22-.07.51-.1.86a7.29,7.29,0,0,0-.06.73,1.46,1.46,0,0,0,.29,1.07,1.61,1.61,0,0,0,.83.25v.78H85V19.7a1.56,1.56,0,0,0,.93-.39,3.7,3.7,0,0,0,.53-1.76l.85-6.45-1.26-8a6.07,6.07,0,0,0-.36-1.47.81.81,0,0,0-.7-.4V.41h4v.78a1.32,1.32,0,0,0-.76.23c-.15.12-.23.4-.23.84a4.46,4.46,0,0,0,0,.48c0,.19,0,.39.07.6l1,6.54,1.88-5.55c.1-.29.18-.55.24-.79a4.68,4.68,0,0,0,.14-1.11,1.35,1.35,0,0,0-.31-1,1.14,1.14,0,0,0-.66-.2Zm18.61,1.22c.1-.19.35-.28.73-.28a2.16,2.16,0,0,1,2.23,1.54A10.27,10.27,0,0,1,112.39,6l.38.13.62-5.7h-7.76v.78a1.67,1.67,0,0,1,.86.31,1.59,1.59,0,0,1,.19,1,6.58,6.58,0,0,1,0,.71c0,.28-.07.59-.11.93l-1.77,13.46a4.53,4.53,0,0,1-.41,1.62,1.17,1.17,0,0,1-.73.51,1,1,0,0,1-.73-.4,5.08,5.08,0,0,1-.49-1.73l-1.1-6.77c0-.08,0-.27-.1-.58a5.14,5.14,0,0,0,.92-.53,3.4,3.4,0,0,0,.88-1,6.16,6.16,0,0,0,.75-1.93,9.63,9.63,0,0,0,.22-2c0-1.87-.44-3.14-1.34-3.81a3.38,3.38,0,0,0-2-.54h-4v.78a1.78,1.78,0,0,1,.85.3,1.4,1.4,0,0,1,.19.91c0,.24,0,.56-.06,1,0,.21,0,.45-.09.73L95.74,17.56a4.53,4.53,0,0,1-.41,1.62,1.15,1.15,0,0,1-.75.52v.78h4.28V19.7a1.62,1.62,0,0,1-.86-.32,1.72,1.72,0,0,1-.18-1v-.29c0-.09,0-.18,0-.25l.12-1,.86-6.24h.4l1.55,9.92h10.8l.85-5.83-.35-.13a7.9,7.9,0,0,1-2.24,4.23,3.35,3.35,0,0,1-2.23.76.71.71,0,0,1-.65-.26,1.37,1.37,0,0,1-.15-.68c0-.09,0-.23,0-.39s0-.34.05-.51l.95-7.33a1.92,1.92,0,0,1,1.65.59,4,4,0,0,1,.42,2.18c0,.14,0,.31,0,.52s0,.46,0,.74l.4.15,1.07-8.21-.41-.1a7,7,0,0,1-1,2.65,3.15,3.15,0,0,1-2,.52l.85-6.67A3,3,0,0,1,109.09,1.63Zm-9,7.75a3.35,3.35,0,0,1-1.15.2l.87-6.87a4,4,0,0,1,.23-1.06.45.45,0,0,1,.43-.27,1.05,1.05,0,0,1,1,.83,6.14,6.14,0,0,1,.3,2.08,11.74,11.74,0,0,1-.21,2.29,9,9,0,0,1-.47,1.65A2,2,0,0,1,100.1,9.38ZM120.18.07h.43l-.59,6-.37-.1-.05-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57s-.95.42-1.21,1.26a6.17,6.17,0,0,0-.25,1.8,5.92,5.92,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L118.19,9a12.6,12.6,0,0,1,1.12,2.57,10.75,10.75,0,0,1,.47,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.17,2.17,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,117.46,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.15,1.15,0,0,0,.25.12.47.47,0,0,0,.22,0A.44.44,0,0,0,120,.62,2.6,2.6,0,0,0,120.18.07Zm10,2a26.67,26.67,0,0,0-.66,3.7l-.9,6.85a32.12,32.12,0,0,1-1.16,5.7c-.68,1.83-1.67,2.74-3,2.74a2.7,2.7,0,0,1-2.28-1.36,6.67,6.67,0,0,1-.92-3.77,19.46,19.46,0,0,1,.11-2c0-.46.15-1.26.3-2.42l1-7.36c0-.33.08-.64.11-.93s0-.55,0-.77a1.38,1.38,0,0,0-.2-.91,1.74,1.74,0,0,0-.85-.3V.41h4.43v.78a1.39,1.39,0,0,0-.91.47,4.25,4.25,0,0,0-.44,1.68l-1.18,9c-.11.8-.19,1.46-.25,2q-.15,1.37-.15,2a4.41,4.41,0,0,0,.48,2.27,1.44,1.44,0,0,0,1.29.78c.91,0,1.62-.82,2.13-2.48a30.62,30.62,0,0,0,.91-4.85L129,5.76c.1-.91.14-1.3.13-1.19a14.64,14.64,0,0,0,.13-1.6,2.12,2.12,0,0,0-.38-1.46,1.35,1.35,0,0,0-.77-.32V.41H131v.78A1.18,1.18,0,0,0,130.23,2.06Zm8.41,12.59-.84,5.83h-8V19.7a1.24,1.24,0,0,0,.76-.52,4.73,4.73,0,0,0,.4-1.63L132.75,4.1q.08-.57.12-1c0-.26,0-.48,0-.68,0-.51-.06-.83-.2-1a1.67,1.67,0,0,0-.85-.31V.41h4.56v.78a1.67,1.67,0,0,0-1,.49A4.17,4.17,0,0,0,135,3.34l-1.87,14.31c0,.16,0,.31-.05.45s0,.3,0,.48a1,1,0,0,0,.21.72.8.8,0,0,0,.59.21,3.54,3.54,0,0,0,2.56-1.05,9.24,9.24,0,0,0,1.91-3.94Zm7.72-8.56a7.63,7.63,0,0,0-.79-4,1.53,1.53,0,0,0-1.21-.64l-2,15.35-.12,1a2.47,2.47,0,0,0,0,.34,2.35,2.35,0,0,0,0,.26c0,.52.08.84.23,1a2,2,0,0,0,1,.3v.78h-4.76V19.7a1.18,1.18,0,0,0,.9-.26,3.75,3.75,0,0,0,.6-1.88l2.11-16.11a2.17,2.17,0,0,0-1.83,1.08,9.57,9.57,0,0,0-1.27,3.21l-.37-.2.56-5.13h7.91l-.52,5.76Zm3.41-3.79a6.17,6.17,0,0,0-.25,1.8,5.63,5.63,0,0,0,.26,1.82,5.23,5.23,0,0,0,.44,1L151.46,9a13.19,13.19,0,0,1,1.13,2.57,11.08,11.08,0,0,1,.46,3.29,10,10,0,0,1-.9,4.29,2.76,2.76,0,0,1-2.46,1.91,2.21,2.21,0,0,1-.79-.15,3.28,3.28,0,0,1-.79-.44l-.36-.28-.26-.18a.38.38,0,0,0-.16,0,.34.34,0,0,0-.34.23,5.5,5.5,0,0,0-.23.84h-.43l.52-6.73.41.06c0,1,.07,1.66.12,2.09a7.13,7.13,0,0,0,.49,1.95,3.52,3.52,0,0,0,.73,1.18,1.25,1.25,0,0,0,.9.41c.57,0,1-.39,1.34-1.15a7.13,7.13,0,0,0,.47-2.68,9.86,9.86,0,0,0-1.76-4.77,11.23,11.23,0,0,1-1.77-5.58,9.8,9.8,0,0,1,.78-4.12A2.41,2.41,0,0,1,150.73,0a2.06,2.06,0,0,1,.79.16,1.9,1.9,0,0,1,.47.25l.37.25a1.34,1.34,0,0,0,.24.12.56.56,0,0,0,.23,0,.44.44,0,0,0,.39-.21,2.6,2.6,0,0,0,.23-.55h.43l-.59,6-.37-.1,0-1a10.11,10.11,0,0,0-.41-2.39c-.34-1-.83-1.57-1.48-1.57S150,1.46,149.77,2.3Z",opacity:1,strokeColor:"",fillColor:"#192760",width:153.879,height:21.051,stampFillColor:"#dce3ef",stampStrokeColor:""};break;case"InformationOnly":case"Information Only":t={iconName:"Information Only",pathdata:"M4,19.14a2,2,0,0,0,1,.32v.76H0v-.76a1.42,1.42,0,0,0,.87-.52,4,4,0,0,0,.47-1.59l2-13.24c.06-.38.1-.69.13-1a5.73,5.73,0,0,0,0-.67c0-.5-.08-.81-.24-.94a2.2,2.2,0,0,0-1-.31V.48H7.26v.76a1.48,1.48,0,0,0-.88.52,4.14,4.14,0,0,0-.45,1.6l-2,13.24-.13,1c0,.1,0,.19,0,.3a2.72,2.72,0,0,0,0,.28A1.32,1.32,0,0,0,4,19.14ZM18.17,1.3l.24-.06V.48H15v.76a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c-.05.41-.11.87-.18,1.39l-1.29,8.34L11.15.48H7.83v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L7.33,15a24.86,24.86,0,0,1-.76,3.61,1.32,1.32,0,0,1-.92.9v.76H9.09v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2L9.72,4.38,14,20.71h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42C17.57,1.72,17.83,1.38,18.17,1.3ZM19.33.48v.76a2.32,2.32,0,0,1,1,.3c.15.13.23.42.23.9,0,.23,0,.55-.07,1,0,.2-.06.44-.1.71l-2,13.23a4,4,0,0,1-.46,1.58,1.39,1.39,0,0,1-.88.54v.76h4.89v-.76a1.36,1.36,0,0,1-.78-.19,1.39,1.39,0,0,1-.41-1.17c0-.1,0-.21,0-.31s0-.22,0-.35l1.09-7.21a2.09,2.09,0,0,1,1.83.64A3.81,3.81,0,0,1,24.1,13c0,.11,0,.28,0,.49s0,.46,0,.75l.45.14,1.22-8.07-.46-.1a6.19,6.19,0,0,1-1.11,2.59A3.89,3.89,0,0,1,22,9.28l1-6.54a2.43,2.43,0,0,1,.33-1.08.93.93,0,0,1,.76-.26,2.45,2.45,0,0,1,2.52,1.54A9,9,0,0,1,27,6l.44.13.7-5.6ZM39.06,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19Q32.31,0,35,0a3.37,3.37,0,0,1,2.93,1.92A10.14,10.14,0,0,1,39.06,7.11ZM36.68,4.6a7,7,0,0,0-.42-2.55A1.37,1.37,0,0,0,35,1c-1.37,0-2.52,2.17-3.46,6.53a40.81,40.81,0,0,0-1.07,8.26,10,10,0,0,0,.21,2.2c.26,1.18.74,1.77,1.43,1.77s1.24-.43,1.78-1.29a18.75,18.75,0,0,0,1.65-4.93,43.28,43.28,0,0,0,.85-4.83A36.93,36.93,0,0,0,36.68,4.6ZM61,19.15a2.25,2.25,0,0,0,1,.31v.76H56.84v-.76A2,2,0,0,0,58,19a3.6,3.6,0,0,0,.5-1.63L60.56,3.76l-6.2,16.85H53.9L52.78,4.24,51.12,15c-.09.55-.15,1-.2,1.37a13,13,0,0,0-.11,1.42,1.8,1.8,0,0,0,.46,1.43,1.54,1.54,0,0,0,.86.29v.76H45.49l-1.78-9.76h-.47l-1,6.14-.13,1,0,.25c0,.09,0,.19,0,.28a1.47,1.47,0,0,0,.22,1,2,2,0,0,0,1,.32v.76H38.37v-.76a1.42,1.42,0,0,0,.88-.52,4.21,4.21,0,0,0,.46-1.59l2-13.24c0-.27.08-.51.11-.71a8.23,8.23,0,0,0,.07-1,1.23,1.23,0,0,0-.23-.9,2.32,2.32,0,0,0-1-.3V.48h4.54A4.34,4.34,0,0,1,47.62,1c1,.65,1.54,1.9,1.54,3.75a7.78,7.78,0,0,1-.26,2A5.56,5.56,0,0,1,48,8.62a3.87,3.87,0,0,1-1,1,8.06,8.06,0,0,1-1.06.52c.05.3.09.49.11.57l1.27,6.66a4.58,4.58,0,0,0,.55,1.7,1.23,1.23,0,0,0,.83.39,1.31,1.31,0,0,0,.86-.84A23,23,0,0,0,50.36,15L52.05,4c.06-.37.11-.7.15-1a7.42,7.42,0,0,0,0-.75c0-.41-.08-.67-.25-.78a2.09,2.09,0,0,0-.94-.21V.48h3.77l1,13.91,5-13.91h3.51v.76a1.46,1.46,0,0,0-.79.4A3.71,3.71,0,0,0,63,3.31L61,16.59c0,.29-.09.58-.13.88s-.05.55-.05.75Q60.79,19,61,19.15Zm-15.14-11a7.46,7.46,0,0,0,.53-1.62,9.54,9.54,0,0,0,.25-2.26,5.31,5.31,0,0,0-.35-2,1.18,1.18,0,0,0-1.16-.81.54.54,0,0,0-.5.26,3.37,3.37,0,0,0-.26,1.05l-1,6.76a4.28,4.28,0,0,0,1.31-.2A2.17,2.17,0,0,0,45.89,8.17ZM73.21,19.51v.71h-5v-.71a1.61,1.61,0,0,0,1-.41,1.92,1.92,0,0,0,.3-1.29c0-.22,0-.75-.09-1.58,0-.17-.06-.89-.16-2.15H65.68l-1,3c-.06.2-.12.42-.17.66a3.4,3.4,0,0,0-.08.69q0,.62.21.78a1.9,1.9,0,0,0,.86.3v.71H62.29v-.71A2,2,0,0,0,63,19a6.47,6.47,0,0,0,.72-1.56L69.82.07h.43L71.83,17A6.77,6.77,0,0,0,72.22,19,1.23,1.23,0,0,0,73.21,19.51Zm-4.08-6.6-.61-7.18-2.44,7.18ZM82.52,6.14l.6-5.66H74l-.63,5,.42.2a8.71,8.71,0,0,1,1.46-3.16,2.57,2.57,0,0,1,2.1-1.06L75,17.35a3.36,3.36,0,0,1-.68,1.85,1.57,1.57,0,0,1-1,.26v.76H78.7v-.76a2.69,2.69,0,0,1-1.11-.3c-.18-.13-.27-.45-.27-.95a2.26,2.26,0,0,1,0-.26c0-.09,0-.2,0-.33l.14-1L79.8,1.5a1.87,1.87,0,0,1,1.39.63c.58.7.88,2,.91,3.94ZM88.84.48H83.92v.76a2.31,2.31,0,0,1,1,.31c.15.13.23.44.23.94a5.56,5.56,0,0,1,0,.67c0,.26-.08.57-.14,1l-2,13.24a4,4,0,0,1-.47,1.59,1.36,1.36,0,0,1-.87.52v.76H86.5v-.76a2,2,0,0,1-1-.32,1.32,1.32,0,0,1-.23-.94c0-.09,0-.18,0-.28s0-.2,0-.3l.13-1,2-13.24A4.09,4.09,0,0,1,88,1.76a1.45,1.45,0,0,1,.87-.52ZM99.11,7.11a21,21,0,0,1-2,9.07q-2.16,4.61-5,4.6a3.28,3.28,0,0,1-2.88-1.92,10.29,10.29,0,0,1-1.11-5.14,21.08,21.08,0,0,1,2.07-9.19C91.63,1.51,93.25,0,95,0A3.36,3.36,0,0,1,98,1.92,10,10,0,0,1,99.11,7.11ZM96.72,4.6a7.18,7.18,0,0,0-.41-2.55c-.28-.7-.7-1-1.29-1-1.37,0-2.52,2.17-3.46,6.53a40.7,40.7,0,0,0-1.06,8.26,10,10,0,0,0,.2,2.2c.26,1.18.74,1.77,1.43,1.77a2.2,2.2,0,0,0,1.78-1.29,18.75,18.75,0,0,0,1.65-4.93,41.1,41.1,0,0,0,.85-4.83A34.65,34.65,0,0,0,96.72,4.6Zm11.1-3.36a1.66,1.66,0,0,1,.9.33,2.08,2.08,0,0,1,.4,1.48,12.85,12.85,0,0,1-.1,1.34c0,.41-.11.87-.18,1.39l-1.29,8.34L104,.48h-3.33v.76a1.7,1.7,0,0,1,.78.24,2,2,0,0,1,.51,1.06l.07.3L100.13,15a24,24,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.45v-.76a1.67,1.67,0,0,1-.88-.32,1.88,1.88,0,0,1-.44-1.44,7.09,7.09,0,0,1,0-.79c0-.43.13-1.09.27-2l1.64-10.57,4.29,16.33h.41l2.3-15a28.78,28.78,0,0,1,.67-3.42c.18-.59.44-.93.78-1l.23-.06V.48h-3.39ZM125,7.11a21,21,0,0,1-2,9.07c-1.45,3.07-3.1,4.6-5,4.6a3.28,3.28,0,0,1-2.87-1.92A10.29,10.29,0,0,1,114,13.72a21.22,21.22,0,0,1,2.06-9.19Q118.22,0,120.91,0a3.36,3.36,0,0,1,2.92,1.92A10,10,0,0,1,125,7.11ZM122.59,4.6a7,7,0,0,0-.41-2.55,1.37,1.37,0,0,0-1.28-1c-1.37,0-2.53,2.17-3.46,6.53a40.11,40.11,0,0,0-1.07,8.26,10.65,10.65,0,0,0,.2,2.2q.39,1.77,1.44,1.77a2.2,2.2,0,0,0,1.77-1.29,18.29,18.29,0,0,0,1.66-4.93,45.71,45.71,0,0,0,.85-4.83A36.53,36.53,0,0,0,122.59,4.6Zm14.26-3.3.24-.06V.48h-3.4v.76a1.74,1.74,0,0,1,.91.33,2.13,2.13,0,0,1,.4,1.48c0,.28,0,.73-.11,1.34,0,.41-.11.87-.18,1.39l-1.29,8.34L129.83.48h-3.32v.76a1.69,1.69,0,0,1,.77.24,1.9,1.9,0,0,1,.51,1.06l.07.3L126,15a27,27,0,0,1-.75,3.61,1.35,1.35,0,0,1-.93.9v.76h3.44v-.76a1.67,1.67,0,0,1-.88-.32,1.92,1.92,0,0,1-.44-1.44c0-.26,0-.52,0-.79.05-.43.13-1.09.27-2l1.65-10.57,4.29,16.33h.41l2.29-15a31.07,31.07,0,0,1,.67-3.42C136.25,1.72,136.52,1.38,136.85,1.3Zm8.52,13.06a8.55,8.55,0,0,1-2.19,3.87,4.44,4.44,0,0,1-2.94,1,1,1,0,0,1-.68-.21.9.9,0,0,1-.24-.7,3.4,3.4,0,0,1,0-.48c0-.14,0-.28,0-.44l2.15-14.08a3.69,3.69,0,0,1,.5-1.64,2.22,2.22,0,0,1,1.16-.48V.48H138v.76a2.2,2.2,0,0,1,1,.31c.16.13.24.44.24.94a5.73,5.73,0,0,1-.05.67c0,.26-.07.57-.13,1l-2,13.23a4,4,0,0,1-.47,1.6,1.36,1.36,0,0,1-.87.52v.76h9.16l1-5.74ZM151.79.48v.76a1.52,1.52,0,0,1,.76.2,1.21,1.21,0,0,1,.37,1,4.09,4.09,0,0,1-.17,1.09c-.07.24-.16.5-.27.79L150.32,9.8l-1.18-6.44a4.51,4.51,0,0,1-.08-.6,4.37,4.37,0,0,1,0-.46c0-.43.09-.71.27-.83a1.75,1.75,0,0,1,.87-.23V.48h-4.63v.76a.94.94,0,0,1,.8.4,5.08,5.08,0,0,1,.42,1.44L148.2,11l-1,6.35a3.35,3.35,0,0,1-.61,1.73,1.91,1.91,0,0,1-1.06.39v.76h5.32v-.76a2,2,0,0,1-.95-.25,1.29,1.29,0,0,1-.33-1.05,7.29,7.29,0,0,1,.06-.73q.06-.51.12-.84l.82-5.46,3.12-7.89a5.54,5.54,0,0,1,.89-1.59,1.28,1.28,0,0,1,.63-.41V.48Z",opacity:1,strokeColor:"",fillColor:"#192760",width:155.237,height:20.783,stampFillColor:"#dce3ef",stampStrokeColor:""}}if(t)return t.modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),this.currentStampAnnotation=t,t}}function _p(e,t,i,n,o,s,a){e?e.bound?(t.x=e.bound.x?e.bound.x:10,t.y=e.bound.y?e.bound.y:10):(t.x=10,t.y=10):t=(e={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset,n||o||s||(n=zt.Approved);var r=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),l=this.pdfViewer.annotation.createGUID(),d=i,h=[],p="",c="Stamp",u=[],f=!1,m=e.author?e.author:this.pdfViewer.stampSettings.author?this.pdfViewer.stampSettings.author:"Guest",g=sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.opacity)?1:this.pdfViewer.stampSettings.opacity,w=!!sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.isPrint)||this.pdfViewer.stampSettings.isPrint,y=!sf.base.isNullOrUndefined(this.pdfViewer.stampSettings.isLock)&&this.pdfViewer.stampSettings.isLock,v=this.pdfViewer.stampSettings.annotationSelectorSettings?this.pdfViewer.stampSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,b=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),S=this.pdfViewer.stampSettings.allowedInteractions?this.pdfViewer.stampSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;if(b.isLock=sf.base.isNullOrUndefined(e.isLock)?y:e.isLock,b.isPrint=sf.base.isNullOrUndefined(e.isPrint)?w:e.isPrint,b.isLock=!!e.isLock&&e.isLock,b.minHeight=e.minHeight?e.minHeight:0,b.minWidth=e.minWidth?e.minWidth:0,b.maxWidth=e.maxWidth?e.maxWidth:0,b.maxHeight=e.maxHeight?e.maxHeight:0,a&&e.customStampSource)u[0]={imagedata:e.customStampSource,isImport:!0},this.customStampName=e.Id?e.Id:l,this.pdfViewerBase.customStampCollection.push({customStampName:p,customStampImageSource:e.customStampSource}),c="Image",e.width=e.bound&&e.bound.width?e.bound.width:100,e.height=e.bound&&e.bound.height?e.bound.height:100;else if(n){var A;A=r.split(" "),p=n.toString(),u[0]={baseFontName:"Helvetica-BoldOblique",currentFontname:"95b303ab-d397-438a-83af-e2ff8a9900f1",fontSize:10,isImport:!0,text:"By "+m+" at "+A[1]+A[2]+" , "+A[0],type:"string"},f=!0,e.width=e.bound&&e.bound.width?e.bound.width:140,e.height=e.bound&&e.bound.height?e.bound.height:55}else o?(p=o.toString(),o===Ht.Accepted||o===Ht.Rejected?(e.width=e.bound&&e.bound.width?e.bound.width:35,e.height=e.bound&&e.bound.height?e.bound.height:35):o===Ht.SignHere?(e.width=e.bound&&e.bound.width?e.bound.width:110,e.height=e.bound&&e.bound.height?e.bound.height:30):o===Ht.Witness?(e.width=e.bound&&e.bound.width?e.bound.width:130,e.height=e.bound&&e.bound.height?e.bound.height:30):o===Ht.InitialHere&&(e.width=e.bound&&e.bound.width?e.bound.width:90,e.height=e.bound&&e.bound.height?e.bound.height:30)):s&&(p=s.toString(),s===Ut.Final||s===Ut.Draft?(e.width=e.bound&&e.bound.width?e.bound.width:110,e.height=e.bound&&e.bound.height?e.bound.height:30):s===Ut.Void?(e.width=e.bound&&e.bound.width?e.bound.width:100,e.height=e.bound&&e.bound.height?e.bound.height:30):(e.width=e.bound&&e.bound.width?e.bound.width:130,e.height=e.bound&&e.bound.height?e.bound.height:30));var x={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:S,AnnotName:e.Id?e.Id:l,AnnotType:"stamp",AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:v,AnnotationSettings:b,Apperarance:u||null,Author:m,Comments:e.comments?this.pdfViewer.annotation.updateAnnotationCommentsDetails(e.comments,e,m):[],CreatedDate:r,CustomData:e.customData?e.customData:null,ExistingCustomData:null,FillColor:"#192760",Icon:0,IsCommentLock:!1,IsDynamic:f,IsLocked:sf.base.isNullOrUndefined(e.isLock)?y:e.isLock,IsPrint:sf.base.isNullOrUndefined(e.isPrint)?w:e.isPrint,ModifiedDate:e.modifiedDate?e.modifiedDate:r,Name:null,Note:e.note?e.note:"",Opacity:sf.base.isNullOrUndefined(e.opacity)?g:e.opacity,Rect:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:e.height,IsEmpty:!1,Width:e.width}},RotateAngle:0,StampAnnotationtype:c,State:e.review?e.review.state:"",StateModel:e.review?e.review.stateModel:"Review",StrokeColor:"#dce3ef",Subject:p,matrix:null,CustomStampName:this.customStampName?this.customStampName:"",pageNumber:d};return h[0]=x,{stampAnnotations:h}}function Wp(e,t){var i,n=null,o=!1,s=e.IsDynamic,a=e.StampType?e.StampType:e.StampAnnotationtype;if(e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),e.allowedInteractions=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),e.Subject&&s&&"Stamp"===a)i=this.retrieveDynamicStampAnnotation(e.Subject),o=!0;else if(e.Subject&&"Stamp"===a){if(i=this.retrievestampAnnotation(e.Subject),"Accepted"===e.Subject||"Rejected"===e.Subject){var r=sf.drawings.processPathData(i.pathdata);i.pathdata=sf.drawings.splitArrayCollection(r),o=!0}}else e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),n={stampAnnotationType:"image",author:e.Author,modifiedDate:e.ModifiedDate,subject:"",allowedInteractions:e.allowedInteractions,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.FillColor,rotateAngle:e.RotateAngle,creationDate:e.ModifiedDate,pageNumber:t,icon:"",stampAnnotationPath:this.findImageData(e.Apperarance),randomId:"image",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:" ",bounds:this.calculateImagePosition(e.Rect,!0),annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(e),annotationSettings:e.annotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isLocked:e.IsLocked,isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isMaskedImage:e.IsMaskedImage,customStampName:e.CustomStampName,template:e?e.StampTemplate:null,templateSize:e?e.templateSize:0},this.pdfViewer.annotationModule.storeAnnotations(t,n,"_annotations_stamp");i&&(n={stampAnnotationType:"path",author:e.Author,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:i.fillColor,opacity:e.Opacity,stampFillcolor:i.stampFillColor,rotateAngle:e.RotateAngle,creationDate:e.ModifiedDate,pageNumber:t,icon:i.iconName,stampAnnotationPath:i.pathdata,randomId:"stamp",isDynamicStamp:!1,dynamicText:this.dynamicText,bounds:this.calculateImagePosition(e.Rect,!0),annotName:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSelectorSettings:this.getSettings(e),annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isLocked:e.IsLocked,isPrint:e.IsPrint,isCommentLock:e.IsCommentLock,isMaskedImage:e.IsMaskedImage,customStampName:"",template:e?e.StampTemplate:null,templateSize:e?e.templateSize:0},o&&(n.dynamicText=this.findDynamicText(e.Apperarance,e.Subject),n.isDynamicStamp=!0),this.pdfViewer.annotationModule.storeAnnotations(t,n,"_annotations_stamp"))}function qp(e,t){var i,n=e.IsDynamic;e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);var o=this.stampImageData(e);if(e.Subject&&n&&"Draft"!==e.Subject&&!o)i=this.retrieveDynamicStampAnnotation(e.Subject);else{if(!e.Subject||o)return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.customStampSettings),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),{stampAnnotationType:"image",author:e.Author,modifiedDate:e.ModifiedDate,allowedInteractions:e.allowedInteractions,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.StampFillColor,bounds:this.calculateImagePosition(e.Rect,!0),rotateAngle:e.RotateAngle,pageNumber:t,randomId:"stamp",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",annotationSettings:e.AnnotationSettings,customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isLocked:e.IsLocked,isMaskedImage:e.IsMaskedImage,customStampName:e.CustomStampName,template:e?e.StampTemplate:null,templateSize:e?e.templateSize:0};i=this.retrievestampAnnotation(e.Subject)}if(i)return e.AnnotationSettings=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stampSettings),e.IsLocked&&(e.AnnotationSettings.isLock=e.IsLocked),e.allowedInteractions=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),{stampAnnotationType:"path",author:e.Author,allowedInteractions:e.allowedInteractions,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,strokeColor:e.StrokeColor,fillColor:e.FillColor,opacity:e.Opacity,stampFillcolor:e.StampFillColor,rotateAngle:e.RotateAngle,creationDate:i.creationDate,pageNumber:t,icon:i.iconName,stampAnnotationPath:i.pathdata,randomId:"stamp",isDynamicStamp:this.pdfViewerBase.isDynamicStamp,dynamicText:this.dynamicText,bounds:{left:e.Rect.X,top:e.Rect.Y,width:e.Rect.Width,height:e.Rect.Height},annotationId:e.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,author:e.Author,modifiedDate:e.ModifiedDate},shapeAnnotationType:"stamp",customData:this.pdfViewer.annotation.getCustomData(e),isPrint:e.IsPrint,isLocked:e.IsLocked,isMaskedImage:e.IsMaskedImage,customStampName:"",template:e?e.StampTemplate:null,templateSize:e?e.templateSize:0}}var Zp=function(){function e(e,t){this.isStampAddMode=!1,this.renderedStampCollection=[],this.isAddAnnotationProgramatically=!1,this.customStampName=null,this.dynamicText="",this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderStampAnnotations=function(e,t,i,n){Pp.call(this,e,t,i,n)},e.prototype.customStampLoad=function(e,t,i,n,o,s,a,r,l,d){!function(e,t,i,n,o,s,a,r,l,d){if(t){var h=parseFloat(t.y?t.y:t.Y);h<0&&(t.Y=.75*(e.pdfViewerBase.pageSize[n].height+h))}var p=e.calculateImagePosition(t,!0);i.AnnotationSettings=i.AnnotationSettings?i.AnnotationSettings:e.pdfViewer.customStampSettings.annotationSettings,e.renderCustomImage(p,n,o,s,a,r,l,d,!0,i)}(e,t,i,n,o,s,a,r,l,d)},e.prototype.moveStampElement=function(e,t,i){return Lp.call(this,e,t,i)},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.calculateImagePosition=function(e,t){return function(e){var t=parseFloat(e.x?e.x:e.X),i=parseFloat(e.y?e.y:e.Y);return{width:parseFloat(e.width?e.width:e.Width),height:parseFloat(e.height?e.height:e.Height),left:t,top:i}}(e)},e.prototype.createCustomStampAnnotation=function(e,t){Op.call(this,e,t)},e.prototype.renderStamp=function(e,t,i,n,o,s,a,r,l,d){Dp.call(this,e,t,i,n,o,s,a,r,l,d)},e.prototype.getSettings=function(e){return zp.call(this,e)},e.prototype.resetAnnotation=function(){Hp.call(this)},e.prototype.updateDeleteItems=function(e,t,i){Rp.call(this,e,t,i)},e.prototype.renderCustomImage=function(e,t,i,n,o,s,a,r,l,d,h,p){Np.call(this,e,t,i,n,o,s,a,r,l,d,h,p)},e.prototype.retrieveDynamicStampAnnotation=function(e){return Up.call(this,e)},e.prototype.retrievestampAnnotation=function(e){return jp.call(this,e)},e.prototype.saveStampAnnotations=function(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]);for(var t=[],i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++)this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),this.pdfViewer.nameTable[a.annotations[r].randomId]?a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex,this.pdfViewer.nameTable[a.annotations[r].randomId].wrapper.actualSize)):a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex)),this.pdfViewer.nameTable[a.annotations[r].randomId]&&(a.annotations[r].wrapperBounds=this.pdfViewer.nameTable[a.annotations[r].randomId].wrapper.bounds);s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.storeStampInSession=function(e,t){Math.round(JSON.stringify(window.sessionStorage).length/1024)+Math.round(JSON.stringify(t).length/1024)>4500&&(this.pdfViewerBase.isStorageExceed=!0,this.pdfViewer.annotationModule.clearAnnotationStorage());var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp"),n=0;if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),i){this.pdfViewer.annotationModule.storeAnnotationCollections(t,e);var o=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var s=this.pdfViewer.annotationModule.getPageCollection(o,e);if(o[s])o[s].annotations.push(t),n=o[s].annotations.indexOf(t);else{var a={pageIndex:e,annotations:[]};a.annotations.push(t),n=a.annotations.indexOf(t),o.push(a)}d=JSON.stringify(o);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=d:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",d)}else{this.pdfViewer.annotationModule.storeAnnotationCollections(t,e);var r={pageIndex:e,annotations:[]};r.annotations.push(t),n=r.annotations.indexOf(t);var l=[];l.push(r);var d=JSON.stringify(l);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=d:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",d)}return n},e.prototype.updateSessionStorage=function(e,t,i){if(null!=t&&e.annotations)for(var n=0;n<e.annotations.length;n++)if(e.annotations[n].id===t){e=e.annotations[n];break}"Rotate"===i&&(e=e.annotations[0]);var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),o)for(var s=e.bounds,a=JSON.parse(o),r=0;r<a.length;r++)for(var l=a[r],d=0;d<l.annotations.length;d++)if(null!=a[r].annotations[d]&&a[r].annotations[d].randomId===e.id){this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var h=this.pdfViewer.annotationModule.getPageCollection(a,a[r].annotations[d].pageNumber);"delete"!==i?a[h]&&(e.wrapper.children[1]?a[r].annotations[d].opacity=e.wrapper.children[1].style.opacity:a[r].annotations[d].opacity=e.wrapper.children[0].style.opacity,a[r].annotations[d].rotateAngle=e.rotateAngle,a[r].annotations[d].bounds={x:s.x,y:s.y,left:s.x,top:s.y,width:e.wrapper.actualSize.width,height:e.wrapper.actualSize.height,right:s.right,bottom:s.bottom}):a[r].annotations.splice(d,1);var p=JSON.stringify(a);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=p:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",p);break}},e.prototype.saveImportedStampAnnotations=function(e,t){Wp.call(this,e,t)},e.prototype.updateStampAnnotationCollections=function(e,t){return qp.call(this,e,t)},e.prototype.stampImageData=function(e){var t=!1;if(e&&e.Apperarance)for(var i=0;i<e.Apperarance.length;i++)if(e.Apperarance[i].imagedata){t=!0;break}return t},e.prototype.findImageData=function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t].imagedata;if(i)return i}return""},e.prototype.findDynamicText=function(e,t){var i="";if(e){for(var n=0;n<e.length;n++){var o=e[n],s=o.type,a=o.isImport;if("string"===s&&void 0!==o.text){var r=void 0;if(a)r=o.text;else{var l=o.text.split("(");r=l[1]?l[1].split(")")[0]:o.text}r.toLowerCase()!==t.toLowerCase()&&(i+=r)}}return i}return i},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),n){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[s]?o[s].annotations:t}else i=t;return i},e.prototype.modifyInCollection=function(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=this.getAnnotations(t,null);if(null!=n&&i){for(var o=0;o<n.length;o++)i.annotName===n[o].annotName&&("bounds"===e?(n[o].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height},this.pdfViewerBase.isUpdateProgrammatically||(n[o].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())):"isLock"===e?(n[o].annotationSettings&&(n[o].annotationSettings.isLock=i.isLock),n[o].isLocked=i.isLock):"allowedInteractions"===e?n[o].allowedInteractions=i.allowedInteractions:"isPrint"===e?(n[o].annotationSettings&&(n[o].annotationSettings.isPrint=i.isPrint),n[o].isPrint=i.isPrint):"opacity"===e?n[o].opacity=i.opacity:"rotateAngle"===e&&(n[o].rotateAngle=i.rotateAngle),this.pdfViewer.annotationModule.storeAnnotationCollections(n[o],t));this.manageAnnotations(n,t)}return null},e.prototype.manageAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_stamp");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_stamp");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_stamp"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_stamp",s)}},e.prototype.updateAddAnnotationDetails=function(e,t,i,n,o,s,a){return _p.call(this,e,t,i,n,o,s,a)},e.prototype.triggerAnnotationAdd=function(e,t){Fp.call(this,e,t)},e}(),Yp=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},Xp=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}};function Gp(e,t,i){if(e&&e.length>0)for(var n=0;n<e.length;n++){var o=e[n],s=!1,a=this.getAnnotations(t,null,"sticky");if(null!==a)for(var r=0;r<a.length;r++){var l=o.annotName?o.annotName:o.AnnotName,d=a[r].annotName?a[r].annotName:a[r].AnnotName;if(d&&l&&d===l){s=!0;break}}if(!s){o.annotationAddMode=this.pdfViewer.annotationModule.findAnnotationMode(o,t,o.AnnotType);var h,p=o.Bounds,c=o.Author;o.AnnotationSettings=o.AnnotationSettings?o.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(o),o.allowedInteractions=o.AllowedInteractions?o.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(o);var u=!0;u=sf.base.isNullOrUndefined(o.IsPrint)?sf.base.isNullOrUndefined(o.isPrint)?o.AnnotationSettings.isPrint:o.isPrint:o.IsPrint,o.IsLock&&(o.AnnotationSettings.isLock=o.IsLock),h={shapeAnnotationType:"sticky",author:c,modifiedDate:o.ModifiedDate,subject:o.Subject,note:o.Note,opacity:o.Opacity,state:o.State,stateModel:o.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(o.Comments,o,c),review:{state:o.State,stateModel:o.StateModel,modifiedDate:o.ModifiedDate,author:c},pageNumber:t,bounds:{x:o.Bounds.X,y:o.Bounds.Y,left:o.Bounds.X,top:o.Bounds.Y,width:o.Bounds.Width,height:o.Bounds.Height,right:o.Bounds.Right,bottom:o.Bounds.Bottom},annotName:o.AnnotName,color:o.color,type:"StickyNotes",annotationSelectorSettings:this.getSettings(o),customData:this.pdfViewer.annotation.getCustomData(o),annotationSettings:o.AnnotationSettings,allowedInteractions:o.allowedInteractions,isLocked:o.IsLock,isLock:o.IsLock,isPrint:u,isCommentLock:o.IsCommentLock},o.AnnotationSelectorSettings=o.AnnotationSelectorSettings?o.AnnotationSelectorSettings:this.pdfViewer.annotationSelectorSettings;var f={author:c,modifiedDate:h.modifiedDate,allowedInteractions:h.allowedInteractions,annotName:h.annotName,pageIndex:t,bounds:{x:p.Left,y:p.Top,width:p.Width,height:p.Height},strokeColor:"transparent",stampStrokeColor:"",data:this.setImageSource(),shapeAnnotationType:"StickyNotes",type:"StickyNotes",subject:h.subject,notes:h.note,opacity:h.opacity,id:h.annotName,fillColor:h.color,annotationSelectorSettings:o.AnnotationSelectorSettings,annotationSettings:h.annotationSettings,annotationAddMode:o.annotationAddMode,isLocked:o.IsLock,isPrint:u,isCommentLock:h.isCommentLock};if(this.pdfViewer.add(f),i?this.drawStickyNotes(p.Left,p.Top,p.Width,p.Height,t,f,i):(this.drawStickyNotes(p.Left,p.Top,p.Width,p.Height,t,f),this.pdfViewer.annotationModule.storeAnnotations(t,h,"_annotations_sticky")),this.isAddAnnotationProgramatically){var m={opacity:f.opacity,borderColor:f.strokeColor,borderWidth:f.thickness,author:o.author,subject:o.subject,modifiedDate:o.modifiedDate,fillColor:f.fillColor,fontSize:f.fontSize,width:f.bounds.width,height:f.bounds.height,fontColor:f.fontColor,fontFamily:f.fontFamily,defaultText:f.dynamicText,fontStyle:f.font,textAlignment:f.textAlign};this.pdfViewer.fireAnnotationAdd(f.pageIndex,f.annotName,"StickyNotes",h.bounds,m)}}}}function Jp(e,t,i,n,o,s,a){var r,l=this,d=null,h=new Image,p=this,c=function(){var c,u,f="Guest"!==l.pdfViewer.annotationSettings.author?l.pdfViewer.annotationSettings.author:l.pdfViewer.stickyNotesSettings.author,m=l.pdfViewer.stickyNotesSettings.isLock?l.pdfViewer.stickyNotesSettings.isLock:l.pdfViewer.annotationSettings.isLock;if(s)r={author:s.author,modifiedDate:s.modifiedDate,annotName:s.annotName,data:h.src,bounds:{x:e,y:t,width:i,height:n},subject:s.subject,notes:s.notes,opacity:s.opacity,id:s.annotName,shapeAnnotationType:"StickyNotes",type:"StickyNotes",strokeColor:"transparent",stampStrokeColor:"",pageIndex:s.pageIndex,isPrint:s.isPrint,isLocked:s.isLocked};else{u=l.pdfViewer.annotation.createGUID(),(c=p.addComments("sticky",o+1,"",u,"",null,f))&&(document.getElementById(c).id=u);var g=l.pdfViewer.stickyNotesSettings.annotationSelectorSettings?l.pdfViewer.stickyNotesSettings.annotationSelectorSettings:l.pdfViewer.annotationSelectorSettings,w=l.pdfViewer.stickyNotesSettings.isPrint;r={author:f,bounds:{x:e,y:t,width:i,height:n},pageIndex:o,data:h.src,modifiedDate:l.getDateAndTime(),shapeAnnotationType:"StickyNotes",type:"StickyNotes",strokeColor:"transparent",stampStrokeColor:"",annotName:u,id:u,opacity:l.opacity,isPrint:w,isLocked:m};var y=l.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(s);(d={author:f,isLocked:m,allowedInteractions:y,modifiedDate:l.getDateAndTime(),subject:"Sticky Note",shapeAnnotationType:"sticky",pageNumber:o,type:"StickyNotes",note:"",opacity:l.opacity,pathData:"",state:"",stateModel:"",color:"rgba(255,255,0)",comments:[],annotName:u,bounds:{x:e,y:t,left:e,top:t,width:i,height:n},review:{state:"",stateModel:"",modifiedDate:"",author:f},annotationSelectorSettings:g,customData:l.pdfViewer.annotationModule.getData("sticky"),annotationSettings:{isLock:m},isPrint:w,isCommentLock:!1})&&(y=l.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(d),m=l.pdfViewer.annotationModule.checkIsLockSettings(d),d.isLocked=m,y&&(d.allowedInteractions=y))}if(s||(p.pdfViewer.annotation.addAction(o,null,r,"Addition","",r,r),p.pdfViewer.viewerBase.isNewSticky=!0,p.pdfViewer.add(r),p.pdfViewer.annotationModule.storeAnnotations(o,d,"_annotations_sticky")),p.pdfViewerBase.isAddComment){var v={x:r.bounds.x,y:r.bounds.y,left:r.bounds.x,top:r.bounds.y,width:r.bounds.width,height:r.bounds.height};l.pdfViewerBase.updateDocumentEditedProperty(!0);var b={opacity:r.opacity,author:f,modifiedDate:r.modifiedDate,subject:r.shapeAnnotationType,isLocked:r.isLocked};l.pdfViewer.fireAnnotationAdd(r.pageIndex,r.annotName,"StickyNotes",v,b)}if(p.pdfViewerBase.isFreeTextSelected=!1,a)p.pdfViewer.renderDrawing(a,o);else{var S=document.getElementById(p.pdfViewer.element.id+"_annotationCanvas_"+o);p.pdfViewer.renderDrawing(S,o)}sf.base.Browser.isDevice&&!s&&(p.pdfViewer.select([r.id],r.annotationSelectorSettings),p.pdfViewer._dotnetInstance.invokeMethodAsync("OpenCommentPanel").catch((function(e){throw console.error("Unhandled Exception:",e),e}))),p.pdfViewerBase.isAddComment=!1};window.stickyNote.src?(h=window.stickyNote,c()):(h.onload=function(){c()},h.src=this.setImageSource())}function Kp(e,t,i,n,o,s,a,r){this.pdfViewer._dotnetInstance.invokeMethodAsync("AddComment",e,t,i,n,o,s,a,r).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}function Qp(e){e.length>0&&this.pdfViewer._dotnetInstance.invokeMethodAsync("AddPageRedactionComment",e).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}function $p(e,t,i,n){return Yp(this,void 0,void 0,(function(){var o,s,a,r,l,d,h,p,c,u,f,m,g;return Xp(this,(function(w){switch(w.label){case 0:if(o=[],s=[],e.textMarkupAnnotation&&0!==e.textMarkupAnnotation.length&&this.pdfViewer.annotationModule.textMarkupAnnotationModule)for(g=0;g<e.textMarkupAnnotation.length;g++)this.pdfViewer.dateTimeFormat&&(e.textMarkupAnnotation[g].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.textMarkupAnnotation[g].ModifiedDate)),o.push(e.textMarkupAnnotation[g]),a=this.getAnnotationComment(e.textMarkupAnnotation[g]),s.push(a),this.updateCollections(this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateTextMarkupAnnotationCollections(e.textMarkupAnnotation[g],t));if(e.redactionAnnotation&&0!==e.redactionAnnotation.length&&this.pdfViewer.annotationModule.redactionAnnotationModule)for(g=0;g<e.redactionAnnotation.length;g++)this.pdfViewer.dateTimeFormat&&(e.redactionAnnotation[g].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.redactionAnnotation[g].ModifiedDate)),o.push(e.redactionAnnotation[g]),r=this.getAnnotationComment(e.redactionAnnotation[g]),s.push(r),this.updateCollections(this.pdfViewer.annotationModule.redactionAnnotationModule.updateRedactionAnnotationCollections(e.redactionAnnotation[g],t));if(e.shapeAnnotation&&0!==e.shapeAnnotation.length&&this.pdfViewer.annotationModule.shapeAnnotationModule)for(g=0;g<e.shapeAnnotation.length;g++)this.pdfViewer.dateTimeFormat&&(e.shapeAnnotation[g].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.shapeAnnotation[g].ModifiedDate)),o.push(e.shapeAnnotation[g]),l=this.getAnnotationComment(e.shapeAnnotation[g]),s.push(l),this.updateCollections(this.pdfViewer.annotationModule.shapeAnnotationModule.updateShapeAnnotationCollections(e.shapeAnnotation[g],t));if(e.measureShapeAnnotation&&0!==e.measureShapeAnnotation.length&&this.pdfViewer.annotationModule.measureAnnotationModule)for(g=0;g<e.measureShapeAnnotation.length;g++)this.pdfViewer.dateTimeFormat&&(e.measureShapeAnnotation[g].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.measureShapeAnnotation[g].ModifiedDate)),o.push(e.measureShapeAnnotation[g]),d=this.getAnnotationComment(e.measureShapeAnnotation[g]),s.push(d),this.updateCollections(this.pdfViewer.annotationModule.measureAnnotationModule.updateMeasureAnnotationCollections(e.measureShapeAnnotation[g],t));if(e.stampAnnotations&&0!==e.stampAnnotations.length&&this.pdfViewer.annotationModule.stampAnnotationModule)for(g=0;g<e.stampAnnotations.length;g++)this.pdfViewer.dateTimeFormat&&(e.stampAnnotations[g].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.stampAnnotations[g].ModifiedDate)),o.push(e.stampAnnotations[g]),h=this.getAnnotationComment(e.stampAnnotations[g]),s.push(h),this.updateCollections(this.pdfViewer.annotationModule.stampAnnotationModule.updateStampAnnotationCollections(e.stampAnnotations[g],t));if(e.stickyNotesAnnotation&&0!==e.stickyNotesAnnotation.length)for(g=0;g<e.stickyNotesAnnotation.length;g++)this.pdfViewer.dateTimeFormat&&(e.stickyNotesAnnotation[g].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.stickyNotesAnnotation[g].ModifiedDate)),o.push(e.stickyNotesAnnotation[g]),p=this.getAnnotationComment(e.stickyNotesAnnotation[g]),s.push(p),this.updateCollections(this.updateStickyNotesAnnotationCollections(e.stickyNotesAnnotation[g],t));if(e.freeTextAnnotation&&0!==e.freeTextAnnotation.length&&this.pdfViewer.annotationModule.freeTextAnnotationModule)for(g=0;g<e.freeTextAnnotation.length;g++)this.pdfViewer.dateTimeFormat&&(e.freeTextAnnotation[g].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.freeTextAnnotation[g].ModifiedDate)),o.push(e.freeTextAnnotation[g]),c=this.getAnnotationComment(e.freeTextAnnotation[g]),s.push(c),this.updateCollections(this.pdfViewer.annotationModule.freeTextAnnotationModule.updateFreeTextAnnotationCollections(e.freeTextAnnotation[g],t));if(e.signatureAnnotation&&0!==e.signatureAnnotation.length&&this.pdfViewerBase.signatureModule)for(g=0;g<e.signatureAnnotation.length;g++)this.pdfViewer.dateTimeFormat&&(e.signatureAnnotation[g].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.signatureAnnotation[g].ModifiedDate)),this.updateCollections(this.pdfViewerBase.signatureModule.updateSignatureCollections(e.signatureAnnotation[g],t),!0);if(e.signatureInkAnnotation&&0!==e.signatureInkAnnotation.length&&this.pdfViewer.annotationModule.inkAnnotationModule)for(g=0;g<e.signatureInkAnnotation.length;g++)this.pdfViewer.dateTimeFormat&&(e.signatureInkAnnotation[g].ModifiedDate=this.pdfViewer.annotationModule.stickyNotesAnnotationModule.getDateAndTime(e.signatureInkAnnotation[g].ModifiedDate)),o.push(e.signatureInkAnnotation[g]),u=this.getAnnotationComment(e.signatureInkAnnotation[g]),s.push(u),this.updateCollections(this.pdfViewer.annotationModule.inkAnnotationModule.updateInkCollections(e.signatureInkAnnotation[g],t));return f=!1,t===n-1&&(f=!0),0===s.length&&!f||!this.pdfViewer.enableCommentPanel?[3,2]:(m=null,this.pdfViewer.enableChunkMessages&&(m=this.pdfViewer.jsonObjectToGetBlobInfo(s))&&(s=null),[4,this.pdfViewer._dotnetInstance.invokeMethodAsync("RenderAnnotationComments",s,t,f,m).catch((function(e){throw console.error("Unhandled Exception:",e),e}))]);case 1:w.sent(),w.label=2;case 2:if(i)for(g=0;g<this.pdfViewerBase.renderedPagesList.length;g++)this.pdfViewerBase.renderAnnotations(this.pdfViewerBase.renderedPagesList[g]);return[2]}}))}))}function ec(e){for(var t=document.querySelectorAll(".e-pv-comments-container"),i=0;i<t.length;i++)e===t[i].children[0].children[1].children[0].id&&(t[i].lastElementChild.style.display="none");var n=document.querySelectorAll(".e-pv-comments-border");if(n)for(var o=0;o<n.length;o++)n[o].classList.remove("e-pv-comments-border");var s=document.querySelectorAll('[id*="'+this.pdfViewer.dataId+'_more-options"]');for(i=0;i<s.length;i++)s[i].style.visibility="hidden"}function tc(e,t){e?e.bound?(t.x=e.bound.x?e.bound.x:10,t.y=e.bound.y?e.bound.y:10):(t.x=10,t.y=10):t=(e={offset:{x:1,y:1},pageNumber:0}).offset;var i=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),n=this.pdfViewer.annotation.createGUID(),o=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings?this.pdfViewer.stickyNotesSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,s=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.stickyNotesSettings),a=this.pdfViewer.stickyNotesSettings.allowedInteractions?this.pdfViewer.stickyNotesSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;s.isLock=!!e.isLock&&e.isLock;var r,l,d,h;r=e.author?e.author:this.pdfViewer.stickyNotesSettings.author?this.pdfViewer.stickyNotesSettings.author:"Guest",l=sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.opacity)?1:this.pdfViewer.stickyNotesSettings.opacity,d=!!sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.isPrint)||this.pdfViewer.stickyNotesSettings.isPrint,h=!sf.base.isNullOrUndefined(this.pdfViewer.stickyNotesSettings.isLock)&&this.pdfViewer.stickyNotesSettings.isLock,s.isLock=e.isLock?e.isLock:h,e.width=e.bound&&e.bound.width?e.bound.width:30,e.height=e.bound&&e.bound.height?e.bound.height:30;var p=[],c={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:a,AnnotName:e.Id?e.Id:n,AnnotType:"sticky",AnnotationFlags:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:o,AnnotationSettings:s,Author:e.author?e.author:"Guest",Bounds:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:e.height,IsEmpty:!1,Width:e.width}},Color:{IsEmpty:!1,B:51,Blue:.2,C:0,G:255},Comments:e.comments?this.pdfViewer.annotation.updateAnnotationCommentsDetails(e.comments,e,r):[],CreatedDate:i,CustomData:e.customData?e.customData:null,ExistingCustomData:null,Icon:"Comment",IsCommentLock:!1,IsLock:sf.base.isNullOrUndefined(e.isLock)?h:e.isLock,IsPrint:sf.base.isNullOrUndefined(e.isPrint)?d:e.isPrint,ModifiedDate:e.modifiedDate?e.modifiedDate:i,Note:e.note?e.note:"",Opacity:sf.base.isNullOrUndefined(e.opacity)?l:e.opacity,Reference:null,Size:{IsEmpty:!0,Width:0,Height:0},State:e.review?e.review.state:"",StateModel:e.review?e.review.stateModel:"Review",StrokeColor:null,SubType:null,Subject:"Sticky Note",Type:null};return p[0]=c,{stickyNotesAnnotation:p}}var ic=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},nc=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}};function oc(){var e=document.getElementById(this.pdfViewer.dataId+"_commentsPanelText");this.pdfViewerBase.navigationPane.commentPanelContainer&&this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight&&"none"!==window.getComputedStyle(e).display&&(e.style.paddingTop=this.pdfViewerBase.navigationPane.commentPanelContainer.clientHeight/2-47+"px",e.style.paddingLeft=this.pdfViewerBase.navigationPane.commentPanelContainer.clientWidth/3+"px")}function sc(e){var t=document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+this.pdfViewerBase.currentPageNumber),i=document.querySelector(".e-pv-comments-border"),n=0;if(t&&i){n=i.getBoundingClientRect().height;var o=void 0;o=e?t.offsetTop+i.offsetTop+n/4:t.offsetTop+i.offsetTop-70,this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=o}}function ac(e){var t=document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+e);if(this.pdfViewerBase.navigationPane.commentsContentContainer=document.querySelector(".e-pv-comments-content-container"),t){var i=t.offsetTop+t.clientTop-35;this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=i}}function rc(e,t){var i,n,o,s=document.getElementById(e.id);if(this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated"),s){var a=parseInt(s.accessKey.split("_")[0],10)-1,r=e.getAttribute("name"),l=this.getAnnotations(a,null,r);if(null!==l)for(var d=0;d<l.length;d++)l[d].annotName===e.id&&(o=l[d]);for(d=1;d<=o.comments.length;d++)if(o.comments[d-1].annotName===t.id){n=u(o);var h=d-1;o.comments[h].position=d,i=u(o.comments[h]),this.pdfViewer.fireCommentDelete(o.comments[h].annotName,o.comments[h].note,o),o.comments.splice(h,1),this.pdfViewer._dotnetInstance.invokeMethodAsync("RemoveReplyCollection",t.id,a,h).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}this.pdfViewer.annotation.addAction(a,null,n,"Comments Reply Deleted","",i,o),this.updateUndoRedoCollections(o,a)}}function lc(e,t){var i;if(this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated"),i=this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0]){var n=document.getElementById(i.annotName),o=parseInt(n.accessKey.split("_")[0],10)-1,s=void 0,a=!1,r=n.getAttribute("author");if(i.measureType&&""!==i.measureType?(s=this.getAnnotations(o,null,"shape_measure"),a=!0):s=this.getAnnotations(o,null,i.shapeAnnotationType),null!==s)for(var l=0;l<s.length;l++)s[l].annotName===i.annotName&&(i=s[l]);var d=u(i);if(t.parentElement.firstElementChild.id===t.id)i.review={state:e,stateModel:"Review",author:r,modifiedDate:this.getDateAndTime(),annotId:t.id},i.state=e,i.stateModel="Review",this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation.review=i.review:this.pdfViewer.selectedItems.annotations[0].review=i.review,this.pdfViewer.annotation.addAction(o,null,i,"Status Property Added","",d,i),this.pdfViewer.fireCommentStatusChanged(t.id,i.note,i,i.state);else for(var h=0;h<i.comments.length;h++)if(i.comments[h].annotName===t.id){var p=u(i.comments[h]);i.comments[h].state=e,i.comments[h].stateModel="Review",i.comments[h].review={state:e,stateModel:"Review",author:r,modifiedDate:this.getDateAndTime(),annotId:t.id},this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation.comments[h]=i.comments[h]:this.pdfViewer.selectedItems.annotations[0].comments[h]=i.comments[h],this.pdfViewer.annotation.addAction(o,null,i,"Status Property Added","",p,i.comments[h]),this.pdfViewer.fireCommentStatusChanged(i.comments[h].annotName,i.comments[h].note,i,i.comments[h].state)}a?this.updateUndoRedoCollections(i,o,"shape_measure"):this.updateUndoRedoCollections(i,o)}}function dc(e){var t=document.getElementById(this.pdfViewer.dataId+"_accordionContainer"+e);if(t&&this.isNewcommentAdded){var i=0,n=document.querySelectorAll(".e-editable-inline");n[0]&&(i=n[0].getBoundingClientRect().height);var o=t.offsetTop+t.clientTop+i;this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop<o&&(this.pdfViewerBase.navigationPane.commentsContentContainer.scrollTop=o),this.isNewcommentAdded=!1}}function hc(e,t,i){var n;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&(n=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation),n?n.annotName!==i&&(n=this.pdfViewer.selectedItems.annotations[0]):n=this.pdfViewer.selectedItems.annotations[0],i&&n.annotName!==i)for(var o=0;o<this.pdfViewer.annotations.length;o++)if(i===this.pdfViewer.annotations[o].annotName){n=this.pdfViewer.annotations[o];break}if(n){var s=document.getElementById(n.annotName);if(s){var a=void 0;a=s.accessKey?parseInt(s.accessKey.split("_")[0],10):this.pdfViewerBase.currentPageNumber;var r=s.getAttribute("name"),l=a-1,d=void 0,h=!1;if("FreeText"===n.shapeAnnotationType||this.pdfViewer.enableShapeLabel&&("shape"===r||"shape_measure"===r)){var p=!1;i&&n.annotName!==i&&(this.pdfViewer.annotation.modifyDynamicTextValue(e,i),p=!0),p||("FreeText"===n.shapeAnnotationType?(n.dynamicText!==e&&this.pdfViewer.annotation.modifyDynamicTextValue(e,n.annotName),n.dynamicText=e):(this.pdfViewer.annotation.modifyDynamicTextValue(e,n.annotName),n.labelContent=e,n.notes=e),this.pdfViewer.nodePropertyChange(n,{}))}if(n.measureType&&""!==n.measureType?(d=this.getAnnotations(l,null,"shape_measure"),h=!0):d=this.getAnnotations(l,null,n.shapeAnnotationType),null!==d&&"FreeText"!==n.shapeAnnotationType)for(o=0;o<d.length;o++)if(d[o].annotName===n.annotName){var c=u(d[o]);if(!sf.base.isNullOrUndefined(e)&&""!==e&&d[o].note!==e)return this.pdfViewer.annotation.addAction(l,o,d[o],"Text Property Added","",c,d[o]),(n=d[o]).note=e,n.enableShapeLabel&&(n.labelContent=e),n.modifiedDate=this.getDateAndTime(),h?this.updateUndoRedoCollections(n,l,"shape_measure"):this.updateUndoRedoCollections(n,l),t&&""!==t?this.pdfViewer.fireCommentEdit(n.annotName,n.note,n):this.pdfViewer.fireCommentAdd(n.annotName,n.note,n),n}}}}function pc(e){return ic(this,void 0,void 0,(function(){var t,i;return nc(this,(function(n){switch(n.label){case 0:return e.id===this.pdfViewer.dataId+"_commenttype_icon"&&(e=e.nextSibling),t=e.textContent.split("-")[0],[4,this.setModifiedDate()];case 1:return i=n.sent(),e.textContent=t+" - "+i,[2]}}))}))}function cc(e){return ic(this,void 0,void 0,(function(){var t,i;return nc(this,(function(n){switch(n.label){case 0:return t=e?this.getDateAndTime(e):this.getDateAndTime(),i=new Date(t),[4,this.pdfViewer._dotnetInstance.invokeMethodAsync("FormatDateTime",i).catch((function(e){throw console.error("Unhandled Exception:",e),e}))];case 1:return[2,n.sent()]}}))}))}function uc(e,t,i){return ic(this,void 0,void 0,(function(){var n,o,s,a,r,l,d,h,p;return nc(this,(function(c){switch(c.label){case 0:return e?!(o=document.getElementById(e.annotName))||this.pdfViewerBase.isUpdateProgrammatically?[3,9]:t?[3,2]:(n=o.firstElementChild.firstElementChild.getElementsByClassName("e-pv-comment-title")[0],d=n.textContent.split("-")[0],[4,this.setModifiedDate()]):[3,9];case 1:return l=c.sent(),n.textContent=d+" - "+l,[3,7];case 2:if(s=this.findAnnotationType(e),null==(a=this.getAnnotations(e.pageIndex,null,s))||!e)return[3,7];r=0,c.label=3;case 3:return r<a.length?e.annotName!==a[r].annotName||e.bounds.x===a[r].bounds.left&&e.bounds.y===a[r].bounds.top&&e.bounds.height===a[r].bounds.height&&e.bounds.width===a[r].bounds.width?[3,5]:(n=o.firstElementChild.firstElementChild.getElementsByClassName("e-pv-comment-title")[0],d=n.textContent.split("-")[0],[4,this.setModifiedDate()]):[3,7];case 4:l=c.sent(),n.textContent=d+" - "+l,c.label=5;case 5:"sticky"===a[r].shapeAnnotationType&&this.pdfViewer.annotationModule.storeAnnotationCollections(a[r],e.pageIndex),c.label=6;case 6:return r++,[3,3];case 7:return i?(n=o.firstElementChild.firstElementChild.getElementsByClassName("e-pv-comment-title")[0],sf.base.isNullOrUndefined(e.modifiedDate)?[3,9]:(d=n.textContent.split("-")[0],h=n,p=d+" - ",[4,this.setExistingAnnotationModifiedDate(e.modifiedDate)])):[3,9];case 8:h.textContent=p+c.sent(),c.label=9;case 9:return[2]}}))}))}function fc(e){var t,i=document.querySelectorAll('[id*="'+this.pdfViewer.dataId+'_more-options"]');if(i)for(var n=0;n<i.length;n++)"visible"===i[n].style.visibility&&(t=i[n].parentElement.nextSibling);if(e)switch(e){case this.pdfViewer.localeObj.getConstant("Edit"):var o=document.querySelectorAll(".e-pv-new-comments-div");for(n=0;n<o.length;n++)o[n].style.display="none";break;case this.pdfViewer.localeObj.getConstant("Delete Context"):if(t.parentElement.parentElement.firstElementChild===t.parentElement){this.pdfViewer.annotationModule.deleteAnnotation();var s=document.getElementsByClassName("e-pv-viewer-container");s[0].focus(),this.isMouseClickEvent||s[0].classList.add("e-focused")}else this.modifyCommentDeleteProperty(t.parentElement.parentElement,t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Set Status"):break;case this.pdfViewer.localeObj.getConstant("Accepted"):case this.pdfViewer.localeObj.getConstant("Completed"):case this.pdfViewer.localeObj.getConstant("Cancelled"):case this.pdfViewer.localeObj.getConstant("Rejected"):case this.pdfViewer.localeObj.getConstant("None"):var a=t.parentElement;this.modifyStatusProperty(e,a)}}function mc(e,t){var i={Id:e,note:t};this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateComments",i).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}function gc(e){return ic(this,void 0,void 0,(function(){var t;return nc(this,(function(i){switch(i.label){case 0:return""===e?[3,2]:[4,this.setModifiedDate(e)];case 1:return t=i.sent(),[3,4];case 2:return[4,this.setModifiedDate()];case 3:t=i.sent(),i.label=4;case 4:return[2,t]}}))}))}function wc(e){e||(e=new Date),this.globalize=new sf.base.Internationalization;var t={format:this.pdfViewer.dateTimeFormat,type:"dateTime"};if(navigator.userAgent.includes("Firefox")){var i=new Date(e);if(isNaN(i.getDate())){var n=this.parseDateString(e);return this.globalize.formatDate(new Date(n),t)}return this.globalize.formatDate(i,t)}return this.globalize.formatDate(new Date(e),t)}function yc(e){if(e){var t=e.split(/[\s,]+/),i=this.monthToNumber(t[0]),n=parseInt(t[1],10),o=(new Date).getFullYear(),s=t[2].split(":"),a=parseInt(s[0],10),r=parseInt(s[1],10);return"PM"===t[3]&&12!==a&&(a+=12),new Date(o,i,n,a,r)}return new Date}function vc(e){this.selectAnnotationObj&&!this.isCommentsSelected&&this.selectAnnotationObj.pageNumber-1===e&&(this.setAnnotationType(this.selectAnnotationObj.id,this.selectAnnotationObj.annotType,this.selectAnnotationObj.pageNumber),this.selectAnnotationObj=null,this.isCommentsSelected=!0)}function bc(e,t,i){var n="measure"===t?"shape_measure":t;"freeText"===n&&(n="freetext");var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+n);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+n]),o){var s=JSON.parse(o),a=this.pdfViewer.selectedItems.annotations[0],r=this.pdfViewer.annotationModule.getPageCollection(s,i-1);if(s[r])for(var l=s[r].annotations,d=0;d<l.length;d++){var h=l[d].annotationSelectorSettings;if(l[d].annotName===e){if(a&&this.pdfViewer.fireAnnotationUnSelect(a.annotName,a.pageIndex,a),this.pdfViewer.clearSelection(i-1),"textMarkup"===t){this.pdfViewer.annotationModule.textMarkupAnnotationModule.clearCurrentAnnotationSelection(i-1,!0);var p=this.pdfViewerBase.getElement("_annotationCanvas_"+(i-1));this.pdfViewer.annotationModule.textMarkupAnnotationModule.selectAnnotation(l[d],p,i-1),this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAnnotation=l[d],this.pdfViewer.annotation.textMarkupAnnotationModule.selectTextMarkupCurrentPage=i-1,this.pdfViewer.annotation.textMarkupAnnotationModule.enableAnnotationPropertiesTool(!0)}else"stamp"===t?(this.pdfViewer.select([l[d].randomId],h),this.pdfViewer.annotation.onAnnotationMouseDown()):"sticky"===t?(this.pdfViewer.select([l[d].annotName],h),this.pdfViewer.annotation.onAnnotationMouseDown()):(this.pdfViewer.select([l[d].id],h),this.pdfViewer.annotation.onAnnotationMouseDown());if("textMarkup"===t){if(l[d].rect||l[d].bounds)if(u=this.pdfViewerBase.pageSize[i-1].top*this.pdfViewerBase.getZoomFactor()+this.pdfViewer.annotationModule.getAnnotationTop(l[d])*this.pdfViewerBase.getZoomFactor()){var c=(u-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(c,10),this.pdfViewerBase.viewerContainer.scrollLeft=this.pdfViewer.annotationModule.getAnnotationLeft(l[d])*this.pdfViewerBase.getZoomFactor()}}else{var u,f=((u=this.pdfViewer.annotationModule.scrollTopLeftValue(l[d],i-1)).top-20).toString();this.pdfViewerBase.viewerContainer.scrollTop=parseInt(f,10),this.pdfViewerBase.viewerContainer.scrollLeft=u.left}this.isCommentsSelected=!0}}}}function Sc(e){for(var t=document.querySelectorAll('[id*="'+this.pdfViewer.dataId+'_more-options"]'),i=0;i<t.length;i++)t[i].style.visibility="hidden";e.currentTarget.children[2].style.visibility="visible",this.isMouseClickEvent=!0}function Ac(e){var t=document.querySelectorAll(".e-pv-comments-border");if(t)for(var i=0;i<t.length;i++)t[i].classList.remove("e-pv-comments-border");for(var n=document.querySelectorAll('[id*="'+this.pdfViewer.dataId+'_more-options"]'),o=0;o<n.length;o++)n[o].style.visibility="hidden";var s=e.currentTarget&&e.currentTarget.parentElement;if(s&&s.children.length>0){var a=s.children[0];if(a&&a.children.length>1)a.children[1].style.visibility="visible",s.parentElement.classList.add("e-pv-comments-border")}e.preventDefault(),this.isMouseClickEvent=!0}function xc(e,t){if("block"!==document.getElementById(this.pdfViewer.dataId+"_comment_context_menu").style.display&&("e-pv-more-options-button e-btn"===e.currentTarget.className&&e.currentTarget.parentElement.nextSibling.lastChild.firstChild.click(),this.pdfViewer.annotationModule.checkContextMenuDeleteItem(this.commentMenuObj),this.commentMenuObj.open(e.clientY,e.clientX,e.currentTarget)),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var i=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber,10);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(i)}}function Vc(e){var t,i=document.querySelectorAll('[id*="'+this.pdfViewer.dataId+'_more-options"]');if(i){for(var n=0;n<i.length;n++)"visible"===i[n].style.visibility&&(t=i[n].parentElement.nextSibling);if(e.item)switch(e.item.text){case this.pdfViewer.localeObj.getConstant("Edit"):var o=document.querySelectorAll(".e-pv-new-comments-div");for(n=0;n<o.length;n++)o[n].style.display="none";break;case this.pdfViewer.localeObj.getConstant("Delete Context"):if(t.parentElement.parentElement.firstElementChild===t.parentElement)this.pdfViewer.annotationModule.deleteAnnotation();else{this.modifyCommentDeleteProperty(t.parentElement.parentElement,t.parentElement);var s=document.getElementsByClassName("e-pv-viewer-container");s[0].focus(),s[0].classList.add("e-focused")}break;case this.pdfViewer.localeObj.getConstant("Set Status"):break;case this.pdfViewer.localeObj.getConstant("Accepted"):t.parentElement.lastChild.id===this.pdfViewer.dataId+"status_container"&&t.parentElement.lastChild.remove();var a=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_container",className:"e-pv-status-container"}),r=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_div",className:"e-pv-status-div"}),l=sf.base.createElement("span",{id:this.pdfViewer.dataId+"status_icon",className:"e-pv-accepted-icon"});r.style.backgroundColor="rgb(24,169,85)",r.appendChild(l),a.appendChild(r),t.parentElement.appendChild(a),this.modifyStatusProperty("Accepted",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Completed"):t.parentElement.lastChild.id===this.pdfViewer.dataId+"status_container"&&t.parentElement.lastChild.remove();var d=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_container",className:"e-pv-status-container"}),h=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_div",className:"e-pv-status-div"}),p=sf.base.createElement("span",{id:this.pdfViewer.dataId+"status_icon",className:"e-pv-completed-icon"});h.style.backgroundColor="rgb(0,122,255)",h.appendChild(p),d.appendChild(h),t.parentElement.appendChild(d),this.modifyStatusProperty("Completed",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Cancelled"):t.parentElement.lastChild.id===this.pdfViewer.dataId+"status_container"&&t.parentElement.lastChild.remove();var c=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_container",className:"e-pv-status-container"}),u=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_div",className:"e-pv-status-div"}),f=sf.base.createElement("span",{id:this.pdfViewer.dataId+"status_icon",className:"e-pv-cancelled-icon"});u.style.backgroundColor="rgb(245,103,0)",u.appendChild(f),c.appendChild(u),t.parentElement.appendChild(c),this.modifyStatusProperty("Cancelled",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("Rejected"):t.parentElement.lastChild.id===this.pdfViewer.dataId+"status_container"&&t.parentElement.lastChild.remove();var m=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_container",className:"e-pv-status-container"}),g=sf.base.createElement("div",{id:this.pdfViewer.dataId+"status_div",className:"e-pv-status-div"}),w=sf.base.createElement("span",{id:this.pdfViewer.dataId+"status_icon",className:"e-pv-rejected-icon"});g.style.backgroundColor="rgb(255,59,48)",g.appendChild(w),m.appendChild(g),t.parentElement.appendChild(m),this.modifyStatusProperty("Rejected",t.parentElement);break;case this.pdfViewer.localeObj.getConstant("None"):t.parentElement.lastChild.id===this.pdfViewer.dataId+"status_container"&&t.parentElement.lastChild.remove(),this.modifyStatusProperty("None",t.parentElement)}}}function Cc(e,t){var i=this.getSelectedAnnotation(),n=e.id;if((sf.base.isNullOrUndefined(i)||i.annotName!==n)&&(this.pdfViewer.annotationModule.clearSelection(),this.pdfViewer.annotationModule.selectAnnotation(n,t),i=this.getSelectedAnnotation(),sf.base.isNullOrUndefined(i)||i.annotName!==n)){var o=parseInt(e.accessKey.split("_")[0],10),s=e.getAttribute("name");"null"!==s&&"Ink"!==s||(s="ink"),this.isCommentsSelected=!1,this.selectAnnotationObj={id:e.id,annotType:s,pageNumber:o}}}function Ic(){var e;return this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?e=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations[0]&&(e=this.pdfViewer.selectedItems.annotations[0]),e}function kc(){var e=document.activeElement,t=e.querySelector(".e-editable-value-container"),i=new Event("dblclick",{bubbles:!0,cancelable:!0}),n=e.querySelector(".e-editable-inline");(t||n)&&(this.pdfViewerBase.updateCommentPanel(),t?t.dispatchEvent(i):n&&(n.style.display="block"),e.parentElement&&this.pdfViewer.annotationModule.selectAnnotation(e.parentElement.id,!0))}function Mc(){var e=document.getElementById(this.pdfViewer.dataId+"_annotation_more_icon").getBoundingClientRect();return{left:e.left,top:e.top+e.height,screenX:e.x}}function Tc(){this.pdfViewer.dataId;var e=document.querySelectorAll('[id*="'+this.pdfViewer.dataId+'_more-options"][style*="visibility: visible"]');if(e.length>0){var t=e[0].getBoundingClientRect();return{left:t.left,top:t.top+t.height,screenX:t.x}}return null}function Ec(){return document.querySelectorAll(".e-pv-comments-container").length>0&&(this.mouseDownOnCommentDiv(null),!0)}function Bc(e){var t=this,i=this.pdfViewerBase.currentPageNumber;setTimeout((function(){t.updateScrollPosition(i)}),500)}function Pc(e){if(this.isMouseClickEvent)this.isMouseClickEvent=!1;else{var t=document.activeElement;this.previouslyFocusedElement=t;var i=this.findAnnotationObject(e.currentTarget.parentElement.id),n=this.checkAnnotationSettings(e.currentTarget.parentElement.id);if(n&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",i)&&(n=!1),this.pdfViewerBase.updateCommentPanel(),!n){for(var o=document.getElementsByClassName("e-pv-comments-div"),s=0;s<o.length;s++)o[s].classList.remove("e-focused");var a=document.querySelectorAll('[id*="'+this.pdfViewer.dataId+'_more-options"]');for(s=0;s<a.length;s++)a[s].style.visibility="hidden";e.currentTarget.classList.add("e-focused");var r=document.querySelectorAll(".e-pv-comments-container"),l=document.querySelectorAll(".e-pv-comments-border");if(l)for(var d=0;d<l.length;d++)l[d].classList.remove("e-pv-comments-border");for(s=0;s<r.length;s++){var h=r[s].getElementsByClassName("e-editable-inline");r[s].id!==e.currentTarget.parentElement.id?r[s].lastElementChild.classList.contains("e-pv-comments-div")&&h&&h[0]&&(h[0].style.display="none"):h&&h[0]&&(h[0].style.display="block")}var p=e.currentTarget.querySelector(".e-pv-more-options-button");p&&(p.style.visibility="visible"),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetCommentId",e.currentTarget.parentElement.id).catch((function(e){throw console.error("Unhandled Exception:",e),e})),this.selectAnnotationFromComment(e.currentTarget.parentElement,!0)}}}function Dc(e){for(var t=document.getElementsByClassName("e-editable-inline"),i=0;i<t.length;i++)t[i].getAttribute("clickeventadded")||(t[i].addEventListener("click",this.editReply.bind(this)),t[i].setAttribute("clickeventadded",!0));var n=document.querySelectorAll(".e-pv-reply-div .e-inplaceeditor");for(i=0;i<n.length;i++)n[i].getAttribute("doubleclickeventadded")||(n[i].addEventListener("dblclick",this.editReplyTextbox.bind(this)),n[i].setAttribute("doubleclickeventadded",!0));var o=document.getElementsByClassName("e-pv-comment-textbox");for(i=0;i<o.length;i++)o[i].getAttribute("clickeventadded")||(o[i].addEventListener("click",this.editComment.bind(this)),o[i].setAttribute("clickeventadded",!0));var s=document.querySelectorAll(".e-pv-comments-container");for(i=0;i<s.length;i++)if(!s[i].getAttribute("clickeventadded"))if(s[i].addEventListener("click",this.clickOnCommentsContainer.bind(this)),s[i].setAttribute("clickeventadded",!0),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode)s[i].classList.add("e-pv-comments-border");else if(!sf.base.Browser.isDevice)if(e){var a=document.getElementById(e);a&&a.classList.add("e-pv-comments-border")}else s[i].classList.add("e-pv-comments-border");var r=document.getElementsByClassName("e-pv-comment-title-container");for(i=0;i<r.length;i++)r[i].getAttribute("clickeventadded")||(r[i].addEventListener("click",this.onClickCommentTitle.bind(this)),r[i].setAttribute("clickeventadded",!0));var l=document.getElementsByClassName("e-pv-reply-title-container");for(i=0;i<l.length;i++)l[i].getAttribute("clickeventadded")||(l[i].addEventListener("click",this.onClickReplyTitle.bind(this)),l[i].setAttribute("clickeventadded",!0));var d=document.getElementsByClassName("e-pv-comments-div");for(i=0;i<d.length;i++)d[i].getAttribute("clickeventadded")||(d[i].addEventListener("click",this.onClickCommentsDiv.bind(this)),d[i].addEventListener("focus",this.onFocusCommentsDiv.bind(this)),d[i].addEventListener("blur",this.onBlurCommentsDiv.bind(this)),d[i].setAttribute("clickeventadded",!0));var h=document.getElementsByClassName("e-pv-reply-div");for(i=0;i<h.length;i++)h[i].getAttribute("clickeventadded")||(h[i].addEventListener("click",this.onClickCommentsDiv.bind(this)),h[i].addEventListener("focus",this.onFocusCommentsDiv.bind(this)),h[i].addEventListener("blur",this.onBlurCommentsDiv.bind(this)),h[i].setAttribute("clickeventadded",!0))}function Nc(e){for(var t=document.querySelectorAll('[id*="'+this.pdfViewer.dataId+'_more-options"]'),i=0;i<t.length;i++)t[i].style.visibility="hidden";e.currentTarget.children[1].style.visibility="visible",this.pdfViewer._dotnetInstance.invokeMethodAsync("GetReplyCommentId",e.currentTarget.parentElement.id).catch((function(e){throw console.error("Unhandled Exception:",e),e})),e.preventDefault(),this.isMouseClickEvent=!0}function Fc(e){var t=document.querySelectorAll(".e-pv-comments-border");if(t)for(var i=0;i<t.length;i++)t[i].classList.remove("e-pv-comments-border");for(var n=document.querySelectorAll('[id*="'+this.pdfViewer.dataId+'_more-options"]'),o=0;o<n.length;o++)n[o].style.visibility="hidden";e.currentTarget.parentElement.parentElement.children[0].children[2]&&(e.currentTarget.parentElement.parentElement.children[0].children[2].style.visibility="visible"),e.currentTarget.parentElement.parentElement.parentElement.classList.add("e-pv-comments-border"),e.preventDefault(),this.isMouseClickEvent=!0}function Lc(e){var t=this.findAnnotationObject(e.currentTarget.id),i=this.checkAnnotationSettings(e.currentTarget.id);if(this.isMouseClickEvent=!0,i&&this.pdfViewer.annotationModule.checkAllowedInteractions("Select",t)&&(i=!1),this.pdfViewerBase.updateCommentPanel(),!i){for(var n=document.querySelectorAll(".e-pv-comments-container"),o=document.getElementsByClassName("e-pv-comments-div"),s=0;s<o.length;s++)o[s].classList.remove("e-focused");var a=document.getElementsByClassName("e-pv-reply-div");for(s=0;s<a.length;s++)a[s].classList.remove("e-focused");for(var r=e.target,l=!1;!l;){var d=r.classList.contains("e-pv-reply-div"),h=r.classList.contains("e-pv-comments-div");if(d||h){r.classList.add("e-focused");var p=r.getElementsByClassName("e-pv-more-options-button");p&&p[0]&&(p[0].style.visibility="visible"),l=!0;var c=r.querySelectorAll(".e-pv-new-comments-div");for(s=0;s<c.length;s++){(u=c[s])instanceof HTMLElement&&(u.style.display="block")}this.previouslyFocusedElement=r}else if(r.parentElement)r=r.parentElement;else{l=!0;for(c=r.querySelectorAll(".e-pv-new-comments-div"),s=0;s<c.length;s++){var u;(u=c[s])instanceof HTMLElement&&(u.style.display="block")}}}for(s=0;s<n.length;s++)if(n[s].id!==e.currentTarget.id)n[s].lastElementChild.classList.contains("e-pv-comments-leave")&&n[s].getElementsByClassName("e-editable-inline")[0]&&(n[s].getElementsByClassName("e-editable-inline")[0].style.display="none");else{n[s].getElementsByClassName("e-editable-inline")[0]&&(n[s].getElementsByClassName("e-editable-inline")[0].style.display="block"),e.target.getElementsByClassName("e-pv-more-options-button")[0]&&(e.target.getElementsByClassName("e-pv-more-options-button")[0].style.visibility="visible");var f=e.target.classList.contains("e-pv-more-options-button");f?e.target.style.visibility="visible":(f=e.target.parentElement.classList.contains("e-pv-more-options-button"))&&(e.target.parentElement.style.visibility="visible"),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetCommentId",e.currentTarget.id).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}var m=document.querySelectorAll(".e-pv-comments-border");if(m)for(var g=0;g<m.length;g++)m[g].classList.remove("e-pv-comments-border");e.currentTarget.classList.add("e-pv-comments-border"),this.selectAnnotationFromComment(e.currentTarget,e.isTrusted),e.preventDefault()}}function Oc(e,t,i){var n;i="Stamp"===i||"stamp"===i||"Image"===i?"stamp":"StickyNotes"===i||"sticky"===i?"sticky":"textMarkup"===i?"textMarkup":"shape"===i||"Line"===i||"Radius"===i||"Rectangle"===i||"Ellipse"===i||"Polygon"===i||"LineWidthArrowHead"===i||"Square"===i||"Circle"===i?"shape":"FreeText"===i||"freetext"===i||"freeText"===i?"freetext":"ink"===i||"Ink"===i?"ink":"Redaction"===i||"redaction"===i?"redaction":"shape_measure";var o=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+i);if(this.pdfViewerBase.isStorageExceed&&(o=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]),o){var s=JSON.parse(o),a=this.pdfViewer.annotationModule.getPageCollection(s,e);n=s[a]?s[a].annotations:t}else n=t;return n}function Rc(e,t){var i,n=!1;if((i=t?this.pdfViewer.signatureCollection:this.pdfViewer.annotationCollection)&&e)for(var o=0;o<i.length;o++)if(t){if(i[o].signatureName===e.signatureName){n=!0;break}}else if(i[o].annotationId===e.annotationId){n=!0;break}!n&&e&&(t?this.pdfViewer.signatureCollection.push(e):this.pdfViewer.annotationCollection.push(e))}function zc(e,t,i,n){var o=i||e.shapeAnnotationType;e.indent&&""!==e.indent&&(o="shape_measure");var s=this.getAnnotations(t,null,o);if(null!==s){for(var a=0;a<s.length;a++)e.annotName===s[a].annotName&&(s[a]=e,this.pdfViewer.annotationModule.storeAnnotationCollections(s[a],t),n&&(s.splice(a,1),this.deleteStickyNotesAnnotations(s,t)));"shape_measure"===o?this.manageAnnotations(s,t,"shape_measure"):this.manageAnnotations(s,t,e.shapeAnnotationType)}}function Hc(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]),i)for(var n=e.bounds,o=JSON.parse(i),s=0;s<o.length;s++)for(var a=o[s],r=0;r<a.annotations.length;r++)if(o[s].annotations[r].annotName===e.annotName){this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky"),o[this.pdfViewer.annotationModule.getPageCollection(o,0)]&&(o[s].annotations[r].bounds={x:n.x,y:n.y,left:n.x,top:n.y,width:n.width,height:n.height,right:n.right,bottom:n.bottom});var l=JSON.stringify(o);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]=l:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sticky",l);break}}function Uc(){var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");this.pdfViewerBase.isStorageExceed&&(e=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]);for(var t=[],i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e&&!this.pdfViewer.annotationSettings.skipDownload)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++)this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]),a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getBounds(a.annotations[r].bounds,a.pageIndex));s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)}function jc(e,t,i){var n=this.findAnnotationType(t),o=this.getAnnotations(t.pageIndex,null,n);if(i&&(o=this.pdfViewer.annotationModule.removedAnnotationCollection),null!==o)for(var s=0;s<o.length;s++)if(i&&!o[s].annotName&&(o[s].annotName=o[s].annotationId),o[s].annotName===t.annotName){var a=u(o[s]);a.annotName=e.annotName,"shape"!==n&&"redaction"!==n&&"shape_measure"!==n&&"freetext"!==n&&"ink"!==n||(a.id=e.id),"stamp"===n&&(a.randomId=e.id),"ink"===n&&(a.bounds.x=e.bounds.x,a.bounds.y=e.bounds.y),"redaction"===n?(a.bounds.left=e.bounds?e.bounds.x:e.bound.x,a.bounds.top=e.bounds?e.bounds.y:e.bound.y):(a.bounds.left=e.bounds.x,a.bounds.top=e.bounds.y,a.vertexPoints=e.vertexPoints),a.note=a.note?a.note:"","freetext"===n&&(a.note=a.note?a.note:a.notes?a.notes:a.dynamicText?a.dynamicText:""),a.comments=[],e.comments.length>0&&(a.comments=e.comments),e.review?a.review=e.review:a.review={state:"",stateModel:"",modifiedDate:a.ModifiedDate,author:a.author},a.state="",a.stateModel="",a.pageNumber=e.pageIndex,"ink"!==n&&"freetext"!==n||(a.pageIndex=e.pageIndex),this.pdfViewer.annotationModule.storeAnnotations(e.pageIndex,a,"_annotations_"+n);var r="shape_measure"==n?e.measureType:e.shapeAnnotationType;a.comments.length>0?this.addComments(n,a.pageNumber+1,r,a.annotName,a.note,e.review?e.review.state:"",a.author,a.comments):this.addComments(n,a.pageNumber+1,r,a.annotName,a.note,e.review?e.review.state:"",a.author),i&&(this.pdfViewer.annotationModule.removedAnnotationCollection=[]);break}}function _c(e){var t=this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?t=e.AnnotationSelectorSettings:this.pdfViewer.stickyNotesSettings.annotationSelectorSettings&&(t=this.pdfViewer.stickyNotesSettings.annotationSelectorSettings),t}function Wc(e,t){var i=this.getAnnotations(e,null,"sticky");i&&i.push(t),this.manageAnnotations(i,e,"sticky")}function qc(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_sticky");if(this.pdfViewerBase.isStorageExceed&&(i=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]),i){var n=JSON.parse(i);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_sticky");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_sticky"]=s:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_sticky",s)}}function Zc(e,t){e.Author||(e.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author);var i=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock,n=e.AllowedInteraction?e.AllowedInteraction:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);return e.IsLock&&(i=e.IsLock),{shapeAnnotationType:"sticky",type:"StickyNotes",author:e.Author,allowedInteractions:n,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,opacity:e.Opacity,state:e.State,stateModel:e.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},annotationId:e.AnnotName,color:e.color,pageNumber:t,customData:this.pdfViewer.annotation.getCustomData(e),annotationSettings:{isLock:i},isLocked:e.IsLock,isPrint:e.IsPrint,isCommentLock:e.IsCommentLock}}function Yc(e,t,i){i="Stamp"===i||"stamp"===i?"stamp":"Sticky"===i||"sticky"===i||"StickyNotes"===i?"sticky":"textMarkup"===i?"textMarkup":"shape"===i||"Line"===i||"Radius"===i||"Rectangle"===i||"Ellipse"===i||"Polygon"===i||"LineWidthArrowHead"===i||"Square"===i||"Circle"===i?"shape":"FreeText"===i?"freetext":"ink"===i||"Ink"===i?"ink":"Redaction"===i||"redaction"===i?"redaction":"shape_measure";var n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+i);if(this.pdfViewerBase.isStorageExceed&&(n=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]),n){var o=JSON.parse(n);this.pdfViewerBase.isStorageExceed||window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_"+i);var s=this.pdfViewer.annotationModule.getPageCollection(o,t);o[s]&&(o[s].annotations=e);var a=JSON.stringify(o);this.pdfViewerBase.isStorageExceed?this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+i]=a:window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_"+i,a)}}function Xc(e){if(this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)return this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation;if(this.pdfViewer.selectedItems.annotations[0])return this.pdfViewer.selectedItems.annotations[0];var t=this.pdfViewer.annotationCollection;if(t)for(var i=0;i<t.length;i++)if(t[i].annotationId&&t[i].annotationId===e){if("textMarkup"===t[i].shapeAnnotationType)return t[i];t=this.pdfViewer.annotations;for(var n=0;n<t.length;n++)if(t[n].annotName&&t[n].annotName===e)return t[n]}}function Gc(e){var t=this.pdfViewer.annotationCollection;if(t){for(var i=0;i<t.length;i++)if(t[i].annotationId&&t[i].annotationId===e)return!!(t[i].annotationSettings&&t[i].annotationSettings.isLock||t[i].isLocked);return!1}return!1}function Jc(){var e=document.getElementById(this.pdfViewer.dataId+"_accordionContentContainer"),t=document.getElementById(this.pdfViewer.dataId+"_commentscontentcontainer");e.style.width=t.clientWidth+"px"}function Kc(e,t){var i;if(e){var n=e.shapeAnnotationType,o=this.getAnnotationType(n);i=this.pdfViewer.annotationModule.updateAnnotationAuthor(o,n)}else i=t.getAttribute("author");return i}function Qc(e){var t,i=e.pageNumber,n={};this.pdfViewerBase.fireDocumentEditedEvent("AnnotationUpdated");var o,s=e.shapeAnnotationType;if((o=this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation?this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation:this.pdfViewer.selectedItems.annotations[0])&&o.annotName!==e.annotId&&(o=this.pdfViewer.nameTable[e.annotId]),!o){var a=this.pdfViewer.annotationCollection;a&&a.length>0&&(o=a.find((function(t){return t.annotationId===e.annotId})))}var r=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_"+s);if(this.pdfViewerBase.isStorageExceed&&(r=this.pdfViewerBase.annotationStorage[this.pdfViewerBase.documentId+"_annotations_"+s]),r){var l=JSON.parse(r),d=this.pdfViewer.annotationModule.getPageCollection(l,i-1);l[d]&&(t=l[d].annotations)}var h=!1,p="",c="",u=!1,f=-1,m=null,g=!1;if(o){for(var w=0;w<t.length;w++){if(t[w].annotName===e.annotName){if((null!=t[w].note&&""!==t[w].note&&t[w].note!==e.note||"FreeText"===t[w].shapeAnnotationType&&t[w].dynamicText!==e.note)&&(h=!0,c=t[w].note),"FreeText"===t[w].shapeAnnotationType?(p=t[w].dynamicText,t[w].isFreeTextEdited=!0):p=t[w].note,p!==e.note)g=!0;else if(e.replyCollection.length!==t[w].comments.length+1)g=!0;else if(e.replyCollection.length>0&&e.replyCollection.length===t[w].comments.length+1)for(var y=1;y<e.replyCollection.length;y++)if(t[w].comments.length>=y&&e.replyCollection[y].note!==t[w].comments[y-1].note){g=!0;break}t[w].note=e.note,t[w].annotName=e.annotName,t[w].modifiedDate=this.getDateAndTime(e.modifiedDate),null==t[w].modifiedDate&&(t[w].modifiedDate=this.getDateAndTime());for(var v=document.querySelectorAll(".e-pv-new-comments-div"),b=0;b<v.length;b++)v[b].style.display=null;for(y=1;y<e.replyCollection.length;y++){var S=e.replyCollection[y];S.modifiedDate=this.getDateAndTime(e.replyCollection[y].modifiedDate),null==S.modifiedDate&&(S.modifiedDate=this.getDateAndTime());var A=S.state,x=void 0;x=A?{annotName:S.annotName,parentId:S.parentElement,subject:"Comments",comments:[],author:S.author,note:S.note,shapeAnnotationType:"",state:A,stateModel:"Review",modifiedDate:S.modifiedDate,review:{state:A,stateModel:"Review",modifiedDate:this.getDateAndTime(),author:S.author},isLock:!1}:{annotName:S.annotName,parentId:S.parentElement,subject:"Comments",comments:[],author:S.author,note:S.note,shapeAnnotationType:"",state:"",stateModel:"",modifiedDate:S.modifiedDate,review:{state:"",stateModel:"",modifiedDate:this.getDateAndTime(),author:S.author},isLock:!1},(e.replyCollection[y].note||""!==e.replyCollection[y].note)&&(sf.base.isNullOrUndefined(t[w].comments[y-1])||t[w].comments[y-1].annotName!==x.annotName||t[w].comments[y-1].note===x.note||(u=!0,f=y-1,m=t[w].comments[y-1]),t[w].comments[y-1]=x,o.comments[y-1]=x)}var V=o.note;o.annotName=t[w].annotName,o.note=t[w].note,o.modifiedDate=this.getDateAndTime(t[w].modifiedDate),n.action="Comment",null!=t[w].comments&&t[w].comments.length>0&&(n.comments=-1===f?t[w].comments[t[w].comments.length-1]:t[w].comments[f]),null!=t[w].note&&(n.note=t[w].note),n.isNoteModified=h,n.prevNote=c,n.isReplyModified=u,n.prevReply=m,n.annotation=t[w],n.redoElement=t[w],n.annotation.pageNumber=e.pageNumber-1,g&&(this.dynamicTextChange(o)||(n.isComment=!0,this.pdfViewer.annotation.actionCollection.push(n))),"FreeText"===o.shapeAnnotationType&&this.modifyTextProperty(o.note,V,o.annotName)}t[w].dynamicText&&t[w].note&&"FreeText"===t[w].shapeAnnotationType&&t[w].dynamicText!==t[w].note&&(t[w].dynamicText=t[w].note),o.annotName===t[w].annotName&&this.updateUndoRedoCollections(t[w],i-1)}n.isComment&&(this.pdfViewer.annotation.undoCommentsElement.push(n),1===this.pdfViewer.annotation.actionCollection.length&&this.pdfViewer.annotation.updateToolbar())}}function $c(e,t){var i;e.Author||(e.Author="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.stickyNotesSettings.author);var n=this.pdfViewer.stickyNotesSettings.isLock?this.pdfViewer.stickyNotesSettings.isLock:this.pdfViewer.annotationSettings.isLock,o=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e);i={shapeAnnotationType:"sticky",type:"StickyNotes",author:e.Author,allowedInteractions:o,modifiedDate:e.ModifiedDate,subject:e.Subject,note:e.Note,opacity:e.Opacity,state:e.State,stateModel:e.StateModel,pathData:"",comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),review:{state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},pageNumber:t,bounds:{x:e.Bounds.X,y:e.Bounds.Y,left:e.Bounds.X,top:e.Bounds.Y,width:e.Bounds.Width,height:e.Bounds.Height,right:e.Bounds.Right,bottom:e.Bounds.Bottom},annotName:e.AnnotName,color:e.color,annotationSelectorSettings:this.getSettings(e),customData:this.pdfViewer.annotation.getCustomData(e),annotationSettings:{isLock:n},isLocked:e.IsLock,isPrint:e.IsPrint,isCommentLock:e.IsCommentLock},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_sticky")}function eu(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=this.getAnnotations(t,null,i.shapeAnnotationType);if(null!=n&&i){for(var o=0;o<n.length;o++)i.annotName===n[o].annotName&&("bounds"===e?(n[o].bounds={x:i.bounds.x,y:i.bounds.y,left:i.bounds.x,top:i.bounds.y,width:i.bounds.width,height:i.bounds.height},this.pdfViewerBase.isUpdateProgrammatically||(n[o].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime())):"isLock"===e?(n[o].annotationSettings&&(n[o].annotationSettings.isLock=i.isLock),n[o].isLocked=i.isLock):"allowedInteractions"===e?n[o].allowedInteractions=i.allowedInteractions:"isPrint"===e&&(n[o].annotationSettings&&(n[o].annotationSettings.isPrint=i.isPrint),n[o].isPrint=i.isPrint),this.pdfViewer.annotationModule.storeAnnotationCollections(n[o],t));this.manageAnnotations(n,t,i.shapeAnnotationType)}return null}function tu(e){var t=this.getAnnotations(e.pageIndex,null,e.shapeAnnotationType);if(null!==t)for(var i=0;i<t.length;i++)t[i].annotName===e.annotName&&(t[i].opacity=e.opacity,this.updateUndoRedoCollections(t[i],e.pageIndex))}function iu(e,t,i){if("Text Property Added"===t){if(e&&(d=document.getElementById(e.annotName))){var n=parseInt(d.accessKey.split("_")[0],10)-1,o=u(e),s=i.note;return e.note=s,2===d.childElementCount&&(d.lastChild.style.display="block"),this.updateUndoRedoCollections(e,n),o}}else if("Status Property Added"===t){if(e){o=u(e);var a=null;if(e.annotName===i.annotName)e.review=i.review,e.state=i.state?i.state:i.review?i.review.state:"",e.stateModel=i.stateModel?i.stateModel:i.review?i.review.stateModel:"",this.pdfViewer.annotation.redoCommentsElement.push(e),a={Id:e.annotName,commentReview:e.review,state:e.state?e.state:"",stateModel:e.stateModel?e.stateModel:""};else for(var r=0;r<e.comments.length;r++)if(e.comments[r].annotName===i.annotName){e.comments[r].review=i.review,e.comments[r].state=i.state?i.state:i.review?i.review.state:"",e.comments[r].stateModel=i.stateModel?i.stateModel:i.review?i.review.stateModel:"",this.pdfViewer.annotation.redoCommentsElement.push(e.comments[r]),a={Id:e.annotName,replyId:e.comments[r].annotName,replyReview:e.comments[r].review,replyState:e.comments[r].state?e.comments[r].state:"",replyStateModel:e.comments[r].stateModel?e.comments[r].stateModel:""};break}return sf.base.isNullOrUndefined(a)||this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCommentItem",a).catch((function(e){throw console.error("Unhandled Exception:",e),e})),this.updateUndoRedoCollections(e,sf.base.isNullOrUndefined(e.pageIndex)?e.pageNumber:e.pageIndex),o}}else if("Comments Reply Deleted"===t){var l=document.getElementById(e.annotName);if(l){n=parseInt(l.accessKey.split("_")[0],10)-1;this.pdfViewer.annotation.redoCommentsElement.push(i);a={Id:e.annotName,addComments:i};return this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCommentItem",a).catch((function(e){throw console.error("Unhandled Exception:",e),e})),this.updateUndoRedoCollections(e,n),e}}else if("dynamicText Change"===t){var d;if(e)if(d=document.getElementById(e.annotName))return this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateFreeText",i.annotName,i.dynamicText,i.isLocked).catch((function(e){throw console.error("Unhandled Exception:",e),e})),e}}function nu(e,t,i){if("Text Property Added"===t){if(l=document.getElementById(e.annotName)){var n=parseInt(l.accessKey.split("_")[0],10)-1;return l.lastChild.style.display="block",this.updateUndoRedoCollections(e,n),e}}else{if("Status Property Added"===t){if(a=this.pdfViewer.annotation.redoCommentsElement.pop()){var o=null;if(e.annotName===a.annotName)o={Id:e.annotName,commentReview:e.review,state:e.state?e.state:e.review?e.review.state:"",stateModel:e.stateModel?e.stateModel:e.review?e.review.stateModel:""};else for(var s=0;s<e.comments.length;s++)e.comments[s].annotName===a.annotName&&(o={Id:e.annotName,replyId:e.comments[s].annotName,replyReview:e.comments[s].review,replyState:e.comments[s].state?e.comments[s].state:e.comments[s].review?e.comments[s].review.state:"",replyStateModel:e.comments[s].stateModel?e.comments[s].stateModel:e.comments[s].review?e.comments[s].review.stateModel:""});sf.base.isNullOrUndefined(o)||this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCommentItem",o)}return this.updateUndoRedoCollections(e,sf.base.isNullOrUndefined(e.pageIndex)?e.pageNumber:e.pageIndex),e}if("Comments Reply Deleted"===t){n=sf.base.isNullOrUndefined(e.pageIndex)?e.pageNumber:e.pageIndex;var a=this.pdfViewer.annotation.redoCommentsElement.pop(),r=u(e);for(s=0;s<e.comments.length;s++)if(e.comments[s].annotName===a.annotName){o={Id:e.annotName,deleteComments:e.comments[s]};e.comments.splice(s,1),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateCommentItem",o)}return this.updateUndoRedoCollections(e,n),r}var l;if("dynamicText Change"===t&&e&&(l=document.getElementById(e.annotName)))return this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateFreeText",e.annotName,e.dynamicText,e.isLocked).catch((function(e){throw console.error("Unhandled Exception:",e),e})),e}}function ou(e,t){var i=e+1,n=this.pdfViewer.annotation.undoCommentsElement.pop();n&&("freeText"===t||"FreeText"===t?this.addComments(t,i,n.subject,n.annotName,n.dynamicText,n.state,n.author,n.comments):this.addComments(t,i,n.subject,n.annotName,n.note,n.state,n.author,n.comments),this.updateUndoRedoCollections(n,e,t))}function su(e,t,i){var n,o,s=document.getElementById(e.annotName);if(s){if(sf.base.isNullOrUndefined(e.pageNumber))if(sf.base.isNullOrUndefined(e.pageIndex)){o=parseInt(s.accessKey.split("_")[0],10)-1}else o=e.pageIndex;else o=e.pageNumber;for(var a=s.parentElement,r=0;r<a.childElementCount;r++)a.childNodes[r].id===e.annotName&&(n=r);"Stamp"===t||"Image"===t?t="stamp":"FreeText"===t?t="freetext":"StickyNotes"===t||"sticky"===t?t="sticky":"Ink"===t&&(t="ink");var l=this.getAnnotations(o,null,t);if(null!==l)for(r=0;r<l.length;r++)if(l[r].annotName===e.annotName){var d=u(l[r]);l[r].position=n,this.pdfViewer.annotation.undoCommentsElement.push(l[r]),"sticky"===t&&this.updateUndoRedoCollections(d,o,null,i)}}}function au(e,t){if(t){var i=this.getAnnotations(e,null,"sticky");i&&i.push(t),this.manageAnnotations(i,e,"sticky")}}var ru=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},lu=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}};function du(){var e,t=this,i=t.pdfViewerBase.pageCount;t.isCommentsRendered||(20<i?i=20:t.isPageCommentsRendered=!0),this.isCommentsRendered?e={pageStartIndex:20,pageEndIndex:i,hashId:this.pdfViewerBase.hashId,action:"RenderAnnotationComments",elementId:this.pdfViewer.dataId,uniqueId:t.pdfViewerBase.documentId}:(e={pageStartIndex:0,pageEndIndex:i,hashId:this.pdfViewerBase.hashId,action:"RenderAnnotationComments",elementId:this.pdfViewer.dataId,uniqueId:t.pdfViewerBase.documentId},t.isCommentsRendered=!0),this.pdfViewerBase.jsonDocumentId&&(e.documentId=this.pdfViewerBase.jsonDocumentId);var n=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderComments;t.commentsRequestHandler=new Wn(t.pdfViewer),t.commentsRequestHandler.url=n,t.commentsRequestHandler.mode=!0,t.commentsRequestHandler.responseType="text",sf.base.isNullOrUndefined(e.hashId)||""===e.hashId.trim()||t.commentsRequestHandler.send(e),t.commentsRequestHandler.onSuccess=function(e){var i=e.data;t.updateCommentsCollection(i)},t.commentsRequestHandler.onFailure=function(e){this.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText)},t.commentsRequestHandler.onError=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,t.pdfViewer.serverActionSettings.renderComments)}}function hu(e){return ru(this,void 0,void 0,(function(){var t,i,o,s,a,r,l,d;return lu(this,(function(h){switch(h.label){case 0:if(t=this,!e)return[3,5];if("object"!==n(e))try{"object"!==n(e=JSON.parse(e))&&(e=JSON.parse(e)),"object"!==n(e)&&(t.pdfViewerBase.onControlError(500,e,t.pdfViewer.serverActionSettings.renderComments),e=null)}catch(i){t.pdfViewerBase.onControlError(500,e,t.pdfViewer.serverActionSettings.renderComments),e=null}if(!e)return[3,5];if(i=!1,t.pdfViewerBase.annotationComments?t.pdfViewerBase.annotationComments=e.annotationDetails:(t.pdfViewerBase.annotationComments=e.annotationDetails,i=!0),!e.annotationDetails||e.uniqueId!==t.pdfViewerBase.documentId)return[3,5];for(t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.renderComments,e),t.isAnnotationRendered=!0,o=void 0,t.pdfViewerBase.documentAnnotationCollections?o=t.updateAnnotationsInDocumentCollections(t.pdfViewerBase.annotationComments,t.pdfViewerBase.documentAnnotationCollections):(s=t.pdfViewerBase.createAnnotationsCollection(),o=t.updateAnnotationsInDocumentCollections(t.pdfViewerBase.annotationComments,s)),t.pdfViewerBase.annotationComments=o,t.pdfViewerBase.documentAnnotationCollections=o,t.pdfViewerBase.createRequestForStamp(),a=e.startPageIndex;a<e.endPageIndex;a++)r=e.annotationDetails[a],this.pdfViewerBase.updateModifiedDateToLocalDate(r,"freeTextAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(r,"measureShapeAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(r,"shapeAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(r,"signatureAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(r,"signatureInkAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(r,"stampAnnotations"),this.pdfViewerBase.updateModifiedDateToLocalDate(r,"stickyNotesAnnotation"),this.pdfViewerBase.updateModifiedDateToLocalDate(r,"textMarkupAnnotation");l=e.startPageIndex,h.label=1;case 1:return l<e.endPageIndex?e.annotationDetails[l]?[4,t.renderAnnotationCollections(e.annotationDetails[l],l,i,e.endPageIndex)]:[3,3]:[3,4];case 2:h.sent(),h.label=3;case 3:return l++,[3,1];case 4:e.hasRedactAnnotation&&(d={},t.pdfViewer.viewerBase.hasRedactAnnotation=!0,t.pdfViewer.viewerBase.blazorUIAdaptor.getRedactionAnnotationCount(d),t.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToolbarIcon",d,t.pdfViewer.viewerBase.blazorUIAdaptor.isAnnotationSelected(),null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e}))),t.isPageCommentsRendered?e.endPageIndex<=20?t.pdfViewer.viewerBase.isAnnotationPresent=e.isAnnotationPresent:e.endPageIndex>20&&(t.pdfViewer.viewerBase.isAnnotationPresent||(t.pdfViewer.viewerBase.isAnnotationPresent=e.isAnnotationPresent)):(t.isPageCommentsRendered=!0,t.pdfViewer.viewerBase.isAnnotationPresent=e.isAnnotationPresent,t.createRequestForComments()),h.label=5;case 5:return[2]}}))}))}function pu(){this.isEditableElement=!1,this.isPageCommentsRendered=!1,this.isCommentsRendered=!1,this.isAnnotationRendered=!1,this.commentMenuObj&&this.commentMenuObj.destroy();var e=document.querySelectorAll(".e-pv-accordion-page-container");if(e)for(var t=0;t<e.length;t++)e[t].remove();this.commentsRequestHandler&&this.commentsRequestHandler.clear()}function cu(e){if(this.pdfViewerBase.isCommentIconAdded){var t=this.pdfViewer.annotation.getEventPageNumber(e),i=this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect(),n=this.pdfViewerBase.getZoomFactor();this.pdfViewer.annotation.stickyNotesAnnotationModule.drawStickyNotes((e.clientX-i.left)/n,(e.clientY-i.top)/n,30,30,t,null),this.pdfViewerBase.isCommentIconAdded=!1;var o=document.getElementById(this.pdfViewer.dataId+"_comment");if((o=o.children[0])&&o.classList.contains("e-pv-select"))o.classList.remove("e-pv-select");else{var s=document.getElementById(this.pdfViewer.dataId+"_commentIcon");s&&(this.pdfViewer.enableRtl?s.className="e-pv-comment-icon e-pv-icon e-icon-left e-right":s.className="e-pv-comment-icon e-pv-icon e-icon-left")}}}function uu(e,t){for(var i=0;i<this.pdfViewerBase.pageCount;i++)if(e[i]&&t[i]){if(e[i].textMarkupAnnotation&&0!==e[i].textMarkupAnnotation.length&&t[i].textMarkupAnnotation)for(var n=0;n<e[i].textMarkupAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].textMarkupAnnotation[n],t[i].textMarkupAnnotation);if(e[i].shapeAnnotation&&0!==e[i].shapeAnnotation.length&&t[i].shapeAnnotation)for(n=0;n<e[i].shapeAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].shapeAnnotation[n],t[i].shapeAnnotation);if(e[i].measureShapeAnnotation&&0!==e[i].measureShapeAnnotation.length&&t[i].measureShapeAnnotation)for(n=0;n<e[i].measureShapeAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].measureShapeAnnotation[n],t[i].measureShapeAnnotation);if(e[i].stampAnnotations&&0!==e[i].stampAnnotations.length&&t[i].stampAnnotations)for(n=0;n<e[i].stampAnnotations.length;n++)this.updateDocumentAnnotationCollections(e[i].stampAnnotations[n],t[i].stampAnnotations);if(e[i].stickyNotesAnnotation&&0!==e[i].stickyNotesAnnotation.length&&t[i].stickyNotesAnnotation)for(n=0;n<e[i].stickyNotesAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].stickyNotesAnnotation[n],t[i].stickyNotesAnnotation);if(e[i].freeTextAnnotation&&0!==e[i].freeTextAnnotation.length&&t[i].freeTextAnnotation)for(n=0;n<e[i].freeTextAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].freeTextAnnotation[n],t[i].freeTextAnnotation);if(e[i].signatureAnnotation&&0!==e[i].signatureAnnotation.length&&t[i].signatureAnnotation)for(n=0;n<e[i].signatureAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].signatureAnnotation[n],t[i].signatureAnnotation);if(e[i].signatureInkAnnotation&&0!==e[i].signatureInkAnnotation.length&&t[i].signatureInkAnnotation)for(n=0;n<e[i].signatureInkAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].signatureInkAnnotation[n],t[i].signatureInkAnnotation);if(e[i].redactionAnnotation&&0!==e[i].redactionAnnotation.length&&t[i].redactionAnnotation)for(n=0;n<e[i].redactionAnnotation.length;n++)this.updateDocumentAnnotationCollections(e[i].redactionAnnotation[n],t[i].redactionAnnotation)}return t}var fu=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},mu=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}},gu=function(){function e(e,t){this.isCommentsSelected=!1,this.isAddAnnotationProgramatically=!1,this.isEditableElement=!1,this.isMouseClickEvent=!1,this.isPageCommentsRendered=!1,this.isCommentsRendered=!1,this.isAnnotationRendered=!1,this.pdfViewer=e,this.pdfViewerBase=t,this.opacity=this.pdfViewer.stickyNotesSettings.opacity?this.pdfViewer.stickyNotesSettings.opacity:1,this.stickyNoteImageSource=this.setImageSource(),window.stickyNote=new Map;var i=new Image;i.onload=function(){window.stickyNote=i},i.src=this.stickyNoteImageSource}return e.prototype.renderStickyNotesAnnotations=function(e,t,i){Gp.call(this,e,t,i)},e.prototype.getSettings=function(e){return _c.call(this,e)},e.prototype.drawStickyNotes=function(e,t,i,n,o,s,a){Jp.call(this,e,t,i,n,o,s,a)},e.prototype.setImageSource=function(){return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgd2lkdGg9IjE2IgogICBoZWlnaHQ9IjE1IgogICB2aWV3Qm94PSIwIDAgNC4yMzMzMzMxIDMuOTY4NzQ5NyIKICAgdmVyc2lvbj0iMS4xIj4KICA8ZyBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBkPSJNIDMuODM4OSwwLjk0MTY3IEMgMy42NTM5LDAuNzAzNjcgMy40MTU5LDAuNTE3NjcgMy4xMjQ5LDAuMzg1NjcgMi44MDc5LDAuMjUzNjcgMi40ODk5LDAuMTczNjcgMi4xMTk5LDAuMTczNjcgMS43NDg5LDAuMTczNjcgMS40MzE5LDAuMjUzNjcgMS4xMTQyLDAuMzg1NjcgMC44MjMxNiwwLjUxNzY3IDAuNTg1MTYsMC43MDM2NyAwLjQwMDE2LDAuOTQxNjcgMC4yMTUxNiwxLjE3OTcgMC4xMzUxNiwxLjQxNzcgMC4xMzUxNiwxLjcwODcgMC4xMzUxNiwxLjk0NjcgMC4xODgxNiwyLjE1ODcgMC4zMjAxNiwyLjM0MzcgMC40NTMxNiwyLjU1NTcgMC42MTExNiwyLjcxMzcgMC44MjMxNiwyLjg0NjcgMC43OTIxNiwzLjE1NDcgMC42NTAxNiwzLjM4MjcgMC40NzkxNiwzLjU4NzcgMC40MjgxNiwzLjY2NzcgMC41MTcxNiwzLjc0MTcgMC42OTExNiwzLjcxOTcgMS4wODgyLDMuNjM5NyAxLjQwNDksMy40NTQ3IDEuNjQyOSwzLjE2MzcgMS44MDE5LDMuMTkwNyAxLjk2MDksMy4yMTY3IDIuMTE5OSwzLjIxNjcgMi40ODk5LDMuMjE2NyAyLjgwNzksMy4xMzc3IDMuMTI0OSwzLjAwNTcgMy40MTU5LDIuODcyNyAzLjY4MDksMi42ODc3IDMuODM4OSwyLjQ0OTcgNC4wMjQ5LDIuMjExNyA0LjEwMzksMS45NzM3IDQuMTAzOSwxLjY4MjcgNC4xMDM5LDEuNDE3NyA0LjAyNDksMS4xNTI3IDMuODM4OSwwLjk0MTY3IFoiCiAgICAgICBpZD0icGF0aDE1MjQiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmNzAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDowLjI2NDU4MztzdHJva2Utb3BhY2l0eToxIiAvPgogICAgPHBhdGgKICAgICAgIGQ9Ik0gMy4wNDI5LDEuNDE2NyBIIDEuMTkxMiBDIDEuMTExMiwxLjQxNjcgMS4wNTkyLDEuMzYzNyAxLjA1OTIsMS4yODM3IDEuMDU5MiwxLjIwNDcgMS4xMTEyLDEuMTUxNyAxLjE5MTIsMS4xNTE3IEggMy4wNDI5IEMgMy4xMjE5LDEuMTUxNyAzLjE3NDksMS4yMDQ3IDMuMTc0OSwxLjI4MzcgMy4xNzQ5LDEuMzYzNyAzLjEyMTksMS40MTY3IDMuMDQyOSwxLjQxNjcgWiIKICAgICAgIGlkPSJwYXRoMTUzNiIKICAgICAgIHN0eWxlPSJzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+CiAgICA8cGF0aAogICAgICAgZD0iTSAzLjA0MjksMS45NDU3IEggMS4xOTEyIEMgMS4xMTEyLDEuOTQ1NyAxLjA1OTIsMS44OTI3IDEuMDU5MiwxLjgxMjcgMS4wNTkyLDEuNzMzNyAxLjExMTIsMS42ODA3IDEuMTkxMiwxLjY4MDcgSCAzLjA0MjkgQyAzLjEyMTksMS42ODA3IDMuMTc0OSwxLjczMzcgMy4xNzQ5LDEuODEyNyAzLjE3NDksMS44OTI3IDMuMTIxOSwxLjk0NTcgMy4wNDI5LDEuOTQ1NyBaIgogICAgICAgaWQ9InBhdGgxNTQwIgogICAgICAgc3R5bGU9InN0cm9rZS13aWR0aDowLjI2NDU4MyIgLz4KICA8L2c+Cjwvc3ZnPgo="},e.prototype.createRequestForComments=function(){du.call(this)},e.prototype.updateCommentsCollection=function(e){return fu(this,void 0,void 0,(function(){return mu(this,(function(t){switch(t.label){case 0:return[4,hu.call(this,e)];case 1:return t.sent(),[2]}}))}))},e.prototype.updateAnnotationsInDocumentCollections=function(e,t){return uu.call(this,e,t)},e.prototype.updateDocumentAnnotationCollections=function(e,t){!function(e,t){if(0===e.length)e.push(t);else{for(var i=!1,n=0;n<e.length;n++)if(t.AnnotName&&e[n].AnnotName&&t.AnnotName===e[n].AnnotName){i=!0;break}i||e.push(t)}}(t,e)},e.prototype.renderAnnotationCollections=function(e,t,i,n){return fu(this,void 0,void 0,(function(){return mu(this,(function(o){switch(o.label){case 0:return[4,$p.call(this,e,t,i,n)];case 1:return o.sent(),[2]}}))}))},e.prototype.getAnnotationComment=function(e,t){return function(e){return{AnnotName:e.AnnotName,AnnotType:e.AnnotType,Author:e.Author,Note:e.Note,ModifiedDate:e.ModifiedDate,Comments:e.Comments,State:e.State,StateModel:e.StateModel,Subject:e.Subject,TextMarkupAnnotationType:e.TextMarkupAnnotationType,MarkupText:e.MarkupText,Text:e.Text}}(e)},e.prototype.updateCollections=function(e,t){Rc.call(this,e,t)},e.prototype.updateCommentPanelTextTop=function(){oc.call(this)},e.prototype.updateCommentPanelScrollTop=function(e){ac.call(this,e)},e.prototype.commentDivFocus=function(e){Bc.call(this,e)},e.prototype.updateScrollPosition=function(e){dc.call(this,e)},e.prototype.updateCommentsScrollTop=function(e){sc.call(this,e)},e.prototype.updateCommentIcon=function(e,t,i){!function(e,t,i){"sticky"===e?t.className="e-pv-comment-icon e-pv-icon":"stamp"===e?t.className="e-pv-stamp-icon e-pv-icon":"shape"===e?t.className="Line"===i?"e-pv-shape-line-icon e-pv-icon":"LineWidthArrowHead"===i||"Arrow"===i?"e-pv-shape-arrow-icon e-pv-icon":"Circle"===i||"Ellipse"===i||"Oval"===i?"e-pv-shape-circle-icon e-pv-icon":"Rectangle"===i||"Square"===i?"e-pv-shape-rectangle-icon e-pv-icon":"Polygon"===i?"e-pv-shape-pentagon-icon e-pv-icon":"e-pv-annotation-shape-icon e-pv-icon":"measure"===e?t.className="Distance"===i||"Distance calculation"===i?"e-pv-calibrate-distance-icon e-pv-icon":"Perimeter"===i||"Perimeter calculation"===i?"e-pv-calibrate-perimeter-icon e-pv-icon":"Radius"===i||"Radius calculation"===i?"e-pv-calibrate-radius-icon e-pv-icon":"Area"===i||"Area calculation"===i?"e-pv-calibrate-area-icon e-pv-icon":"Volume"===i||"Volume calculation"===i?"e-pv-calibrate-volume-icon e-pv-icon":"e-pv-annotation-calibrate-icon e-pv-icon":"textMarkup"===e?t.className="Highlight"===i?"e-pv-highlight-icon e-pv-icon":"Underline"===i?"e-pv-underline-icon e-pv-icon":"Strikethrough"===i?"e-pv-strikethrough-icon e-pv-icon":"e-pv-annotation-icon e-pv-icon":"freeText"===e?t.className="e-pv-freetext-icon e-pv-icon":"ink"!==e&&"Ink"!==i||(t.className="e-pv-inkannotation-icon e-pv-icon")}(t,e,i)},e.prototype.updateStatusContainer=function(e,t,i,n){!function(e,t,i,n){"Accepted"===e?(t.style.backgroundColor="rgb(24,169,85)",i.className="e-pv-accepted-icon"):"Completed"===e?(t.style.backgroundColor="rgb(0,122,255)",i.className="e-pv-completed-icon"):"Cancelled"===e?(t.style.backgroundColor="rgb(245,103,0)",i.className="e-pv-cancelled-icon"):"Rejected"===e?(t.style.backgroundColor="rgb(255,59,48)",i.className="e-pv-rejected-icon"):(i.className="",n.parentElement.removeChild(n))}(e,i,t,n)},e.prototype.updateCommentMenuItem=function(e){fc.call(this,e)},e.prototype.commentMenuItemSelect=function(e){Vc.call(this,e)},e.prototype.moreOptionsClick=function(e,t){xc.call(this,e,t)},e.prototype.commentDivOnSelect=function(e){!function(e){for(var t=document.querySelectorAll(".e-pv-comments-select"),i=0;i<t.length;i++)t[i].classList.remove("e-pv-comments-select");var n=document.getElementById(e.currentTarget.id);if(n&&(n.classList.remove("e-pv-comments-hover"),n.classList.remove("e-pv-comments-leave"),n.classList.add("e-pv-comments-select"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var o=document.getElementById(e.currentTarget.nextSibling.id);o.classList.remove("e-pv-comments-hover"),o.classList.remove("e-pv-comments-leave"),o.classList.add("e-pv-comments-select")}}(e)},e.prototype.commentDivMouseOver=function(e){!function(e){var t=document.getElementById(e.currentTarget.id);if(t&&(t.classList.remove("e-pv-comments-select"),t.classList.remove("e-pv-comments-leave"),t.classList.add("e-pv-comments-hover"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var i=document.getElementById(e.currentTarget.nextSibling.id);i.classList.remove("e-pv-comments-select"),i.classList.remove("e-pv-comments-leave"),i.classList.add("e-pv-comments-hover")}}(e)},e.prototype.commentDivMouseLeave=function(e){!function(e){var t=document.getElementById(e.currentTarget.id);if(t&&(t.classList.remove("e-pv-comments-hover"),t.classList.remove("e-pv-comments-select"),t.classList.add("e-pv-comments-leave"),e.currentTarget.nextSibling&&e.currentTarget.nextSibling.classList.contains("e-pv-new-comments-div"))){var i=document.getElementById(e.currentTarget.nextSibling.id);i.classList.remove("e-pv-comments-hover"),i.classList.remove("e-pv-comments-select"),i.classList.add("e-pv-comments-leave")}}(e)},e.prototype.drawIcons=function(e){cu.call(this,e)},e.prototype.addComments=function(e,t,i,n,o,s,a,r){Kp.call(this,e,t,i,n,o,s,a,r)},e.prototype.addPageRedactionComments=function(e){Qp.call(this,e)},e.prototype.findAnnotationObject=function(e){return Xc.call(this,e)},e.prototype.checkAnnotationSettings=function(e){return Gc.call(this,e)},e.prototype.updateCommentsContainerWidth=function(){Jc.call(this)},e.prototype.selectCommentsAnnotation=function(e){vc.call(this,e)},e.prototype.setAnnotationType=function(e,t,i){bc.call(this,e,t,i)},e.prototype.modifyTextProperty=function(e,t,i){return hc.call(this,e,t,i)},e.prototype.getDateAndTime=function(e){return wc.call(this,e)},e.prototype.parseDateString=function(e){return yc.call(this,e)},e.prototype.monthToNumber=function(e){return function(e){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(e.substring(0,3))}(e)},e.prototype.modifyStatusProperty=function(e,t){lc.call(this,e,t)},e.prototype.modifyCommentDeleteProperty=function(e,t){rc.call(this,e,t)},e.prototype.updateOpacityValue=function(e){tu.call(this,e)},e.prototype.undoAction=function(e,t,i){return iu.call(this,e,t,i)},e.prototype.redoAction=function(e,t,i){return nu.call(this,e,t,i)},e.prototype.updateUndoRedoCollections=function(e,t,i,n){zc.call(this,e,t,i,n)},e.prototype.addAnnotationComments=function(e,t){ou.call(this,e,t)},e.prototype.findPosition=function(e,t,i){su.call(this,e,t,i)},e.prototype.addInCollection=function(e,t){au.call(this,e,t)},e.prototype.getAnnotations=function(e,t,i){return Oc.call(this,e,t,i)},e.prototype.manageAnnotations=function(e,t,i){Yc.call(this,e,t,i)},e.prototype.updateStickyNotes=function(e,t){Hc.call(this,e,t)},e.prototype.saveStickyAnnotations=function(){return Uc.call(this)},e.prototype.deleteStickyNotesAnnotations=function(e,t){qc.call(this,e,t)},e.prototype.addStickyNotesAnnotations=function(e,t){Wc.call(this,e,t)},e.prototype.addTextToComments=function(e,t){mc.call(this,e,t)},e.prototype.updateAnnotationCollection=function(e,t,i){jc.call(this,e,t,i)},e.prototype.findAnnotationType=function(e){return function(e){return""!==e.measureType?"shape_measure":"StickyNotes"===e.shapeAnnotationType?"sticky":"Stamp"===e.shapeAnnotationType||"Image"===e.shapeAnnotationType?"stamp":"FreeText"===e.shapeAnnotationType?"freetext":"Ink"===e.shapeAnnotationType?"ink":"Redaction"===e.shapeAnnotationType?"redaction":"shape"}(e)},e.prototype.setExistingAnnotationModifiedDate=function(e){return fu(this,void 0,void 0,(function(){return mu(this,(function(t){switch(t.label){case 0:return[4,gc.call(this,e)];case 1:return[2,t.sent()]}}))}))},e.prototype.updateModifiedTime=function(e,t){return function(e,t){return e>=12?12===e?e+":"+t+" PM":e-12+":"+t+" PM":e+":"+t+" AM"}(e,t)},e.prototype.setModifiedDate=function(e){return fu(this,void 0,void 0,(function(){return mu(this,(function(t){switch(t.label){case 0:return[4,cc.call(this,e)];case 1:return[2,t.sent()]}}))}))},e.prototype.updateModifiedDate=function(e){return fu(this,void 0,void 0,(function(){return mu(this,(function(e){switch(e.label){case 0:return[4,pc.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.updateAnnotationModifiedDate=function(e,t,i){return fu(this,void 0,void 0,(function(){return mu(this,(function(n){switch(n.label){case 0:return[4,uc.call(this,e,t,i)];case 1:return n.sent(),[2]}}))}))},e.prototype.saveImportedStickyNotesAnnotations=function(e,t){$c.call(this,e,t)},e.prototype.updateStickyNotesAnnotationCollections=function(e,t){return Zc.call(this,e,t)},e.prototype.clear=function(){pu.call(this)},e.prototype.getModuleName=function(){return"StickyNotesAnnotation"},e.prototype.updateAddAnnotationDetails=function(e,t){return tc.call(this,e,t)},e.prototype.getAnnotationType=function(e){return function(e){var t;return"stamp"===e||"Stamp"===e?t="stamp":"shape"===e||"Line"===e||"Radius"===e||"Rectangle"===e||"Ellipse"===e||"Polygon"===e||"LineWidthArrowHead"===e||"Square"===e||"Circle"===e?t="shape":"textMarkup"===e?t="textMarkup":"freeText"===e||"FreeText"===e?t="freeText":"sticky"===e||"StickyNotes"===e?t="sticky":"measure"===e||"shape_measure"===e?t="measure":"ink"!==e&&"Ink"!==e||(t="ink"),t}(e)},e.prototype.addMouseDownOnCommentDiv=function(){return Ec.call(this)},e.prototype.keyboardClientBoundingRectMoreIcon=function(){return Mc.call(this)},e.prototype.keyboardClientBoundingRectMoreOptions=function(){return Tc.call(this)},e.prototype.enableEditorMode=function(){kc.call(this)},e.prototype.mouseDownOnCommentDiv=function(e){Dc.call(this,e)},e.prototype.onClickCommentTitle=function(e){Sc.call(this,e)},e.prototype.onBlurCommentsDiv=function(e){this.previouslyFocusedElement&&this.previouslyFocusedElement.classList.remove("e-focused")},e.prototype.onClickCommentsDiv=function(e){var t=document.activeElement;this.previouslyFocusedElement=t,this.isMouseClickEvent=!0},e.prototype.onFocusCommentsDiv=function(e){Pc.call(this,e)},e.prototype.onClickReplyTitle=function(e){Nc.call(this,e)},e.prototype.editReplyTextbox=function(e){this.pdfViewer._dotnetInstance.invokeMethodAsync("GetReplyCommentId",e.currentTarget.parentElement.id).catch((function(e){throw console.error("Unhandled Exception:",e),e}))},e.prototype.editReply=function(e){Ac.call(this,e)},e.prototype.modifyInCollection=function(e,t,i){return eu.call(this,e,t,i)},e.prototype.editComment=function(e){Fc.call(this,e)},e.prototype.clickOnCommentsContainer=function(e){Lc.call(this,e)},e.prototype.selectAnnotationFromComment=function(e,t){Cc.call(this,e,t)},e.prototype.getSelectedAnnotation=function(){return Ic.call(this)},e.prototype.addBorderForCommentsContainer=function(e){!function(e){for(var t=document.querySelectorAll(".e-pv-comments-container"),i=0;i<t.length;i++)t[i].id!==e.currentTarget.id?t[i].lastElementChild.style.display="none":t[i].lastElementChild.style.display="block";var n=document.querySelectorAll(".e-pv-comments-border");if(n)for(var o=0;o<n.length;o++)n[o].classList.remove("e-pv-comments-border");e.currentTarget.classList.add("e-pv-comments-border")}(e)},e.prototype.UpdateReplyContainerOnEdit=function(){for(var e=document.querySelectorAll(".e-editable-inline"),t=0;t<e.length;t++)e[t].style.display="none"},e.prototype.ResizeTextEditor=function(e){!function(e){var t=document.getElementById(e).querySelector("textarea");function i(){this.scrollHeight<=112?this.style.height=this.scrollHeight+"px":this.style.height="112px"}t&&(t.addEventListener("input",i),t.addEventListener("paste",(function(){setTimeout(i.bind(this),0)})),i.call(t))}(e)},e.prototype.OnCommentEditorOpen=function(e){!function(e){var t=document.getElementById(e).querySelector("input");t&&(t.addEventListener("focus",(function(){t.click()}),{once:!0}),t.focus())}(e)},e.prototype.ResizeTextEditorHeight=function(e){!function(e){var t=document.getElementById(e).querySelector("textarea");t&&(t.scrollHeight<=112?t.style.height=t.scrollHeight+"px":t.style.height="112px")}(e)},e.prototype.RemoveLastReply=function(e){ec.call(this,e)},e.prototype.UpdateCommentsCollectionInBlazor=function(e){Qc.call(this,e)},e.prototype.dynamicTextChange=function(e){return function(e){return"FreeText"===e.shapeAnnotationType&&e.note!==e.dynamicText}(e)},e.prototype.getAuthorName=function(e,t){return Kc.call(this,e,t)},e}(),wu=function(){function e(e,t){this.newObject=[],this.outputString="",this.inkAnnotationindex=[],this.isAddAnnotationProgramatically=!1,this.currentPageNumber="",this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.drawInk=function(){this.pdfViewerBase.disableTextSelectionMode(),this.pdfViewer.tool="Ink"},e.prototype.drawInkAnnotation=function(e){if(this.pdfViewerBase.isToolbarInkClicked){this.pdfViewerBase.isInkAdded=!0;var t=isNaN(e)?this.pdfViewerBase.currentPageNumber-1:e;if(this.outputString&&""!==this.outputString){var i=this.addInk(t);this.pdfViewer.renderDrawing(void 0,t),this.pdfViewer.clearSelection(t),this.pdfViewer.select([i.id],i.annotationSelectorSettings),this.pdfViewer.toolbar&&this.pdfViewer.toolbar.annotationToolbarModule&&this.pdfViewer.toolbar.annotationToolbarModule.enableSignaturePropertiesTools(!0)}else this.outputString="",this.newObject=[],this.pdfViewerBase.isToolbarInkClicked=!1,this.pdfViewer.tool="";this.pdfViewerBase.isInkAdded=!1}},e.prototype.storePathData=function(){this.convertToPath(this.newObject),this.newObject=[]},e.prototype.drawInkInCanvas=function(e,t){""!==this.currentPageNumber&&parseInt(this.currentPageNumber,10)!==t&&(this.drawInkAnnotation(parseInt(this.currentPageNumber,10)),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.tool="Ink");var i=this.pdfViewerBase.getZoomFactor(),n=this.pdfViewerBase.getWindowDevicePixelRatio(),o=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+t).getContext("2d"),s=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1,a=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1,r=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:"#ff0000";(!sf.base.Browser.isDevice||sf.base.Browser.isDevice&&i<=.7)&&o.setTransform(n,0,0,n,0,0),o.beginPath(),o.lineJoin="round",o.lineCap="round",o.moveTo(e.prevPosition.x,e.prevPosition.y),o.lineTo(e.currentPosition.x,e.currentPosition.y),o.lineWidth=s*i>1?s*i:s,o.strokeStyle=r,o.globalAlpha=a,o.stroke(),o.arc(e.prevPosition.x,e.prevPosition.y,1,0,2*Math.PI,!0),o.closePath(),this.pdfViewerBase.prevPosition=e.currentPosition,this.newObject.push(e.currentPosition.x,e.currentPosition.y),this.currentPageNumber=t.toString()},e.prototype.convertToPath=function(e){this.movePath(e[0],e[1]),this.linePath(e[0],e[1]);for(var t=2;t<e.length;t+=2)this.linePath(e[t],e[t+1])},e.prototype.linePath=function(e,t){this.outputString+="L"+e+","+t+" "},e.prototype.movePath=function(e,t){this.outputString+="M"+e+","+t+" "},e.prototype.addInk=function(e){var t,i=this.calculateInkSize();this.pdfViewerBase.getZoomFactor();if(this.pdfViewerBase.isToolbarInkClicked){var n=this.pdfViewer.annotation.createGUID(),o=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),s=isNaN(e)?this.pdfViewerBase.currentPageNumber-1:e,a=this.pdfViewer.inkAnnotationSettings.thickness?this.pdfViewer.inkAnnotationSettings.thickness:1,r=this.pdfViewer.inkAnnotationSettings.opacity?this.pdfViewer.inkAnnotationSettings.opacity:1,l=this.pdfViewer.inkAnnotationSettings.strokeColor?this.pdfViewer.inkAnnotationSettings.strokeColor:"#ff0000",d=this.pdfViewer.inkAnnotationSettings.isLock?this.pdfViewer.inkAnnotationSettings.isLock:this.pdfViewer.annotationSettings.isLock,h="Guest"!==this.pdfViewer.annotationSettings.author?this.pdfViewer.annotationSettings.author:this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:"Guest",p=this.pdfViewer.inkAnnotationSettings.customData,c=this.pdfViewer.inkAnnotationSettings.isPrint,u=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions,f=this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;(t={id:"ink"+this.pdfViewerBase.inkCount,bounds:{x:i.x,y:i.y,width:i.width,height:i.height},pageIndex:s,data:this.outputString,customData:p,shapeAnnotationType:"Ink",type:"Ink",opacity:r,strokeColor:l,thickness:a,annotName:n,comments:[],author:h,subject:"Ink",notes:"",review:{state:"",stateModel:"",modifiedDate:o,author:h},annotationSelectorSettings:this.getSelector("Ink",""),modifiedDate:o,annotationSettings:f,isPrint:c,allowedInteractions:u,isCommentLock:!1,isLocked:d})&&((u=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(t))&&(t.allowedInteractions=u),t.annotationSettings&&!sf.base.isNullOrUndefined(t.annotationSettings.isLock)&&(t.annotationSettings.isLock=t.annotationSettings.isLock?t.annotationSettings.isLock:!!this.pdfViewer.annotationSettings.isLock&&this.pdfViewer.annotationSettings.isLock));var m=this.pdfViewer.add(t),g={x:t.bounds.x,y:t.bounds.y,left:t.bounds.x,top:t.bounds.y,width:t.bounds.width,height:t.bounds.height},w={opacity:t.opacity,strokeColor:t.strokeColor,thickness:t.thickness,modifiedDate:t.modifiedDate,width:t.bounds.width,height:t.bounds.height,data:this.outputString,isLocked:t.isLocked};this.pdfViewerBase.inkCount++,this.pdfViewer.annotation.stickyNotesAnnotationModule.addComments("ink",t.pageIndex+1,t.shapeAnnotationType,n,"",null,h),t.annotName=n,this.pdfViewer.annotation.addAction(s,null,m,"Addition","",m,m),this.pdfViewer.annotationModule.storeAnnotations(s,t,"_annotations_ink"),this.pdfViewer.fireAnnotationAdd(t.pageIndex,t.annotName,"Ink",g,w),this.pdfViewerBase.isInkAdded&&(this.outputString="",this.newObject=[]),this.pdfViewerBase.isToolbarInkClicked=!1,this.pdfViewer.tool=""}return t},e.prototype.setAnnotationMode=function(){this.pdfViewerBase.isToolbarInkClicked?this.drawInkAnnotation():(this.pdfViewerBase.isToolbarInkClicked=!0,this.drawInk())},e.prototype.saveInkSignature=function(){for(var e=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink"),t=[],i=0;i<this.pdfViewerBase.pageCount;i++)t[i]=[];if(e)for(var n=JSON.parse(e),o=0;o<n.length;o++){var s=[],a=n[o];if(a){for(var r=0;a.annotations.length>r;r++){this.pdfViewer.annotationModule.updateModifiedDate(a.annotations[r]);var l=a.annotations[r].strokeColor;a.annotations[r].strokeColor=JSON.stringify(this.pdfViewerBase.signatureModule.getRgbCode(l)),a.annotations[r].bounds=JSON.stringify(this.pdfViewer.annotation.getInkBounds(a.annotations[r].bounds,a.pageIndex));var d=sf.drawings.processPathData(a.annotations[r].data),h=sf.drawings.splitArrayCollection(d);a.annotations[r].data=JSON.stringify(h)}s=a.annotations}t[a.pageIndex]=s}return JSON.stringify(t)},e.prototype.addInCollection=function(e,t){if(t){var i=this.getAnnotations(e,null);i&&i.push(t),this.manageInkAnnotations(i,e)}},e.prototype.calculateInkSize=function(){for(var e=-1,t=-1,i=-1,n=-1,o=sf.drawings.processPathData(this.outputString),s=this.pdfViewerBase.getZoomFactor(),a=0;a<o.length;a++){var r=o[a];if(-1===e)e=r.x,i=r.x,t=r.y,n=r.y;else{var l=r.x,d=r.y;e>=l&&(e=l),t>=d&&(t=d),i<=l&&(i=l),n<=d&&(n=d)}}return{x:e/s,y:t/s,width:(i-e)/s,height:(n-t)/s}},e.prototype.renderExistingInkSignature=function(e,t,i,o){var s,a,r=!1;if(!i)for(var l=0;l<this.inkAnnotationindex.length;l++)if(this.inkAnnotationindex[l]===t){r=!0;break}if(e&&!r){e.length>0&&-1===this.inkAnnotationindex.indexOf(t)&&this.inkAnnotationindex.push(t);for(var d=0;d<e.length;d++){var h=e[d];if(h){var p=h.PathData;i&&p&&("object"===n(p)&&p.length>1?p=sf.drawings.getPathString(p):h.IsPathData||p.split("command").length<=1||(p=sf.drawings.getPathString(JSON.parse(p)))),this.outputString=p;var c=this.calculateInkSize();this.outputString="";var u=0,f=1,m=h.Bounds;c&&(c.height<1?(u=sf.base.isNullOrUndefined(m.Height)?m.height:m.Height,f=sf.base.isNullOrUndefined(m.Height)?m.height:m.Height):c.width<1&&(u=sf.base.isNullOrUndefined(m.Width)?m.width:m.Width,f=sf.base.isNullOrUndefined(m.Width)?m.width:m.Width));var g=sf.base.isNullOrUndefined(m.X)?m.x+u/2:m.X+u/2,w=sf.base.isNullOrUndefined(m.Y)?m.y+u/2:m.Y+u/2,y=sf.base.isNullOrUndefined(m.Width)?m.width-(f-1):m.Width-(f-1),v=sf.base.isNullOrUndefined(m.Height)?m.height-(f-1):m.Height-(f-1),b=h.AnnotationSettings?h.AnnotationSettings.isLock:this.pdfViewer.annotationSettings.isLock,S=h.AnnotationSelectorSettings?h.AnnotationSelectorSettings:this.getSelector(h,"Ink"),A=this.pdfViewer.annotation.getCustomData(h),x=!0;x=h.AnnotationSettings?h.AnnotationSettings.isPrint:this.pdfViewer.inkAnnotationSettings.isPrint,x=sf.base.isNullOrUndefined(h.IsPrint)?sf.base.isNullOrUndefined(h.isPrint)?x:h.isPrint:h.IsPrint,b=sf.base.isNullOrUndefined(h.IsLocked)?sf.base.isNullOrUndefined(h.isLocked)?b:h.isLocked:h.IsLocked,"Highlight"===h.Subject&&1===h.Opacity&&(h.Opacity=h.Opacity/2),h.allowedInteractions=h.AllowedInteractions?h.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(h),h.AnnotationSettings=h.AnnotationSettings?h.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(h),b&&!sf.base.isNullOrUndefined(h.AnnotationSettings)&&(h.AnnotationSettings.isLock=b),s={id:"ink"+this.pdfViewerBase.inkCount,bounds:{x:g,y:w,width:y,height:v},pageIndex:t,data:p,shapeAnnotationType:"Ink",opacity:h.Opacity,strokeColor:h.StrokeColor,thickness:h.Thickness,annotName:h.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(h.Comments,h,h.Author),author:h.Author,allowedInteractions:h.allowedInteractions,subject:h.Subject,modifiedDate:h.ModifiedDate,review:{state:h.State,stateModel:h.StateModel,modifiedDate:h.ModifiedDate,author:h.Author},notes:h.Note,annotationSettings:h.AnnotationSettings,annotationSelectorSettings:S,customData:A,isPrint:x,isLocked:b,isCommentLock:h.IsCommentLock},this.pdfViewer.add(s),a={id:"ink"+this.pdfViewerBase.inkCount,bounds:{x:g,y:w,width:y,height:v},pageIndex:t,data:p,shapeAnnotationType:"Ink",opacity:h.Opacity,strokeColor:h.StrokeColor,thickness:h.Thickness,annotName:h.AnnotName,comments:this.pdfViewer.annotationModule.getAnnotationComments(h.Comments,h,h.Author),author:h.Author,allowedInteractions:h.allowedInteractions,subject:h.Subject,modifiedDate:h.ModifiedDate,review:{state:h.State,stateModel:h.StateModel,modifiedDate:h.ModifiedDate,author:h.Author},note:h.Note,annotationSettings:h.AnnotationSettings,annotationSelectorSettings:S,customData:A,isPrint:x,isLocked:b,isLock:b,isCommentLock:h.IsCommentLock};var V=sf.base.isNullOrUndefined(o)?document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+h.pageIndex):o;if(this.pdfViewer.renderDrawing(V,s.pageIndex),this.pdfViewer.annotationModule.storeAnnotations(s.pageIndex,a,"_annotations_ink"),this.isAddAnnotationProgramatically){var C={opacity:s.opacity,strokeColor:s.strokeColor,thickness:s.thickness,modifiedDate:s.modifiedDate,width:s.bounds.width,height:s.bounds.height,data:this.outputString};m.left=m.x,m.top=m.y,this.pdfViewer.fireAnnotationAdd(s.pageIndex,s.annotName,"Ink",m,C)}this.pdfViewerBase.currentSignatureAnnot=null,this.pdfViewerBase.signatureCount++,this.pdfViewerBase.inkCount++,this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.annotationMenuObj&&this.pdfViewer.isSignatureEditable&&(this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export Annotations")],!0),this.pdfViewerBase.navigationPane.annotationMenuObj.enableItems([this.pdfViewer.localeObj.getConstant("Export XFDF")],!0))}}}},e.prototype.storeInkSignatureData=function(e,t){this.pdfViewer.annotation.addAction(t.pageIndex,null,t,"Addition","",t,t);var i,n=t.bounds.left?t.bounds.left:t.bounds.x,o=t.bounds.top?t.bounds.top:t.bounds.y;t.wrapper&&t.wrapper.bounds&&(n=t.wrapper.bounds.left,o=t.wrapper.bounds.top),i={id:t.id,bounds:{x:n,y:o,width:t.bounds.width,height:t.bounds.height},shapeAnnotationType:"Ink",opacity:t.opacity,thickness:t.thickness,strokeColor:t.strokeColor,pageIndex:t.pageIndex,data:t.data,annotName:t.annotName,comments:t.comments,author:t.author,subject:t.subject,modifiedDate:t.modifiedDate,review:{state:"",stateModel:"",modifiedDate:t.modifiedDate,author:t.author},notes:t.notes,annotationSelectorSettings:this.getSelector(t,"Ink"),isCommentLock:t.isCommentLock};var s=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(s){var a=JSON.parse(s);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_ink");var r=this.pdfViewer.annotationModule.getPageCollection(a,e);if(a[r])a[r].annotations.push(i),a[r].annotations.indexOf(i);else{var l={pageIndex:e,annotations:[]};l.annotations.push(i),l.annotations.indexOf(i),a.push(l)}p=JSON.stringify(a);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",p)}else{var d={pageIndex:e,annotations:[]};d.annotations.push(i),d.annotations.indexOf(i);var h=[];h.push(d);var p=JSON.stringify(h);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",p)}},e.prototype.getSelector=function(e,t){var i=this.pdfViewer.annotationSelectorSettings;return"Ink"===e&&this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings&&(i=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings),i},e.prototype.getAnnotations=function(e,t){var i,n=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(n){var o=JSON.parse(n),s=this.pdfViewer.annotationModule.getPageCollection(o,e);i=o[s]?o[s].annotations:t}else i=t;return i},e.prototype.modifySignatureInkCollection=function(e,t,i){this.pdfViewerBase.updateDocumentEditedProperty(!0);var n=null,o=this.getAnnotations(t,null);if(null!=o&&i){for(var s=0;s<o.length;s++)if(i.id===o[s].id){if("bounds"===e)o[s].bounds={x:i.wrapper.bounds.left,y:i.wrapper.bounds.top,width:i.bounds.width,height:i.bounds.height};else if("stroke"===e)o[s].strokeColor=i.wrapper.children[0].style.strokeColor;else if("opacity"===e)o[s].opacity=i.wrapper.children[0].style.opacity;else if("thickness"===e)o[s].thickness=i.wrapper.children[0].style.strokeWidth;else if("notes"===e)o[s].notes=i.notes;else{if("delete"===e){n=o.splice(s,1)[0];break}"isLock"===e?(o[s].annotationSettings&&(o[s].annotationSettings.isLock=i.isLock),o[s].isLock=i.isLock,o[s].isLocked=i.isLock):"allowedInteractions"===e?o[s].allowedInteractions=i.allowedInteractions:"isPrint"===e&&(o[s].annotationSettings&&(o[s].annotationSettings.isPrint=i.isPrint),o[s].isPrint=i.isPrint)}this.pdfViewerBase.isUpdateProgrammatically||(o[s].modifiedDate=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime()),this.pdfViewer.annotationModule.storeAnnotationCollections(o[s],t)}this.manageInkAnnotations(o,t)}return n},e.prototype.manageInkAnnotations=function(e,t){var i=window.sessionStorage.getItem(this.pdfViewerBase.documentId+"_annotations_ink");if(i){var n=JSON.parse(i);window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_annotations_ink");var o=this.pdfViewer.annotationModule.getPageCollection(n,t);n[o]&&(n[o].annotations=e);var s=JSON.stringify(n);window.sessionStorage.setItem(this.pdfViewerBase.documentId+"_annotations_ink",s)}},e.prototype.saveImportedInkAnnotation=function(e,t){var i,o=e.Bounds,s={x:o.X,y:o.Y,width:o.Width,height:o.Height},a=this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),r=this.pdfViewer.annotation.getCustomData(e),l=this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),d={state:e.State,stateModel:e.StateModel,modifiedDate:e.ModifiedDate,author:e.Author},h=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.annotationModule.updateAnnotationSettings(e),p=this.getSettings(e),c=e.PathData;"object"===n(c)&&c.length>1?c=sf.drawings.getPathString(c):!e.IsPathData&&c.split("command").length>1&&(c=sf.drawings.getPathString(JSON.parse(c))),i={allowedInteractions:a,annotName:e.AnnotName,annotationSelectorSettings:p,annotationSettings:h,author:e.Author,bounds:s,customData:r,comments:l,data:c,id:"Ink",isCommentLock:e.IsCommentLock,isLocked:e.IsLocked,isPrint:e.IsPrint,modifiedDate:e.ModifiedDate,note:e.Note,opacity:e.Opacity,pageIndex:t,review:d,shapeAnnotationType:e.AnnotationType,strokeColor:e.StrokeColor,subject:e.Subject,thickness:e.Thickness},this.pdfViewer.annotationModule.storeAnnotations(t,i,"_annotations_ink")},e.prototype.getSettings=function(e){this.pdfViewer.annotationSelectorSettings;return e.AnnotationSelectorSettings?e.AnnotationSelectorSettings:this.getSelector(e.ShapeAnnotationType,e.Subject)},e.prototype.updateInkCollections=function(e,t,i){if(e){var n=e.Bounds,o=n.X,s=n.Y,a=n.Width,r=n.Height,l=e.customData,d=e.IsPrint,h=e.AllowedInteractions?e.AllowedInteractions:this.pdfViewer.annotationModule.updateAnnotationAllowedInteractions(e),p=e.AnnotationSettings?e.AnnotationSettings:this.pdfViewer.inkAnnotationSettings?this.pdfViewer.inkAnnotationSettings:this.pdfViewer.annotationSettings;e.IsLocked&&(p.isLock=e.IsLocked);var c=e.PathData;return i&&(c=sf.drawings.getPathString(JSON.parse(e.PathData))),{id:"ink"+this.pdfViewerBase.signatureCount,bounds:{x:o,y:s,width:a,height:r},pageIndex:t,pageNumber:t,data:c,shapeAnnotationType:"Ink",opacity:e.Opacity,strokeColor:e.StrokeColor,thickness:e.Thickness,annotationId:e.AnnotName,customData:l,comments:this.pdfViewer.annotationModule.getAnnotationComments(e.Comments,e,e.Author),author:e.Author,allowedInteractions:h,subject:e.Subject,modifiedDate:e.ModifiedDate,review:{state:"",stateModel:"",modifiedDate:e.ModifiedDate,author:e.Author},notes:e.Note,isPrint:d,isCommentLock:e.IsCommentLock,annotationSettings:p,isLocked:p.isLock}}},e.prototype.updateAddAnnotationDetails=function(e,t,i){e?e.bound?(t.x=e.bound.x?e.bound.x:10,t.y=e.bound.y?e.bound.y:10):(t.x=10,t.y=10):t=(e={offset:{x:10,y:10},pageNumber:0,width:void 0,height:void 0}).offset;var n,o,s,a,r,l,d=this.pdfViewer.annotation.stickyNotesAnnotationModule.getDateAndTime(),h=this.pdfViewer.annotation.createGUID(),p=this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings?this.pdfViewer.inkAnnotationSettings.annotationSelectorSettings:this.pdfViewer.annotationSelectorSettings,c=this.pdfViewer.annotationModule.updateSettings(this.pdfViewer.inkAnnotationSettings),u=this.pdfViewer.inkAnnotationSettings.allowedInteractions?this.pdfViewer.inkAnnotationSettings.allowedInteractions:this.pdfViewer.annotationSettings.allowedInteractions;n=e.author?e.author:this.pdfViewer.inkAnnotationSettings.author?this.pdfViewer.inkAnnotationSettings.author:"Guest",o=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.opacity)?1:this.pdfViewer.inkAnnotationSettings.opacity,a=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.thickness)?1:this.pdfViewer.inkAnnotationSettings.thickness,s=sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.strokeColor)?"#ff0000":this.pdfViewer.inkAnnotationSettings.strokeColor,r=!!sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.isPrint)||this.pdfViewer.inkAnnotationSettings.isPrint,l=!sf.base.isNullOrUndefined(this.pdfViewer.inkAnnotationSettings.isLock)&&this.pdfViewer.inkAnnotationSettings.isLock,c.isLock=!!e.isLock&&e.isLock,e.width=e.width?e.width:e.bound&&e.bound.width?e.bound.width:150,e.height=e.height?e.height:e.bound&&e.bound.height?e.bound.height:60;var f=e.data?e.data:"";f.startsWith("[")?e.data=sf.drawings.getPathString(JSON.parse(f)):e.data=f;var m=[],g={AllowedInteractions:e.allowedInteractions?e.allowedInteractions:u,AnnotName:e.Id?e.Id:h,AnnotType:"ink",AnnotationFlags:null,AnnotationSelectorSettings:e.annotationSelectorSettings?e.annotationSelectorSettings:p,AnnotationSettings:c,AnnotationType:"Ink",Author:n,Bounds:{X:t.x,Y:t.y,Width:e.width,Height:e.height,Left:t.x,Top:t.y,Location:{X:t.x,Y:t.y},Size:{Height:e.height,IsEmpty:!1,Width:e.width}},Comments:e.comments?this.pdfViewer.annotation.updateAnnotationCommentsDetails(e.comments,e,n):[],CreatedDate:d,CustomData:e.customData?e.customData:null,ExistingCustomData:null,IsCommentLock:!1,IsLocked:sf.base.isNullOrUndefined(e.isLock)?l:e.isLock,IsPrint:sf.base.isNullOrUndefined(e.isPrint)?r:e.isPrint,ModifiedDate:e.modifiedDate?e.modifiedDate:d,Note:e.note?e.note:"",Opacity:sf.base.isNullOrUndefined(e.opacity)?o:e.opacity,PathData:e.data,PageNumber:i,State:e.review?e.review.state:"",StateModel:e.review?e.review.stateModel:"Review",StrokeColor:e.strokeColor?e.strokeColor:s,SubType:null,Subject:"Ink",Type:null,Thickness:sf.base.isNullOrUndefined(e.thickness)?a:e.thickness};return m[0]=g,{signatureInkAnnotation:m}},e}(),yu=function(){function e(e,t){this.zoomFactor=1,this.previousZoomFactor=1,this.scrollWidth=25,this.zoomPercentages=[10,25,50,75,100,125,150,200,400],this.isNotPredefinedZoom=!1,this.pinchStep=0,this.reRenderPageNumber=0,this.magnifyPageRerenderTimer=null,this.rerenderOnScrollTimer=null,this.rerenderInterval=null,this.touchCenterX=0,this.touchCenterY=0,this.mouseCenterX=0,this.mouseCenterY=0,this.pageRerenderCount=0,this.imageObjects=[],this.topValue=0,this.isTapToFitZoom=!1,this.fitType=null,this.isPinchZoomed=!1,this.isPagePinchZoomed=!1,this.isRerenderCanvasCreated=!1,this.isMagnified=!1,this.isPagesZoomed=!1,this.isPinchScrolled=!1,this.isAutoZoom=!1,this.isDoubleTapZoom=!1,this.isFormFieldPageZoomed=!1,this.isInitialCustomZoomValues=!0,this.isWebkitMobile=!1,this.isFitToPageMode=!1,this.pdfViewer=e,this.pdfViewerBase=t,this.zoomLevel=2,this.isWebkitMobile=e.checkIsWebkitMoblie()}return e.prototype.zoomFitTypeReset=function(){this.fitType=null,this.isFitToPageMode=!1},e.prototype.zoomTo=function(e){var t=sf.base.isNullOrUndefined(this.pdfViewer.minZoomValue)?10:this.pdfViewer.minZoomValue,i=sf.base.isNullOrUndefined(this.pdfViewer.maxZoomValue)?400:this.pdfViewer.maxZoomValue;if(t>i){var n=i;i=t,t=n}e<t?e=t:e>i&&(e=i),this.zoomFitTypeReset(),this.isNotPredefinedZoom=!1,this.isAutoZoom&&this.isInitialLoading?this.pdfViewerBase.onWindowResize():(this.isAutoZoom=!1,this.onZoomChanged(e)),this.isInitialLoading=!1},e.prototype.zoomIn=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.lowerZoomLevel,this.fitType=null),this.zoomFitTypeReset(),this.isNotPredefinedZoom=!1;var e=this.pdfViewer.customZoomValues.length,t=this.zoomLevel;t>=e?t=e:t++,this.zoomLevel=t,this.isAutoZoom=!1,100*this.zoomFactor<this.pdfViewer.minZoomValue&&(this.zoomLevel=0),this.onZoomChanged(this.pdfViewer.customZoomValues[this.zoomLevel])},e.prototype.zoomOut=function(){(this.fitType||this.isNotPredefinedZoom)&&(this.zoomLevel=this.higherZoomLevel,this.fitType=null),this.zoomFitTypeReset(),this.isNotPredefinedZoom=!1,this.zoomLevel<=0?this.zoomLevel=0:this.pdfViewer.customZoomValues[this.zoomLevel]<100*this.zoomFactor||this.zoomLevel--,this.isAutoZoom=!1,100*this.zoomFactor>this.pdfViewer.maxZoomValue&&(this.zoomLevel=this.pdfViewer.customZoomValues.length-1),this.onZoomChanged(this.pdfViewer.customZoomValues[this.zoomLevel])},e.prototype.fitToWidth=function(){this.isAutoZoom=!1,this.zoomFitTypeReset(),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?this.isWebkitMobile?this.pdfViewerBase.viewerContainer.style.overflowY="auto":this.pdfViewerBase.viewerContainer.style.overflowY="hidden":(this.pdfViewerBase.viewerContainer.style.overflowX="hidden",this.pdfViewerBase.viewerContainer.style.overflowY="auto");var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},e.prototype.fitToAuto=function(){this.isAutoZoom=!0,this.zoomFitTypeReset();var e=this.calculateFitZoomFactor("fitToWidth");this.onZoomChanged(e)},e.prototype.fitToPage=function(){var e=this.calculateFitZoomFactor("fitToPage");null!==e&&(this.isAutoZoom=!1,this.onZoomChanged(e),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?this.isWebkitMobile?this.pdfViewerBase.viewerContainer.style.overflowY="auto":this.pdfViewerBase.viewerContainer.style.overflowY="hidden":(this.pdfViewerBase.viewerContainer.style.overflowX="hidden",this.pdfViewerBase.viewerContainer.style.overflowY="auto"),this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1]&&(this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top*this.zoomFactor))},e.prototype.fitToHeight=function(){var e=this.pdfViewerBase.viewerContainer.getBoundingClientRect().width;if(this.pdfViewerBase.pageSize.length>0){var t=this.pdfViewerBase.pageSize[0].width;this.zoomFitTypeReset();var i=this.calculateFitZoomFactor("fitToHeight");null!==i&&(this.isAutoZoom=!1,this.onZoomChanged(i),this.pdfViewerBase.viewerContainer.style.overflowX=e>t?"hidden":"auto",sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?this.pdfViewerBase.isWebkitMobile?this.pdfViewerBase.viewerContainer.style.overflowY="auto":this.pdfViewerBase.viewerContainer.style.overflowY="hidden":this.pdfViewerBase.viewerContainer.style.overflowY="auto",this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1]&&(this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top*this.zoomFactor))}},e.prototype.calculateFitZoomFactor=function(e){var t=this.pdfViewerBase.viewerContainer,i=t.getBoundingClientRect().width,n=t.getBoundingClientRect().height;if(0===i&&0===n&&(i=parseFloat(this.pdfViewer.width.toString()),n=parseFloat(this.pdfViewer.height.toString())),isNaN(n)||isNaN(i))return null;if(this.fitType=e,this.pdfViewerBase.pageLeft=0,"fitToWidth"===this.fitType){var o=(i-(t.offsetWidth-t.clientWidth))/this.pdfViewerBase.highestWidth;if(this.isAutoZoom){this.pdfViewerBase.pageLeft=5,this.fitType=null;var s=(i-this.scrollWidth)/this.pdfViewerBase.highestWidth;return 1===(s=Math.min(1,s))&&(this.zoomLevel=2),parseInt((100*s).toString(),10)}return parseInt(Math.round(100*o).toString(),10)}if("fitToHeight"===this.fitType){var a=0;return a=!this.pdfViewerBase.pageSize||1!==this.pdfViewerBase.pageSize.length||sf.base.isNullOrUndefined(this.pdfViewerBase.pageSize[0].top)||this.isPinchZoomed?n/this.pdfViewerBase.highestHeight:(n-this.pdfViewerBase.pageSize[0].top)/this.pdfViewerBase.highestHeight,parseInt((100*a).toString(),10)}this.isFitToPageMode=!0;o=i/this.pdfViewerBase.highestWidth,a=0;return(a=!this.pdfViewerBase.pageSize||1!==this.pdfViewerBase.pageSize.length||sf.base.isNullOrUndefined(this.pdfViewerBase.pageSize[0].top)||this.isPinchZoomed?n/this.pdfViewerBase.highestHeight:(n-this.pdfViewerBase.pageSize[0].top)/this.pdfViewerBase.highestHeight)>o&&(a=o,this.isFitToPageMode=!1),parseInt((100*a).toString(),10)},e.prototype.initiateMouseZoom=function(e,t,i){var n=this.positionInViewer(e,t);this.mouseCenterX=n.x,this.mouseCenterY=n.y,this.zoomTo(i)},e.prototype.pinchIn=function(){this.fitType=null;var e=this.zoomFactor-this.pinchStep;e<4&&e>2&&(e=this.zoomFactor-this.pinchStep),e<=1.5&&(e=this.zoomFactor-this.pinchStep/1.5),null!=this.pdfViewer.minZoomValue&&e<this.pdfViewer.minZoomValue/100&&(e=this.pdfViewer.minZoomValue/100),this.isPinchZoomed=!0,this.onZoomChanged(100*e),this.isTapToFitZoom=!0},e.prototype.pinchOut=function(){this.fitType=null;var e=this.zoomFactor+this.pinchStep;sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||e>2&&(e+=this.pinchStep),null!=this.pdfViewer.maxZoomValue&&e>this.pdfViewer.maxZoomValue/100&&(e=this.pdfViewer.maxZoomValue/100),this.isTapToFitZoom=!0,this.isPinchZoomed=!0,this.onZoomChanged(100*e)},e.prototype.getZoomLevel=function(e){if(null!=this.pdfViewer.minZoomValue||null!=this.pdfViewer.maxZoomValue){for(var t=0,i=this.pdfViewer.customZoomValues,n=i.length-1;t<=n;){if((o=Math.floor((t+n)/2))>=0&&o<i.length){if(i[o]===e)return o;i[o]<e?t=o+1:n=o-1}}return this.higherZoomLevel=t,this.lowerZoomLevel=n,n}for(t=0,n=this.zoomPercentages.length-1;t<=n&&(0!==t||0!==n);){var o;(o=Math.round((t+n)/2))>=0&&o<this.zoomPercentages.length&&(this.zoomPercentages[o]<=e?t=o+1:this.zoomPercentages[o]>=e&&(n=o-1))}return this.higherZoomLevel=t,this.lowerZoomLevel=n,n},e.prototype.checkZoomFactor=function(){return this.zoomPercentages.indexOf(100*this.zoomFactor)>-1},e.prototype.onZoomChanged=function(e){if(e){if(this.isInitialCustomZoomValues&&this.pdfViewer.getCustomZoomValues(),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.closePopupMenu(),this.previousZoomFactor=this.zoomFactor,this.zoomLevel=this.getZoomLevel(e),this.zoomFactor=this.getZoomFactor(e),this.pdfViewerBase.viewerContainer){var t=100*(this.pdfViewerBase.viewerContainer.getBoundingClientRect().width/this.pdfViewerBase.highestWidth);this.pdfViewerBase.viewerContainer.style.overflowX=e>t?"auto":"hidden"}if(this.zoomFactor<=.25?this.pdfViewerBase.isMinimumZoom=!0:this.pdfViewerBase.isMinimumZoom=!1,sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?this.isWebkitMobile?this.pdfViewerBase.viewerContainer.style.overflowY="auto":this.pdfViewerBase.viewerContainer.style.overflowY="hidden":this.pdfViewerBase.viewerContainer.style.overflowY="auto",this.pdfViewerBase.pageCount>0&&(this.previousZoomFactor!==this.zoomFactor&&(this.isPinchZoomed?(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobilePageNoContainer.style.left=this.pdfViewer.element.clientWidth/2-parseFloat(this.pdfViewerBase.mobilePageNoContainer.style.width)/2+"px"),this.responsivePages()):this.magnifyPages()),this.isInitialLoading||this.previousZoomFactor!==this.zoomFactor&&(this.pdfViewer.zoomValue=parseInt((100*this.zoomFactor).toString(),10),this.pdfViewer.updatePdfViewerOptions("ZoomValue",this.pdfViewer.zoomValue),this.pdfViewer.fireZoomChange())),this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.updateZoomPercentage(this.zoomFactor),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.isPinchZoomed){var i=parseInt((100*this.zoomFactor).toString(),10)+"%",n=document.getElementById(this.pdfViewer.dataId+"_container_tooltip").firstElementChild;this.pdfViewerBase.navigationPane.isTostCreated&&!n||this.pdfViewerBase.navigationPane.createTooltipMobile(i)}}},e.prototype.setTouchPoints=function(e,t){var i=this.positionInViewer(e,t);this.touchCenterX=i.x,this.touchCenterY=i.y},e.prototype.initiatePinchMove=function(e,t,i,n){this.isPinchScrolled=!1,this.isMagnified=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber;var o=this.positionInViewer((e+i)/2,(t+n)/2);this.touchCenterX=o.x,this.touchCenterY=o.y,this.zoomOverPages(e,t,i,n)},e.prototype.magnifyPages=function(){this.clearRerenderTimer(),this.isPagesZoomed||(this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber),this.pdfViewerBase.documentLoaded||this.pdfViewerBase.isInitialPageMode||(this.isPagesZoomed=!0);var e=this.pdfViewerBase.viewerContainer.scrollTop;this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.maintainSelectionOnZoom(!1,!0),this.isInitialLoading||(this.isMagnified=!0),this.updatePageLocation(),this.resizeCanvas(this.reRenderPageNumber),this.calculateScrollValuesOnMouse(e),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.resizeTouchElements();var t=this.pdfViewer.annotationModule;if(t&&t.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.updateCurrentResizerPosition(),this.pdfViewerBase.pageSize.length>0){this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.getPageHeight(0)+"px";var i=this;this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewerBase.documentLoaded||(this.magnifyPageRerenderTimer=setTimeout((function(){i.rerenderMagnifiedPages()}),800))}},e.prototype.updatePageLocation=function(){this.topValue=0;for(var e=1;e<this.pdfViewerBase.pageSize.length;e++)this.topValue+=(this.pdfViewerBase.pageSize[e].height+this.pdfViewerBase.pageGap)*this.zoomFactor;var t;t=this.pdfViewer.overscanCount>10?this.pdfViewer.overscanCount<=this.pdfViewerBase.pageCount?this.pdfViewer.overscanCount:this.pdfViewerBase.pageCount:this.pdfViewerBase.pageCount<10?this.pdfViewerBase.pageCount:10;for(e=0;e<t;e++)this.updatePageContainer(e,this.pdfViewerBase.getPageWidth(e),this.pdfViewerBase.getPageHeight(e),this.pdfViewerBase.getPageTop(e),!0)},e.prototype.updatePageContainer=function(e,t,i,n,o){var s=this.pdfViewerBase.getElement("_pageDiv_"+e);if(s){s.style.width=t+"px",s.style.height=i+"px";var a=this.pdfViewerBase.getElement("_textLayer_"+e);a&&(a.style.width=t+"px",a.style.height=i+"px"),s.style.width=t+"px",s.style.height=i+"px",this.pdfViewer.enableRtl?s.style.right=this.pdfViewerBase.updateLeftPosition(e)+"px":s.style.left=this.pdfViewerBase.updateLeftPosition(e)+"px",s.style.top=n+"px",this.pdfViewerBase.pageContainer.style.width=this.pdfViewerBase.viewerContainer.clientWidth+"px",this.pdfViewerBase.renderPageCanvas(s,t,i,e,"block")}},e.prototype.clearRerenderTimer=function(){clearTimeout(this.rerenderOnScrollTimer),clearTimeout(this.magnifyPageRerenderTimer),this.clearIntervalTimer(),this.isPinchScrolled=!1},e.prototype.clearIntervalTimer=function(){clearInterval(this.rerenderInterval),this.rerenderInterval=null,this.clearRendering();for(var e=document.querySelectorAll('canvas[id*="'+this.pdfViewer.dataId+'_oldCanvas_"]'),t=0;t<e.length;t++){var i=parseInt(e[t].id.split("_oldCanvas_")[1],10),n=this.pdfViewerBase.getElement("_pageCanvas_"+i);n?(e[t].id=n.id,n.parentElement.removeChild(n)):e[t].id=this.pdfViewer.dataId+"_pageCanvas_"+i,this.pdfViewerBase.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(t)}this.isRerenderCanvasCreated=!1},e.prototype.pushImageObjects=function(e){this.imageObjects.push(e)},e.prototype.clearRendering=function(){if(this.imageObjects){for(var e=0;e<this.imageObjects.length;e++)this.imageObjects[e]&&(this.imageObjects[e].onload=null);this.imageObjects=[]}},e.prototype.rerenderMagnifiedPages=function(){!this.pdfViewerBase.isInitialLoaded&&!this.pdfViewerBase.isDocumentLoaded||this.pdfViewerBase.isInitialPageMode?this.pdfViewerBase.isInitialPageMode&&(this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.pdfViewerBase.isInitialPageMode=!1):(this.renderInSeparateThread(this.reRenderPageNumber),this.isPagesZoomed=!1)},e.prototype.renderInSeparateThread=function(e){var t=this;this.designNewCanvas(e),this.pageRerenderCount=0,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.isMagnified=!1,this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber);var i=this;this.rerenderInterval=setInterval((function(){t.initiateRerender(i)}),1)},e.prototype.responsivePages=function(){this.isPagesZoomed=!0,this.clearRerenderTimer(),this.pdfViewer.textSelectionModule&&this.pdfViewer.textSelectionModule.clearTextSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.clearAllOccurrences();var e=this.pdfViewerBase.viewerContainer.scrollTop;if(this.isAutoZoom=!1,this.updatePageLocation(),this.pdfViewerBase.pageContainer.style.height=this.topValue+this.pdfViewerBase.pageSize[0].height*this.zoomFactor+"px",this.resizeCanvas(this.pdfViewerBase.currentPageNumber),this.isPinchZoomed&&this.calculateScrollValues(e),this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[],this.pdfViewer.formFieldsModule){var t=this;this.pdfViewerBase.documentLoaded||(this.magnifyPageRerenderTimer=setTimeout((function(){t.rerenderMagnifiedPages()}),800))}},e.prototype.calculateScrollValues=function(e){var t=this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t);if(i){var n=void 0,o=i.getBoundingClientRect(),s=(n=this.pdfViewer.enableRtl&&!this.isDoubleTapZoom?this.positionInViewer(o.right,o.top):this.positionInViewer(o.left,o.top)).x,a=n.y,r=a*this.previousZoomFactor,l=e+this.touchCenterY,d=a*this.zoomFactor+(l-r<0?l-r:(l-r)*(this.zoomFactor/this.previousZoomFactor)),h=this.zoomFactor-this.previousZoomFactor>0?-this.pdfViewerBase.pageGap*(this.zoomFactor/this.previousZoomFactor):this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor);this.pdfViewerBase.viewerContainer.scrollTop=d-this.touchCenterY+h/this.pdfViewerBase.zoomInterval;var p=o.width*this.previousZoomFactor/o.width,c=this.zoomFactor/p-1,u=this.touchCenterX-s;this.pdfViewerBase.viewerContainer.scrollLeft+=u*c}},e.prototype.calculateScrollValuesOnMouse=function(e){var t=this.pdfViewerBase.currentPageNumber-1,i=this.pdfViewerBase.getElement("_pageDiv_"+t);if(i){var n=void 0,o=i.getBoundingClientRect(),s=(n=this.pdfViewer.enableRtl?this.positionInViewer(o.right,o.top):this.positionInViewer(o.left,o.top)).x,a=n.y,r=a*this.previousZoomFactor,l=e+this.mouseCenterY,d=void 0,h=void 0;this.zoomFactor>2?(d=a*this.zoomFactor+(l-r)*(this.zoomFactor/this.previousZoomFactor),h=this.pdfViewerBase.pageGap*(this.zoomFactor/this.previousZoomFactor)):(d=a*this.zoomFactor+(l-r<0?l-r:(l-r)*(this.zoomFactor/this.previousZoomFactor)),h=this.zoomFactor-this.previousZoomFactor>0?-this.pdfViewerBase.pageGap*(this.zoomFactor/this.previousZoomFactor):this.pdfViewerBase.pageGap*(this.previousZoomFactor/this.zoomFactor)),this.pdfViewerBase.isTouchPad&&!this.pdfViewerBase.isMacSafari&&(h/=this.pdfViewerBase.zoomInterval),this.pdfViewerBase.viewerContainer.scrollTop=d-this.mouseCenterY+h;var p=o.width*this.previousZoomFactor/o.width,c=this.zoomFactor/p-1,u=this.mouseCenterX-s;this.pdfViewerBase.viewerContainer.scrollLeft+=u*c}},e.prototype.rerenderOnScroll=function(){var e=this;if(this.isPinchZoomed=!1,this.isPinchScrolled){this.rerenderOnScrollTimer=null,this.isPinchScrolled=!1,this.reRenderPageNumber=this.pdfViewerBase.currentPageNumber,this.pdfViewerBase.renderedPagesList=[],this.pdfViewerBase.pinchZoomStorage=[];for(var t=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_pageCanvas_"]'),i=0;i<t.length;i++){var n=parseInt(t[i].id.split("_pageCanvas_")[1],10),o=this.pdfViewerBase.pageSize[n].width;816<o&&this.pdfViewer.tileRenderingSettings.enableTileRendering&&(this.pdfViewer.restrictZoomRequest,t[i].style.width=o*this.pdfViewerBase.getZoomFactor()+"px",t[i].style.height=this.pdfViewerBase.pageSize[n].height*this.pdfViewerBase.getZoomFactor()+"px")}if(this.pdfViewerBase.textLayer){var s=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_textLayer_"]');for(i=0;i<s.length;i++)s[i].style.display="block"}if(this.pdfViewerBase.isTextMarkupAnnotationModule())for(var a=document.querySelectorAll('canvas[id*="'+this.pdfViewer.dataId+'_annotationCanvas_"]'),r=0;r<a.length;r++){n=a[r].id.split("_annotationCanvas_")[1];this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotationsPinch(parseInt(n,10))}this.pdfViewerBase.pageViewScrollChanged(this.reRenderPageNumber),this.isPagePinchZoomed=!1,this.rerenderOnScrollTimer=setTimeout((function(){e.pdfViewerBase.pageViewScrollChanged(e.reRenderPageNumber)}),300)}},e.prototype.pinchMoveScroll=function(){var e=this;this.isRerenderCanvasCreated&&this.clearIntervalTimer(),(this.isPagesZoomed||!this.isRerenderCanvasCreated&&this.isPagePinchZoomed)&&(this.clearRendering(),this.isPagesZoomed=!1,clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled=!0,this.isFormFieldPageZoomed=!0,this.rerenderOnScrollTimer=setTimeout((function(){e.rerenderOnScroll()}),100))},e.prototype.initiateRerender=function(e){var t=!1;(this.previousZoomFactor<.4||this.pdfViewerBase.isMinimumZoom)&&(t=!0),e.pageRerenderCount!==e.pdfViewerBase.reRenderedCount&&!t||0===e.pageRerenderCount||0===e.pdfViewerBase.reRenderedCount||(e.reRenderAfterPinch(this.reRenderPageNumber),e.isFormFieldPageZoomed=!1)},e.prototype.reRenderAfterPinch=function(e){this.pageRerenderCount=0;var t=e-3,i=e+1;this.pdfViewerBase.isMinimumZoom&&(t=e-4,i=e+4),this.pdfViewer.overscanCount>this.pdfViewerBase.pageRenderCount?(t=0,i=i<this.pdfViewer.overscanCount?this.pdfViewer.overscanCount<=this.pdfViewerBase.pageCount?this.pdfViewer.overscanCount:this.pdfViewerBase.pageCount:i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1):(t=t>0?t:0,i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1);for(var n=t;n<=i;n++){var o=this.pdfViewerBase.getElement("_pageDiv_"+n),s=(this.pdfViewerBase.getElement("_pageCanvas_"+n),this.pdfViewerBase.getElement("_oldCanvas_"+n));s&&s.parentNode.removeChild(s),this.pdfViewerBase.isTextMarkupAnnotationModule()&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.rerenderAnnotations(n),o&&(o.style.visibility="visible")}this.isRerenderCanvasCreated=!1,this.isPagePinchZoomed=!1,0!==this.pdfViewerBase.reRenderedCount&&(this.pdfViewerBase.reRenderedCount=0,this.pageRerenderCount=0,clearInterval(this.rerenderInterval),this.rerenderInterval=null),this.imageObjects=[]},e.prototype.rerenderAnnotations=function(e){for(var t=document.querySelectorAll("#"+this.pdfViewer.dataId+"_old_annotationCanvas_"+e),i=0;i<t.length;i++)t[i]&&t[i].parentElement.removeChild(t[i]);var n=this.pdfViewerBase.getElement("_annotationCanvas_"+e);n&&(n.style.display="block")},e.prototype.designNewCanvas=function(e){this.pdfViewerBase.textLayer&&this.pdfViewerBase.textLayer.clearTextLayers();var t=e-3,i=e+1;this.pdfViewerBase.isMinimumZoom&&(t=e-4,i=e+4),t=t>0?t:0,i=i<this.pdfViewerBase.pageCount?i:this.pdfViewerBase.pageCount-1;for(var n=t;n<=i;n++){var o=this.pdfViewerBase.getElement("_pageCanvas_"+n),s=this.pdfViewerBase.pageSize[n].width*this.zoomFactor,a=this.pdfViewerBase.pageSize[n].height*this.zoomFactor;o&&!this.pdfViewer.restrictZoomRequest?this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+n),s,a,n,"none"):this.pdfViewer.restrictZoomRequest||this.pdfViewerBase.renderPageCanvas(this.pdfViewerBase.getElement("_pageDiv_"+n),s,a,n,"none")}this.isRerenderCanvasCreated=!0},e.prototype.pageRerenderOnMouseWheel=function(){var e=this;this.isRerenderCanvasCreated&&(this.clearIntervalTimer(),clearTimeout(this.magnifyPageRerenderTimer),this.isPinchScrolled||(this.isPinchScrolled=!0,this.rerenderOnScrollTimer=setTimeout((function(){e.rerenderOnScroll()}),100)))},e.prototype.renderCountIncrement=function(){this.isRerenderCanvasCreated&&this.pageRerenderCount++},e.prototype.rerenderCountIncrement=function(){this.pageRerenderCount>0&&this.pdfViewerBase.reRenderedCount++},e.prototype.resizeCanvas=function(e){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var t=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber,10);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(t)}var i=e-3,n=e+3;this.pdfViewerBase.isMinimumZoom&&(i=this.pdfViewer.overscanCount>0?e-this.pdfViewer.overscanCount-1:e-4,n=e+4),i=i>0?i:0,n=n<this.pdfViewerBase.pageCount?n:this.pdfViewerBase.pageCount-1;for(var o=i;o<=n;o++){var s=this.pdfViewerBase.getElement("_pageDiv_"+o),a=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+o);if(s&&i<=o&&o<=n){var r=!1;if(this.pdfViewer.textSelectionModule&&(r=this.pdfViewer.textSelectionModule.isSelectionAvailableOnScroll(o)),null!=this.pdfViewerBase.pageSize[o]){var l=this.pdfViewerBase.pageSize[o].width*this.zoomFactor,d=this.pdfViewerBase.pageSize[o].height*this.zoomFactor;s.style.width=l+"px",s.style.height=d+"px",s.style.top=this.pdfViewerBase.pageSize[o].top*this.zoomFactor+"px",this.pdfViewer.enableRtl?s.style.right=this.pdfViewerBase.updateLeftPosition(o)+"px":s.style.left=this.pdfViewerBase.updateLeftPosition(o)+"px";var h=this.pdfViewerBase.getElement("_pageCanvas_"+o);h&&(h.style.width=l+"px",h.style.height=d+"px",this.pdfViewer.annotation&&this.pdfViewer.annotationModule.resizeAnnotations(l,d,o));var p=this.pdfViewerBase.retrieveCurrentZoomFactor(),c=void 0,u=void 0;c=u=this.pdfViewerBase.getTileCount(this.pdfViewerBase.pageSize[o].width);var f=this.pdfViewer.tileRenderingSettings;if(f.enableTileRendering&&f.x>0&&f.y>0&&(1200<this.pdfViewerBase.pageSize[o].width||this.pdfViewerBase.getZoomFactor()>2)&&(c=f.x,u=f.y),1===c*u){var m=this.pdfViewerBase.getLinkInformation(o);if(m){if(M=m.image){h.src=M,h.style.display="block";for(var g=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+"_tileimg_"+o+'_"]'),w=this.pdfViewerBase.getElement("_pageDiv_"+o),y=0;y<g.length;y++){var v=g[y].id.split("_");parseFloat(v[v.length-3])!==this.pdfViewerBase.getZoomFactor()&&w.removeChild(g[y])}for(var b=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+'_oldCanvas"]'),S=0;S<b.length;S++)s.removeChild(b[S])}this.pdfViewerBase.isReRenderRequired=!1}else this.pdfViewerBase.isReRenderRequired=!0}else{g=document.querySelectorAll('img[id*="'+this.pdfViewer.dataId+"_tileimg_"+o+'_"]');for(var A=0;A<g.length;A++){v=g[A].id.split("_");var x=parseFloat(v[v.length-2]),V=parseFloat(v[v.length-1]),C=JSON.parse(this.pdfViewerBase.getStoredTileImageDetails(o,x,V,p));if(C&&C.zoomFactor&&(p=C.zoomFactor),parseFloat(v[v.length-4])===o){h.style.display="none";var I=g[A];if(I.nodeType===Node.ELEMENT_NODE){var k=1.5;sf.base.isNullOrUndefined(C)||(k=sf.base.isNullOrUndefined(C.scaleFactor)?1.5:C.scaleFactor);var M,T=this.pdfViewerBase.pageSize[o].width*p*k/c,E=this.pdfViewerBase.pageSize[o].height*p*k/u,B=T,P=parseFloat(v[v.length-2])*T,D=parseFloat(v[v.length-1])*E;if(I.width=B*this.pdfViewerBase.getZoomFactor()/p/k,I.style.width=B*this.pdfViewerBase.getZoomFactor()/p/k+"px",I.style.left=P*this.pdfViewerBase.getZoomFactor()/p/k+"px",I.style.top=D*this.pdfViewerBase.getZoomFactor()/p/k+"px",I.id=this.pdfViewer.dataId+"_tileimg_"+o+"_"+this.pdfViewerBase.getZoomFactor()+"_"+x+"_"+V,C)(M=C.image)&&(I.src=M),this.pdfViewerBase.isReRenderRequired=!1;else this.pdfViewerBase.isReRenderRequired=!0}}}0===g.length&&(this.pdfViewerBase.isReRenderRequired=!0)}if(a){if(a.style.width=l+"px",a.style.height=d+"px",this.isPinchZoomed)a.style.display="none";else if(this.isMagnified){var N=e-2==0?0:e-2,F=e===this.pdfViewerBase.pageCount?this.pdfViewerBase.pageCount-1:e+1;this.pdfViewer.textSelectionModule&&N<=o&&o<=F&&(this.pdfViewer.textSelectionModule.isTextSelection&&r||this.pdfViewerBase.textLayer.getTextSearchStatus()||this.pdfViewerBase.isInitialPageMode)?(this.pdfViewerBase.textLayer.resizeTextContentsOnZoom(o),this.pdfViewer.textSelectionModule.isTextSelection&&r&&this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(o)):a.style.display="none"}else a.style.display="block";this.pdfViewerBase.applyElementStyles(a,o)}var L=sf.drawings.getDiagramElement(this.pdfViewer.dataId+"_textLayer_"+o);if(L){var O=sf.drawings.getDiagramElement(this.pdfViewer.dataId+o+"_diagramAdorner_svg");O&&(O.style.width=l+"px",O.style.height=d+"px");var R=sf.drawings.getDiagramElement(this.pdfViewer.dataId+o+"_diagramAdornerLayer");R&&(R.style.width=l+"px",R.style.height=d+"px"),L.style.width=l+"px",L.style.height=d+"px",this.pdfViewer.renderSelector(o,this.pdfViewer.annotationSelectorSettings),this.pdfViewerBase.applyElementStyles(R,o)}if(this.isMagnified){var z=s.getElementsByTagName("a");if(0!==z.length)for(var H=z.length-1;H>=0;H--)z[H].parentNode.removeChild(z[H])}}}}},e.prototype.zoomOverPages=function(e,t,i,n){var o=Math.sqrt(Math.pow(e-i,2)+Math.pow(t-n,2));this.previousTouchDifference>-1&&(o>this.previousTouchDifference?(this.pinchStep=this.getPinchStep(o,this.previousTouchDifference),this.pinchOut()):o<this.previousTouchDifference&&(this.pinchStep=this.getPinchStep(this.previousTouchDifference,o),this.pinchIn())),this.previousTouchDifference=o},e.prototype.pinchMoveEnd=function(){this.touchCenterX=0,this.touchCenterY=0,this.previousTouchDifference=-1,this.isPinchZoomed&&(this.isPinchScrolled=!1,this.isPagePinchZoomed=!0,this.pinchMoveScroll())},e.prototype.fitPageScrollMouseWheel=function(e){"fitToPage"===this.fitType&&(this.isMagnified=!1,e.preventDefault(),0!==e.deltaY&&(e.deltaY>0?this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1):this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1)))},e.prototype.magnifyBehaviorKeyDown=function(e,t){var i=!!!!/ipad|iphone|ipod|mac/.test(navigator.userAgent.toLowerCase())&&e.metaKey;switch((e.ctrlKey||i)&&"Equal"===e.code&&this.pdfViewerBase.checkVisibility(".e-toolbar-item.e-pv-zoom-in-container")&&(e.preventDefault(),this.zoomIn()),(e.ctrlKey||i)&&"Minus"===e.code&&this.pdfViewerBase.checkVisibility(".e-toolbar-item.e-pv-zoom-out-container")&&(e.preventDefault(),this.zoomOut()),e.keyCode){case 37:e.ctrlKey||i?this.pdfViewerBase.checkVisibility(".e-toolbar-item.e-pv-first-page-navigation-container")&&(e.preventDefault(),this.pdfViewerBase.updateScrollTop(0),this.pdfViewerBase.focusViewerContainer()):this.focusOnViewerContainer()&&t&&this.pdfViewerBase.checkVisibility(".e-toolbar-item.e-pv-previous-page-navigation-container")&&(e.preventDefault(),this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 38:case 33:e.ctrlKey||i?(e.preventDefault(),this.pdfViewerBase.updateScrollTop(0),this.pdfViewerBase.focusViewerContainer()):"fitToPage"!==this.fitType||(e.ctrlKey||i)&&e.shiftKey||(e.preventDefault(),this.upwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 39:e.ctrlKey||i?this.pdfViewerBase.checkVisibility(".e-toolbar-item.e-pv-last-page-navigation-container")&&(e.preventDefault(),this.pdfViewerBase.updateScrollTop(this.pdfViewerBase.pageCount-1),this.pdfViewerBase.focusViewerContainer()):this.focusOnViewerContainer()&&t&&this.pdfViewerBase.checkVisibility(".e-toolbar-item.e-pv-next-page-navigation-container")&&(e.preventDefault(),this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 40:case 34:e.ctrlKey||i?(e.preventDefault(),this.pdfViewerBase.updateScrollTop(this.pdfViewerBase.pageCount-1),this.pdfViewerBase.focusViewerContainer()):"fitToPage"!==this.fitType||(e.ctrlKey||i)&&e.shiftKey||(e.preventDefault(),this.downwardScrollFitPage(this.pdfViewerBase.currentPageNumber-1));break;case 48:!e.ctrlKey&&!i||e.shiftKey||e.altKey||(e.preventDefault(),this.fitToPage());break;case 49:!e.ctrlKey&&!i||e.shiftKey||e.altKey||(e.preventDefault(),this.zoomTo(100))}},e.prototype.focusOnViewerContainer=function(){var e=document.activeElement;return document.querySelector(".e-pv-viewer-container").contains(e)},e.prototype.upwardScrollFitPage=function(e){if(e>0){var t=this.pdfViewerBase.getElement("_pageDiv_"+(e-1));if(t&&(t.style.visibility="visible",this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e-1].top*this.zoomFactor,this.isFitToPageMode)){var i=this.pdfViewerBase.getElement("_pageDiv_"+e);i&&this.pdfViewerBase.highestHeight===this.pdfViewerBase.pageSize[e-1].height&&(i.style.visibility="hidden")}}},e.prototype.updatePagesForFitPage=function(e){"fitToPage"===this.fitType&&this.isFitToPageMode&&(e>0&&this.pdfViewerBase.getElement("_pageDiv_"+(e-1))&&(this.pdfViewerBase.getElement("_pageDiv_"+(e-1)).style.visibility="hidden"),e<this.pdfViewerBase.pageCount-1&&this.pdfViewerBase.getElement("_pageDiv_"+(e+1))&&(this.pdfViewerBase.getElement("_pageDiv_"+(e+1)).style.visibility="hidden"))},e.prototype.onDoubleTapMagnification=function(){this.pdfViewer.toolbarModule&&this.pdfViewer.toolbarModule.showToolbar(!0);var e=this.pdfViewerBase.viewerContainer.scrollTop;if(this.pdfViewer.selectedItems.annotations[0]){if(this.pdfViewer.selectedItems.annotations[0]&&"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType){var t={};t.x=this.pdfViewer.selectedItems.annotations[0].bounds.x,t.y=this.pdfViewer.selectedItems.annotations[0].bounds.y,this.pdfViewer.annotation.freeTextAnnotationModule.addInuptElemet(t,this.pdfViewer.selectedItems.annotations[0],null,!0)}}else this.isDoubleTapZoom=!0,this.isTapToFitZoom?this.fitToWidth():this.zoomFactor<2?this.zoomTo(200):this.fitToWidth(),this.calculateScrollValues(e),this.isTapToFitZoom=!this.isTapToFitZoom,this.isDoubleTapZoom=!1},e.prototype.downwardScrollFitPage=function(e){if(e!==this.pdfViewerBase.pageCount-1){var t=this.pdfViewerBase.getElement("_pageDiv_"+(e+1));if(t&&(t.style.visibility="visible"),this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.pageSize[e+1].top*this.zoomFactor,this.isFitToPageMode){var i=this.pdfViewerBase.getElement("_pageDiv_"+e),n=this.pdfViewerBase.getElement("_pageDiv_"+(e+2));e+1===this.pdfViewerBase.pageCount-1?i&&this.pdfViewerBase.highestHeight===this.pdfViewerBase.pageSize[e+1].height&&(i.style.visibility="hidden"):n&&this.pdfViewerBase.highestHeight===this.pdfViewerBase.pageSize[e+1].height&&(n.style.visibility="hidden")}}},e.prototype.getMagnifiedValue=function(e){return e/this.previousZoomFactor*this.zoomFactor},e.prototype.destroy=function(){this.imageObjects=void 0},e.prototype.getZoomFactor=function(e){return e/100},e.prototype.getModuleName=function(){return"Magnification"},e.prototype.getPinchStep=function(e,t){var i=(e-t)/100;return i<.02?i=.02:i>1&&(i=.1),i},e.prototype.positionInViewer=function(e,t){var i=this.pdfViewerBase.mainContainer.getBoundingClientRect();return{x:e-i.left,y:t-i.top}},e}(),vu=function(){function e(e,t){this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.goToNextPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber++,this.pageNumber<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},e.prototype.goToPreviousPage=function(){this.pageNumber=this.pdfViewerBase.currentPageNumber,this.pageNumber--,this.pageNumber>0&&this.pdfViewerBase.updateScrollTop(this.pageNumber-1)},e.prototype.goToPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e&&this.pdfViewerBase.updateScrollTop(e-1),this.pdfViewer.magnificationModule.resizeCanvas(e);var t=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(e-1));t&&(t.style.display="block")},e.prototype.goToFirstPage=function(){this.pageNumber=0,this.pdfViewerBase.updateScrollTop(this.pageNumber)},e.prototype.goToLastPage=function(){this.pageNumber=this.pdfViewerBase.pageCount-1,this.pdfViewerBase.updateScrollTop(this.pageNumber)},e.prototype.destroy=function(){this.pageNumber=0},e.prototype.getModuleName=function(){return"Navigation"},e}(),bu=function(){function e(e,t){var i=this;this.thumbnailTopMargin=10,this.isThumbnailClicked=!1,this.thumbnailClick=function(e){var t=i,n=e.target,o=t.getPageNumberFromID(n.id);if(t.previousElement&&(t.previousElement.classList.remove("e-pv-thumbnail-selection"),t.previousElement.classList.remove("e-pv-thumbnail-focus"),t.previousElement.classList.add("e-pv-thumbnail-selection-ring")),n.parentElement.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+o?(t.setSelectionStyle(n.parentElement),t.previousElement=n.parentElement):n.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+o&&(t.setSelectionStyle(n),t.previousElement=n),t.pdfViewer.fireThumbnailClick(o+1),t.isThumbnailClicked=!0,t.goToThumbnailPage(o+1),t.pdfViewerBase.focusViewerContainer(),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var s=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber,10);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(s)}},this.thumbnailMouseOver=function(e){var t=i,n=e.target,o=t.getPageNumberFromID(n.id);n.id===t.pdfViewer.element.id+"_thumbnail_Selection_Ring_"+o?t.setMouseOverStyle(n):n.id===t.pdfViewer.element.id+"_thumbnail_image_"+o&&t.setMouseOverStyle(n.parentElement)},this.thumbnailMouseLeave=function(e){var t=i,n=e.target,o=t.getPageNumberFromID(n.id);n.parentElement.id===t.pdfViewer.element.id+"_thumbnail_view"?t.setMouseLeaveStyle(n.children[0].children[0]):n.parentElement.id===t.pdfViewer.element.id+"_thumbnail_"+o&&t.setMouseLeaveStyle(n.parentElement.children[0])},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createThumbnailContainer=function(){var e=this;this.thumbnailView=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_thumbnail_view",className:"e-pv-thumbnail-view e-pv-thumbnail-row"}),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.thumbnailView),this.pdfViewerBase.navigationPane.sideBarContent.addEventListener("scroll",(function(){e.getThumbnailLinkElement(0)&&e.renderViewPortThumbnailImage()}))},e.prototype.openThumbnailPane=function(e){this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.openThumbnailPane(e)},e.prototype.createRequestForThumbnails=function(){for(var e=0;e<this.pdfViewer.pageCount;e++)this.renderThumbnailEmptyPage(e);if(this.pdfViewer.isThumbnailViewOpen){this.pdfViewerBase.navigationPane.isThumbnailOpen=!0,this.pdfViewerBase.navigationPane.sideBarTitle.textContent=this.pdfViewer.localeObj.getConstant("Page Thumbnails"),document.getElementById(this.pdfViewer.element.id+"_thumbnail_view").style.display="flex";var t=this.pdfViewer.element.querySelector(".e-pv-bookmark-view");t&&(t.style.display="none"),this.pdfViewerBase.navigationPane.setThumbnailSelectionIconTheme(),this.pdfViewerBase.navigationPane.updateViewerContainerOnExpand(),this.pdfViewerBase.navigationPane.isBookmarkOpen=!1}},e.prototype.renderThumbnailEmptyPage=function(e){if(this.thumbnailView){var t=sf.base.createElement("a",{id:"page_"+e,attrs:{"aria-label":"Thumbnail of Page"+(e+1),role:"link"},className:"e-pv-thumbnail-anchor-node"}),i=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_thumbnail_"+e,className:"e-pv-thumbnail e-pv-thumbnail-column"});this.thumbnailSelectionRing=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_thumbnail_Selection_Ring_"+e,className:"e-pv-thumbnail-selection-ring"}),i.appendChild(this.thumbnailSelectionRing);var n=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_thumbnail_pagenumber_"+e,className:"e-pv-thumbnail-number"});n.textContent=(e+1).toString(),i.appendChild(n),this.thumbnailImage=sf.base.createElement("img",{id:this.pdfViewer.dataId+"_thumbnail_image_"+e,className:"e-pv-thumbnail-image",attrs:{tabindex:"0"}}),this.pdfViewerBase.pageSize[e]&&this.pdfViewerBase.pageSize[e].height<this.pdfViewerBase.pageSize[e].width&&(this.thumbnailImage.style.height="86px",this.thumbnailImage.style.width="126px",i.style.height="100px",i.style.width="140px",t.style.left="-25px",t.style.position="relative",n.style.left="18px",n.style.position="relative"),this.thumbnailImage.setAttribute("aria-label","thumbnailImage"+(e+1)),this.thumbnailSelectionRing.appendChild(this.thumbnailImage),t.appendChild(i),this.thumbnailView.appendChild(t),this.wireUpEvents(),0===e&&this.setMouseFocusToFirstPage()}this.pdfViewerBase.navigationPane.enableThumbnailButton()},e.prototype.renderViewPortThumbnailImage=function(){var e=this.pdfViewerBase.navigationPane.sideBarContent.getBoundingClientRect().height,t=this.getThumbnailLinkElement(0).getBoundingClientRect(),i=t.height,n=this.pdfViewerBase.navigationPane.sideBarContent.scrollTop,o=this.thumbnailView.getBoundingClientRect().width,s=t.width,a=parseInt(((o-48)/s).toString(),10);a=a>0?a:1;for(var r=parseInt((n*a/i).toString(),10),l=r=r>a?r-a:r;l<this.pdfViewer.pageCount;l++){if(!(parseInt((l/a).toString(),10)*i-n-i<e))break;""===this.getThumbnailImageElement(l).src&&this.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:l,message:"renderThumbnail"})}},e.prototype.thumbnailOnmessage=function(e){if("renderThumbnail"===e.data.message){var t=document.createElement("canvas"),i=e.data,n=i.value,o=i.width,s=i.height,a=i.pageIndex;t.width=o,t.height=s;var r=t.getContext("2d"),l=r.createImageData(o,s);l.data.set(n),r.putImageData(l,0,0);var d=t.toDataURL();this.getThumbnailImageElement(a).src=d}},e.prototype.gotoThumbnailImage=function(e){var t=this.checkThumbnailScroll(e);if(this.thumbnailView){var i=this.thumbnailView.children[e];if(i){var n=i.children[0];if(t){var o=n.offsetTop+n.clientTop-this.thumbnailTopMargin;this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=o}this.isThumbnailClicked||(this.previousElement&&(this.previousElement.classList.remove("e-pv-thumbnail-selection"),this.previousElement.classList.remove("e-pv-thumbnail-focus"),this.previousElement.classList.remove("e-pv-thumbnail-hover"),this.previousElement.classList.add("e-pv-thumbnail-selection-ring")),this.setFocusStyle(n,e)),this.previousElement=n.children[0]}}},e.prototype.checkThumbnailScroll=function(e){var t=!1;if(this.thumbnailView){var i=this.getVisibleThumbs(),n=i.views.length;if(n>0){var o=this.getPageNumberFromID(i.first.id),s=n>1?this.getPageNumberFromID(i.last.id):o;e<=o||e>=s?t=!0:i.views.some((function(i){var n=i.id.split("_"),o=n[n.length-1];return parseInt(o,10)===e&&(t=i.percent<100,!0)}))}}return t},e.prototype.getPageNumberFromID=function(e){var t=e.split("_"),i=t[t.length-1];return parseInt(i,10)},e.prototype.setFocusStyle=function(e,t){e.children[0].id===this.pdfViewer.dataId+"_thumbnail_Selection_Ring_"+t&&this.setMouseFocusStyle(e.children[0])},e.prototype.wireUpEvents=function(){this.thumbnailSelectionRing&&(this.thumbnailSelectionRing.addEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.addEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.addEventListener("mouseleave",this.thumbnailMouseLeave))},e.prototype.unwireUpEvents=function(){this.thumbnailSelectionRing&&this.thumbnailImage&&(this.thumbnailSelectionRing.removeEventListener("click",this.thumbnailClick),this.thumbnailSelectionRing.removeEventListener("mouseover",this.thumbnailMouseOver),this.thumbnailSelectionRing.removeEventListener("mouseleave",this.thumbnailMouseLeave))},e.prototype.goToThumbnailPage=function(e){e>0&&e<=this.pdfViewerBase.pageCount&&this.pdfViewerBase.currentPageNumber!==e?this.pdfViewerBase.updateScrollTop(e-1):this.isThumbnailClicked=!1},e.prototype.setSelectionStyle=function(e){e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.remove("e-pv-thumbnail-focus"),e.classList.add("e-pv-thumbnail-selection")},e.prototype.setMouseOverStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection-ring"),e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-hover"))},e.prototype.setMouseLeaveStyle=function(e){e.classList.contains("e-pv-thumbnail-selection")?e.classList.contains("e-pv-thumbnail-selection")||(e.classList.remove("e-pv-thumbnail-selection"),e.classList.add("e-pv-thumbnail-focus")):(e.classList.contains("e-pv-thumbnail-focus")||e.classList.add("e-pv-thumbnail-selection-ring"),e.classList.remove("e-pv-thumbnail-hover"))},e.prototype.setMouseFocusStyle=function(e){e.classList.remove("e-pv-thumbnail-selection"),e.classList.remove("e-pv-thumbnail-hover"),e.classList.add("e-pv-thumbnail-focus")},e.prototype.setMouseFocusToFirstPage=function(){var e=this.thumbnailView.children[0];if(e){var t=e.children[0].children[0];this.setMouseFocusStyle(t),this.previousElement=t}},e.prototype.clear=function(){if(this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.sideBarContentContainer&&(this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="block",this.pdfViewerBase.navigationPane.sideBarContent.scrollTop=0,this.pdfViewerBase.navigationPane.sideBarContentContainer.style.display="none"),this.thumbnailView)for(;this.thumbnailView.hasChildNodes();)this.thumbnailView.removeChild(this.thumbnailView.lastChild);this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.resetThumbnailView(),this.thumbnailRequestHandler&&this.thumbnailRequestHandler.clear(),this.unwireUpEvents()},e.prototype.getVisibleThumbs=function(){return this.getVisibleElements(this.pdfViewerBase.navigationPane.sideBarContent,this.thumbnailView.children)},e.prototype.getVisibleElements=function(e,t){var i=e.scrollTop,n=i+e.clientHeight,o=e.scrollLeft,s=o+e.clientWidth;var a,r,l,d,h,p,c,u,f,m=[],g=0===t.length?0:this.binarySearchFirstItem(t,(function(e){return e.offsetTop+e.clientTop+e.clientHeight>i}));t.length>0&&(g=this.backtrackBeforeAllVisibleElements(g,t,i));for(var w=-1,y=g,v=t.length;y<v;y++){if(p=(r=a=this.getThumbnailElement(y)).offsetLeft+r.clientLeft,l=r.offsetTop+r.clientTop,u=p+(c=r.clientWidth),h=l+(d=r.clientHeight),-1===w)h>=n&&(w=h);else if(l>w)break;h<=i||l>=n||u<=o||p>=s||(f=(d-(Math.max(0,i-l)+Math.max(0,h-n)))*(c-(Math.max(0,o-p)+Math.max(0,u-s)))*100/d/c|0,m.push({id:a.id,x:p,y:l,view:a,percent:f}))}return{first:m[0],last:m[m.length-1],views:m}},e.prototype.binarySearchFirstItem=function(e,t){var i=0,n=e.length-1;if(0===e.length||!t(this.getThumbnailElement(n)))return e.length-1;if(t(this.getThumbnailElement(i)))return i;for(;i<n;){var o=i+n>>1;t(this.getThumbnailElement(o))?n=o:i=o+1}return i},e.prototype.backtrackBeforeAllVisibleElements=function(e,t,i){if(e<2)return e;var n=this.getThumbnailElement(e),o=n.offsetTop+n.clientTop;o>=i&&(o=(n=this.getThumbnailElement(e-1)).offsetTop+n.clientTop);for(var s=e-2;s>=0&&!((n=this.getThumbnailElement(s)).offsetTop+n.clientTop+n.clientHeight<=o);--s)e=s;return e},e.prototype.getThumbnailElement=function(e){return this.thumbnailView.children[e].children[0]},e.prototype.getThumbnailLinkElement=function(e){return this.thumbnailView.children[e]},e.prototype.getThumbnailImageElement=function(e){return this.thumbnailView.children[e].children[0].children[0].children[0]},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"ThumbnailView"},e}(),Su=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},Au=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}},xu=function(){function e(e,t){var i=this;this.isPageNavigationToolDisabled=!1,this.isMagnificationToolDisabled=!1,this.isSelectionToolDisabled=!1,this.isScrollingToolDisabled=!1,this.isOpenBtnVisible=!0,this.isNavigationToolVisible=!0,this.isMagnificationToolVisible=!0,this.isSelectionBtnVisible=!0,this.isScrollingBtnVisible=!0,this.isDownloadBtnVisible=!0,this.isPrintBtnVisible=!0,this.isSearchBtnVisible=!0,this.isTextSearchBoxDisplayed=!1,this.isUndoRedoBtnsVisible=!0,this.isAnnotationEditBtnVisible=!0,this.isCommentBtnVisible=!0,this.isSubmitbtnvisible=!0,this.loadDocument=function(e){var t=e.target.files,n=i;if(null!==e.target.files[0]){var o=t[0];if(o){i.uploadedDocumentName=o.name;var s=new FileReader;s.readAsArrayBuffer(o),s.onload=function(t){e.target.value=null;var o=t.currentTarget.result;i.pdfViewer.uploadedFileByteArray=new Uint8Array(o),i.pdfViewer.isCleared=!1,new Promise((function(e,t){i.pdfViewerBase.clear(!0),i.pdfViewerBase.showLoadingIndicator(!0);var n=setInterval((function(){i.pdfViewer.isCleared&&(clearInterval(n),e())}))})).then((function(){if(n.pdfViewer.enableChunkMessages){var e=n.pdfViewer.getBlobInfo(n.pdfViewer.uploadedFileByteArray);n.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClientSide",null,!0,e).catch((function(){n.pdfViewerBase.renderCorruptPopup()}))}else n.pdfViewer._dotnetInstance.invokeMethodAsync("LoadDocumentFromClientSide",n.pdfViewer.uploadedFileByteArray,!0,null).catch((function(){n.pdfViewerBase.renderCorruptPopup()}))})).catch((function(){n.pdfViewerBase.renderCorruptPopup()}))}}}},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.intializeToolbar=function(e){var t;(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(t=this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.toolbarElement=t),!!document.documentMode&&this.pdfViewerBase.blazorUIAdaptor.totalPageElement.classList.add("e-pv-total-page-ms"),this.createFileElement(t),this.wireEvent(),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.initialEnableItems(),this.pdfViewerBase.navigationPane.adjustPane(),this.pdfViewer.enableToolbar&&this.bindOpenIconEvent()),document.getElementById(this.pdfViewer.dataId+"_submitFormButton")&&(this.SubmitFormElement=document.getElementById(this.pdfViewer.dataId+"_submitFormButton").children[0]),document.getElementById(this.pdfViewer.dataId+"_handTool"))&&(this.PanElement=document.getElementById(this.pdfViewer.dataId+"_handTool").children[0],this.PanElement.classList.add("e-pv-tbar-btn"),this.PanElement.childNodes[0].classList.remove("e-icons","e-btn-icon"));document.getElementById(this.pdfViewer.dataId+"_selectTool")&&(this.SelectToolElement=document.getElementById(this.pdfViewer.dataId+"_selectTool").children[0],this.SelectToolElement.classList.add("e-pv-tbar-btn"),this.SelectToolElement.childNodes[0].classList.remove("e-icons","e-btn-icon"));document.getElementById(this.pdfViewer.dataId+"_comment")&&(this.CommentElement=document.getElementById(this.pdfViewer.dataId+"_comment").children[0],this.CommentElement.classList.add("e-pv-tbar-btn"),this.CommentElement.childNodes[0].classList.remove("e-icons","e-btn-icon"));return this.annotationToolbarModule=new Vu(this.pdfViewer,this.pdfViewerBase,this),this.formDesignerToolbarModule=new Cu(this.pdfViewer,this.pdfViewerBase,this),this.redactionToolbarModule=new Iu(this.pdfViewer,this.pdfViewerBase,this),this.pdfViewer.enableAnnotationToolbar&&this.annotationToolbarModule.afterAnnotationToolbarCreationInBlazor(),t},e.prototype.bindOpenIconEvent=function(){var e=document.getElementById(this.pdfViewer.dataId+"_open");null!=e&&(e.children[0].classList.add("e-pv-tbar-btn"),e.childNodes[0].childNodes[0].classList.remove("e-icons","e-btn-icon"),e&&e.addEventListener("click",this.openFileDialogBox.bind(this)))},e.prototype.InitializeMobileToolbarInBlazor=function(){var e=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar");if(this.createFileElement(e),this.wireEvent(),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var t=document.getElementsByClassName("e-pv-open-document")[0],i=document.getElementsByClassName("e-pv-fileupload-element")[0];t&&i&&t.addEventListener("click",(function(){i.click()}))}},e.prototype.showToolbar=function(e){var t=this.toolbarElement;e?this.ShowToolbarElement(t):this.HideToolbarElement(t)},e.prototype.ShowToolbarElement=function(e){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(e){e.style.display="block";var t=this.pdfViewer.element.querySelector(".e-pv-toolbar");if(t){var i=t.getBoundingClientRect().height;this.updateToolbarHeight(i)}}}else if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var n=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar");if(n){n.parentElement.style.display="block";var o=this.calculateAdditionalMobileToolbarHeight();this.adjustViewerContainerHeight(-o)}}},e.prototype.HideToolbarElement=function(e){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode)e&&(this.pdfViewerBase.toolbarHeight=0,e.style.display="none",this.updateToolbarHeight(0));else if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var t=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar");if(t&&t.parentElement){var i=t.getBoundingClientRect().height;t.parentElement.style.display="none",this.adjustViewerContainerHeight(i)}}},e.prototype.calculateAdditionalMobileToolbarHeight=function(){var e=0;return e+=this.getToolbarHeight(".e-pv-mobile-annotation-toolbar"),e+=this.getToolbarHeight(".e-pv-mobile-formDesigner-toolbar")},e.prototype.getToolbarHeight=function(e){var t=this.pdfViewer.element.querySelector(e);return t&&t.parentElement&&"block"===window.getComputedStyle(t.parentElement).display?t.getBoundingClientRect().height:0},e.prototype.adjustViewerContainerHeight=function(e){var t=this.pdfViewerBase.viewerContainer;t&&t.style&&(t.style.height=t.getBoundingClientRect().height+e+"px")},e.prototype.updateToolbarHeight=function(e){e+=this.calculateToolbarHeight(".e-pv-formdesigner-toolbar"),e+=this.calculateToolbarHeight(".e-pv-annotation-toolbar");var t=this.pdfViewer.element.getBoundingClientRect().height,i=0!==t?t-e+"px":"";this.updateCommentPanelHeight(e,i),this.updateViewerContainerHeight(e,i)},e.prototype.calculateToolbarHeight=function(e){var t=this.pdfViewer.element.querySelector(e);if(!t)return 0;var i=t.getBoundingClientRect().height,n=t.parentElement&&"none"!==window.getComputedStyle(t.parentElement).display;return 0===i&&(i=parseFloat(window.getComputedStyle(t).height)+1),n?i:0},e.prototype.updateCommentPanelHeight=function(e,t){var i=document.getElementById(this.pdfViewer.dataId+"_commantPanel"),n=document.getElementById(this.pdfViewer.dataId+"_commentPanelResizer");i&&i.style&&"block"===i.style.display&&(i.style.height=t,i.style.top=e+"px",n.style.height=t,n.style.top=e+"px")},e.prototype.updateViewerContainerHeight=function(e,t){this.pdfViewerBase.viewerContainer&&this.pdfViewerBase.viewerContainer.style&&(this.pdfViewerBase.viewerContainer.style.height=t),this.pdfViewerBase.navigationPane&&this.pdfViewerBase.navigationPane.sideBarToolbar&&(this.pdfViewerBase.navigationPane.sideBarToolbar.style.height=t,this.pdfViewerBase.navigationPane.sideBarToolbar.style.top=e+"px");var i=this.pdfViewer.element.querySelector(".e-pv-sidebar-content-container");i&&i.style&&(i.style.top=e+"px",i.style.height=t)},e.prototype.showNavigationToolbar=function(e){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){var t=this.pdfViewerBase.navigationPane.sideBarToolbar,i=this.pdfViewerBase.navigationPane.sideBarToolbarSplitter;e?(t.style.display="block",i.style.display="block",(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen)&&this.pdfViewerBase.navigationPane.clear()):(t.style.display="none",i.style.display="none",(this.pdfViewerBase.navigationPane.isBookmarkOpen||this.pdfViewerBase.navigationPane.isThumbnailOpen)&&this.pdfViewerBase.navigationPane.updateViewerContainerOnClose())}},e.prototype.updateMeasureAnnotation=function(){this.pdfViewerBase.tool&&this.pdfViewerBase.eventArgs&&(this.pdfViewerBase.getMouseEventArgs(this.pdfViewerBase.currentPosition,this.pdfViewerBase.eventArgs,this.pdfViewerBase.annotationEvent),this.pdfViewerBase.tool.mouseLeave(this.pdfViewerBase.eventArgs)),this.addInkAnnotation(),this.pdfViewer.inkAnnotationSettings.opacity=1,this.pdfViewer.inkAnnotationSettings.thickness=1,this.pdfViewer.inkAnnotationSettings.strokeColor="#ff0000"},e.prototype.newInkAnnotation=function(){this.addInkAnnotation(),this.pdfViewer.inkAnnotationSettings.opacity=this.annotationToolbarModule.inkOpacityValue,this.pdfViewer.inkAnnotationSettings.thickness=this.annotationToolbarModule.inkThicknessValue,this.annotationToolbarModule.addInkAnnotation()},e.prototype.updateUndoRedoButtons=function(){this.pdfViewer.annotationModule&&this.pdfViewerBase.pageCount>0&&(this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.actionCollection,"undo"),this.enableCollectionAvailableInBlazor(this.pdfViewer.annotationModule.redoCollection,"redo"))},e.prototype.enableCollectionAvailableInBlazor=function(e,t){e.length>0?this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(t,!0):this.pdfViewerBase.blazorUIAdaptor.updateUndoRedoButton(t,!1)},e.prototype.openFileDialogBox=function(e){e.preventDefault(),this.fileInputElement.click()},e.prototype.createFileElement=function(e){e&&(this.fileInputElement=this.pdfViewer.element.querySelector(".e-pv-fileupload-element"),e&&e.appendChild(this.fileInputElement))},e.prototype.wireEvent=function(){this.fileInputElement&&this.fileInputElement.addEventListener("change",this.loadDocument)},e.prototype.unWireEvent=function(){this.fileInputElement&&this.fileInputElement.removeEventListener("change",this.loadDocument)},e.prototype.onToolbarResize=function(e){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?this.pdfViewerBase.navigationPane.toolbarResize():this.toolbar.refreshOverflow()},e.prototype.toolbarOnMouseup=function(e){e.target!==this.itemsContainer&&e.target!==this.toolbarElement||this.pdfViewerBase.focusViewerContainer()},e.prototype.handleOpenIconClick=function(e){this.fileInputElement.click(),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewerBase.focusViewerContainer()},e.prototype.addInkAnnotation=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=parseInt(this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber,10);this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(e)}this.annotationToolbarModule&&(this.pdfViewer.toolbar.annotationToolbarModule.deselectInkAnnotation(),this.annotationToolbarModule.inkAnnotationSelected=!1)},e.prototype.deSelectCommentAnnotation=function(){this.pdfViewer.toolbar.deSelectItem(this.CommentElement),this.pdfViewerBase.isCommentIconAdded=!1},e.prototype.resetStampAnnotation=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.stampAnnotationModule){this.pdfViewerBase.updateStampItems();var e=this.pdfViewer.annotationModule.stampAnnotationModule;e.isStampAddMode=!1,e.isStampAnnotSelected=!1,e.isNewStampAnnot=!1,this.pdfViewerBase.isMouseDown=!1,this.pdfViewerBase.tool&&(this.pdfViewerBase.tool=null)}},e.prototype.addComments=function(e){this.pdfViewer.formDesignerInteraction&&(this.pdfViewer.formDesignerModule.clearFormFieldSelection(),this.pdfViewerBase.removeFromFieldHelper()),this.pdfViewerBase.isCommentIconAdded=!0,this.pdfViewerBase.isAddComment=!0,this.annotationToolbarModule.deselectAllItemsInBlazor(),this.resetStampAnnotation(),this.pdfViewer.annotation.triggerAnnotationUnselectEvent(),this.CommentElement.classList.add("e-pv-select"),this.pdfViewerBase.updateStampItems(),document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).addEventListener("mousedown",this.pdfViewer.annotationModule.stickyNotesAnnotationModule.drawIcons.bind(this))},e.prototype.updateZoomPercentage=function(e){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){var t=parseInt((100*e).toString(),10)+"%",i=this.pdfViewerBase.getElement("_zoomDropDown");i&&i.children.length>0&&(i.children[0].children[0].value=t)}},e.prototype.updateInteractionItems=function(){this.pdfViewer.textSelectionModule&&this.pdfViewer.enableTextSelection?this.toolbar.enableItems(this.textSelectItem.parentElement,!0):this.toolbar.enableItems(this.textSelectItem.parentElement,!1),this.toolbar.enableItems(this.panItem.parentElement,!0),"TextSelection"===this.pdfViewer.interactionMode&&this.pdfViewer.enableTextSelection?(this.selectItem(this.textSelectItem),this.deSelectItem(this.panItem)):(this.selectItem(this.panItem),this.deSelectItem(this.textSelectItem),this.pdfViewerBase.initiatePanning())},e.prototype.textSearchButtonHandler=function(e){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(this.pdfViewer.textSearchModule&&this.pdfViewerBase.pageCount>0)if(this.isTextSearchBoxDisplayed=!this.isTextSearchBoxDisplayed,this.pdfViewer.textSearchModule.showSearchBox(this.isTextSearchBoxDisplayed),this.isTextSearchBoxDisplayed){var t=document.getElementById(this.pdfViewer.dataId+"_search_input");t.select(),t.focus()}else{var i=this.pdfViewerBase.getElement("_search");e?i.firstElementChild.focus():(i.firstElementChild.blur(),this.pdfViewerBase.focusViewerContainer())}}else this.showToolbar(!1),this.pdfViewerBase.navigationPane.createNavigationPaneMobile("search")},e.prototype.DisableInteractionTools=function(){this.deSelectItem(this.textSelectItem),this.deSelectItem(this.panItem)},e.prototype.selectItem=function(e){e&&e.classList.add("e-pv-select")},e.prototype.deSelectItem=function(e){e&&e.classList.remove("e-pv-select")},e.prototype.updateInteractionTools=function(e){e?(this.selectItem(this.SelectToolElement),this.deSelectItem(this.PanElement)):(this.selectItem(this.PanElement),this.deSelectItem(this.SelectToolElement),this.annotationToolbarModule.DeselectItems(),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateTextMarkupButtons",!1,!1,!1,!1),this.annotationToolbarModule.clearTextMarkupMode())},e.prototype.initialEnableItems=function(){this.pdfViewer.enableToolbar?this.showToolbar(!0):this.showToolbar(!1),this.pdfViewer.enableNavigationToolbar?this.showNavigationToolbar(!0):this.showNavigationToolbar(!1)},e.prototype.getStampMode=function(){return!(!this.pdfViewer.annotation||!this.pdfViewer.annotation.stampAnnotationModule)&&this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode},e.prototype.stampBeforeOpen=function(e){if(this.annotationToolbarModule.resetFreeTextAnnot(),""===e.ParentItem.Text&&this.pdfViewer.customStampSettings.isAddToMenu&&e.Items.length>0){for(var t=null,i=0;i<e.Items.length;i++)if("Custom Stamp"===e.Items[i].Text){e.Items[i].Items=[],t=e.Items[i];break}var n=this.pdfViewerBase.customStampCollection,o=this.pdfViewer.customStampSettings.customStamps;if(0===n.length&&o&&o.length>0)for(var s=0;s<o.length;s++)n.push({customStampName:o[s].customStampName,customStampImageSource:o[s].customStampImageSource});for(var a=0;a<n.length;a++)null!=t&&t.Items.push({text:n[a].customStampName})}},e.prototype.stampBeforeClose=function(e,t){e.ParentItem&&"Custom Stamp"!==e.ParentItem.Text&&"Standard Business"!==e.ParentItem.Text&&"Dynamic"!==e.ParentItem.Text&&"Sign Here"!==e.ParentItem.Text||e.ParentItem},e.prototype.handleCustomStampClick=function(){if(this.annotationToolbarModule.deselectTextMarkItems(),this.annotationToolbarModule.updateDropDownIndex(),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){var e=document.getElementById(this.pdfViewer.dataId+"_stampElement"),t=document.getElementById(this.pdfViewer.dataId+"_e-pv-custom-stamp");if(null!==e&&null!==t){t.addEventListener("click",(function(){e.click()}))}}this.deSelectCommentAnnotation()},e.prototype.stampSelect=function(e,t){if(this.pdfViewerBase.isAlreadyAdded=!1,this.pdfViewerBase.updateStampItems(),"Custom Stamp"===e.Item.Text){this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.clearSelection();var i=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_stampElement",attrs:{type:"file"}});i.setAttribute("accept",".jpg,.jpeg,.png,image/jpg,image/jpeg,image/png"),i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.visibility="hidden",document.body.appendChild(i),i.click(),i.addEventListener("change",this.annotationToolbarModule.addStampImage),document.body.removeChild(i)}else if("Custom Stamp"===t&&""!==e.Item.Text)for(var n=this.pdfViewerBase.customStampCollection,o=0;o<n.length;o++)n[o].customStampName===e.Item.Text&&(this.pdfViewer.annotationModule.stampAnnotationModule.customStampName=e.Item.Text,this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,this.pdfViewerBase.isAlreadyAdded=!0,this.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(n[o].customStampImageSource),this.pdfViewerBase.stampAdded=!1);else"Dynamic"===e.Item.Text||""===e.Item.Text||"Standard Business"===e.Item.Text||"Sign Here"!==t&&"Sign Here"===e.Item.Text||(this.annotationToolbarModule.checkStampAnnotations(),this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,this.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,this.pdfViewerBase.stampAdded=!0,this.pdfViewer.annotationModule.clearSelection(),"Dynamic"===t?(this.pdfViewerBase.isDynamicStamp=!0,this.pdfViewer.annotationModule.stampAnnotationModule.retrieveDynamicStampAnnotation(e.Item.Text)):(this.pdfViewerBase.isDynamicStamp=!1,this.pdfViewer.annotationModule.stampAnnotationModule.retrievestampAnnotation(e.Item.Text)))},e.prototype.getModuleName=function(){return"Toolbar"},e.prototype.stampSelection=function(e,t,i,n){i||this.annotationToolbarModule.updateDropDownIndex(),e&&this.annotationToolbarModule.resetFreeTextAnnot(),t&&this.stampSelect(i,n)},e.prototype.primaryToolbarClick=function(e,t,i,n,o,s,a,r,l){return Su(this,void 0,void 0,(function(){var d;return Au(this,(function(h){switch(h.label){case 0:if(e&&this.addInkAnnotation(),t&&this.deSelectCommentAnnotation(),!i)return[3,21];switch(n){case"GoToNext":return[3,1];case"GoToPrevious":return[3,2];case"GoToFirst":return[3,3];case"GoToLast":return[3,4];case"ZoomOut":return[3,5];case"ZoomIn":return[3,6];case"SelectTool":return[3,7];case"PanTool":return[3,8];case"Undo":return[3,9];case"Redo":return[3,10];case"SubmitForm":return[3,11];case"AddComments":return[3,13];case"TextSearch":return[3,14];case"Redaction":return[3,15];case"EditAnnotation":return[3,16];case"FormDesigner":return[3,17];case"PrintDocument":return[3,18];case"Download":return[3,19]}return[3,21];case 1:return this.pdfViewer.navigationModule.goToNextPage(),[3,21];case 2:return this.pdfViewer.navigationModule.goToPreviousPage(),[3,21];case 3:return this.pdfViewer.navigationModule.goToFirstPage(),[3,21];case 4:return this.pdfViewer.navigationModule.goToLastPage(),[3,21];case 5:return this.pdfViewer.magnificationModule.zoomOut(),[3,21];case 6:return this.pdfViewer.magnificationModule.zoomIn(),[3,21];case 7:return this.pdfViewerBase.initiateTextSelection(),[3,21];case 8:return this.pdfViewerBase.initiatePanning(),[3,21];case 9:return this.pdfViewer.undo(),[3,21];case 10:return this.pdfViewer.redo(),[3,21];case 11:return[4,this.pdfViewer.exportFormFields(null)];case 12:return h.sent(),[3,21];case 13:return this.addComments(s),[3,21];case 14:return this.textSearchButtonHandler(r),[3,21];case 15:return this.pdfViewerBase.blazorUIAdaptor.showRedactionToolbar(a,r),[3,21];case 16:return this.pdfViewerBase.blazorUIAdaptor.showAnnotationToolbar(a,r),[3,21];case 17:return this.pdfViewerBase.blazorUIAdaptor.showFormDesignerToolbar(a,r,l),[3,21];case 18:return this.pdfViewer.firePrintStart(),[3,21];case 19:return[4,this.pdfViewer.download()];case 20:return h.sent(),[3,21];case 21:return"AddComments"===n&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.annotationModule.ShowToastMessage("StickyNotes"),o&&!r&&this.pdfViewerBase.focusViewerContainer(),"EditAnnotation"===n&&r&&(d=document.getElementById(this.pdfViewer.dataId+"_highLight"))&&d.children[0]&&d.children[0].focus(),[2]}}))}))},e}(),Vu=function(){function e(e,t,i){var n=this;this.toolbarBorderHeight=1,this.isToolbarHidden=!1,this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.isSquigglyEnabled=!1,this.isHighlightBtnVisible=!0,this.isCommentBtnVisible=!0,this.isUnderlineBtnVisible=!0,this.isStrikethroughBtnVisible=!0,this.isSquigglyBtnVisible=!0,this.isColorToolVisible=!0,this.isOpacityToolVisible=!0,this.isDeleteAnnotationToolVisible=!0,this.isCurrentAnnotationOpacitySet=!1,this.isStampBtnVisible=!1,this.isShapeBtnVisible=!1,this.isSignatureBtnVisible=!1,this.isInkBtnVisible=!1,this.isFontFamilyToolVisible=!1,this.isFontSizeToolVisible=!1,this.isFontAlignToolVisible=!1,this.isFontColorToolVisible=!1,this.isFontStylesToolVisible=!1,this.isCommentPanelBtnVisible=!1,this.isFreeTextBtnVisible=!1,this.isCalibrateBtnVisible=!1,this.isStrokeColorToolVisible=!1,this.isThicknessToolVisible=!1,this.stampMenu=[],this.stampParentID="",this.inkAnnotationSelected=!1,this.openSignaturePopup=!1,this.isSavedSignatureClicked=!1,this.saveSignatureCount=0,this.saveInitialCount=0,this.isToolbarCreated=!1,this.scrollerTimer=0,this.scrollInterval=null,this.inkThicknessValue=1,this.inkOpacityValue=1,this.addStampImage=function(e){var t=n,i=e.target.files;if(null!==e.target.files[0]){var o=i[0];if(n.pdfViewer.annotationModule.stampAnnotationModule.customStampName=o.name.split(".")[0],"image"===o.type.split("/")[0]){var s=new FileReader;s.onload=function(e){var i=e.currentTarget.result;t.pdfViewer.annotation.stampAnnotationModule.isStampAddMode=!0,t.pdfViewer.annotationModule.stampAnnotationModule.isStampAnnotSelected=!0,t.pdfViewerBase.stampAdded=!0,n.pdfViewer.annotationModule.stampAnnotationModule.createCustomStampAnnotation(i),t.pdfViewerBase.stampAdded=!1},s.readAsDataURL(o)}}e.target.value="",e.currentTarget.value=""},this.shapePopupOpened=function(){this.pdfViewer.toolbar&&this.pdfViewer.toolbar.deSelectCommentAnnotation(),this.updateDropDownIndex(),document.getElementById("shapetool").focus()},this.calibratePopupOpened=function(){this.pdfViewer.toolbar&&this.pdfViewer.toolbar.deSelectCommentAnnotation(),this.updateDropDownIndex(),document.getElementById("calibratetool").focus()},this.textAlignOpened=function(){var e=document.getElementById("textAligntool");e&&(e.setAttribute("tabindex","0"),e.focus())},this.fontStyleOpened=function(){var e=document.getElementById("textPropertytool");e&&(e.setAttribute("tabindex","0"),e.focus())},this.moreOptionFocus=function(){var e=document.getElementById(this.pdfViewer.dataId+"_annotation_more_icon");e&&e.focus()},this.pdfViewer=e,this.pdfViewerBase=t,this.primaryToolbar=i}return e.prototype.adjustMobileViewer=function(){var e;this.toolbarElement&&(e=this.toolbarElement.clientHeight);var t=!1;this.toolbarElement&&0===this.toolbarElement.children.length&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0?(e=this.propertyToolbar.element.clientHeight,"none"===this.pdfViewer.toolbarModule.toolbarElement.style.display&&(this.pdfViewer.toolbarModule.toolbarElement.style.display="block")):this.freetextToolbarElement&&this.freetextToolbarElement.children.length>0?e=this.freetextToolbarElement.clientHeight:0===e&&this.pdfViewer.toolbarModule.toolbar?(e=this.pdfViewer.toolbarModule.toolbarElement.clientHeight,t=!0):!e&&this.propertyToolbar&&this.propertyToolbar.element.children.length>0&&(e=this.propertyToolbar.element.clientHeight),this.pdfViewer.enableToolbar&&this.toolbarCreated?this.pdfViewerBase.viewerContainer.style.height=Sr(this.pdfViewer,e+e)+"px":t||(this.pdfViewerBase.viewerContainer.style.height.split("%").length>1?this.pdfViewerBase.viewerContainer.style.height=Vr(br(this.pdfViewerBase.viewerContainer),-e)+"px":this.pdfViewerBase.viewerContainer.style.height=Vr(br(this.pdfViewerBase.viewerContainer),e)+"px")},e.prototype.createCustomStampElement=function(){var e=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_stampElement",attrs:{type:"file"}});e.setAttribute("accept",".jpg,.jpeg,.png"),e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.visibility="hidden",document.body.appendChild(e),e.addEventListener("change",this.addStampImage)},e.prototype.checkStampAnnotations=function(){if(this.pdfViewer.annotation.stampAnnotationModule.isStampAddMode&&this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations)for(var e=0;e<this.pdfViewer.selectedItems.annotations.length;e++){var t=this.pdfViewer.selectedItems.annotations[e];!t||t.annotName||t.author||"Shape"===t.shapeAnnotationType&&"Image"===t.shapeAnnotationType||(this.pdfViewer.remove(t),this.pdfViewer.annotation.renderAnnotations(t.pageIndex,null,null,null,null),this.pdfViewer.clearSelection(t.pageIndex))}},e.prototype.onFontColorChange=function(e){var t=e;1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.annotation.modifyFontColor(t):(this.pdfViewer.freeTextSettings.fontColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),this.fontColorElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-textcolor-container"),this.updateColorInIcon(this.fontColorElementInBlazor,t)},e.prototype.onFontFamilyChange=function(e){var t=e;1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyFontFamily(t):(this.pdfViewer.freeTextSettings.fontFamily=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},e.prototype.onFontSizeChange=function(e){var t=e,i=parseFloat(t);1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyFontSize(i):(this.pdfViewer.freeTextSettings.fontSize=i,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},e.prototype.onClickTextAlignment=function(e){var t=e;1===this.pdfViewer.selectedItems.annotations.length&&t?this.pdfViewer.annotation.modifyTextAlignment(t):(this.pdfViewer.freeTextSettings.textAlignment=e.item.value,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()),this.updateTextAlignInIcon(t)},e.prototype.onClickTextProperties=function(e){var t=e;if(1===this.pdfViewer.selectedItems.annotations.length&&t){var i={isBold:void 0,isItalic:void 0,isStrikeout:void 0,isUnderline:void 0};"bold"===t?i.isBold=!this.pdfViewer.selectedItems.annotations[0].font.isBold:"italic"===t?i.isItalic=!this.pdfViewer.selectedItems.annotations[0].font.isItalic:"underline"===t?i.isUnderline=!this.pdfViewer.selectedItems.annotations[0].font.isUnderline:"strikeout"===t&&(i.isStrikeout=!this.pdfViewer.selectedItems.annotations[0].font.isStrikeout),this.pdfViewer.annotation.modifyTextProperties(i,t)}else"bold"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold?this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold=!1:(this.pdfViewer.freeTextSettings.fontStyle=1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"italic"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic?this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic=!1:(this.pdfViewer.freeTextSettings.fontStyle=2,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"underline"===t?this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline?this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=!1:(this.pdfViewer.freeTextSettings.fontStyle=4,this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=!1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()):"strikeout"===t&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough?this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough=!1:(this.pdfViewer.freeTextSettings.fontStyle=8,this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline=!1,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()));this.updateTextPropertySelection(t)},e.prototype.opacityChange=function(e){this.pdfViewerBase.isOpacityChange=!0;var t=1;if(null!=e&&(t=e,t/=100),this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyOpacityProperty(null,t);else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightOpacity=t;break;case"Underline":this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineOpacity=t;break;case"Strikethrough":this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughOpacity=t;break;case"Squiggly":this.pdfViewer.annotationModule.textMarkupAnnotationModule.squigglyOpacity=t}if(1===this.pdfViewer.selectedItems.annotations.length){var i=this.pdfViewer.selectedItems.annotations[0];if(null==i||"Stamp"!==i.shapeAnnotationType&&"Image"!==i.shapeAnnotationType)this.pdfViewer.annotation.modifyOpacity(t,!0);else{var n=u(i),o=u(i);o.opacity=t,this.pdfViewer.nodePropertyChange(i,{opacity:t}),this.pdfViewer.annotation.triggerAnnotationPropChange(i,!1,!1,!1,!0),this.pdfViewer.annotation.addAction(this.pdfViewer.selectedItems.annotations[0].pageIndex,null,this.pdfViewer.selectedItems.annotations[0],"stampOpacity","",n,o),this.pdfViewer.annotation.stampAnnotationModule.updateSessionStorage(this.pdfViewer.selectedItems.annotations[0],null,"opacity")}}else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineOpacity=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowOpacity=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleOpacity=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleOpacity=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonOpacity=t}var s=this.pdfViewer.annotation;s&&s.inkAnnotationModule&&this.isInkAnnotationSelected()&&(sf.base.Browser.isDevice?this.inkOpacityValue=t:this.pdfViewer.inkAnnotationSettings.opacity=t),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.opacity=t,"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.opacity=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()))}},e.prototype.calculateToolbarPosition=function(e){if(e.element&&e.element.parentElement){var t=parseFloat(e.element.parentElement.style.left),i=e.element.parentElement.offsetWidth;t+i<this.pdfViewer.element.offsetWidth+10&&(e.element.parentElement.style.left=t-i+"px")}},e.prototype.thicknessChangeInBlazor=function(e){this.pdfViewerBase.isThicknessChange=!0,1===this.pdfViewer.selectedItems.annotations.length?this.pdfViewer.annotation.modifyThickness(e):this.ShapeThickness(e)},e.prototype.ShapeThickness=function(e){if(this.pdfViewer.annotation.shapeAnnotationModule){switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineThickness=e;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowThickness=e;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleThickness=e;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleThickness=e;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonThickness=e}var t=this.pdfViewer.annotation;t&&t.inkAnnotationModule&&this.isInkAnnotationSelected()&&(this.pdfViewer.inkAnnotationSettings.thickness=e.value),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.thickness=e.value),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderWidth=e.value,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())}var i=this.pdfViewer.annotation;i&&i.inkAnnotationModule&&this.isInkAnnotationSelected()&&(sf.base.Browser.isDevice?(this.inkThicknessValue=e,this.pdfViewer.inkAnnotationSettings.thickness=1):this.pdfViewer.inkAnnotationSettings.thickness=e),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.thickness=e),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderWidth=e,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())},e.prototype.isInkAnnotationSelected=function(){var e=this.pdfViewer.toolbar;return!!(e&&e.annotationToolbarModule&&e.annotationToolbarModule.inkAnnotationSelected)},e.prototype.onColorPickerChange=function(e){var t=e;if(this.pdfViewer.annotationModule.textMarkupAnnotationModule)if(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation)this.pdfViewer.annotationModule.textMarkupAnnotationModule.modifyColorProperty(t);else switch(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode){case"Highlight":this.pdfViewer.annotationModule.textMarkupAnnotationModule.highlightColor=t;break;case"Underline":this.pdfViewer.annotationModule.textMarkupAnnotationModule.underlineColor=t;break;case"Strikethrough":this.pdfViewer.annotationModule.textMarkupAnnotationModule.strikethroughColor=t;break;case"Squiggly":this.pdfViewer.annotationModule.textMarkupAnnotationModule.squigglyColor=t}if(1===this.pdfViewer.selectedItems.annotations.length)this.pdfViewer.annotation.modifyFillColor(t);else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineFillColor=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowFillColor=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleFillColor=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleFillColor=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonFillColor=t}this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.fillColor=t,"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.fillColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties()))}this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container"),this.updateColorInIcon(this.colorDropDownElementInBlazor,t)},e.prototype.onStrokePickerChange=function(e){var t=e;if(1===this.pdfViewer.selectedItems.annotations.length)this.pdfViewer.annotation.modifyStrokeColor(t);else{if(this.pdfViewer.annotation.shapeAnnotationModule)switch(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode){case"Line":this.pdfViewer.annotation.shapeAnnotationModule.lineStrokeColor=t;break;case"Arrow":this.pdfViewer.annotation.shapeAnnotationModule.arrowStrokeColor=t;break;case"Rectangle":this.pdfViewer.annotation.shapeAnnotationModule.rectangleStrokeColor=t;break;case"Circle":this.pdfViewer.annotation.shapeAnnotationModule.circleStrokeColor=t;break;case"Polygon":this.pdfViewer.annotation.shapeAnnotationModule.polygonStrokeColor=t}var i=this.pdfViewer.annotation;i&&i.inkAnnotationModule&&this.isInkAnnotationSelected()&&(this.pdfViewer.inkAnnotationSettings.strokeColor=t),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject.strokeColor=t),this.pdfViewer.drawingObject&&"FreeText"===this.pdfViewer.drawingObject.shapeAnnotationType&&(this.pdfViewer.freeTextSettings.borderColor=t,this.pdfViewer.annotationModule.freeTextAnnotationModule.updateTextProperties())}this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-stroke-container"),this.updateColorInIcon(this.strokeDropDownElementInBlazor,t)},e.prototype.updateColorInIcon=function(e,t){e&&(e.children[0].style.borderBottomColor=t)},e.prototype.updateTextPropertySelection=function(e){"bold"===e?document.getElementById(this.pdfViewer.dataId+"_bold").classList.toggle("textprop-option-active"):"italic"===e?document.getElementById(this.pdfViewer.dataId+"_italic").classList.toggle("textprop-option-active"):"underline"===e?(document.getElementById(this.pdfViewer.dataId+"_underline_textinput").classList.toggle("textprop-option-active"),document.getElementById(this.pdfViewer.dataId+"_strikeout").classList.remove("textprop-option-active")):"strikeout"===e&&(document.getElementById(this.pdfViewer.dataId+"_strikeout").classList.toggle("textprop-option-active"),document.getElementById(this.pdfViewer.dataId+"_underline_textinput").classList.remove("textprop-option-active"))},e.prototype.updateFontFamilyInIcon=function(e){this.fontFamily.value=e},e.prototype.updateTextAlignInIcon=function(e){var t="e-btn-icon e-pv-left-align-icon e-pv-icon",i=document.getElementById(this.pdfViewer.dataId+"_left_align"),n=document.getElementById(this.pdfViewer.dataId+"_right_align"),o=document.getElementById(this.pdfViewer.dataId+"_center_align"),s=document.getElementById(this.pdfViewer.dataId+"_justify_align"),a=document.getElementById(this.pdfViewer.dataId+"_annotation_textalign");"Left"===e?i.classList.add("textprop-option-active"):"Right"===e?(t="e-btn-icon e-pv-right-align-icon e-pv-icon",n.classList.add("textprop-option-active")):"Center"===e?(t="e-btn-icon e-pv-center-align-icon e-pv-icon",o.classList.add("textprop-option-active")):"Justify"===e&&(t="e-btn-icon e-pv-justfiy-align-icon e-pv-icon",s.classList.add("textprop-option-active")),a&&a.children[0]&&a.children[0].children[0]&&(a.children[0].children[0].className=t)},e.prototype.updateFontSizeInIcon=function(e){this.fontSize.value=e+"px"},e.prototype.addInkAnnotation=function(){if(this.pdfViewerBase.updateStampItems(),this.pdfViewer.clearSelection(this.pdfViewer.currentPageNumber-1),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.annotationModule.ShowToastMessage("Ink"),this.pdfViewer.annotationModule.inkAnnotationModule){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e,10)),this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewerBase.focusViewerContainer())}this.inkAnnotationSelected?(this.inkAnnotationSelected=!1,this.pdfViewerBase.disableTextSelectionMode()):(this.deselectAllItemsInBlazor(),this.drawInkAnnotation())},e.prototype.deselectInkAnnotation=function(){this.primaryToolbar.deSelectItem(this.InkAnnotationElement)},e.prototype.drawInkAnnotation=function(){this.inkAnnotationSelected=!0,this.primaryToolbar.selectItem(this.InkAnnotationElement),this.enableSignaturePropertiesTools(!0),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.annotationModule.inkAnnotationModule.drawInk()},e.prototype.resetFreeTextAnnot=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.isNewFreeTextAnnot=!1,this.pdfViewer.annotation.freeTextAnnotationModule.isNewAddedAnnot=!1,sf.base.Browser.isDevice||(this.primaryToolbar.deSelectItem(this.FreeTextElement),this.enableFreeTextAnnotationPropertiesTools(!1))),this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e,10)),this.primaryToolbar.deSelectItem(this.InkAnnotationElement))}this.inkAnnotationSelected=!1,this.primaryToolbar.resetStampAnnotation()},e.prototype.updateInkannotationItems=function(){if(this.pdfViewer.annotationModule&&this.pdfViewer.annotationModule.inkAnnotationModule&&this.inkAnnotationSelected){var e=this.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber;e&&""!==e&&(this.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(parseInt(e,10)),this.pdfViewerBase.isToolbarInkClicked=!0,this.pdfViewer.tool="Ink",this.pdfViewer.clearSelection(e))}},e.prototype.updateFontFamily=function(){this.pdfViewer.annotationModule.freeTextAnnotationModule.isBold?this.updateFontFamilyIcon("_bold",!0):this.updateFontFamilyIcon("_bold",!1),this.pdfViewer.annotationModule.freeTextAnnotationModule.isItalic?this.updateFontFamilyIcon("_italic",!0):this.updateFontFamilyIcon("_italic",!1),this.pdfViewer.annotationModule.freeTextAnnotationModule.isUnderline?(this.updateFontFamilyIcon("_underline_textinput",!0),this.updateFontFamilyIcon("_strikeout",!1)):this.updateFontFamilyIcon("_underline_textinput",!1),this.pdfViewer.annotationModule.freeTextAnnotationModule.isStrikethrough?(this.updateFontFamilyIcon("_strikeout",!0),this.updateFontFamilyIcon("_underline_textinput",!1)):this.updateFontFamilyIcon("_strikeout",!1)},e.prototype.updateFontFamilyIcon=function(e,t){var i=document.getElementById(this.pdfViewer.dataId+e);t?i.classList.add("textprop-option-active"):i.classList.remove("textprop-option-active")},e.prototype.enablePropertiesTool=function(e){this.isHighlightEnabled=!1,this.isUnderlineEnabled=!1,this.isStrikethroughEnabled=!1,this.isSquigglyEnabled=!1,this.pdfViewerBase.isTextMarkupAnnotationModule()&&(e.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1),this.primaryToolbar.deSelectItem(this.highlightItem),this.primaryToolbar.deSelectItem(this.underlineItem),this.primaryToolbar.deSelectItem(this.strikethroughItem),this.enableTextMarkupAnnotationPropertiesTools(!0),this.updateColorInIcon(this.colorDropDownElement,e.textMarkupAnnotationModule.currentTextMarkupAnnotation.color),this.selectAnnotationDeleteItem(!0)},e.prototype.showSeparator=function(){this.isHighlightBtnVisible||this.isUnderlineBtnVisible||this.isStrikethroughBtnVisible||this.applyHideToToolbar(!1,3,3),this.isShapeBtnVisible||this.applyHideToToolbar(!1,5,5),this.isCalibrateBtnVisible||this.applyHideToToolbar(!1,7,7),this.isFreeTextBtnVisible||this.applyHideToToolbar(!1,9,9),this.isStampBtnVisible||this.applyHideToToolbar(!1,11,11),this.isSignatureBtnVisible||this.applyHideToToolbar(!1,13,13),this.isInkBtnVisible||this.applyHideToToolbar(!1,15,15),this.isFontFamilyToolVisible||this.isFontSizeToolVisible||this.isFontColorToolVisible||this.isFontAlignToolVisible||this.isFontStylesToolVisible||this.applyHideToToolbar(!1,21,21),(this.isColorToolVisible||this.isStrokeColorToolVisible||this.isThicknessToolVisible||this.isOpacityToolVisible)&&this.isDeleteAnnotationToolVisible||this.applyHideToToolbar(!1,26,26)},e.prototype.applyHideToToolbar=function(e,t,i){for(var n=!e,o=t;o<=i;o++){var s=void 0,a=this.propertyToolbar&&this.propertyToolbar.element?this.propertyToolbar.element:null,r=this.toolbar&&this.toolbar.element?this.toolbar.element:null;if(r&&r.children&&r.children.length>0?s=this.toolbar:sf.base.Browser.isDevice&&a&&a.children&&a.children.length>0&&(s=this.propertyToolbar),s.items[o]){var l=s.items[o].cssClass;if(l&&""!==l){var d=s.element.querySelector("."+l);d&&this.toolbar.hideItem(d,n)}else s.hideItem(o,n)}}},e.prototype.adjustViewer=function(e){vr(e,!0,this.pdfViewer,this.pdfViewerBase)},e.prototype.adjustMobileToolbar=function(e){for(var t=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar"),i=this.pdfViewer.element.querySelector(".e-pv-mobile-annotation-toolbar"),n=i&&i.parentElement?window.getComputedStyle(i.parentElement).display:"none",o=this.pdfViewer.element.querySelector(".e-pv-annotation-container"),s=o?o.firstElementChild:null,a=this.pdfViewer.element.querySelector(".e-pv-formdesigner-container"),r=a?a.firstElementChild:null,l=0;l<i.children.length;l++)if(i.children[l].classList.contains("e-hscroll")){i.children[l].classList.remove("e-hscroll");var d=document.getElementsByClassName("e-hscroll-content");d&&(d[0].style.display="inline-block")}var h=xr(i,this.pdfViewerBase),p=xr(t,this.pdfViewerBase),c=this.pdfViewerBase.navigationPane.sideBarToolbar;if(e){this.pdfViewerBase.viewerContainer.style.height=Sr(this.pdfViewer,h+p)+"px";var u=!0;if(s&&!this.pdfViewer.enableDesktopMode&&"block"===n){if(this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0){var f=this.pdfViewer.selectedItems.annotations[0];f&&"Redaction"===f.type&&(u=!1)}u&&s.classList.add("e-pv-select"),s.classList.remove("e-pv-unselect"),r&&(r.classList.remove("e-pv-select"),r.classList.add("e-pv-unselect"))}}else{var m=this.pdfViewer.element.querySelector(".e-pv-mobile-formDesigner-toolbar");"none"===(m&&m.parentElement?window.getComputedStyle(m.parentElement).display:"none")&&(this.pdfViewerBase.viewerContainer.style.height=Sr(this.pdfViewer,p)+"px","0px"===this.pdfViewerBase.viewerContainer.style.height&&(this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height,10)-parseInt(c.style.top,10)+"px")),s&&!this.pdfViewer.enableDesktopMode&&"none"===n&&(s.classList.add("e-pv-unselect"),s.classList.remove("e-pv-select"))}sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewerBase.updateCommentPanelasTabletSize()},e.prototype.removeScrollOption=function(){var e=this;this.scrollInterval=setInterval((function(){e.removeToolbarScroller()}),100)},e.prototype.removeToolbarScroller=function(){for(var e=this.pdfViewer.element.querySelector(".e-pv-mobile-annotation-toolbar"),t=0;t<e.children.length;t++)if(e.children[t].classList.contains("e-hscroll")){e.children[t].classList.remove("e-hscroll");var i=document.getElementsByClassName("e-hscroll-content");i&&(i[0].style.display="inline-block")}this.scrollerTimer++,this.scrollerTimer>10&&(clearInterval(this.scrollInterval),this.scrollerTimer=0)},e.prototype.deselectAllItemsInBlazor=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotationModule.textMarkupAnnotationModule.showHideDropletDiv(!0)),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.primaryToolbar.deSelectItem(this.HighlightElement),this.primaryToolbar.deSelectItem(this.UnderlineElement),this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.SquigglyElement&&this.primaryToolbar.deSelectItem(this.SquigglyElement),this.primaryToolbar.deSelectItem(this.FreeTextElement),this.primaryToolbar.deSelectItem(this.InkAnnotationElement),this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateTextMarkupButtons",!1,!1,!1,!1).catch((function(e){throw console.error("Unhandled Exception:",e),e}))),this.resetFreeTextAnnot(),this.clearTextMarkupMode(),this.clearShapeMode(),this.clearMeasureMode(),this.pdfViewer.tool="",sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(this.enableTextMarkupAnnotationPropertiesTools(!1),this.enableFreeTextAnnotationPropertiesTools(!1),this.updateColorInIcon(this.colorDropDownElementInBlazor,"#000000"),this.updateColorInIcon(this.strokeDropDownElementInBlazor,"#000000"),this.updateColorInIcon(this.fontColorElementInBlazor,"#000000"),this.selectAnnotationDeleteItem(!1)),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.freeTextAnnotationModule.isNewFreeTextAnnot=!1)},e.prototype.DeselectItems=function(){this.primaryToolbar.deSelectItem(this.HighlightElement),this.primaryToolbar.deSelectItem(this.UnderlineElement),this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.SquigglyElement&&this.primaryToolbar.deSelectItem(this.SquigglyElement),this.primaryToolbar.deSelectItem(this.InkAnnotationElement)},e.prototype.deselectTextMarkItems=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&!0===this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="",this.primaryToolbar.deSelectItem(this.HighlightElement),this.primaryToolbar.deSelectItem(this.UnderlineElement),this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.SquigglyElement&&this.primaryToolbar.deSelectItem(this.SquigglyElement))},e.prototype.updateInteractionTools=function(){this.pdfViewer.enableTextSelection?(this.pdfViewerBase.initiateTextSelectMode(),sf.base.Browser.isDevice||this.pdfViewer.toolbar.updateInteractionTools(!0)):sf.base.Browser.isDevice||this.pdfViewer.toolbar.updateInteractionTools(!1)},e.prototype.selectAnnotationDeleteItem=function(e,t){if(!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode){if(e){var i=this.pdfViewer.annotationModule.findCurrentAnnotation();i&&(i.annotationSettings&&i.annotationSettings.isLock?this.pdfViewer.annotationModule.checkAllowedInteractions("Delete",i)?this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e):this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(!1):this.pdfViewerBase.blazorUIAdaptor&&this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e))}else this.pdfViewerBase.blazorUIAdaptor&&this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(e);t&&!this.pdfViewer.annotationModule.isDeleteKeyboardClick&&this.pdfViewerBase.focusViewerContainer()}},e.prototype.enableTextMarkupAnnotationPropertiesTools=function(e){sf.base.Browser.isDevice||this.pdfViewerBase.blazorUIAdaptor.enableTextMarkupAnnotationPropertiesTools(e)},e.prototype.checkAnnotationPropertiesChange=function(){var e=this.pdfViewer.selectedItems.annotations[0];if(e&&e.annotationSettings&&(e.annotationSettings.isLock||e.isLocked))return!!this.pdfViewer.annotationModule.checkAllowedInteractions("PropertyChange",e);return!0},e.prototype.enableAnnotationPropertiesTools=function(e){if(!sf.base.Browser.isDevice){var t=this.checkAnnotationPropertiesChange();e||(t=!0),this.pdfViewerBase.blazorUIAdaptor.enableAnnotationPropertiesTool(e,t)}},e.prototype.enableSignaturePropertiesTools=function(e){if(sf.base.Browser.isDevice)this.pdfViewerBase.blazorUIAdaptor.EnableDeleteOption(!0);else{var t=this.checkAnnotationPropertiesChange();e||(t=!0),this.pdfViewerBase.blazorUIAdaptor.enableSignaturePropertiesTools(e,t)}},e.prototype.enableStampAnnotationPropertiesTools=function(e){var t=this.checkAnnotationPropertiesChange();e||(t=!0),this.pdfViewerBase.blazorUIAdaptor.enableStampAnnotationPropertiesTools(e,t)},e.prototype.enableFreeTextAnnotationPropertiesTools=function(e){var t=this.checkAnnotationPropertiesChange();e||(t=!0),this.pdfViewerBase.blazorUIAdaptor.enableFreeTextAnnotationPropertiesTools(e,t)},e.prototype.enableRedactionAnnotationPropertiesTools=function(e){var t=this.checkAnnotationPropertiesChange();e||(t=!0),this.pdfViewerBase.blazorUIAdaptor&&this.pdfViewerBase.blazorUIAdaptor.enableRedactionAnnotationPropertiesTools(e,t)},e.prototype.enableAnnotationAddTools=function(e){this.toolbar&&!sf.base.Browser.isDevice&&(this.pdfViewer.enableTextMarkupAnnotation&&(this.toolbar.enableItems(this.highlightItem.parentElement,e),this.toolbar.enableItems(this.underlineItem.parentElement,e),this.toolbar.enableItems(this.strikethroughItem.parentElement,e),this.toolbar.enableItems(this.squigglyItem.parentElement,e)),this.pdfViewer.enableShapeAnnotation&&this.toolbar.enableItems(this.shapeElement.parentElement,e),this.pdfViewer.enableStampAnnotations&&this.toolbar.enableItems(this.stampElement.parentElement,e),this.pdfViewer.enableMeasureAnnotation&&this.pdfViewerBase.isCalibrateAnnotationModule()&&this.toolbar.enableItems(this.calibrateElement.parentElement,e),this.pdfViewer.enableFreeText&&this.toolbar.enableItems(this.freeTextEditItem.parentElement,e),this.pdfViewer.enableHandwrittenSignature&&this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,e),this.pdfViewer.enableInkAnnotation&&this.toolbar.enableItems(this.inkAnnotationItem.parentElement,e),this.pdfViewer.enableCommentPanel&&this.enableCommentPanelTool(e))},e.prototype.isAnnotationButtonsEnabled=function(){var e=!1;return(this.isHighlightEnabled||this.isUnderlineEnabled||this.isStrikethroughEnabled||this.isSquigglyEnabled)&&(e=!0),e},e.prototype.enableCommentPanelTool=function(e){this.toolbar&&this.toolbar.enableItems(this.commentItem.parentElement,e)},e.prototype.updateToolbarItems=function(){this.pdfViewer.enableTextMarkupAnnotation?this.enableTextMarkupAddTools(!0):this.enableTextMarkupAddTools(!1),this.toolbar.enableItems(this.shapeElement.parentElement,this.pdfViewer.enableShapeAnnotation),this.toolbar.enableItems(this.stampElement.parentElement,this.pdfViewer.enableStampAnnotations),this.toolbar.enableItems(this.calibrateElement.parentElement,this.pdfViewer.enableMeasureAnnotation),this.toolbar.enableItems(this.freeTextEditItem.parentElement,this.pdfViewer.enableFreeText),this.toolbar.enableItems(this.handWrittenSignatureItem.parentElement,this.pdfViewer.enableHandwrittenSignature),this.toolbar.enableItems(this.inkAnnotationItem.parentElement,this.pdfViewer.enableInkAnnotation)},e.prototype.enableTextMarkupAddTools=function(e){this.toolbar.enableItems(this.highlightItem.parentElement,e),this.toolbar.enableItems(this.underlineItem.parentElement,e),this.toolbar.enableItems(this.strikethroughItem.parentElement,e),this.toolbar.enableItems(this.squigglyItem.parentElement,e)},e.prototype.updateAnnnotationPropertyItems=function(){this.colorDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-color-container"),this.strokeDropDownElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-stroke-container"),this.fontColorElementInBlazor=this.pdfViewer.element.querySelector(".e-pv-annotation-textcolor-container"),1===this.pdfViewer.selectedItems.annotations.length?(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.fill,"fillColor")),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeColor,"strokeColor")),"FreeText"===this.pdfViewer.selectedItems.annotations[0].shapeAnnotationType&&(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,this.getColorHexValue(this.pdfViewer.selectedItems.annotations[0].fontColor,"fontColor")),this.pdfViewerBase.blazorUIAdaptor.updateFontFamilyInIcon(this.pdfViewer.selectedItems.annotations[0].fontFamily),this.pdfViewerBase.blazorUIAdaptor.updateFontSizeInIcon(this.pdfViewer.selectedItems.annotations[0].fontSize))):(this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.colorDropDownElementInBlazor,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.strokeDropDownElementInBlazor,"#000000"),this.pdfViewer.toolbar.annotationToolbarModule.updateColorInIcon(this.fontColorElementInBlazor,"#000000"))},e.prototype.getColorHexValue=function(e,t){return"#ffffff00"===e&&(e="#ffffff"),"red"===e.toLowerCase()&&(e="#FF0000"),"transparent"!==e?e:"fontColor"===t||"strokeColor"===t?"#000000":"#ffffff"},e.prototype.setColorInPicker=function(e,t){e&&e.setProperties({value:t},!0)},e.prototype.resetToolbar=function(){this.adjustViewer(!1),this.updateToolbarItems(),(this.pdfViewer.isAnnotationToolbarOpen||this.pdfViewer.isAnnotationToolbarVisible)&&this.pdfViewer.enableAnnotationToolbar?(this.toolbarElement.style.display="",this.isToolbarHidden=!1,this.adjustViewer(!0),this.enableAnnotationAddTools(!1),this.pdfViewer.isAnnotationToolbarVisible=!0):(this.toolbarElement.style.display="none",this.isToolbarHidden=!0,this.pdfViewer.isAnnotationToolbarVisible=!1)},e.prototype.clearTextMarkupMode=function(){this.pdfViewerBase.isTextMarkupAnnotationModule()&&(this.pdfViewer.annotationModule.textMarkupAnnotationModule.isTextMarkupAnnotationMode=!1,this.pdfViewer.annotation.textMarkupAnnotationModule.currentTextMarkupAddMode="")},e.prototype.clearShapeMode=function(){this.pdfViewerBase.isShapeAnnotationModule()&&(this.pdfViewer.annotation.shapeAnnotationModule.currentAnnotationMode="")},e.prototype.clearMeasureMode=function(){this.pdfViewerBase.isCalibrateAnnotationModule()&&(this.pdfViewer.annotation.measureAnnotationModule.currentAnnotationMode="")},e.prototype.afterAnnotationToolbarCreationInBlazor=function(){this.HighlightElement=document.getElementById(this.pdfViewer.dataId+"_highLight").children[0],this.UnderlineElement=document.getElementById(this.pdfViewer.dataId+"_underline").children[0],this.StrikethroughElement=document.getElementById(this.pdfViewer.dataId+"_strikethrough").children[0];var e=document.getElementById(this.pdfViewer.dataId+"_squiggly");e&&e.children.length>0&&(this.SquigglyElement=e.children[0]),this.InkAnnotationElement=document.getElementById(this.pdfViewer.dataId+"_annotation_ink").children[0],this.InkAnnotationElement.classList.add("e-pv-tbar-btn"),this.FreeTextElement=document.getElementById(this.pdfViewer.dataId+"_annotation_freeTextEdit").children[0],this.HighlightElement=this.addClassToToolbarInBlazor(this.HighlightElement,"e-pv-highlight","_highLight"),this.UnderlineElement=this.addClassToToolbarInBlazor(this.UnderlineElement,"e-pv-underline","_underline"),this.StrikethroughElement=this.addClassToToolbarInBlazor(this.StrikethroughElement,"e-pv-strikethrough","_strikethrough"),this.SquigglyElement&&(this.SquigglyElement=this.addClassToToolbarInBlazor(this.SquigglyElement,"e-pv-squiggly","_squiggly"))},e.prototype.updateDropDownIndex=function(){var e=this;[{id:"_annotation_shapes",action:function(e){return e.setAttribute("tabindex","0")}},{id:"_annotation_calibrate",action:function(e){return e.setAttribute("tabindex","0")}},{id:"_annotation_stamp",action:function(e){return e.removeAttribute("tabindex")}}].forEach((function(t){var i=document.getElementById(e.pdfViewer.dataId+t.id);i&&i.firstElementChild instanceof HTMLElement&&t.action(i.firstElementChild)}))},e.prototype.addClassToToolbarInBlazor=function(e,t,i){if(e.classList.add(t),e.classList.add("e-pv-tbar-btn"),e.childNodes.length>0){var n=e.childNodes[0];n&&n.classList&&(n.id=this.pdfViewer.dataId+i+"Icon",n.classList.remove("e-icons"),n.classList.remove("e-btn-icon"),this.pdfViewer.enableRtl&&n.classList.add("e-right"))}return e},e.prototype.handleHighlightInBlazor=function(){this.HighlightElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.HighlightElement):this.HighlightElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.HighlightElement),this.StrikethroughElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.SquigglyElement&&this.SquigglyElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.SquigglyElement),this.UnderlineElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.UnderlineElement)},e.prototype.handleUnderlineInBlazor=function(){this.UnderlineElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.UnderlineElement):this.UnderlineElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.UnderlineElement),this.StrikethroughElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.StrikethroughElement),this.SquigglyElement&&this.SquigglyElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.SquigglyElement),this.HighlightElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.HighlightElement)},e.prototype.handleStrikethroughInBlazor=function(){this.StrikethroughElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.StrikethroughElement):this.StrikethroughElement.classList.contains("e-pv-select")||this.primaryToolbar.selectItem(this.StrikethroughElement),this.HighlightElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.HighlightElement),this.UnderlineElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.UnderlineElement),this.SquigglyElement&&this.SquigglyElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.SquigglyElement)},e.prototype.handleSquigglyInBlazor=function(){this.SquigglyElement&&this.SquigglyElement.classList.contains("e-pv-select")?this.primaryToolbar.deSelectItem(this.SquigglyElement):this.SquigglyElement&&!this.SquigglyElement.classList.contains("e-pv-select")&&this.primaryToolbar.selectItem(this.SquigglyElement),this.HighlightElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.HighlightElement),this.UnderlineElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.UnderlineElement),this.StrikethroughElement.classList.contains("e-pv-select")&&this.primaryToolbar.deSelectItem(this.StrikethroughElement)},e.prototype.AnnotationSliderOpened=function(){if(this.pdfViewer.selectedItems.annotations&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.selectedItems.annotations[0]){if(this.pdfViewer.selectedItems.annotations[0].wrapper&&this.pdfViewer.selectedItems.annotations[0].wrapper.children[0]){var e=100*this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.opacity,t=Math.round(this.pdfViewer.selectedItems.annotations[0].wrapper.children[0].style.strokeWidth);this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateAnnotationSlider",e,t).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}}else if(this.pdfViewer.annotationModule.textMarkupAnnotationModule&&this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation){var i=100*this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation.opacity;this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateAnnotationOpacity",i).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}this.pdfViewer.selectedItems.annotations&&0===this.pdfViewer.selectedItems.annotations.length&&null==this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAnnotation&&this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateAnnotationSlider",100,1).catch((function(e){throw console.error("Unhandled Exception:",e),e}));var n=document.querySelector(".e-control.e-slider.e-lib.e-pv-annotation-opacity-slider"),o=document.querySelector(".e-control.e-slider.e-lib.e-pv-annotation-thickness-slider"),s=document.querySelector(".e-pv-annotation-thickness-slider .e-handle.e-handle-first"),a=document.querySelector(".e-pv-annotation-opacity-slider .e-handle.e-handle-first");n&&n.setAttribute("tabindex","0"),o&&o.setAttribute("tabindex","0"),s&&s.focus(),a&&a.focus(),sf.base.Browser.isDevice},e.prototype.DropDownOpened=function(e){if(sf.base.Browser.isDevice)e&&e.element&&(t=e.element.getBoundingClientRect()).left+t.width>window.outerWidth&&(e.element.style.left=this.pdfViewerBase.viewerContainer.clientWidth/2-t.left+"px");else if(e&&e[0].element){var t=e[0].element.getBoundingClientRect(),i=this.pdfViewerBase.navigationPane.sideBarToolbar,n=i?i.getBoundingClientRect().width:0;t.left>this.pdfViewerBase.viewerContainer.clientWidth+t.width+n&&(e[0].element.style.left=t.left-this.pdfViewerBase.viewerContainer.clientHeight/2+"px")}},e.prototype.annotatioToolbarClick=function(e,t,i,n,o){e&&this.deselectTextMarkItems(),t&&this.resetFreeTextAnnot(),i&&("Highlight"===o?this.handleHighlightInBlazor():"Underline"===o?this.handleUnderlineInBlazor():"Strikethrough"===o?this.handleStrikethroughInBlazor():"Squiggly"===o&&this.handleSquigglyInBlazor()),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&"HandWrittenSignature"!==o&&this.pdfViewer.annotationModule.ShowToastMessage(o),n?this.clearTextMarkupMode():this.pdfViewer.annotationModule.setAnnotationMode(o)},e}(),Cu=function(){function e(e,t,i){this.isToolbarHidden=!1,this.scrollerTimer=0,this.scrollInterval=null,this.pdfViewer=e,this.pdfViewerBase=t,this.primaryToolbar=i}return e.prototype.adjustViewer=function(e){vr(e,!1,this.pdfViewer,this.pdfViewerBase)},e.prototype.adjustMobileToolbar=function(e){var t=this.getElement(".e-pv-mobile-toolbar"),i=this.getElement(".e-pv-mobile-formDesigner-toolbar"),n=this.getElement(".e-pv-formdesigner-container"),o=this.getElement(".e-pv-annotation-container"),s=i&&i.parentElement?window.getComputedStyle(i.parentElement).display:"none",a=n?n.firstElementChild:null,r=o?o.firstElementChild:null,l=this.pdfViewerBase.viewerContainer;this.pdfViewer.formDesignerInteraction=e,this.pdfViewer.formDesignerModule.setInteractionMode(e),this.removeScrollClass(i);var d=xr(i,this.pdfViewerBase),h=xr(t,this.pdfViewerBase),p=this.pdfViewerBase.navigationPane.sideBarToolbar,c=this.pdfViewer.enableDesktopMode;if(e)l.style.height=Sr(this.pdfViewer,d+h)+"px",c||"block"!==s||(this.selectElement(a,!0),this.selectElement(r,!1));else{var u=this.pdfViewer.element.querySelector(".e-pv-mobile-annotation-toolbar");"none"===(u&&u.parentElement?window.getComputedStyle(u.parentElement).display:"none")&&(l.style.height=Sr(this.pdfViewer,h)+"px","0px"===l.style.height&&(l.style.height=parseInt(this.pdfViewer.element.style.height,10)-parseInt(p.style.top,10)+"px")),c||"none"!==s||this.selectElement(a,!1)}sf.base.Browser.isDevice&&!c&&this.pdfViewerBase.updateCommentPanelasTabletSize()},e.prototype.selectElement=function(e,t){e&&(t?(e.classList.add("e-pv-select"),e.classList.remove("e-pv-unselect")):(e.classList.add("e-pv-unselect"),e.classList.remove("e-pv-select")))},e.prototype.getElement=function(e){return this.pdfViewer.element.querySelector(e)},e.prototype.removeScrollClass=function(e){for(var t=0;t<e.children.length;t++)if(e.children[t].classList.contains("e-hscroll")){e.children[t].classList.remove("e-hscroll");var i=document.getElementsByClassName("e-hscroll-content");i&&(i[0].style.display="inline-block")}},e.prototype.removeScrollOption=function(){var e=this;this.scrollInterval=setInterval((function(){e.removeToolbarScroller()}),100)},e.prototype.removeToolbarScroller=function(){var e=this.getElement(".e-pv-mobile-formDesigner-toolbar");this.removeScrollClass(e),this.scrollerTimer++,this.scrollerTimer>10&&(clearInterval(this.scrollInterval),this.scrollerTimer=0)},e.prototype.showHideDeleteIcon=function(e){this.toolbar&&(this.toolbar.enableItems(this.deleteItem.parentElement,e),this.deleteItem.setAttribute("tabindex",e?"0":"-1"),this.deleteItem.setAttribute("data-tabindex",e?"0":"-1"))},e}(),Iu=function(){function e(e,t,i){this.redactionToolbarCreated=!1,this.pdfViewer=e,this.pdfViewerBase=t,this.toolbar=i}return e.prototype.adjustViewer=function(e){var t=this.pdfViewer.element.querySelector(".e-pv-annotation-toolbar"),i=this.pdfViewer.element.querySelector(".e-pv-formdesigner-toolbar"),n=this.pdfViewer.element.querySelector(".e-pv-blazor-redaction-toolbar"),o=null,s=!1;n&&(0!==n.getBoundingClientRect().height&&(s=!0,o=n));s||(i&&i.getBoundingClientRect().height>0&&(o=i),t&&t.getBoundingClientRect().height>0&&(o=t));var a=xr(o,this.pdfViewerBase),r=this.pdfViewer.element.querySelector(".e-pv-sidebar-toolbar-splitter"),l=xr(this.pdfViewer.element.querySelector(".e-pv-toolbar"),this.pdfViewerBase),d=[this.pdfViewerBase.navigationPane.sideBarToolbar,this.pdfViewerBase.navigationPane.sideBarContentContainer,r,this.pdfViewerBase.navigationPane.commentPanelContainer,this.pdfViewerBase.navigationPane.commentPanelResizer];this.pdfViewer.enableToolbar||(l=0);var h,p=l+a,c=Sr(this.pdfViewer,p)+"px",u=this.getNavigationToolbarHeight(p,this.pdfViewer);h={top:p+"px",height:u},d.forEach((function(e){void 0!==h.top&&(e.style.top=h.top),void 0!==h.height&&(e.style.height=h.height)})),this.pdfViewerBase.viewerContainer.style.height=c},e.prototype.getNavigationToolbarHeight=function(e,t){var i=t.element.getBoundingClientRect().height;return 0!==i?i-e+"px":""},e.prototype.adjustMobileToolbar=function(e){var t=this.pdfViewer.element.querySelector(".e-pv-mobile-toolbar"),i=this.pdfViewer.element.querySelector(".e-pv-mobile-redaction-toolbar"),n=i&&i.parentElement?window.getComputedStyle(i.parentElement).display:"none",o=this.pdfViewer.element.querySelector(".e-pv-redaction-container"),s=this.pdfViewer.element.querySelector(".e-pv-annotation-container"),a=this.pdfViewer.element.querySelector(".e-pv-formdesigner-container"),r=o&&o.firstElementChild?o.firstElementChild:null,l=s&&s.firstElementChild?s.firstElementChild:null,d=a&&a.firstElementChild?a.firstElementChild:null;if(i)for(var h=0;h<i.children.length;h++)if(i.children[h].classList.contains("e-hscroll")){i.children[h].classList.remove("e-hscroll");var p=document.getElementsByClassName("e-hscroll-content");p&&p.length>0&&(p[0].style.display="inline-block")}var c=i?xr(i,this.pdfViewerBase):0,u=t?xr(t,this.pdfViewerBase):0,f=this.pdfViewerBase.navigationPane.sideBarToolbar;if(e)this.pdfViewerBase.viewerContainer.style.height=Sr(this.pdfViewer,c+u)+"px",r&&!this.pdfViewer.enableDesktopMode&&"block"===n&&(r.classList.add("e-pv-select"),r.classList.remove("e-pv-unselect"),l&&(l.classList.remove("e-pv-select"),l.classList.add("e-pv-unselect")),d&&(d.classList.remove("e-pv-select"),d.classList.add("e-pv-unselect")));else{var m=this.pdfViewer.element.querySelector(".e-pv-mobile-annotation-toolbar"),g=this.pdfViewer.element.querySelector(".e-pv-mobile-formDesigner-toolbar"),w=m&&m.parentElement?window.getComputedStyle(m.parentElement).display:"none",y=g&&g.parentElement?window.getComputedStyle(g.parentElement).display:"none";"none"===w&&"none"===y&&(this.pdfViewerBase.viewerContainer.style.height=Sr(this.pdfViewer,u)+"px","0px"===this.pdfViewerBase.viewerContainer.style.height&&(this.pdfViewerBase.viewerContainer.style.height=parseInt(this.pdfViewer.element.style.height,10)-parseInt(f.style.top,10)+"px")),r&&!this.pdfViewer.enableDesktopMode&&"none"===n&&(r.classList.add("e-pv-unselect"),r.classList.remove("e-pv-select")),this.pdfViewer.enableDesktopMode||"none"!==y||this.selectElement(r,!1)}sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewerBase.updateCommentPanelasTabletSize()},e.prototype.selectElement=function(e,t){e&&(t?(e.classList.add("e-pv-select"),e.classList.remove("e-pv-unselect")):(e.classList.add("e-pv-unselect"),e.classList.remove("e-pv-select")))},e.prototype.getModuleName=function(){return"RedactionToolbar"},e}(),ku=function(){function e(e,t){var i=this;this.childNavigateCount=0,this.bookmarkClick=function(e){if(e.event.target.classList.contains("e-icons"))i.childNavigateCount++;else{var t=e.data.Id;i.childNavigateCount=0,i.pdfViewerBase.navigationPane.goBackToToolbar();var n=i.bookmarkList.getSelectedItems();i.navigateToBookmark(t,e.text,n.data.FileName)}return!1},this.nodeClick=function(e){i.setHeight(e.node);var t=Number(e.nodeData.id),n=i.treeObj.getTreeData(e.node);if(i.navigateToBookmark(t,e.node.textContent,n[0].FileName),i.pdfViewer.annotationModule&&i.pdfViewer.annotationModule.inkAnnotationModule){var o=parseInt(i.pdfViewer.annotationModule.inkAnnotationModule.currentPageNumber,10);i.pdfViewer.annotationModule.inkAnnotationModule.drawInkAnnotation(o)}return!1},this.bookmarkPanelBeforeOpen=function(e){if(i.pdfViewer.enableBookmarkStyles)for(var t=0;t<i.bookmarkStyles.length;t++)if(e.text.trim()===i.bookmarkStyles[t].Text.trim()){var n=e.node.lastElementChild;if(n){for(var o=i.bookmarkStyles[t].FontStyle.split(","),s=0;s<o.length;s++)switch(o[s].trim()){case"Italic":n.style.fontStyle="italic";break;case"Bold":n.style.fontWeight="Bold"}var a=n.getElementsByClassName("e-pv-bookmark-title")[0];a?a.style.color=i.bookmarkStyles[t].Color:n.children[0].style.color=i.bookmarkStyles[t].Color}break}},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createRequestForBookmarks=function(){var e=this,t={hashId:this.pdfViewerBase.hashId,action:"Bookmarks",elementId:this.pdfViewer.dataId,uniqueId:this.pdfViewerBase.documentId};this.pdfViewerBase.jsonDocumentId&&(t.documentId=this.pdfViewerBase.jsonDocumentId),this.pdfViewer.enableBookmarkStyles&&(t.bookmarkStyles=this.pdfViewer.enableBookmarkStyles),this.bookmarkRequestHandler=new Wn(this.pdfViewer),this.bookmarkRequestHandler.url=e.pdfViewer.serviceUrl+"/Bookmarks",this.bookmarkRequestHandler.responseType="json",sf.base.isNullOrUndefined(t.hashId)||""===t.hashId.trim()||this.bookmarkRequestHandler.send(t),this.bookmarkRequestHandler.onSuccess=function(t){e.pdfViewerBase.navigationPane&&e.pdfViewerBase.navigationPane.disableBookmarkButton();var i=t.data;if(i){if("object"!==n(i))try{i=JSON.parse(i)}catch(t){e.pdfViewerBase.onControlError(500,i,"Bookmarks"),i=null}if(i&&i.uniqueId===e.pdfViewerBase.documentId){e.pdfViewer.fireAjaxRequestSuccess("Bookmarks",i),e.bookmarks={bookMark:i.Bookmarks},e.bookmarkStyles=i.Bookmarkstyles,e.bookmarksDestination={bookMarkDestination:i.BookmarksDestination};var o={bookmarks:e.bookmarks,bookmarksDestination:e.bookmarksDestination};if(e.pdfViewer&&e.pdfViewer._dotnetInstance){var s=null;e.pdfViewer.enableChunkMessages&&null!=(s=e.pdfViewer.jsonObjectToGetBlobInfo(o))&&(o=null),e.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateBookmarkCollection",o,s).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}}}e.pdfViewerBase.navigationPane&&(null==e.bookmarks?(e.pdfViewerBase.navigationPane.disableBookmarkButton(),e.pdfViewer._dotnetInstance&&e.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateBookmarkCollection",null,null).catch((function(e){throw console.error("Unhandled Exception:",e),e}))):(e.isBookmarkViewDiv=!1,e.pdfViewer.isBookmarkPanelOpen&&e.pdfViewerBase.navigationPane.openBookmarkcontentInitially()))},this.bookmarkRequestHandler.onFailure=function(t){e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,"Bookmarks")},this.bookmarkRequestHandler.onError=function(t){e.pdfViewerBase.openNotificationPopup(),e.pdfViewer.fireAjaxRequestFailed(t.status,t.statusText,"Bookmarks")}},e.prototype.renderBookmarkcontent=function(){var e=this;if(!this.isBookmarkViewDiv){this.bookmarkView=this.pdfViewer.element.querySelector(".e-pv-bookmark-view"),this.pdfViewerBase.navigationPane.sideBarContent.appendChild(this.bookmarkView);var t=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_bookmark_iconview",className:"e-pv-bookmark-icon-view"});if(this.pdfViewer.enableRtl){i=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon e-right"});t.appendChild(i)}else{var i=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_bookmark_icon",className:"e-pv-bookmark-icon e-pv-icon"});t.appendChild(i)}var n=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_bookmark_Title",className:"e-pv-bookmark-title"});this.pdfViewer.enableRtl&&(n.style.paddingRight="26px"),n.innerText="${Title}",t.appendChild(n);for(var o=["mouseover","keydown"],s=0;s<o.length;s++)this.bookmarkView.addEventListener(o[s],(function(t){e.setHeight(t.target)}));this.isBookmarkViewDiv=!0}this.bookmarkView.style.display="block"},e.prototype.renderBookmarkContentMobile=function(){null!=this.bookmarkView&&this.bookmarkView.remove(),this.bookmarkView=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_bookmark_view",className:"e-pv-bookmark-view"}),this.pdfViewerBase.getElement("_bookmarks_container").appendChild(this.bookmarkView),this.bookmarkList=new sf.lists.ListView({dataSource:this.bookmarks.bookMark,fields:{id:"Id",text:"Title",child:"Child"},showHeader:!1,select:this.bookmarkClick.bind(this)}),this.bookmarkList.isStringTemplate=!0,this.pdfViewer.enableRtl&&(this.bookmarkList.enableRtl=!0),this.bookmarkList.appendTo(this.bookmarkView)},e.prototype.setHeight=function(e){this.treeObj&&this.treeObj.fullRowSelect&&e.classList&&(e.classList.contains("e-treeview")?e=e.querySelector(".e-node-focus").querySelector(".e-fullrow"):e.classList.contains("e-list-parent")?e=e.querySelector(".e-fullrow"):"e-fullrow"!==e.classList.value&&(e.closest&&e.closest(".e-list-item")?e=e.closest(".e-list-item").querySelector(".e-fullrow"):e.classList.contains("e-list-item")?e=e.querySelector(".e-fullrow"):e.classList.contains("e-icons")&&e.classList.contains("interaction")&&e.parentElement.parentElement.classList.contains("e-list-item")&&(e=e.parentElement.parentElement.querySelector(".e-fullrow"))),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))},e.prototype.setBookmarkContentHeight=function(){if(this.treeObj){var e=this.treeObj.element;this.treeObj.fullRowSelect&&(e.classList.contains("e-treeview")&&(e=e.querySelector(".e-node-focus").querySelector(".e-fullrow")),e.nextElementSibling&&(e.style.height=e.nextElementSibling.offsetHeight+"px"))}},e.prototype.bindBookmarkListViewEvent=function(){var e=document.getElementsByClassName("e-pv-bookmark-view");e&&e[0]&&e[0].children.length>0&&e[0].children[1]&&e[0].children[1].addEventListener("mousedown",this.bookmarkListClickEvent.bind(this))},e.prototype.bookmarkListClickEvent=function(e){var t=this;if(e.target&&!e.target.classList.contains("e-icons")&&e.target.parentElement.parentElement){var i=e.target.parentElement.parentElement.id.split("_")[1];if(this.pdfViewer&&this.pdfViewer._dotnetInstance&&setTimeout((function(){t.pdfViewer._dotnetInstance.invokeMethodAsync("BookmarkViewClosed",null).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}),0),this.closeBookmarkContainer(),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var n=document.getElementById(this.pdfViewer.dataId+"_mainContainer"),o=function(){n&&"block"===window.getComputedStyle(n).display?setTimeout((function(){t.navigateToBookmark(i,e.target.innerHTML,t.pdfViewer.fileName)}),300):setTimeout(o,100)};o()}else setTimeout((function(){t.navigateToBookmark(i,e.target.innerHTML,t.pdfViewer.fileName)}),300)}},e.prototype.closeBookmarkContainer=function(){this.pdfViewerBase.getElement("_bookmarks_container")&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="")},e.prototype.navigateToBookmark=function(e,t,i){if(!sf.base.isNullOrUndefined(e)&&this.bookmarksDestination.bookMarkDestination[parseInt(e.toString(),10)]){var n=this.bookmarksDestination.bookMarkDestination[parseInt(e.toString(),10)].PageIndex,o=this.bookmarksDestination.bookMarkDestination[parseInt(e.toString(),10)].Y;-1!==n&&this.goToBookmark(n,o),this.pdfViewer.fireBookmarkClick(-1!==n?n+1:n,o,t,i)}},e.prototype.getBookmarks=function(){if(this.bookmarks&&this.bookmarksDestination)return this.pdfViewer.enableChunkMessages?this.pdfViewer.jsonObjectToGetBlobInfo({bookmarks:this.bookmarks,bookmarksDestination:this.bookmarksDestination},!0):{bookmarks:this.bookmarks,bookmarksDestination:this.bookmarksDestination}},e.prototype.goToBookmark=function(e,t){var i=this.pdfViewerBase.pageSize[e].height,n=(0===t?this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor():this.pdfViewerBase.pageSize[e].top*this.pdfViewerBase.getZoomFactor()+(i-t)*this.pdfViewerBase.getZoomFactor()).toString();return this.pdfViewerBase.viewerContainer.scrollTop=parseInt(n,10),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.pdfViewerBase.mobileScrollerContainer.style.display="",this.pdfViewerBase.updateMobileScrollerPosition()),!1},e.prototype.clear=function(){this.pdfViewerBase.navigationPane&&(this.pdfViewerBase.navigationPane.disableBookmarkButton(),this.pdfViewerBase.navigationPane.updateViewerContainerOnClose()),this.bookmarks&&(this.bookmarks.bookMark=[],this.bookmarks=null),this.bookmarksDestination&&(this.bookmarksDestination.bookMarkDestination=[]),this.bookmarkRequestHandler&&this.bookmarkRequestHandler.clear()},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"BookmarkView"},e}(),Mu=function(){function e(e,t){var i=this;this.isTextSelection=!1,this.selectionStartPage=null,this.isBackwardPropagatedSelection=!1,this.contextMenuHeight=144,this.backwardStart=0,this.selectionRangeArray=[],this.selectionAnchorTouch=null,this.selectionFocusTouch=null,this.scrollMoveTimer=0,this.isMouseLeaveSelection=!1,this.isTouchSelection=!1,this.previousScrollDifference=0,this.topStoreLeft=null,this.topStoreRight=null,this.isTextSearched=!1,this.isSelectionStartTriggered=!1,this.allTextContent="",this.onLeftTouchSelectElementTouchStart=function(e){i.initiateSelectionByTouch()},this.onRightTouchSelectElementTouchStart=function(e){i.initiateSelectionByTouch()},this.onLeftTouchSelectElementTouchEnd=function(e){i.terminateSelectionByTouch(e)},this.onRightTouchSelectElementTouchEnd=function(e){i.terminateSelectionByTouch(e)},this.onLeftTouchSelectElementTouchMove=function(e){var t,n=!1;e.preventDefault(),e.target.style.zIndex="0";var o=i.dropDivElementRight,s=i.isTouchedWithinContainer(e);if(o&&s){var a=o.getBoundingClientRect(),r=e.changedTouches[0].clientX,l=e.changedTouches[0].clientY;if(e.target.style.zIndex="1000",t=i.getNodeElement(void 0,r,l,e,t)){var d=Math.sqrt((l-a.top)*(l-a.top)+(r-a.left)*(r-a.left)),h=i.isCloserTouchScroll(d),p=!1;if(l<=a.top?(p=i.selectTextByTouch(t.parentElement,r,l,!1,"left",h))&&(i.dropElementLeft.style.transform="rotate(0deg)",i.dropElementRight.style.transform="rotate(-90deg)"):(p=i.selectTextByTouch(t.parentElement,r,l,!0,"left",h))&&(n=!0),p){var c=i.dropDivElementLeft.getBoundingClientRect(),u=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,f=i.getClientValueTop(l,i.pdfViewerBase.currentPageNumber-1),m=r-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left,g=i.pdfViewerBase.viewerContainer.getBoundingClientRect().left,w=i.pdfViewerBase.pageContainer.getBoundingClientRect().left;if(i.dropDivElementLeft.style.top=u*i.pdfViewerBase.getZoomFactor()+f+"px",i.topStoreLeft={pageTop:u,topClientValue:i.getMagnifiedValue(f),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(m),isHeightNeeded:!1},n){if("rotate(0deg)"===i.dropElementLeft.style.transform){var y=i.dropElementRight.getBoundingClientRect().width,v=parseFloat(i.dropDivElementRight.style.left);i.dropDivElementRight.style.left=v-y+"px",i.dropElementLeft.style.transform="rotate(-90deg)",i.dropElementRight.style.transform="rotate(0deg)"}i.dropDivElementLeft.style.left=r-(g+c.width)+(g-w)+"px"}else n||"rotate(0deg)"!==i.dropElementLeft.style.transform||(i.dropDivElementLeft.style.left=r-(g+c.width)+(g-w)+"px");i.previousScrollDifference=d}}}},this.onRightTouchSelectElementTouchMove=function(e){var t,n=!1;e.preventDefault(),e.target.style.zIndex="0";var o=i.dropDivElementLeft,s=i.isTouchedWithinContainer(e);if(o&&s){var a=o.getBoundingClientRect(),r=e.changedTouches[0].clientX,l=e.changedTouches[0].clientY;if(e.target.style.zIndex="1000",t=i.getNodeElement(void 0,r,l,e,t)){var d=Math.sqrt((l-a.top)*(l-a.top)+(r-a.left)*(r-a.left)),h=i.isCloserTouchScroll(d),p=!1;if(l>=a.top?(p=i.selectTextByTouch(t.parentElement,r,l,!0,"right",h))&&(i.dropElementRight.style.transform="rotate(-90deg)",i.dropElementLeft.style.transform="rotate(0deg)"):(p=i.selectTextByTouch(t.parentElement,r,l,!1,"right",h))&&(n=!0),p){var c=i.pdfViewerBase.pageSize[i.pdfViewerBase.currentPageNumber-1].top,u=i.getClientValueTop(l,i.pdfViewerBase.currentPageNumber-1),f=i.dropDivElementRight.getBoundingClientRect();i.dropDivElementRight.style.top=c*i.pdfViewerBase.getZoomFactor()+u+"px";var m=r-i.pdfViewerBase.getElement("_pageDiv_"+(i.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left,g=i.pdfViewerBase.viewerContainer.getBoundingClientRect().left,w=i.pdfViewerBase.pageContainer.getBoundingClientRect().left;if(i.topStoreRight={pageTop:c,topClientValue:i.getMagnifiedValue(u),pageNumber:i.pdfViewerBase.currentPageNumber-1,left:i.getMagnifiedValue(m),isHeightNeeded:!1},n){if("rotate(-90deg)"===i.dropElementRight.style.transform){var y=i.dropElementLeft.getBoundingClientRect().width,v=parseFloat(i.dropDivElementLeft.style.left);i.dropDivElementLeft.style.left=v+y+"px",i.dropElementRight.style.transform="rotate(0deg)",i.dropElementLeft.style.transform="rotate(-90deg)"}i.dropDivElementRight.style.left=r-(g+f.width)+(g-w)+"px"}else n||"rotate(-90deg)"!==i.dropElementRight.style.transform||(i.dropDivElementRight.style.left=r-g+(g-w)+"px");i.previousScrollDifference=d}}}},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.textSelectionOnMouseMove=function(e,t,i,n){var o=e;if(this.isTextSearched=!0,o.nodeType===o.TEXT_NODE){this.isSelectionStartTriggered||this.pdfViewerBase.getTextMarkupAnnotationMode()||(this.pdfViewer.fireTextSelectionStart(this.pdfViewerBase.currentPageNumber),this.isSelectionStartTriggered=!0),this.isBackwardPropagatedSelection=!1;var s=o.ownerDocument.createRange(),a=window.getSelection();if(null!==a.anchorNode){var r=a.anchorNode.compareDocumentPosition(a.focusNode);(!r&&a.anchorOffset>a.focusOffset||r===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}s.selectNodeContents(o);for(var l=0,d=s.endOffset;l<d;){s.setStart(o,l),s.setEnd(o,l+1);var h=(w=s.getBoundingClientRect()).right;if(n&&(h=parseInt(w.right.toString(),10)),w.left<=t&&h>=t&&parseInt(w.top.toString(),10)<=i&&w.bottom>=i)null!==a.anchorNode&&a.anchorNode.parentNode.classList.contains("e-pv-text")&&(a.anchorOffset>l?0!==this.backwardStart?s.setStart(a.anchorNode,this.backwardStart):s.setStart(a.anchorNode,a.anchorOffset+1):s.setStart(a.anchorNode,a.anchorOffset)),a.removeAllRanges(),a.addRange(s),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,!!document.documentMode||(this.isBackwardPropagatedSelection||s.endOffset>l?(this.backwardStart!==s.startOffset&&s.startOffset>=l&&(this.backwardStart=s.endOffset),0===l&&1!==s.endOffset?a.extend(o,l):a.extend(o,l+1)):n?a.extend(o,l):a.extend(o,l+1)),s.detach();l+=1}var p=this.pdfViewer.annotationModule;if(p&&p.textMarkupAnnotationModule&&p.textMarkupAnnotationModule.isEnableTextMarkupResizer(p.textMarkupAnnotationModule.currentTextMarkupAddMode)){var c=document.getElementById(this.pdfViewer.dataId+"_droplet_left");if(this.pdfViewerBase.isSelection&&a&&a.rangeCount>0){var u=a.getRangeAt(0).getBoundingClientRect(),f=u.left,m=u.top;this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(f,m),this.pdfViewerBase.isSelection=!1}else c&&"none"===c.style.display&&this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(t,i);this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(t,i)}}else for(var g=0;g<o.childNodes.length;g++){var w;if(o.childNodes[g].nodeType===o.TEXT_NODE)(w=(s=this.getSelectionRange(g,o)).getBoundingClientRect()).left<=t&&w.right>=parseInt(t.toString(),10)&&parseInt(w.top.toString(),10)<=i&&w.bottom>=i?(s.detach(),this.textSelectionOnMouseMove(o.childNodes[g],t,i,n)):s.detach()}},e.prototype.textSelectionOnDrag=function(e,t,i,n){var o=e;if(this.isTextSearched=!0,o.nodeType===o.TEXT_NODE){this.isBackwardPropagatedSelection=!1;var s=o.ownerDocument.createRange(),a=window.getSelection();if(null!==a.anchorNode){var r=a.anchorNode.compareDocumentPosition(a.focusNode);(!r&&a.anchorOffset>a.focusOffset||r===Node.DOCUMENT_POSITION_PRECEDING)&&(this.isBackwardPropagatedSelection=!0)}s.selectNodeContents(o);for(var l=0,d=s.endOffset;l<d;){if(s.setStart(o,l),s.setEnd(o,l+1),(f=s.getBoundingClientRect()).left<=t&&f.right>=t&&parseInt(f.top.toString(),10)<=i&&f.bottom>=i)return n?(null!==a.anchorNode&&a.anchorNode.parentNode.classList.contains("e-pv-text")&&s.setStart(a.anchorNode,a.anchorOffset),a.removeAllRanges(),a.addRange(s),a.extend(o,l)):a.focusNode&&(s.setEnd(a.focusNode,a.focusOffset),a.removeAllRanges(),a.addRange(s)),this.isTextSelection||(this.selectionStartPage=this.pdfViewerBase.currentPageNumber-1),this.isTextSelection=!0,s.detach(),!0;l+=1}if(this.pdfViewerBase.isSelection){var h=a.getRangeAt(0).getBoundingClientRect(),p=h.left,c=h.top;this.pdfViewer.annotation.textMarkupAnnotationModule.updateLeftposition(p,c),this.pdfViewerBase.isSelection=!1}this.pdfViewer.annotation.textMarkupAnnotationModule.updatePosition(t,i)}else for(var u=0;u<o.childNodes.length;u++){var f;if(o.childNodes[u].nodeType===o.TEXT_NODE)(f=(s=this.getSelectionRange(u,o)).getBoundingClientRect()).left<=t&&f.right>=t&&parseInt(f.top.toString(),10)<=i&&f.bottom>=i?(s.detach(),this.textSelectionOnDrag(o.childNodes[u],t,i,n)):s.detach()}return null},e.prototype.selectTextRegion=function(e,t){for(var i=null,n=e-1,o=0;o<t.length;o++){var s=t[o],a=(s.left?s.left:s.Left)*this.pdfViewerBase.getZoomFactor(),r=(s.top?s.top:s.Top)*this.pdfViewerBase.getZoomFactor(),l=(s.width?s.width:s.Width)*this.pdfViewerBase.getZoomFactor(),d=(s.height?s.height:s.Height,this.pdfViewerBase.getElement("_textLayer_"+n));if(d){for(var h=d.childNodes,p=0;p<h.length;p++)if(h[p]){var c=h[p].getBoundingClientRect(),u=this.getClientValueTop(c.top,n),f=c.left-this.pdfViewerBase.getElement("_pageDiv_"+n).getBoundingClientRect().left,m=f+c.width,g=parseInt(h[p].style.left,10),w=parseInt(h[p].style.top,10),y=this.checkLeftBounds(f,g,m,a),v=this.checkTopBounds(u,w,r);if(y&&v){i=h[p];break}}if(null!=i){var b=this.pdfViewerBase.getElement("_textLayer_"+n).getBoundingClientRect();this.textSelectionOnMouseMove(i,a+b.left,r+b.top,!1),t.length-1===o&&this.textSelectionOnMouseMove(i,a+b.left+l,r+b.top,!1)}}}},e.prototype.checkLeftBounds=function(e,t,i,n){var o=!1;return(e===parseInt(n.toString(),10)||parseInt(e.toString(),10)===parseInt(n.toString(),10)||e+1===parseInt(n.toString(),10)||e-1===parseInt(n.toString(),10)||t===parseInt(n.toString(),10)||t===n||i>=n&&e<=n)&&(o=!0),o},e.prototype.checkTopBounds=function(e,t,i){var n=!1;return e!==parseInt(i.toString(),10)&&parseInt(e.toString(),10)!==parseInt(i.toString(),10)&&parseInt((e+1).toString(),10)!==parseInt(i.toString(),10)&&parseInt((e-1).toString(),10)!==parseInt(i.toString(),10)&&t!==parseInt(i.toString(),10)&&t!==i||(n=!0),n},e.prototype.textSelectionOnMouseLeave=function(e){var t=this;e.preventDefault();var i=this.pdfViewerBase.viewerContainer.offsetTop;this.pdfViewer.magnificationModule&&"fitToPage"===this.pdfViewer.magnificationModule.fitType||(e.clientY>i?this.scrollMoveTimer=setInterval((function(){t.scrollForwardOnSelection()}),500):this.scrollMoveTimer=setInterval((function(){t.scrollBackwardOnSelection()}),500))},e.prototype.scrollForwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop+200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},e.prototype.scrollBackwardOnSelection=function(){this.isMouseLeaveSelection=!0,this.pdfViewerBase.viewerContainer.scrollTop=this.pdfViewerBase.viewerContainer.scrollTop-200,this.stichSelectionOnScroll(this.pdfViewerBase.currentPageNumber-1)},e.prototype.clear=function(){this.scrollMoveTimer&&(this.isMouseLeaveSelection=!1,clearInterval(this.scrollMoveTimer))},e.prototype.selectAWord=function(e,t,i,n){if(e.nodeType===e.TEXT_NODE){var o=window.getSelection();(f=e.ownerDocument.createRange()).selectNodeContents(e);for(var s=0,a=f.endOffset;s<a;){if(f.setStart(e,s),f.setEnd(e,s+1),(m=f.getBoundingClientRect()).left<=t&&m.right>=t&&m.top<=i&&m.bottom>=i){for(var r=e.textContent,l=[],d=void 0,h=void 0,p=0;p<r.length;p++)" "===r[p]&&l.push(p);for(var c=0;c<l.length;c++){if(s===l[c]&&(d=l[c],h=l[c]),l[0]>s){d=0,h=l[c];break}s>l[c]&&s<l[c+1]?(d=l[c],h=l[c+1]):s>l[c]&&(l[c+1]||(d=l[c]))}h||(h=r.length),0===d?f.setStart(e,d):f.setStart(e,d+1),f.setEnd(e,h),o.removeAllRanges(),o.addRange(f),this.isTextSelection=!0;var u=sf.base.isNullOrUndefined(f.startContainer.parentElement)?f.startContainer.parentNode:f.startContainer.parentElement;this.selectionStartPage=parseInt(u.id.split("_text_")[1],10),n&&(this.selectionAnchorTouch={anchorNode:o.anchorNode.parentElement.id,anchorOffset:o.anchorOffset},this.selectionFocusTouch={focusNode:o.focusNode.parentElement.id,focusOffset:o.focusOffset}),sf.base.Browser.isIE||f.detach();break}s+=1}}else for(p=0;p<e.childNodes.length;p++){var f,m;(m=(f=this.getSelectionRange(p,e)).getBoundingClientRect()).left<=t&&m.right>=t&&m.top<=i&&m.bottom>=i?(f.detach(),this.selectAWord(e.childNodes[p],t,i,n)):f.detach()}},e.prototype.getSelectionRange=function(e,t){var i=t.childNodes[e].ownerDocument.createRange();return i.selectNodeContents(t.childNodes[e]),i},e.prototype.selectEntireLine=function(e){var t=[],i=e.target,n=i.getBoundingClientRect(),o=parseInt((n.top+n.height/2).toString(),10),s=parseInt(e.target.id.split("_text_")[1],10),a=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+"_text_"+s+'"]');if(i.classList.contains("e-pv-text")){this.pdfViewer.fireTextSelectionStart(s+1);for(var r=0;r<a.length;r++){var l=a[r].getBoundingClientRect(),d=parseInt(l.top.toString(),10),h=parseInt(l.bottom.toString(),10);if(d<=o&&h>o&&n.bottom+10>h){var p=a[r].id;""!==p&&t.push(p)}}var c=window.getSelection();c.removeAllRanges();var u=document.createRange(),f=t.length-1,m=document.getElementById(t[0]),g=document.getElementById(t[f]);g.childNodes.length>0?(u.setStart(m.childNodes[0],0),u.setEnd(g.childNodes[0],g.textContent.length)):(u.setStart(m.childNodes[0],0),u.setEnd(g,1)),this.selectionStartPage=parseInt(u.startContainer.parentElement.id.split("_text_")[1],10),c.addRange(u),this.isTextSelection=!0,null!=c&&"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&this.calculateContextMenuPosition(e.clientY,e.clientY)}},e.prototype.enableTextSelectionMode=function(){this.pdfViewerBase.isTextSelectionDisabled=!1,this.pdfViewerBase.viewerContainer.classList.remove("e-disable-text-selection"),this.pdfViewerBase.viewerContainer.classList.add("e-enable-text-selection"),this.pdfViewerBase.viewerContainer.addEventListener("selectstart",(function(){return!0}))},e.prototype.clearTextSelection=function(){if(this.isTextSelection){if(this.pdfViewerBase.textLayer.clearDivSelection(),window.getSelection&&window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges(),this.pdfViewer.linkAnnotationModule){var e=this.pdfViewerBase.currentPageNumber-3;e=e<0?0:e;var t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e;i<=t;i++)this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(i,!1)}this.pdfViewer.annotation&&this.pdfViewer.annotation.textMarkupAnnotationModule&&this.pdfViewer.annotation.textMarkupAnnotationModule.showHideDropletDiv(!0),this.selectionRangeArray=[],this.isTextSelection=!1,this.isTouchSelection=!1,this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.close(),this.removeTouchElements()}},e.prototype.removeTouchElements=function(){this.dropDivElementLeft&&(this.dropDivElementLeft.parentElement.removeChild(this.dropDivElementLeft),this.dropDivElementLeft=null,this.dropElementLeft.style.transform="rotate(0deg)"),this.dropDivElementRight&&(this.dropDivElementRight.parentElement.removeChild(this.dropDivElementRight),this.dropDivElementRight=null,this.dropElementRight.style.transform="rotate(-90deg)")},e.prototype.resizeTouchElements=function(){var e=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left;if(this.dropDivElementLeft){var t=this.dropDivElementLeft.getBoundingClientRect(),i=0,n=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreLeft.pageNumber).getBoundingClientRect();this.dropDivElementLeft.style.left=parseFloat(this.topStoreLeft.left.toString())*this.pdfViewerBase.getZoomFactor()+n.left-e-t.width/2+"px",this.topStoreLeft.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementLeft.style.top=parseFloat(this.topStoreLeft.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreLeft.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}if(this.dropDivElementRight){t=this.dropDivElementRight.getBoundingClientRect(),i=0;var o=this.pdfViewerBase.getElement("_pageDiv_"+this.topStoreRight.pageNumber).getBoundingClientRect();this.dropDivElementRight.style.left=parseFloat(this.topStoreRight.left.toString())*this.pdfViewerBase.getZoomFactor()+o.left-e-t.width/2+"px",this.topStoreRight.isHeightNeeded&&(i=t.height/2*this.pdfViewerBase.getZoomFactor()),this.dropDivElementRight.style.top=parseFloat(this.topStoreRight.pageTop.toString())*this.pdfViewerBase.getZoomFactor()+parseFloat(this.topStoreRight.topClientValue.toString())*this.pdfViewerBase.getZoomFactor()+i+"px"}},e.prototype.textSelectionOnMouseup=function(e){if(this.clear(),null!==window.getSelection().anchorNode){if(this.isMouseLeaveSelection=!1,this.isSelectionStartTriggered=!1,this.maintainSelectionOnZoom(!0,!1),this.fireTextSelectEnd(),this.pdfViewerBase.textLayer.getTextSearchStatus()&&!this.pdfViewer.textSearchModule.isSearchActive){this.pdfViewerBase.textLayer.clearDivSelection();for(var t=this.pdfViewer.textSearchModule.getIndexes(),i=parseFloat(t.lowerPageValue.toString()),n=parseFloat(t.higherPageValue.toString()),o=i;o<n;o++)this.applySelectionRangeOnScroll(o);this.pdfViewer.textSearchModule.searchAfterSelection()}else this.applySpanForSelection();this.pdfViewer.linkAnnotationModule&&this.pdfViewer.linkAnnotationModule.modifyZindexForTextSelection(this.pdfViewerBase.currentPageNumber-1,!1),this.isTextSearched&&"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&(this.calculateContextMenuPosition(e.clientY,e.clientX),this.isTextSearched=!1)}else this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection(),this.pdfViewerBase.contextMenuModule.close(),this.removeTouchElements()},e.prototype.fireTextSelectEnd=function(){if(0!==this.selectionRangeArray.length){for(var e=0,t="",i=[],n=0;n<this.selectionRangeArray.length;n++){t+=this.selectionRangeArray[n].textContent;for(var o=0;o<this.selectionRangeArray[n].rectangleBounds.length;o++){var s=this.selectionRangeArray[n].rectangleBounds[o];i.push({left:s.left,right:s.right,top:s.top,bottom:s.bottom,width:s.width,height:s.height,pageIndex:this.selectionRangeArray[n].pageNumber+1})}this.selectionRangeArray[n].isBackward&&0===n?e=this.selectionRangeArray[n].pageNumber+1:this.selectionRangeArray[n].isBackward||n!==this.selectionRangeArray.length-1||(e=this.selectionRangeArray[n].pageNumber+1)}this.pdfViewer.fireTextSelectionEnd(e,t,i)}},e.prototype.maintainSelectionOnZoom=function(e,t){var i=window.getSelection();if("Range"===i.type||!i.type&&!i.isCollapsed){var n=this.pdfViewerBase.textLayer.isBackWardSelection(i);if(null!==i.anchorNode){var o=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1],10),s=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1],10);if(this.isTouchSelection&&isNaN(s))if(i.focusNode===this.pdfViewerBase.pageContainer){var a=this.pdfViewerBase.pageContainer.lastChild;a.classList.contains("e-pv-touch-select-drop")?s=parseInt(a.previousSibling.previousSibling.id.split("_pageDiv_")[1],10):a.classList.contains("e-pv-page-div")&&(s=parseInt(a.id.split("_pageDiv_")[1],10))}if(n)for(r=o;r>=s;r--)this.maintainSelectionOnScroll(r,t);else for(var r=o;r<=s;r++)this.maintainSelectionOnScroll(r,t)}e||i.removeAllRanges()}},e.prototype.isSelectionAvailableOnScroll=function(e){for(var t=!1,i=this.selectionRangeArray,n=0;n<i.length;n++)if(null!==i[n]&&e===i[n].pageNumber){t=!0,this.isTouchSelection&&!this.pdfViewerBase.getMagnified()&&(t=!1);break}return t},e.prototype.applySelectionRangeOnScroll=function(e){this.isMouseLeaveSelection?this.applySelectionMouseScroll(e):this.applySelectionRange(e)},e.prototype.getSelectionRangeFromArray=function(e){for(var t=!1,i=null,n=this.selectionRangeArray,o=0;o<n.length;o++)if(null!==n[o]&&e===n[o].pageNumber){i=n[o],t=!0;break}return{isSelectionAvailable:t,selectionRange:i}},e.prototype.applySelectionRange=function(e){var t=this.getSelectionRangeFromArray(e),i=t.isSelectionAvailable,n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+e);if(n&&i&&0!==n.childNodes.length){var o=t.selectionRange,s=void 0,a=void 0,r=void 0,l=void 0;if(o.isBackward){var d=parseInt(o.endNode.split("_text_")[1].split("_")[1],10),h=parseInt(o.startNode.split("_text_")[1].split("_")[1],10);d<h?(s=d,r=o.endOffset,l=o.startOffset,a=h):(s=h,r=o.endOffset,a=d,l=o.startOffset)}else s=parseInt(o.startNode.split("text_")[1].split("_")[1],10),a=parseInt(o.endNode.split("text_")[1].split("_")[1],10),r=o.startOffset,l=o.endOffset;window.getSelection().removeAllRanges(),this.pdfViewerBase.textLayer.applySpanForSelection(e,e,s,a,r,l),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},e.prototype.applySelectionMouseScroll=function(e){var t=this.getSelectionRangeFromArray(e);if(t.isSelectionAvailable){var i=t.selectionRange,n=window.getSelection(),o=document.getElementById(i.startNode).childNodes[0],s=document.getElementById(i.endNode).childNodes[0],a=document.createRange();if(null===n.anchorNode)i.isBackward?(a.setStart(s,i.endOffset),a.setEnd(o,i.startOffset)):(a.setStart(o,i.startOffset),a.setEnd(s,i.endOffset));else{var r=isNaN(parseInt(n.anchorNode.parentElement.id.split("_text_")[1],10))?parseInt(n.anchorNode.id.split("_pageDiv_")[1],10):parseInt(n.anchorNode.parentElement.id.split("_text_")[1],10);isNaN(r)&&(r=parseInt(n.anchorNode.id.split("_text_")[1],10));var l=isNaN(parseInt(n.focusNode.parentElement.id.split("_text_")[1],10))?parseInt(n.focusNode.id.split("_pageDiv_")[1],10):parseInt(n.focusNode.parentElement.id.split("_text_")[1],10),d=parseInt(i.startNode.split("_text_")[1],10);if(r===l&&r===d)i.isBackward?(a.setStart(s,i.endOffset),a.setEnd(o,i.startOffset)):(a.setStart(o,i.startOffset),a.setEnd(s,i.endOffset));else if(isNaN(r))isNaN(r)&&(i.isBackward?(a.setStart(s,i.endOffset),a.setEnd(o,i.startOffset)):(a.setStart(o,i.startOffset),a.setEnd(s,i.endOffset)));else if(isNaN(r)||i.isBackward){var h=this.pdfViewerBase.textLayer.isBackWardSelection(n);if(r>d&&d>l&&r!==l)h?n.extend(n.focusNode,n.focusOffset):(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(n.focusNode,n.focusOffset));else if(r<d&&d<l&&r!==l)h?n.extend(n.focusNode,n.focusOffset):(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(n.focusNode,n.focusOffset));else if(r<d)h?d!==this.selectionRangeArray[0].pageNumber?this.extendCurrentSelection(s.parentElement,i.endOffset,n,a):this.extendCurrentSelection(o.parentElement,i.startOffset,n,a):d!==this.selectionRangeArray[0].pageNumber?(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(s,i.endOffset)):(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(o,i.startOffset));else if(r===d)d===l?(a.setStart(o,i.startOffset),a.setEnd(o,i.startOffset),n.removeAllRanges(),n.addRange(a),a=document.createRange(),n.extend(s,i.endOffset)):h?this.extendCurrentSelection(s.parentElement,i.endOffset,n,a):(a.setStart(s,i.endOffset),a.setEnd(n.focusNode,n.focusOffset));else if(l===d)h?n.extend(n.focusNode,n.focusOffset):(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(n.focusNode,n.focusOffset));else if(r>d){var p=parseInt(i.startNode.split("_"+d+"_")[1],10),c=parseInt(i.endNode.split("_"+d+"_")[1],10);h?d!==this.selectionRangeArray[0].pageNumber?p<c?this.extendCurrentSelection(o.parentElement,i.startOffset,n,a):(a.setStart(s.parentElement,i.endOffset),a.setEnd(n.anchorNode,n.anchorOffset)):this.extendCurrentSelection(s.parentElement,i.endOffset,n,a):p<c?(a.setStart(o,i.startOffset),a.setEnd(n.focusNode,n.focusOffset)):(a.setStart(s,i.endOffset),a.setEnd(n.focusNode,n.focusOffset))}}else r<d&&d<l&&r!==l?(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(n.focusNode,n.focusOffset)):r<d?(a.setStart(n.anchorNode,n.anchorOffset),a.setEnd(s,i.endOffset)):(a.setStart(o,i.startOffset),a.setEnd(n.focusNode,n.focusOffset))}""!==a.toString()&&(n.removeAllRanges(),n.addRange(a))}},e.prototype.maintainSelectionOnScroll=function(e,t){var i=this.isSelectionAvailableOnScroll(e);this.isTextSelection&&!i&&this.maintainSelection(e,t)},e.prototype.maintainSelection=function(e,t){var i=window.getSelection();if(this.isTextSelection&&("Range"===i.type||!i.type&&!i.isCollapsed)){var n=parseInt(this.getNodeElementFromNode(i.anchorNode).id.split("_text_")[1],10),o=parseInt(this.getNodeElementFromNode(i.focusNode).id.split("_text_")[1],10);if(isNaN(o)&&null!==i.anchorNode)if(this.pdfViewerBase.textLayer.isBackWardSelection(i))o=parseInt(this.pdfViewerBase.pageContainer.firstChild.id.split("_pageDiv_")[1],10);else{var s=this.pdfViewerBase.pageContainer.lastChild;o=s.classList.contains("e-pv-touch-select-drop")?parseInt(s.previousSibling.previousSibling.id.split("_pageDiv_")[1],10):parseInt(s.id.split("_pageDiv_")[1],10)}var a=this.pdfViewerBase.textLayer.isBackWardSelection(i);if(this.isTouchSelection&&e>o&&e>n)return;if(n===o){var r=null,l=this.getSelectionBounds(i.getRangeAt(0),e),d=this.getSelectionRectangleBounds(i.getRangeAt(0),e),h=1===this.getNodeElementFromNode(i.anchorNode).childNodes.length?i.anchorOffset:this.getCorrectOffset(i.anchorNode,i.anchorOffset),p=1===this.getNodeElementFromNode(i.focusNode).childNodes.length?i.focusOffset:this.getCorrectOffset(i.focusNode,i.focusOffset);r={isBackward:a,startNode:this.getNodeElementFromNode(i.anchorNode).id,startOffset:h,endNode:this.getNodeElementFromNode(i.focusNode).id,endOffset:p,textContent:this.allTextContent,pageNumber:e,bound:l,rectangleBounds:d},this.pushSelectionRangeObject(r,e)}else{(r=this.createRangeObjectOnScroll(e,n,o))&&(this.pushSelectionRangeObject(r,e),t&&this.stichSelection(a,i,e))}}},e.prototype.getCorrectOffset=function(e,t){for(var i=0,n=this.getNodeElementFromNode(e),o=0;o<n.childNodes.length;o++){if(n.childNodes[o]===e){i+=t;break}i+=n.childNodes[o].textContent.length}return i},e.prototype.pushSelectionRangeObject=function(e,t){if(this.isTouchSelection){var i=this.selectionRangeArray.filter((function(e){return e.pageNumber===t}));if(i.length>0){var n=this.selectionRangeArray.indexOf(i[0]);return void this.selectionRangeArray.splice(n,1,e)}}var o=this.selectionRangeArray.filter((function(e){return e.pageNumber===t+1}));if(0===o.length)if(this.isTouchSelection&&0!==this.selectionRangeArray.length){var s=this.selectionRangeArray.filter((function(e){return e.pageNumber===t-1}));if(0!==s.length){var a=this.selectionRangeArray.indexOf(s[0]);this.selectionRangeArray.splice(a+1,0,e)}else{var r=this.selectionRangeArray[0];t<r.pageNumber?this.selectionRangeArray.splice(0,0,e):this.selectionRangeArray.push(e)}}else this.selectionRangeArray.push(e);else{var l=this.selectionRangeArray.indexOf(o[0]);this.selectionRangeArray.splice(l,0,e)}},e.prototype.extendCurrentSelection=function(e,t,i,n){var o=i.focusOffset,s=i.focusNode.parentElement.id,a=isNaN(parseInt(s.split("_text_")[1],10))?parseInt(i.focusNode.id.split("_pageDiv_")[1],10):parseInt(s.split("_text_")[1],10);isNaN(parseInt(s.split("_text_")[1],10))&&(s=this.pdfViewerBase.getElement("_textLayer_"+(a+1)).firstChild.id),n.setStart(e.childNodes[0],t),n.setEnd(e.childNodes[0],t),i.removeAllRanges(),i.addRange(n),i.extend(document.getElementById(s).childNodes[0],o)},e.prototype.stichSelection=function(e,t,i){var n,o=document.createRange();if(e)if(n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(i-1))){(s=n.lastChild)||(s=(n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(i-2))).lastChild),this.extendCurrentSelection(s,this.getTextLastLength(s),t,o)}else{var s=(n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(i+1))).firstChild;this.extendCurrentSelection(s,0,t,o)}else if(n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(i+1))){var a=n.firstChild;a||(a=(n=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(i+2))).firstChild),o.setStart(a.childNodes[0],0),o.setEnd(t.focusNode,t.focusOffset),t.removeAllRanges(),t.addRange(o)}},e.prototype.textSelectionOnMouseWheel=function(e){this.isMouseLeaveSelection=!0,this.stichSelectionOnScroll(e)},e.prototype.stichSelectionOnScroll=function(e){var t=window.getSelection();if(this.isTextSelection){var i,n=parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1],10),o=parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1],10),s=void 0;if(n!==e&&o!==e)if(this.pdfViewerBase.textLayer.isBackWardSelection(t)){if(s=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(e-1)))(i=s.firstChild)&&this.extendSelectionStich(i.childNodes[0],0,t)}else if(s=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(e-1)))if(i=s.lastChild)i.childNodes[0]?this.extendSelectionStich(i.childNodes[0],this.getTextLastLength(i),t):this.extendSelectionStich(i,this.getTextLastLength(i),t);else{var a=(s=this.pdfViewerBase.getElement("_textLayer_"+e)).firstChild;this.extendSelectionStich(a.childNodes[0],0,t)}this.maintainSelectionArray()}},e.prototype.extendSelectionStich=function(e,t,i){i.extend&&i.extend(e,t)},e.prototype.createRangeObjectOnScroll=function(e,t,i){var n=window.getSelection();if(null!==n.anchorNode){var o=this.pdfViewerBase.textLayer.isBackWardSelection(n),s=void 0,a=void 0,r=void 0,l=void 0,d=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+e);if(d.childNodes){if(o)e===t?(s=this.getNodeElementFromNode(n.anchorNode),a=d.firstChild,r=this.getCorrectOffset(n.anchorNode,n.anchorOffset),l=0):e<t&&e>i?(s=d.firstChild,a=d.lastChild,r=0,l=this.getTextLastLength(a)):e===i&&(s=this.getNodeElementFromNode(n.focusNode),a=d.lastChild,r=this.getCorrectOffset(n.focusNode,n.focusOffset),l=this.getTextLastLength(a));else if(e===t)s=this.getNodeElementFromNode(n.anchorNode),a=d.lastChild,r=this.getCorrectOffset(n.anchorNode,n.anchorOffset),l=this.getTextLastLength(a);else if(e>t&&e<i)s=d.firstChild,a=d.lastChild,r=0,l=this.getTextLastLength(a);else if(e===i){s=d.firstChild,-1!==this.getNodeElementFromNode(n.focusNode).id.indexOf(i.toString())?(a=this.getNodeElementFromNode(n.focusNode),l=this.getCorrectOffset(n.focusNode,n.focusOffset)):(a=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+i).lastChild,l=this.getTextLastLength(a)),r=0}if(s&&a){var h=this.getSelectionRangeObject(s.id,r,a.id,l,e),p=(h.toString(),this.getSelectionBounds(h,e)),c=this.getSelectionRectangleBounds(h,e);return{isBackward:o,startNode:s.id,startOffset:r,endNode:a.id,endOffset:l,textContent:this.allTextContent,pageNumber:e,bound:p,rectangleBounds:c}}return null}}return null},e.prototype.getSelectionRangeObject=function(e,t,i,n,o){var s=document.getElementById(e),a=document.getElementById(i);s.childNodes[0]&&(s=s.childNodes[0]),a.childNodes[0]&&(a=a.childNodes[0]);var r=parseInt(e.split("_"+o+"_")[1],10),l=parseInt(i.split("_"+o+"_")[1],10),d=document.createRange();return r<=l?(d.setStart(s,t),d.setEnd(a,n)):(d.setStart(a,n),d.setEnd(s,t)),d},e.prototype.getSelectionBounds=function(e,t){var i=null;if(this.getNodeElementFromNode(e.startContainer)!==this.getNodeElementFromNode(e.endContainer)){var n=document.createRange(),o=this.createRangeForSelection(e.startContainer,e.endContainer,e.startOffset,e.endOffset,n);i=this.normalizeBounds(o.getBoundingClientRect(),t)}else i=this.normalizeBounds(e.getBoundingClientRect(),t);return i},e.prototype.getSelectionRectangleBounds=function(e,t){var i=[],n=this.getNodeElementFromNode(e.startContainer),o=this.getNodeElementFromNode(e.endContainer),s=null,a=[];if(this.allTextContent="",n!==o){for(var r=0,l=0,d=this.pdfViewerBase.textLayer.getPageIndex(e.startContainer),h=this.pdfViewerBase.textLayer.getTextIndex(e.startContainer,d),p=this.pdfViewerBase.textLayer.getPageIndex(e.endContainer),c=this.pdfViewerBase.textLayer.getTextIndex(e.endContainer,p),u=this.pdfViewerBase.getElement("_textLayer_"+p).childNodes,f=t===d?h:0;f<u.length;f++){var m=u[f];if(f>c)break;if(r=f===h?e.startOffset:0,l=f===c?e.endOffset:m.textContent.length,0!==r||0!==l){for(var g=document.createRange(),w=0;w<m.childNodes.length;w++){var y=m.childNodes[w];g.setStart(y,r),g.setEnd(y,l)}var v=this.normalizeBounds(g.getBoundingClientRect(),t),b=this.pdfViewerBase.pageSize[t],S=0;this.getAngle(b.rotation);m&&""!==m.style.transform&&(S=m.style.transform.startsWith("rotate(90deg)")?90:m.style.transform.startsWith("rotate(180deg)")?180:m.style.transform.startsWith("rotate(-90deg)")||m.style.transform.startsWith("rotate(270deg)")?270:0),v.rotation=S;var A=g.toString();if(null!=i&&i.length>=1){var x=i[i.length-1],V=0;0!==x.rotation&&180!==x.rotation||x.rotation!==v.rotation?90!==x.rotation&&270!==x.rotation||x.rotation!==v.rotation||(a.push(A),90===x.rotation?(V=Math.abs(v.y-(x.y+x.height)))>30||v.left!==x.left?i.push(v):V<30&&x.left===v.left&&(x.height+=v.height):270===x.rotation&&(x.left===v.left?(x.height+=v.height,x.top>v.top&&(x.top=v.top)):i.push(v))):(a.push(A),0===x.rotation?(V=Math.abs(v.x-(x.x+x.width)))>30||v.top!==x.top?i.push(v):V<30&&x.top===v.top&&(x.width+=v.width):180===x.rotation&&(x.top===v.top?(x.width+=v.width,x.left>v.left&&(x.left=v.left)):i.push(v)))}else i.push(v),a.push(A);if(g.detach(),f===c)break}}for(var C=0;C<a.length;C++){var I=a[C];"\r\n"!==I.slice(I.length-2)||a.length,this.allTextContent+=I}}else{s=this.normalizeBounds(e.getBoundingClientRect(),t),this.allTextContent=e.toString();b=this.pdfViewerBase.pageSize[t],S=0,this.getAngle(b.rotation);n&&""!==n.style.transform&&(S=n.style.transform.startsWith("rotate(90deg)")?90:n.style.transform.startsWith("rotate(180deg)")?180:n.style.transform.startsWith("rotate(-90deg)")||n.style.transform.startsWith("rotate(270deg)")?270:0),s.rotation=S,i.push(s)}return i},e.prototype.getAngle=function(e){var t=0;if(e)switch(e){case 0:t=0;break;case 1:t=90;break;case 2:t=180;break;case 3:t=270}return t},e.prototype.getTextId=function(e){var t=e.lastIndexOf("_"),i=e.substring(t+1,e.length);return parseInt(i,10)},e.prototype.normalizeBounds=function(e,t){var i=this.pdfViewerBase.getElement("_pageDiv_"+t);if(this.pdfViewerBase.isMixedSizeDocument){var n=this.pdfViewerBase.getElement("_textLayer_"+t);n&&(i=n)}var o=i.getBoundingClientRect();return{x:this.getMagnifiedValue(e.left-o.left),y:this.getMagnifiedValue(e.top-o.top),bottom:this.getMagnifiedValue(e.bottom-o.top),height:this.getMagnifiedValue(e.height),left:this.getMagnifiedValue(e.left-o.left),top:this.getMagnifiedValue(e.top-o.top),right:this.getMagnifiedValue(e.right-o.left),width:this.getMagnifiedValue(e.width)}},e.prototype.getMagnifiedValue=function(e){return e/this.pdfViewerBase.getZoomFactor()},e.prototype.getCurrentSelectionBounds=function(e){for(var t=null,i=this.selectionRangeArray,n=0;n<i.length;n++)null!==i[n]&&e===i[n].pageNumber&&(t=i[n].bound);return t},e.prototype.createRangeForSelection=function(e,t,i,n,o){return o.setStart(e,i),o.setEnd(t,n),o},e.prototype.maintainSelectionArray=function(){var e=this;if(0!==this.selectionRangeArray.length){var t=window.getSelection(),i=this.pdfViewerBase.textLayer.isBackWardSelection(t),n=isNaN(parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1],10))?parseInt(t.anchorNode.id.split("_pageDiv_")[1],10):parseInt(this.getNodeElementFromNode(t.anchorNode).id.split("_text_")[1],10);isNaN(n)&&(n=parseInt(t.anchorNode.id.split("_text_")[1],10));var o=isNaN(parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1],10))?parseInt(t.focusNode.id.split("_pageDiv_")[1],10):parseInt(this.getNodeElementFromNode(t.focusNode).id.split("_text_")[1],10);isNaN(o)&&(o=isNaN(parseInt(t.focusNode.id.split("_text_")[1],10))?parseInt(t.focusNode.id.split("_textLayer_")[1],10):parseInt(t.focusNode.id.split("_text_")[1],10));var s=[];if((s=i?this.selectionRangeArray.filter((function(t){return!(o<t.pageNumber&&t.pageNumber<=e.selectionStartPage)})):this.selectionRangeArray.filter((function(t){return!(e.selectionStartPage<=t.pageNumber&&t.pageNumber<o)}))).length>0){for(var a=0;a<s.length;a++){var r=this.selectionRangeArray.indexOf(s[a]);-1!==r&&this.selectionRangeArray.splice(r,1)}1===this.selectionRangeArray.length&&(this.selectionRangeArray[0].pageNumber!==n&&this.selectionRangeArray[0].pageNumber!==o||(s=[]))}}},e.prototype.applySpanForSelection=function(){var e=window.getSelection();if(e.anchorNode!==e.focusNode||e.anchorOffset!==e.focusOffset||e.isCollapsed||e.removeAllRanges(),null!==e.anchorNode&&this.pdfViewerBase.viewerContainer.contains(this.getNodeElementFromNode(e.anchorNode))){var t=void 0,i=void 0,n=void 0,o=void 0,s=void 0,a=void 0;if(this.pdfViewerBase.textLayer.isBackWardSelection(e))t=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1],10),i=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1],10),n=parseInt(this.getNodeElementFromNode(e.focusNode).id.split("_text_")[1].split("_")[1],10),o=parseInt(this.getNodeElementFromNode(e.anchorNode).id.split("_text_")[1].split("_")[1],10),s=e.focusOffset,a=e.anchorOffset;else{var r=this.getNodeElementFromNode(e.anchorNode),l=this.getNodeElementFromNode(e.focusNode);t=-1!==r.id.indexOf("text_")?parseInt(r.id.split("text_")[1],10):parseInt(r.id.split("_textLayer_")[1],10),i=-1!==l.id.indexOf("text_")?parseInt(l.id.split("text_")[1],10):parseInt(l.id.split("_textLayer_")[1],10);var d=!1;if(this.isTouchSelection&&e.focusNode===this.pdfViewerBase.pageContainer){var h=this.pdfViewerBase.pageContainer.lastChild;if(h.classList.contains("e-pv-touch-select-drop")){var p=h.previousSibling.previousSibling;i=parseInt(p.id.split("_pageDiv_")[1],10),l=this.pdfViewerBase.getElement("_textLayer_"+i).lastChild,d=!0}else if(h.classList.contains("e-pv-page-div")){p=h;i=parseInt(p.id.split("_pageDiv_")[1],10),l=this.pdfViewerBase.getElement("_textLayer_"+i).lastChild,d=!0}}r.classList.contains("e-pv-maintaincontent")&&(r=this.getNodeElementFromNode(r),t=parseInt(r.id.split("text_")[1],10)),l.classList.contains("e-pv-maintaincontent")&&(l=this.getNodeElementFromNode(l),i=parseInt(l.id.split("text_")[1],10)),t===i&&(r.contains(l)&&(r=l),l.contains(r)&&(l=r)),n=r.id.split("text_")[1]?parseInt(r.id.split("text_")[1].split("_")[1],10):null,o=l.id.split("text_")[1]?parseInt(l.id.split("text_")[1].split("_")[1],10):null,n=isNaN(n)?o:n,o=isNaN(o)?n:o,s=e.anchorOffset,a=d?l.textContent.length:e.focusOffset}e.removeAllRanges(),this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.textLayer.applySpanForSelection(t,i,n,o,s,a),this.pdfViewer.textSearchModule&&this.pdfViewer.textSearchModule.searchAfterSelection()}},e.prototype.initiateTouchSelection=function(e,t,i){this.pdfViewerBase.isShapeBasedAnnotationsEnabled()&&this.pdfViewer.selectedItems.annotations.length>0&&this.pdfViewer.clearSelection(this.pdfViewer.selectedItems.annotations[0].pageIndex);var n=e.target,o=document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY);0!==o.length&&o[0].classList.contains("e-pv-hyperlink")&&o[1].classList.contains("e-pv-text")&&(n=o[1]);var s=parseFloat(n.id.split("_")[2]);this.pdfViewer.fireTextSelectionStart(s+1),this.selectAWord(n,t,i,!0),this.createTouchSelectElement(e),this.maintainSelectionOnZoom(!0,!1),this.fireTextSelectEnd(),this.applySpanForSelection()},e.prototype.selectTextByTouch=function(e,t,i,n,o,s){var a=!1;if(e.nodeType===e.TEXT_NODE){var r=e.ownerDocument.createRange(),l=window.getSelection();r.selectNodeContents(e);for(var d=0,h=r.endOffset;d<h;){if(r.setStart(e,d),r.setEnd(e,d+1),(c=r.getBoundingClientRect()).left<=t&&c.right>=t&&c.top<=i&&c.bottom>=i)return null!=l.anchorNode&&(n&&r.setStart(l.anchorNode,l.anchorOffset),r=this.setTouchSelectionStartPosition(l,r,n,o,e,d,s),n&&l.extend(e,d),a=!0),r.detach(),a;d+=1}}else for(var p=0;p<e.childNodes.length;p++){var c,u=e.childNodes[p].ownerDocument.createRange();if(u.selectNodeContents(e.childNodes[p]),(c=u.getBoundingClientRect()).left<=t&&c.right>=t&&c.top<=i&&c.bottom>=i)return u.detach(),this.selectTextByTouch(e.childNodes[p],t,i,n,o,s);u.detach()}return a},e.prototype.setTouchSelectionStartPosition=function(e,t,i,n,o,s,a){if(i){if("left"===n){var r=this.getTouchFocusElement(e,!0);t.setStart(r.focusNode,r.focusOffset),t.setEnd(o,s),this.selectionAnchorTouch={anchorNode:t.endContainer.parentElement.id,anchorOffset:t.endOffset}}else if("right"===n){r=this.getTouchAnchorElement(e,!1);t.setStart(r.anchorNode,r.anchorOffset),t.setEnd(o,s),this.selectionFocusTouch={focusNode:t.endContainer.parentElement.id,focusOffset:t.endOffset}}}else if("left"===n)if(a)t.setStart(o,s),t.setEnd(e.focusNode,e.focusOffset),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset};else{r=this.getTouchFocusElement(e,!1);t.setStart(o,s),t.setEnd(r.focusNode,r.focusOffset),""===t.toString()&&(t.setStart(o,s),t.setEnd(e.focusNode,e.focusOffset)),this.selectionAnchorTouch={anchorNode:t.startContainer.parentElement.id,anchorOffset:t.startOffset}}else if("right"===n){r=this.getTouchAnchorElement(e,!0);t.setStart(o,s),t.setEnd(r.anchorNode,r.anchorOffset),""===t.toString()&&(t.setStart(r.anchorNode,r.anchorOffset),t.setEnd(o,s)),this.selectionFocusTouch={focusNode:t.startContainer.parentElement.id,focusOffset:t.startOffset}}return e.removeAllRanges(),e.addRange(t),t},e.prototype.getTouchAnchorElement=function(e,t){var i=document.getElementById(this.selectionAnchorTouch.anchorNode.toString()),n=null,o=0;return i?(n=i.childNodes[0],o=parseInt(this.selectionAnchorTouch.anchorOffset.toString(),10)):t?(n=e.focusNode,o=e.focusOffset):(n=e.anchorNode,o=e.anchorOffset),{anchorNode:n,anchorOffset:o}},e.prototype.getTouchFocusElement=function(e,t){var i=document.getElementById(this.selectionFocusTouch.focusNode.toString()),n=null,o=0;return i?(n=i.childNodes[0],o=parseInt(this.selectionFocusTouch.focusOffset.toString(),10)):t?(n=e.anchorNode,o=e.anchorOffset):(n=e.focusNode,o=e.focusOffset),{focusNode:n,focusOffset:o}},e.prototype.createTouchSelectElement=function(e){this.isTouchSelection=!0;var t=window.getSelection();if("Range"===t.type){this.dropDivElementLeft=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_touchSelect_droplet_left",className:"e-pv-touch-select-drop"}),this.dropDivElementRight=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_touchSelect_droplet_right",className:"e-pv-touch-select-drop"}),this.dropElementLeft=sf.base.createElement("div",{className:"e-pv-touch-ellipse"}),this.dropElementLeft.style.transform="rotate(0deg)",this.dropDivElementLeft.appendChild(this.dropElementLeft),this.dropElementRight=sf.base.createElement("div",{className:"e-pv-touch-ellipse"}),this.dropElementRight.style.transform="rotate(-90deg)",this.dropElementRight.style.margin="0 9px 0 0",this.dropDivElementRight.appendChild(this.dropElementRight),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementLeft),this.pdfViewerBase.pageContainer.appendChild(this.dropDivElementRight);var i=t.getRangeAt(0).getBoundingClientRect(),n=this.dropDivElementLeft.getBoundingClientRect(),o=this.pdfViewerBase.pageSize[this.pdfViewerBase.currentPageNumber-1].top,s=this.pdfViewerBase.viewerContainer.getBoundingClientRect().left,a=this.pdfViewerBase.pageContainer.getBoundingClientRect().left,r=this.getClientValueTop(i.top,this.pdfViewerBase.currentPageNumber-1),l=r+o*this.pdfViewerBase.getZoomFactor()+n.height/2*this.pdfViewerBase.getZoomFactor()+"px";this.dropDivElementLeft.style.top=l,this.dropDivElementLeft.style.left=i.left-(s+n.width)+(s-a)+"px",this.dropDivElementRight.style.top=l,this.dropDivElementRight.style.left=i.left+i.width-s+(s-a)+"px";var d=this.pdfViewerBase.getElement("_pageDiv_"+(this.pdfViewerBase.currentPageNumber-1)).getBoundingClientRect().left,h=i.left-d;if(this.topStoreLeft={pageTop:o,topClientValue:this.getMagnifiedValue(r),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(h),isHeightNeeded:!0},this.topStoreRight={pageTop:o,topClientValue:this.getMagnifiedValue(r),pageNumber:this.pdfViewerBase.currentPageNumber-1,left:this.getMagnifiedValue(h+i.width),isHeightNeeded:!0},this.dropDivElementLeft.addEventListener("touchstart",this.onLeftTouchSelectElementTouchStart),this.dropDivElementLeft.addEventListener("touchmove",this.onLeftTouchSelectElementTouchMove),this.dropDivElementLeft.addEventListener("touchend",this.onLeftTouchSelectElementTouchEnd),this.dropDivElementRight.addEventListener("touchstart",this.onRightTouchSelectElementTouchStart),this.dropDivElementRight.addEventListener("touchmove",this.onRightTouchSelectElementTouchMove),this.dropDivElementRight.addEventListener("touchend",this.onRightTouchSelectElementTouchEnd),!sf.base.Browser.isDevice&&this.pdfViewer.enableDesktopMode){var p=this.pdfViewerBase.hideContextMenuItems(e);this.pdfViewerBase.contextMenuModule.open(e.touches[0].clientX,e.touches[0].clientY,this.pdfViewerBase.viewerContainer,p)}}},e.prototype.calculateContextMenuPosition=function(e,t){var i=this;if(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode){var n=e-this.contextMenuHeight;n<this.pdfViewerBase.toolbarHeight?e+=this.contextMenuHeight:e=n,e+this.contextMenuHeight>window.innerHeight&&(e-=this.contextMenuHeight)}"MouseUp"===this.pdfViewer.contextMenuSettings.contextMenuAction&&(t-=50);var o=this;setTimeout((function(){var n=document.getElementsByClassName("e-pv-maintaincontent")[0].getBoundingClientRect();if(n){e=n.bottom+o.contextMenuHeight+o.pdfViewerBase.toolbarHeight>window.innerHeight?n.top-(o.contextMenuHeight+o.pdfViewerBase.toolbarHeight-10):n.bottom+o.pdfViewerBase.toolbarHeight-10,t=n.left-35;var s=i.pdfViewer.toolbarModule?i.pdfViewer.toolbarModule.annotationToolbarModule:"null";if(!s||!s.textMarkupToolbarElement||0===s.textMarkupToolbarElement.children.length){o.pdfViewerBase.contextMenuModule.open(t,e,o.pdfViewerBase.viewerContainer,{hidenItems:null,disabledItems:null,isCancel:!1})}}}))},e.prototype.initiateSelectionByTouch=function(){this.pdfViewerBase.textLayer.clearDivSelection(),this.pdfViewerBase.contextMenuModule.close();var e=this.pdfViewerBase.currentPageNumber-3;e=e<0?0:e;var t=this.pdfViewer.currentPageNumber+1;t=t<this.pdfViewerBase.pageCount-1?t:this.pdfViewerBase.pageCount-1;for(var i=e;i<=t;i++){var n=this.pdfViewerBase.getElement("_textLayer_"+i);n&&null!==n.childNodes&&this.applySelectionMouseScroll(i)}this.selectionRangeArray.length>0&&this.pdfViewer.fireTextSelectionStart(this.selectionRangeArray[0].pageNumber+1)},e.prototype.terminateSelectionByTouch=function(e){if(this.maintainSelectionOnZoom(!0,!1),this.applySpanForSelection(),this.pdfViewerBase.getTextMarkupAnnotationMode())this.pdfViewer.annotationModule.textMarkupAnnotationModule.drawTextMarkupAnnotations(this.pdfViewer.annotationModule.textMarkupAnnotationModule.currentTextMarkupAddMode);else{this.fireTextSelectEnd();var t=e.changedTouches[0].clientY+e.currentTarget.clientHeight,i=this.getSpanBounds();if(i){t=i.bottom+this.contextMenuHeight+this.pdfViewerBase.toolbarHeight>window.innerHeight?i.top-(this.contextMenuHeight+this.pdfViewerBase.toolbarHeight):i.bottom+this.pdfViewerBase.toolbarHeight-10;var n=this.pdfViewerBase.hideContextMenuItems(e);this.pdfViewerBase.contextMenuModule.open((i.right-i.left)/2,t,this.pdfViewerBase.viewerContainer,n)}}},e.prototype.getSpanBounds=function(){var e=[],t=[],i=[],n=0,o=document.getElementsByClassName("e-pv-maintaincontent");if(o.length>0){for(var s=0;s<o.length;s++){var a=o[s].getBoundingClientRect();n+=a.height,e.push(a.width),t.push(a.right),i.push(a.left)}return{top:o[0].getBoundingClientRect().top,bottom:o[o.length-1].getBoundingClientRect().bottom,left:Math.min.apply(null,i),right:Math.max.apply(null,t),width:Math.max.apply(null,e),height:n}}},e.prototype.getNodeElement=function(e,t,i,n,o){if(document.caretRangeFromPoint)e=document.caretRangeFromPoint(t,i),o=this.onTouchElementScroll(e,o,i,n);else if(document.caretPositionFromPoint){var s=document.caretPositionFromPoint(t,i),a=document.caretPositionFromPoint(t,i);(e=document.createRange()).setStart(s.offsetNode,s.offset),e.setEnd(a.offsetNode,a.offset),o=this.onTouchElementScroll(e,o,i,n)}return o},e.prototype.isTouchedWithinContainer=function(e){var t=!1;return 0!==document.elementsFromPoint(e.touches[0].clientX,e.touches[0].clientY).length&&(t=!0),t},e.prototype.onTouchElementScroll=function(e,t,i,n){var o=this.pdfViewerBase.viewerContainer.scrollTop;if(null!=e){t=e.startContainer;var s=this.isScrolledOnScrollBar(n);this.pdfViewerBase.viewerContainer.contains(t.parentElement)&&!s||(i<this.pdfViewerBase.viewerContainer.clientHeight?this.pdfViewerBase.viewerContainer.scrollTop=o-30:this.pdfViewerBase.viewerContainer.scrollTop=o+30)}else i<this.pdfViewerBase.viewerContainer.clientHeight?this.pdfViewerBase.viewerContainer.scrollTop=o-30:this.pdfViewerBase.viewerContainer.scrollTop=o+30;return t},e.prototype.isCloserTouchScroll=function(e){var t=!1;return this.previousScrollDifference>e&&(t=!0),t},e.prototype.getClientValueTop=function(e,t){return this.pdfViewerBase.getElement("_pageDiv_"+t)?e-this.pdfViewerBase.getElement("_pageDiv_"+t).getBoundingClientRect().top:e},e.prototype.isScrolledOnScrollBar=function(e){var t=!1;return e.touches&&this.pdfViewerBase.viewerContainer.clientHeight+this.pdfViewerBase.viewerContainer.offsetTop<e.touches[0].clientY&&e.touches[0].clientY<this.pdfViewerBase.viewerContainer.offsetHeight+this.pdfViewerBase.viewerContainer.offsetTop&&(t=!0),t},e.prototype.getTextLastLength=function(e){return e?e.textContent.length:0},e.prototype.getNodeElementFromNode=function(e){return e.parentElement?e.parentElement:e.parentNode},e.prototype.copyText=function(){var e="";if(this.maintainSelectionOnZoom(!0,!1),this.selectionRangeArray.length>0)for(var t=0;t<this.selectionRangeArray.length;t++)e+=this.selectionRangeArray[t].textContent;if(e.length>0){this.pdfViewer.annotation&&(this.pdfViewer.annotation.isShapeCopied=!1),this.pdfViewer.annotation&&this.pdfViewer.annotation.freeTextAnnotationModule&&(this.pdfViewer.annotation.freeTextAnnotationModule.selectedText=e);try{navigator.clipboard.writeText(e)}catch(e){console.warn("Copy to clipboard failed.",e)}}},e.prototype.destroy=function(){this.clear()},e.prototype.getModuleName=function(){return"TextSelection"},e}(),Tu=function(){function e(e,t){var i=this;this.isTextSearch=!1,this.isSearchActive=!1,this.searchCount=0,this.searchIndex=0,this.currentSearchIndex=0,this.startIndex=null,this.searchPageIndex=null,this.searchString=null,this.isMatchCase=!1,this.searchRequestHandler=null,this.textContents=[],this.searchMatches=[],this.searchCollection=[],this.searchedPages=[],this.isPrevSearch=!1,this.tempElementStorage=[],this.isMessagePopupOpened=!1,this.isTextRetrieved=!1,this.isTextSearched=!1,this.isTextSearchEventTriggered=!1,this.isSearchText=!1,this.checkBoxOnChange=function(e){if(e.currentTarget&&e.currentTarget.checked?i.isMatchCase=!0:i.isMatchCase=!1,i.isTextSearch){i.resetVariables(),i.clearAllOccurrences();var t=i.searchInput.value;i.searchIndex=0,i.textSearch(t)}},this.searchKeypressHandler=function(e){i.enableNextButton(!0),i.enablePrevButton(!0),13===e.which?(i.initiateTextSearch(i.searchInput,!0),i.updateSearchInputIcon(!1)):i.resetVariables()},this.searchInputpressHandler=function(e){i.searchInput&&i.searchInput.value?i.enableSearchNavigationButton(!0):i.enableSearchNavigationButton(!1)},this.searchClickHandler=function(e){i.searchButtonClick(i.searchBtn,i.searchInput)},this.nextButtonOnClick=function(e){i.nextSearch(!0)},this.prevButtonOnClick=function(e){i.prevSearch(!0)},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.createTextSearchBox=function(){var e=this;this.searchBox=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_search_box",className:"e-pv-search-bar"});var t=document.getElementById("toolbarContainer");t&&(this.searchBox.style.top=t.clientHeight+"px");var i=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_search_box_elements",className:"e-pv-search-bar-elements"}),n=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_search_input_container",className:"e-input-group e-pv-search-input"});this.searchInput=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_search_input",className:"e-input"}),this.searchInput.type="text",this.searchInput.setAttribute("aria-label","Search Text. Enter the test to search."),this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Findindocument").then((function(t){e.searchInput.placeholder=t})).catch((function(e){throw console.error("Unhandled Exception:",e),e})),this.searchBtn=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_search_box-icon",className:"e-input-group-icon e-input-search-group-icon e-pv-search-icon"}),n.appendChild(this.searchInput),n.appendChild(this.searchBtn),i.appendChild(n),this.pdfViewer.enableRtl?this.prevSearchBtn=this.createSearchBoxButtons("prev_occurrence","e-pv-next-search"):this.prevSearchBtn=this.createSearchBoxButtons("prev_occurrence","e-pv-prev-search"),this.prevSearchBtn.setAttribute("aria-label","Previous Search"),i.appendChild(this.prevSearchBtn),this.pdfViewer.enableRtl?this.nextSearchBtn=this.createSearchBoxButtons("next_occurrence","e-pv-prev-search"):this.nextSearchBtn=this.createSearchBoxButtons("next_occurrence","e-pv-next-search"),this.nextSearchBtn.setAttribute("aria-label","Next Search"),i.appendChild(this.nextSearchBtn);var o=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_match_case_container",className:"e-pv-match-case-container"}),s=sf.base.createElement("input",{id:this.pdfViewer.dataId+"_match_case"});s.type="checkbox",s.setAttribute("aria-label","Case Sensitive Search."),s.style.height="17px",s.style.width="17px",s.addEventListener("change",this.checkBoxOnChange.bind(this)),o.appendChild(s),this.searchBox.appendChild(i),this.searchBox.appendChild(o),this.pdfViewerBase.mainContainer.appendChild(this.searchBox);var a=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_search_box_text",styles:"position: absolute; padding-top: 3px; padding-left: 8px; padding-right: 8px; font-size: 13px"});this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_Matchcase").then((function(e){a.textContent=e})).catch((function(e){throw console.error("Unhandled Exception:",e),e})),o.appendChild(a);var r=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_textSearchLoadingIndicator"});n.appendChild(r),r.style.position="absolute",r.style.top="15px",r.style.left=n.clientWidth-46+"px",wt({target:r,cssClass:"e-spin-center"}),this.setLoaderProperties(r),this.showSearchBox(!1),this.pdfViewer.enableRtl?(this.searchBox.classList.add("e-rtl"),this.searchBox.style.left="88.3px"):(this.searchBox.classList.remove("e-rtl"),this.searchBox.style.right="88.3px"),this.searchInput.addEventListener("focus",(function(){e.searchInput.parentElement.classList.add("e-input-focus")})),this.searchInput.addEventListener("blur",(function(){e.searchInput.parentElement.classList.remove("e-input-focus")})),this.searchInput.addEventListener("keydown",this.searchKeypressHandler.bind(this)),this.searchInput.addEventListener("keyup",this.searchInputpressHandler.bind(this)),this.searchBtn.addEventListener("click",this.searchClickHandler.bind(this)),this.nextSearchBtn.addEventListener("click",this.nextButtonOnClick.bind(this)),this.prevSearchBtn.addEventListener("click",this.prevButtonOnClick.bind(this))},e.prototype.setLoaderProperties=function(e){var t=e.firstChild.firstChild.firstChild;t&&(t.style.height="18px",t.style.width="18px",t.style.transformOrigin="9px 9px 9px")},e.prototype.showLoadingIndicator=function(e){var t=document.getElementById(this.pdfViewer.dataId+"_textSearchLoadingIndicator");t&&(e?Mt(t):Et(t))},e.prototype.textSearchBoxOnResize=function(){if(this.pdfViewer.toolbarModule&&this.pdfViewer.enableToolbar){var e=this.pdfViewerBase.getElement("_toolbarContainer_popup");e&&e.contains(this.pdfViewerBase.getElement("_search").parentElement)&&(this.searchBox.style.right="0px")}else this.pdfViewerBase.viewerContainer.clientWidth+this.pdfViewerBase.viewerContainer.offsetLeft<this.searchBox.offsetLeft+this.searchBox.clientWidth?(this.searchBox.style.right="0px",this.searchBox.style.width=parseInt(this.searchBox.style.width,10)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px",this.searchInput.style.width=parseInt(this.searchInput.style.width,10)-(this.searchBox.offsetLeft+this.searchBox.clientWidth-this.pdfViewerBase.viewerContainer.clientWidth)+"px"):(this.searchBox.style.right="88.3px",this.searchBox.style.width="",this.searchInput.style.width="")},e.prototype.showSearchBox=function(e){if(e){this.searchBox.style.display="block",this.isMatchCase=!1,this.updateSearchInputIcon(e);var t=document.getElementById(this.pdfViewer.dataId+"_match_case");null!==t&&(t.checked=!1)}else this.searchBox.style.display="none",this.searchInput.value="";this.onTextSearchClose()},e.prototype.searchAfterSelection=function(){this.isTextSearch&&(this.initSearch(this.searchPageIndex,!0),this.highlightOthers())},e.prototype.initiateTextSearch=function(e,t){var i=e.value;i&&i.length>0&&" "===i[i.length-1]&&(i=i.slice(0,i.length-1)),this.initiateSearch(i,t)},e.prototype.initiateSearch=function(e,t){e!==this.searchString&&(this.isTextSearch=!1,this.isSearchActive=!1,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1),this.clearAllOccurrences(),""!==e&&(this.searchMatches[this.searchPageIndex]&&e===this.searchString?0===this.searchMatches[this.searchPageIndex].length?this.initSearch(this.searchPageIndex,!1):this.nextSearch(t):(this.resetVariables(),this.searchIndex=0,this.textSearch(e)))},e.prototype.textSearch=function(e){if(""!==e||e){if(this.searchString=e,this.isTextSearch=!0,this.isSearchText=!0,this.searchPageIndex=this.pdfViewerBase.currentPageNumber-1,this.searchCount=0,this.isTextSearchEventTriggered=!1,this.showLoadingIndicator(!0),this.pdfViewer.fireTextSearchStart(e,this.isMatchCase),this.pdfViewer.isExtractText)if(this.isTextRetrieved)for(var t=0;t<this.pdfViewerBase.pageCount;t++)this.initSearch(t,!1,!0);else{this.isTextSearched=!0;for(t=0;t<this.documentTextCollection.length;t++)this.initSearch(t,!1,!0)}this.initSearch(this.searchPageIndex,!1),this.highlightOthers(),this.isSearchActive=!0}},e.prototype.nextSearch=function(e){if(this.isPrevSearch=!1,this.isTextSearch=!0,this.isSearchText=!1,!this.searchInput){var t=this.pdfViewerBase.getElement("_search_input");null!==t&&(this.searchInput=t)}var i=this.searchString===(this.searchInput&&this.searchInput.value);!this.searchString||!i&&e?this.initiateTextSearch(this.searchInput,e):(this.clearAllOccurrences(),this.searchIndex=this.searchIndex+1,this.searchMatches[this.searchPageIndex]?(this.searchIndex>=this.searchMatches[this.searchPageIndex].length?(this.searchIndex=0,this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,this.pdfViewerBase.pageCount>1?this.initSearch(this.searchPageIndex,!1):(this.initSearch(this.searchPageIndex,!0),this.isMessagePopupOpened||this.onMessageBoxOpen(),this.pdfViewerBase.updateScrollTop(this.searchPageIndex)),this.showLoadingIndicator(!0)):(this.highlightSearchedTexts(this.searchPageIndex,!1,void 0),this.showLoadingIndicator(!1)),this.highlightOthers(!0)):this.initiateTextSearch(this.searchInput,e))},e.prototype.prevSearch=function(e){if(this.isPrevSearch=!0,this.isTextSearch=!0,this.isSearchText=!1,!this.searchInput){var t=this.pdfViewerBase.getElement("_search_input");null!==t&&(this.searchInput=t)}var i=this.searchString===(this.searchInput&&this.searchInput.value);if(!this.searchString||!i&&e){this.resetVariables(),this.searchIndex=this.searchIndex-1,this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1;var n=this.searchInput.value;this.textSearch(n)}else this.clearAllOccurrences(),this.searchIndex=this.searchIndex-1,this.searchIndex<0?(this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1,this.initSearch(this.searchPageIndex,!1),this.showLoadingIndicator(!0)):(this.highlightSearchedTexts(this.searchPageIndex,!1,void 0),this.showLoadingIndicator(!1)),this.highlightOthers(!0)},e.prototype.initSearch=function(e,t,i){var n=this.pdfViewerBase.getLinkInformation(e,!0),o=null,s=null,a=null;if(i){if(0!==this.documentTextCollection.length){var r=this.documentTextCollection[parseInt(e.toString(),10)][parseInt(e.toString(),10)],l=r.pageText?r.pageText:r.PageText;this.documentTextCollection[parseInt(e.toString(),10)]&&r&&this.getSearchTextContent(e,this.searchString,l,s,t,this.documentTextCollection[parseInt(e.toString(),10)])}}else n?(o=n.pageText,s=n.textContent,a=this.pdfViewerBase.textLayer.characterBound[parseInt(e.toString(),10)],this.textContents[parseInt(e.toString(),10)]=s,this.getPossibleMatches(e,this.searchString,o,s,t,a)):t||this.createRequestForSearch(e);this.pdfViewerBase.pageCount===(this.searchedPages&&this.searchedPages.length)&&(this.isTextSearchEventTriggered||(this.isTextSearchEventTriggered=!0,this.pdfViewer.fireTextSearchComplete(this.searchString,this.isMatchCase)))},e.prototype.getPossibleMatches=function(e,t,i,n,o,s){var a;if(this.searchMatches&&!this.searchMatches[parseInt(e.toString(),10)]){var r=i,l=t,d=r.replace(/(\s\r\n)/gm," ").replace(/(\r\n)/gm," "),h=i.replace(/(\s\r\n)/gm,"  ").replace(/(\r\n)/gm," "),p=d.replace(/[^a-zA-z0-9" "]/g,""),c=t.length;this.isMatchCase||(l=t.toLowerCase(),r=i.toLowerCase(),d=d.toLowerCase(),h=h.toLowerCase(),p=p.toLowerCase());for(var u=[],f=[],m=-c,g=-c,w=-c,y=-c,v=-c;(0!==m||0===m)&&""!==l&&" "!==l&&l;){if(m=r.indexOf(l,m+c),-1!==l.indexOf(" ")){var b=t.replace(" ","\r\n");g=r.indexOf(b,g+c),(g=-1)<=-1||g<m&&u.push(g)}if(m<=-1&&g<=-1)break;m<=-1||u.push(m),g>m&&!(g<=-1)&&u.push(g)}if(0===u.length){if(w=d.indexOf(l,w+c),y=h.indexOf(l,y+c),v=p.indexOf(l,v+c),-1!==w){m=-(a=this.correctLinetext(t,m,r))[0].length;for(var S=0;S<a.length;S++)m=r.indexOf(a[S].trim(),m+(void 0===a[S-1]?a[0].length:a[S-1].length)),f.push(m),f.length>1&&(f[1]-(f[0]+a[0].length)<=3?(u.push(f),this.searchMatches[parseInt(e.toString(),10)]=u):(S=-1,m=f[0]+a[0].length,f.splice(0,f.length)))}else if(-1!==v){m=-(a=this.correctLinetext(t,m,r))[0].length;for(S=0;S<a.length;S++)(m=r.indexOf(a[S].trim(),m+(void 0===a[S-1]?a[0].length:a[S-1].length)))>0&&f.push(m),f.length>1&&(f[1]-(f[0]+a[0].length)<=3?(u.push(f),this.searchMatches[parseInt(e.toString(),10)]=u):(S=-1,m=f[0]+a[0].length,f.splice(0,f.length)))}else if(-1!==y){m=-(a=this.correctLinetext(t,m,r))[0].length;for(S=0;S<a.length;S++)m=r.indexOf(a[S].trim(),m+(void 0===a[S-1]?a[0].length:a[S-1].length)),f.push(m),f.length>1&&(f[1]-(f[0]+a[0].length)<=3?(u.push(f),this.searchMatches[parseInt(e.toString(),10)]=u):(S=-1,m=f[0]+a[0].length,f.splice(0,f.length)))}u.length>1&&u.splice(1,u.length)}this.searchMatches&&u.length>0&&(this.searchMatches[parseInt(e.toString(),10)]=u)}if(o||(-1===this.searchedPages.indexOf(e)&&(this.searchedPages.push(e),this.startIndex=this.searchedPages[0]),this.updateSearchInputIcon(!1)),this.searchMatches&&this.searchMatches[parseInt(e.toString(),10)]&&0!==this.searchMatches[parseInt(e.toString(),10)].length)o||(this.isPrevSearch&&(this.searchIndex=this.searchMatches[parseInt(e.toString(),10)].length-1),this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex?(this.searchMatches.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&this.searchPageIndex===this.currentSearchIndex?(this.isMessagePopupOpened||this.isSearchText||this.onMessageBoxOpen(),this.searchPageIndex=this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),this.searchedPages=[this.searchPageIndex]):this.isPrevSearch&&this.searchMatches&&this.searchMatches.length>0&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex-1===this.searchPageIndex&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchedPages=[this.startIndex]),this.pdfViewerBase.updateScrollTop(this.searchPageIndex)):this.searchMatches&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&this.startIndex===this.searchPageIndex&&this.pdfViewerBase.pageCount>1&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchedPages=[this.startIndex])),this.highlightSearchedTexts(e,o,a);else if(!o)if(this.isPrevSearch?this.searchPageIndex=this.searchPageIndex-1<0?this.pdfViewerBase.pageCount-1:this.searchPageIndex-1:this.searchPageIndex=this.searchPageIndex+1<this.pdfViewerBase.pageCount?this.searchPageIndex+1:0,this.searchedPages.length!==this.pdfViewerBase.pageCount)this.showLoadingIndicator(!0),this.initSearch(this.searchPageIndex,!1);else{var A=this.getSearchPage(e);this.searchMatches&&sf.base.isNullOrUndefined(this.searchMatches[this.searchPageIndex])&&this.searchedPages.length===this.pdfViewerBase.pageCount?(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.pdfViewerBase.updateScrollTop(this.startIndex)):this.searchMatches&&this.searchMatches.length>0&&(0===this.searchIndex||-1===this.searchIndex)&&A===this.currentSearchIndex?(this.isPrevSearch?(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=A,this.searchedPages=[A],this.searchIndex=-1):(this.isMessagePopupOpened||0===this.pdfViewerBase.currentPageNumber||this.isSearchText||this.onMessageBoxOpen(),this.searchPageIndex=A,this.searchedPages=[A],this.searchIndex=0),this.highlightSearchedTexts(this.searchPageIndex,o,void 0)):this.searchMatches&&this.searchMatches[this.searchPageIndex]&&this.searchMatches[this.searchPageIndex].length>0&&this.searchedPages.length===this.pdfViewerBase.pageCount&&(this.isMessagePopupOpened||this.onMessageBoxOpen(),this.searchPageIndex=this.startIndex,this.searchedPages=[this.searchPageIndex],this.searchIndex=0,this.pdfViewerBase.updateScrollTop(this.startIndex),this.highlightSearchedTexts(this.searchPageIndex,o,void 0))}},e.prototype.correctLinetext=function(e,t,i){var n=[],o=e.split(/[" "]+/);this.isMatchCase||(o=e.toLowerCase().split(/\s+/)),t=0;var s="",a=i.replace(/ \r\n/g," ");a=(a=a.replace(/\r\n/g," ")).replace(/[^a-zA-Z0-9 ]/g,""),e=e.replace(/[^a-zA-Z0-9 ]/g,"");var r=a.match(e);if(this.isMatchCase||(r=a.match(e.toLowerCase())),sf.base.isNullOrUndefined(r))return n;for(var l=r=i.slice(r.index,i.length),d=0;d<o.length;d++){var h=s+o[d];t=i.indexOf(h,t),("\n"===(l=l?l.replace(o[d-1],""):i.replace(o[d-1],""))[l.indexOf(o[d])-1]&&"\n"===l[l.indexOf(o[d+1])-1]||"\n"===l[l.indexOf(o[d])-1]&&sf.base.isNullOrUndefined(l[l.indexOf(o[d+1])-1]))&&(t=-1,""===s&&(s=o[d],d+=1)),-1!==t?(s+=o[d]+" ",d===o.length-1&&n.push(s)):(n.push(s),s=o[d]+" ","\n"===l[l.indexOf(o[d])-1]&&"\n"===l[l.indexOf(o[d+1])-1]&&(n.push(s),s=o[d+1]+" ",l=l?l.replace(o[d-1],""):i.replace(o[d-1],""),d+=1),d===o.length-1&&n.push(s))}return n},e.prototype.getSearchTextContent=function(e,t,i,n,o,s){var a=i,r=t,l=t.length;this.isMatchCase||(r=t.toLowerCase(),a=i.toLowerCase());for(var d=[],h=-l,p=-l;0!==h&&""!==r&&" "!==r&&r;){if(h=a.indexOf(r,h+l),-1!==r.indexOf(" ")){var c=t.replace(" ","\r\n");(p=a.indexOf(c,p+l))<=-1||p<h&&d.push(p)}if(h<=-1&&p<=-1)break;h<=-1||d.push(h),p>h&&!(p<=-1)&&d.push(p)}0!==d.length&&(this.searchCount=this.searchCount+d.length),this.searchMatches[parseInt(e.toString(),10)]=d},e.prototype.getSearchPage=function(e){var t=null;if(this.isPrevSearch){for(var i=e;i>=0;i--)if(i!==e&&this.searchMatches[i]){t=i;break}if(!t)for(var n=this.pdfViewerBase.pageCount-1;n>e;n--)if(this.searchMatches[n]){t=n;break}}else{for(i=e;i<this.pdfViewerBase.pageCount;i++)if(i!==e&&this.searchMatches[i]){t=i;break}if(!t)if(0===e)t=e;else for(n=0;n<e;n++)if(this.searchMatches[n]){t=n;break}}return t},e.prototype.highlightSearchedTexts=function(e,t,i){var n,o=this.searchMatches[parseInt(e.toString(),10)],s={y:-100,x:-100},a=this.searchString,r=this.pdfViewerBase.textLayer.characterBound[parseInt(e.toString(),10)];if(t&&this.pdfViewerBase.currentPageNumber-1!==this.searchPageIndex&&this.searchMatches.length>0&&this.getSearchPage(this.pdfViewerBase.currentPageNumber-1),r){for(var l=0;l<o.length;l++){if(void 0!==o[l].length&&void 0!==i)if(l===this.searchIndex&&e===this.searchPageIndex)for(var d=0;d<i.length;d++)n="e-pv-search-text-highlight",this.searchString=i[d].trim(),this.addDivForSearch(l,e,r,this.searchString.length,n,d);else for(d=0;d<i.length;d++)n="e-pv-search-text-highlightother",this.searchString=i[d].trim(),this.addDivForSearch(l,e,r,this.searchString.length,n,d);else n=l===this.searchIndex&&e===this.searchPageIndex?"e-pv-search-text-highlight":"e-pv-search-text-highlightother";sf.base.isNullOrUndefined(o[l].length)&&this.addDivForSearch(l,e,r,this.searchString.length,n,void 0)}if(this.searchString=a,e===this.searchPageIndex&&!t){var h=this.pdfViewerBase.getElement("_searchtext_"+e+"_"+this.searchIndex);if(h){var p=this.getScrollElement(h);this.scrollToSearchStr(p,s)}else{this.pdfViewerBase.updateScrollTop(e);var c=this.pdfViewerBase.getElement("_searchtext_"+e+"_"+this.searchIndex);if(c){p=this.getScrollElement(c);this.scrollToSearchStr(p,s)}}}}},e.prototype.addDivForSearch=function(e,t,i,n,o,s){var a,r=this.pdfViewerBase.getElement("_textLayer_"+t);sf.base.isNullOrUndefined(r)&&"e-pv-search-text-highlight"===o&&this.pdfViewer.navigation&&this.pdfViewer.navigation.goToPage(t+1);for(var l=a=void 0!==this.searchMatches[parseInt(t.toString(),10)][parseInt(e.toString(),10)].length?this.searchMatches[parseInt(t.toString(),10)][parseInt(e.toString(),10)][""+s]:this.searchMatches[parseInt(t.toString(),10)][parseInt(e.toString(),10)],d=0;a<l+n;)a=this.addDivElement(a,i,n,o,e,t,l,d,s),d++;"e-pv-search-text-highlight"===o&&this.showLoadingIndicator(!1)},e.prototype.addDivElement=function(e,t,i,n,o,s,a,r,l){var d=0,h=0,p=0,c=0,u=!1;t[e]&&(c=t[e].X,p=t[e].Y);var f=0;for(e-a!=0&&(f=e-a,i+=1),f=f;f<i;f++){if(t[e])c>(g=t[e]).X&&(u=!0),d=d>(w=(p=p<g.Y?p:g.Y)<g.Y?g.Y-p:p-g.Y)+g.Height?d:w+g.Height,e++}var m=!1;if(u){var g,w;c=(g=t[a+i-1]).X,h=t[a].X-t[a+i-1].X,d=d>(w=(p=p<g.Y?p:g.Y)<g.Y?g.Y-p:p-g.Y)+g.Height?d:w+g.Height;for(var y=t[a-1].Y-t[a].Y,v=a+i-1;v>=a;v--)0===(g=t[v]).Width&&(y=g.Y-t[v-1].Y);h+=y}else if(a+i!==e)m=!0,t[e-1]&&(h=t[e-1].X-c);else{m=!1;var b=this.pdfViewerBase.getLinkInformation(s,!0),S=null;if(b)S=b.pageText;else if(this.pdfViewer.isExtractText&&0!==this.documentTextCollection.length){var A=this.documentTextCollection[parseInt(s.toString(),10)][parseInt(s.toString(),10)];S=A.pageText?A.pageText:A.PageText}t[e]?h=!S||""!==S[e]&&" "!==S[e]&&"\r"!==S[e]&&"\n"!==S[e]||0!==t[e].Width?t[e].X-c:t[e-1].X-c+t[e-1].Width:t[e-1]&&(h=t[e-1].X-c+t[e-1].Width)}return this.createSearchTextDiv(o,s,d,h,p,c,n,m,r,l),e},e.prototype.createSearchTextDiv=function(e,t,i,n,o,s,a,r,l,d){var h="_searchtext_"+t+"_"+e;if(r&&(h+="_"+l),void 0!==d&&this.pdfViewerBase.getElement(h)){var p=sf.base.createElement("div",{id:this.pdfViewer.element.id+h+"_"+d}),c=this.pdfViewerBase.pageSize[parseInt(t.toString(),10)];if(this.calculateBounds(p,i,n,o,s,c),p.classList.add(a),"e-pv-search-text-highlight"===a){p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchHighlightColor?"#fdd835":this.pdfViewer.textSearchColorSettings.searchHighlightColor;var u={left:s,top:o,width:n,height:i};this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,u,t+1)}else"e-pv-search-text-highlightother"===a&&(p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchColor?"#8b4c12":this.pdfViewer.textSearchColorSettings.searchColor);(f=this.pdfViewerBase.getElement("_textLayer_"+t))&&f.appendChild(p)}if(!this.pdfViewerBase.getElement(h)){var f;p=sf.base.createElement("div",{id:this.pdfViewer.dataId+h}),c=this.pdfViewerBase.pageSize[parseInt(t.toString(),10)];if(this.calculateBounds(p,i,n,o,s,c),p.classList.add(a),"e-pv-search-text-highlight"===a){p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchHighlightColor?"#fdd835":this.pdfViewer.textSearchColorSettings.searchHighlightColor;u={left:s,top:o,width:n,height:i};this.pdfViewer.fireTextSearchHighlight(this.searchString,this.isMatchCase,u,t+1)}else"e-pv-search-text-highlightother"===a&&(p.style.backgroundColor=""===this.pdfViewer.textSearchColorSettings.searchColor?"#8b4c12":this.pdfViewer.textSearchColorSettings.searchColor);(f=this.pdfViewerBase.getElement("_textLayer_"+t))&&f.appendChild(p)}},e.prototype.calculateBounds=function(e,t,i,n,o,s){0===s.rotation||2===s.rotation?(e.style.height=Math.ceil(t)*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=i*this.pdfViewerBase.getZoomFactor()+"px",2===s.rotation?(e.style.top=(s.height-n-t)*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=Math.ceil(s.width-o-i)*this.pdfViewerBase.getZoomFactor()+"px"):(e.style.top=n*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=o*this.pdfViewerBase.getZoomFactor()+"px")):1===s.rotation?(e.style.height=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=o*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=(s.height-n-t)*this.pdfViewerBase.getZoomFactor()+"px"):3===s.rotation&&(e.style.height=i*this.pdfViewerBase.getZoomFactor()+"px",e.style.width=t*this.pdfViewerBase.getZoomFactor()+"px",e.style.left=(s.width-s.height+n)*this.pdfViewerBase.getZoomFactor()+"px",e.style.top=(s.height-o-i)*this.pdfViewerBase.getZoomFactor()+"px")},e.prototype.isClassAvailable=function(){for(var e=!1,t=0;t<this.tempElementStorage.length;t++)if(this.tempElementStorage[t].classString&&("e-pv-search-text-highlight"===this.tempElementStorage[t].classString||"e-pv-search-text-highlightother"===this.tempElementStorage[t].classString)){e=!0;break}return e},e.prototype.getScrollElement=function(e){var t=e;if(e.childNodes.length>0)for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].classList&&e.childNodes[i].classList.contains("e-pv-search-text-highlight")&&(t=e.childNodes[i]);return t},e.prototype.scrollToSearchStr=function(e,t){for(var i=e.offsetParent,n=e.offsetTop+e.clientTop,o=e.offsetLeft+e.clientLeft;i.id!==this.pdfViewerBase.viewerContainer.id;)n+=i.offsetTop,o+=i.offsetLeft,i=i.offsetParent;t&&(n+=t.y,o+=t.x,(sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||this.pdfViewerBase.getZoomFactor()>1.5)&&(i.scrollLeft=o)),i.scrollTop=n,this.pdfViewerBase.updateMobileScrollerPosition()},e.prototype.resizeSearchElements=function(e){for(var t=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+"_searchtext_"+e+'"]'),i=0;i<t.length;i++){var n=t[i],o=1;this.pdfViewer.magnificationModule&&(o=this.pdfViewer.magnificationModule.previousZoomFactor);var s=e+"_"+o+"_"+this.pdfViewerBase.getZoomFactor();n.getAttribute("name")!==s&&(n.style.width=parseFloat(n.style.width)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.height=parseFloat(n.style.height)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.top=parseFloat(n.style.top)/o*this.pdfViewerBase.getZoomFactor()+"px",n.style.left=parseFloat(n.style.left)/o*this.pdfViewerBase.getZoomFactor()+"px",n.setAttribute("name",s))}},e.prototype.highlightOtherOccurrences=function(e){this.initSearch(e,!0)},e.prototype.highlightOthers=function(e){for(var t=this.getIndexes(),i=parseFloat(t.lowerPageValue.toString()),n=parseFloat(t.higherPageValue.toString()),o=i;o<=n;o++)this.highlightOtherOccurrences(o);e&&this.showLoadingIndicator(!1)},e.prototype.clearAllOccurrences=function(){for(var e=document.querySelectorAll('div[id*="'+this.pdfViewer.dataId+'_searchtext_"]'),t=0;t<e.length;t++)e[t].parentElement.removeChild(e[t])},e.prototype.getIndexes=function(){var e=this.pdfViewerBase.currentPageNumber-3;e=e>0?e:0;var t=this.pdfViewerBase.currentPageNumber+1;return{lowerPageValue:e,higherPageValue:t=t<this.pdfViewerBase.pageCount?t:this.pdfViewerBase.pageCount-1}},e.prototype.applyTextSelection=function(){if(this.pdfViewer.textSelectionModule&&!this.pdfViewerBase.isTextSelectionDisabled)for(var e=this.getIndexes(),t=parseFloat(e.lowerPageValue.toString()),i=parseFloat(e.higherPageValue.toString()),n=t;n<=i;n++)this.pdfViewer.textSelectionModule.applySelectionRangeOnScroll(n)},e.prototype.resetTextSearch=function(){this.resetVariables(),this.onTextSearchClose(),this.searchPageIndex=null,this.searchIndex=0,this.updateSearchInputIcon(!0),this.enableNextButton(!1),this.enablePrevButton(!1),this.documentTextCollection=[],this.isTextRetrieved=!1,this.isTextSearched=!1,this.isSearchText=!1,this.searchRequestHandler&&this.searchRequestHandler.clear()},e.prototype.onTextSearchClose=function(){this.isPrevSearch=!1,this.isTextSearch=!1,this.isSearchActive=!1,this.pdfViewerBase.pageCount>0&&(this.clearAllOccurrences(),this.searchString="")},e.prototype.createRequestForSearch=function(e){var t=this,i=this.pdfViewer.element.clientHeight,o=this.pdfViewerBase.pageSize[parseInt(e.toString(),10)].width,s=(this.pdfViewerBase.pageSize[parseInt(e.toString(),10)].height,this.pdfViewerBase.getTileCount(o)),a=816>=o?1:s,r=816>=o?1:s,l=!1,d=this.pdfViewer.tileRenderingSettings;d.enableTileRendering&&d.x>0&&d.y>0&&(a=816>=o?1:d.x,r=816>=o?1:d.y),a>1&&r>1&&(l=!0);for(var h=function(d){for(var h=function(h){var c={xCoordinate:d,yCoordinate:h,pageNumber:e,viewPortWidth:816,viewPortHeight:i,documentId:t.pdfViewerBase.getDocumentId(),hashId:t.pdfViewerBase.hashId,zoomFactor:t.pdfViewerBase.getZoomFactor(),tilecount:s,action:"Search",elementId:t.pdfViewer.element.id,uniqueId:t.pdfViewerBase.documentId,tileXCount:a,tileYCount:r};p.pdfViewerBase.jsonDocumentId&&(c.documentId=p.pdfViewerBase.jsonDocumentId);var u=p.pdfViewerBase.retrieveCurrentZoomFactor();p.searchRequestHandler=new Wn(p.pdfViewer),p.searchRequestHandler.url=p.pdfViewer.serviceUrl+"/"+p.pdfViewer.serverActionSettings.renderPages,p.searchRequestHandler.responseType="json";var f=p.pdfViewerBase.documentId+"_"+e+"_hyperlinkAndLinkAnnotation";(sf.base.isNullOrUndefined(p.pdfViewerBase.hyperlinkAndLinkAnnotation)||sf.base.isNullOrUndefined(p.pdfViewerBase.hyperlinkAndLinkAnnotation[""+f]))&&p.searchRequestHandler.send(c),p.searchRequestHandler.onSuccess=function(i){try{var o=i.data;if(o){if("object"!==n(o))try{o=JSON.parse(o)}catch(e){t.pdfViewerBase.onControlError(500,o,this.pdfViewer.serverActionSettings.renderPages),o=null}if(o&&o.uniqueId===t.pdfViewerBase.documentId){t.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderPages,o);var s=void 0!==o.pageNumber?o.pageNumber:e,a={hyperlinks:o.hyperlinks,hyperlinkBounds:o.hyperlinkBounds,linkAnnotation:o.linkAnnotation,linkPage:o.linkPage,annotationLocation:o.annotationLocation,width:o.width,rotation:o.rotation,scaleFactor:o.scaleFactor,uniqueId:o.uniqueId,zoomFactor:o.zoomFactor,hyperLinkBorderWidth:o.hyperLinkBorderWidth,hyperLinkBorderColor:o.hyperLinkBorderColor,textWebLinkBorderWidth:o.textWebLinkBorderWidth,textWebLinkBorderColor:o.textWebLinkBorderColor};t.pdfViewerBase.pageSize[s]&&(t.pdfViewerBase.pageSize[s].rotation=parseFloat(o.rotation)),t.pdfViewerBase.hyperlinkAndLinkAnnotation[t.pdfViewerBase.documentId+"_"+s+"_hyperlinkAndLinkAnnotation"]=JSON.stringify(a)}}}catch(e){throw console.error("Unhandled Exception:",e),e}},p.searchRequestHandler.onFailure=function(e){t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderPages)},p.searchRequestHandler.onError=function(e){t.pdfViewerBase.openNotificationPopup(),t.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderPages)};var m=p.pdfViewerBase.documentId+"_"+e+"_textDetails",g=!p.pdfViewerBase.pageTextDetails||!p.pdfViewerBase.pageTextDetails[""+m];816>=o||!p.pdfViewer.tileRenderingSettings.enableTileRendering?p.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:e,message:"renderPageSearch",zoomFactor:t.pdfViewer.magnificationModule.zoomFactor,isTextNeed:g}):p.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:e,message:"renderImageAsTileSearch",zoomFactor:u,tileX:d,tileY:h,tileXCount:a,tileYCount:r,isTextNeed:g}),p.pdfViewerBase.pdfViewerRunner.onmessage=function(e){switch(e.data.message){case"imageRendered":if("imageRendered"===e.data.message){var i=document.createElement("canvas"),n=e.data,s=n.value,p=n.width,c=n.height,f=n.pageIndex;i.width=p,i.height=c,(M=(k=i.getContext("2d")).createImageData(p,c)).data.set(s),k.putImageData(M,0,0);var w=i.toDataURL(),y=n.textBounds,v=n.textContent,b=n.pageText,S=n.rotation,A=n.characterBounds,x={image:w,pageNumber:f,uniqueId:t.pdfViewerBase.documentId,pageWidth:p,zoomFactor:u};if(g&&(x.textBounds=y,x.textContent=v,x.rotation=S,x.pageText=b,t.pdfViewerBase.storeTextDetails(f,y,v,b,S,A)),x&&x.image&&x.uniqueId===t.pdfViewerBase.documentId){t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.renderPages,x);var V=void 0!==x.pageNumber?x.pageNumber:f,C=t.pdfViewerBase.createBlobUrl(x.image.split("base64,")[1],"image/png"),I={image:(URL||webkitURL).createObjectURL(C),width:x.pageWidth,uniqueId:x.uniqueId,zoomFactor:x.zoomFactor};t.pdfViewerBase.storeImageData(V,I),l?d===a-1&&h===r-1&&e.data.isTextSearch&&t.initSearch(f,!1):(e.data.isTextSearch&&t.initSearch(f,!1),-1!==t.pdfViewerBase.renderedPagesList.indexOf(e.data.pageIndex)&&t.pdfViewerBase.CommonOnMessage(e))}}break;case"renderTileImage":if("renderTileImage"===e.data.message){i=document.createElement("canvas");var k,M,T=e.data,E=(s=T.value,T.w),B=T.h,P=T.noTileX,D=T.noTileY,N=T.x,F=T.y,L=T.pageIndex;i.setAttribute("height",B),i.setAttribute("width",E),i.width=E,i.height=B,(M=(k=i.getContext("2d")).createImageData(E,B)).data.set(s),k.putImageData(M,0,0);w=i.toDataURL();var O=E,R=B,z=(y=e.data.textBounds,v=e.data.textContent,b=e.data.pageText,S=e.data.rotation,A=e.data.characterBounds,{image:w,noTileX:P,noTileY:D,pageNumber:L,tileX:N,tileY:F,uniqueId:t.pdfViewerBase.documentId,pageWidth:o,width:O,transformationMatrix:{Values:[1,0,0,1,O*N,R*F,0,0,0]},zoomFactor:t.pdfViewerBase.retrieveCurrentZoomFactor()});if(z&&z.image&&z.uniqueId===t.pdfViewerBase.documentId){z.pageWidth&&z.pageWidth>0&&z.pageWidth;t.pdfViewer.fireAjaxRequestSuccess(t.pdfViewer.serverActionSettings.renderPages,z);V=void 0!==z.pageNumber?z.pageNumber:L;if(0===N&&0===F){C=t.pdfViewerBase.createBlobUrl(z.image.split("base64,")[1],"image/png"),I={image:(URL||webkitURL).createObjectURL(C),width:z.pageWidth,uniqueId:z.uniqueId,tileX:z.tileX,tileY:z.tileY,zoomFactor:z.zoomFactor};if(g)z.textBounds=y,z.textContent=v,z.rotation=S,z.pageText=b,t.pdfViewerBase.storeTextDetails(L,y,v,b,S,A);else{var H=JSON.parse(t.pdfViewerBase.pageTextDetails[""+m]);z.textBounds=H.textBounds,z.textContent=H.textContent,z.rotation=H.rotation,z.pageText=H.pageText}t.pdfViewerBase.storeImageData(V,I,z.tileX,z.tileY)}else{C=t.pdfViewerBase.createBlobUrl(z.image.split("base64,")[1],"image/png"),I={image:(URL||webkitURL).createObjectURL(C),width:z.pageWidth,uniqueId:z.uniqueId,tileX:z.tileX,tileY:z.tileY,zoomFactor:z.zoomFactor};t.pdfViewerBase.storeImageData(V,I,z.tileX,z.tileY)}N===P-1&&F===D-1&&t.initSearch(L,!1)}}break;case"renderThumbnail":case"PageLoaded":t.pdfViewerBase.CommonOnMessage(e);break;default:console.log("Unknown message type:",e.data.message)}}},c=0;c<r;c++)h(c)},p=this,c=0;c<a;c++)h(c)},e.prototype.getPDFDocumentTexts=function(){var e=50,t=this.pdfViewerBase.pageCount;e>=t&&(e=t),this.createRequestForGetPdfTexts(0,e)},e.prototype.createRequestForGetPdfTexts=function(e,t){var i=this,o={pageStartIndex:e,pageEndIndex:t,documentId:i.pdfViewerBase.getDocumentId(),hashId:i.pdfViewerBase.hashId,action:"RenderPdfTexts",elementId:i.pdfViewer.element.id,uniqueId:i.pdfViewerBase.documentId};this.pdfViewerBase.jsonDocumentId&&(o.documentId=this.pdfViewerBase.jsonDocumentId),this.searchRequestHandler=new Wn(this.pdfViewer),this.searchRequestHandler.url=this.pdfViewer.serviceUrl+"/"+this.pdfViewer.serverActionSettings.renderTexts,this.searchRequestHandler.responseType="json",this.searchRequestHandler.send(o),this.searchRequestHandler.onSuccess=function(o){var s=o.data;if(s){if("object"!==n(s))try{s=JSON.parse(s)}catch(e){i.pdfViewerBase.onControlError(500,s,this.pdfViewer.serverActionSettings.renderTexts),s=null}if(s&&s.documentTextCollection&&s.uniqueId===i.pdfViewerBase.documentId){i.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.renderTexts,s),i.documentTextCollection.length>0?(i.documentTextCollection=s.documentTextCollection.concat(i.documentTextCollection),i.documentTextCollection=i.orderPdfTextCollections(i.documentTextCollection)):i.documentTextCollection=s.documentTextCollection;var a=i.pdfViewerBase.pageCount;t!==a?(e=t,(t+=50)>=a&&(t=a),i.createRequestForGetPdfTexts(e,t)):(i.isTextRetrieved=!0,i.pdfViewer.fireTextExtractionCompleted(i.documentTextCollection),i.isTextSearched&&i.searchString.length>0&&(i.textSearch(i.searchString),i.isTextSearched=!1))}}},this.searchRequestHandler.onFailure=function(e){i.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderTexts)},this.searchRequestHandler.onError=function(e){i.pdfViewerBase.openNotificationPopup(),i.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,this.pdfViewer.serverActionSettings.renderTexts)}},e.prototype.orderPdfTextCollections=function(e){for(var t=[],i=0;i<e.length;i++)if(0===t.length)t.push(e[i]);else if(parseInt(Object.keys(e[i])[0],10)>parseInt(Object.keys(t[t.length-1])[0],10))t.push(e[i]);else for(var n=0;n<t.length;n++)if(parseInt(Object.keys(e[i])[0],10)<parseInt(Object.keys(t[n])[0],10)){t.splice(n,0,e[i]);break}return t},e.prototype.createSearchBoxButtons=function(e,t){var i=sf.base.createElement("button",{id:this.pdfViewer.dataId+"_"+e,className:"e-btn e-icon-btn e-pv-search-btn "+t});i.setAttribute("type","button");var n=sf.base.createElement("span",{id:this.pdfViewer.dataId+"_"+e+"Icon",className:"e-pv-icon-search "+t+"-icon"});return i.disabled=!0,i.appendChild(n),i},e.prototype.enablePrevButton=function(e){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(e?this.prevSearchBtn.removeAttribute("disabled"):this.prevSearchBtn&&(this.prevSearchBtn.disabled=!0))},e.prototype.enableNextButton=function(e){sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode||(e?this.nextSearchBtn.removeAttribute("disabled"):this.nextSearchBtn&&(this.nextSearchBtn.disabled=!0))},e.prototype.resetVariables=function(){this.searchedPages=[],this.searchMatches=[]},e.prototype.enableSearchNavigationButton=function(e){this.enableNextButton(e),this.enablePrevButton(e)},e.prototype.searchButtonClick=function(e,t){(this.isMessagePopupOpened=!1,sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode)&&(e=this.pdfViewerBase.getElement("_search_box-icon").children[0].children[0],t=this.pdfViewerBase.getElement("_search_input"));e.classList.contains("e-pv-search-icon")?this.initiateTextSearch(t,!0):e.classList.contains("e-pv-search-close")&&(this.showLoadingIndicator(!1),t.value="",this.resetTextSearch(),t.focus())},e.prototype.updateSearchInputIcon=function(e){this.searchBtn&&sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&(this.searchBtn=this.pdfViewerBase.getElement("_search_box-icon").children[0].children[0]),this.searchBtn&&(e?(this.searchBtn.classList.remove("e-pv-search-close"),this.searchBtn.classList.add("e-pv-search-icon")):(this.searchBtn.classList.remove("e-pv-search-icon"),this.searchBtn.classList.add("e-pv-search-close")))},e.prototype.onMessageBoxOpen=function(){var e=this;this.showLoadingIndicator(!1),this.pdfViewerBase.getElement("_search_input").blur(),this.pdfViewerBase.isMouseDown&&"Ink"===this.pdfViewerBase.action&&(this.pdfViewerBase.isMouseDown=!1),this.isMessagePopupOpened=!0,!sf.base.Browser.isDevice||this.pdfViewer.enableDesktopMode?(this.searchMatches.length>0?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_NoMoreMatches"):this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_NoMatches")).then((function(t){e.pdfViewerBase.textLayer.createNotificationPopup(t)})).catch((function(e){throw console.error("Unhandled Exception:",e),e})):(this.searchMatches.length>0?this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_NoMoreSearchMatches"):this.pdfViewer._dotnetInstance.invokeMethodAsync("GetLocaleText","PdfViewer_NoSearchMatches")).then((function(t){e.pdfViewerBase.navigationPane.createTooltipMobile(t,!0)})).catch((function(e){throw console.error("Unhandled Exception:",e),e}))},e.prototype.searchText=function(e,t){e&&e.length>0&&" "===e[e.length-1]&&(e=e.slice(0,e.length-1)),this.searchString=e,this.isMatchCase=t,this.isTextSearch&&(this.resetVariables(),this.clearAllOccurrences()),this.searchIndex=0,this.textSearch(e)},e.prototype.searchNext=function(){this.nextSearch(!1)},e.prototype.searchPrevious=function(){this.prevSearch(!1)},e.prototype.cancelTextSearch=function(){this.resetTextSearch()},e.prototype.destroy=function(){this.searchMatches=void 0},e.prototype.getModuleName=function(){return"TextSearch"},e}(),Eu=function(){function e(e,t){var i=this;this.printHeight=1123,this.printWidth=794,this.firefoxPrintHeight=1123,this.firefoxPrintWidth=794,this.closePrintWindow=function(){i.printWindow&&!i.printWindow.closed&&i.printWindow.close()},this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.print=function(){if(this.pdfViewerBase.pageCount>0){if(this.printValidateFormFields=this.pdfViewerBase.validateForm,this.printViewerContainer=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_print_viewer_container",className:"e-pv-print-viewer-container"}),"Default"===this.pdfViewer.printMode)this.pdfViewerBase.showPrintLoadingIndicator(!0),this.iframe=document.createElement("iframe"),this.iframe.className="iframeprint",this.iframe.id="iframePrint",this.iframe.style.position="fixed",this.iframe.style.top="-100000000px",document.body.appendChild(this.iframe),this.frameDoc=this.iframe.contentWindow?this.iframe.contentWindow:this.iframe.contentDocument,this.frameDoc.document.open();else{var e=!this.pdfViewerBase.isWebAssembly&&sf.base.Browser.isDevice&&sf.base.Browser.isIos&&sf.base.Browser.isSafari()?"_self":"print";this.printWindow=window.open("",e,"height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWindow.moveTo(0,0),this.printWindow.resizeTo(screen.availWidth,screen.availHeight),this.createPrintLoadingIndicator(this.printWindow.document.body)}window.customStampCollection=new Map;var t=0,i=this.pdfViewer.annotationCollection,n=!1,o=0,s=0,a=this;if(this.pdfViewer.annotationSettings.skipPrint)n||t!==s||this.callPrintAction();else if(i&&i.length>0){for(s=this.pdfViewer.annotationCollection.length,t=0;t<i.length;t++)if(i[t].stampAnnotationType)if(i[t].stampAnnotationPath&&"image"===i[t].stampAnnotationType){(d=new Image).src=i[t].stampAnnotationPath,o++,n=!0,window.customStampCollection.set(i[t].annotationId,d),d.onload=function(){0===--o&&t===s&&a.callPrintAction()}}else{var r=this.pdfViewerBase.documentAnnotationCollections[i[t].pageNumber].stampAnnotations;if(r&&r.length>0)for(var l=0;l<r.length;l++){var d,h=this.pdfViewer.annotationModule.stampAnnotationModule.findImageData(r[l].Apperarance);if(r[l].Apperarance&&h)(d=new Image).src=h,o++,n=!0,window.customStampCollection.set(r[l].AnnotName,d),d.onload=function(){0===--o&&t===s&&a.callPrintAction()}}}n||t!==s||this.callPrintAction()}else n||t!==s||this.callPrintAction()}},e.prototype.printActionFormDesigner=function(){var e=this,t=this;setTimeout((function(){for(var i=0;i<e.pdfViewerBase.pageCount;i++){var n=e.pdfViewerBase.pageSize[i].width,o=e.pdfViewerBase.pageSize[i].height,s=793,a=1122;if(t.printWidth=816,t.printHeight=1056,n>o&&(s=1122,a=793),n>=s+10||n<=s-10||o>=a+10||o<=a-10||(t.printWidth=783,t.printHeight=1110),n>o&&!t.pdfViewer.enablePrintRotation){var r=t.printWidth;t.printWidth=t.printHeight,t.printHeight=r}e.pdfViewer.printModule.createRequestForPrint(i,n,o,e.pdfViewerBase.pageCount,e.pdfViewer.printScaleFactor)}e.pdfViewer.firePrintEnd(e.pdfViewer.downloadFileName)}),100)},e.prototype.callPrintAction=function(){var e=this,t=this.pdfViewer.enableFormDesigner,i=0,n=0,o=!1,s=this.pdfViewer.formDesignerCollections,a=0;if(t)if(s&&s.length>0){for(i=this.pdfViewer.formDesignerCollections.length,a=0;a<s.length;a++)if(s[a].signatureType&&"Image"===s[a].signatureType){var r=s[a].id+"_content";if(this.pdfViewer.nameTable[r]){o=!0;var l=new Image;l.src=s[a].value,n++,window.customStampCollection.set(s[a].id,l),l.onload=function(){0===--n&&a===i&&e.printActionFormDesigner()}}}o||i!==a||e.printActionFormDesigner()}else e.printActionFormDesigner();else e.printActionFormDesigner()},e.prototype.createRequestForPrint=function(e,t,i,n,o){var s=this,a={pageNumber:e,documentId:this.pdfViewerBase.documentId,hashId:this.pdfViewerBase.hashId,zoomFactor:2,action:"PrintImages",elementId:this.pdfViewer.dataId,uniqueId:this.pdfViewerBase.documentId};this.pdfViewerBase.jsonDocumentId&&(a.documentId=this.pdfViewerBase.jsonDocumentId),s.pdfViewerBase.createFormfieldsJsonData(),s.printRequestHandler=new Wn(s.pdfViewer),s.printRequestHandler.url=s.pdfViewer.serviceUrl+"/"+s.pdfViewer.serverActionSettings.print,s.printRequestHandler.responseType=null,s.printRequestHandler.mode=!1,this.printValidateFormFields&&this.pdfViewerBase.validateForm&&this.pdfViewer.enableFormFieldsValidation?(this.closePrintWindow(),this.pdfViewer.fireValidatedFailed(s.pdfViewer.serverActionSettings.download),this.pdfViewerBase.validateForm=!1,this.printValidateFormFields=!1,this.pdfViewerBase.showPrintLoadingIndicator(!1)):this.pdfViewerBase.pdfViewerRunner.postMessage({pageIndex:e,message:"printImage",printScaleFactor:o>=1?o:1,printDevicePixelRatio:2}),this.printRequestHandler.onFailure=function(e){s.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,s.pdfViewer.serverActionSettings.print)},this.printRequestHandler.onError=function(e){s.pdfViewerBase.openNotificationPopup(),s.pdfViewer.fireAjaxRequestFailed(e.status,e.statusText,s.pdfViewer.serverActionSettings.print)}},e.prototype.printOnmessage=function(e){try{var t=document.createElement("canvas"),i=e.data,n=i.value,o=i.width,s=i.height,a=i.pageIndex,r=i.pageWidth,l=i.pageHeight,d=i.printDevicePixelRatio;t.width=o,t.height=s;var h=t.getContext("2d"),p=h.createImageData(o,s);p.data.set(n),h.putImageData(p,0,0);var c={image:t.toDataURL(),pageNumber:a,uniqueId:this.pdfViewerBase.documentId,pageWidth:o};this.printSuccess(c,r,l,a,d)}catch(e){throw console.error("Unhandled Exception: ",e),e}},e.prototype.printSuccess=function(e,t,i,o,s){var a=this;this.pdfViewerBase.isPrint=!0;var r=e;if(r&&"object"!==n(r))try{"object"!==n(r=JSON.parse(r))&&(this.pdfViewerBase.onControlError(500,r,this.pdfViewer.serverActionSettings.print),r=null)}catch(e){this.pdfViewerBase.onControlError(500,r,this.pdfViewer.serverActionSettings.print),r=null}if(r&&r.uniqueId===this.pdfViewerBase.documentId){this.pdfViewer.fireAjaxRequestSuccess(this.pdfViewer.serverActionSettings.print,r);var l="";if(!this.pdfViewer.annotationSettings.skipPrint){var d=this.pdfViewerBase.documentAnnotationCollections;if(d&&d[r.pageNumber]&&this.pdfViewerBase.isTextMarkupAnnotationModule()){var h=d[r.pageNumber];if(this.pdfViewerBase.isImportAction){var p=h.textMarkupAnnotation,c=h.shapeAnnotation,u=h.measureShapeAnnotation,f=h.stampAnnotations,m=h.stickyNotesAnnotation,g=h.freeTextAnnotation,w=h.signatureInkAnnotation;l=this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(p,r.pageNumber,f,c,u,m,g,w)}else l=this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(h.textMarkupAnnotation,r.pageNumber,h.stampAnnotations,h.shapeAnnotation,h.measureShapeAnnotation,h.stickyNotesAnnotation,h.freeTextAnnotation,h.signatureInkAnnotation)}this.pdfViewerBase.isAnnotationCollectionRemoved&&(l=this.pdfViewer.annotationModule.textMarkupAnnotationModule.printTextMarkupAnnotations(null,r.pageNumber,null,null,null,null,null,null))}var y=r.pageNumber;this.printCanvas=sf.base.createElement("canvas",{id:this.pdfViewer.element.id+"_printCanvas_"+o,className:"e-pv-print-canvas"}),this.printCanvas.style.width=t+"px",this.printCanvas.style.height=i+"px";var v=!!navigator.userAgent.match(/Version\/[\d.]+.*Safari/);-1!==navigator.userAgent.indexOf("Firefox")&&(this.pdfViewer.enablePrintRotation?(this.printHeight=this.firefoxPrintHeight,this.printWidth=this.firefoxPrintWidth):this.printWidth>this.printHeight?(this.printHeight=this.firefoxPrintWidth,this.printWidth=this.firefoxPrintHeight):(this.printHeight=this.firefoxPrintHeight,this.printWidth=this.firefoxPrintWidth)),v&&(this.pdfViewer.enablePrintRotation?(this.printHeight=1056,this.printWidth=816):this.printWidth>this.printHeight?(this.printHeight=816,this.printWidth=1056):(this.printHeight=1056,this.printWidth=816)),this.printCanvas.height=1.5*this.printHeight*s,this.printCanvas.width=1.5*this.printWidth*s;var b=this.printCanvas.getContext("2d"),S=new Image,A=new Image;S.onload=function(){i>t||!a.pdfViewer.enablePrintRotation?(b.drawImage(S,0,0,a.printCanvas.width,a.printCanvas.height),l&&b.drawImage(A,0,0,a.printCanvas.width,a.printCanvas.height)):(b.translate(.5*a.printCanvas.width,.5*a.printCanvas.height),b.rotate(-.5*Math.PI),b.translate(.5*-a.printCanvas.height,.5*-a.printCanvas.width),b.drawImage(S,0,0,a.printCanvas.height,a.printCanvas.width),l&&b.drawImage(A,0,0,a.printCanvas.height,a.printCanvas.width)),y===a.pdfViewerBase.pageCount-1&&a.printWindowOpen(),a.pdfViewer.renderDrawing(null,y)},A.src=l,S.src=r.image,this.printViewerContainer.appendChild(this.printCanvas),this.pdfViewerBase.isPrint=!1}},e.prototype.renderFieldsForPrint=function(e,t,i){var n,o=null;if(this.pdfViewer.formFieldsModule&&(o=this.pdfViewerBase.getItemFromSessionStorage("_formfields")),n="Default"===this.pdfViewer.printMode?this.frameDoc.document.getElementById("fields_"+e):this.printWindow.document.getElementById("fields_"+e),this.pdfViewer.formDesignerModule){var s=null;if(this.pdfViewer.formDesignerModule&&!sf.base.isNullOrUndefined(this.pdfViewer.formDesignerCollections)){s=this.pdfViewer.formDesignerCollections;for(m=0;m<s.length;m++){var a=u(s[m]),r=a.pageNumber-1,l=(y=this.pdfViewerBase.pageSize[r])?y.width:0,d=y?y.height:0,h=a.rotateAngle;if(a.pageNumber-1===e&&("Visible"===a.visibility||"HiddenPrintable"===a.visibility)){var p=this.pdfViewer.formDesignerModule.createFormField(a,!0),c=u(a.bounds);sf.base.isNullOrUndefined(p)||(this.applyPosition(p,c,null,t,i,!0,a.zoomValue,l,d),this.pdfViewer.enablePrintRotation?d>l?this.applyRotation(p,h):this.applyRotation(p,h-90):this.applyRotation(p,h),n.appendChild(p))}}}}else if(o)for(var f=JSON.parse(o),m=0;m<f.length;m++){var g=f[m];if(parseFloat(g.PageIndex)===e){var w=this.pdfViewer.formFieldsModule.createFormFields(g,e,m,n).currentField;if(w=w&&w.inputField?w.inputField:w){var y,v=g.LineBounds,b=g.Font;if(this.applyPosition(w,v,b,t,i),w.InsertSpaces=g.InsertSpaces,w.InsertSpaces){var S=parseInt(w.style.width,10)/w.maxLength-parseFloat(w.style.fontSize)/2-.6;w.style.letterSpacing=S+"px",w.style.fontFamily="monospace"}if((y=this.pdfViewerBase.pageSize[e]).width>y.height&&this.pdfViewer.enablePrintRotation){w.style.transform="rotate(-90deg)";var A=parseFloat(w.style.left),x=parseFloat(w.style.width)/2,V=parseFloat(w.style.height)/2,C=parseFloat(w.style.top),I=parseFloat(w.style.height);w.style.left=V-x+C+"px",w.style.top=y.width/i-I/t-(x/t-V/t+A)+"px"}w.style.backgroundColor=g.IsTransparent||-1===["Textbox","Password","DropDown","ListBox"].indexOf(g.Name)?"transparent":"white",g.IsSignatureField||(w.style.borderColor="transparent"),n.appendChild(w)}}}},e.prototype.applyRotation=function(e,t){e.style.transform="rotate("+t+"deg)",e.style.transformOrigin="left top"},e.prototype.applyPosition=function(e,t,i,n,o,s,a,r,l){if(t){var d,h=void 0,p=void 0,c=void 0;s&&l<r&&this.pdfViewer.enablePrintRotation?(d=(r-t.x/a)/o,h=t.y/a/n,p=t.width/a/o,c=t.height/a/n):(h=s?(t.X?t.X:t.x)/a/o:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.X)/o,d=s?(t.Y?t.Y:t.y)/a/n:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Y)/n,p=s?(t.Width?t.Width:t.width)/a/o:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Width)/o,c=s?(t.Height?t.Height:t.height)/a/n:this.pdfViewer.formFieldsModule.ConvertPointToPixel(t.Height)/n);var u=0;null!==i&&i.Height&&(e.style.fontFamily=i.Name,i.Italic&&(e.style.fontStyle="italic"),i.Bold&&(e.style.fontWeight="Bold"),u=this.pdfViewerBase.ConvertPointToPixel(i.Size)),sf.base.Browser.isIE&&(d-=1),e=e&&e.inputField?e.inputField:e,this.pdfViewerBase.setStyleToTextDiv(e,h,d,u,p,c,!0)}},e.prototype.printWindowOpen=function(){var e,t=this,i=navigator.userAgent;e="Default"===this.pdfViewer.printMode?this.frameDoc.document:this.printWindow.document;for(var n=0;n<this.printViewerContainer.children.length;n++){var o=this.pdfViewer.fileName;0===n&&(-1!==i.indexOf("Chrome")||-1!==i.indexOf("Safari")||-1!==i.indexOf("Firefox")?e.write("<html moznomarginboxes mozdisallowselectionprint><head><title>"+o+"</title><style>html, body { height: 100%; width:100% } img { height: 100%; width: 100%; display: block; }@media print { body { margin: 0cm; } img { width:auto; width:auto; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm;  size:"+this.printWidth.toString()+"px "+this.printHeight.toString()+"px; }</style></head><body>"):e.write("<html><head><title>"+o+"</title><style>html, body { height: 100%; } img { height: 100%; width: 100%; }@media print { body { margin: 0cm; }img { width:auto; width:auto; box-sizing: border-box; }br, button { display: none; } div{ page-break-inside: avoid; }} @page{margin:0mm;  size:"+this.printWidth.toString()+"px "+this.printHeight.toString()+"px; }</style></head><body>"));var s=this.printViewerContainer.children[n].toDataURL();if(e.write('<div style="margin:0mm;width:'+this.printWidth.toString()+"px;height:"+this.printHeight.toString()+'px;position:relative"><img src="'+s+'" id="image_'+n+'" /><div id="fields_'+n+'" style="margin:0px;top:0px;left:0px;position:absolute;width:'+this.printWidth.toString()+"px;height:"+this.printHeight.toString()+'px;z-index:2"></div></div>'),this.pdfViewer.formFieldsModule){var a=this.pdfViewerBase.pageSize[n].width,r=this.pdfViewerBase.pageSize[n].height,l=void 0,d=void 0;r<a&&this.pdfViewer.enablePrintRotation?(l=r/this.printWidth,d=a/this.printHeight):(l=r/this.printHeight,d=a/this.printWidth),this.renderFieldsForPrint(n,l,d)}}if(this.printWindow&&window.addEventListener("beforeunload",this.closePrintWindow),sf.base.Browser.isIE||"edge"===sf.base.Browser.info.name||sf.base.Browser.isDevice||/Mobile/.test(navigator.userAgent)&&this.pdfViewer.enableDesktopMode)try{"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!1),this.iframe.contentWindow.print()):this.printWindow.print()}catch(e){"Default"===this.pdfViewer.printMode?(this.pdfViewerBase.showPrintLoadingIndicator(!1),this.iframe.contentWindow.print()):this.printWindow.print()}else setTimeout((function(){"Default"===t.pdfViewer.printMode?(t.pdfViewerBase.showPrintLoadingIndicator(!1),t.iframe.contentWindow.print(),t.iframe.contentWindow.focus(),document.body.removeChild(t.iframe)):t.printWindow&&(t.printWindow.print(),t.printWindow.focus(),t.printWindow.close())}),200)},e.prototype.createPrintLoadingIndicator=function(e){var t=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_printWindowcontainer"});t.style.height="100%",t.style.width="100%",t.style.position="absolute",t.style.zIndex=2e3,t.style.left=0,t.style.top=0,t.style.overflow="auto",t.style.backgroundColor="rgba(0, 0, 0, 0.3)",e.appendChild(t);var i=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_printLoadingContainer"});i.style.position="absolute",i.style.width="50px",i.style.height="50px",i.style.left="46%",i.style.top="45%",t.style.zIndex=3e3,t.appendChild(i);var n=new Image;n.src="data:image/gif;base64,R0lGODlhNgA3APMAAP///wAAAHh4eBwcHA4ODtjY2FRUVNzc3MTExEhISIqKigAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAANgA3AAAEzBDISau9OOvNu/9gKI5kaZ4lkhBEgqCnws6EApMITb93uOqsRC8EpA1Bxdnx8wMKl51ckXcsGFiGAkamsy0LA9pAe1EFqRbBYCAYXXUGk4DWJhZN4dlAlMSLRW80cSVzM3UgB3ksAwcnamwkB28GjVCWl5iZmpucnZ4cj4eWoRqFLKJHpgSoFIoEe5ausBeyl7UYqqw9uaVrukOkn8LDxMXGx8ibwY6+JLxydCO3JdMg1dJ/Is+E0SPLcs3Jnt/F28XXw+jC5uXh4u89EQAh+QQJCgAAACwAAAAANgA3AAAEzhDISau9OOvNu/9gKI5kaZ5oqhYGQRiFWhaD6w6xLLa2a+iiXg8YEtqIIF7vh/QcarbB4YJIuBKIpuTAM0wtCqNiJBgMBCaE0ZUFCXpoknWdCEFvpfURdCcM8noEIW82cSNzRnWDZoYjamttWhphQmOSHFVXkZecnZ6foKFujJdlZxqELo1AqQSrFH1/TbEZtLM9shetrzK7qKSSpryixMXGx8jJyifCKc1kcMzRIrYl1Xy4J9cfvibdIs/MwMue4cffxtvE6qLoxubk8ScRACH5BAkKAAAALAAAAAA2ADcAAATOEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwyZKxhqhgJJeSQVdraBNFSsVUVPHsEAzJrEtnJNSELXRN2bKcwjw19f0QG7PjA7B2EGfn+FhoeIiYoSCAk1CQiLFQpoChlUQwhuBJEWcXkpjm4JF3w9P5tvFqZsLKkEF58/omiksXiZm52SlGKWkhONj7vAxcbHyMkTmCjMcDygRNAjrCfVaqcm11zTJrIjzt64yojhxd/G28XqwOjG5uTxJhEAIfkECQoAAAAsAAAAADYANwAABM0QyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/i8qmCoGQoacT8FZ4AXbFopfTwEBhhnQ4w2j0GRkgQYiEOLPI6ZUkgHZwd6EweLBqSlq6ytricICTUJCKwKkgojgiMIlwS1VEYlspcJIZAkvjXHlcnKIZokxJLG0KAlvZfAebeMuUi7FbGz2z/Rq8jozavn7Nev8CsRACH5BAkKAAAALAAAAAA2ADcAAATLEMhJq7046827/2AojmRpnmiqrqwwDAJbCkRNxLI42MSQ6zzfD0Sz4YYfFwzJNCmPzheUyJuKijVrZ2cTlrg1LwjcO5HFyeoJeyM9U++mfE6v2+/4PD6O5F/YWiqAGWdIhRiHP4kWg0ONGH4/kXqUlZaXmJlMBQY1BgVuUicFZ6AhjyOdPAQGQF0mqzauYbCxBFdqJao8rVeiGQgJNQkIFwdnB0MKsQrGqgbJPwi2BMV5wrYJetQ129x62LHaedO21nnLq82VwcPnIhEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7/g8Po7kX9haKoAZZ0iFGIc/iRaDQ40Yfj+RepSVlpeYAAgJNQkIlgo8NQqUCKI2nzNSIpynBAkzaiCuNl9BIbQ1tl0hraewbrIfpq6pbqsioaKkFwUGNQYFSJudxhUFZ9KUz6IGlbTfrpXcPN6UB2cHlgfcBuqZKBEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhhh8XDMk0KY/OF5TIm4qKNWtnZxOWuDUvCNw7kcXJ6gl7Iz1T76Z8Tq/b7yJEopZA4CsKPDUKfxIIgjZ+P3EWe4gECYtqFo82P2cXlTWXQReOiJE5bFqHj4qiUhmBgoSFho59rrKztLVMBQY1BgWzBWe8UUsiuYIGTpMglSaYIcpfnSHEPMYzyB8HZwdrqSMHxAbath2MsqO0zLLorua05OLvJxEAIfkECQoAAAAsAAAAADYANwAABMwQyEmrvTjrzbv/YCiOZGmeaKqurDAMAlsKRE3EsjjYxJDrPN8PRLPhfohELYHQuGBDgIJXU0Q5CKqtOXsdP0otITHjfTtiW2lnE37StXUwFNaSScXaGZvm4r0jU1RWV1hhTIWJiouMjVcFBjUGBY4WBWw1A5RDT3sTkVQGnGYYaUOYPaVip3MXoDyiP3k3GAeoAwdRnRoHoAa5lcHCw8TFxscduyjKIrOeRKRAbSe3I9Um1yHOJ9sjzCbfyInhwt3E2cPo5dHF5OLvJREAOwAAAAAAAAAAAA==",n.style.width="50px",n.style.height="50px",i.appendChild(n);var o=sf.base.createElement("div",{id:this.pdfViewer.dataId+"_printLabelContainer"});o.style.position="absolute",o.textContent="Loading ...",o.style.fontWeight="Bold",o.style.left="46%",o.style.top="54.5%",o.style.zIndex="3000",t.appendChild(o)},e.prototype.destroy=function(){this.printViewerContainer=void 0,this.frameDoc=void 0,this.printWindow&&window.removeEventListener("beforeunload",this.closePrintWindow),this.printWindow=void 0},e.prototype.getModuleName=function(){return"Print"},e}(),Bu=function(){function e(e,t){this.maintainTabIndex={},this.maintanMinTabindex={},this.isSignatureField=!1,this.isKeyDownCheck=!1,this.isMouseupOccurred=!1,this.previousZoomActionType=null,this.readOnlyCollection=[],this.isSignatureRendered=!1,this.signatureFieldCollection=[],this.selectedIndex=[],this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.renderFormFields=function(e){this.maxTabIndex=0,this.minTabIndex=-1;var t=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+e),i=document.getElementById(this.pdfViewer.dataId+"_pageCanvas_"+e);if(this.pdfViewer.formDesignerModule&&null!==i&&null!==t){if(this.formFieldsData=this.pdfViewer.formDesignerModule.pdfFormFieldToFormDesignerCollections(this.pdfViewer.formFieldPDFCollections),this.mapFormDesignerSignaturePath(this.formFieldsData),this.pdfViewer.formFieldPDFCollections=[],!sf.base.isNullOrUndefined(this.formFieldsData)&&null!==i&&null!==t)for(var n=0,o=this.formFieldsData;n<o.length;n++){(l=o[n]).pageNumber===e+1&&("SignatureField"===l.type||"InitialField"===l.type?(this.pdfViewer.formDesignerModule.isRenderFormField=!0,this.pdfViewer.formDesignerModule.addFormField(l.type,l),this.pdfViewer.formDesignerModule.isRenderFormField=!1,l.value&&(l.isSignatureRendered||(l.isSignatureRendered=!0,this.renderExistingAnnnot(l,l.pageNumber-1,null,!1)))):(this.pdfViewer.formDesignerModule.isRenderFormField=!0,this.pdfViewer.formDesignerModule.addFormField(l.type,l),this.pdfViewer.formDesignerModule.isRenderFormField=!1))}}else if(this.data=this.pdfViewerBase.getItemFromSessionStorage("_formfields"),this.data){this.formFieldsData=JSON.parse(this.data);var s=void 0;if(null!==this.formFieldsData&&null!==i&&null!==t){for(var a=!1,r=0;r<this.formFieldsData.length;r++){var l=this.formFieldsData[r];!a&&sf.base.isNullOrUndefined(l.ActualFieldName)&&l.PageIndex===e&&(s=parseInt(l.FieldName.split("_")[1],10),a=!0)}for(r=0;r<this.formFieldsData.length;r++){var d=this.formFieldsData[r];if(""!==d.FieldName){d.IsInitialField&&(d.Name="InitialField");d.Font;if(parseFloat(d.PageIndex)===e){var h=this.createFormFields(d,e,r,null,s),p=h.currentField,c=h.count;if(p){var u=void 0,f=p.inputField;f&&(u=p.index,p=f);var m=this.createParentElement(d,e);m&&(m.className="e-pdfviewer-formFields-parentElement");var g=d.LineBounds,w=d.Font,y=!1,v=0;if(0===d.Rotation?(y=!0,v=this.getAngle(e),m?m.style.transform="rotate("+v+"deg)":p.style.transform="rotate("+v+"deg)"):m?m.style.transform="rotate("+v+"deg)":p.style.transform="rotate("+v+"deg)",d.InsertSpaces?this.applyPosition(p,g,w,e,0,y):this.applyPosition(p,g,w,e,0,y,!1),p.InsertSpaces=d.InsertSpaces,p.InsertSpaces){var b=this.pdfViewerBase.getZoomFactor(),S=parseInt(p.style.width,10)/p.maxLength-parseFloat(p.style.fontSize)/2-.6*b;p.style.letterSpacing=S+"px",p.style.fontFamily="monospace",p.style.paddingLeft=S/2+"px"}d.uniqueID=this.pdfViewer.dataId+"input_"+e+"_"+r;for(var A=0;A<this.pdfViewer.formFieldCollections.length;A++)"text"!==p.type&&"password"!==p.type&&"textarea"!==p.type||"SignatureField"===d.Name||d.uniqueID===this.pdfViewer.formFieldCollections[A].id&&(this.pdfViewer.formFieldCollections[A].value=d.Text);if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&"DropDown"===d.Name&&(p.style.appearance="none",p.style.background="url(data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0Ljk1IDEwIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9LmNscy0ye2ZpbGw6IzQ0NDt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPmFycm93czwvdGl0bGU+PHJlY3QgY2xhc3M9ImNscy0xIiB3aWR0aD0iNC45NSIgaGVpZ2h0PSIxMCIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxLjQxIDQuNjcgMi40OCAzLjE4IDMuNTQgNC42NyAxLjQxIDQuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTIiIHBvaW50cz0iMy41NCA1LjMzIDIuNDggNi44MiAxLjQxIDUuMzMgMy41NCA1LjMzIi8+PC9zdmc+) no-repeat 100% 50%"),this.applyCommonProperties(p,e,r,d,y),this.checkIsReadonly(d,p),this.applyTabIndex(d,p,e),this.checkIsRequiredField(d,p),"SignatureField"!==d.Name&&"InitialField"!==d.Name||"transparent"===p.style.backgroundColor||(p.style.backgroundColor="rgba(255, 255, 255, 0.2)"),this.applyDefaultColor(p),this.updateFormFieldsCollection(d),"transparent"!==p.style.backgroundColor&&m&&(m.style.background="white"),0===d.Rotation){var x=this.getAngle(e);m?m.style.transform="rotate("+x+"deg)":p.style.transform="rotate("+x+"deg)"}if(m)m.appendChild(p),t.appendChild(m);else{p.style.position="absolute";var V=document.getElementById("signIcon"+e+"_"+u);V&&(V.style.left=p.style.left,V.style.top=p.style.top),t.appendChild(p)}p.addEventListener("focus",this.focusFormFields.bind(this)),p.addEventListener("blur",this.blurFormFields.bind(this)),p.addEventListener("click",this.updateFormFields.bind(this)),p.addEventListener("change",this.changeFormFields.bind(this)),p.addEventListener("keydown",this.updateFormFieldsValue.bind(this)),p.addEventListener("keyup",this.updateSameFieldsValue.bind(this)),s=c}}}}sf.base.isNullOrUndefined(this.pdfViewer.formDesignerModule)&&(window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_formfields"),this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,"_formfields"))}}},e.prototype.mapFormDesignerSignaturePath=function(e){var t=this;if(this.isSignatureField=!1,!sf.base.isNullOrUndefined(this.pdfViewer.formDesignerSignatureCollections)){var i=new Map,n=new Map;this.pdfViewer.formDesignerSignatureCollections.forEach((function(e){i.has(e.FieldName)||i.set(e.FieldName,e)})),e.forEach((function(e){n.has(e.id)||n.set(e.id,e)})),i.forEach((function(e,o){var s=o.split("_")[0],a=Array.from(n.values()).find((function(e){return e.name===s}));if(a){if(a.Value=a.value=e.Value,a.value&&(a.signatureType=a.value.indexOf("base64")>-1?"Image":a.value.startsWith("M")&&a.value.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Text"),!a.signatureBound){var r={x:t.ConvertPointToPixel(e.LineBounds.X),y:t.ConvertPointToPixel(e.LineBounds.Y),width:t.ConvertPointToPixel(e.LineBounds.Width),height:t.ConvertPointToPixel(e.LineBounds.Height)};a.signatureBound=r,a.FontFamily=e.FontFamily,a.FontSize=e.FontSize,a.isSignatureRendered||(a.isSignatureRendered=!0,t.renderExistingAnnnot(a,a.pageNumber-1,null,!1))}t.isSignatureField=!0,n.delete(a.id)}i.delete(o)})),this.pdfViewer.formDesignerSignatureCollections=[]}},e.prototype.trim=function(e){return e.replace(/^\s+|\s+$/gm,"")},e.prototype.rgbaToHex=function(e){return Cr(e)},e.prototype.getListValues=function(e){for(var t=e.TextList,i=[],n=0;n<t.length;n++)t[n]===e.SelectedValue&&this.selectedIndex.push(n),i.push({itemName:t[n],itemValue:t[n]});return"ListBox"===this.getFormFieldType(e)&&(this.selectedIndex=e.SelectedList),i},e.prototype.createParentElement=function(e,t){var i;if("Textbox"===e.Name||"Password"===e.Name||"DropDown"===e.Name||"ListBox"===e.Name){(i=document.createElement("div")).style.background="white",(e.InsertSpaces||e.IsTransparent)&&(i.style.background="transparent");var n=e.LineBounds,o=e.Font;i.style.position="absolute";var s=!1;0===e.Rotation&&(s=!0);var a=e.InsertSpaces;this.applyPosition(i,n,o,t,0,s,!0,a)}return i},e.prototype.getAngle=function(e){var t=0,i=this.pdfViewerBase.pageSize[e];if(i.rotation)switch(i.rotation){case 0:t=0;break;case 1:t=90;break;case 2:t=180;break;case 3:t=270}return t},e.prototype.nextField=function(){this.signatureFieldNavigate(!0)},e.prototype.previousField=function(){this.signatureFieldNavigate(!1)},e.prototype.signatureFieldNavigate=function(e){var t,i=e,n=this.signatureFieldCollection;if(0===n.length&&(n=this.getSignField()),this.currentTarget){for(var o=0;o<n.length;o++)if(t=n[o],this.currentTarget.id===t.uniqueID){this.currentTarget=document.getElementById(t.uniqueID),this.getSignatureIndex(o,n.length,i);break}}else e&&(t=n[0]).uniqueID&&(this.currentTarget=document.getElementById(t.uniqueID),this.getSignatureIndex(0,n.length,i,!0))},e.prototype.getSignatureIndex=function(e,t,i,n){var o=e;n||(i?o++:o--),1===t?this.renderSignatureField(0):o<t&&o>=0?this.renderSignatureField(o):i?o>=t&&this.renderSignatureField(0):o<=0&&this.renderSignatureField(t-1)},e.prototype.renderSignatureField=function(e){var t,i=e,n=this.signatureFieldCollection;if(i<n.length){for(var o=0;o<n.length;o++){var s=n[i].uniqueID,a=n[o];if(s===a.uniqueID){var r=a.PageIndex>=0?a.PageIndex:a.pageNumber;this.pdfViewer.annotationModule.findRenderPageList(r)||this.pdfViewer.navigation.goToPage(r),this.currentTarget=document.getElementById(a.uniqueID),t=a;break}}if(null===this.currentTarget){r=t.PageIndex>=0?t.PageIndex:t.pageNumber;this.pdfViewer.navigation.goToPage(r),this.currentTarget=document.getElementById(t.uniqueID)}this.currentTarget&&("e-pdfviewer-signatureformfields-signature"===this.currentTarget.className?(document.getElementById(this.currentTarget.id).focus(),this.pdfViewer.select([this.currentTarget.id],null)):"e-pdfviewer-signatureformfields"===this.currentTarget.className&&document.getElementById(this.currentTarget.id).focus())}},e.prototype.setFocus=function(e){if(e){this.removeFocus();var t=document.getElementById(e);t.classList.add("e-pv-signature-focus");t.style.caretColor="transparent"}else this.currentTarget&&document.getElementById(this.currentTarget.id).focus()},e.prototype.removeFocus=function(){if(this.signatureFieldCollection){var e=this.signatureFieldCollection;0===e.length&&(e=this.getSignField());for(var t=0;t<this.signatureFieldCollection.length;t++){var i=this.signatureFieldCollection[t].uniqueID,n=document.getElementById(i);n&&n.classList.remove("e-pv-signature-focus")}}},e.prototype.getSignField=function(){return this.signatureFieldCollection=this.getFormFieldSignField(),this.signatureFieldCollection},e.prototype.getFormFieldSignField=function(){var e,t=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(t)for(var i=JSON.parse(t),n=0;n<i.length;n++)"SignatureField"!==(e=i[n]).Name&&"InitialField"!==e.Name||(e.uniqueID=this.pdfViewer.dataId+"input_"+e.PageIndex+"_"+n,this.signatureFieldCollection.push(i[n]));return this.signatureFieldCollection},e.prototype.formFieldCollections=function(){var e=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(e)for(var t=JSON.parse(e),i=0;i<t.length;i++){var n=t[i],o=n.Name;if("ink"!==n.Name){var s={name:this.retriveFieldName(n),id:this.pdfViewer.dataId+"input_"+parseFloat(n.PageIndex)+"_"+i,isReadOnly:!1,type:o,value:this.retriveCurrentValue(n),fontName:"",isRequired:n.IsRequired};"SignatureText"!==s.type&&this.pdfViewer.formFieldCollections.push(s)}}},e.prototype.updateFormFieldsCollection=function(e){var t,i=e.Name;t=null!=e.Value?e.Value:e.Text;var n={name:this.retriveFieldName(e),id:e.uniqueID,isReadOnly:e.IsReadonly,isRequired:e.IsRequired,isSelected:"CheckBox"!==i&&e.Selected,isChecked:"RadioButton"!==i&&e.Selected,type:i,value:"ListBox"===i||"DropDown"===i?e.SelectedValue:t,fontName:e.FontFamily?e.FontFamily:""};this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===n.id}))]=n},e.prototype.updateFormFieldValues=function(e){if(this.readOnlyCollection.push(e.id),e){var t=document.getElementById(e.id);t&&(e.isReadOnly?(t.disabled=!0,t.style.backgroundColor="",t.style.cursor="default",t.style.pointerEvents="none"):(""===t.style.backgroundColor&&(t.style.backgroundColor="rgba(0, 20, 200, 0.2)"),t.disabled=!1,t.style.cursor="",t.style.pointerEvents="all")),this.updateDataInSession(t)}},e.prototype.retriveFieldName=function(e){var t;switch(e.Name){case"Textbox":case"Password":case"SignatureField":t=e.FieldName;break;case"RadioButton":case"CheckBox":t=e.GroupName;break;case"DropDown":case"ListBox":t=e.Text?e.Text:e.FieldName}return t},e.prototype.retriveCurrentValue=function(e){var t;switch(e.Name){case"Textbox":case"Password":t=e.Text;break;case"SignatureField":t=e.Value;break;case"RadioButton":case"CheckBox":t=e.Selected;break;case"DropDown":t=e.SelectedValue;break;case"ListBox":t=e.SelectedList}return t},e.prototype.getSignatureBounds=function(e,t,i){var n=this.pdfViewerBase.pageSize[i],o=0;switch(n.rotation){case 0:o=t;break;case 1:o={x:t.x+e.Width+t.width/3.5,y:n.width-e.X+t.height/4};break;case 2:o={x:n.width-t.x-t.width,y:n.height-t.y-t.height};break;case 3:o={x:t.y-t.width/2+t.height,y:t.x+t.width/3}}return o},e.prototype.downloadFormFieldsData=function(e){var t=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(t){if(e){t=t.replace(/\\r|\\n|\\r\\n/g,"##newline##")}for(var i=JSON.parse(t),n={},o=[],s=0;s<i.length;s++)for(var a=s+1;a<i.length;a++)i[s].FieldName===i[a].FieldName&&(i[s].flagSet=!0,i[a].flagSet=!0);for(var r=0;r<i.length;r++){var l=i[r],d=l.IsRequired;if("Textbox"===l.Name||"Password"===l.Name||l.Multiline)!d||""!==l.Text&&null!==l.Text?delete this.pdfViewerBase.nonFillableFields[l.FieldName]:(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[l.FieldName]=l.Text),o={fieldValue:l.Text,isReadOnly:l.IsReadonly},n[l.FieldName]=o;else if("RadioButton"===l.Name){if(l.GroupName&&l.IsRequired){var h={},p=new Set;for(s=0;s<i.length;s++){if("RadioButton"===i[s].Name&&i[s].IsRequired)h[""+(c=i[s].GroupName)]||(h[""+c]=[]),p.has(i[s].uniqueID)||(h[""+c].push(i[s]),p.add(i[s].uniqueID))}for(var c in h)if(Object.prototype.hasOwnProperty.call(h,c)){var u=h[""+c];if(1===u.length)u[0].IsRequired&&!u[0].Selected&&(this.pdfViewerBase.validateForm=!0);else{this.pdfViewerBase.validateForm=!0;for(var f=0,m=u;f<m.length;f++){var g=m[f];if(g.IsRequired&&g.Selected){this.pdfViewerBase.validateForm=!1;break}}}}this.pdfViewerBase.validateForm||delete this.pdfViewerBase.nonFillableFields[l.GroupName]}l.Value&&l.Selected?(o={fieldValue:l.Value,isReadOnly:l.IsReadonly},n[l.GroupName]=o):void 0!==n[l.GroupName]&&null!==n[l.GroupName]||(o={fieldValue:l.Selected,isReadOnly:l.IsReadonly},n[l.GroupName]=o)}else if("CheckBox"===l.Name)d&&!1===l.Selected?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[l.GroupName]=l.Selected):delete this.pdfViewerBase.nonFillableFields[l.GroupName],l.CheckboxIndex&&l.Selected?(o={fieldValue:l.CheckboxIndex,isReadOnly:l.IsReadonly},n[l.GroupName]=o):void 0!==n[l.GroupName]&&null!==n[l.GroupName]||(o={fieldValue:l.Selected,isReadOnly:l.IsReadonly},n[l.GroupName]=o);else if("DropDown"===l.Name)d&&""===l.SelectedValue?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[l.FieldName]=l.SelectedValue):delete this.pdfViewerBase.nonFillableFields[l.FieldName],o={fieldValue:l.SelectedValue,isReadOnly:l.IsReadonly},n[l.FieldName]=o;else if("ListBox"===l.Name){for(var w=l.TextList,y=[],v=0;v<l.SelectedList.length;v++){var b=l.SelectedList[v];y.push(w[""+b])}o={fieldValue:JSON.stringify(y),isReadOnly:l.IsReadonly},n[l.Text]=o}else if("SignatureField"===l.Name||"InitialField"===l.Name){var S=void 0;if(null!==l.Value&&""!==l.Value||this.addSignaturePath(l),l.Value&&""!==l.Value){S=l.Value;var A=l.fontFamily?l.fontFamily:l.FontFamily;if(A)l.flagSet?(n[l.FieldName+"fontName_"+r]=A,n[l.FieldName+"fontSize_"+r]=l.fontSize?l.fontSize:l.FontSize):(n[l.FieldName+"fontName"]=A,n[l.FieldName+"fontSize"]=l.fontSize?l.fontSize:l.FontSize);else if(l.Value.split("base64,")[1])l.flagSet?n[l.FieldName+"ImageData_"+r]=!0:n[l.FieldName+"ImageData"]=!0;else{var x=sf.drawings.processPathData(l.Value);S=sf.drawings.splitArrayCollection(x)}}if(d&&null===l.Value||""===l.Value?(this.pdfViewerBase.validateForm=!0,this.pdfViewerBase.nonFillableFields[l.FieldName]=JSON.stringify(S)):delete this.pdfViewerBase.nonFillableFields[l.FieldName],n[l.FieldName]=JSON.stringify(S),l.Bounds){var V=this.getSignatureBounds(l.LineBounds,l.Bounds,l.PageIndex);l.Bounds.x=V.x,l.Bounds.y=V.y,l.flagSet?n[l.FieldName+"bounds_"+r]=JSON.stringify(l.Bounds):n[l.FieldName+"bounds"]=JSON.stringify(l.Bounds)}else{var C=l.LineBounds;V={x:this.ConvertPointToPixel(C.X),y:this.ConvertPointToPixel(C.Y),width:this.ConvertPointToPixel(C.Width),height:this.ConvertPointToPixel(C.Height)};n[l.FieldName+"bounds"]=JSON.stringify(V)}l.flagSet?n[l.FieldName+"isReadOnly_"+r]=l.IsReadonly:n[l.FieldName+"isReadOnly"]=l.IsReadonly}}return JSON.stringify(n)}},e.prototype.focusFormFields=function(e){var t=e.target;if(t&&"e-pdfviewer-signatureformfields"!==t.className&&"e-pdfviewer-signatureformfields e-pv-signature-focus"!==t.className){var i=t.style.backgroundColor,n=i.lastIndexOf(","),o=i.slice(0,n+1)+0+")";t.style.backgroundColor=o,t.style.boxShadow="0 0 5px "+("transparent"===t.style.borderColor?"#000000":t.style.borderColor),this.removeFocus()}else t&&!t.disabled&&("e-pdfviewer-signatureformfields"!==t.className&&"e-pdfviewer-signatureformfields-signature"!==t.className&&"e-pdfviewer-signatureformfields e-pv-signature-focus"!==t.className&&"e-pdfviewer-signatureformfields-signature  e-pv-signature-focus"!==t.className||this.setFocus(t.id))},e.prototype.blurFormFields=function(e){var t=e.target;if(t.InsertSpaces&&this.isKeyDownCheck){var i=parseInt(t.style.width,10)-parseInt(t.style.height,10)/2;t.style.width=i+"px",this.isKeyDownCheck=!1}var n=t.style.backgroundColor,o=n.lastIndexOf(","),s=n.slice(0,o+1)+.2+")";t.style.backgroundColor=s,t.style.boxShadow="none"},e.prototype.updateFormFields=function(e){var t=e.target;if(!sf.base.isNullOrUndefined(t)&&("e-pdfviewer-ListBox"===t.className?(t=t.parentElement,this.updateDataInSession(t)):"e-pdfviewer-signatureformfields"===t.className||t.className.includes("e-pdfviewer-signatureformfields")?this.currentTarget=t:"e-pv-buttonItem"!==t.className&&"button"!==t.type||this.pdfViewer.fireButtonFieldClickEvent(t.value,t.name,t.id),!sf.base.isNullOrUndefined(this.pdfViewer.formFieldCollections)))for(var i=0;i<this.pdfViewer.formFieldCollections.length;i++)t.id!==this.pdfViewer.formFieldCollections[i].id||t.disabled||(this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",this.pdfViewer.formFieldCollections[i],!1,0===e.button),"e-pdfviewer-signatureformfields"!==t.className&&"e-pdfviewer-signatureformfields-signature"!==t.className&&"e-pdfviewer-signatureformfields e-pv-signature-focus"!==t.className&&"e-pdfviewer-signatureformfields-signature  e-pv-signature-focus"!==t.className||this.setFocus(t.id))},e.prototype.drawSignature=function(e,t,i,n,o){var s;void 0===o&&(o=!1);var a,r,l,d,h=this,p=0;if(this.pdfViewer.enableFormDesigner)d=this.pdfViewer.formDesignerCollections;else{var c=this.pdfViewerBase.getItemFromSessionStorage("_formfields");d=JSON.parse(c)}for(var f=this.pdfViewer.enableFormDesigner,m=this.currentTarget?this.currentTarget.name:i.name?i.name:i.offsetParent.name,g=function(c){var g=d[c].FieldName,y=d[c];if((g===m&&!sf.base.isNullOrUndefined(d[c].ActualFieldName)||f&&("SignatureField"===y.type||"InitialField"===y.type)&&(i&&i.id===y.id||m===y.name))&&(i=document.getElementById(d[c].uniqueID),f&&(i=document.getElementById(y.id)),i)){var v=i,b=v.offsetParent.offsetParent.id.split("_")[0],S=w.pdfViewer.nameTable[""+b];i&&i.offsetParent&&S&&(r=i.getBoundingClientRect(),l=i.offsetParent.offsetParent.offsetParent.getBoundingClientRect(),w.pdfViewerBase.drawSignatureWithTool=!0,i.nextSibling&&-1!==i.nextSibling.id.indexOf("initial")&&(w.pdfViewer.isInitialFieldToolbarSelection=!0));var A=t||w.pdfViewerBase.signatureModule.outputString,x=void 0;if(f){var V=w.pdfViewerBase.signatureModule.fontName,C=d[c].fontFamily;x=n||(V&&"Helvetica"!==V?V:C&&"Helvetica"!==C?C:"Helvetica")}else x=n||w.pdfViewerBase.signatureModule.fontName;var I,k=w.pdfViewerBase.getZoomFactor(),M=w.pdfViewerBase.drawSignatureWithTool?r.width/k:parseFloat(v.style.width)/k,T=w.pdfViewerBase.drawSignatureWithTool?r.height/k:parseFloat(v.style.height)/k,E=w.pdfViewerBase.drawSignatureWithTool?(r.left-l.left)/k:parseFloat(v.style.left)/k,B=w.pdfViewerBase.drawSignatureWithTool?(r.top-l.top)/k:parseFloat(v.style.top)/k;if(f){var P=w.pdfViewer.formDesignerCollections.find((function(e){return e.id===i.id}));I=w.pdfViewerBase.drawSignatureWithTool?P.pageNumber-1:parseFloat(v.id.split("_")[1])}else I=w.pdfViewerBase.drawSignatureWithTool?w.pdfViewerBase.getActivePage():parseFloat(v.id.split("_")[1]);var D,N,F=w.pdfViewerBase.drawSignatureWithTool&&i.nextElementSibling?parseFloat(i.nextElementSibling.id.split("_")[1]):parseFloat(v.id.split("_")[2]),L=w.pdfViewerBase.signatureModule.saveImageString,O=v.offsetParent.offsetParent.style.transform?v.offsetParent.offsetParent.style.transform:v.style.transform,R=(O=O.substring(O.indexOf("(")+1,O.indexOf("d")))?parseInt(O,10):0;if("Type"===e||f&&"Text"===e){if(x||(x="Helvetica"),a=w.getSignBounds(F,R,I,k,E,B,M,T),w.pdfViewer.signatureFitMode&&"Default"!==w.pdfViewer.signatureFitMode||(a=w.getDefaultBoundsforSign(a)),"SignatureText"===(s={id:v.id,bounds:{x:a.x,y:a.y,width:a.width,height:a.height},pageIndex:I,data:A,modifiedDate:"",shapeAnnotationType:"SignatureText",opacity:1,rotateAngle:R,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""},fontFamily:x,fontSize:a.height/1.35}).shapeAnnotationType){var z=w.getTextWidth(s.data,s.fontSize,s.fontFamily),H=1;z>a.width&&(H=a.width/z),s.fontSize=w.getFontSize(Math.floor(s.fontSize*H))}L=s.data,D=s.fontFamily,N=s.fontSize}else if("Image"===e){var U=a=w.getSignBounds(F,R,I,k,E,B,M,T),j=new Image,_=i;j.src=A,j.onload=function(){h.imageOnLoad(U,j,A,I,R,v,S,L,D,N,_,d[c],o)}}else if(-1!==A.indexOf("base64"))a=w.getSignBounds(F,R,I,k,E,B,M,T),w.pdfViewer.signatureFitMode&&"Default"!==w.pdfViewer.signatureFitMode||(a=w.getDefaultBoundsforSign(a)),s={id:v.id,bounds:{x:a.x,y:a.y,width:a.width,height:a.height},pageIndex:I,data:A,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:R,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}},L=s.data;else{if(w.pdfViewer.signatureFitMode&&"Default"!==w.pdfViewer.signatureFitMode)a=w.getSignBounds(F,R,I,k,E,B,M,T);else{var W=w.updateSignatureAspectRatio(A,!1,v);(a=w.getSignBounds(F,R,I,k,E,B,W.width,W.height,!0)).x=a.x+W.left,a.y=a.y+W.top,f&&y&&y.signatureBound&&(a=y.signatureBound)}s={id:v.id,bounds:{x:a.x,y:a.y,width:a.width,height:a.height},pageIndex:I,data:A,modifiedDate:"",shapeAnnotationType:"Path",opacity:1,rotateAngle:R,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}}if(w.pdfViewerBase.drawSignatureWithTool&&S){if(s&&(!o||o&&""!==s.data)){s.id=S.id+"_content";var q=w.pdfViewer.add(s);S.wrapper.children.push(q.wrapper)}}else(!o||o&&""!==s.data)&&w.pdfViewer.add(s);if(s&&"Path"===s.shapeAnnotationType&&""!==A){w.pdfViewerBase.currentSignatureAnnot=s;var Z={currentHeight:T,currentWidth:M,currentLeft:E,currentTop:B};w.pdfViewerBase.signatureModule.addSignatureCollection(a,Z),L=w.pdfViewerBase.signatureModule.saveImageString,w.pdfViewerBase.currentSignatureAnnot=null}var Y=document.getElementById(w.pdfViewer.dataId+"_annotationCanvas_"+I);if(w.pdfViewer.renderDrawing(Y,I),w.pdfViewerBase.signatureModule.showSignatureDialog(!1),"e-pdfviewer-signatureformfields e-pv-signature-focus"===v.className?v.className="e-pdfviewer-signatureformfields-signature e-pv-signature-focus":v.className="e-pdfviewer-signatureformfields-signature",s&&w.updateDataInSession(v,s.data,s.bounds,D,N),f){var X=void 0;if(y&&s){var G=void 0;if((sf.base.isNullOrUndefined(y.value)||""===y.value||y.value===s.data)&&(y.value===s.data||o||(w.pdfViewer.formDesignerModule.changedProperties=[],X=!0),G=u(w.pdfViewer.formDesignerModule.getFormFieldByID(y.id))),y.data=s.data,y.value=s.data,y.value&&(y.signatureBound=s.bounds,y.signatureType=(y.value&&y.value.indexOf("base64"))>-1?"Image":y.value&&y.value.startsWith("M")&&y.value.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Text",y.isSignatureRendered=!0,0===p&&(w.updateGroupedSignatureDraw(y.name,y.id,y.value,y.signatureType,s),p++)),"Text"===y.signatureType&&(y.FontSize=s.fontSize,y.FontFamily=s.fontFamily),y.SignatureData=s.data,G&&X){var J=w.pdfViewer.formDesignerModule.getFormFieldByID(y.id);w.pdfViewer.formDesignerModule.changedProperties.push("Value"),w.pdfViewer.fireFormFieldPropertyChanged("FormFieldPropertyChanged",G,J,w.pdfViewer.formDesignerModule.changedProperties),w.pdfViewer.annotation.addAction(G.pageNumber,null,J,"SignatureValueChange","",G,J)}sf.base.isNullOrUndefined(y.value)||""===y.value?(v.className="e-pdfviewer-signatureformfields",v.style.pointerEvents=""):(v.className="e-pdfviewer-signatureformfields-signature",v.style.pointerEvents="none")}else y&&"Image"===y.signatureType&&""===y.value&&(v.className="e-pdfviewer-signatureformfields",v.style.pointerEvents="")}f||(v.style.pointerEvents="none"),w.pdfViewerBase.signatureModule.hideSignaturePanel(),w.pdfViewer.annotation&&s&&!f&&w.pdfViewer.annotation.addAction(s.pageIndex,null,s,"FormField Value Change","",s,s),s&&w.pdfViewer.fireSignatureAdd(s.pageIndex,s.id,"HandWrittenSignature",s.bounds,s.opacity,null,null,L),w.pdfViewerBase.drawSignatureWithTool=!1,w.pdfViewer.isInitialFieldToolbarSelection=!1}},w=this,y=0;y<d.length;y++)g(y)},e.prototype.updateGroupedSignatureDraw=function(e,t,i,n,o){for(var s=this.pdfViewer.formDesignerCollections.filter((function(t){return t.name===e})),a=0;a<s.length;a++){var r=s[a];r.id!==t&&(r.value=i,r.signatureType=n,r.fontFamily=o.fontFamily)}},e.prototype.imageOnLoad=function(e,t,i,n,o,s,a,r,l,d,h,p,c){var f;if(void 0===c&&(c=!1),h&&h.offsetParent&&a&&(this.pdfViewerBase.drawSignatureWithTool=!0,h.nextSibling&&-1!==h.nextSibling.id.indexOf("initial")&&(this.pdfViewer.isInitialFieldToolbarSelection=!0)),!this.pdfViewer.signatureFitMode||"Default"===this.pdfViewer.signatureFitMode){var m=Math.min(e.height/10,e.width/10),g=e.height-m,w=e.width-m,y=t.width,v=t.height,b=e.width,S=e.height,A=Math.min(w/y,g/v);if(e.width=y*A,e.height=v*A,e.x=e.x+(b-e.width)/2,e.y=e.y+(S-e.height)/2,r=(f={id:s.id,bounds:{x:e.x,y:e.y,width:e.width,height:e.height},pageIndex:n,data:i,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:o,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}).data,this.pdfViewerBase.drawSignatureWithTool&&a){if(!c||c&&""!==f.data){f.id=a.id+"_content";var x=this.pdfViewer.add(f);a.wrapper.children.push(x.wrapper)}}else(!c||c&&""!==f.data)&&this.pdfViewer.add(f);var V=document.getElementById(this.pdfViewer.element.id+"_annotationCanvas_"+n);if(this.pdfViewer.renderDrawing(V,n),this.pdfViewerBase.signatureModule.showSignatureDialog(!1),"e-pdfviewer-signatureformfields e-pv-signature-focus"===s.className?s.className="e-pdfviewer-signatureformfields-signature e-pv-signature-focus":s.className="e-pdfviewer-signatureformfields-signature",this.updateDataInSession(s,f.data,f.bounds,l,d),this.pdfViewer.enableFormDesigner){var C=void 0;if(p){var I=void 0;if((sf.base.isNullOrUndefined(p.value)||""===p.value||p.value===f.data)&&(p.value===f.data||c||(this.pdfViewer.formDesignerModule.changedProperties=[],C=!0),I=u(this.pdfViewer.formDesignerModule.getFormFieldByID(p.id))),p.data=f.data,p.value=f.data,p.value&&(p.signatureBound=f.bounds,p.signatureType=(p.value&&p.value.indexOf("base64"))>-1?"Image":p.value&&p.value.startsWith("M")&&p.value.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Text",p.isSignatureRendered=!0,this.updateGroupedSignatureDraw(p.name,p.id,p.value,p.signatureType,f)),"Text"===p.signatureType&&(p.FontSize=f.fontSize,p.FontFamily=f.fontFamily),p.SignatureData=f.data,I&&C){var k=this.pdfViewer.formDesignerModule.getFormFieldByID(p.id);this.pdfViewer.formDesignerModule.changedProperties.push("Value"),this.pdfViewer.fireFormFieldPropertyChanged("FormFieldPropertyChanged",I,k,this.pdfViewer.formDesignerModule.changedProperties),this.pdfViewer.annotation.addAction(I.pageNumber,null,k,"SignatureValueChange","",I,k)}sf.base.isNullOrUndefined(p.value)||""===p.value?(s.className="e-pdfviewer-signatureformfields",s.style.pointerEvents=""):(s.className="e-pdfviewer-signatureformfields-signature",s.style.pointerEvents="none")}}this.pdfViewer.enableFormDesigner||(s.style.pointerEvents="none"),this.pdfViewer.annotation&&!this.pdfViewer.enableFormDesigner&&this.pdfViewer.annotation.addAction(f.pageIndex,null,f,"FormField Value Change","",f,f),"SignatureImage"===f.shapeAnnotationType&&this.pdfViewer.fireSignatureAdd(f.pageIndex,f.id,f.shapeAnnotationType,f.bounds,f.opacity,null,null,r)}this.pdfViewerBase.signatureModule.hideSignaturePanel(),this.pdfViewerBase.drawSignatureWithTool=!1,this.pdfViewer.isInitialFieldToolbarSelection=!1},e.prototype.getDefaultBoundsforSign=function(e){return{x:e.x+4,y:e.y+4,width:e.width-8,height:e.height-8}},e.prototype.getSignBounds=function(e,t,i,n,o,s,a,r,l){var d=this.pdfViewer.isInitialFieldToolbarSelection?"initialIcon":"signIcon",h=document.getElementById(d+i+"_"+e),p=o*n-parseFloat(h.style.left)*n/n;return 90===t||270===t?(this.rotateAngle=0,""!==h.style.left?l?{x:o-p/n-n,y:s+p/n+n,width:a,height:r}:{x:o-p/n-n,y:s+p/n+n,width:r,height:a}:(p=10,l?{x:o-a,y:s+a,width:r,height:a}:{x:o-a-p/2,y:s+a+p,width:r,height:a})):(this.rotateAngle=0,{x:o,y:s,width:a,height:r})},e.prototype.updateSameFieldsValue=function(e){if(this.formFieldsData)for(var t=0;t<this.formFieldsData.length;t++){var i=this.formFieldsData[t];if(e.target.name===i.FieldName&&e.target.id!==i.uniqueID&&"radio"!==e.target.type){var n=document.getElementById(this.formFieldsData[t].uniqueID);n?n.value=e.target.value:(i.Text=e.target.value,this.pdfViewerBase.setItemInSessionStorage(this.formFieldsData,"_formfields"))}}},e.prototype.updateFormFieldsValue=function(e){var t,i,n=e.target;if(n.InsertSpaces&&!this.isKeyDownCheck){var o=parseInt(n.style.width,10)+parseInt(n.style.height,10)/2;n.style.width=o+"px",this.isKeyDownCheck=!0}if(9===e.which&&n&&("e-pdfviewer-formFields"===n.className||"e-pdfviewer-signatureformfields e-pv-signature-focus"===n.className||"e-pdfviewer-signatureformfields-signature"===n.className)){var s=n.id.split("input_")[1].split("_")[0],a=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+parseInt(s,10)).getElementsByClassName("e-pdfviewer-formFields"),r=!0;if(t=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===n.id})),!e.shiftKey&&"Tab"===e.key){if(!(t+1<this.pdfViewer.formFieldCollections.length))return;i=this.pdfViewer.formFieldCollections[t+1]}this.pdfViewer.focusFormField(i),r=!0,e.preventDefault();for(var l=n.tabIndex+1;!r;){for(var d=0;d<a.length;d++)if(r=!1,a[d].tabIndex===l){a[d].focus(),r=!0,e.preventDefault();break}this.maintainTabIndex[""+s]===l&&(r=!0),l+=1}}if(e.shiftKey&&"Tab"===e.key){var h=this.pdfViewer.formFieldCollections.findIndex((function(e){return e.id===n.id})),p=h>0?this.pdfViewer.formFieldCollections[h-1]:this.pdfViewerBase.previousShiftTabElement;if(p&&p===this.pdfViewerBase.previousShiftTabElement){var c=document.getElementById(p.id);c&&c.focus()}else p||(p=this.pdfViewer.formFieldCollections[this.pdfViewer.formFieldCollections.length-1]),this.pdfViewer.focusFormField(p);e.preventDefault()}if(e.currentTarget.classList.contains("e-pdfviewer-signatureformfields")||e.currentTarget.classList.contains("e-pdfviewer-signatureformfields-signature"))if("Enter"===e.key){var u=e.target;this.currentTarget=u;for(var f=0;f<this.pdfViewer.formFieldCollections.length;f++)u.id===this.pdfViewer.formFieldCollections[f].id&&(this.setFocus(u.id),this.pdfViewer.fireFormFieldClickEvent("formFieldClicked",this.pdfViewer.formFieldCollections[f]))}else e.preventDefault()},e.prototype.changeFormFields=function(e){var t=e.target;this.updateDataInSession(t)},e.prototype.calculateSignatureBounds=function(e,t,i,n,o,s){var a=i/e,r=n/t,l=this.pdfViewerBase.getZoomFactor(),d=0,h=0,p=!1,c=!1,u=0,f=0,m=s?s.offsetParent.offsetParent.style.transform?s.offsetParent.offsetParent.style.transform:s.style.transform:"rotate(0deg)";if(o)d=this.pdfViewer.handWrittenSignatureSettings.width?this.pdfViewer.handWrittenSignatureSettings.width:150,h=this.pdfViewer.handWrittenSignatureSettings.height?this.pdfViewer.handWrittenSignatureSettings.height:100;else{var g="100%"===s.style.width?s.clientWidth:parseFloat(s.style.width),w="100%"===s.style.height?s.clientHeight:parseFloat(s.style.height),y=g/w,v=w/g,b=e/t,S=t/e;if(y>b||v>b||Math.abs(y-v)<=1){var A=0;v>b||Math.abs(y-v)<=1?(c=!0,A=v/S):(p=!0,A=y/b),"rotate(90deg)"===m||"rotate(270deg)"===m?(d=w/l,h=g/l):(p&&(u=g/l,d=g/A/l,h=w/l),c&&(f=w/l,d=g/l,h=w/A/l))}else"rotate(90deg)"===m||"rotate(270deg)"===m?(d=w/l,h=g/l):(d=g/l,h=w/l)}var x=(e-i)/2,V=(t-n)/2;if(p)x=x/e*u,x+=(u*a-d*a)/2,V=V/t*h;else if(c){x=x/e*d,V=V/t*f,V+=(f*r-h*r)/2}else x=x/e*d,V=V/t*h;return{currentLeftDiff:x,currentTopDiff:V,currentWidth:d*=a,currentHeight:h*=r}},e.prototype.updateSignatureAspectRatio=function(e,t,i){for(var n,o,s=sf.drawings.processPathData(e),a=sf.drawings.splitArrayCollection(s),r=-1,l=-1,d=-1,h=-1,p=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_"),c=0;c<a.length;c++){var u=a[c];if(-1===r)r=parseFloat(u.x.toString()),d=parseFloat(u.x.toString()),l=parseFloat(u.y.toString()),h=parseFloat(u.y.toString());else{var f=parseFloat(u.x.toString()),m=parseFloat(u.y.toString());r>=f&&(r=f),l>=m&&(l=m),d<=f&&(d=f),h<=m&&(h=m)}}n=p?p.clientWidth:650,o=p?p.clientHeight:300;var g=d-r,w=h-l,y=this.calculateSignatureBounds(n,o,g,w,t,i);if(t){var v=this.pdfViewerBase.getZoomFactor(),b=this.pdfViewerBase.currentPageNumber-1,S=document.getElementById(this.pdfViewer.dataId+"_pageDiv_"+b);return{x:(parseFloat(S.style.width)/2-y.currentWidth/2)/v,y:(parseFloat(S.style.height)/2-y.currentHeight/2)/v,width:y.currentWidth,height:y.currentHeight}}return{left:y.currentLeftDiff,top:y.currentTopDiff,width:y.currentWidth,height:y.currentHeight}},e.prototype.updateDataInSession=function(e,t,i,n,o){this.pdfViewerBase.updateDocumentEditedProperty(!0),this.pdfViewerBase.fireDocumentEditedEvent("FormFieldUpdated");var s=[],a=" ",r=0,l=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(l){var d=JSON.parse(l);e&&"checkbox"!==e.type&&"radio"!==e.type&&(s=d.filter((function(t){return t.uniqueID===e.id}))).length>0&&(a=s[0].FieldName,r=d.filter((function(e){return e.FieldName===a})).length);for(var h=0;h<d.length;h++){var p=d[h];if(p.ActualFieldName===e.name&&(p.selectedIndex=e.selectedIndex),e.classList&&e.classList.contains("e-pdfviewer-signatureformfields-signature")?p.uniqueID===e.id:p.uniqueID===e.id||a===p.FieldName){if(e&&"text"===e.type||"password"===e.type||"textarea"===e.type||e.classList&&e.classList.contains("e-pdfviewer-signatureformfields-signature")){var c=e;c.classList.contains("e-pdfviewer-signatureformfields")||c.classList.contains("e-pdfviewer-signatureformfields-signature")?(t&&(p.Value=t),i&&(p.Bounds=i),n&&(p.FontFamily=n,p.FontSize=o)):(p.Text=e.value,p.Value=e.value)}else if("radio"===e.type){if(e.checked){for(var u=0;u<d.length;u++){d[u];d[u].GroupName===e.name&&(d[u].Selected=!1,this.updateFormFieldsCollection(d[u]))}if(e.value===p.Value){p.Selected=!0,this.updateFormFieldsCollection(p);break}p.Selected=!1}}else if("checkbox"===e.type){for(u=0;u<d.length;u++){var f=d[u];if(f.GroupName===e.name){p.CheckBoxGroupName===f.CheckBoxGroupName&&e.checked?f.Selected=!0:f.Selected=!1;var m=document.getElementById(f.uniqueID);m&&(p.GroupName===e.name&&p.uniqueID!==m.id&&p.CheckBoxGroupName===f.CheckBoxGroupName?e.checked?(p.Selected=!0,m.checked=!0):(p.Selected=!1,m.checked=!1):p.GroupName===e.name&&p.uniqueID!==m.id&&(p.Selected=!1,m.checked=!1))}}e.checked?p.Selected=!0:p.Selected=!1}else if("select-one"===e.type&&0===e.size)for(var g=e.options[e.selectedIndex].textContent,w=e.children,y=0;y<w.length;y++)w[y].textContent===g&&(p.SelectedValue=g);else if("select-multiple"===e.type||e.size>0){g=e.selectedOptions;p.SelectedList=[];for(var v=0;v<g.length;v++)for(w=e.children,y=0;y<w.length;y++)w[y]===g[v]&&p.SelectedList.push(y)}if(e.disabled&&(p.IsReadonly=!0),this.updateFormFieldsCollection(p),0===--r)break}else e&&null!=e.getAttribute("list")&&"text"===e.type&&p.uniqueID===e.list.id&&(p.SelectedValue=e.value);this.updateFormFieldsCollection(p)}window.sessionStorage.removeItem(this.pdfViewerBase.documentId+"_formfields"),this.formFieldsData=d,this.pdfViewerBase.setItemInSessionStorage(d,"_formfields")}},e.prototype.applyCommonProperties=function(e,t,i,n,o){var s=document.getElementById(this.pdfViewer.dataId+"input_"+t+"_"+i);if(s){var a=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+t);"select-one"!==e.type&&"text"!==e.type&&"textarea"!==e.type||s.parentElement===a||s.parentElement.remove(),s.remove()}var r,l,d,h,p=document.getElementById("signIcon"+t+"_"+t),c=parseFloat(e.style.left),u=parseInt(e.style.top,10),f=parseFloat(e.style.width),m=parseFloat(e.style.height),g=this.pdfViewerBase.getZoomFactor();p&&!o&&(r=parseFloat(p.style.width),l=parseFloat(p.style.height),"rotate(90deg)"===p.style.transform&&(p.style.transform="rotate(0deg)",d=m/2,h=r*g,p.style.left=c-(d-r*g)+h/2+"px"),"rotate(180deg)"===p.style.transform&&(p.style.transform="rotate(0deg)",p.style.left=c+"px",p.style.top=u+"px"),"rotate(270deg)"===p.style.transform&&(p.style.transform="rotate(0deg)",d=m/2,h=r*g,p.style.left=c-(d-h)+h/2+"px",p.style.top=u+(f+l*g)+l*g/2+"px")),n.IsSignatureField&&this.isSignatureField?(e.className="e-pdfviewer-signatureformfields-signature",e.style.pointerEvents="none"):n.IsSignatureField?n.Value?(e.className="e-pdfviewer-signatureformfields-signature",e.style.pointerEvents="none"):e.className="e-pdfviewer-signatureformfields":"Button"!==n.Name&&(e.className="e-pdfviewer-formFields"),e.id=this.pdfViewer.dataId+"input_"+t+"_"+i,e.style.zIndex=1e3},e.prototype.createFormFields=function(e,t,i,n,o){var s;switch(e.Name){case"Textbox":s=this.createTextBoxField(e,t,"text");break;case"Password":s=this.createTextBoxField(e,t,"password");break;case"RadioButton":s=this.createRadioBoxField(e,t,"radio");break;case"CheckBox":s=this.createRadioBoxField(e,t,"checkbox",n);break;case"DropDown":s=this.createDropDownField(e,t,i,n);break;case"ListBox":s=this.createListBoxField(e,t);break;case"SignatureField":case"InitialField":s=this.createSignatureField(e,t,i,n,o);var a=!1;0===e.Rotation&&(a=!0),e.Value&&""!==e.Value&&(this.renderExistingAnnnot(e,i,n,a),this.isSignatureRendered=!0,o++);break;case"Button":s=this.createButtonField(e,t);break;case"ink":case"SignatureText":case"SignatureImage":e.Value&&""!==e.Value&&!this.isSignatureRendered&&this.renderExistingAnnnot(e,i,n)}return{currentField:s,count:o}},e.prototype.getFormFieldType=function(e){var t;switch(e.Name){case"Textbox":t="Textbox";break;case"Password":t="Password";break;case"RadioButton":t="RadioButton";break;case"CheckBox":t="CheckBox";break;case"DropDown":t="DropDown";break;case"ListBox":t="ListBox";break;case"SignatureField":t="SignatureField",e.IsInitialField&&(t="InitialField");break;case"InitialField":t="InitialField"}return t},e.prototype.applyZoomActionType=function(e,t){if("actualSize"===e.zoomActionType)t.pdfViewer.magnificationModule.isAutoZoom=!1,t.pdfViewer.magnificationModule.zoomTo(100);else if("fitToWidth"===e.zoomActionType)t.pdfViewer.magnificationModule.isAutoZoom=!1,t.pdfViewer.magnificationModule.fitToWidth();else if("fitToPage"===e.zoomActionType)t.pdfViewer.magnificationModule.isAutoZoom=!1,t.pdfViewer.magnificationModule.fitToPage();else if("namedDestination"===e.zoomActionType)-1!==e.ZoomValue&&null!=e.ZoomValue&&(t.pdfViewer.magnificationModule.isAutoZoom=!1,t.pdfViewer.magnificationModule.zoomTo(e.ZoomValue));else if("customZoom"===e.zoomActionType){var i=this.applyCustomZoom(e,t);100*i!=null&&100*i>0&&(t.pdfViewer.magnificationModule.isAutoZoom=!1,t.pdfViewer.magnificationModule.zoomTo(100*i))}},e.prototype.applyCustomZoom=function(e,t){var i=void 0,n=void 0,o=void 0,s=void 0,a=void 0,r=e.BoundX,l=e.BoundY,d=e.BoundHeight,h=e.BoundWidth,p=t.pdfViewerBase.viewerContainer.getBoundingClientRect().width,c=t.pdfViewerBase.viewerContainer.getBoundingClientRect().height;return null!=d&&null!=r&&null!=h&&null!=l&&(i=d-r,n=h-l),i&&null!=n&&(o=p/i,s=c/n),null!=o&&null!=s&&(a=Math.min(o,s)),a},e.prototype.createButtonField=function(e,t){var i=this,n=document.createElement("input");e.Value?(n.type="image",n.src=e.Value):n.type="button",n.className="e-pv-buttonItem",""!==e.Text?n.value=e.Text:n.value="",n.name=e.FieldName;var o=this,s=this.pdfViewerBase.pageSize[t].height,a=void 0;null!=(isNaN(parseInt(e.TargetIndex,10))?null:parseInt(e.TargetIndex,10))&&(a=this.pdfViewerBase.pageSize[e.TargetIndex]);var r=isNaN(parseFloat(e.FocusDestination))?null:parseFloat(e.FocusDestination),l=isNaN(parseFloat(e.BlurDestination))?null:parseFloat(e.BlurDestination);if(a){if(["MouseUp","MouseDown","MouseEnter","MouseLeave","Focus","Blur"].forEach((function(t){var r=parseFloat(e[t+"Destination"]);if(null!=(isNaN(r)?null:r)){var l=a.top*i.pdfViewerBase.getZoomFactor()+(s-r)*i.pdfViewerBase.getZoomFactor();void 0!==l&&n.addEventListener(t.toLowerCase(),(function(){o.bindButtonFieldAction(this,o,t,e,l)}))}})),null!=r){var d=a.top*this.pdfViewerBase.getZoomFactor()+(s-r)*this.pdfViewerBase.getZoomFactor();void 0!==d&&(n.onmouseup=function(){o.bindButtonFieldAction(this,o,"mouseup",e,d)})}else null!=l&&(n.onmouseup=function(){var e=document.getElementById(this.id);return null!=e&&e.focus(),!1})}return n},e.prototype.bindButtonFieldAction=function(e,t,i,n,o){if(null!=e){var s=n[i+"Destination"];if(s||(s=n.FocusDestination),null==s)return void(t.pdfViewerBase.viewerContainer.onscroll=null);t.pdfViewerBase.viewerContainer.onscroll=function(){this.isMouseupOccurred&&null!=n.zoomActionType&&(this.applyZoomActionType(n,t),this.isMouseupOccurred=!1,t.pdfViewerBase.viewerContainer.onscroll=null)}.bind(this),t.pdfViewerBase.viewerContainer.scrollTop=parseFloat(o),t.pdfViewerBase.isViewerMouseWheel=!0,this.isMouseupOccurred=!0}return!1},e.prototype.createTextBoxField=function(e,t,i){var n;if(1!==e.Visible)return e.Multiline?(n=document.createElement("textarea")).style.resize="none":(n=document.createElement("input")).type=i,e.MaxLength>0&&(n.maxLength=e.MaxLength),this.addAlignmentPropety(e,n),""!==e.Text?n.value=e.Text:n.value="",this.pdfViewer.enableAutoComplete||(n.autocomplete="off"),n.name=e.FieldName,n.setAttribute("aria-label","TextBoxField"),n},e.prototype.checkIsReadonly=function(e,t){for(var i=!1,n=0;n<this.readOnlyCollection.length;n++)if(t.id===this.readOnlyCollection[n]){i=!0;break}if(e.IsReadonly||!this.pdfViewer.enableFormFields||i)t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="transparent";else{var o=e.BackColor;t.style.backgroundColor="rgba("+o.R+","+o.G+","+o.B+",0.2)";var s=e.FontColor;t.style.color="rgba("+s.R+","+s.G+","+s.B+",1)"}},e.prototype.formFieldsReadOnly=function(e){var t=document.getElementsByClassName("e-pdfviewer-formFields");this.makeformFieldsReadonly(t,e);var i=document.getElementsByClassName("e-pdfviewer-signatureformfields");this.makeformFieldsReadonly(i,e)},e.prototype.makeformFieldsReadonly=function(e,t){for(var i=0;i<e.length;i++)if(e[i]){var n=e[i];t?n.disabled=!1:(n.disabled=!0,n.style.cursor="default")}},e.prototype.applyTabIndex=function(e,t,i){t.tabIndex=0,this.maxTabIndex=Math.max(this.maxTabIndex,t.tabIndex),-1===this.minTabIndex&&(this.minTabIndex=t.tabIndex),this.minTabIndex=Math.min(this.minTabIndex,t.tabIndex),this.maintainTabIndex[i.toString()]=this.maxTabIndex,this.maintanMinTabindex[i.toString()]=this.minTabIndex},e.prototype.checkIsRequiredField=function(e,t){if(e.IsRequired)t.required=!0,t.style.border="1px solid red";else{var i=e.BorderColor;t.style.border=e.BorderWidth+"px",t.style.borderColor="rgba("+i.R+","+i.G+","+i.B+",1)"}if("checkbox"!==t.type&&"radio"!==t.type){var n=e.BorderStyle;this.addBorderStylePropety(n,t)}},e.prototype.applyDefaultColor=function(e){"button"===e.type||"rgba(255, 255, 255, 0.2)"!==e.style.backgroundColor&&"rgba(0, 0, 0, 0.2)"!==e.style.backgroundColor||(e.style.backgroundColor="rgba(0, 20, 200, 0.2)"),"rgba(255, 255, 255, 0.2)"===e.style.color&&(e.style.color="black")},e.prototype.addAlignmentPropety=function(e,t){switch(e.Alignment){case 0:t.style.textAlign="left";break;case 1:t.style.textAlign="center";break;case 2:t.style.textAlign="right";break;case 3:t.style.textAlign="justify"}},e.prototype.addBorderStylePropety=function(e,t){switch(e){case 0:t.style.borderStyle="solid";break;case 1:t.style.borderStyle="dashed";break;case 2:t.style.borderStyle="outset";break;case 3:t.style.borderStyle="inset";break;case 4:t.style.borderStyle="outset";break;case 5:t.style.borderStyle="dotted";break;case 6:t.style.borderStyle="inset"}},e.prototype.createRadioBoxField=function(e,t,i,n){var o=document.createElement("input");return o.type=i,e.Selected&&(o.checked=!0,o.setAttribute("checked",!0)),o.name=e.GroupName,o.value=e.Value,o.setAttribute("aria-label","RadioBoxField"),o},e.prototype.createDropDownField=function(e,t,i,n){for(var o=document.createElement("select"),s=e.TextList,a=0;a<s.length;a++){var r=document.createElement("option");r.className="e-dropdownSelect",e.SelectedValue===s[a]||e.selectedIndex===a?r.selected=!0:r.selected=!1,"DATALIST"===o.nodeName&&(r.value=s[a]),r.innerHTML=s[a],o.appendChild(r)}return o.name=e.FieldName,o.setAttribute("aria-label","DropDownField"),o},e.prototype.createListBoxField=function(e,t){var i=document.createElement("select"),n=e.TextList;e.MultiSelect?i.multiple=!0:(i.multiple=!1,i.size=n.length);for(var o=0;o<n.length;o++){var s=document.createElement("option");s.className="e-pdfviewer-ListBox";for(var a=0;a<e.SelectedList.length;a++)e.SelectedList[a]===o&&(s.selected=!0);s.innerHTML=n[o],i.appendChild(s)}return i.name=e.Text,i},e.prototype.createSignatureField=function(e,t,i,n,o){var s=document.createElement("div");s.name=e.FieldName,1===e.Visible&&(s.style.visibility="hidden");var a=document.getElementById("signIcon"+t+"_"+i);a&&!n&&a.remove(),this.pdfViewerBase.isInitialField=e.IsInitialField;var r=this.pdfViewerBase.isInitialField?"Initial":"Sign",l=document.createElement("span"),d=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+t),h=e.LineBounds,p=(e.Font,this.ConvertPointToPixel(h.X)),c=this.ConvertPointToPixel(h.Y),u=20>h.Width/2?h.Width/2:20;l.style.position="absolute",l.id="signIcon"+t+"_"+i;var f=this.pdfViewerBase.getZoomFactor(),m={left:p,top:c,width:u,height:10},g=this.getBounds(m,t);return l.style.transform="rotate(0deg)",l.style.left=g.left*f+"px",l.style.top=g.top*f+"px",sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?(l.style.height="5px",l.style.width="10px",l.style.fontSize="3px"):(l.style.height=10*f+"px",l.style.width=u*f+"px",l.style.fontSize=10*f-1+"px"),l.style.padding="2px",l.style.textAlign="center",l.style.boxSizing="content-box",l.innerHTML=r,l.style.color="black",l.style.backgroundColor="orange",l.style.opacity=1,1===e.Visible&&(l.style.visibility="hidden"),sf.base.isNullOrUndefined(d)||d.appendChild(l),this.addSignaturePath(e,o),{inputField:s,index:i}},e.prototype.addSignaturePath=function(e,t){var i;if(this.isSignatureField=!1,i=this.pdfViewer.enableFormDesigner?this.pdfViewer.formDesignerCollections:this.pdfViewerBase.getItemFromSessionStorage("_formfields")){var n=void 0;n=this.pdfViewer.enableFormDesigner?i:JSON.parse(i);for(var o=0;o<n.length;o++){var s=n[o];if(("ink"===s.Name||"SignatureField"===s.Name||"SignatureImage"===s.Name||"SignatureText"===s.Name)&&s.FieldName===(e.ActualFieldName||e.name)+"_"+t&&s.Value&&""!==s.Value){e.Value=s.Value,this.pdfViewer.enableFormDesigner?(e.value=s.Value,e.value&&(e.signatureType=(e.value&&e.value.indexOf("base64"))>-1?"Image":e.value&&e.value.startsWith("M")&&e.value.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Text"),e.signatureBound||(e.signatureBound=s.LineBounds)):e.Bounds||(e.Bounds=s.LineBounds),e.FontFamily=s.FontFamily,e.FontSize=s.FontSize,this.isSignatureField=!0;break}}}return this.isSignatureField},e.prototype.getBounds=function(e,t,i,n){var o=this.pdfViewerBase.pageSize[t];return i>0?this.getBoundsPosition(i,e,o):this.getBoundsPosition(o.rotation,e,o,n)},e.prototype.getBoundsPosition=function(e,t,i,n){var o;if(n){switch(e){case 0:o=t;break;case 1:o={left:i.width-t.top-t.height-(t.width/2-t.height/2),top:t.left+(t.width/2-t.height/2),width:t.width,height:t.height};break;case 2:o={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 3:o={left:t.top-(t.width/2-t.height/2),top:i.height-t.left-t.width+(t.width/2-t.height/2),width:t.width,height:t.height}}o||(o=t)}else{switch(e){case 90:o={left:i.width-t.top-t.height,top:t.left,width:t.height,height:t.width};break;case 180:o={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 270:o={left:t.top,top:i.height-t.left-t.width,width:t.height,height:t.width};break;case 0:o=t;break;case 1:o={left:i.width-t.top-t.height,top:t.left,width:t.height,height:t.width};break;case 2:o={left:i.width-t.left-t.width,top:i.height-t.top-t.height,width:t.width,height:t.height};break;case 3:o={left:t.top,top:i.height-t.left-t.width,width:t.height,height:t.width}}o||(o=t)}return o},e.prototype.applyPosition=function(e,t,i,n,o,s,a,r){if(t){var l=0,d={left:this.ConvertPointToPixel(t.X),top:this.ConvertPointToPixel(t.Y)-.2,width:this.ConvertPointToPixel(t.Width),height:this.ConvertPointToPixel(t.Height)+.2},h=this.getBounds(d,n,o,s);null!==i&&i.Height&&(e.style.fontFamily=i.Name,i.Italic&&(e.style.fontStyle="italic"),i.Bold&&(e.style.fontWeight="Bold"),l=this.ConvertPointToPixel(i.Size)),void 0===a&&(e.style.padding="0px 2px 2px 2px"),this.pdfViewerBase.setStyleToTextDiv(e,h.left,h.top,l,h.width,h.height,!1,a,r)}},e.prototype.renderExistingAnnnot=function(e,t,i,n){if(!i){var o=void 0,s=void 0,a=void 0,r=void 0,l=void 0;(o=e.Bounds&&"ink"!==e.Name?e.Bounds:this.pdfViewer.enableFormDesigner&&"ink"!==e.Name?e.signatureBound:e.LineBounds).x||o.y||o.width||o.height?(s=o.x,a=o.y,r=o.width,l=o.height):(s=this.ConvertPointToPixel(o.X),a=this.ConvertPointToPixel(o.Y),r=this.ConvertPointToPixel(o.Width),l=this.ConvertPointToPixel(o.Height));var d=void 0;d=parseFloat(e.PageIndex),this.pdfViewer.enableFormDesigner&&(d=parseFloat(e.pageNumber)-1);var h={left:s,top:a,width:r,height:l},p=this.updateSignatureBounds(h,d,n),c=void 0,u=e.FontFamily?e.FontFamily:e.fontFamily;if(this.pdfViewerBase.isSignatureImageData(e.value||e.Value))c={id:this.pdfViewer.dataId+"input_"+d+"_"+t,bounds:p,pageIndex:d,data:e.value||e.Value,modifiedDate:"",shapeAnnotationType:"SignatureImage",opacity:1,rotateAngle:n?this.getAngle(d):0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}};else if(this.pdfViewerBase.isSignaturePathData(e.value||e.Value)){var f,m={left:p.x,top:p.y,width:p.width,height:p.height};f=this.pdfViewer.enableFormDesigner?this.updateSignatureBounds(m,d,!1):this.updateSignatureBounds(m,d,!0),c={id:this.pdfViewer.dataId+"input_"+d+"_"+t,bounds:f,pageIndex:d,data:e.value||e.Value,modifiedDate:"",shapeAnnotationType:"Path",opacity:1,rotateAngle:0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""}}}else(c={id:this.pdfViewer.dataId+"input_"+d+"_"+t,bounds:p,pageIndex:d,data:e.value||e.Value,modifiedDate:"",shapeAnnotationType:"SignatureText",opacity:1,rotateAngle:n?this.getAngle(d):0,annotName:"SignatureField",comments:[],review:{state:"",stateModel:"",modifiedDate:"",author:""},fontFamily:e.FontFamily,fontSize:e.FontSize}).fontFamily="TimesRoman"===u?"Times New Roman":u,c.fontSize=e.FontSize?e.FontSize:e.fontSize;if("SignatureField"!==e.Name&&"InitialField"!==e.Name&&(!this.pdfViewer.enableFormDesigner||"SignatureField"!==e.type&&"InitialField"!==e.type)||sf.base.isNullOrUndefined(e.id))this.pdfViewer.add(c);else{var g=e.id,w=document.getElementById(g+"_content_html_element"),y=this.pdfViewer.nameTable[""+g];c.id=y.id+"_content";var v=this.pdfViewer.add(c);if(y.wrapper.children.push(v.wrapper),!sf.base.isNullOrUndefined(w)&&this.isSignatureField){var b=w.children[0].children[0];b.style.pointerEvents="none",b.className="e-pdfviewer-signatureformfields-signature",b.parentElement.style.pointerEvents="none"}}this.pdfViewer.enableFormDesigner?e.signatureBound=c.bounds:e.Bounds=c.bounds;var S=document.getElementById(this.pdfViewer.dataId+"_annotationCanvas_"+d);this.pdfViewer.renderDrawing(S,d)}},e.prototype.updateSignatureBounds=function(e,t,i){var n=this.pdfViewerBase.pageSize[t];return n?i?1===n.rotation?{x:n.width-e.top-e.height-(e.width/2-e.height/2),y:e.left+(e.width/2-e.height/2),width:e.width,height:e.height}:2===n.rotation?{x:n.width-e.left-e.width,y:n.height-e.top-e.height,width:e.width,height:e.height}:3===n.rotation?{x:e.top-(e.width/2-e.height/2),y:n.height-e.left-e.width+(e.width/2-e.height/2),width:e.width,height:e.height}:{x:e.left,y:e.top,width:e.width,height:e.height}:1===n.rotation?{x:n.width-e.top-e.height,y:e.left,width:e.height,height:e.width}:2===n.rotation?{x:n.width-e.left-e.width,y:n.height-e.top-e.height,width:e.width,height:e.height}:3===n.rotation?{x:e.top,y:n.height-e.left-e.width,width:e.height,height:e.width}:{x:e.left,y:e.top,width:e.width,height:e.height}:{x:e.left,y:e.top,width:e.width,height:e.height}},e.prototype.resetFormFields=function(){for(var e=this.pdfViewer.formFieldCollections,t=0;t<e.length;t++){var i=e[t];if(this.currentTarget=document.getElementById(i.id),"Textbox"===i.type)this.currentTarget.value=i.value;else if("RadioButton"===i.type)this.currentTarget.checked=i.value,i.value&&this.updateDataInSession(this.currentTarget);else if("DropDown"===i.type)this.currentTarget.value=i.value;else if("CheckBox"===i.type)this.currentTarget.checked=i.value;else if("SignatureField"===i.type){var n=this.pdfViewer.nameTable[i.id];n&&(this.currentTarget&&"e-pdfviewer-signatureformfields-signature"===this.currentTarget.className&&(this.currentTarget.className="e-pdfviewer-signatureformfields",this.currentTarget.style.pointerEvents="",this.updateDataInSession(this.currentTarget,"")),this.pdfViewer.remove(n),this.pdfViewer.renderDrawing())}"RadioButton"!==i.type&&"SignatureField"!==i.type&&this.updateDataInSession(this.currentTarget)}},e.prototype.clearFormFieldStorage=function(){if(Math.round(JSON.stringify(window.sessionStorage).length/1024)>4500){for(var e=window.sessionStorage.length,t=[],i=0;i<e;i++)window.sessionStorage.key(i)&&window.sessionStorage.key(i).split("_")[3]&&"annotations"===window.sessionStorage.key(i).split("_")[3]&&(this.pdfViewerBase.formFieldStorage[window.sessionStorage.key(i)]=window.sessionStorage.getItem(window.sessionStorage.key(i)),t.push(window.sessionStorage.key(i)));if(t)for(i=0;i<t.length;i++)window.sessionStorage.removeItem(t[i])}},e.prototype.clearFormFields=function(e){var t=this.pdfViewerBase.getItemFromSessionStorage("_formfields");if(t){var i=void 0;i=e?[e]:JSON.parse(t);for(var n=!0,o=0;o<i.length;o++){var s=i[o];if(e&&(s.uniqueID=e.id,s.Name=e.type),this.currentTarget=document.getElementById(s.uniqueID),"Textbox"===s.Name)this.currentTarget.value="";else if("RadioButton"===s.Name)n&&(this.currentTarget.checked=!0,this.updateDataInSession(this.currentTarget),n=!1);else if("DropDown"===s.Name)this.currentTarget.value=s.TextList[0];else if("CheckBox"===s.Name)this.currentTarget.checked=!1;else if("SignatureField"===s.Name){var a=this.pdfViewer.nameTable[s.uniqueID];a&&(this.currentTarget&&"e-pdfviewer-signatureformfields-signature"===this.currentTarget.className&&(this.currentTarget.className="e-pdfviewer-signatureformfields",this.currentTarget.style.pointerEvents="",this.currentTarget.parentElement.style.pointerEvents="",this.updateDataInSession(this.currentTarget,""),e&&(e.value="",e.signatureType=[e.signatureType],e.signatureType[0]="")),this.pdfViewer.remove(a),this.pdfViewer.renderDrawing())}"SignatureField"!==s.Name&&"ink"!==s.Name&&"RadioButton"!==s.Name&&this.updateDataInSession(this.currentTarget)}}},e.prototype.ConvertPointToPixel=function(e){return e*(96/72)},e.prototype.destroy=function(){this.currentTarget=null,this.readOnlyCollection=[],this.pdfViewerBase&&this.pdfViewerBase.signatureModule&&this.pdfViewerBase.signatureModule.destroy()},e.prototype.getModuleName=function(){return"FormFields"},e.prototype.getTextWidth=function(e,t,i){var n,o=document.createElement("canvas").getContext("2d");return t&&(n=t+"px "+i),o.font=n||getComputedStyle(document.body).font,o.measureText(e).width},e.prototype.getFontSize=function(e){return e},e}(),Pu=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var s=arguments[t],a=0,r=s.length;a<r;a++,o++)n[o]=s[a];return n},Du=function(){function e(e,t){this.isAddFormFieldUi=!1,this.isRenderFormField=!1,this.formFieldIndex=0,this.setInitialSize=!1,this.defaultBorderThickness=1,this.isMouseupOccurred=!1,this.defaultMaximumLength=0,this.defaultFontSize=10,this.formFieldIdIndex=0,this.isDrawHelper=!1,this.defaultBackgroundColor="#daeaf7ff",this.defaultBorderColor="#303030",this.defaultFontColor="black",this.defaultFontFamily="Helvetica",this.defaultTextAlignment="Left",this.defaultButtonTextAlignment="Center",this.defaultVisibility="Visible",this.signIndicatorPadding=4,this.signIndicatorMinimunFontSize=1,this.defaultBounds={Textbox:{x:0,y:0,top:0,left:0,width:200,height:24},Password:{x:0,y:0,top:0,left:0,width:200,height:24},DropDown:{x:0,y:0,top:0,left:0,width:200,height:24},CheckBox:{x:0,y:0,top:0,left:0,width:20,height:20},RadioButton:{x:0,y:0,top:0,left:0,width:20,height:20},ListBox:{x:0,y:0,top:0,left:0,width:198,height:66},SignatureField:{x:0,y:0,top:0,left:0,width:200,height:63},InitialField:{x:0,y:0,top:0,left:0,width:200,height:63},Button:{x:0,y:0,top:0,left:0,width:150,height:40}},this.defaultZoomValue=1,this.changedProperties=[],this.pdfViewer=e,this.pdfViewerBase=t}return e.prototype.addFormFields=function(e,t){var i,n=this;if(void 0===t&&(t=!1),sf.base.isNullOrUndefined(e)||(i=JSON.parse(e)),!sf.base.isNullOrUndefined(i))for(var o=[],s=[],a=function(e){var a=i[e];if(r.checkSameNameField(a)){-1!==r.getFormFieldIndex(a.id)&&(a.id=a.id+sf.drawings.randomId()),a.id=a.id||sf.drawings.randomId(),t||r.setFormFieldIndex();var l=r.createFormFieldObject(a.type,a);l.pageNumber>0&&l.pageNumber<=r.pdfViewer.pageCount&&(-1===r.pdfViewer.registeredEventCallbacks.indexOf("FormFieldAdding")||t?(r.drawFormField(l),r.collectFormFields(l,o,s),i.length-1===e&&s.length>0&&!t&&r.addActionCollection(o,s)):r.pdfViewer.fireFormFieldAddStart(l).then((function(t){t&&(n.drawFormField(l),n.collectFormFields(l,o,s),i.length-1===e&&s.length>0&&n.addActionCollection(o,s))})))}},r=this,l=0;l<i.length;l++)a(l)},e.prototype.collectFormFields=function(e,t,i){if(e){t.push(e.id);var n=this.getFormFieldByID(e.id);i.push(n)}},e.prototype.addActionCollection=function(e,t){var i=JSON.stringify(t);this.pdfViewer.annotation.addAction(1,0,i,"AddProgrammticalFormFields",null,e,i)},e.prototype.addFormField=function(e,t,i){if(void 0===i&&(i=!1),this.checkSameNameField(t)){var n=this.createFormFieldObject(e,t);this.pdfViewerBase.isDocumentLoaded&&this.setFormFieldIndex(),sf.base.isNullOrUndefined(n)||this.drawFormField(n,i)}},e.prototype.addHistoryEntry=function(e){var t=this.pdfViewer.historyManager;if(t&&t.currentEntry){var i=t.currentEntry;i.next&&i.previous&&(i.next.previous=null),i.next=e,e.previous=i}t.currentEntry=e,t.canUndo=!0,t.canRedo=!1,this.updateFormDesignerUndoRedoCollection()},e.prototype.ShowToastMessage=function(e){var t="";if("Textbox"!==e&&"Password"!==e&&"CheckBox"!==e&&"RadioButton"!==e&&"DropDown"!==e&&"ListBox"!==e&&"SignatureField"!==e&&"InitialField"!==e||(t="Touch on the active page to insert."),""!==t){var i=(this.pdfViewer.element.clientWidth-220)/2,n=this.pdfViewer.element.clientHeight/2,o=document.getElementById(this.pdfViewer.dataId+"_annotation_message");if(o){o.style.pointerEvents="none";var s=o.firstElementChild;s?s.firstElementChild.firstElementChild.textContent=t:this.pdfViewer._dotnetInstance.invokeMethodAsync("UpdateToastMessageXYPosition",t,i,n).catch((function(e){throw console.error("Unhandled Exception:",e),e}))}}},e.prototype.updateFormDesignerUndoRedoCollection=function(){if(this.pdfViewer.annotationModule.redoCollection.length>0&&!this.pdfViewer.historyManager.canRedo)for(var e=this.pdfViewer.annotationModule.redoCollection,t=0;t<e.length;t++)this.pdfViewer.annotation.checkFormFieldTypeAction(e[t].annotation,e[t].action)&&(e.splice(t,1),t--)},e.prototype.addUndoRedoCollection=function(e,t,i,n){if(this.pdfViewer.annotation.checkFormFieldTypeAction(e,t)){var o=void 0,s=void 0;switch("AddProgrammticalFormFields"===t||"DeleteProgrammticalFormFields"===t||(o=u(this.getFormFieldByID(e.id)),s=u(this.getFormFieldByID(e.id))),t){case"Drag":case"Resize":var a=this.formFieldCalculateBounds(o,i.bounds);o.bounds=u(a);var r=this.formFieldCalculateBounds(s,n.bounds);s.bounds=u(r);break;case"TextValueChange":case"CheckBoxChange":case"RadioButtonChange":case"DropDownChange":case"ListBoxChange":case"UpdateFormField":case"DeleteFormField":case"SignatureValueChange":o=u(i),s=u(n)}var l={type:t,undoObject:o||i,redoObject:s||n};this.addHistoryEntry(l)}},e.prototype.formFieldCalculateBounds=function(e,t){t&&(t.x-=.5*t.width,t.y-=.5*t.height,t.left=t.x,t.top=t.y,t=this.updateFormFieldBounds(t,e.rotateAngle).bounds);return t},e.prototype.createFormFieldObject=function(e,t){var i,n=this.getCurrentFormFieldSettingsBasedonType(e);switch(e){case"Textbox":case"Password":i=this.setTextBoxProperties(t,n);break;case"DropDown":i=this.setDropDownProperties(t,n);break;case"ListBox":i=this.setListBoxProperties(t,n);break;case"RadioButton":i=this.setRadioButtonProperties(t,n);break;case"SignatureField":i=this.setSignatureProperties(t,n);break;case"CheckBox":i=this.setCheckBoxProperties(t,n);break;case"InitialField":i=this.setInitialProperties(t,n);break;case"Button":i=this.setButtonProperties(t,n)}return i},e.prototype.setFormFieldIndex=function(){if(this.pdfViewer.formDesignerCollections.length>0){var e=this.pdfViewer.formDesignerCollections[this.pdfViewer.formDesignerCollections.length-1],t=e&&e.name?isNaN(parseInt(e.name.match(/\d+/),10))?this.pdfViewer.formDesignerCollections.length:parseInt(e.name.match(/\d+/),10):null;this.isAddFormFieldUi?this.formFieldIndex=this.formFieldIndex>this.pdfViewer.formDesignerCollections.length?t+1:this.pdfViewer.formDesignerCollections.length+1:this.formFieldIndex=isNaN(t)?this.formFieldIndex+1:t+1}else this.formFieldIndex++;return this.formFieldIndex},e.prototype.checkSameNameField=function(e){if(this.pdfViewer.formDesignerCollections.length>0)for(var t=0;t<this.pdfViewer.formDesignerCollections.length;t++){var i=this.pdfViewer.formDesignerCollections[t];if(i.name===e.name&&e.type!==i.type)return!1}return!0},e.prototype.isSignatureFieldPresent=function(e){return-1!==this.pdfViewer.formFields.findIndex((function(t){return t.id===e}))},e.prototype.drawFormField=function(e,t){void 0===t&&(t=!1),-1===this.getFormFieldIndex(e.id)&&(this.addFormFieldValuesInCollection(e),this.pdfViewer.fireFormFieldEvent("FormFieldAdded",e,e.pageNumber));var i=document.getElementById(this.pdfViewer.dataId+"_textLayer_"+(e.pageNumber-1));if(i){var n=this.pdfViewerBase.getZoomFactor(),o=document.getElementById("form_field_"+e.id+"_content_html_element");!sf.base.isNullOrUndefined(o)&&i.contains(o)&&o.remove();var s={id:"form_field_"+e.id+"_content_html_element",class:"foreign-object"},a=this.createHtmlElement("div",s),r=this.createFormField(e,!1),l=document.createElement("div");l.id=e.id+"_designer_name",l.style.fontSize=sf.base.Browser.isDevice?this.defaultFontSize*n+"px":this.defaultFontSize+"px",l.className="e-pv-show-designer-name",this.pdfViewer.formDesignerInteraction?(l.innerHTML=e.name,l.style.position="absolute"):(l.innerHTML="",l.style.position="initial"),r.appendChild(l);var d=this.getFieldRotateAngle(e.rotateAngle?e.rotateAngle:0);if(r.setAttribute("style","height:"+e.bounds.height*n+"px; width:"+e.bounds.width*n+"px;left:"+e.bounds.x*n+"px; top:"+e.bounds.y*n+"px;transform:rotate("+d+"deg);transform-origin:left top; position:absolute;"+(this.pdfViewer.formDesignerInteraction?"pointer-events: none":"")),a.appendChild(r),i.appendChild(a),"SignatureField"===e.type||"InitialField"===e.type)if(e.value&&!sf.base.isNullOrUndefined(e.value)&&sf.base.isNullOrUndefined(e.signatureBound)||t)(h=document.getElementById(e.id))&&this.pdfViewer.formFieldsModule.drawSignature(e.signatureType,e.value,h,null);else if(e.value&&!sf.base.isNullOrUndefined(e.value)&&!sf.base.isNullOrUndefined(e.signatureBound)){var h;if(!this.pdfViewer.nameTable[e.id+"_content"])(h=document.getElementById(e.id))&&this.pdfViewer.formFieldsModule.drawSignature(e.signatureType,e.value,h,null)}}},e.prototype.getFieldRotateAngle=function(e){return e?e>360?e%360:e<0?e+360:e:0},e.prototype.createFormField=function(e,t){var i={id:e.id+"_content_html_element",class:"foreign-object"},n=this.createHtmlElement("div",i);return n.appendChild(this.createFormFieldBaseonType(e,t)),n},e.prototype.addFormFieldValuesInCollection=function(e){this.pdfViewer.formDesignerCollections.push(e);var t=this.pdfViewer.nameTable[e.id];if(sf.base.isNullOrUndefined(t)){var i=this.updateFormFieldBoundsForNameTable(u(e.bounds),e.rotateAngle?e.rotateAngle:0),n={id:e.id,pageIndex:e.pageNumber-1,pageNumber:e.pageNumber,name:e.name,bounds:i,opacity:1,rotateAngle:0,formFieldAnnotationType:e.type,visibility:e.visibility};this.pdfViewer.add(n)}this.pdfViewer.formDesignerCollections.length>0?this.pdfViewerBase.enableFormFieldButton(!0):this.pdfViewerBase.enableFormFieldButton(!1)},e.prototype.updateFormFieldValuesInNameTable=function(e){if(this.pdfViewer.formFields.length>0){var t=this.pdfViewer.nameTable[e.id];sf.base.isNullOrUndefined(t)||(t.bounds=e.bounds)}},e.prototype.updateFormFieldPosition=function(e,t,i){if(this.isStandardFormFieldType(t)){var n=u(this.getFormFieldByID(e));sf.base.isNullOrUndefined(n)||(n.bounds=this.getFormFieldBounds(i),this.updateFormField(n,!1,!0),this.setInteractionMode(!0))}},e.prototype.getFormFieldBounds=function(e){var t=sf.drawings.cornersPointsBeforeRotation(e).topLeft;return{left:t.x,top:t.y,x:t.x,y:t.y,width:e.actualSize.width,height:e.actualSize.height}},e.prototype.splitFormFieldName=function(e){var t=null;if(e)switch(e.type){case"Textbox":t="TextBox";break;case"Password":case"CheckBox":case"RadioButton":case"DropDown":case"ListBox":case"Button":t=e.type;break;case"SignatureField":t="Signature";break;case"InitialField":t="Initial"}return t},e.prototype.createFormFieldBaseonType=function(e,t){var i;switch(e.type){case"Textbox":case"Password":i=this.createInputElement(e,t);break;case"DropDown":i=this.createDropDownElement(e,t);break;case"ListBox":i=this.createListBoxElement(e,t);break;case"RadioButton":i=this.createRadioButtonElement(e,t);break;case"SignatureField":case"InitialField":i=this.createSignatureElement(e,t);break;case"CheckBox":i=this.createCheckBoxElement(e,t);break;case"Button":i=this.createButtonElement(e,t)}return this.updateTooltip(e,i),i},e.prototype.createInputElement=function(e,t){var i,n,o=sf.base.createElement("div");return o.className="foreign-object",o.style.position="absolute",o.style.width="100%",o.style.height="100%",e.isMultiline?(n=this.createTextAreaElement(e.id),this.updateTextboxProperties(e,n,t)):(i=this.createTextboxElement(e.id,e.type),this.updateTextboxProperties(e,i,t)),e.isMultiline?o.appendChild(n):o.appendChild(i),o},e.prototype.createButtonElement=function(e,t){var i=this.createHtmlElement("div",{class:"foreign-object",style:"position: absolute; width: 100%; height: 100%;"}),n=this.createButtonFieldElement(e.id);return this.updateButtonProperties(e,n,t),i.appendChild(n),i},e.prototype.setRadioButtonState=function(e){this.changedProperties=[];for(var t=u(this.getFormFieldByID(e.currentTarget.id.split("_")[0])),i=t,n=0,o=this.pdfViewer.formDesignerCollections;n<o.length;n++){var s=o[n];if("RadioButton"===s.type&&s.name===t.name&&s.id!==t.id&&s.isSelected){i=u(s);break}}this.handleRadioButtonStateById(e.currentTarget.id,!1);var a=u(this.getFormFieldByID(e.currentTarget.id.split("_")[0]));a.isSelected===i.isSelected&&a.id===i.id||(this.pdfViewer.annotation.addAction(t.pageNumber,0,t,"RadioButtonChange",null,i,a),this.changedProperties.push("IsSelected"),this.pdfViewer.fireFormFieldPropertyChanged("FormFieldPropertyChanged",i,a,this.changedProperties))},e.prototype.handleRadioButtonStateById=function(e,t){for(var i=document.getElementById(e),n=i.id.split("_"),o=0;o<this.pdfViewer.formDesignerCollections.length;o++){var s=this.pdfViewer.formDesignerCollections[o];if("RadioButton"===s.type&&s.name===e.split("_")[1]){var a=s.id+"_"+s.name+"_"+s.value,r=document.getElementById(a);t&&!i.checked?s.value!==n[2]||s.id!==n[0]&&!s.isUnisonSelected||(s.isSelected=i.checked,sf.base.isNullOrUndefined(r)||(r.checked=i.checked)):s.value!==n[2]?(s.isSelected=!i.checked,sf.base.isNullOrUndefined(r)||(r.checked=!i.checked)):s.isUnisonSelected||s.id===n[0]?(s.isSelected=i.checked,sf.base.isNullOrUndefined(r)||(r.checked=i.checked)):(s.isSelected=!1,sf.base.isNullOrUndefined(r)||(r.checked=!1))}}},e.prototype.setCheckBoxState=function(e){this.changedProperties=[];var t=e.target;t.focus();var i=u(this.getFormFieldByID(t.id.split("_")[0])),n=i;if("e-pv-checkbox-div"===t.className||t.classList.contains("e-pv-checkbox-span")){var o=document.getElementById(t.id.split("_")[0]+"_input"),s=void 0;sf.base.isNullOrUndefined(o)||(s=o.firstElementChild),sf.base.isNullOrUndefined(s)||("e-pv-checkbox-span e-pv-cb-checked"===s.className?(s.classList.remove("e-pv-cb-checked"),s.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked")):(s.classList.remove("e-pv-cb-unchecked"),s.classList.add("e-pv-checkbox-span","e-pv-cb-checked")));var a=this.getFormFieldIndex(t.id.split("_")[0]);if(-1!==a)for(var r=this.pdfViewer.formDesignerCollections[a],l=0;l<this.pdfViewer.formDesignerCollections.length;l++){var d=this.pdfViewer.formDesignerCollections[l];if("CheckBox"===d.type&&r.name===d.name)if(r.id!==d.id){if(r.value===d.value)if("e-pv-checkbox-span e-pv-cb-checked"===s.className){d.isChecked=!0;var h=document.getElementById(d.id+"_input").firstElementChild;sf.base.isNullOrUndefined(h)||(h.classList.remove("e-pv-cb-unchecked"),h.classList.add("e-pv-checkbox-span","e-pv-cb-checked"))}else{d.isChecked=!1;var p=document.getElementById(d.id+"_input").firstElementChild;sf.base.isNullOrUndefined(p)||(p.classList.remove("e-pv-cb-checked"),p.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked"))}else if("e-pv-checkbox-span e-pv-cb-checked"===s.className){d.isChecked=!1;var c=document.getElementById(d.id+"_input").firstElementChild;sf.base.isNullOrUndefined(c)||(c.classList.remove("e-pv-cb-checked"),c.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked"))}}else"e-pv-checkbox-span e-pv-cb-checked"===s.className?d.isChecked=!0:d.isChecked=!1}var f=u(this.getFormFieldByID(t.id.split("_")[0]));this.pdfViewer.annotation.addAction(i.pageNumber,0,i,"CheckBoxChange",null,n,f),this.changedProperties.push("IsChecked"),this.pdfViewer.fireFormFieldPropertyChanged("FormFieldPropertyChanged",n,f,this.changedProperties)}},e.prototype.createRadioButtonElement=function(e,t){var i=this.pdfViewerBase.getZoomFactor(),n=this.createHtmlElement("div",{class:"foreign-object",style:"position: absolute; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;"}),o=this.getCheckboxRadioButtonBounds(e,t),s=this.checkVisibility(e,t),a="pointer";this.isDrawHelper&&(a="crosshair");var r={class:"e-pv-radiobtn-container",style:"display: table; vertical-align: middle; border-radius: 50%; cursor:"+a+"; width:"+o.Width+"px; height:"+o.Height+"px; border-width:"+e.thickness+"px; box-shadow:"+e.borderColor+" 0px 0px 0px "+e.thickness+"px; visibility:"+s+"; background: "+e.backgroundColor,id:e.id+"_input_label"},l=this.createHtmlElement("label",r),d={id:e.id+"_input_span",class:"e-pv-radiobtn-span",style:"width:"+Math.floor(o.Width/2)+"px;height:"+Math.floor(o.Height/2)+"px"},h=this.createHtmlElement("span",d);i<1&&e.bounds.width<=20&&e.bounds.height<=20?h.style.margin=Math.round(parseInt(l.style.width,10)/3.5)+"px":h.style.margin=Math.round(parseInt(l.style.width,10)/4)+"px";var p={type:"radio",class:"e-pv-radio-btn",style:"width:"+o.Width+"px;height:"+o.Height+"px; margin: 0px; position: absolute",value:e.value,id:e.id+"_"+e.name+"_"+e.value,"aria-label":this.pdfViewer.element.id+"formfilldesigner"},c=this.createHtmlElement("input",p);return c.addEventListener("click",this.setRadioButtonState.bind(this)),c.addEventListener("focus",this.focusFormFields.bind(this)),c.addEventListener("blur",this.blurFormFields.bind(this)),l.appendChild(c),l.appendChild(h),this.updateRadioButtonProperties(e,c,l,t),e.isRequired&&(l.style.boxShadow="red 0px 0px 0px 1px"),n.appendChild(l),this.isDrawHelper=!1,n},e.prototype.createCheckBoxElement=function(e,t){var i=this.createHtmlElement("div",{class:"foreign-object",style:"position: absolute; width: 100%; height: 100%;"}),n=this.getCheckboxRadioButtonBounds(e,t),o=t?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor(),s="pointer";this.isDrawHelper&&(s="crosshair");var a={class:"e-pv-checkbox-container",id:e.id+"_input_label",style:"width: "+e.bounds.width*o+"px; height: "+e.bounds.height*o+"px; cursor: "+s+";"},r=this.createHtmlElement("label",a),l={class:"e-pv-checkbox-div",id:e.id+"_input",style:"background-color: "+e.backgroundColor+"; border-color: "+e.borderColor+"; visibility: visible;display: flex; align-items: center; justify-content: center; width: 100%; height: 100%;"},d=this.createHtmlElement("div",l),h="width: "+n.Width/5+"px; height: "+n.Height/2.5+"px;position: absolute; top: 50%; left: 50%; transform: translate(-50%, -65%) rotate(45deg)",p={id:e.id+"_input_span",style:h,class:"e-pv-checkbox-span "+(e.isChecked?"e-pv-cb-checked":"e-pv-cb-unchecked")},c=this.createHtmlElement("span",p);t&&(d.style.border=e.thickness+"px solid "+e.borderColor,-1!==c.className.indexOf("e-pv-cb-checked")&&(c.style.border="solid #303030",c.style.position="absolute",c.style.borderLeft="transparent",c.style.borderTop="transparent",c.style.boxSizing="border-box"));var u=parseInt(r.style.width,10),f=parseInt(r.style.height,10),m=u<=f?u:f;return c.style.borderWidth=m>20?"3px":m<=15?"1px":"2px",d.addEventListener("click",this.setCheckBoxState.bind(this)),d.addEventListener("focus",this.focusFormFields.bind(this)),d.addEventListener("blur",this.blurFormFields.bind(this)),this.updateCheckboxProperties(e,d,t),r.appendChild(d),d.appendChild(c),i.appendChild(r),this.isDrawHelper=!1,i},e.prototype.getCheckboxRadioButtonBounds=function(e,t){var i=t?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor(),n=0,o=0;return e&&(n=o=e.bounds.width>e.bounds.height?e.bounds.height*i:e.bounds.width*i),{Width:n,Height:o,X:e.bounds.x*i,Y:e.bounds.y*i}},e.prototype.createTextAreaElement=function(e){var t=sf.base.createElement("textarea");return t.id=e,t.className="e-pv-formfield-textarea",t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.borderStyle="solid",t.addEventListener("click",this.inputElementClick.bind(this)),t.addEventListener("change",this.getTextboxValue.bind(this)),t},e.prototype.createTextboxElement=function(e,t){var i=sf.base.createElement("input");return i.id=e,i.type="Textbox"===t?"text":"password",i.className="e-pv-formfield-input",i.autocomplete="off",i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.borderStyle="solid",i.addEventListener("click",this.inputElementClick.bind(this)),i.addEventListener("change",this.getTextboxValue.bind(this)),i.addEventListener("focus",this.focusFormFields.bind(this)),i.addEventListener("blur",this.blurFormFields.bind(this)),i},e.prototype.createButtonFieldElement=function(e){var t={id:e,type:"button",class:"e-pv-formfield-input",autocomplete:"off",style:"width: 100%; height: 100%; position: absolute; border-style: solid;"},i=this.createHtmlElement("input",t);return i.addEventListener("click",this.inputElementClick.bind(this)),i.addEventListener("focus",this.focusFormFields.bind(this)),i.addEventListener("blur",this.blurFormFields.bind(this)),i},e.prototype.inputElementClick=function(e){e.target.focus()},e.prototype.focusFormFields=function(e){var t,i=e.target,n=i.parentElement,o="transparent"===i.style.borderColor?"#000000":i.style.borderColor,s="e-pv-radiobtn-container"===i.className||"e-pv-radio-btn"===i.className||"e-pv-radiobtn-span"===i.className;if(i&&(s?("transparent"===i.style.borderColor?n.style.boxShadow="0px 0px 5px "+o:i.parentElement.style.boxShadow=i.style.borderColor+"0px 0px 5px "+i.style.borderWidth,t=n):"foreign-object"!==i.className&&(i.style.boxShadow="0 0 5px "+o,t=i),t)){var a=this.getTargetElementID(t);if(a){var r=this.getFormFieldByID(a);r&&null!==r.pageNumber&&this.pdfViewer.fireFormFieldEvent("FormFieldFocusIn",r,r.pageNumber)}}},e.prototype.getTargetElementID=function(e){return["e-pv-radiobtn-container","e-pv-checkbox-container","e-pv-checkbox-div"].some((function(t){return e.classList.contains(t)}))?e.id.split("_input")[0]:e.id},e.prototype.blurFormFields=function(e){var t=e.target,i=t.parentElement,n="transparent"===t.style.borderColor?"#000000":t.style.borderColor,o="e-pv-radiobtn-container"===t.className||"e-pv-radio-btn"===t.className||"e-pv-radiobtn-span"===t.className;t&&(o?"transparent"===t.style.borderColor?i.style.boxShadow="0px 0px 0px "+n:t.parentElement.style.boxShadow=t.style.borderColor+"0px 0px 0px "+t.style.borderWidth:t.style.boxShadow="")},e.prototype.updateTooltip=function(e,t){sf.base.isNullOrUndefined(e.tooltip)||this.setTooltip(e,t)},e.prototype.setTooltip=function(e,t){""!==e.tooltip&&t&&!e.isReadOnly&&"Visible"===this.checkVisibility(e,!1)?(t.classList.add("e-pv-form-designer-tooltip"),t.setAttribute("title",e.tooltip)):(t&&t.hasAttribute("title")&&t.removeAttribute("title"),t&&t.classList.contains("e-pv-form-designer-tooltip")&&t.classList.remove("e-pv-form-designer-tooltip"))},e.prototype.manageTooltip=function(e){if(void 0!==e.tooltip){null===e.tooltip&&(e.tooltip="");for(var t=e.name,i=void 0,n=void 0,o=this.pdfViewer.formDesignerCollections,s=0;s<o.length;s++)t===o[s].name&&(i=document.getElementById(o[s].id),"RadioButton"!==e.type&&"CheckBox"!==e.type||(i=document.getElementById(o[s].id+"_input_label")),i&&(n=i.parentElement),this.setTooltip(e,n),o[s].tooltip=e.tooltip)}},e.prototype.getTextboxValue=function(e){var t=e.target,i=t.id.split("_")[0];if(-1!==this.getFormFieldIndex(i)){this.changedProperties=[];var n=t.name,o=u(this.getFormFieldByID(i)),s=o,a=t.value;this.updateTextboxValueForSameNameFields(i,n,a);var r=u(this.getFormFieldByID(i));this.pdfViewer.annotation.addAction(o.pageNumber,0,o,"TextValueChange",null,s,r),this.changedProperties.push("Value"),this.pdfViewer.fireFormFieldPropertyChanged("FormFieldPropertyChanged",s,r,this.changedProperties)}},e.prototype.updateTextboxValueForSameNameFields=function(e,t,i){this.pdfViewer.formDesignerCollections.forEach((function(n){if(("Password"===n.type||"Textbox"===n.type)&&n.name===t&&(n.value=i,e!==n.id)){var o=document.getElementById(n.id+"_content_html_element");if(o&&o.firstElementChild&&o.firstElementChild.firstElementChild)o.firstElementChild.firstElementChild.value=n.value}}))},e.prototype.updateTextboxProperties=function(e,t,i){var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();if(e.insertSpaces){var o=e.bounds.width*n/e.maxLength-e.fontSize*n/2-.6*n;t.style.letterSpacing=o+"px",t.style.fontFamily="monospace",t.style.paddingLeft=o/2+"px"}else t.style.fontFamily=e.fontFamily?this.getFontFamily(e.fontFamily):"Helvetica";t.name=e.name,t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",this.setFontStyle(e.fontStyle,t),e.isTransparent&&"#ffffffff"===e.borderColor?(t.style.backgroundColor="transparent",t.style.borderColor="transparent"):(t.style.backgroundColor=this.getBackgroundColor(e.backgroundColor),t.style.borderColor=this.getBorderColor(e.borderColor)),t.value=e.value,t.style.color=e.color?e.color:"black",t.style.borderWidth=sf.base.isNullOrUndefined(e.thickness)?"1px":e.thickness+"px",t.style.textAlign=e.alignment?e.alignment.toLowerCase():"left",t.style.visibility=this.checkVisibility(e,i),t.style.pointerEvents=e.isReadOnly?e.isMultiline?"default":"none":"default",t.style.resize=e.isMultiline&&!this.pdfViewer.isFormDesignerToolbarVisible?"none":"default",e.isReadOnly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="#daeaf7ff"!==e.backgroundColor?e.backgroundColor:"transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red"),sf.base.isNullOrUndefined(e.maxLength)||(t.maxLength=0===e.maxLength?524288:e.maxLength),t.tabIndex=this.formFieldIndex,t.setAttribute("aria-label",this.pdfViewer.element.id+"formfilldesigner")},e.prototype.updateButtonProperties=function(e,t,i){var n=this,o=t,s=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();t.style.fontFamily=e.fontFamily?this.getFontFamily(e.fontFamily):"Helvetica",t.name=e.name,t.style.fontSize=e.fontSize?e.fontSize*s+"px":10*s+"px",t.style.lineHeight=t.style.fontSize,this.setFontStyle(e.fontStyle,t),e.isTransparent&&"#ffffffff"===e.borderColor?(t.style.backgroundColor="transparent",t.style.borderColor="transparent"):(t.style.backgroundColor=this.getBackgroundColor(e.backgroundColor),t.style.borderColor=this.getBorderColor(e.borderColor)),e.imageSource?(o.src=e.imageSource,o.type="image"):o.type="button",e.text?o.value=e.text:o.value="",t.style.borderWidth=sf.base.isNullOrUndefined(e.thickness)?"1px":e.thickness+"px",t.style.color=e.color?e.color:"black",t.style.textAlign=e.alignment?e.alignment.toLowerCase():"center",t.style.visibility=this.checkVisibility(e,i),t.style.pointerEvents=e.isReadOnly?"none":"default",e.isReadOnly&&(o.disabled=!0,t.style.cursor="default",t.style.backgroundColor="#daeaf7ff"!==e.backgroundColor?e.backgroundColor:"transparent"),e.isRequired&&(o.required=!0,t.style.border="1px solid red"),t.style.opacity=e.isTransparent?"0":"1",t.tabIndex=this.formFieldIndex,t.setAttribute("aria-label",this.pdfViewer.element.id+"formfilldesigner");var a=e.pageNumber-1,r=this,l=this.pdfViewerBase.pageSize[a].height,d=void 0;null!=(isNaN(e.targetIndex)?null:e.targetIndex)&&(d=this.pdfViewerBase.pageSize[e.targetIndex]);var h=isNaN(e.focusDestination)?null:e.focusDestination,p=isNaN(e.blurDestination)?null:e.blurDestination;if(d){if(["mouseUp","mouseDown","mouseEnter","mouseLeave","focus","blur"].forEach((function(i){var o=parseFloat(e[i+"Destination"]);if(null!=(isNaN(o)?null:o)){var s=d.top*n.pdfViewerBase.getZoomFactor()+(o-l)*n.pdfViewerBase.getZoomFactor();void 0!==s&&t.addEventListener(i.toLowerCase(),(function(){r.bindButtonFieldAction(this,r,i,e,s)}))}})),null!=h){var c=d.top*this.pdfViewerBase.getZoomFactor()+(h-l)*this.pdfViewerBase.getZoomFactor();void 0!==c&&(t.onmouseup=function(){r.bindButtonFieldAction(this,r,"mouseUp",e,c)})}else null!=p&&(t.onmouseup=function(){var e=document.getElementById(this.id);return null!=e&&e.focus(),!1})}},e.prototype.bindButtonFieldAction=function(e,t,i,n,o){if(null!=e){var s=parseFloat(n[i+"Destination"]);if(s||(s=n.focusDestination),null==s)return void(t.pdfViewerBase.viewerContainer.onscroll=null);t.pdfViewerBase.viewerContainer.onscroll=function(){this.isMouseupOccurred&&null!=n.zoomActionType&&(this.applyZoomActionType(n,t),this.isMouseupOccurred=!1,t.pdfViewerBase.viewerContainer.onscroll=null)}.bind(this),t.pdfViewerBase.viewerContainer.scrollTop=o,t.pdfViewerBase.isViewerMouseWheel=!0,this.isMouseupOccurred=!0}return!1},e.prototype.applyCustomZoomAction=function(e,t){var i=void 0,n=void 0,o=void 0,s=void 0,a=void 0,r=e.actionBoundX,l=e.actionBoundY,d=e.actionBoundWidth,h=e.actionBoundHeight,p=t.pdfViewerBase.viewerContainer.getBoundingClientRect().width,c=t.pdfViewerBase.viewerContainer.getBoundingClientRect().height;return null!=d&&null!=r&&null!=h&&null!=l&&(i=d-r,n=h-l),i&&null!=n&&(o=p/i,s=c/n),null!=o&&null!=s&&(a=Math.min(o,s)),a},e.prototype.applyZoomActionType=function(e,t){var i=e.zoomActionType,n=this.decapitalize(i),o=t.pdfViewer.magnificationModule;if("actualSize"===n)o.isAutoZoom=!1,o.zoomTo(100);else if("fitToWidth"===n)o.isAutoZoom=!1,o.fitToWidth();else if("fitToPage"===n)o.isAutoZoom=!1,o.fitToPage();else if("namedDestination"===n)-1!==e.actionZoomValue&&null!=e.actionZoomValue&&(o.isAutoZoom=!1,o.zoomTo(e.actionZoomValue));else if("customZoom"===n){var s=this.applyCustomZoomAction(e,t);100*s!=null&&100*s>0&&(o.isAutoZoom=!1,o.zoomTo(100*s))}},e.prototype.decapitalize=function(e){return 0===e.length?e:e.charAt(0).toLowerCase()+e.slice(1)},e.prototype.checkVisibility=function(e,t){return sf.base.isNullOrUndefined(e.visibility)?"Visible":"Visible"===e.visibility||"Hidden"===e.visibility?e.visibility:(t?"HiddenPrintable"===e.visibility:"VisibleNotPrintable"===e.visibility)?"Visible":"Hidden"},e.prototype.updateRadioButtonProperties=function(e,t,i,n){if(t.checked=this.checkRadioButtonSelected(e),t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030",t.style.visibility=this.checkVisibility(e,n),sf.base.isNullOrUndefined(i)?t.style.pointerEvents=e.isReadOnly?"none":"default":i.style.pointerEvents=e.isReadOnly?"none":"default",t.style.borderWidth=sf.base.isNullOrUndefined(e.thickness)?"1px":e.thickness+"px",e.isReadOnly&&(t.disabled=!0,t.style.cursor="default",i.style.backgroundColor="#daeaf7ff"!==e.backgroundColor?e.backgroundColor:"transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red"),t.tabIndex=this.formFieldIndex,t.checked)for(var o=0;o<this.pdfViewer.formDesignerCollections.length;o++){var s=this.pdfViewer.formDesignerCollections[o];if("RadioButton"===s.type&&s.name===t.id.split("_")[1]){var a=s.id+"_"+s.name+"_"+s.value,r=document.getElementById(a);sf.base.isNullOrUndefined(r)||(s.value===t.value?(r.checked=!0,sf.base.isNullOrUndefined(e.isUnisonSelected)||(e.isUnisonSelected=!0)):r.checked=!1)}}},e.prototype.checkRadioButtonSelected=function(e){if(e.isSelected)return!0;var t=this.getFormFieldByID(e.id);return this.pdfViewer.formDesignerCollections.some((function(i){if("RadioButton"===i.type&&i.id!==e.id&&i.name===e.name&&i.value===e.value){var n=i;if(n.isUnisonSelected&&(t.isUnisonSelected=!0,n.isSelected))return t.isSelected=!0,!0}return!1}))},e.prototype.updateCheckboxProperties=function(e,t,i){t.name=e.name?e.name:"Check Box"+this.setFormFieldIndex(),t.checked=!!e.isChecked,"#ffffffff"===e.borderColor?(t.style.backgroundColor="transparent",t.style.borderColor="transparent"):(t.style.backgroundColor=e.backgroundColor?e.backgroundColor:"#daeaf7ff",t.style.borderColor=e.borderColor?e.borderColor:"#303030"),t.style.visibility=this.checkVisibility(e,i),t.style.pointerEvents=e.isReadOnly?"none":"default",t.style.borderWidth=sf.base.isNullOrUndefined(e.thickness)?"1px":e.thickness+"px",e.isReadOnly&&(t.disabled=!0,t.style.cursor="default",t.style.backgroundColor="#daeaf7ff"!==e.backgroundColor?e.backgroundColor:"transparent"),t.style.pointerEvents=e.isReadOnly?"none":"default",e.isRequired&&(t.required=!0,t.style.border="1px solid red"),t.tabIndex=this.formFieldIndex,this.handleCheckBoxStateById(e.id)},e.prototype.handleCheckBoxStateById=function(e){if(!sf.base.isNullOrUndefined(e)){var t=this.getFormFieldIndex(e.split("_")[0]);if(-1!==t)for(var i=this.pdfViewer.formDesignerCollections[t],n=0;n<this.pdfViewer.formDesignerCollections.length;n++){var o=this.pdfViewer.formDesignerCollections[n];if(i.name===o.name){var s=document.getElementById(o.id+"_input_span"),a=!sf.base.isNullOrUndefined(s);i.value===o.value?i.isChecked?(a&&(s.classList.remove("e-pv-cb-unchecked"),s.classList.add("e-pv-checkbox-span","e-pv-cb-checked")),o.isChecked=!0):(a&&(s.classList.remove("e-pv-cb-checked"),s.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked")),o.isChecked=!1):o.isChecked&&!i.isChecked?(a&&(s.classList.remove("e-pv-cb-unchecked"),s.classList.add("e-pv-checkbox-span","e-pv-cb-checked")),o.isChecked=!0):(a&&(s.classList.remove("e-pv-cb-checked"),s.classList.add("e-pv-checkbox-span","e-pv-cb-unchecked")),o.isChecked=!1)}}}},e.prototype.getFontFamily=function(e){"Times New Roman"===e&&(e="TimesRoman");return["Helvetica","Courier","TimesRoman","Symbol","ZapfDingbats"].indexOf(e)>-1?e:"Helvetica"},e.prototype.getBackgroundColor=function(e){return e||"#daeaf7ff"},e.prototype.getBorderColor=function(e){return e||"#303030"},e.prototype.setTextBoxProperties=function(e,t){var i=this.setCommonValueofFormField(e,t);return i.value=this.updateFormFieldValueSettings(e.value,t),i.alignment=this.updateFormFieldAlignmentSettings(e.alignment,t),i.color=this.updateFormFieldFontColorSettings(e.color,t),i.fontFamily=this.updateFormFieldFontFamilySettings(e.fontFamily,t),i.fontSize=this.updateFormFieldFontSizeSettings(e.fontSize,t),i.fontStyle=this.updateFormFieldFontStyleSettings(e.fontStyle,t),"Textbox"===e.type&&(i.isMultiline=this.updateFormFieldIsMultilineSettings(e.isMultiline,t),i.insertSpaces=this.updateFormFieldInsertSpacesSettings(e.insertSpaces,t)),i.maxLength=this.updateFormFieldMaxLengthSettings(e.maxLength,t),i},e.prototype.setButtonProperties=function(e,t){var i=this.setCommonValueofFormField(e,t);return i.imageSource=this.updateFormFieldButtonValueSettings(e.imageSource,t),i.imageSource&&i.imageSource.indexOf("base64")>-1||(i.imageSource=null),i.color=this.updateFormFieldFontColorSettings(e.color,t),i.fontFamily=this.updateFormFieldFontFamilySettings(e.fontFamily,t),i.alignment=this.updateFormFieldButtonAlignmentSettings(e.alignment,t),i.fontSize=this.updateFormFieldFontSizeSettings(e.fontSize,t),i.fontStyle=this.updateFormFieldFontStyleSettings(e.fontStyle,t),i.text=this.updateFormFieldTextSettings(e.text,t),i.mouseUpDestination=e.mouseUpDestination,i.mouseDownDestination=e.mouseDownDestination,i.mouseEnterDestination=e.mouseEnterDestination,i.mouseLeaveDestination=e.mouseLeaveDestination,i.focusDestination=e.focusDestination,i.blurDestination=e.blurDestination,i.zoomActionType=e.zoomActionType,i.targetIndex=e.targetIndex,i.actionBoundX=e.actionBoundX,i.actionBoundY=e.actionBoundY,i.actionBoundWidth=e.actionBoundWidth,i.actionBoundHeight=e.actionBoundHeight,i.buttonAction=e.buttonAction,i},e.prototype.setCommonValueofFormField=function(e,t){return{type:e.type,id:sf.base.isNullOrUndefined(e.id)?sf.drawings.randomId():e.id,name:this.updateFormFieldNameSettings(e.name,e,t),pageNumber:this.updateFormFieldPageNumberSettings(e.pageNumber,t),bounds:this.updateFormFieldBoundsSettings(e.type,e.bounds,t),isReadOnly:this.updateFormFieldsReadOnlySettings(e.isReadOnly,t),visibility:this.updateFormFieldsVisibilitySettings(e.visibility,t),isRequired:this.updateFormFieldRequiredSettings(e.isRequired,t),customData:this.updateFormFieldCustomDataSettings(e.customData,t),tooltip:this.updateFormFieldTooltipSettings(e.tooltip,t),thickness:this.updateFormFieldThicknessSettings(e.thickness,t),backgroundColor:this.updateFormFieldBackgroundColorSettings(e.backgroundColor,t),borderColor:this.updateFormFieldBorderColorSettings(e.borderColor,t),rotateAngle:sf.base.isNullOrUndefined(e.rotateAngle)?0:e.rotateAngle,zoomValue:1}},e.prototype.setRadioButtonProperties=function(e,t){var i=this.setCommonValueofFormField(e,t);return i.radiobuttonItem=[],(sf.base.isNullOrUndefined(t)||t&&sf.base.isNullOrUndefined(t.value))&&(e.value=null===e.value?i.name:e.value),i.value=this.updateFormFieldValueSettings(e.value,t),i.isSelected=this.updateFormFieldsSelectedSettings(e.isSelected,t),i},e.prototype.setCheckBoxProperties=function(e,t){var i=this.setCommonValueofFormField(e,t);return e.value=null===e.value?"Yes":e.value,i.value=this.updateFormFieldValueSettings(e.value,t),i.isChecked=this.updateFormFieldsCheckedSettings(e.isChecked,t),i},e.prototype.createDropDownElement=function(e,t){return this.createDropDownListBoxElement(e,!0,t)},e.prototype.createListBoxElement=function(e,t){return this.createDropDownListBoxElement(e,!1,t)},e.prototype.createDropDownListBoxElement=function(e,t,i){var n=sf.base.createElement("div");n.className="foreign-object",n.style.position="absolute",n.style.width="100%",n.style.height="100%";var o=sf.base.createElement("select");t?o.addEventListener("change",this.dropdownChange.bind(this)):sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode?o.addEventListener("change",this.listboxChange.bind(this)):o.addEventListener("click",this.listboxClick.bind(this)),o.addEventListener("focus",this.focusFormFields.bind(this)),o.addEventListener("blur",this.blurFormFields.bind(this)),o.id=e.id,o.name="editabledropdown"+this.pdfViewerBase.activeElements.activePageID+e.id,o.setAttribute("aria-label","editabledropdown"+this.pdfViewerBase.activeElements.activePageID+e.id),t||(o.setAttribute("multiple",""),o.multiple=!0),o.className="e-pv-formfield-dropdown",o.style.width="100%",o.style.height="100%",o.style.position="absolute",this.updateDropdownListProperties(e,o,i);for(var s=e.options?e.options:[],a=0;a<s.length;a++){var r=sf.base.createElement("option");r.className="e-pv-formfield-dropdown",r.value=s[a].itemValue,r.text=s[a].itemName,t?this.updateDropdownListProperties(e,r,i):e.fontStyle&Ft.Bold&&(r.style.fontWeight="bold"),o.appendChild(r)}if(!t&&e.selectedIndexes)for(var l=0;l<e.selectedIndexes.length;l++){var d=o.options[e.selectedIndexes[l]];d&&(d.selected=!0)}else o.selectedIndex=e.selectedIndex;return n.appendChild(o),n},e.prototype.setDropDownProperties=function(e,t){for(var i=this.setDropDownListBoxProperties(e,t),n=0;n<this.pdfViewer.formDesignerCollections.length;n++){var o=this.pdfViewer.formDesignerCollections[n];if(o.type===i.type&&o.name===i.name){i.options=o.options,e.selectedIndex=sf.base.isNullOrUndefined(o.selectedIndex)?0:o.selectedIndex;break}}return i.selectedIndex=!sf.base.isNullOrUndefined(e.selectedIndex)&&!sf.base.isNullOrUndefined(i.options)&&e.selectedIndex<i.options.length?e.selectedIndex:0,i.selectedIndex=this.updateFormFieldSelectedIndexSettings(i.selectedIndex,t),i},e.prototype.setListBoxProperties=function(e,t){for(var i=this.setDropDownListBoxProperties(e,t),n=0;n<this.pdfViewer.formDesignerCollections.length;n++){var o=this.pdfViewer.formDesignerCollections[n];if(o.type===i.type&&o.name===i.name){i.options=o.options,e.selectedIndexes=sf.base.isNullOrUndefined(o.selectedIndexes)?[0]:o.selectedIndexes;break}}if(i.selectedIndexes=!sf.base.isNullOrUndefined(e.selectedIndexes)&&!sf.base.isNullOrUndefined(i.options)&&e.selectedIndexes[0]<i.options.length?e.selectedIndexes:[0],i.selectedIndexes=this.updateFormFieldSelectedIndexesSettings(i.selectedIndexes,t),!sf.base.isNullOrUndefined(i.options))for(var s=0;s<i.selectedIndexes.length;s++)if(i.selectedIndexes[s]>=i.options.length){i.selectedIndexes=[0];break}return i},e.prototype.setDropDownListBoxProperties=function(e,t){var i=this.setCommonValueofFormField(e,t);return i.alignment=this.updateFormFieldAlignmentSettings(e.alignment,t),i.color=this.updateFormFieldFontColorSettings(e.color,t),i.fontFamily=this.updateFormFieldFontFamilySettings(e.fontFamily,t),i.fontSize=this.updateFormFieldFontSizeSettings(e.fontSize,t),i.fontStyle=this.updateFormFieldFontStyleSettings(e.fontStyle,t),i.options=this.updateFormFieldOptionsSettings(e.options,t),i},e.prototype.updateDropdownListProperties=function(e,t,i){t.name=e.name?e.name:"Dropdown"+this.setFormFieldIndex(),t.style.fontFamily=e.fontFamily?e.fontFamily:"Helvetica";var n=i?this.defaultZoomValue:this.pdfViewerBase.getZoomFactor();t.style.fontSize=e.fontSize?e.fontSize*n+"px":10*n+"px",this.setFontStyle(e.fontStyle,t),e.isTransparent&&"#ffffffff"===e.borderColor?(t.style.backgroundColor="transparent",t.style.borderColor="transparent"):(t.style.backgroundColor=this.getBackgroundColor(e.backgroundColor),t.style.borderColor=this.getBorderColor(e.borderColor)),t.style.borderWidth=sf.base.isNullOrUndefined(e.thickness)?"1px":e.thickness+"px",t.style.color=e.color?e.color:"black",t.style.textAlign=e.alignment?e.alignment.toLowerCase():"left",t.style.visibility=this.checkVisibility(e,i),t.style.pointerEvents=e.isReadOnly?"none":"default",e.isReadOnly&&(t.disabled="ListBox"!==e.type,t.style.cursor="default",t.style.backgroundColor="#daeaf7ff"!==e.backgroundColor?e.backgroundColor:"transparent"),e.isRequired&&(t.required=!0,t.style.border="1px solid red"),t.tabIndex=this.formFieldIndex,t.setAttribute("aria-label",this.pdfViewer.element.id+"formfilldesigner")},e.prototype.dropdownChange=function(e){this.changedProperties=[];for(var t=u(this.getFormFieldByID(e.target.id)),i=t,n=0;n<this.pdfViewer.formDesignerCollections.length;n++){var o=this.pdfViewer.formDesignerCollections[n];if(e.target.name===o.name&&"DropDown"===o.type){var s=document.getElementById(o.id+"_content_html_element");if(s&&s.firstElementChild&&s.firstElementChild.firstElementChild)s.firstElementChild.firstElementChild.selectedIndex=e.target.selectedIndex;o.selectedIndex=e.target.selectedIndex}}var a=u(this.getFormFieldByID(e.target.id));this.pdfViewer.annotation.addAction(t.pageNumber,0,t,"DropDownChange",null,i,a),this.changedProperties.push("SelectedIndex"),this.pdfViewer.fireFormFieldPropertyChanged("FormFieldPropertyChanged",i,a,this.changedProperties)},e.prototype.listboxClick=function(e){this.handleListBoxSelection(e)},e.prototype.handleListBoxSelection=function(e){this.changedProperties=[];var t=e.currentTarget,i=u(this.getFormFieldByID(e.currentTarget.id)),n=i;if(i.options&&i.options.length>0){for(var o=0;o<this.pdfViewer.formDesignerCollections.length;o++){var s=this.pdfViewer.formDesignerCollections[o];if(t.name===s.name&&"ListBox"===s.type){var a=document.getElementById(s.id+"_content_html_element");if(a&&a.firstElementChild&&a.firstElementChild.firstElementChild)for(var r=a.firstElementChild.firstElementChild,l=0;l<t.options.length;l++)r.options[l].selected=t.options[l].selected;s.selectedIndexes=[];for(var d=0;d<t.options.length;d++)t.options[d].selected&&s.selectedIndexes.push(d)}}var h=u(this.getFormFieldByID(e.currentTarget.id));this.isSelectedIndexesChanged(n.selectedIndexes,h.selectedIndexes)&&(this.pdfViewer.annotation.addAction(i.pageNumber,0,i,"ListBoxChange",null,n,h),this.changedProperties.push("SelectedIndex"),this.pdfViewer.fireFormFieldPropertyChanged("FormFieldPropertyChanged",n,h,this.changedProperties))}},e.prototype.listboxChange=function(e){this.handleListBoxSelection(e)},e.prototype.createSignatureElement=function(e,t){var i=!sf.base.isNullOrUndefined(e.isInitialField)&&e.isInitialField,n=this.createHtmlElement("div",{class:"foreign-object",style:"position: absolute; width: 100%; height: 100%;"});n.addEventListener("focus",this.focusFormFields.bind(this)),n.addEventListener("blur",this.blurFormFields.bind(this));var o=this.createHtmlElement("div",{style:"position: absolute; width: 100%; height: 100%; background-color: transparent;"});sf.base.isNullOrUndefined(e.thickness)||(o.className="e-pdfviewer-signatureformfields-signature",o.style.border=e.thickness+"px solid #303030"),sf.base.isNullOrUndefined(e.value)||""===e.value?(o.className="e-pdfviewer-signatureformfields",o.style.pointerEvents=""):(o.className="e-pdfviewer-signatureformfields-signature",o.style.pointerEvents="none"),o.id=e.id,o.disabled=e.isReadOnly,n.appendChild(o),i?e.initialIndicatorSettings=e.initialIndicatorSettings||this.pdfViewer.initialIndicatorSettings:e.signatureIndicatorSettings=e.signatureIndicatorSettings||this.pdfViewer.signatureIndicatorSettings;var s=e.initialIndicatorSettings||this.pdfViewer.initialIndicatorSettings,a=e.signatureIndicatorSettings||this.pdfViewer.signatureIndicatorSettings,r=i?s:a,l=r.backgroundColor?this.getSignatureBackground(r.backgroundColor):a.backgroundColor?this.getSignatureBackground(a.backgroundColor):"#FFE48559",d=r.fontSize&&r.fontSize>0?r.fontSize:10,h=this.pdfViewerBase.getZoomFactor(),p={style:"overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding: 2px 3px 2px 1px; box-sizing: border-box; text-align: left;background-color: "+l+";color: "+r.color+";opacity: "+r.opacity.toString()+";position: absolute;font-size: "+d*h+"px;"+(r.fontFamily?" font-family: "+r.fontFamily+";":"")+"max-width: "+h*e.bounds.width+"px;max-height: "+h*e.bounds.height+"px;"},c=this.createHtmlElement("span",p);c.classList.add("e-pdfViewer-signIcon");var u=i?s?s.text:null:a?a.text:null;return"InitialField"===e.formFieldAnnotationType?(c.id="initialIcon"+(e.pageNumber-1)+"_"+this.setFormFieldIdIndex(),this.setIndicatorText(c,u,null,"Initial")):(c.style.height="",c.style.width="",c.id="signIcon"+(e.pageNumber-1)+"_"+this.setFormFieldIdIndex(),this.setIndicatorText(c,u,a.text,"Sign")),t||n.appendChild(c),this.updateSignatureFieldProperties(e,n,t),n},e.prototype.setSignatureProperties=function(e,t){var i=this.setCommonValueofFormField(e,t);return i.value=this.updateFormFieldValueSettings(e.value,t),i.value&&(i.signatureType=this.getSignatureType(i)),e.backgroundColor=this.getSignatureBackground(i.backgroundColor),i.backgroundColor=e.backgroundColor,i.fontFamily=this.updateFormFieldFontFamilySettings(e.fontFamily,t),i.formFieldAnnotationType="SignatureField",i.signatureBound=e.signatureBound,i.signatureIndicatorSettings=e.signatureIndicatorSettings?e.signatureIndicatorSettings:null,i},e.prototype.getSignatureType=function(e){return(e.value&&e.value.indexOf("base64"))>-1?"Image":e.value&&e.value.startsWith("M")&&e.value.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Text"},e.prototype.updateSignatureAspectRatio=function(e,t){var i,n,o=sf.drawings.processPathData(e),s=sf.drawings.splitArrayCollection(o),a=-1,r=-1,l=-1,d=-1,h=document.getElementById(this.pdfViewer.dataId+"_signatureCanvas_");s.forEach((function(e){var t=parseFloat(e.x.toString()),i=parseFloat(e.y.toString());-1===a?(a=l=t,r=d=i):(a=Math.min(a,t),r=Math.min(r,i),l=Math.max(l,t),d=Math.max(d,i))})),i=h?h.clientWidth:650,n=h?h.clientHeight:300;var p=l-a,c=d-r,u=this.calculateSignatureBounds(i,n,p,c,t);return{x:u.currentLeftDiff,y:u.currentTopDiff,left:u.currentLeftDiff,top:u.currentTopDiff,width:u.currentWidth,height:u.currentHeight}},e.prototype.calculateSignatureBounds=function(e,t,i,n,o){var s=i/e,a=n/t,r=this.pdfViewerBase.getZoomFactor(),l=0,d=0,h=!1,p=!1,c=0,u=0,f=this.getSignatureFieldDimensions(o),m=f.clientWidth,g=f.clientHeight,w=m/g,y=g/m,v=e/t,b=t/e;if(w>v||y>v||Math.abs(w-y)<=1){var S=0;y>v||Math.abs(w-y)<=1?(p=!0,S=y/b):(h=!0,S=w/v),!o.rotateAngle||90!==o.rotateAngle&&270!==o.rotateAngle?(h&&(c=m/r,l=m/S/r,d=g/r),p&&(u=g/r,l=m/r,d=g/S/r)):(l=g/r,d=m/r)}else!o.rotateAngle||90!==o.rotateAngle&&270!==o.rotateAngle?(l=m/r,d=g/r):(l=g/r,d=m/r);var A=(e-i)/2,x=(t-n)/2;if(h)A=A/e*c,A+=(c*s-l*s)/2,x=x/t*d;else if(p){A=A/e*l,x=x/t*u,x+=(u*a-d*a)/2}else A=A/e*l,x=x/t*d;return{currentLeftDiff:A,currentTopDiff:x,currentWidth:l*=s,currentHeight:d*=a}},e.prototype.getSignatureFieldDimensions=function(e){var t=document.createElement("div");t.style.position="absolute",t.style.left="-9999px",t.style.top="-9999px",t.style.visibility="hidden";var i=document.createElement("div");i.style.width=e.bounds.width+"px",i.style.height=e.bounds.height+"px",t.appendChild(i),document.body.appendChild(t);var n=i.clientWidth,o=i.clientHeight;return document.body.removeChild(t),{clientWidth:n,clientHeight:o}},e.prototype.getBounds=function(e){var t=e.cloneNode(!0),i=this.pdfViewerBase.getZoomFactor(),n=parseFloat(t.style.fontSize);t.style.fontSize=n/i+"px",t.style.height="",t.style.width="",t.id=t.id+"_clonedElement",document.body.appendChild(t);var o=document.getElementById(t.id).getBoundingClientRect();return document.body.removeChild(t),o},e.prototype.setHeightWidth=function(e,t,i,n){return e/2>t&&i<t?t*n:i<=e/2?i*n:e/2*n},e.prototype.updateSignatureFieldProperties=function(e,t,i){t.name=e.name?e.name:"Signature"+this.setFormFieldIndex(),t.value=e.value?e.value:"";var n={style:"visibility: "+this.checkVisibility(e,i)+";borderWidth: "+(sf.base.isNullOrUndefined(e.thickness)?"1px":e.thickness+"px")+";"};this.setAttributeHtml(t,n);var o=e.backgroundColor?e.backgroundColor:"#FFE48559";if(o=this.getSignatureBackground(o),e.isTransparent&&"#ffffffff"===e.borderColor){if(this.setAttributeHtml(t,{style:"backgroundColor: transparent;borderColor: transparent;"}),t.firstElementChild){this.setAttributeHtml(t.firstElementChild,{style:"borderColor: transparent;"})}}else{var s=i&&e.signatureType?"transparent":o,a=e.borderColor?e.borderColor:"#303030",r=void 0;if(r=s.includes("#")?{style:"backgroundColor: "+s+";borderColor: "+a+";"}:{style:"backgroundColor: "+s+";borderColor: "+a+";opacity: 0.65;"},this.setAttributeHtml(t,r),t.firstElementChild){var l={style:"borderColor: "+a+";"};this.setAttributeHtml(t.firstElementChild,l)}}var d={style:"pointerEvents: "+(e.isReadOnly?"none":"default")+";"};if(this.setAttributeHtml(t,d),e.isReadOnly){sf.base.isNullOrUndefined(t.firstElementChild)||(t.firstElementChild.disabled=!0);this.setAttributeHtml(t,{style:"cursor: default;backgroundColor: transparent;"})}if(e.isRequired){t.required=!0;var h=e.thickness>0?e.thickness+"px solid red":"1px solid red";if(t.firstElementChild){var p={style:"border: "+h+";"};this.setAttributeHtml(t.firstElementChild,p)}else{var c={style:"border: 1px solid red;borderWidth: "+(e.thickness?e.thickness+"px":"1px")+";"};this.setAttributeHtml(t,c)}}t.tabIndex=this.formFieldIndex},e.prototype.padHex=function(e){return("00"+e.toString(16)).slice(-2)},e.prototype.getSignatureBackground=function(e){if(!e.includes("#")){var t=this.pdfViewer.nameToHash(e);return"transparent"===e?t:t.startsWith("#")?t+"59":"#FFE48559"}return e.length>8?e.endsWith("00")||(e=e.slice(0,-2)+"60"):e+="60",e},e.prototype.setIndicatorText=function(e,t,i,n){e.innerHTML=t||(i||n)},e.prototype.setFontStyle=function(e,t,i){if(!sf.base.isNullOrUndefined(e)){if(e&Ft.Bold)if(i&&"ListBox"===i&&t.children)for(var n=0;n<t.children.length;n++)t.children[n].style.fontWeight="bold";else t.style.fontWeight="bold";else if(i&&"ListBox"===i&&t.children)for(n=0;n<t.children.length;n++)t.children[n].style.fontWeight="";else t.style.fontWeight="";e&Ft.Italic?t.style.fontStyle="italic":t.style.fontStyle="",e&Ft.Underline&&e&Ft.Strikethrough?t.style.textDecoration="underline line-through":e&Ft.Underline?t.style.textDecoration="underline":e&Ft.Strikethrough?t.style.textDecoration="line-through":t.style.textDecoration=""}},e.prototype.setInitialProperties=function(e,t){var i=this.setCommonValueofFormField(e,t);return i.value=this.updateFormFieldValueSettings(e.value,t),i.value&&(i.signatureType=this.getSignatureType(i)),e.backgroundColor=this.getSignatureBackground(e.backgroundColor),i.backgroundColor=e.backgroundColor,i.fontFamily=this.updateFormFieldFontFamilySettings(e.fontFamily,t),i.formFieldAnnotationType="InitialField",i.signatureBound=e.signatureBound,i.initialIndicatorSettings=e.initialIndicatorSettings?e.initialIndicatorSettings:null,i.isInitialField=!0,i},e.prototype.clearFormFieldSelection=function(){var e=this.pdfViewer.selectedItems.annotations,t=this.pdfViewer.selectedItems.formFields;(e&&e.length||t&&t.length)&&(this.pdfViewer.clearSelection(this.pdfViewerBase.activeElements.activePageID),t&&t.length&&this.enableDeleteIcon())},e.prototype.clearStickyNotesAnnotationMode=function(){this.pdfViewer.annotationModule.clearAnnotationMode();var e=document.getElementById(this.pdfViewer.dataId+"_comment");(e=e&&e.children[0])&&e.classList.contains("e-pv-select")&&e.classList.remove("e-pv-select")},e.prototype.setFormFieldMode=function(e){var t;switch(this.pdfViewer.selectedItems&&this.pdfViewerBase.activeElements&&!sf.base.isNullOrUndefined(this.pdfViewerBase.activeElements.activePageID)&&(this.clearFormFieldSelection(),this.clearStickyNotesAnnotationMode()),this.pdfViewerBase.removeFromFieldHelper(),this.isAddFormFieldUi=!0,e){case"Textbox":case"Password":case"CheckBox":case"RadioButton":case"DropDown":case"Button":t=this.setCommonPdfAnnotationBaseModelProperties(e);break;case"ListBox":t=this.activateListboxElement(e);break;case"SignatureField":case"InitialField":t=this.activateSignatureBoxElement(e)}sf.base.isNullOrUndefined(t)||(this.pdfViewer.drawingObject=t,this.pdfViewer.tool="DrawTool"),sf.base.Browser.isDevice&&!this.pdfViewer.enableDesktopMode&&this.pdfViewer.formDesignerModule.ShowToastMessage(e)},e.prototype.setFormFieldIdIndex=function(){return this.formFieldIdIndex=this.formFieldIdIndex+1,this.formFieldIdIndex},e.prototype.setCommonPdfAnnotationBaseModelProperties=function(e){return{formFieldAnnotationType:e,name:this.setPdfAnnotationBaseName(e),isChecked:!1,isSelected:!1,value:"RadioButton"===e||"CheckBox"===e?null:"",fontFamily:"Helvetica",fontSize:this.defaultFontSize,fontStyle:Ft.None,color:"black",backgroundColor:"#daeaf7ff",thickness:1,borderColor:"#303030",alignment:"Button"===e?"Center":"Left",isReadonly:!1,visibility:"Visible",isRequired:!1,rotateAngle:0,tooltip:"",customData:{},options:[],isMultiSelect:!1}},e.prototype.clearToggledFormTypeAsync=function(){this.pdfViewerBase.removeFromFieldHelper(),this.pdfViewer.drawingObject&&(this.pdfViewer.drawingObject=null),this.pdfViewer.tool&&(this.pdfViewer.tool=null)},e.prototype.activateListboxElement=function(e){var t=this.setCommonPdfAnnotationBaseModelProperties(e);return t.isMultiSelect=!0,t},e.prototype.activateSignatureBoxElement=function(e){var t=this.setCommonPdfAnnotationBaseModelProperties(e);return t.isInitialField="InitialField"===e,t},e.prototype.setPdfAnnotationBaseName=function(e){var t;switch(e){case"Textbox":t="TextBox"+this.setFormFieldIndex();break;case"Password":case"CheckBox":case"RadioButton":case"DropDown":case"ListBox":case"Button":t=e+this.setFormFieldIndex();break;case"SignatureField":t="Signature"+this.setFormFieldIndex();break;case"InitialField":t="Initial"+this.setFormFieldIndex()}return t},e.prototype.drawHelper=function(e,t,i){var n=document.getElementById(this.pdfViewer.element.id+"_textLayer_"+this.pdfViewerBase.activeElements.activePageID);if(null!==document.getElementById(this.pdfViewer.element.id+"_pageCanvas_"+this.pdfViewerBase.activeElements.activePageID)&&null!==n){var o=this.pdfViewerBase.getZoomFactor(),s=this.createHtmlElement("div",{id:"FormField_helper_html_element",class:"foreign-object"});this.isDrawHelper=!0;var a=u(t);a.type=e,a=this.createFormFieldObject(e,a),s.appendChild(this.createFormFieldBaseonType(a,!1)),n.appendChild(s);var r=this.pdfViewerBase.getMousePosition(i);s.setAttribute("style","height:"+a.bounds.height*o+"px; width:"+a.bounds.width*o+"px;left:"+r.x*o+"px; top:"+r.y*o+"px;position:absolute;opacity: 0.5;pointer-events: none;")}},e.prototype.updateColorsInIcon=function(){var e=this.getFormFieldByID(this.pdfViewer.selectedItems.formFields[0].id);this.setColorInIcon(e.color,"fontColor"),this.setColorInIcon(e.backgroundColor,"fillColor"),this.setColorInIcon(e.borderColor,"borderColor")},e.prototype.setColorInIcon=function(e,t){var i;switch(t){case"fontColor":i=document.querySelector(".e-pv-formfield-textcolor-icon.e-pv-form-field-tooltip");break;case"fillColor":i=document.querySelector(".e-pv-formfield-fontcolor-icon.e-pv-form-field-tooltip");break;case"borderColor":i=document.querySelector(".e-pv-formfield-strokecolor-icon.e-pv-form-field-tooltip")}i&&(i.children[0].style.borderBottomColor=e)},e.prototype.updateFormFieldInitialSize=function(e,t){var i=this.pdfViewerBase.getZoomFactor(),n=this.getCurrentFormFieldSettingsBasedonType(t),o=this.updateFormFieldBoundsSettings(t,this.setInitialSize?null:e.bounds,n);return e.width=o.width*i,e.height=o.height*i,{width:e.width,height:e.height}},e.prototype.isStandardFormFieldType=function(e){return"Textbox"===e||"SignatureField"===e||"InitialField"===e||"CheckBox"===e||"ListBox"===e||"RadioButton"===e||"DropDown"===e||"Password"===e||"Button"===e},e.prototype.createHtmlElement=function(e,t){var i=sf.base.createElement(e);return this.setAttributeHtml(i,t),i},e.prototype.setAttributeHtml=function(e,t){nl(e,t)},e.prototype.downloadFormDesigner=function(){var e=f(this.pdfViewer.formDesignerCollections);return this.setSignaturePath(e),e=this.getRadioButtonItemObject(JSON.parse(JSON.stringify(e))),this.validateFormField(e),sf.base.isNullOrUndefined(e)?null:JSON.stringify(e)},e.prototype.validateFormField=function(e){for(var t=this,i=0,n=e;i<n.length;i++){var o=n[i];if(o.isRequired){var s=function(e,i,n){void 0===n&&(n=null),e?(t.pdfViewerBase.validateForm=!0,t.pdfViewerBase.nonFillableFields[""+i]=n):delete t.pdfViewerBase.nonFillableFields[""+i]};switch(o.type){case"Textbox":case"Password":case"SignatureField":case"InitialField":var a=o;s(sf.base.isNullOrUndefined(a.value)||""===a.value||a.isMultiline,o.name,a.value);break;case"RadioButton":var r=o,l=!!r.radiobuttonItem&&r.radiobuttonItem.some((function(e){return e.isSelected}));s(!l,o.name,l);break;case"CheckBox":var d=o;s(!d.isChecked,o.name,d.isChecked);break;case"DropDown":var h=o;s(void 0===h.selectedIndex||!h.options||0===h.options.length,o.name,[]);break;case"ListBox":var p=o;s(!p.selectedIndexes||0===p.selectedIndexes.length||!p.options||0===p.options.length,o.name,[])}}}},e.prototype.setSignaturePath=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];if("SignatureField"===n.type||"InitialField"===n.type){var o=n;n.Value=o.value,sf.base.isNullOrUndefined(o.value)||("Path"===o.signatureType?this.processPathSignature(n,o):"Text"===o.signatureType?this.processTextSignature(n,o):"Image"===o.signatureType&&this.processImageSignature(n,o))}}},e.prototype.processPathSignature=function(e,t){var i=sf.drawings.processPathData(e.Value),n=sf.drawings.splitArrayCollection(i);if(e.Value=JSON.stringify(n),sf.base.isNullOrUndefined(t.signatureBound)){var o=this.updateSignatureAspectRatio(t.value,e),s=e.bounds.x+o.left,a=e.bounds.y+o.top;t.signatureBound={x:s,y:a,width:o.width,height:o.height}}},e.prototype.processTextSignature=function(e,t){if(sf.base.isNullOrUndefined(t.signatureBound)){var i=e.bounds;t.signatureBound={x:i.x+4,y:i.y+4,width:i.width-8,height:i.height-8};var n=this.pdfViewer.formFieldsModule.getTextWidth(t.value,i.height/1.35,t.fontFamily),o=n>i.width?i.width/n:1;t.fontSize=Math.floor(i.height/1.35*o)}},e.prototype.processImageSignature=function(e,t){if(sf.base.isNullOrUndefined(t.signatureBound)){var i=e.bounds,n=i.width-.8*i.width,o=i.width-.6*i.width;t.signatureBound={x:i.x+n,y:i.y+2,width:i.width-o,height:i.height-2}}},e.prototype.updateFormField=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this.changedProperties=[];var n=this.getFormFieldByID(e.id),o=u(n);if(n){var s=document.getElementById(n.id+"_content_html_element");switch(n.type){case"Textbox":case"Password":case"DropDown":case"ListBox":if(s){var a=s.firstElementChild.firstElementChild;this.textboxFieldPropertyChange(n,e,a,s,t,i)}else this.textboxFieldPropertyChange(n,e,null,null,t,i);break;case"RadioButton":case"CheckBox":if(s){a=s.firstElementChild.firstElementChild.firstElementChild;this.radioCheckBoxFieldPropertyChange(n,e,a,s,t,i,o)}else this.radioCheckBoxFieldPropertyChange(n,e,null,null,t,i,o);break;case"SignatureField":case"InitialField":if(s){var r=s.firstElementChild.firstElementChild;this.SignatureInitialFieldPropertyChange(n,e,r,s,t,i)}else this.SignatureInitialFieldPropertyChange(n,e,null,null,t,i);break;case"Button":if(s){a=s.firstElementChild.firstElementChild;this.buttonFieldPropertyChange(n,e,a,s,t,i)}else this.buttonFieldPropertyChange(n,e,null,null,t,i)}this.pdfViewer.formDesignerCollections[this.getFormFieldIndex(n.id)]=n,this.pdfViewer.selectedItems&&this.pdfViewer.selectedItems.formFields&&this.pdfViewer.selectedItems.formFields.length>0&&this.pdfViewer.renderSelector(n.pageNumber-1);var l=u(this.getFormFieldByID(e.id));this.changedProperties.length>0&&!t&&!i&&this.pdfViewer.annotation.addAction(n.pageNumber,0,n,"UpdateFormField",null,o,l),this.changedProperties.length>0&&this.pdfViewer.fireFormFieldPropertyChanged("FormFieldPropertyChanged",o,l,this.changedProperties)}},e.prototype.getRadioButtonItemObject=function(e){var t=[],i=[];e.forEach((function(e){"RadioButton"===e.type&&-1===t.indexOf(e.name)&&(t.push(e.name),i.push(e))}));for(var n=function(t){e=e.filter((function(e){if("RadioButton"===e.type&&e.name===t.name){var i=e;return t.radiobuttonItem.push({backgroundColor:i.backgroundColor,borderColor:i.borderColor,bounds:i.bounds,id:i.id,isReadOnly:i.isReadOnly,isRequired:i.isRequired,isSelected:i.isSelected,name:i.name,pageNumber:i.pageNumber,thickness:i.thickness,type:i.type,value:i.value,visibility:i.visibility,zoomValue:i.zoomValue,customData:i.customData,isUnisonSelected:i.isUnisonSelected}),t.id===e.id}return!0}))},o=0,s=i;o<s.length;o++){n(s[o])}return e},e.prototype.buttonFieldPropertyChange=function(e,t,i,n,o,s){var a=this.pdfViewerBase.getZoomFactor(),r=!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(i);this.commonFormFieldPropertyChange(e,t,i,n,o,s),sf.base.isNullOrUndefined(t.imageSource)||e.imageSource!==t.imageSource&&(this.changedProperties.push("Value"),e.imageSource=t.imageSource,r&&(e.imageSource&&e.imageSource.indexOf("base64")>-1?(i.src=t.imageSource,i.type="image"):(e.imageSource=null,i.type="button"))),sf.base.isNullOrUndefined(t.text)||e.text!==t.text&&(this.changedProperties.push("Text"),e.text=t.text,r&&(i.value=t.text)),t.fontSize&&e.fontSize!==t.fontSize&&(this.changedProperties.push("FontSize"),e.fontSize=t.fontSize,r&&(i.style.fontSize=t.fontSize*a+"px","Button"===e.type&&(i.style.lineHeight=i.style.fontSize))),null!==t.color&&(t.color=t.color||"black",e.color!==t.color&&(this.changedProperties.push("Color"),e.color=t.color,r&&(i.style.color=t.color))),t.alignment&&e.alignment!==t.alignment&&(this.changedProperties.push("TextAlignment"),e.alignment=t.alignment,r&&(i.style.textAlign=t.alignment?t.alignment.toLowerCase():"left")),null!==t.fontFamily&&(t.fontFamily=t.fontFamily||"Helvetica",e.fontFamily!==t.fontFamily&&(this.changedProperties.push("FontFamily"),e.fontFamily=t.fontFamily,r&&(i.style.fontFamily=t.fontFamily?this.getFontFamily(t.fontFamily):"Helvetica"))),sf.base.isNullOrUndefined(t.fontStyle)||e.fontStyle!==t.fontStyle&&(this.changedProperties.push("FontStyle"),e.fontStyle=t.fontStyle,r&&this.setFontStyle(t.fontStyle,i))},e.prototype.textboxFieldPropertyChange=function(e,t,i,n,o,s){var a=this,r=this.pdfViewerBase.getZoomFactor(),l=!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(i);(this.commonFormFieldPropertyChange(e,t,i,n,o,s),sf.base.isNullOrUndefined(t.isMultiline))||(this.updateMultilineWithNameMatches(t,e),e.isMultiline!==t.isMultiline&&(this.changedProperties.push("IsMultiline"),l&&this.pdfViewer.formDesignerCollections.filter((function(t){return e.name===t.name})).forEach((function(e){e.isMultiline=t.isMultiline;var n=document.getElementById(e.id+"_content_html_element");n&&n.firstElementChild&&n.firstElementChild.firstElementChild&&(i=t.isMultiline?a.addMultilineTextbox(e,!0,n):a.addMultilineTextbox(e,!1,n))}))));if("Textbox"!==t.type&&"Password"!==t.type||null===t.value||(t.value=t.value||"",this.updateValueWithNameMatches(t,e),e.value!==t.value&&(this.changedProperties.push("Value"),e.value=t.value,l&&(i.value=t.value),this.updateTextboxValueForSameNameFields(e.id,e.name,t.value))),t.fontSize&&e.fontSize!==t.fontSize&&(this.changedProperties.push("FontSize"),e.fontSize=t.fontSize,l&&(i.style.fontSize=t.fontSize*r+"px")),null!==t.color&&(t.color=t.color||"black",e.color!==t.color&&(this.changedProperties.push("Color"),e.color=t.color,l&&(i.style.color=t.color))),null!==t.fontFamily&&(t.fontFamily=t.fontFamily||"Helvetica",e.fontFamily!==t.fontFamily&&(this.changedProperties.push("FontFamily"),e.fontFamily=t.fontFamily,l&&(i.style.fontFamily=t.fontFamily?this.getFontFamily(t.fontFamily):"Helvetica"))),sf.base.isNullOrUndefined(t.fontStyle)||e.fontStyle!==t.fontStyle&&(this.changedProperties.push("FontStyle"),e.fontStyle=t.fontStyle,l&&this.setFontStyle(t.fontStyle,i,t.type)),t.alignment&&e.alignment!==t.alignment&&(this.changedProperties.push("TextAlignment"),e.alignment=t.alignment,l&&(i.style.textAlign=t.alignment?t.alignment.toLowerCase():"left")),!sf.base.isNullOrUndefined(t.maxLength)&&e.maxLength!==t.maxLength&&(this.changedProperties.push("MaxLength"),e.maxLength=t.maxLength,l)){var d=0===t.maxLength?524288:t.maxLength;i.maxLength=d}if("DropDown"===e.type||"ListBox"===e.type){var h=this.isOptionsChanged(e.options,t.options);if(-1===this.changedProperties.indexOf("Name")||h||(this.updateOptionsWithNameMatches(t,e),h=this.isOptionsChanged(e.options,t.options)),h){var p=void 0;h&&(t.options?(e.options=t.options,e.fontStyle=t.fontStyle,this.changedProperties.push("Items")):(e.options=[],e.fontStyle=t.fontStyle,this.changedProperties.push("Items"))),"DropDown"===e.type&&e.selectedIndex!==t.selectedIndex?(e.selectedIndex=t.selectedIndex,p=!0,this.changedProperties.push("SelectedIndex")):"ListBox"===e.type&&this.isSelectedIndexesChanged(e.selectedIndexes,t.selectedIndexes)&&(e.selectedIndexes=t.selectedIndexes,p=!0,this.changedProperties.push("SelectedIndex")),h&&this.updateDropDownListBoxOptions(e,i),(h||p)&&this.updateDropDownListBoxSelectedIndex(e)}}if(!sf.base.isNullOrUndefined(t.insertSpaces)&&e.insertSpaces!==t.insertSpaces&&(this.changedProperties.push("InsertSpaces"),e.insertSpaces=t.insertSpaces,l))if(t.insertSpaces){var c=t.bounds.width*r/t.maxLength-t.fontSize*r/2-.6*r;i.style.letterSpacing=c+"px",i.style.fontFamily="monospace",i.style.paddingLeft=c/2+"px"}else i.style.fontFamily=t.fontFamily?this.getFontFamily(t.fontFamily):"Helvetica",i.style.letterSpacing="",i.style.paddingLeft=""},e.prototype.isOptionsChanged=function(e,t){return(e&&e.length)!==(t&&t.length)||e.some((function(e,i){return e.itemValue!==t[i].itemValue||e.itemName!==t[i].itemName}))},e.prototype.isSelectedIndexesChanged=function(e,t){return e.length!==t.length||e.some((function(e,i){return e!==t[i]}))},e.prototype.updateDropDownListBoxOptions=function(e,t){for(var i=0;i<this.pdfViewer.formDesignerCollections.length;i++){var n=this.pdfViewer.formDesignerCollections[i];if(e.name===n.name&&e.type===n.type){var o=document.getElementById(this.pdfViewer.formDesignerCollections[i].id+"_content_html_element");if(o&&o.firstElementChild&&o.firstElementChild.firstElementChild){for(var s=o.firstElementChild.firstElementChild;s.firstChild;)s.removeChild(s.firstChild);n.id!==e.id&&(n.options=[]);for(var a=0;a<e.options.length;a++){var r=document.createElement("option");r.className="e-pv-formfield-dropdown",r.value=e.options[a].itemValue,r.text=e.options[a].itemName,"ListBox"===n.type&&n.fontStyle&Ft.Bold&&(r.style.fontWeight="bold"),s.appendChild(r),n.options[a]=e.options[a]}}}}},e.prototype.updateDropDownListBoxSelectedIndex=function(e){var t=this;this.pdfViewer.formDesignerCollections.forEach((function(i){if(i.name===e.name&&i.type===e.type){var n=document.getElementById(i.id+"_content_html_element");if(n&&n.firstElementChild&&n.firstElementChild.firstElementChild){var o=n.firstElementChild.firstElementChild;"DropDown"===i.type?t.updateDropdownSelection(e,i,o):"ListBox"===i.type&&t.updateListBoxSelection(e,i,o)}}}))},e.prototype.updateDropdownSelection=function(e,t,i){sf.base.isNullOrUndefined(e.selectedIndex)||(t.selectedIndex=e.selectedIndex,t.selectedIndex>=t.options.length?(t.selectedIndex=0,i.selectedIndex=0):i.selectedIndex=t.selectedIndex)},e.prototype.updateListBoxSelection=function(e,t,i){sf.base.isNullOrUndefined(e.selectedIndexes)||(t.selectedIndexes=Pu(e.selectedIndexes),Array.from(i.options).forEach((function(e){return e.selected=!1})),t.selectedIndexes=t.selectedIndexes.map((function(e){return e>=t.options.length?0:e})),0===t.options.length&&(t.selectedIndexes=[]),t.selectedIndexes.forEach((function(e){-1!==e&&i.options[e]&&(i.options[e].selected=!0)})),0===t.selectedIndexes.length&&i.options.length>0&&(i.options[0].selected=!0,t.selectedIndexes=[0]))},e.prototype.SignatureInitialFieldPropertyChange=function(e,t,i,n,o,s){var a=this,r=!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(i);if(this.commonFormFieldPropertyChange(e,t,i,n,o,s),t.fontFamily&&(e.fontFamily!==t.fontFamily&&this.changedProperties.push("FontFamily"),e.fontFamily=t.fontFamily,r&&(i.style.fontFamily=t.fontFamily?this.getFontFamily(t.fontFamily):"Helvetica")),e.value!==t.value||o&&(sf.base.isNullOrUndefined(t.value)||""===t.value)){if(this.changedProperties.push("Value"),t.value?e.value=t.value:e.value="",r&&!sf.base.isNullOrUndefined(i)){e.value&&(e.signatureType=(e.value&&e.value.indexOf("base64"))>-1?"Image":e.value&&e.value.startsWith("M")&&e.value.split(",")[1].split(" ")[1].startsWith("L")?"Path":"Type"),e.formFieldAnnotationType=e.isInitialField?"InitialField":"SignatureField";var l=this.updateSignatureAnnotation(e);if(u=document.getElementById(e.id)){if(l){this.pdfViewer.remove(l);for(var d=this.filterSignatureFieldsByFieldName(this.pdfViewer.formDesignerCollections,e.name),h=0;h<d.length;h++){var p=d[h];if(p.id!==e.id){var c=this.updateSignatureAnnotation(p);document.getElementById(p.id)&&c&&this.pdfViewer.remove(c)}}}e.value&&o&&!e.signatureBound&&(e.signatureBound=t.signatureBound),this.pdfViewer.formFieldsModule.drawSignature(e.signatureType,e.value,u,null,o)}}}else if((sf.base.isNullOrUndefined(t.value)||""===t.value)&&!o){var u;if((d=this.filterSignatureFieldsByFieldName(this.pdfViewer.formDesignerCollections,e.name)).forEach((function(t){if(t.id!==e.id&&t.value){e.signatureType=t.signatureType,e.value=t.value,e.formFieldAnnotationType="SignatureField";var i=a.updateSignatureAnnotation(t);document.getElementById(t.id)&&i&&a.pdfViewer.remove(i)}})),r&&!sf.base.isNullOrUndefined(i)&&e.value)(u=document.getElementById(e.id))&&this.pdfViewer.formFieldsModule.drawSignature(e.signatureType,e.value,u,null,o)}},e.prototype.updateSignatureAnnotation=function(e){var t=this.pdfViewer.annotations.find((function(t){return t.id===e.id+"_content"}));if(t){var i=this.pdfViewer.nameTable[t.id.split("_")[0]];null==i||"SignatureField"!==i.formFieldAnnotationType&&"InitialField"!==i.formFieldAnnotationType&&"SignatureField"!==i.annotName&&"InitialField"!==i.annotName||i.wrapper.children.splice(i.wrapper.children.indexOf(t.wrapper.children[0]),1)}return t},e.prototype.filterSignatureFieldsByFieldName=function(e,t){return e.filter((function(e){return e.name===t}))},e.prototype.radioCheckBoxFieldPropertyChange=function(e,t,i,n,o,s,a){var r=!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(i);if(this.commonFormFieldPropertyChange(e,t,i,n,o,s),t.value&&(e.value!==t.value&&this.changedProperties.push("Value"),e.value=t.value,r&&!sf.base.isNullOrUndefined(i)&&(i.value=t.value,"RadioButton"===e.type&&(i.id=e.id+"_"+e.name+"_"+e.value))),"RadioButton"===e.type){if(!sf.base.isNullOrUndefined(t.isUnisonSelected)&&e.isUnisonSelected!==t.isUnisonSelected){this.changedProperties.push("IsUnisonSelected"),e.isUnisonSelected=t.isUnisonSelected;var l=this.pdfViewer.formDesignerCollections.find((function(t){return"RadioButton"===t.type&&t.name===e.name&&t.id!==e.id}));l&&(l.isUnisonSelected=e.isUnisonSelected)}if(!sf.base.isNullOrUndefined(t.isSelected)){if(e.isSelected!==t.isSelected){this.changedProperties.push("IsSelected");for(var d=0,h=this.pdfViewer.formDesignerCollections;d<h.length;d++){var p=h[d];if("RadioButton"===p.type&&p.name===e.name&&p.id!==e.id&&p.isSelected){Object.assign(a,u(p));break}}}e.isSelected=t.isSelected,r&&!sf.base.isNullOrUndefined(i)&&(i.checked=t.isSelected,this.handleRadioButtonStateById(i.id,!0))}}else sf.base.isNullOrUndefined(t.isChecked)||(e.isChecked!==t.isChecked&&this.changedProperties.push("IsChecked"),e.isChecked=t.isChecked,r&&!sf.base.isNullOrUndefined(i)&&this.handleCheckBoxStateById(i.id))},e.prototype.addMultilineTextbox=function(e,t,i){var n,o=i.firstElementChild.firstElementChild.id,s=i.firstElementChild.firstElementChild.getAttribute("style"),a=i.firstElementChild.firstElementChild.getAttribute("tabindex"),r=i.firstElementChild.firstElementChild.disabled;document.getElementById(o).remove(),t?((n=this.createTextAreaElement(o)).setAttribute("style",s),n.style.resize="none"):(n=this.createTextboxElement(o,"Textbox")).setAttribute("style",s),n.disabled=r;var l=0===e.maxLength?524288:e.maxLength;return this.setAttributeHtml(n,{name:e.name,tabindex:a,"aria-label":this.pdfViewer.element.id+"formfilldesigner",maxlength:l.toString()}),n.value=e.value,i.firstElementChild.appendChild(n),n},e.prototype.commonFormFieldPropertyChange=function(e,t,i,n,o,s){var a=this,r=!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(i),l=this.pdfViewerBase.getZoomFactor(),d=this.pdfViewer.formDesignerInteraction;if(t.name&&(this.checkSameNameField(t)&&e.name!==t.name&&(this.changedProperties.push("Name"),e.name=t.name,r))){if(this.pdfViewer.formDesignerInteraction){var h=document.getElementById(e.id+"_designer_name");h.innerHTML=e.name,h.style.fontSize=10*l+"px"}"RadioButton"!==e.type?i.name=t.name:(i.id=e.id+"_"+e.name+"_"+e.value,this.pdfViewer.formDesignerCollections.length>0&&this.pdfViewer.formDesignerCollections.forEach((function(t){t.name===e.name&&t.id!==e.id&&t.isUnisonSelected&&(e.isUnisonSelected=!0)})))}if(sf.base.isNullOrUndefined(t.thickness)||e.thickness===t.thickness||(this.changedProperties.push("Thickness"),e.thickness=t.thickness,r&&!e.isRequired&&(i.style.borderWidth=t.thickness.toString()+"px","RadioButton"===e.type&&i.parentElement&&(i.parentElement.style.boxShadow=this.getBorderColor(e.borderColor)+" 0px 0px 0px "+t.thickness+"px"))),null!==t.borderColor){t.borderColor=t.borderColor||"#303030";var p=this.colorNametoHashValue(t.borderColor);e.borderColor!==p&&(this.changedProperties.push("BorderColor"),e.borderColor=this.getBorderColor(p),r&&!e.isRequired&&(i.style.borderColor=this.getBorderColor(p),"RadioButton"===e.type&&(i.parentElement.style.boxShadow=this.getBorderColor(p)+" 0px 0px 0px "+e.thickness+"px")))}if(null!==t.backgroundColor){t.backgroundColor=t.backgroundColor||"#daeaf7ff";var c=this.colorNametoHashValue(t.backgroundColor);e.backgroundColor!==c&&(this.changedProperties.push("BackgroundColor"),e.backgroundColor=this.getBackgroundColor(c),r&&(i.style.background=this.getBackgroundColor(c),"RadioButton"===e.type&&(i.parentElement.style.backgroundColor=this.getBackgroundColor(c)),"CheckBox"===e.type&&(i.style.backgroundColor=this.getBackgroundColor(c)),"InitialField"!==e.type&&"SignatureField"!==e.type||(i.style.background="transparent",i.parentElement.style.backgroundColor=this.getSignatureBackground(c),e.backgroundColor=this.getSignatureBackground(c))))}if(t.bounds&&this.boundsChanged(e.bounds,t.bounds)){s||this.changedProperties.push("Bounds"),e.bounds=t.bounds;var f=this.pdfViewer.nameTable[e.id.split("_")[0]];if(!sf.base.isNullOrUndefined(f)){var m=u(e.bounds);s||(o?m=this.updateFormFieldBoundsForNameTable(m,e.rotateAngle):(m=this.updateFormFieldBoundsForNameTable(m,e.rotateAngle),e.bounds=u(m))),m={x:m.x+.5*m.width,y:m.y+.5*m.height,width:m.width,height:m.height},f.bounds=m,f.wrapper.bounds=new sf.drawings.Rect(m.x,m.y,m.width,m.height),this.pdfViewer.drawing.nodePropertyChange(f,{bounds:{x:f.wrapper.bounds.x,y:f.wrapper.bounds.y,width:f.wrapper.bounds.width,height:f.wrapper.bounds.height}})}r&&(this.updateFormFieldBoundsValue(e,i,n,o),"SignatureField"!==e.type&&"InitialField"!==e.type||this.updateSignatureInitialIndicator(e,t,i))}sf.base.isNullOrUndefined(t.isRequired)||(this.updateRequiredWithNameMatches(t,e),e.isRequired!==t.isRequired&&(this.changedProperties.push("IsRequired"),r&&this.pdfViewer.formDesignerCollections.filter((function(t){return e.name===t.name})).forEach((function(e){e.isRequired=t.isRequired,a.updateFieldElementRequirement(e,t)}))));if(t.visibility&&e.visibility!==t.visibility&&("Hidden"!==t.visibility&&"HiddenPrintable"!==t.visibility||d||this.pdfViewer.clearSelection(e.pageNumber-1),this.changedProperties.push("Visibility"),e.visibility=t.visibility,r)){i.style.visibility=this.checkVisibility(t,!1),"RadioButton"!==e.type&&"SignatureField"!==e.type&&"InitialField"!==e.type||(i.parentElement.style.visibility=this.checkVisibility(t,!1));var g=this.pdfViewer.nameTable[t.id];g&&(g.visibility=t.visibility)}sf.base.isNullOrUndefined(t.isReadOnly)||(this.updateReadOnlyWithNameMatches(t,e),e.isReadOnly!==t.isReadOnly&&(t.isReadOnly&&!d&&this.pdfViewer.clearSelection(e.pageNumber-1),this.changedProperties.push("IsReadOnly"),r&&this.pdfViewer.formDesignerCollections.filter((function(t){return e.name===t.name})).forEach((function(e){e.isReadOnly=t.isReadOnly,a.updateFieldElementReadOnly(e,t)}))));(null!==t.tooltip||o)&&(t.tooltip=t.tooltip||"",this.updateTooltipWithNameMatches(t,e),e.tooltip!==t.tooltip&&(this.changedProperties.push("Tooltip"),e.tooltip=t.tooltip,r&&this.manageTooltip(e))),t.customData&&JSON.stringify(e.customData)!==JSON.stringify(t.customData)&&(this.changedProperties.push("CustomData"),e.customData=t.customData)},e.prototype.updateRequiredWithNameMatches=function(e,t){if(-1!==this.changedProperties.indexOf("Name")&&t.isRequired===e.isRequired){var i=this.pdfViewer.formDesignerCollections.find((function(t){return e.name===t.name&&e.id!==t.id&&e.isRequired!==t.isRequired}));i&&(e.isRequired=i.isRequired)}},e.prototype.updateReadOnlyWithNameMatches=function(e,t){if(-1!==this.changedProperties.indexOf("Name")&&t.isReadOnly===e.isReadOnly){var i=this.pdfViewer.formDesignerCollections.find((function(t){return e.name===t.name&&e.id!==t.id&&e.isReadOnly!==t.isReadOnly}));i&&(e.isReadOnly=i.isReadOnly)}},e.prototype.updateTooltipWithNameMatches=function(e,t){if(-1!==this.changedProperties.indexOf("Name")&&t.tooltip===e.tooltip){var i=this.pdfViewer.formDesignerCollections.find((function(t){return e.name===t.name&&e.id!==t.id&&e.tooltip!==t.tooltip}));i&&(e.tooltip=i.tooltip)}},e.prototype.updateMultilineWithNameMatches=function(e,t){if(-1!==this.changedProperties.indexOf("Name")&&t.isMultiline===e.isMultiline){var i=this.pdfViewer.formDesignerCollections.find((function(t){return e.name===t.name&&e.id!==t.id&&e.isMultiline!==t.isMultiline}));i&&(e.isMultiline=i.isMultiline)}},e.prototype.updateValueWithNameMatches=function(e,t){if(-1!==this.changedProperties.indexOf("Name")&&t.value===e.value){var i=this.pdfViewer.formDesignerCollections.find((function(t){return e.name===t.name&&e.id!==t.id&&e.value!==t.value}));i&&(e.value=i.value)}},e.prototype.updateOptionsWithNameMatches=function(e,t){var i=this,n=this.pdfViewer.formDesignerCollections.find((function(t){return e.name===t.name&&e.id!==t.id&&e.type===t.type&&i.isOptionsChanged(t.options,e.options)}));n&&(e.options=n.options,"ListBox"===e.type?e.selectedIndexes=n.selectedIndexes:e.selectedIndex=n.selectedIndex)},e.prototype.updateFieldElementRequirement=function(e,t){var i=document.getElementById(e.id+"_content_html_element");if(i&&i.firstElementChild&&i.firstElementChild.firstElementChild){var n=this.getInputElement(e,i);n&&this.setRequiredState(e,t,n)}},e.prototype.updateFieldElementReadOnly=function(e,t){var i=document.getElementById(e.id+"_content_html_element");if(i&&i.firstElementChild&&i.firstElementChild.firstElementChild){var n=this.getInputElement(e,i);n&&this.setReadOnlyState(e,t,n)}},e.prototype.getInputElement=function(e,t){var i="RadioButton"===e.type||"CheckBox"===e.type,n=t.firstElementChild.firstElementChild;return i?n.firstElementChild:n},e.prototype.updateSignatureInitialIndicator=function(e,t,i){i.getBoundingClientRect();var n=this.pdfViewerBase.getZoomFactor(),o=i.nextElementSibling;o.style.maxWidth=n*t.bounds.width+"px",o.style.maxHeight=n*t.bounds.height+"px"},e.prototype.setRequiredState=function(e,t,i){e.isRequired?(i.required=!0,i.style.border="1px solid red","RadioButton"===e.type&&(i.parentElement.style.boxShadow="red 0px 0px 0px 1px")):(i.required=!1,i.style.borderColor=this.getBorderColor(e.borderColor),i.style.borderWidth=e.thickness.toString()+"px","RadioButton"===e.type&&(i.parentElement.style.boxShadow=this.getBorderColor(e.borderColor)+" 0px 0px 0px "+e.thickness+"px"))},e.prototype.setReadOnlyState=function(e,t,i){var n="SignatureField"===e.type||"InitialField"===e.type?"#daeaf760":"#daeaf7ff";t.isReadOnly?(i.disabled="ListBox"!==t.type,i.style.cursor="default",i.style.backgroundColor=e.backgroundColor!==n?"SignatureField"===e.type||"InitialField"===e.type?e.backgroundColor+"80":e.backgroundColor:"transparent",this.pdfViewer.formDesignerInteraction||(e.isReadOnly=t.isReadOnly,i.style.pointerEvents="none"),"RadioButton"!==e.type&&"SignatureField"!==e.type&&"InitialField"!==e.type||(this.pdfViewer.formDesignerInteraction||(i.parentElement.style.pointerEvents="none"),i.parentElement.style.backgroundColor=e.backgroundColor!==n?e.backgroundColor:"transparent")):(i.disabled=!1,this.pdfViewer.formDesignerInteraction||(i.style.pointerEvents="all"),i.style.cursor="RadioButton"===e.type||"CheckBox"===e.type?"pointer":"text",i.style.backgroundColor="SignatureField"===e.type||"InitialField"===e.type?e.backgroundColor+"80":e.backgroundColor,"RadioButton"===e.type&&(this.pdfViewer.formDesignerInteraction||(i.parentElement.style.pointerEvents="all"),i.parentElement.style.backgroundColor=e.backgroundColor))},e.prototype.updateFormFieldBoundsValue=function(e,t,i,n){var o=e.bounds,s=this.updateFormFieldBounds(o,e.rotateAngle,n);e.bounds=s.bounds,e.rotateAngle=s.rotateAngle;var a=this.pdfViewerBase.getZoomFactor();"RadioButton"===e.type||"CheckBox"===e.type?this.changeRadioCheckBoxBounds(e,t,i,a):"SignatureField"===e.type||"InitialField"===e.type?this.changeSignInitialBounds(e,t,i,a):this.setAttributeHtml(i,{style:"height:"+e.bounds.height*a+"px; width:"+e.bounds.width*a+"px;left:"+e.bounds.x*a+"px; top:"+e.bounds.y*a+"px;position:absolute;transform:rotate("+e.rotateAngle+"deg);pointer-events:"+(this.pdfViewer.formDesignerInteraction?"none":"all")+";visibility:"+i.style.visibility+";opacity:"+i.style.opacity+";"})},e.prototype.boundsChanged=function(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height},e.prototype.colorNametoHashValue=function(e){var t=e;return t.match(/#([a-z0-9]+)/gi)||t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/)||(t=this.pdfViewer.nameToHash(t)),""!==t?t:e},e.prototype.getFormFieldByID=function(e){var t=null,i=this.getFormFieldIndex(e);return-1!==i&&(t=this.pdfViewer.formDesignerCollections[parseInt(i.toString(),10)]),t},e.prototype.getFormFieldIndex=function(e){var t=-1;return!sf.base.isNullOrUndefined(this.pdfViewer.formDesignerCollections)&&this.pdfViewer.formDesignerCollections.length>0&&(t=parseInt(this.pdfViewer.formDesignerCollections.findIndex((function(t){return t.id===e})).toString(),10)),t},e.prototype.setInteractionMode=function(e,t){void 0===t&&(t=!1),this.enableDisableFormFieldsInteraction(e,t),e?this.pdfViewerBase.disableTextSelectionMode():this.pdfViewer.textSelectionModule&&(this.pdfViewer.textSelectionModule.enableTextSelectionMode(),this.pdfViewer.annotationModule&&(this.pdfViewer.annotationModule.isFormFieldShape=!1))},e.prototype.enableDisableFormFieldsInteraction=function(e,t){var i=this.pdfViewer.formDesignerCollections;if(i&&i.length>0)for(var n=0;n<i.length;n++){var o=i[parseInt(n.toString(),10)],s=document.getElementById(o.id+"_content_html_element"),a=document.getElementById(o.id+"_designer_name");if(s){this.pdfViewer.formDesignerInteraction=e,s.style.pointerEvents=e?"none":"all",a.innerHTML=e?o.name:"";var r=this.pdfViewerBase.getZoomFactor();switch(a.style.fontSize=sf.base.Browser.isDevice?this.defaultFontSize*r+"px":this.defaultFontSize+"px",a.style.position=e?"absolute":"initial",o.type){case"Textbox":case"Password":case"DropDown":case"ListBox":case"SignatureField":case"InitialField":case"Button":case"RadioButton":document.getElementById(o.id+"_content_html_element").firstElementChild.firstElementChild.style.pointerEvents=e?"none":o.isReadOnly?o.isMultiline?"auto":"none":"auto";break;case"CheckBox":document.getElementById(o.id+"_content_html_element").firstElementChild.firstElementChild.lastElementChild.style.pointerEvents=e?"none":o.isReadOnly?o.isMultiline?"auto":"none":"auto"}e&&!t||(this.pdfViewer.clearSelection(o.pageNumber-1),this.enableDeleteIcon())}}},e.prototype.enableDeleteIcon=function(){if(this.pdfViewer.formDesignerInteraction){var e=this.pdfViewer.selectedItems,t=this.pdfViewer.toolbar,i=this.pdfViewer.viewerBase.blazorUIAdaptor,n="true"===this.pdfViewerBase.getElement("_formdesigner_deleteContainer").childNodes[0].getAttribute("aria-disabled");e&&e.formFields&&e.formFields.length>0?sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i)||!n||i.enableDeleteOptionForFormField(!0):sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i)||n||i.enableDeleteOptionForFormField(!1)}},e.prototype.formDesignerUndoAction=function(){var e,t=null,i=this.pdfViewer.historyManager;i.canUndo&&(t=i.currentEntry,(e=i.currentEntry.previous)?(i.currentEntry=e,i.canRedo||(i.canRedo=!0)):(i.canRedo=!0,i.canUndo=!1));var n=t;n&&this.undoEntry(n)},e.prototype.formDesignerRedoAction=function(){var e,t=null,i=this.pdfViewer.historyManager;i.canRedo&&((e=i.currentEntry.previous||i.canUndo?i.currentEntry.next:i.currentEntry)&&(i.currentEntry=e,i.canUndo||(i.canUndo=!0),e.next||(i.canRedo=!1,i.canUndo=!0)),t=i.currentEntry);var n=t;n&&this.redoEntry(n)},e.prototype.undoEntry=function(e){var t=e.undoObject,i="AddProgrammticalFormFields"===e.type||"DeleteProgrammticalFormFields"===e.type;if(t){switch(e.type){case"Addition":this.deleteFormField(t.id,!0);break;case"DeleteFormField":this.addFormField(t.type,t,!0);break;case"AddProgrammticalFormFields":this.deleteFormFields(t,!0);break;case"DeleteProgrammticalFormFields":this.addFormFields(t,!0);break;default:this.updateFormField(t,!0)}i||(e.undoObject=u(t))}},e.prototype.redoEntry=function(e){var t=e.redoObject,i="AddProgrammticalFormFields"===e.type||"DeleteProgrammticalFormFields"===e.type;if(t){switch(e.type){case"Addition":this.addFormField(t.type,t);break;case"DeleteFormField":this.deleteFormField(t.id,!0);break;case"AddProgrammticalFormFields":this.addFormFields(t,!0);break;case"DeleteProgrammticalFormFields":this.deleteFormFields(t,!0);break;default:this.updateFormField(t,!0)}i||(e.redoObject=u(t))}},e.prototype.selectFormField=function(e){var t=this.getFormFieldByID(e);sf.base.isNullOrUndefined(t)||(sf.base.isNullOrUndefined(this.pdfViewer.selectedItems)||this.pdfViewer.clearSelectedItems(this.pdfViewer.selectedItems,t.pageNumber-1),this.isProgrammaticSelection=!0,this.pdfViewer.select([t.id]),this.enableDeleteIcon(),this.isProgrammaticSelection=!1)},e.prototype.deleteFormField=function(e,t){void 0===t&&(t=!1);var i=this.pdfViewer.selectedItems,n=this.pdfViewer,o=n.viewerBase;sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.formFields)||0===i.formFields.length||(e=sf.base.isNullOrUndefined(e)?i.formFields[0].id:e);var s=this.getFormFieldByID(e);this.deleteFormFieldById(e),t||n.annotation.addAction(s.pageNumber,0,s,"DeleteFormField",null,s,s),sf.base.isNullOrUndefined(n.toolbar)||sf.base.isNullOrUndefined(n.formDesignerModule)||sf.base.isNullOrUndefined(o.blazorUIAdaptor)||(o.blazorUIAdaptor.enableDeleteOptionForFormField(!1),o.focusViewerContainer())},e.prototype.deleteFormFields=function(e,t,i){var n=this;void 0===t&&(t=!1),void 0===i&&(i=!1);var o=[],s=[];if((e&&e.length>0?e:this.pdfViewer.formDesignerCollections?this.pdfViewer.formDesignerCollections.map((function(e){return e.id})):[]).forEach((function(e){var t=n.getFormFieldByID(e);t&&(n.deleteFormFieldById(e,i),o.push(e),s.push(t))})),s.length>0&&!t&&!i){var a=JSON.stringify(s);this.pdfViewer.annotation.addAction(1,0,a,"DeleteProgrammticalFormFields",null,a,o)}},e.prototype.deleteFormFieldById=function(e,t){void 0===t&&(t=!1);var i=this.pdfViewer.formDesignerCollections;if(!sf.base.isNullOrUndefined(e)){var n=this.getFormFieldIndex(e);if(-1!==n){var o=i[n],s=document.getElementById("form_field_"+o.id+"_content_html_element");sf.base.isNullOrUndefined(s)||s.remove(),t||this.pdfViewer.fireFormFieldEvent("FormFieldDeleted",o,o.pageNumber),i.splice(n,1);var a=this.pdfViewer.nameTable[e];if(!sf.base.isNullOrUndefined(a))if(this.pdfViewer.remove(a),delete this.pdfViewer.nameTable[e],"SignatureField"===o.type||"InitialField"===o.type)this.pdfViewer.nameTable[e+"_content"]&&delete this.pdfViewer.nameTable[e+"_content"];this.pdfViewer.clearSelection(o.pageNumber-1)}}this.pdfViewer.formDesignerCollections.length>0?this.pdfViewerBase.enableFormFieldButton(!0):this.pdfViewerBase.enableFormFieldButton(!1)},e.prototype.pdfFormFieldToFormDesignerCollections=function(e){if(!sf.base.isNullOrUndefined(e)&&e.length>0){for(var t=0;t<e.length;t++){var i=e[t],n=(r=i.Name)?r[0].toUpperCase()+r.slice(1):r,o=this.pdfFormFieldToFormDesignerField(i,n);if(sf.base.isNullOrUndefined(this.pdfViewer.formDesignerCollections)&&(this.pdfViewer.formDesignerCollections=[]),!sf.base.isNullOrUndefined(o)){this.addFormFieldValuesInCollection(o);var s=i.Rotation+i.RotationAngle;s<0&&(s+=360),s>360&&(s%=360);var a=this.updateFormFieldBounds(o.bounds,s);o.bounds=a.bounds,o.rotateAngle=a.rotateAngle}sf.base.isNullOrUndefined(this.pdfViewer.formDesignerSignatureCollections)&&(this.pdfViewer.formDesignerSignatureCollections=[]),"Ink"!==n&&"SignatureText"!==n&&"SignatureImage"!==n||this.pdfViewer.formDesignerSignatureCollections.push(i)}return this.pdfViewer.formDesignerCollections}var r;return this.pdfViewer.formDesignerCollections},e.prototype.changeSignInitialBounds=function(e,t,i,n){var o=this.pdfViewer.nameTable[e.id.split("_")[0]],s=this.pdfViewer.nameTable[e.id+"_content"],a=this.getFieldRotateAngle(o.rotateAngle?o.rotateAngle:0),r=e;s&&(r.signatureBound.x=s.wrapper.bounds.x,r.signatureBound.y=s.wrapper.bounds.y,r.signatureBound.width=s.wrapper.bounds.width,r.signatureBound.height=s.wrapper.bounds.height),this.setAttributeHtml(i,{style:"height:"+o.bounds.height*n+"px; width:"+o.bounds.width*n+"px;left:"+o.bounds.x*n+"px; top:"+o.bounds.y*n+"px;position:absolute;transform:rotate("+a+"deg);pointer-events:"+(this.pdfViewer.enableFormDesigner?"none":"all")+";visibility:"+i.style.visibility+";opacity:"+i.style.opacity+";"})},e.prototype.changeRadioCheckBoxBounds=function(e,t,i,n){this.setAttributeHtml(i,{style:"height:"+e.bounds.height*n+"px; width:"+e.bounds.width*n+"px;left:"+e.bounds.x*n+"px; top:"+e.bounds.y*n+"px;position:absolute;transform:rotate("+(e.rotateAngle?e.rotateAngle:"0")+"deg);"});var o=this.getCheckboxRadioButtonBounds(e),s=t.parentElement;if("CheckBox"===e.type){var a=t.firstElementChild;this.setAttributeHtml(s,{style:"height:"+e.bounds.height*n+"px; width:"+e.bounds.width*n+"px; cursor: pointer"}),this.setAttributeHtml(a,{style:"height:"+o.Height/2.5+"px; width:"+o.Width/5+"px;"});var r=parseInt(s.style.width,10),l=parseInt(s.style.height,10),d=r<=l?r:l;a.style.borderWidth=d>20?"3px":d<=15?"1px":"2px"}else{a=s.lastChild;s.style.width=o.Width+"px",s.style.height=o.Height+"px",a.style.width=Math.floor(o.Width/2)+"px",a.style.height=Math.floor(o.Height/2)+"px",n<1&&e.bounds.width<=20&&e.bounds.height<=20?a.style.margin=Math.round(parseInt(s.style.width,10)/3.5)+"px":a.style.margin=Math.round(parseInt(s.style.width,10)/4)+"px",t.style.width=o.Width+"px",t.style.height=o.Height+"px"}},e.prototype.pdfFormFieldToFormDesignerField=function(e,t){var i;switch(e.IsInitialField&&(e.Name="InitialField"),t){case"Textbox":case"Password":i=this.convertPdfFormFieldToTextField(e);break;case"DropDown":i=this.convertPdfFormFieldToDropDownField(e);break;case"ListBox":i=this.convertPdfFormFieldToListBoxField(e);break;case"RadioButton":i=this.convertPdfFormFieldToRadioButtonField(e);break;case"SignatureField":case"InitialField":i=this.convertPdfFormFieldToSignatureField(e);break;case"CheckBox":i=this.convertPdfFormFieldToCheckBoxField(e);break;case"Button":i=this.convertPdfFormFieldToButtonField(e)}return i},e.prototype.convertPdfFormFieldToSignatureField=function(e){var t;return"InitialField"===e.Name?(t=this.setCommonValues(e,"InitialField")).initialIndicatorSettings=this.pdfViewer.initialIndicatorSettings:(t=this.setCommonValues(e,"SignatureField")).signatureIndicatorSettings=this.pdfViewer.signatureIndicatorSettings,t.zoomValue=1,t},e.prototype.convertPdfFormFieldToDropDownField=function(e){var t=this.setCommonValues(e,e.Name);if((t=this.convertPdfFormFieldToDropDownListBoxField(t,e)).options=[],t.selectedIndex=-1,e.Options&&e.Options.length>0){t.options=e.Options;var i=e.Options.findIndex((function(t){return t.itemValue===e.SelectedValue}));t.selectedIndex=-1!==i?e.selectedIndex:-1}return t},e.prototype.convertPdfFormFieldToListBoxField=function(e){var t=this.setCommonValues(e,e.Name);if((t=this.convertPdfFormFieldToDropDownListBoxField(t,e)).options=[],t.selectedIndexes=[],e.Options&&e.Options.length>0){t.options=e.Options;var i=e.Options.findIndex((function(t){return t.itemValue===e.SelectedValue}));t.selectedIndexes=-1!==i?e.SelectedList:[-1]}return t},e.prototype.convertPdfFormFieldToDropDownListBoxField=function(e,t){e.fontFamily=t.Font.Name,e.fontSize=this.pdfViewerBase.ConvertPointToPixel(t.Font.Size);var i=this.getFormFieldFontStlye(t.Font);e.fontStyle=i;var n=t.FontColor,o="rgba("+n.R+","+n.G+","+n.B+",1)";return o=this.pdfViewer.formFieldsModule.rgbaToHex(o),e.color=o,e.alignment=2===t.Alignment?"Right":1===t.Alignment?"Center":"Left",e.zoomValue=1,e},e.prototype.convertPdfFormFieldToRadioButtonField=function(e){var t=this.setCommonValues(e,"RadioButton");return t.value=e.Value,t.radiobuttonItem=[],t.isSelected=e.Selected,t.isUnisonSelected=e.IsUnisonSelected,t.zoomValue=1,t},e.prototype.convertPdfFormFieldToCheckBoxField=function(e){var t=this.setCommonValues(e,"CheckBox");return t.value=e.Value,t.isChecked=e.Selected,t.zoomValue=1,t},e.prototype.convertPdfFormFieldToButtonField=function(e){var t=this.setCommonValues(e,e.Name);t.fontFamily=e.Font.Name,t.fontSize=this.pdfViewerBase.ConvertPointToPixel(e.Font.Size);var i=this.getFormFieldFontStlye(e.Font);t.fontStyle=i,t.text=e.Text,t.imageSource=e.ImageSource;var n=e.FontColor,o="rgba("+n.R+","+n.G+","+n.B+",1)";return o=this.pdfViewer.formFieldsModule.rgbaToHex(o),t.color=o,t.alignment=2===e.Alignment?"Right":1===e.Alignment?"Center":"Left",t.mouseUpDestination=e.MouseUpDestination,t.mouseDownDestination=e.MouseDownDestination,t.mouseEnterDestination=e.MouseEnterDestination,t.mouseLeaveDestination=e.MouseLeaveDestination,t.focusDestination=e.FocusDestination,t.blurDestination=e.BlurDestination,t.zoomActionType=e.zoomActionType,t.targetIndex=e.TargetIndex,t.zoomValue=1,t.actionZoomValue=e.ZoomValue,t.actionBoundX=e.BoundX,t.actionBoundY=e.BoundY,t.actionBoundWidth=e.BoundWidth,t.actionBoundHeight=e.BoundHeight,t.buttonAction=e.ButtonActions,t},e.prototype.convertPdfFormFieldToTextField=function(e){var t=this.setCommonValues(e,e.Name);t.value=e.Text,"Textbox"===e.Name&&(t.insertSpaces=e.InsertSpaces,t.isMultiline=e.Multiline),t.fontFamily=e.Font.Name,t.fontSize=this.pdfViewerBase.ConvertPointToPixel(e.Font.Size),t.maxLength=e.MaxLength;var i=this.getFormFieldFontStlye(e.Font);t.fontStyle=i;var n=e.FontColor,o="rgba("+n.R+","+n.G+","+n.B+",1)";return o=this.pdfViewer.formFieldsModule.rgbaToHex(o),t.color=o,t.alignment=2===e.Alignment?"Right":1===e.Alignment?"Center":"Left",t.zoomValue=1,t},e.prototype.setCommonValues=function(e,t){var i=e.LineBounds,n=this.pdfViewerBase.ConvertPointToPixel(i.X),o=this.pdfViewerBase.ConvertPointToPixel(i.Y),s={left:n,top:o,x:n,y:o,width:this.pdfViewerBase.ConvertPointToPixel(i.Width),height:this.pdfViewerBase.ConvertPointToPixel(i.Height)},a=1===e.Visible?"Hidden":2===e.Visible?"VisibleNotPrintable":3===e.Visible?"HiddenPrintable":"Visible";-90!==e.RotationAngle&&-270!==e.RotationAngle&&-180!==e.RotationAngle||(s=this.calculateBounds(s,e.PageIndex,Math.abs(e.RotationAngle)));var r,l=e.BorderColor;r=e.IsTansparentBorderColor?"rgba("+l.R+","+l.G+","+l.B+",0)":"rgba("+l.R+","+l.G+","+l.B+",1)",r=this.pdfViewer.formFieldsModule.rgbaToHex(r);var d=e.BackColor,h="rgba("+d.R+","+d.G+","+d.B+",1)";return!0===e.IsTransparent&&(h="rgba(0,0,0,0)"),"#000000ff"===(h=this.pdfViewer.formFieldsModule.rgbaToHex(h))&&(h="#daeaf7ff"),{type:t,id:sf.drawings.randomId(),pageNumber:e.PageIndex+1,bounds:s,name:e.ActualFieldName,tooltip:e.ToolTip,isRequired:e.IsRequired,isReadOnly:e.IsReadonly,thickness:this.pdfViewerBase.ConvertPointToPixel(e.BorderWidth),backgroundColor:h,borderColor:r,visibility:a,rotateAngle:0,customData:e.CustomData}},e.prototype.calculateBounds=function(e,t,i){var n=this.pdfViewerBase.pageSize[parseInt(t.toString(),10)];return this.getBoundsPosition(i,e,n)},e.prototype.getBoundsPosition=function(e,t,i){var n;switch(e){case 1:case 90:n={x:i.width-t.top-t.height,y:t.left,width:t.height,height:t.width};break;case 2:case 180:n={x:i.width-t.left-t.width,y:i.height-t.top-t.height,width:t.width,height:t.height};break;case 3:case 270:n={x:t.top,y:i.height-t.left-t.width,width:t.height,height:t.width};break;case 4:case 0:case 360:n=t}return n||(n=t),null!=n&&(n.left=n.x,n.top=n.y),n},e.prototype.updateFormFieldBounds=function(e,t,i){void 0===i&&(i=!1);var n=e.width,o=e.height;if(!i){switch(Math.abs(t)){case 0:t=0;break;case 90:e.width=o,e.height=n,e.top+=o,t=-90;break;case 180:t=-180,e.left+=n,e.top+=o;break;case 270:e.width=o,e.height=n,e.left+=n,t=-270}null!=e&&(e.x=e.left,e.y=e.top)}return{bounds:e,rotateAngle:t}},e.prototype.updateFormFieldBoundsForNameTable=function(e,t){var i=e.width,n=e.height;switch(Math.abs(t)){case 90:e.width=n,e.height=i,e.y-=i;break;case 180:e.x-=i,e.y-=n;break;case 270:e.width=n,e.height=i,e.x-=n}return null!=e&&(e.left=e.x,e.top=e.y),e},e.prototype.getFormFieldFontStlye=function(e){var t=Ft.None;return e.Bold&&(t=Ft.Bold),e.Italic&&(t=t!==Ft.None?t|Ft.Italic:Ft.Italic),e.Underline&&(t=t!==Ft.None?t|Ft.Underline:Ft.Underline),e.Strikeout&&(t=t!==Ft.None?t|Ft.Strikethrough:Ft.Strikethrough),t},e.prototype.getCurrentFormFieldSettingsBasedonType=function(e){var t=null,i=this.pdfViewer.formDesignerSettings;if(!sf.base.isNullOrUndefined(i)&&!this.isRenderFormField){switch(e){case"Textbox":t=i.textboxFieldSettings;break;case"Password":t=i.passwordFieldSettings;break;case"RadioButton":t=i.radioButtonFieldSettings;break;case"CheckBox":t=i.checkBoxFieldSettings;break;case"ListBox":t=i.listBoxFieldSettings;break;case"DropDown":t=i.dropDownFieldSettings;break;case"InitialField":t=i.initialFieldSettings;break;case"SignatureField":t=i.signatureFieldSettings;break;case"Button":t=i.buttonFieldSettings}t=i}return t},e.prototype.updateFormFieldNameSettings=function(e,t,i){var n=i&&null!=i.name?i.name:this.splitFormFieldName(t)+this.formFieldIndex;return this.checkAndUpdateFormFieldStringValue(e,n,"name")},e.prototype.updateFormFieldPageNumberSettings=function(e,t){var i=this.pdfViewerBase.getActivePage(!0),n=t&&void 0!==t.pageNumber&&t.pageNumber>1?t.pageNumber:i||this.pdfViewerBase.currentPageNumber;return this.checkAndUpdateFormFieldNumberValue(e,n,"pageNumber")},e.prototype.updateFormFieldBoundsSettings=function(e,t,i){var n=i?i.bounds:null;return this.checkAndUpdateFormFieldBounds(e,t,n)},e.prototype.checkAndUpdateFormFieldBounds=function(e,t,i){var n=u(this.defaultBounds[e]),o=!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(t)&&0===t.x&&0===t.y&&t.width===n.width&&t.height===n.height;return!sf.base.isNullOrUndefined(t)&&!o||sf.base.isNullOrUndefined(i)||this.isRenderFormField?!sf.base.isNullOrUndefined(t)||this.isRenderFormField?t:n:i},e.prototype.updateFormFieldsCheckedSettings=function(e,t){var i=!!t&&t.isChecked;return this.checkAndUpdateFormFieldBooleanValue(e,i)},e.prototype.updateFormFieldsSelectedSettings=function(e,t){var i=!!t&&t.isSelected;return this.checkAndUpdateFormFieldBooleanValue(e,i)},e.prototype.checkAndUpdateFormFieldBooleanValue=function(e,t){return!sf.base.isNullOrUndefined(e)&&!1!==e||this.isRenderFormField?e:!sf.base.isNullOrUndefined(t)&&t},e.prototype.updateFormFieldsReadOnlySettings=function(e,t){var i=!!t&&t.isReadOnly;return this.checkAndUpdateFormFieldBooleanValue(e,i)},e.prototype.updateFormFieldsVisibilitySettings=function(e,t){var i=t?t.visibility:this.defaultVisibility;return this.checkAndUpdateFormFieldsVisibilitySettings(e,i)},e.prototype.checkAndUpdateFormFieldsVisibilitySettings=function(e,t){return sf.base.isNullOrUndefined(e)||e===this.defaultVisibility?sf.base.isNullOrUndefined(t)?this.defaultVisibility:t:e},e.prototype.updateFormFieldRequiredSettings=function(e,t){var i=!!t&&t.isRequired;return this.checkAndUpdateFormFieldBooleanValue(e,i)},e.prototype.updateFormFieldTooltipSettings=function(e,t){var i=t?t.tooltip:"";return this.checkAndUpdateFormFieldStringValue(e,i,"tooltip")},e.prototype.updateFormFieldThicknessSettings=function(e,t){var i=t?t.thickness:this.defaultBorderThickness;return this.checkAndUpdateFormFieldNumberValue(e,i,"thickness")},e.prototype.updateFormFieldBackgroundColorSettings=function(e,t){var i=t?t.backgroundColor:this.defaultBackgroundColor;return this.checkAndUpdateFormFieldStringValue(e,i,"backGroundColor")},e.prototype.updateFormFieldCustomDataSettings=function(e,t){var i=t?t.customData:null;return this.checkAndUpdateFormFieldCustomDataSettings(e,i)},e.prototype.checkAndUpdateFormFieldCustomDataSettings=function(e,t){return sf.base.isNullOrUndefined(e)||null===e?t:e},e.prototype.updateFormFieldBorderColorSettings=function(e,t){var i=t?t.borderColor:this.defaultBorderColor;return this.checkAndUpdateFormFieldStringValue(e,i,"borderColor")},e.prototype.updateFormFieldValueSettings=function(e,t){var i=t?t.value:"";return this.checkAndUpdateFormFieldStringValue(e,i,"value")},e.prototype.updateFormFieldButtonValueSettings=function(e,t){var i=t?t.imageSource:"";return this.checkAndUpdateFormFieldStringValue(e,i,"value")},e.prototype.updateFormFieldTextSettings=function(e,t){var i=t?t.text:"";return this.checkAndUpdateFormFieldStringValue(e,i,"value")},e.prototype.checkAndUpdateFormFieldNumberValue=function(e,t,i){var n,o=!sf.base.isNullOrUndefined(t),s=!sf.base.isNullOrUndefined(e);switch(i){case"thickness":n=s&&e!==this.defaultBorderThickness||this.isRenderFormField?e:o?t:this.defaultBorderThickness;break;case"fontSize":n=s&&e!==this.defaultFontSize||this.isRenderFormField?e:o?t:this.defaultFontSize;break;case"maxLength":n=s&&e!==this.defaultMaximumLength||this.isRenderFormField?e:o?t:this.defaultMaximumLength;break;case"pageNumber":n=s&&e>1||this.isRenderFormField?e:t;break;case"selectedIndex":n=s&&0!==e||this.isRenderFormField?e:0!==(o&&t)?t:0}return n},e.prototype.checkAndUpdateFormFieldStringValue=function(e,t,i){var n="",o=!sf.base.isNullOrUndefined(t),s=!sf.base.isNullOrUndefined(e)&&""!==e;switch(i){case"value":case"tooltip":case"name":case"text":n=s||this.isRenderFormField?e:o?t:"";break;case"fontColor":n=s&&e!==this.defaultFontColor||this.isRenderFormField?e:o?t:this.defaultFontColor;break;case"fontFamily":n=s&&e!==this.defaultFontFamily||this.isRenderFormField?e:o?t:this.defaultFontFamily;break;case"borderColor":n=s&&e!==this.defaultBorderColor||this.isRenderFormField?e:o?t:this.defaultBorderColor;break;case"backGroundColor":n=s&&e!==this.defaultBackgroundColor||this.isRenderFormField?e:o?t:this.defaultBackgroundColor}return n},e.prototype.updateFormFieldFontFamilySettings=function(e,t){var i=t?t.fontFamily:this.defaultFontFamily;return this.checkAndUpdateFormFieldStringValue(e,i,"fontFamily")},e.prototype.updateFormFieldFontSizeSettings=function(e,t){var i=t?t.fontSize:this.defaultFontSize;return this.checkAndUpdateFormFieldNumberValue(e,i,"fontSize")},e.prototype.updateFormFieldFontStyleSettings=function(e,t){var i=t?t.fontStyle:Ft.None;return this.checkAndUpdateFormFieldFontStyleSettings(e,i)},e.prototype.checkAndUpdateFormFieldFontStyleSettings=function(e,t){return!sf.base.isNullOrUndefined(e)&&e!==Ft.None||this.isRenderFormField?e:sf.base.isNullOrUndefined(t)?Ft.None:t},e.prototype.updateFormFieldAlignmentSettings=function(e,t){var i=t?t.alignment:this.defaultTextAlignment;return this.checkAndUpdateFormFieldAlignmentSettings(e,i)},e.prototype.checkAndUpdateFormFieldAlignmentSettings=function(e,t){return!sf.base.isNullOrUndefined(e)&&e!==this.defaultTextAlignment||this.isRenderFormField?e:sf.base.isNullOrUndefined(t)?this.defaultTextAlignment:t},e.prototype.updateFormFieldButtonAlignmentSettings=function(e,t){var i=t?t.alignment:this.defaultButtonTextAlignment;return this.checkAndUpdateFormFieldButtonAlignmentSettings(e,i)},e.prototype.checkAndUpdateFormFieldButtonAlignmentSettings=function(e,t){return!sf.base.isNullOrUndefined(e)&&e!==this.defaultButtonTextAlignment||this.isRenderFormField?e:sf.base.isNullOrUndefined(t)?this.defaultButtonTextAlignment:t},e.prototype.updateFormFieldMaxLengthSettings=function(e,t){var i=t?t.maxLength:this.defaultMaximumLength;return this.checkAndUpdateFormFieldNumberValue(e,i,"maxLength")},e.prototype.updateFormFieldInsertSpacesSettings=function(e,t){var i=!!t&&t.insertSpaces;return this.checkAndUpdateFormFieldBooleanValue(e,i)},e.prototype.updateFormFieldIsMultilineSettings=function(e,t){var i=!!t&&t.isMultiline;return this.checkAndUpdateFormFieldBooleanValue(e,i)},e.prototype.updateFormFieldFontColorSettings=function(e,t){var i=t?t.color:this.defaultFontColor;return this.checkAndUpdateFormFieldStringValue(e,i,"fontColor")},e.prototype.updateFormFieldOptionsSettings=function(e,t){var i=t?t.options:[];return this.checkAndUpdateFormFieldOptionsSettings(e,i)},e.prototype.checkAndUpdateFormFieldOptionsSettings=function(e,t){return!sf.base.isNullOrUndefined(e)&&e.length>0?e:!sf.base.isNullOrUndefined(t)&&t.length>0?t:[]},e.prototype.updateFormFieldSelectedIndexesSettings=function(e,t){var i=t?t.selectedIndexes:[0];return this.checkAndUpdateFormFieldSelectedIndexes(e,i)},e.prototype.checkAndUpdateFormFieldSelectedIndexes=function(e,t){return e.length>1||0!==e[0]?e:sf.base.isNullOrUndefined(t)||0===t[0]?[0]:t},e.prototype.updateFormFieldSelectedIndexSettings=function(e,t){var i=t?t.selectedIndex:0;return this.checkAndUpdateFormFieldNumberValue(e,i,"selectedIndex")},e}();function Nu(){var e,t=!1,i={},n=n||{},o=[],s=void 0!==n.Module?n.Module:{},a=Float32Array,r=Float64Array,l=function(e,t,i){return function(o){var s=n.heap(e,t),a=s[0],r=s.slice(1);if(!o.apply(void 0,r.map((function(e){return e.p}))))return a.free(),i;var l=r.map((function(e){return e.v}));return a.free(),l}};function d(e){fetch(e).then((function(e){if(e.ok)return e.arrayBuffer()})).then((function(t){if(t){var i="/usr/share/fonts/"+e.split("/").pop();s.FS.createDataFile(i,null,new Int8Array(t),!0,!0,!0)}}))}function h(){(!0||t)&&(i.Init=s.cwrap("FPDF_InitLibrary"),i.RenderPageBitmap=s.cwrap("FPDF_RenderPageBitmap","",["number","number","number","number","number","number","number","number"]),i.Bitmap_FillRect=s.cwrap("FPDFBitmap_FillRect","",["number","number","number","number","number","number"]),i.Bitmap_CreateEx=s.cwrap("FPDFBitmap_CreateEx","number",["number","number","number","number","number"]),i.Bitmap_Destroy=s.cwrap("FPDFBitmap_Destroy","",["number"]),i.LoadPage=s.cwrap("FPDF_LoadPage","number",["number","number"]),i.ClosePage=s.cwrap("FPDF_ClosePage","",["number"]),i.LoadMemDocument=s.cwrap("FPDF_LoadMemDocument","number",["number","number","string"]),i.GetPageSizeByIndex=s.cwrap("FPDF_GetPageSizeByIndex","number",["number","number","number","number"]),i.GetLastError=s.cwrap("FPDF_GetLastError","number"),i.GetPageCount=s.cwrap("FPDF_GetPageCount","number",["number"]),i.CloseDocument=s.cwrap("FPDF_CloseDocument","",["number"]),i.DestroyLibrary=s.cwrap("FPDF_DestroyLibrary"),i.LoadTextPage=s.cwrap("FPDFText_LoadPage","number",["number"]),i.CloseTextPage=s.cwrap("FPDFText_ClosePage","",["number"]),i.TextCountChars=s.cwrap("FPDFText_CountChars","number",["number"]),i.GetUnicodeChar=s.cwrap("FPDFText_GetUnicode","number",["number"]),i.GetCharBox=s.cwrap("FPDFText_GetCharBox","number",["number","number","number","number","number"]),i.GetPageRotation=s.cwrap("FPDFPage_GetRotation","number",["number"]),i.GetCharAngle=s.cwrap("FPDFText_GetCharAngle","number",["number"]),i.GetCropBox=s.cwrap("FPDFPage_GetCropBox","number",["number","number","number","number"]),n.heap=function(e,t){var i;switch(e){case Int8Array:i=s.HEAP8;break;case Int16Array:i=s.HEAP16;break;case Int32Array:i=s.HEAP32;break;case Uint8Array:i=s.HEAPU8;break;case Uint16Array:i=s.HEAPU16;break;case Uint32Array:i=s.HEAPU32;break;case Float32Array:i=s.HEAPF32;break;case Float64Array:i=s.HEAPF64}var n=e.BYTES_PER_ELEMENT,o=s.asm.malloc(t*n),a=Array(1+t);a[0]={s:t,J:e,Z:n,E:i,m:o,free:function(){return s.asm.free(o)}};for(var r=function(e){a[e+1]={p:o+e*n,get v(){return i[o/n+e]}}},l=0;l<t;l++)r(l);return a},n.loaded&&n.loaded())}Object.assign(i,{LCD_TEXT:2,NO_NATIVETEXT:4,GRAYSCALE:8,DEBUG_INFO:128,NO_CATCH:256,RENDER_LIMITEDIMAGECACHE:512,RENDER_FORCEHALFTONE:1024,PRINTING:2048,REVERSE_BYTE_ORDER:16,Bitmap_Gray:1,Bitmap_BGR:2,Bitmap_BGRx:3,Bitmap_BGRA:4,LAST_ERROR:{SUCCESS:0,UNKNOWN:1,FILE:2,FORMAT:3,PASSWORD:4,SECURITY:5,PAGE:6}}),s.onRuntimeInitialized=function(){t=!0,h()},n.onload=function(){!0,h()},n.loaded=function(){p.postMessage({message:"loaded"})};var p=self;p.onmessage=function(a){if("initialLoading"===a.data.message)importScripts(a.data.url+"/pdfium.js"),s.url=a.data.url,s.isDeviceMode=a.data.isDeviceMode,s.onRuntimeInitialized=function(){if(t=!0,h(),a.data.fonts&&a.data.fonts.length>0){s.FS.createPath("/","/usr/share/fonts/",!0,!0);for(var e=0;e<a.data.fonts.length;e++){d(a.data.fonts[e].startsWith("http://")||a.data.fonts[e].startsWith("https://")?a.data.fonts[e]:a.data.rootPath+a.data.fonts[e].replace("wwwroot/",""))}}},this.PDFiumModule(s);else if("LoadPageCollection"===a.data.message){n.fileByteArray=a.data.uploadedFile;var r=n.fileByteArray.length;i.Init();var l=s.asm.malloc(r);s.HEAPU8.set(n.fileByteArray,l),n.fileByteArray=null,e=new g({wasm:i.LoadMemDocument(l,r,a.data.password),wasmBuffer:l}),(o=o||[]).push(e.processor.wasmData.wasm);var c=i.GetPageCount(e.processor.wasmData.wasm);e.setPages(c),e.createAllPages(),p.postMessage({message:"PageLoaded",pageIndex:a.data.pageIndex,pageSizes:e.pageSizes})}else if("LoadPageStampCollection"===a.data.message){for(var u=[],f=[],m=[],w={},y=n.fileByteArray,v=0;v<a.data.uploadedFile.length;v++){n.fileByteArray=a.data.uploadedFile[v];r=n.fileByteArray.length;i.Init();l=s.asm.malloc(r);s.HEAPU8.set(n.fileByteArray,l);var b=new g({wasm:i.LoadMemDocument(l,r,a.data.password),wasmBuffer:l});c=i.GetPageCount(b.processor.wasmData.wasm);b.setPages(c),b.createAllPages();var S=b.getPage(a.data.pageIndex),A=a.data;w=S.render(null,A.zoomFactor,!1,null,null,null,!0),u.push(w.value),f.push(w.height),m.push(w.width)}w.value=u,w.height=f,w.width=m,w.message="LoadedStamp",w.annotation=a.data.annotation,w.isImport=a.data.isImport,n.fileByteArray=y,p.postMessage(w)}else if("renderPage"===a.data.message||"renderPageSearch"===a.data.message){S=e.getPage(a.data.pageIndex);var x=a.data;w=S.render(null,x.zoomFactor,x.isTextNeed,null,null,x.textDetailsId);"renderPageSearch"===a.data.message&&(w.isTextSearch=!0),p.postMessage(w)}else if("renderThumbnail"===a.data.message){w=(S=e.getPage(a.data.pageIndex)).render("thumbnail",null,!1,null,null);p.postMessage(w)}else if("printImage"===a.data.message){w=(S=e.getPage(a.data.pageIndex)).render("print",null,!1,a.data.printScaleFactor,a.data.printDevicePixelRatio);p.postMessage(w)}else if("renderImageAsTile"===a.data.message||"renderImageAsTileSearch"===a.data.message){var V=a.data;w=(S=e.getPage(a.data.pageIndex)).renderTileImage(V.tileX,V.tileY,V.tileXCount,V.tileYCount,V.zoomFactor,a.data.isTextNeed,a.data.textDetailsId);"renderImageAsTileSearch"===a.data.message&&(w.isTextSearch=!0),p.postMessage(w)}else if("unloadFPDF"===a.data.message&&e&&o.includes(e.processor.wasmData.wasm)){s.asm.free(e.processor.wasmData.wasmBuffer),i.CloseDocument(e.processor.wasmData.wasm),i.DestroyLibrary();var C=o.indexOf(e.processor.wasmData.wasm);C>-1&&o.splice(C,1)}};var c=function(){function e(e,t){this.index=e,this.src=null,this.processor=t}return e.prototype.render=function(e,t,i,n,o,s,a){return this.processor.render(this.index,e,t,i,n,o,s,a)},e.prototype.renderTileImage=function(e,t,i,n,o,s,a){return this.processor.renderTileImage(this.index,e,t,i,n,o,s,a)},e}(),u=function(e,t,i,n,o,s){this.X=e,this.Y=t,this.Width=i,this.Height=n,this.Bottom=this.Y+this.Height,this.Right=this.X+this.Width,this.Top=this.Y,this.Left=this.X,this.Rotation=s,this.Text=o},f=function(){function e(e){this.TextBounds=[],this.TextContent=[],this.CharacterBounds=[],this.PageText="",this.wasmData=e}return e.prototype.getPageSize=function(e){var t;void 0===e&&(e=0);do{t=this.GetPageSizeByIndex(e)}while(isNaN(t[0])||isNaN(t[1]));return t},e.prototype.GetPageSizeByIndex=function(e){var t=this;return void 0===e&&(e=0),l(r,2,[-1,-1])((function(n,o){return i.GetPageSizeByIndex(t.wasmData.wasm,e,n,o)})).map((function(e){return isNaN(e)?NaN:parseInt((e*(96/72)).toString(),10)}))},e.prototype.getCharBounds=function(e,t){return void 0===t&&(t=0),l(r,4,[-1,-1,-1,-1])((function(n,o,s,a){return i.GetCharBox(e,t,n,o,s,a)}))},e.prototype.getCropBox=function(e){return l(a,4,[0,0,0,0])((function(t,n,o,s){return i.GetCropBox(e,t,n,o,s)}))},e.prototype.getRender=function(e,t,n,o,a){void 0===e&&(e=0);var r=i.REVERSE_BYTE_ORDER,l=s.asm.malloc(t*n*4);s.HEAPU8.fill(0,l,l+t*n*4);var d=i.Bitmap_CreateEx(t,n,i.Bitmap_BGRA,l,4*t),h=i.LoadPage(this.wasmData.wasm,e);return i.Bitmap_FillRect(d,0,0,t,n,a?16777215:4294967295),i.RenderPageBitmap(d,h,0,0,t,n,0,r),i.Bitmap_Destroy(d),this.textExtraction(h,e,o),i.ClosePage(h),l},e.prototype.textExtraction=function(e,t,n){var o;if(n){var s=this.getPageSize(t),a=s[0],r=s[1],l=i.LoadTextPage(e,t),d=i.GetPageRotation(e),h=i.TextCountChars(l);this.TextBounds=[],this.TextContent=[],this.CharacterBounds=[];for(var p="",c=0,f=0,m=0,g=0,w=[],y=[],v=[],b=[],S=[],A="",x=0,V=0,C=0,I=0,k=0,M=!0,T=!1,E=!1,B=!1,P=this.getCropBox(e),D=P[0],N=P[1],F=(P[2],P[3],0);F<=h;F++){var L=i.GetUnicodeChar(l,F),O=i.GetCharAngle(l,F),R=String.fromCharCode(L),z=this.getCharBounds(l,F),H=z[0],U=z[1],j=z[2],_=z[3],W=H>0&&U>0&&j>0&&_>0,q=this.pointerToPixelConverter(H)-this.pointerToPixelConverter(D),Z=r+this.pointerToPixelConverter(N)-this.pointerToPixelConverter(_),Y=this.pointerToPixelConverter(U-H),X=this.pointerToPixelConverter(_-j),G=parseInt((180*O/Math.PI).toString(),10);if(W||F===h){if(F<h){p+=R;var J=new u(q,Z,Y,X,R,G);this.CharacterBounds.push(J)}switch(1!==d&&3!==d||(Z=a+this.pointerToPixelConverter(N)-this.pointerToPixelConverter(_)),R){case"\0":c=Math.min.apply(Math,w),f=Math.max.apply(Math,y),m=Math.min.apply(Math,v),g=Math.max.apply(Math,b);var K=new u(x,C,V-x,I-C,A,k);S.push(K),this.textBoundsCalculation(S,c,f,g,m,d,a,r),S=[],M=!0,E=!1,A="",w=[],v=[],y=[],b=[],c=0,f=0,m=0,g=0;break;case"\r":if(F<h){var Q=new u(q,Z,Y,X,"\r\n",G);w.push(Q.Top),y.push(Q.Bottom),v.push(Q.Left),b.push(Q.Right),c=Math.min.apply(Math,w),f=Math.max.apply(Math,y),m=Math.min.apply(Math,v),g=Math.max.apply(Math,b);K=void 0;!1===M&&(K=new u(x,C,V-x,I-C,A,k),S.push(K)),S.push(Q),this.textBoundsCalculation(S,c,f,g,m,d,a,r),S=[],M=!0,E=!1,A="",w=[],v=[],y=[],b=[],c=0,f=0,m=0,g=0,p+="\n",O=i.GetCharAngle(l,F),H=(o=this.getCharBounds(l,F))[0],U=o[1],j=o[2],_=o[3],q=this.pointerToPixelConverter(H),Z=r-this.pointerToPixelConverter(_),Y=this.pointerToPixelConverter(U-H),X=this.pointerToPixelConverter(_-j),G=parseInt((180*O/Math.PI).toString(),10);J=new u(q,Z,Y,X,R,G);this.CharacterBounds.push(J),F++}break;case"":case"￾":Q=new u(q,Z,Y,X,R,G);w.push(Q.Top),y.push(Q.Bottom),v.push(Q.Left),b.push(Q.Right),c=Math.min.apply(Math,w),f=Math.max.apply(Math,y),m=Math.min.apply(Math,v),g=Math.max.apply(Math,b);K=void 0;!1===M&&(K=new u(x,C,V-x,I-C,A,k),S.push(K)),""===R&&S.push(Q),this.textBoundsCalculation(S,c,f,g,m,d,a,r),S=[],M=!0,E=!1,A="",w=[],v=[],y=[],b=[],c=0,f=0,m=0,g=0;break;default:if(0===Y||0===X){T=!0,c=Math.min.apply(Math,w),f=Math.max.apply(Math,y),m=Math.min.apply(Math,v),g=Math.max.apply(Math,b);K=new u(x,C,V-x,I-C,A,k);S.push(K),C=(Q=new u(q,Z,Y,X,R,G)).Top,I=Q.Bottom,x=Q.Left,V=Q.Right,A=R,k=S[S.length-1].Rotation,K=new u(x,C,V-x,I-C,A,k),S.push(K),C=0,I=0,x=0,V=0,A="",k=0,M=!0,E=!0}else{!0===M&&(C=Z,I=Z+X,x=q,V=q+Y);Q=new u(q,Z,Y,X,R,G);if(" "!==R){if(E&&S.length>0&&G===S[0].Rotation&&((180===G||0===G)&&Math.abs(Q.Y-S[0].Y)>11&&(B=!0),(270===G||90===G)&&Math.abs(Q.X-S[0].X)>11&&(B=!0)),T&&S.length>=1&&S[S.length-1].Rotation!==Q.Rotation||B){T=!1,B=!1,c=Math.min.apply(Math,w),f=Math.max.apply(Math,y),m=Math.min.apply(Math,v),g=Math.max.apply(Math,b);K=void 0;!1===M&&(K=new u(x,C,V-x,I-C,A,k),S.push(K)),this.textBoundsCalculation(S,c,f,g,m,d,a,r),S=[],M=!0,A="",w=[],v=[],y=[],b=[],c=0,f=0,m=0,g=0}w.push(Q.Top),y.push(Q.Bottom),v.push(Q.Left),b.push(Q.Right),C=Math.min(C,Q.Top),I=Math.max(I,Q.Bottom),x=Math.min(x,Q.Left),V=Math.max(V,Q.Right),A+=R,k=Q.Rotation,M=!1,E=!1}else{K=new u(x,C,V-x,I-C,A,k);S.push(K),C=Q.Top,I=Q.Bottom,x=Q.Left,V=Q.Right,A=R,k=Q.Rotation,K=new u(x,C,V-x,I-C,A,k),S.push(K),C=0,I=0,x=0,V=0,A="",k=0,M=!0,E=!0}}}}}i.CloseTextPage(l),this.Rotation=d,this.PageText=p}},e.prototype.pointerToPixelConverter=function(e){return e*(96/72)},e.prototype.textBoundsCalculation=function(e,t,i,n,o,a,r,l){for(var d,h=!1,p="",c=e.reduce((function(e,t){return e+t.Text}),""),f=this.checkIsRtlText(c),m=c.match(/[jgpqy]/g),g=m?m.length:0,w=0;w<e.length;w++){var y=e[w],v=y.Rotation,b=s.isDeviceMode?0:g>0?-.5:.6;if(0===v||180===v?(h&&(this.TextBounds.push(d),this.TextContent.push(p),p=""),h=!1,0===a||4===a?d=new u(y.Left,t,y.Width,i-t+b,y.Text,v):1===a?d=new u(r-t,y.Left,y.Width,i-t,y.Text,v):2===a?d=new u(r-y.Left,l-t,y.Width,i-t,y.Text,v):3===a&&(d=new u(t,l-y.Left,y.Width,i-t,y.Text,v))):90===v||270===v?(h&&(this.TextBounds.push(d),this.TextContent.push(p),p=""),h=!1,0===a||4===a?d=new u(o,y.Top,n-o,y.Height,y.Text,v):1===a?d=new u(r-y.Top,o,n-o,y.Height,y.Text,v):2===a?d=new u(r-o,l-y.Top,n-o,y.Height,y.Text,v):3===a&&(d=new u(y.Top,l-o,n-o,y.Height,y.Text,v))):h?p+=y.Text:(h=!0,p+=y.Text,0===a||4===a?d=new u(y.Left,t,n-o,i-t,y.Text,v):1===a?d=new u(r-t,y.Left,n-o,i-t,y.Text,v):2===a?d=new u(r-y.Left,l-t,n-o,i-t,y.Text,v):3===a&&(d=new u(t,l-y.Left,n-o,i-t,y.Text,v))),!h&&" "===y.Text&&0!==w&&w+1<=e.length)if(f)if(f&&w+1!==e.length){(30<(S=e[w-1].Left-(e[w+1].Left+e[w+1].Width))||S<0)&&(S=0),d=new u(e[w+1].Left+e[w+1].Width,t,S,i-t,y.Text,y.Rotation)}else f&&(d=new u(e[w-1].Left-y.Width,t,y.Width,i-t,y.Text,y.Rotation));else if(w+1!==e.length){var S=0;switch(v){case 0:(30<(S=e[w+1].Left-(e[w-1].Left+e[w-1].Width))||S<0)&&(S=0),0===a||4===a?d=new u(e[w-1].Left+e[w-1].Width,t,S,i-t+b,y.Text,v):1===a?d=new u(r-t,e[w-1].Left+e[w-1].Width,S,i-t,y.Text,v):2===a?d=new u(r-(e[w-1].Left+e[w-1].Width),l-t,S,i-t,y.Text,v):3===a&&(d=new u(t,l-(e[w-1].Left+e[w-1].Width),S,i-t,y.Text,v));break;case 90:(30<(S=e[w+1].Top-(e[w-1].Top+e[w-1].Height))||S<0)&&(S=0),0===a||4===a?d=new u(o,e[w-1].Top+e[w-1].Height,n-o,S,y.Text,v):1===a?d=new u(r-(e[w-1].Top+e[w-1].Height),o,n-o,S,y.Text,v):2===a?d=new u(r-o,l-(e[w-1].Top+e[w-1].Height),n-o,S,y.Text,v):3===a&&(d=new u(e[w-1].Top+e[w-1].Height,l-o,n-o,S,y.Text,v));break;case 180:(30<(S=e[w-1].Left-(e[w+1].Left+e[w+1].Width))||S<0)&&(S=0),0===a||4===a?d=new u(e[w+1].Left+e[w+1].Width,t,S,i-t,y.Text,v):1===a?d=new u(r-t,e[w+1].Left+e[w+1].Width,S,i-t,y.Text,v):2===a?d=new u(r-(e[w+1].Left+e[w+1].Width),l-t,S,i-t,y.Text,v):3===a&&(d=new u(t,l-(e[w+1].Left+e[w+1].Width),S,i-t,y.Text,v));break;case 270:(30<(S=e[w-1].Top-(e[w+1].Top+e[w+1].Height))||S<0)&&(S=0),0===a||4===a?d=new u(o,e[w+1].Top+e[w+1].Height,n-o,S,y.Text,v):1===a?d=new u(r-(e[w+1].Top+e[w+1].Height),o,n-o,S,y.Text,v):2===a?d=new u(r-o,l-(e[w+1].Top+e[w+1].Height),n-o,S,y.Text,v):3===a&&(d=new u(e[w+1].Top+e[w+1].Height,l-o,n-o,S,y.Text,v))}}else switch(v){case 90:0===a||4===a?d=new u(o,e[w-1].Top+e[w-1].Height,n-o,y.Height,y.Text,v):1===a?d=new u(r-(e[w-1].Top+e[w-1].Height),o,n-o,y.Height,y.Text,v):2===a?d=new u(r-o,l-(e[w-1].Top+e[w-1].Height),n-o,y.Height,y.Text,v):3===a&&(d=new u(e[w-1].Top+e[w-1].Height,l-o,n-o,y.Height,y.Text,v));break;case 270:0===a||4===a?d=new u(o,e[w-1].Top-y.Height,n-o,y.Height,y.Text,v):1===a?d=new u(r-(e[w-1].Top-y.Height),o,n-o,y.Height,y.Text,v):2===a?d=new u(r-o,l-e[w-1].Top-y.Height,n-o,y.Height,y.Text,v):3===a&&(d=new u(e[w-1].Top-y.Height,l-o,n-o,y.Height,y.Text,v));break;case 180:0===a||4===a?d=new u(e[w-1].Left-y.Width,t,y.Width,i-t,y.Text,v):1===a?d=new u(r-t,e[w-1].Left-y.Width,y.Width,i-t,y.Text,v):2===a?d=new u(r-(e[w-1].Left-y.Width),l-t,y.Width,i-t,y.Text,v):3===a&&(d=new u(t,l-(e[w-1].Left-y.Width),y.Width,i-t,y.Text,v));break;case 0:0===a||4===a?d=new u(e[w-1].Left+e[w-1].Width,t,y.Width,i-t,y.Text,v):1===a?d=new u(r-t,e[w-1].Left+e[w-1].Width,y.Width,i-t,y.Text,v):2===a?d=new u(r-(e[w-1].Left+e[w-1].Width),l-t,y.Width,i-t,y.Text,v):3===a&&(d=new u(t,l-(e[w-1].Left+e[w-1].Width),y.Width,i-t,y.Text,v))}h||(this.TextBounds.push(d),this.TextContent.push(y.Text))}h&&(this.TextBounds.push(d),this.TextContent.push(p))},e.prototype.checkIsRtlText=function(e){return new RegExp("^[^A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF]*[\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC]").test(e)},e.prototype.getPageRender=function(e,t,i,n,o){void 0===e&&(e=0);var a,r=this.getRender(e,t,i,n,o);return a=s.HEAPU8.slice(r,r+t*i*4),s.asm.free(r),a},e.prototype.render=function(e,t,i,n,o,s,a,r){void 0===e&&(e=0);var l=this.getPageSize(e),d=l[0],h=l[1];if("thumbnail"===t){var p=Math.round(149.55),c=Math.round(211.5);return{value:this.getPageRender(e,p,c,!1),width:p,height:c,pageIndex:e,message:"renderThumbnail"}}if("print"===t){var u=d,f=h;"Width"===(d>h?"Width":"Height")?4493===(u=d>4493?4493:d)&&(f=h/(d/4493)):4493===(f=h>4493?4493:h)&&(u=d/(h/4493));p=Math.round(u*o*1.5),c=Math.round(f*o*1.5);return{value:this.getPageRender(e,p,c,!1),width:p,height:c,pageIndex:e,pageWidth:d,pageHeight:h,message:"printImage",printDevicePixelRatio:s}}for(p=Math.round(1.5*d*i),c=Math.round(1.5*h*i);p*c*4*2>=2147483648;)i-=.1,p=Math.round(Math.round(1.3333*d)*i),c=Math.round(Math.round(1.3333*h)*i);return{value:this.getPageRender(e,p,c,n,r),width:p,height:c,pageIndex:e,message:"imageRendered",textBounds:this.TextBounds,textContent:this.TextContent,rotation:this.Rotation,pageText:this.PageText,characterBounds:this.CharacterBounds,zoomFactor:i,isTextNeed:n,textDetailsId:a}},e.prototype.renderTileImage=function(e,t,n,o,a,r,l,d){void 0===e&&(e=0);var h=this.getPageSize(e),p=h[0],c=h[1],u=Math.round(1.5*p*r),f=Math.round(1.5*c*r),m=Math.round(u/o),g=Math.round(f/a),w=i.REVERSE_BYTE_ORDER,y=s.asm.malloc(m*g*4);s.HEAPU8.fill(0,y,y+m*g*4);var v=i.Bitmap_CreateEx(m,g,4,y,4*m),b=i.LoadPage(this.wasmData.wasm,e);i.Bitmap_FillRect(v,0,0,m,g,4294967295),i.RenderPageBitmap(v,b,-t*m,-n*g,u,f,0,w),i.Bitmap_Destroy(v),this.textExtraction(b,e,l),i.ClosePage(b);var S,A=y;return S=s.HEAPU8.slice(A,A+m*g*4),s.asm.free(A),0===t&&0===n?{value:S,w:m,h:g,noTileX:o,noTileY:a,x:t,y:n,pageIndex:e,message:"renderTileImage",textBounds:this.TextBounds,textContent:this.TextContent,rotation:this.Rotation,pageText:this.PageText,characterBounds:this.CharacterBounds,textDetailsId:d,isTextNeed:l}:{value:S,w:m,h:g,noTileX:o,noTileY:a,x:t,y:n,pageIndex:e,message:"renderTileImage",textDetailsId:d,isTextNeed:l}},e.prototype.getLastError=function(){switch(i.GetLastError()){case i.LAST_ERROR.SUCCESS:return"success";case i.LAST_ERROR.UNKNOWN:return"unknown error";case i.LAST_ERROR.FILE:return"file not found or could not be opened";case i.LAST_ERROR.FORMAT:return"file not in PDF format or corrupted";case i.LAST_ERROR.PASSWORD:return"password required or incorrect password";case i.LAST_ERROR.SECURITY:return"unsupported security scheme";case i.LAST_ERROR.PAGE:return"page not found or content error";default:return"unknown error"}},e}(),m=function(e,t){this.Width=e,this.Height=t,this.IsEmpty=0===e&&0===t},g=function(){function e(e){this.pages=[],this.pageSizes={},this.processor=new f(e)}return e.prototype.setPages=function(e){this.pages=Array(e).fill(null)},e.prototype.createAllPages=function(){for(var e=0;e<this.pages.length;e++){this.pages[e]=new c(e,this.processor);var t=this.processor.getPageSize(e);this.pageSizes[e]=new m(t[0],t[1])}},e.prototype.getPage=function(e){var t=this.pages[parseInt(e.toString(),10)];return t||(t=new c(e),this.pages[parseInt(e.toString(),10)]=t),t},e}()}var Fu=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function r(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}l((n=n.apply(e,t||[])).next())}))},Lu=function(e,t){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(s){return function(r){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,r])}}};return{elementRef:null,dotnetRef:null,initialize:function(e,t,i,n,o,s,r){void 0===o&&(o=null),sf.base.enableBlazorMode();var l=new a(e,t,n,i,s);Wn.prototype.send=this.viewerRequestHandler.bind(this),l.preRender(),l.cultureValue=o,l.isSmartComponent=r,l.render(),t&&(t.classList.contains("e-blazor-hidden")&&t.classList.contains("e-pv-mobile-view")?t.className="e-control e-pdfviewer e-lib e-pv-mobile-view e-blazor-pdfviewer":t.className="e-control e-pdfviewer e-lib e-blazor-pdfviewer"),this.elementRef=t,this.dotnetRef=n},updateOptions:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);0===t.selectedItems.annotations.length&&n.blazorAction&Wt.AnnotationAdding&&delete t.selectedItems,sf.base.isNullOrUndefined(n)||sf.base.isNullOrUndefined(n.element)||(n.setOptions(t,n.options,i),n.options=t),n.blazorAction&=~Wt.AnnotationAdding},updateCustomstamp:function(e,t){var i=window.sfBlazor.getCompInstance(e);t.customStamps&&(i.viewerBase.updateStampItems(),i.renderCustomerStamp(t.customStamps[0]))},isDevice:function(e){return{isMobile:window.sfBlazor.isDevice(e).IsDevice,isMac:!!/ipad|iphone|ipod|mac/.test(navigator.userAgent.toLowerCase())}},isTab:function(){return/Tablet|iPad/i.test(navigator.userAgent)||window.innerWidth>767&&window.innerWidth<=1024},invokeMethod:function(e,t,i,o){return Fu(this,void 0,void 0,(function(){var s,a,r,l;return Lu(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),a=null,r=window.sfBlazor.getCompInstance(e),(s=r)?(null===i||(s=r,s=this.getChildModule(s,i)),!(a=s[""+t].apply(s,o))||"object"!==n(a)||a instanceof Uint8Array||a instanceof Promise||(a=this.cleanStringify(a)),"saveAsBlob"===t&&a instanceof Promise?[4,this.promiseHandler(a)]:[3,2]):[3,3];case 1:a=d.sent(),d.label=2;case 2:return[2,a];case 3:return[3,5];case 4:return l=d.sent(),sf.base.isNullOrUndefined(this.throwError)?[3,5]:[2,this.throwError(l,s)];case 5:return[2,{}]}}))}))},promiseHandler:function(e){return Fu(this,void 0,void 0,(function(){var t;return Lu(this,(function(i){switch(i.label){case 0:return t=this,e instanceof Promise?[4,e.then((function(i){return Fu(this,void 0,void 0,(function(){return Lu(this,(function(n){switch(n.label){case 0:return[4,t.docEditFileReader(i).then((function(t){e=JSON.stringify({data:t.substring(t.indexOf(",")+1)})}))];case 1:return n.sent(),[2]}}))}))}))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2,e]}}))}))},docEditFileReader:function(e){return Fu(this,void 0,void 0,(function(){return Lu(this,(function(t){return[2,new Promise((function(t,i){var n=new FileReader;n.onload=function(){t(n.result)},n.readAsDataURL(e)}))]}))}))},getMethodCall:function(e,t,i){var n;try{var o=window.sfBlazor.getCompInstance(e);if(sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(o.element)||(n=o),n)return null==t||"null"===t?n[""+i]:(n=this.getChildModule(n,t))[""+i]}catch(e){this.throwError(e,n)}},setMethodCall:function(e,t,i,n){var o;try{var s=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(s)||sf.base.isNullOrUndefined(s.element)||(o=s),o&&((o=this.getChildModule(o,t))[""+i]=n[0])}catch(e){this.throwError(e,o)}},cleanStringify:function(e){try{return JSON.stringify(e)}catch(e){return console.log(e),""}},getChildModule:function(e,t){try{for(var i=t.split(","),n=0;n<i.length;n++)e=e[i[n]];return e}catch(t){this.throwError(t,e)}return e},viewerRequestHandler:function(e){return Fu(this,void 0,void 0,(function(){var t,i,n,o;return Lu(this,(function(s){switch(s.label){case 0:if(s.trys.push([0,34,,35]),t=void 0,i=document.getElementById(e.elementId),n=window.sfBlazor.getCompInstance(e.elementId),this.dotnetRef=n._dotnetInstance,this.elementRef=i,!n)return[3,33];switch(e.action){case"Load":return[3,1];case"Unload":return[3,3];case"RenderPdfPages":return[3,5];case"VirtualLoad":return[3,7];case"Download":return[3,9];case"GetDocumentAsByteArray":return[3,11];case"PrintImages":return[3,13];case"Search":return[3,15];case"Bookmarks":return[3,17];case"RenderThumbnailImages":return[3,19];case"RenderAnnotationComments":return[3,21];case"RenderPdfTexts":return[3,23];case"ImportAnnotations":return[3,25];case"ExportAnnotations":return[3,27];case"ExportFormFields":return[3,29];case"ImportFormFields":return[3,31]}return[3,33];case 1:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 2:return t=s.sent(),n.viewerBase.loadRequestHandler.successHandler(t),[3,33];case 3:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 4:return t=s.sent(),n.viewerBase.unloadRequestHandler.successHandler(t),[3,33];case 5:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 6:return t=s.sent(),n.viewerBase.pageRequestHandler.successHandler(t),[3,33];case 7:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 8:return t=s.sent(),n.viewerBase.virtualLoadRequestHandler.successHandler(t),[3,33];case 9:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 10:return t=s.sent(),n.viewerBase.dowonloadRequestHandler.successHandler(t),[3,33];case 11:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 12:return t=s.sent(),n.viewerBase.getDocumentAsByteArrayRequestHandler.successHandler(t),[3,33];case 13:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 14:return t=s.sent(),n.printModule.printRequestHandler.successHandler(t),[3,33];case 15:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 16:return t=s.sent(),n.textSearchModule.searchRequestHandler.successHandler(t),[3,33];case 17:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 18:return t=s.sent(),n.bookmarkViewModule.bookmarkRequestHandler.successHandler(t),[3,33];case 19:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 20:return t=s.sent(),n.thumbnailViewModule.thumbnailRequestHandler.successHandler(t),[3,33];case 21:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 22:return t=s.sent(),n.annotationModule.stickyNotesAnnotationModule.commentsRequestHandler.successHandler(t),[3,33];case 23:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 24:return t=s.sent(),n.textSearchModule.searchRequestHandler.successHandler(t),[3,33];case 25:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 26:return t=s.sent(),n.viewerBase.importAnnotationRequestHandler.successHandler(t),[3,33];case 27:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 28:return t=s.sent(),n.viewerBase.exportAnnotationRequestHandler.successHandler(t),[3,33];case 29:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 30:return t=s.sent(),n.viewerBase.exportFormFieldsRequestHandler.successHandler(t),[3,33];case 31:return[4,this.dotnetRef.invokeMethodAsync("GetPDFInfo",e)];case 32:return t=s.sent(),n.viewerBase.importFormFieldsRequestHandler.successHandler(t),[3,33];case 33:return[3,35];case 34:throw o=s.sent(),console.error("Unhandled Exception:",o),o;case 35:return[2]}}))}))}}}()},"./modules/sf-slider.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Slider=function(){"use strict";var e="e-handle-focused",t="e-handle-active",i="Horizontal",n=function(){function n(e,t,i,n){this.activeHandle=1,this.initialRendering=!0,this.isClicked=!1,this.isSliderMove=!1,this.isDragRange=!1,this.isTabPressed=!1,this.isKeyPressed=!1,this.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)",scaleTransform:"transform .4s cubic-bezier(.25, .8, .25, 1)"},this.isDestroyed=!1,this.element=t,this.dataId=e,window.sfBlazor.setCompInstance(this),this.dotNetRef=i,this.options=n,this.initialRendering=!0,null===this.options.Value&&(this.options.Value="Range"!==this.options.Type?this.options.Min:[this.options.Min,this.options.Max]),this.options.CustomValues&&(this.options.Min=0,this.options.Max=n.CustomValues.length-1)}return n.prototype.initialize=function(){if(this.sliderContainer=this.element.parentElement,this.sliderTrack=this.element.querySelector(".e-slider-track"),this.hiddenInput=this.element.parentElement.querySelector(".e-slider-input"),this.setElementWidth(this.options.Width),this.setHandler(),this.setZindex(),this.isMaterial="material"===this.getTheme(this.sliderContainer),this.isMaterial3="Material3"===this.getTheme(this.sliderContainer),sf.base.isNullOrUndefined(this.materialHandle)&&(this.isMaterial||this.isMaterial3)&&null!==this.options.Tooltip&&"Range"!==this.options.Type){this.materialHandle=document.createElement("div"),this.materialHandle.className="e-handle e-material-handle";var e=this.element.querySelector(".e-material-handle");sf.base.isNullOrUndefined(e)||this.element.removeChild(e),this.element.appendChild(this.materialHandle)}return this.setValue(!1),this.updateColorRangeBarPos(),this.initialRendering&&this.options.Enabled&&!this.options.ReadOnly&&(this.wireEvents(),this.initialRendering=!1),this.getTheme(this.sliderContainer)},n.prototype.rangeBarMousedown=function(e){var t,i;if("mousedown"===e.type&&e.preventDefault(),this.changedEventValue=this.options.Value,"Range"===this.options.Type&&e.target===this.rangeBar){var n=void 0,o=void 0;"mousedown"===e.type?(n=(t=[e.clientX,e.clientY])[0],o=t[1]):"touchstart"===e.type&&(n=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],o=i[1]),"Horizontal"===this.options.Orientation?(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-n):(this.firstPartRemain=o-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-o),this.minDiff=this.handleVal2-this.handleVal1;var s=this.element.querySelector(".e-tab-handle");s&&s.classList.remove("e-tab-handle"),sf.base.EventHandler.add(document,"mousemove touchmove",this.dragRangeBarMove,this),sf.base.EventHandler.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},n.prototype.dragRangeBarUp=function(e){this.triggerChangeEvent(this.changedEventValue,e,!0),sf.base.EventHandler.remove(document,"mousemove touchmove",this.dragRangeBarMove),sf.base.EventHandler.remove(document,"mouseup touchend",this.dragRangeBarUp)},n.prototype.triggerChangeEvent=function(e,t,i){if(null!==this.options.Events){var n="touchend"===t.type||t.currentTarget===document;this.options.Events.onChange.hasDelegate&&n&&!this.options.IsImmediateValue&&this.isValueChange(e)&&this.invokeEvent(e,!1),(n||i)&&this.options.Events.valueChange.hasDelegate&&this.isValueChange(e)&&(this.invokeEvent(e,!0),this.changedEventValue=this.options.Value)}},n.prototype.invokeEvent=function(e,t){this.dotNetRef.invokeMethodAsync("TriggerEvent",{PreviousValue:e,Value:this.options.Value,isValueChanged:t})},n.prototype.handleValueAdjust=function(e,t,i){1===i?(this.handleVal1=t,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=t,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},n.prototype.getLimitValueAndPosition=function(e,t,i,n){return sf.base.isNullOrUndefined(t)&&(t=this.options.Min,sf.base.isNullOrUndefined(e)&&n&&(e=t)),sf.base.isNullOrUndefined(i)&&(i=this.options.Max,sf.base.isNullOrUndefined(e)&&n&&(e=i)),e<t&&(e=t),e>i&&(e=i),[e,this.checkHandlePosition(e)]},n.prototype.dragRangeBarMove=function(e){var t,i,n,o,s;"touchmove"!==e.type&&e.preventDefault(),this.isDragRange=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===e.type?(o=(t=[e.clientX,e.clientY])[0],s=t[1]):(o=(i=[e.changedTouches[0].clientX,e.changedTouches[0].clientY])[0],s=i[1]),"mousemove"===e.type?n={x:e.clientX,y:e.clientY}:"touchmove"!==e.type&&"touchstart"!==e.type||(n={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY});var a=this.options.Limits;if(sf.base.isNullOrUndefined(a)||(!a.enabled||!a.startHandleFixed)&&(!a.enabled||!a.endHandleFixed)){if(n=this.options.EnableRtl?{x:o+this.secondPartRemain,y:s+this.secondPartRemain}:{x:o-this.firstPartRemain,y:s+this.secondPartRemain},this.options.Min>this.options.Max?(this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2)):(this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1)),n=this.options.EnableRtl?{x:o-this.firstPartRemain,y:s-this.firstPartRemain}:{x:o+this.secondPartRemain,y:s-this.firstPartRemain},this.options.Min>this.options.Max?(this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1)):(this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2)),!sf.base.isNullOrUndefined(this.options.Limits)&&this.options.Limits.enabled){var r=this.getLimitValueAndPosition(this.handleVal1,a.minStart,a.minEnd);this.handleVal1=r[0],this.handlePos1=r[1],this.handleVal1===a.minEnd&&this.handleValueAdjust(this.handleVal1,a.minEnd,1),this.handleVal1===a.minStart&&this.handleValueAdjust(this.handleVal1,a.minStart,1),r=this.getLimitValueAndPosition(this.handleVal2,a.maxStart,a.maxEnd),this.handleVal2=r[0],this.handlePos2=r[1],this.handleVal2===a.maxStart&&this.handleValueAdjust(this.handleVal2,a.maxStart,2),this.handleVal2===a.maxEnd&&this.handleValueAdjust(this.handleVal2,a.maxEnd,2)}this.handleVal2===(this.options.Min>this.options.Max?this.options.Min:this.options.Max)&&this.handleValueAdjust(this.handleVal2,this.options.Min>this.options.Max?this.options.Min:this.options.Max,2),this.handleVal1===(this.options.Min>this.options.Max?this.options.Max:this.options.Min)&&this.handleValueAdjust(this.handleVal1,this.options.Min>this.options.Max?this.options.Max:this.options.Min,1)}var l=this.options.IsImmediateValue?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal;this.setHandlePosition(e),this.updateValue(),"Default"!==this.options.Type&&(this.rangeBar.style.transition=this.transition.rangeBar,this.setRangeBarPosition()),null!==this.options.Events&&this.options.Events.onChange.hasDelegate&&this.isValueChange(l)&&this.options.IsImmediateValue&&this.invokeEvent(l,!1)},n.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"keyup",this.keyUp,this),sf.base.EventHandler.add(this.element,"focusout",this.focusOut,this),"Range"===this.options.Type&&sf.base.EventHandler.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),this.onResize=this.reposition.bind(this),window.addEventListener("resize",this.onResize),this.wireFirstHandleEventArgs(),"Range"===this.options.Type&&this.wireSecondHandleEventArgs()},n.prototype.wireFirstHandleEventArgs=function(){sf.base.EventHandler.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),sf.base.EventHandler.add(this.firstHandle,"mouseup touchend",this.sliderBarUp,this)},n.prototype.wireSecondHandleEventArgs=function(){sf.base.EventHandler.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),sf.base.EventHandler.add(this.secondHandle,"mouseup touchend",this.sliderBarUp,this)},n.prototype.unWireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler),sf.base.EventHandler.remove(this.element,"keyup",this.keyUp),sf.base.EventHandler.remove(this.element,"focusout",this.focusOut),"Range"===this.options.Type&&sf.base.EventHandler.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),window.removeEventListener("resize",this.onResize),this.unWireFirstHandleEventArgs(),"Range"===this.options.Type&&this.unWireSecondHandleEventArgs()},n.prototype.unWireFirstHandleEventArgs=function(){sf.base.EventHandler.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),sf.base.EventHandler.remove(this.firstHandle,"mouseup touchend",this.sliderBarUp)},n.prototype.unWireSecondHandleEventArgs=function(){sf.base.EventHandler.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),sf.base.EventHandler.remove(this.secondHandle,"mouseup touchend",this.sliderBarUp)},n.prototype.isValueChange=function(e){return"Range"===this.options.Type?e[0]!==this.options.Value[0]||e[1]!==this.options.Value[1]:e!==this.options.Value},n.prototype.focusOut=function(){var e=this;setTimeout((function(){e.isDestroyed||(null!==e.options.Tooltip&&e.options.Tooltip.isVisible&&("Range"===e.options.Type||sf.base.isNullOrUndefined(e.materialHandle)||(e.materialHandle.style.transform="scale(1)"),e.dotNetRef.invokeMethodAsync("CloseTooltip")),e.isTabPressed&&e.handleFocusOut())}),10)},n.prototype.reposition=function(){this.initialRendering=!1,this.initialize()},n.prototype.handleValueUpdate=function(){return"Range"===this.options.Type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},n.prototype.handleFocusOut=function(){if(this.firstHandle.classList.contains(e)&&this.firstHandle.classList.remove(e),this.firstHandle.classList.contains(t)&&this.firstHandle.classList.remove(t),this.firstHandle.classList.contains("e-tab-handle")&&this.firstHandle.classList.remove("e-tab-handle"),"Range"===this.options.Type&&(this.secondHandle.classList.contains(e)&&this.secondHandle.classList.remove(e),this.secondHandle.classList.contains(t)&&this.secondHandle.classList.remove(t),this.secondHandle.classList.contains("e-tab-handle")&&this.secondHandle.classList.remove("e-tab-handle")),this.isTabPressed){this.isTabPressed=!1;var i=sf.base.select(".e-tab-handle",this.element);i&&sf.base.removeClass([i],"e-tab-handle")}},n.prototype.keyUp=function(i){var n=i.target;if(9===i.keyCode&&n.classList.contains("e-handle")){if(this.isTabPressed=!0,!n.classList.contains("e-tab-handle")){var o=sf.base.select(".e-tab-handle",this.element);if(o&&sf.base.removeClass([o],"e-tab-handle"),sf.base.addClass([n],"e-tab-handle"),"Range"===this.options.Type){var s=n.previousElementSibling;s&&s.classList?this.activeHandle=s.classList.contains("e-handle")?2:1:this.activeHandle=1}}this.changedEventValue=this.previousHandleVal,n===this.firstHandle?sf.base.addClass([this.firstHandle],[e,t,"e-tab-handle"]):sf.base.addClass([this.secondHandle],[e,t,"e-tab-handle"])}},n.prototype.handleFocus=function(i){this.element.focus(),this.getHandlePosition(i),this.changedEventValue=this.previousHandleVal,this.sliderBarClick(),i.currentTarget===this.firstHandle?(this.firstHandle.classList.add(e),this.firstHandle.classList.add(t),this.firstHandle.classList.add("e-tab-handle")):(this.secondHandle.classList.add(e),this.secondHandle.classList.add(t),this.secondHandle.classList.add("e-tab-handle")),sf.base.EventHandler.add(document,"mousemove touchmove",this.sliderBarMove,this),sf.base.EventHandler.add(document,"mouseup touchend",this.sliderBarUp,this)},n.prototype.sliderBarMove=function(e){if("touchmove"===e.type&&e.target.parentElement===this.element||"mousemove"===e.type){"touchmove"!==e.type&&e.preventDefault(),this.isSliderMove=!0;var t=void 0;"mousemove"===e.type?t={x:e.clientX,y:e.clientY}:"touchmove"!==e.type&&"touchstart"!==e.type||(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}),this.handlePos=this.xyToPosition(t),this.handleVal=this.positionToValue(this.handlePos),this.handlePos=this.checkHandlePosition(this.handleVal),this.firstHandle.style.transition=this.transition.scaleTransform,"Range"===this.options.Type&&(this.secondHandle.style.transition=this.transition.scaleTransform),this.rangeBar&&(this.rangeBar.style.transition="none"),"Range"===this.options.Type?-1===this.previousHandleVal.indexOf(this.handleVal)&&(1===this.activeHandle&&this.handleVal<=this.handleVal2||2===this.activeHandle&&this.handleVal>=this.handleVal1)&&(null!=this.options.Events&&this.options.Events.onChange.hasDelegate&&this.options.IsImmediateValue?this.callChangeEvent(!1):this.sliderBarClick()):this.previousHandleVal!==this.handleVal&&(null!==this.options.Events&&this.options.Events.onChange.hasDelegate&&this.options.IsImmediateValue?this.callChangeEvent(!1):this.sliderBarClick())}},n.prototype.callChangeEvent=function(e){var t=this.options.IsImmediateValue?this.previousHandleVal:this.changedEventValue?this.changedEventValue:this.previousHandleVal;this.sliderBarClick(),this.isValueChange(t)&&this.invokeEvent(t,e)},n.prototype.updateHandleAttributes=function(e,t){"aria-valuenow"===e?"Range"===this.options.Type?(this.firstHandle.setAttribute(e,t[0]),this.secondHandle.setAttribute(e,t[1])):this.firstHandle.setAttribute(e,t[0]):(this.firstHandle.setAttribute(e,t[0]),"Range"===this.options.Type&&this.secondHandle.setAttribute(e,t[0]))},n.prototype.getTheme=function(e){return window.getComputedStyle(e,":after").getPropertyValue("content").replace(/['"]+/g,"")},n.prototype.setZindex=function(){sf.base.isNullOrUndefined(this.options.Ticks)||"None"===this.options.Ticks.placement||(this.element.getElementsByTagName("ul")[0].style.zIndex="-1",this.element.style.zIndex="8"),"material"!==this.getTheme(this.sliderContainer)&&"Material3"!==this.getTheme(this.sliderContainer)||sf.base.isNullOrUndefined(this.options.Ticks)||"Both"!==this.options.Ticks.placement||(this.element.style.zIndex="8"),this.firstHandle.style.zIndex="9","Range"===this.options.Type&&(this.secondHandle.style.zIndex="10")},n.prototype.sliderBarUp=function(e){this.handleFocusOut(),sf.base.EventHandler.remove(document,"mousemove touchmove",this.sliderBarMove),sf.base.EventHandler.remove(document,"mouseup touchend",this.sliderBarUp),this.isSliderMove=!1,this.transitionNode(),this.triggerChangeEvent(this.changedEventValue,e,!1)},n.prototype.transitionNode=function(){this.firstHandle.style.transition="none","Range"===this.options.Type&&(this.secondHandle.style.transition="none"),this.rangeBar&&(this.rangeBar.style.transition="none")},n.prototype.clickHandler=function(e){if(this.isDragRange)this.isDragRange=!1;else{e.preventDefault();var t=this.changedEventValue;if(this.getHandlePosition(e),null!=this.options.Events&&this.options.Events.onChange.hasDelegate||null!=this.options.Events&&this.options.Events.valueChange.hasDelegate?(this.isClicked=!0,this.sliderBarClick(),this.options.Events.onChange.hasDelegate&&this.callChangeEvent(!1),t=this.isSliderMove||sf.base.isNullOrUndefined(this.changedEventValue)?this.previousHandleVal:this.changedEventValue,this.triggerChangeEvent(t,e,!0)):this.sliderBarClick(),this.hiddenInput&&this.hiddenInput.name&&this.hiddenInput.name.includes("imageEditor")&&this.changedEventValue!==this.previousHandleVal){var i=new Event("custom-changed",{bubbles:!0,cancelable:!0});this.hiddenInput.dispatchEvent(i)}this.isClicked&&(this.previousHandleVal=this.options.Value),this.changedEventValue=this.previousHandleVal,this.isClicked=!1}},n.prototype.updateNewHandleValue=function(e,t,i){return(i[0]||i[1])&&(e<i[0]?(e=i[0],t=this.checkHandlePosition(e)):e>i[1]&&(e=i[1],t=this.checkHandlePosition(e))),[e,t]},n.prototype.sliderBarClick=function(){if("Range"!==this.options.Type||1===this.activeHandle&&this.handleVal1<=this.handleVal2||2===this.activeHandle&&this.handleVal1<=this.handleVal2){if(this.firstHandle.style.transition=this.transition.handle,"Range"===this.options.Type&&(this.secondHandle.style.transition=this.transition.handle),this.rangeBar&&(this.rangeBar.style.transition=this.transition.rangeBar),this.options.Limits){var e=void 0;if(1!==this.activeHandle||this.options.Limits.startHandleFixed){if(2===this.activeHandle&&!this.options.Limits.endHandleFixed){e=[this.options.Limits.maxStart,this.options.Limits.maxEnd];t=this.updateNewHandleValue(this.handleVal,this.handlePos,e);this.updateHandleValue(this.secondHandle,t[0],t[1])}}else{e=[this.options.Limits.minStart,this.options.Limits.minEnd];var t=this.updateNewHandleValue(this.handleVal,this.handlePos,e);this.updateHandleValue(this.firstHandle,t[0],t[1],!0),!this.isMaterial&&!this.isMaterial3||sf.base.isNullOrUndefined(this.materialHandle)||"Range"===this.options.Type||this.updateHandleValue(this.materialHandle,t[0],t[1],1===this.activeHandle)}}else{var i=1===this.activeHandle?this.firstHandle:this.secondHandle;this.updateHandleValue(i,this.handleVal,this.handlePos,1===this.activeHandle),!this.isMaterial&&!this.isMaterial3||sf.base.isNullOrUndefined(this.materialHandle)||"Range"===this.options.Type||this.updateHandleValue(this.materialHandle,this.handleVal,this.handlePos,1===this.activeHandle)}"Default"!==this.options.Type&&this.setRangeBarPosition(),this.updateValue()}},n.prototype.updateHandleValue=function(e,t,i,n){void 0===n&&(n=!1),this.applyHandlePosition(e,i),n?(this.handleVal1=t,this.handlePos1=i):(this.handleVal2=t,this.handlePos2=i),this.updateAriaValue()},n.prototype.updateAriaValue=function(){"Range"!==this.options.Type?this.options.CustomValues?this.updateHandleAttributes("aria-valuenow",[this.options.CustomValues[this.handleVal1].toString()]):this.updateHandleAttributes("aria-valuenow",[this.handleVal1.toString()]):this.options.CustomValues?this.updateHandleAttributes("aria-valuenow",[this.options.CustomValues[this.handleVal1].toString(),this.options.CustomValues[this.handleVal2].toString()]):this.updateHandleAttributes("aria-valuenow",[this.handleVal1.toString(),this.handleVal2.toString()])},n.prototype.positionToValue=function(e){var t,n=parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min));return t=this.options.Orientation===i?e/this.element.getBoundingClientRect().width*n:e/this.element.getBoundingClientRect().height*n,this.add(t,parseFloat(this.options.Min.toString()),!0)},n.prototype.add=function(e,t,i){var n=Math.pow(10,3);return i?(Math.round(e*n)+Math.round(t*n))/n:(Math.round(e*n)-Math.round(t*n))/n},n.prototype.setElementWidth=function(e){sf.base.isNullOrUndefined(e)||("number"==typeof e?this.sliderContainer.style.width=sf.base.formatUnit(e):"string"==typeof e&&(this.sliderContainer.style.width=e.match(/px|%|em/)?e:sf.base.formatUnit(e)))},n.prototype.xyToPosition=function(e){var t=this.element.getBoundingClientRect();if(this.options.Min===this.options.Max)return 100;if(this.options.Orientation===i){var n=e.x-t.left,o=this.element.offsetWidth/100;this.posvalue=n/o}else{var s=e.y-t.top;o=this.element.offsetHeight/100;this.posvalue=100-s/o}var a=this.stepValueCalculation(this.posvalue);return a<0?a=0:a>100&&(a=100),this.options.EnableRtl&&this.options.Orientation===i&&(a=100-a),this.options.Orientation===i?t.width*(a/100):t.height*(a/100)},n.prototype.stepValueCalculation=function(e){0===this.options.Step&&(this.options.Step=1);var t=parseFloat(sf.base.formatUnit(this.options.Step))/((parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min)))/100),i=e%Math.abs(t);return 0!==i&&(t/2>i?e-=i:e+=Math.abs(t)-i),e},n.prototype.setHandler=function(){this.createFirstHandle(),this.createSecondHandle()},n.prototype.createSecondHandle=function(){this.secondHandle=this.element.querySelector(".e-handle-second")},n.prototype.createFirstHandle=function(){this.firstHandle=this.element.querySelector(".e-handle-first")},n.prototype.setValue=function(e){void 0===e&&(e=!0);var t="Range"!==this.options.Type?this.options.Value:this.options.Value[0];if(this.handleVal1=sf.base.isNullOrUndefined(this.options.Value)?this.checkHandleValue(parseFloat(this.options.Min.toString())):this.checkHandleValue(parseFloat(t.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),null!=this.options.Limits){var i=this.updateNewHandleValue(this.handleVal1,this.handlePos1,[this.options.Limits.minStart,this.options.Limits.minEnd]);this.handleVal1=i[0],this.handlePos1=i[1]}if("Range"===this.options.Type&&(this.handleVal2=sf.base.isNullOrUndefined(this.options.Value)?this.checkHandleValue(parseFloat(this.options.Max.toString())):this.checkHandleValue(parseFloat(this.options.Value[1].toString())),this.handlePos2=this.checkHandlePosition(this.handleVal2),null!=this.options.Limits)){i=this.updateNewHandleValue(this.handleVal2,this.handlePos2,[this.options.Limits.maxStart,this.options.Limits.maxEnd]);this.handleVal2=i[0],this.handlePos2=i[1]}this.setHandlePosition(null),"Default"!==this.options.Type&&this.setRangeBarPosition(),null!==this.options.Ticks&&"None"!==this.options.Ticks.placement&&this.setTickValuePosition(),this.updateValue(e)},n.prototype.updateColorRangeBarPos=function(){if(null!=this.options.ColorRange)for(var e=this.sliderTrack.children,t=0;t<this.options.ColorRange.length;t++)this.options.Orientation===i?(this.options.EnableRtl||(e[t].style.left=this.options.EnableRtl?this.checkHandlePosition(this.options.Max-this.options.ColorRange[t].end)+"px":this.checkHandlePosition(this.options.ColorRange[t].start)+"px"),e[t].style.width=this.checkHandlePosition(this.options.ColorRange[t].end)-this.checkHandlePosition(this.options.ColorRange[t].start)+"px"):(e[t].style.bottom=this.checkHandlePosition(this.options.ColorRange[t].start)+"px",e[t].style.height=this.checkHandlePosition(this.options.ColorRange[t].end)-this.checkHandlePosition(this.options.ColorRange[t].start)+"px"),e[t].style.removeProperty("display")},n.prototype.setTickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var e,t,n=this.firstChild.getBoundingClientRect(),o=this.options.Ticks.smallStep,s=Math.abs(parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min)))/o;this.firstChild.children.length>0&&(e=this.firstChild.children[0].getBoundingClientRect());var a,r=[this.element.querySelectorAll(".e-tick.e-large .e-tick-value")];a="Both"===this.options.Ticks.placement?[].slice.call(r[0],2):[].slice.call(r[0],1);for(var l=this.options.Orientation!==i?2*n.height:2*n.width,d=0;d<this.firstChild.children.length;d++)this.options.Orientation===i?this.options.EnableRtl?this.firstChild.children[d].style.left=(l-this.firstChild.children[d].getBoundingClientRect().width)/2+"px":this.firstChild.children[d].style.left=-e.width/2+"px":this.firstChild.children[d].style.top=-e.width/2+"px";for(d=0;d<a.length;d++)t=a[d].getBoundingClientRect(),this.options.Orientation===i?(sf.base.setStyleAttribute(a[d],{left:(l-t.width)/2+"px"}),this.options.EnableRtl&&a[d].parentElement.classList.contains("e-last-tick")&&sf.base.setStyleAttribute(a[d],{left:-t.width/2+"px"})):sf.base.setStyleAttribute(a[d],{top:(l-t.height)/2+"px"});0===s&&this.firstChild.classList.remove("e-last-tick"),null!=this.firstChild&&(this.options.Orientation===i?this.firstChild.children[0].style.left:e.height),null!=a[0]&&(this.options.Orientation===i?a[0].style.left:t.height),null!=this.firstChild&&null!=a[0]&&(this.options.Orientation===i?(this.firstChild.children[0].style.left,a[0].style.left):(e.height,t.height)),this.element.querySelector("ul").style.removeProperty("visibility")},n.prototype.setRangeBarPosition=function(){if(this.rangeBar=this.element.querySelector(".e-range"),!this.initialRendering)if(this.options.Orientation===i)"MinRange"===this.options.Type?(this.options.EnableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",sf.base.setStyleAttribute(this.rangeBar,{width:sf.base.isNullOrUndefined(this.handlePos1)?0:this.handlePos1+"px"})):(this.options.EnableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",sf.base.setStyleAttribute(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}));else if("MinRange"===this.options.Type){var e=this.element.getBoundingClientRect();this.rangeBar.style.bottom=this.options.Min>this.options.Max?this.handlePos1+"px":"0px",sf.base.setStyleAttribute(this.rangeBar,{height:sf.base.isNullOrUndefined(this.handlePos1)?0:this.options.Min>this.options.Max?e.height-this.handlePos1+"px":this.handlePos1+"px"})}else this.rangeBar.style.bottom=this.options.Min>this.options.Max?this.handlePos2+"px":this.handlePos1+"px",sf.base.setStyleAttribute(this.rangeBar,{height:this.options.Min>this.options.Max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"})},n.prototype.setHandlePosition=function(e){this.updateHandleAttributes("aria-valuemin",[this.options.Min.toString()]),this.updateHandleAttributes("aria-valuemax",[this.options.Max.toString()]);var t=[this.handlePos1,this.handlePos2];this.updateHandlePosition(this.firstHandle,t[0]),!this.isMaterial&&!this.isMaterial3||"Range"===this.options.Type||sf.base.isNullOrUndefined(this.materialHandle)||this.updateHandlePosition(this.materialHandle,t[0]),"Range"===this.options.Type&&this.updateHandlePosition(this.secondHandle,t[1]),this.updateAriaValue()},n.prototype.getHandlePosition=function(e){var t;if("mousedown"!==e.type&&"mouseup"!==e.type||e.preventDefault(),"mousedown"===e.type||"mouseup"===e.type||"click"===e.type?t={x:e.clientX,y:e.clientY}:"touchend"!==e.type&&"touchstart"!==e.type||(t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}),this.handlePos=this.xyToPosition(t),this.handleVal=this.positionToValue(this.handlePos),this.handleVal2<this.handleVal)this.activeHandle=2;else if(this.handleVal1>this.handleVal)this.activeHandle=1;else{var i=this.handleVal>this.handleVal1?this.handleVal-this.handleVal1:this.handleVal1-this.handleVal,n=this.handleVal>this.handleVal2?this.handleVal-this.handleVal2:this.handleVal2-this.handleVal;this.activeHandle=i>n?2:1}},n.prototype.updateHandlePosition=function(e,t){this.applyHandlePosition(e,t),e.style.removeProperty("visibility")},n.prototype.applyHandlePosition=function(e,t){this.isKeyPressed?this.isClicked&&(e.style.transition="none"):e.style.transition=this.transition.handle,(!this.initialRendering||(this.isMaterial||this.isMaterial3)&&"Range"!==this.options.Type)&&(this.options.Orientation===i?this.options.EnableRtl?e.style.right=t+"px":e.style.left=t+"px":e.style.bottom=t+"px")},n.prototype.checkHandleValue=function(e){if(this.options.Min===this.options.Max)return parseFloat(sf.base.formatUnit(this.options.Max));var t=this.handleStartEnd();return e<t.start?e=t.start:e>t.end&&(e=t.end),e},n.prototype.checkHandlePosition=function(e){var t,n=this.element.getBoundingClientRect();return e=100*(e-parseFloat(sf.base.formatUnit(this.options.Min)))/(parseFloat(sf.base.formatUnit(this.options.Max))-parseFloat(sf.base.formatUnit(this.options.Min))),t=this.options.Orientation===i?n.width*(e/100):n.height*(e/100),parseFloat(sf.base.formatUnit(this.options.Max))===parseFloat(sf.base.formatUnit(this.options.Min))&&(t=this.options.Orientation===i?n.width:n.height),t},n.prototype.handleStartEnd=function(){return this.options.Min>this.options.Max?{start:this.options.Max,end:this.options.Min}:{start:this.options.Min,end:this.options.Max}},n.prototype.updateValue=function(e){var t=this;if(void 0===e&&(e=!0),"Range"===this.options.Type?this.options.Value=[this.handleVal1,this.handleVal2]:this.options.Value=this.handleVal1,this.isClicked||(this.previousHandleVal=this.options.Value),e&&(null!==this.options.Tooltip?setTimeout((function(){t.dotNetRef.invokeMethodAsync("UpdateValue",t.options.Value,t.activeHandle)}),300):(!this.isMaterial&&!this.isMaterial3||null===this.options.Tooltip||sf.base.isNullOrUndefined(this.materialHandle)||"Range"===this.options.Type||(this.materialHandle.style.transform="scale(0)"),this.dotNetRef.invokeMethodAsync("UpdateValue",this.options.Value,this.activeHandle)),this.hiddenInput&&this.hiddenInput.name&&this.hiddenInput.name.includes("imageEditor"))){this.hiddenInput.value=this.options.Value;var i=new Event("custom-change",{bubbles:!0,cancelable:!0});this.hiddenInput.dispatchEvent(i)}},n.prototype.updateLimitData=function(e){this.options.Value=this.tempValue?this.tempValue:this.options.Value,this.options.Limits=e,this.setValue()},n.prototype.updateTicksData=function(e){this.options.Ticks=e,this.setTickValuePosition()},n.prototype.updateSliderValue=function(e){var t=this.options.Value;this.options.Value=e,this.setValue(),this.invokeEvent(t,!1)},n.prototype.updateStepValue=function(e){this.options.Step=e},n.prototype.destroy=function(){this.element.style.display="none",this.unWireEvents(),this.element=null,this.isDestroyed=!0},n.prototype.updateTooltipPosition=function(e){var t=document.getElementById(e);!sf.base.isNullOrUndefined(t)&&"Range"!==this.options.Type&&sf.base.isNullOrUndefined(this.options.Tooltip.format)&&(t.style.transform=this.options.Orientation===i?"Before"===this.options.Tooltip.placement?"rotate(45deg)":"rotate(225deg)":"Before"===this.options.Tooltip.placement?"rotate(-45deg)":"rotate(-225deg)")},n.prototype.propertyChanges=function(e){void 0!==e.Enabled&&(this.options.Enabled=e.Enabled),!sf.base.isNullOrUndefined(e.SliderColorRange)&&e.SliderColorRange.length>0&&(this.options.ColorRange=e.SliderColorRange,this.updateColorRangeBarPos()),void 0!==e.ShowButtons&&(this.setValue(!1),this.updateColorRangeBarPos()),void 0!==e.ReadOnly&&(this.options.ReadOnly=e.ReadOnly),void 0!==e.Value&&(this.options.Value=e.Value,this.tempValue=this.options.Value,this.setValue(!1)),void 0!==e.Max&&(this.options.Max=e.Max),void 0!==e.Step&&(this.options.Step=e.Step),void 0!==e.Min&&(this.options.Min=e.Min),void 0!==e.IsImmediateValue&&(this.options.IsImmediateValue=e.IsImmediateValue),this.options.Enabled&&!this.options.ReadOnly?(this.unWireEvents(),sf.base.isNullOrUndefined(e.Max)&&this.wireEvents()):this.unWireEvents()},n}();return{initialize:function(e,t,i,o){t&&new n(e,t,i,o);var s=window.sfBlazor.getCompInstance(e);return t&&!sf.base.isNullOrUndefined(s)?s.initialize():null},updateLimitData:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateLimitData(t)},updateTicksData:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateTicksData(t)},updateSliderValue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateSliderValue(t)},updateSTepValue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateStepValue(t)},updatedProperties:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.propertyChanges(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},reposition:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.reposition()},updateTooltipPosition:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.updateTooltipPosition(t)}}}()},"./modules/sf-textbox.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TextBox=function(){"use strict";var e=function(){function e(e,t,i){this.element=e,this.container=i,this.element.blazor_input_instance=this,this.dotNetRef=t,this.isDestroyed=!1}return e.prototype.initialize=function(){sf.base.EventHandler.add(this.element,"blur",this.blurHandler,this);var e=this.container?this.container.querySelectorAll(".e-input-group-icon"):null;if(e&&e.length>0)for(var t=0;t<e.length;t++)sf.base.EventHandler.add(e[t],"mousedown",this.onMouseDownRipple,this),sf.base.EventHandler.add(e[t],"mouseup",this.onMouseUpRipple,this)},e.prototype.calculateWidth=function(){var e=document.getElementsByClassName("e-float-text");if(null!==e)for(var t=0;t<e.length;t++)if(this.container.classList.contains("e-outline")&&this.container.classList.contains("e-prepend")&&e[t].classList.contains("e-label-top")){var i=this.container.clientWidth-this.element.clientWidth;e[t].style.left=-i.toString()+"px",e[t].style.width="auto"}else e[t].style.left="0px"},e.prototype.onMouseDownRipple=function(e){var t=e?e.currentTarget:null;!t||this.container.classList.contains("e-disabled")||this.container.querySelector("input").readOnly||t.classList.add("e-input-btn-ripple")},e.prototype.onMouseUpRipple=function(e){var t=e?e.currentTarget:null;t&&setTimeout((function(){t.classList.remove("e-input-btn-ripple")}),500)},e.prototype.blurHandler=function(){var e="undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Mac")&&navigator.maxTouchPoints>1;this.isDestroyed?sf.base.EventHandler.remove(this.element,"blur",this.blurHandler):this.dotNetRef.invokeMethodAsync("BlurHandler",this.element.value,e).catch((function(){}))},e.prototype.destroy=function(){sf.base.EventHandler.remove(this.element,"blur",this.blurHandler)},e}();return{initialize:function(t,i,n){if(t){var o=new e(t,i,n);if(t&&t.blazor_input_instance&&(t.blazor_input_instance.initialize(),!sf.base.isNullOrUndefined(sf.base.closest(t,"fieldset"))&&sf.base.closest(t,"fieldset").disabled)){o.dotNetRef.invokeMethodAsync("UpdateFieldSetStatus",!1)}}},calculateWidth:function(t,i,n){t&&new e(t,i,n),t&&t.blazor_input_instance&&t.blazor_input_instance.calculateWidth()},focusIn:function(e){e.focus()},focusOut:function(e){e.blur()},destroyInput:function(e){e&&e.blazor_input_instance&&(e.blazor_input_instance.isDestroyed=!0,e.blazor_input_instance.destroy())}}}()},"./modules/sf-toast.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Toast=function(){"use strict";var e="e-toast-progress",t=function(){function t(e){this.progressObj=[],window.sfBlazor=window.sfBlazor,this.progressObj=[],this.updateContext(e),window.sfBlazor&&(sf.base.isNullOrUndefined(window.sfBlazor.instances)&&(window.sfBlazor.instances=[]),window.sfBlazor.instances[this.dataId]=this)}return t.prototype.initialize=function(){this.isDevice=sf.base.Browser.isDevice,"300px"===this.width&&(this.width=this.isDevice&&screen.width<768?"100%":"300px",this.toastContainer.classList.add("e-toast-full-width")),this.isDevice&&screen.width<768&&new sf.base.Touch(this.element,{swipe:this.swipeHandler.bind(this)})},t.prototype.show=function(t){sf.base.isNullOrUndefined(this.refElement)&&(this.refElement=sf.base.createElement("div",{className:"e-toast-ref-element"}),this.toastContainer=this.element.parentElement,this.toastContainer.parentElement.insertBefore(this.refElement,this.element.parentElement));this.setAnimation(t);var i="string"==typeof this.target?document.querySelector(this.target):document.body;if(t.rootElement.style.zIndex=sf.popups.getZindexPartial(t.rootElement)+"",!sf.base.isNullOrUndefined(i)){"BODY"===i.tagName?this.toastContainer.style.position="fixed":(this.toastContainer.style.position="absolute",i.style.position="relative"),i.appendChild(this.toastContainer),this.appendToast(t.element);var n=parseInt(t.element.id.split("toast_")[1],10);this.progressObj[n]={hideEstimatedTimeOfArrival:null,intervalId:null,maxHideTime:null,element:null,timeOutId:null,progressEle:null},this.progressObj[n].element=t.element,this.extendedTimeout>0&&this.timeOut>0&&(sf.base.EventHandler.add(t.element,"mouseover",this.toastHoverAction.bind(this,n)),sf.base.EventHandler.add(t.element,"mouseleave",this.delayedToastProgress.bind(this,n))),t.showProgressBar&&(this.progressObj[n].progressEle=t.element.querySelector("."+e)),sf.base.EventHandler.add(t.element,"keydown",this.keyDownHandler,this)}},t.prototype.getDomObject=function(e,t){return null!=t?window.sfBlazor.getDomObject(e,t):null},t.prototype.swipeHandler=function(e){var t=sf.base.closest(e.originalEvent.target,".e-toast:not(.e-toast-container)"),i=this.hideAnimation.effect;sf.base.isNullOrUndefined(t)||("Right"===e.swipeDirection?(this.hideAnimation.effect="SlideRightOut",this.hide("swipe",t)):"Left"===e.swipeDirection&&(this.hideAnimation.effect="SlideLeftOut",this.hide("swipe",t)),this.hideAnimation.effect=i)},t.prototype.delayedToastProgress=function(t){var i=this.progressObj[t],n=i.element;i.timeOutId=window.setTimeout(this.destroyToast.bind(this,n),this.extendedTimeout),i.maxHideTime=parseFloat(this.extendedTimeout+""),i.hideEstimatedTimeOfArrival=(new Date).getTime()+i.maxHideTime,sf.base.isNullOrUndefined(n.querySelector("."+e))||(i.intervalId=setInterval(this.updateProgressBar.bind(this,i),10))},t.prototype.toastHoverAction=function(t){this.dotNetRef.invokeMethodAsync("ClearTimeout",t),clearTimeout(this.progressObj[t].timeOutId),clearInterval(this.progressObj[t].intervalId),this.progressObj[t].hideEstimatedTimeOfArrival=0;var i=this.progressObj[t].element;sf.base.isNullOrUndefined(i.querySelector("."+e))||(this.progressObj[t].progressEle.style.width="0%"),this.dotNetRef.invokeMethodAsync("MouseoverEvent",t)},t.prototype.updateProgressBar=function(e){var t=(e.hideEstimatedTimeOfArrival-(new Date).getTime())/e.maxHideTime*100;t="LTR"===this.progressDirection?100-t:t,e.progressEle.style.width=t+"%"},t.prototype.appendToast=function(e){this.newestOnTop&&0!==this.toastContainer.childElementCount&&this.toastContainer.insertBefore(e,this.toastContainer.children[0]),sf.base.removeClass([e],"e-blazor-toast-hidden")},t.prototype.setAnimation=function(e){var t=this,i=this,n=this.showAnimation,o={duration:n.duration,name:n.effect,timingFunction:n.easing,begin:function(){e.element.style.display=""},end:function(){sf.base.isNullOrUndefined(document.querySelector("#"+i.element.id))||i.dotNetRef.invokeMethodAsync("OpenEvent",e.index,t.getDomObject("element",e.element))}};new sf.base.Animation(o).animate(e.element)},t.prototype.hide=function(e,t){if(!sf.base.isNullOrUndefined(this.toastContainer)&&0!==this.toastContainer.childElementCount)if("string"!=typeof t||"All"!==t){if("string"==typeof t&&"All"!==t){var i=this.toastContainer.querySelector("#toast_"+t);i&&(this.destroyToast(i,e),this.dotNetRef.invokeMethodAsync("DestroyTimer",parseInt(t,10)))}sf.base.isNullOrUndefined(t)&&(t=this.newestOnTop?this.toastContainer.lastElementChild:this.toastContainer.firstElementChild),this.destroyToast(t,e);var n=parseInt(t.id.split("toast_")[1],10);this.dotNetRef.invokeMethodAsync("DestroyTimer",n)}else for(var o=0;o<this.toastContainer.childElementCount;o++)this.destroyToast(this.toastContainer.children[o],e)},t.prototype.destroyToast=function(e,t){if(0!==this.toastContainer.attributes.length){var i=parseInt(e.id.split("toast_")[1],10);this.dotNetRef.invokeMethodAsync("OnCloseEvent",i,t)}},t.prototype.hideAnimationToast=function(e,t){var i=this,n=this.hideAnimation,o={duration:n.duration,name:n.effect,timingFunction:n.easing,end:function(){sf.base.detach(e),i.dotNetRef.invokeMethodAsync("CloseEvent",t)}};new sf.base.Animation({}).animate(e,o)},t.prototype.destroy=function(){if(!sf.base.isNullOrUndefined(this.toastContainer)){for(;this.toastContainer.attributes.length>0;)this.toastContainer.removeAttribute(this.toastContainer.attributes[0].name);for(var e=this.toastContainer.children,t=e.length-1;t>=0;t--)sf.base.detach(e[t]);sf.base.isNullOrUndefined(this.refElement)||sf.base.isNullOrUndefined(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.toastContainer,this.refElement),sf.base.detach(this.refElement),this.refElement=void 0),this.toastContainer=null}this.element=null,window.sfBlazor.instances[this.dataId]=null,window.sfBlazor.disposeWindowsInstance(this.dataId)},t.prototype.keyDownHandler=function(e){if(e.target.classList.contains("e-toast-close-icon")&&(13===e.keyCode||32===e.keyCode)){var t=e.target,i=sf.base.closest(t,".e-toast");this.destroyToast(i,"key")}},t.prototype.updateContext=function(e){sf.base.extend(this,this,e)},t}();return{initialize:function(e){e.dataId&&(new t(e),window.sfBlazor.instances[e.dataId].initialize())},show:function(e){e.rootElement&&(window.sfBlazor.instances[e.dataId].updateContext(e),window.sfBlazor.instances[e.dataId].show(e))},hideAnimationToast:function(e,t){if(e){var i=window.sfBlazor.instances[e].rootElement;window.sfBlazor.instances[e].hideAnimationToast(i.querySelector("#toast_"+t),t)}},hide:function(e,t,i,n){e&&(window.sfBlazor.instances[e].updateContext(i),window.sfBlazor.instances[e].hide(n,t))},appendToast:function(e,t){e&&window.sfBlazor.instances[e].appendToast(t)},destroy:function(e){e&&window.sfBlazor.instances[e].destroy()}}}()},"./modules/sf-toolbar.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Toolbar=function(){"use strict";var e="e-toolbar-items",t="e-blazor-toolbar-items",i="e-toolbar-item",n="e-toolbar-popup",o="."+i+":not(.e-overlay ):not(.e-separator ):not(.e-spacer ):not(.e-hidden )",s=function(){function s(e,t,i,n){this.resizeContext=this.resize.bind(this),this.orientationChangeContext=this.orientationChange.bind(this),window.sfBlazor=window.sfBlazor,this.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},this.element=t,this.dotNetRef=n,this.options=i,this.dataId=e,window.sfBlazor.setCompInstance(this)}return s.prototype.destroy=function(){this.unwireEvents(),this.clearProperty(),this.popObj=null,this.tbarAlign=null},s.prototype.wireEvents=function(){sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),window.addEventListener("orientationchange",this.orientationChangeContext),this.options.allowKeyboard&&this.wireKeyboardEvent()},s.prototype.wireKeyboardEvent=function(){this.keyModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),sf.base.EventHandler.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},s.prototype.updateTabIndex=function(e){var t=this.element.querySelector(o);if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(t.firstElementChild)){var i=t.firstElementChild.getAttribute("data-tabindex");if(i&&"-1"===i&&"INPUT"!==t.firstElementChild.tagName)t.firstElementChild.setAttribute("tabindex",e);else if(t.classList.contains("e-template")){var n=t.firstElementChild;sf.base.isNullOrUndefined(n)||(n.setAttribute("tabindex",sf.base.isNullOrUndefined(n.getAttribute("tabIndex"))?"-1":this.getDataTabindex(n)),n.setAttribute("data-tabindex",sf.base.isNullOrUndefined(n.getAttribute("tabIndex"))?"-1":this.getDataTabindex(n)))}}},s.prototype.unwireKeyboardEvent=function(){this.keyModule&&(sf.base.EventHandler.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},s.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var t=!sf.base.isNullOrUndefined(this.popObj)&&sf.base.isVisible(this.popObj.element)&&"Extended"!==this.options.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&t&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},s.prototype.unwireEvents=function(){sf.base.EventHandler.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),window.removeEventListener("orientationchange",this.orientationChangeContext),sf.base.EventHandler.remove(document,"scroll",this.docEvent),sf.base.EventHandler.remove(document,"click",this.docEvent)},s.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},s.prototype.docEvent=function(e){var t=sf.base.closest(e.target,".e-popup");this.popObj&&sf.base.isVisible(this.popObj.element)&&!t&&"Popup"===this.options.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},s.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&sf.base.addClass([this.scrollModule.element],"e-tbar-pos"),this.scrollModule.destroy(),this.scrollModule=null)},s.prototype.destroyMode=function(){this.scrollModule&&(this.scrollPosition=this.scrollModule.scrollEle[this.scrollModule.element.classList.contains("e-hscroll")?"scrollLeft":"scrollTop"],sf.base.removeClass([this.scrollModule.element],"e-rtl"),this.destroyScroll()),sf.base.removeClass([this.element],"e-tbar-extended"),sf.base.removeClass([this.element],"e-extended-toolbar");var e=this.element.querySelector(".e-toolbar-multirow");e&&sf.base.removeClass([e],"e-toolbar-multirow"),this.popObj&&this.popupRefresh(this.popObj.element,!0)},s.prototype.elementFocus=function(e){var t=e.firstElementChild;t?(t.focus(),this.activeEleSwitch(e)):e.focus()},s.prototype.clstElement=function(e,t){return e&&this.popObj&&sf.base.isVisible(this.popObj.element)?this.popObj.element.querySelector("."+i):this.element===t||e?this.element.querySelector(o):sf.base.closest(t,"."+i)},s.prototype.keyHandling=function(t,n,o,s,a){var r,l,d,h=this.popObj,p=this.element,c={name:"FadeOut",duration:100};switch(n.action){case"moveRight":if(this.options.isVertical)return;p===o?this.elementFocus(t):s||this.eleFocus(t,"next");break;case"moveLeft":if(this.options.isVertical)return;s||this.eleFocus(t,"previous");break;case"home":case"end":if(t){var u=sf.base.closest(t,".e-popup"),f=this.element.querySelector(".e-toolbar-extended");"Extended"===this.options.overflowMode&&f&&f.classList.contains("e-popup-open")&&(u="end"===n.action?f:null),u?sf.base.isVisible(this.popObj.element)&&(l=[].slice.call(u.children),r="home"===n.action?l[0]:l[l.length-1]):(l=this.element.querySelectorAll("."+e+" ."+i+":not(.e-separator):not(.e-spacer )"),r="home"===n.action?l[0]:l[l.length-1]),r&&this.elementFocus(r)}break;case"moveUp":case"moveDown":if(d="moveUp"===n.action?"previous":"next",this.options.isVertical)"moveUp"===n.action?this.eleFocus(t,"previous"):this.eleFocus(t,"next");else if(h&&sf.base.closest(o,".e-popup")){var m=h.element,g=m.firstElementChild;if("previous"===d&&g===t||"next"===d&&m.lastElementChild===t)return;this.eleFocus(t,d)}else"moveDown"===n.action&&h&&sf.base.isVisible(h.element)&&this.elementFocus(t);break;case"tab":if(!a&&!s){var w=t.firstElementChild;p===o&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(w),w.focus()))}break;case"popupClose":h&&"Extended"!==this.options.overflowMode&&h.hide(c);break;case"popupOpen":if(!s)return;h&&!sf.base.isVisible(h.element)?(h.element.style.top=p.offsetHeight+"px",h.show({name:"FadeIn",duration:100})):h.hide(c)}},s.prototype.keyActionHandler=function(e){var t=e.target;if("INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!this.element.classList.contains("e-overlay")){e.preventDefault();var i=t.classList.contains("e-hor-nav"),n=t.classList.contains("e-scroll-nav"),o=this.clstElement(i,t);(o||n)&&this.keyHandling(o,e,t,i,n)}},s.prototype.eleContains=function(e){var t=!!e.classList.contains("e-template")&&!sf.base.isNullOrUndefined(e.querySelector(".e-input"));return e.classList.contains("e-separator")||this.nonFocusableElements(e)||e.classList.contains("e-overlay")||e.getAttribute("disabled")||e.classList.contains("e-hidden")||!sf.base.isVisible(e)||t},s.prototype.eleFocus=function(e,t){var n=Object(e)[t+"ElementSibling"];if(n){if(this.eleContains(n))return void this.eleFocus(n,t);this.elementFocus(n)}else if(this.tbarAlign){var o=Object(e.parentElement)[t+"ElementSibling"];if(sf.base.isNullOrUndefined(o)||0!==o.children.length||(o=Object(o)[t+"ElementSibling"]),!sf.base.isNullOrUndefined(o)&&o.children.length>0)if("next"===t){var s=o.querySelector("."+i);this.eleContains(s)?this.eleFocus(s,t):(s.firstElementChild.focus(),this.activeEleSwitch(s))}else{s=o.lastElementChild;this.eleContains(s)?this.eleFocus(s,t):this.elementFocus(s)}}},s.prototype.clickHandler=function(e){if(!this.element.classList.contains("e-drag-action")){var t=sf.base.closest(e.target,"."+i);if(sf.base.isNullOrUndefined(t)||t.classList.contains("e-overlay")||sf.base.isNullOrUndefined(t.firstElementChild)||"true"===t.firstElementChild.getAttribute("aria-disabled")){var n,o,s=e.target,a=s.classList,r=this.element,l=sf.base.closest(s,".e-hor-nav");if(l||(l=s),r.children[0].classList.contains("e-hscroll")||r.children[0].classList.contains("e-vscroll")||!a.contains("e-hor-nav")||(a=s.querySelector(".e-icons").classList),(a.contains("e-popup-up-icon")||a.contains("e-popup-down-icon"))&&this.popupClickHandler(r,l,"e-rtl"),!sf.base.isNullOrUndefined(t)||l.classList.contains("e-hor-nav")){sf.base.isNullOrUndefined(t)||(n=parseInt(t.getAttribute("data-index"),10),o={id:t.id});var d={altKey:e.altKey,button:e.button,buttons:e.buttons,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,detail:e.detail,metaKey:e.metaKey,offsetX:e.offsetX,offsetY:e.offsetY,screenX:e.screenX,screenY:e.screenY,shiftKey:e.shiftKey,type:e.type};this.dotNetRef.invokeMethodAsync("TriggerClickEvent",d,n,o)}}}},s.prototype.popupClickHandler=function(e,t,i){var n=this.popObj;sf.base.isVisible(n.element)?(t.classList.remove("e-nav-active"),n.hide({name:"FadeOut",duration:100})):((e.classList.contains(i)||this.options.isVerticalLeft)&&(e.classList.contains(i)&&(n.enableRtl=!0),n.position={X:"left",Y:"top"}),0!==n.offsetX||e.classList.contains(i)||this.options.isVerticalLeft||(n.enableRtl=!1,n.position={X:"right",Y:"top"}),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px","Extended"===this.options.overflowMode&&(n.element.style.left="0px",n.element.style.minHeight="0px"),t.classList.add("e-nav-active"),n.show({name:"FadeIn",duration:100}))},s.prototype.render=function(){this.scrollModule=null,this.popObj=null,this.isExtendedOpen=!1,this.popupPriCount=0;var e=sf.base.formatUnit(this.options.width),t=sf.base.formatUnit(this.options.height);this.element&&("msie"===sf.base.Browser.info.name&&"auto"===this.options.height||sf.base.setStyleAttribute(this.element,{height:t}),sf.base.setStyleAttribute(this.element,{width:e}),this.renderControl(),this.wireEvents())},s.prototype.renderControl=function(){this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},s.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},s.prototype.itemsAlign=function(e,n,o){var s,a;this.tbarEle||(this.tbarEle=[]);for(var r=0;r<e.length;r++){var l=this.element.querySelector("."+t);(s=o?n.querySelector("."+i+'[id="'+e[parseInt(r.toString(),10)].id+'"]'):l.querySelector("."+i+'[id="'+e[parseInt(r.toString(),10)].id+'"]'))&&("Show"!==e[parseInt(r.toString(),10)].overflow&&e[parseInt(r.toString(),10)].showAlwaysInPopup&&!s.classList.contains("e-separator")&&this.popupPriCount++,e[parseInt(r.toString(),10)].htmlAttributes&&this.setAttr(e[parseInt(r.toString(),10)].htmlAttributes,s),"Button"===e[parseInt(r.toString(),10)].type&&(sf.base.EventHandler.remove(s,"click",this.itemClick),sf.base.EventHandler.add(s,"click",this.itemClick,this)),-1===this.tbarEle.indexOf(s)&&this.tbarEle.push(s),"MultiRow"===this.options.overflowMode&&o||(this.tbarAlign||this.tbarItemAlign(e[parseInt(r.toString(),10)],n,r),(a=n.querySelector(".e-toolbar-"+e[parseInt(r.toString(),10)].align.toLowerCase()))?(e[parseInt(r.toString(),10)].showAlwaysInPopup&&"Show"!==e[parseInt(r.toString(),10)].overflow||this.tbarAlgEle[(e[parseInt(r.toString(),10)].align+"s").toLowerCase()].push(s),a.appendChild(s)):o||n.appendChild(s)))}},s.prototype.serverItemsRefresh=function(i){var n=this.element,o=n.querySelector("."+t),s=n.querySelector("."+e);(s&&s.children.length>0||o.children.length>0)&&(!s&&n&&n.classList.contains("e-toolbar")&&n.firstElementChild&&(s=sf.base.createElement("div",{className:e}),n.insertBefore(s,n.firstElementChild)),this.itemsAlign(this.options.items,s,i),this.renderLayout(),this.refreshOverflow())},s.prototype.resetServerItems=function(n){if(!n){var o=this.element.querySelector("."+t),s=[].slice.call(sf.base.selectAll("."+e+" ."+i,this.element));sf.base.append(s,o),this.clearProperty()}},s.prototype.changeOrientation=function(){this.options.isVertical?(this.element.classList.add("e-vertical"),this.element.setAttribute("aria-orientation","vertical"),sf.base.setStyleAttribute(this.element,{height:sf.base.formatUnit(this.options.height),width:sf.base.formatUnit(this.options.width)})):(this.element.classList.remove("e-vertical"),this.element.setAttribute("aria-orientation","horizontal"),"auto"!==this.options.height&&"100%"!==this.options.height||(this.element.style.height=this.options.height)),this.destroyMode(),this.refreshOverflow()},s.prototype.initScroll=function(t,i){if(!this.scrollModule&&this.checkOverflow(t,i[0])){this.tbarAlign&&this.element.querySelector("."+e+" .e-toolbar-center").removeAttribute("style"),this.options.isVertical?this.scrollModule=new sf.navigations.VScroll({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},i[0]):this.scrollModule=new sf.navigations.HScroll({scrollStep:this.options.scrollStep,enableRtl:this.options.enableRtl},i[0]),this.scrollPosition&&(this.scrollModule.scrollEle[this.scrollModule.element.classList.contains("e-hscroll")?"scrollLeft":"scrollTop"]=this.scrollPosition,this.scrollPosition=null);var n=this.scrollModule.element.querySelector(".e-hscroll-bar, .e-vscroll-bar");n&&n.removeAttribute("tabindex"),sf.base.removeClass([this.scrollModule.element],"e-tbar-pos"),sf.base.setStyleAttribute(this.element,{overflow:"hidden"})}},s.prototype.itemWidthCal=function(e){var t,n=this,o=0;return[].slice.call(sf.base.selectAll("."+i,e)).forEach((function(e){sf.base.isVisible(e)&&!e.classList.contains("e-spacer")&&(t=window.getComputedStyle(e),o+=n.options.isVertical?e.offsetHeight:e.offsetWidth,o+=parseFloat(n.options.isVertical?t.marginTop:t.marginRight),o+=parseFloat(n.options.isVertical?t.marginBottom:t.marginLeft))})),o},s.prototype.getScrollCntEle=function(e){var t=this.options.isVertical?".e-vscroll-content":".e-hscroll-content";return e.querySelector(t)},s.prototype.checkOverflow=function(e,t){if(sf.base.isNullOrUndefined(e)||sf.base.isNullOrUndefined(t)||!sf.base.isVisible(e))return!1;var i=this.options.isVertical?e.offsetHeight:e.offsetWidth,n=this.options.isVertical?t.offsetHeight:t.offsetWidth;(this.tbarAlign||this.scrollModule||i===n||e.querySelector(".e-spacer"))&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(t):t));var o=e.querySelector(".e-hor-nav"),s=e.querySelector(".e-scroll-nav"),a=0;return o?a=this.options.isVertical?o.offsetHeight:o.offsetWidth:s&&(a=this.options.isVertical?2*s.offsetHeight:2*s.offsetWidth),n>i-a},s.prototype.refreshOverflow=function(){this.resize()},s.prototype.toolbarAlign=function(e){this.tbarAlign&&(sf.base.addClass([e],"e-tbar-pos"),this.itemPositioning())},s.prototype.renderOverflowMode=function(){var t=this.element,i=t.querySelector("."+e),n=this.popupPriCount>0;if(t&&t.children.length>0)switch(this.offsetWid=t.offsetWidth,sf.base.removeClass([this.element],"e-toolpop"),"msie"===sf.base.Browser.info.name&&"auto"===this.options.height&&(t.style.height=""),this.options.overflowMode){case"Scrollable":sf.base.isNullOrUndefined(this.scrollModule)&&this.initScroll(t,[].slice.call(t.getElementsByClassName(e)));break;case"Popup":sf.base.addClass([this.element],"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(t,i)||n)&&this.setOverflowAttributes(t),this.toolbarAlign(i);break;case"MultiRow":sf.base.addClass([i],"e-toolbar-multirow"),this.checkOverflow(t,i)&&this.tbarAlign&&(this.removePositioning(),sf.base.addClass([i],"e-multirow-pos")),"hidden"===t.style.overflow&&(t.style.overflow=""),"msie"!==sf.base.Browser.info.name&&"auto"===t.style.height||(t.style.height="auto");break;case"Extended":sf.base.addClass([this.element],"e-extended-toolbar"),(this.checkOverflow(t,i)||n)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(t)),this.toolbarAlign(i)}},s.prototype.setOverflowAttributes=function(t){this.createPopupEle(t,[].slice.call(sf.base.selectAll("."+e+" ."+i,t)));sf.base.attributes(this.element.querySelector(".e-hor-nav"),{tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"})},s.prototype.separator=function(){var e=this.element,t=[].slice.call(e.querySelectorAll(".e-separator")),i=e.querySelector(".e-multirow-separator"),n=e.querySelector(".e-extended-separator"),o="MultiRow"===this.options.overflowMode?i:n;null!==o&&("MultiRow"===this.options.overflowMode?o.classList.remove("e-multirow-separator"):"Extended"===this.options.overflowMode&&o.classList.remove("e-extended-separator"));for(var s=0;s<=t.length-1;s++)t[parseInt(s.toString(),10)].offsetLeft<30&&0!==t[parseInt(s.toString(),10)].offsetLeft&&("MultiRow"===this.options.overflowMode?t[parseInt(s.toString(),10)].classList.add("e-multirow-separator"):"Extended"===this.options.overflowMode&&t[parseInt(s.toString(),10)].classList.add("e-extended-separator"))},s.prototype.createPopupEle=function(e,t){var i=e.querySelector(".e-hor-nav"),n=this.options.isVertical;i||this.createPopupIcon(e),i=e.querySelector(".e-hor-nav");var o=n?i.offsetHeight:i.offsetWidth,s=(n?e.offsetHeight:e.offsetWidth)-o;this.element.classList.remove("e-rtl"),sf.base.setStyleAttribute(this.element,{direction:"initial",textAlign:"left"}),this.checkPriority(e,t,s,!0),this.options.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.element.style.removeProperty("text-align"),this.createPopup()},s.prototype.pushingPoppedEle=function(t,o,s,a,r){var l=this.element,d=sf.base.selectAll(".e-overflow-show",s),h=0,p=[].slice.call(sf.base.selectAll("."+n,l.querySelector("."+e))),c=0;p.forEach((function(e,i){d=sf.base.selectAll(".e-overflow-show",s),e.classList.contains("e-overflow-show")&&d.length>0?t.tbResize&&d.length>i?(s.insertBefore(e,d[parseInt(i.toString(),10)]),++c):(s.insertBefore(e,s.children[d.length]),++c):e.classList.contains("e-overflow-show")||t.tbResize&&e.classList.contains("e-overflow-hide")&&s.children.length>0&&0===d.length?(s.insertBefore(e,s.firstChild),++c):e.classList.contains("e-overflow-hide")?o.push(e):t.tbResize?(s.insertBefore(e,s.children[h+c]),++h):s.appendChild(e),t.nonFocusableElements(e)?sf.base.setStyleAttribute(e,{display:"",height:r+"px"}):sf.base.setStyleAttribute(e,{display:"",height:a+"px"})})),o.forEach((function(e){s.appendChild(e)}));for(var u=sf.base.selectAll("."+i,l.querySelector("."+e)),f=u.length-1;f>=0;f--){var m=u[parseInt(f.toString(),10)];if(!this.nonFocusableElements(m)||"Extended"===this.options.overflowMode)break;sf.base.setStyleAttribute(m,{display:"none"})}},s.prototype.createPopup=function(){var e,t,o=this.element;"Extended"===this.options.overflowMode&&(t=o.querySelector(".e-separator:not(."+n+")"),e="auto"===o.style.height||""===o.style.height?null:t&&t.offsetHeight);var s,a=o.querySelector("."+i+":not(.e-separator):not(.e-spacer):not(."+n+"):not(.e-hidden)"),r="auto"===o.style.height||""===o.style.height?null:a&&a.offsetHeight;if(o.querySelector("#"+o.id+"_popup.e-toolbar-pop"))s=o.querySelector("#"+o.id+"_popup.e-toolbar-pop");else{var l=sf.base.createElement("div",{id:o.id+"_popup",className:"e-toolbar-pop e-toolbar-extended"}),d=sf.base.createElement("div",{id:o.id+"_popup",className:"e-toolbar-pop"});s="Extended"===this.options.overflowMode?l:d}this.pushingPoppedEle(this,[],s,r,e),this.popupInit(o,s)},s.prototype.getElementOffsetY=function(){return"Extended"===this.options.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},s.prototype.popupInit=function(e,t){if(this.popObj){var i=this.popObj.element;if("Extended"===this.options.overflowMode){var n=window.getComputedStyle(this.element);this.popObj.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),this.popObj.offsetX=0,this.popObj.dataBind()}sf.base.setStyleAttribute(i,{maxHeight:"",display:"block"}),sf.base.setStyleAttribute(i,{maxHeight:i.offsetHeight+"px",display:""})}else{e.appendChild(t),sf.base.setStyleAttribute(this.element,{overflow:""});var o=window.getComputedStyle(this.element),s=new sf.popups.Popup(null,{relateTo:this.element,offsetY:this.options.isVertical?0:this.getElementOffsetY(),enableRtl:this.options.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.options.enableCollision?"flip":"none"},position:this.options.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if("Extended"===this.options.overflowMode&&(s.width=parseFloat(o.width)+2*parseFloat(o.borderRightWidth),s.offsetX=0),s.appendTo(t),sf.base.EventHandler.add(document,"scroll",this.docEvent.bind(this)),sf.base.EventHandler.add(document,"click ",this.docEvent.bind(this)),s.element.style.maxHeight=s.element.offsetHeight+"px",this.options.isVertical&&(s.element.style.visibility="hidden"),this.isExtendedOpen){var a=this.element.querySelector(".e-hor-nav");a.classList.add("e-nav-active"),sf.base.classList(a.firstElementChild,["e-popup-up-icon"],["e-popup-down-icon"]),this.element.querySelector(".e-toolbar-extended").classList.add("e-popup-open")}else s.hide();this.popObj=s}},s.prototype.tbarPopupHandler=function(e){"Extended"===this.options.overflowMode&&(e?sf.base.addClass([this.element],"e-tbar-extended"):sf.base.removeClass([this.element],"e-tbar-extended"))},s.prototype.popupOpen=function(e){var t=this.popObj;this.options.isVertical||(t.offsetY=this.getElementOffsetY(),t.dataBind());var i=this.popObj.element,n=this.popObj.element.parentElement,o=n.querySelector(".e-hor-nav");o.setAttribute("aria-expanded","true"),sf.base.setStyleAttribute(t.element,{height:"auto",maxHeight:""}),t.element.style.maxHeight=t.element.offsetHeight+"px","Extended"===this.options.overflowMode&&(t.element.style.left="",t.element.style.minHeight="");var s=i.offsetTop+i.offsetHeight+sf.popups.calculatePosition(n).top,a=o.firstElementChild;o.classList.add("e-nav-active"),sf.base.classList(a,["e-popup-up-icon"],["e-popup-down-icon"]),this.tbarPopupHandler(!0);var r=sf.base.isNullOrUndefined(window.scrollY)?0:window.scrollY;if(("Extended"!==this.options.overflowMode||this.options.enableCollision)&&!this.options.isVertical&&window.innerHeight+r<s&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(s-window.innerHeight-r+5);t.height=l+"px";for(var d=0;d<=i.childElementCount;d++){var h=i.children[parseInt(d.toString(),10)];if(h.offsetTop+h.offsetHeight>l){l=h.offsetTop;break}}sf.base.setStyleAttribute(t.element,{maxHeight:l+"px"})}else if(this.options.isVertical){var p=this.element.getBoundingClientRect();sf.base.setStyleAttribute(t.element,{maxHeight:p.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(t){var c=i.getBoundingClientRect();c.right>document.documentElement.clientWidth&&c.width>n.getBoundingClientRect().width&&(t.collision={Y:"none"},t.dataBind()),t.refreshPosition()}},s.prototype.popupClose=function(e){var t=this.element.querySelector(".e-hor-nav");t.setAttribute("aria-expanded","false");var i=t.firstElementChild;t.classList.remove("e-nav-active"),sf.base.classList(i,["e-popup-down-icon"],["e-popup-up-icon"]),this.tbarPopupHandler(!1)},s.prototype.checkPriority=function(t,o,s,a){for(var r,l,d=this.popupPriCount>0,h=s,p=0,c=0,u=0,f=function(e,t){var i=!1;return t.forEach((function(t){e.classList.contains(t)&&(i=!0)})),i},m=o.length-1;m>=0;m--){var g=void 0,w=window.getComputedStyle(o[parseInt(m.toString(),10)]);this.options.isVertical?(g=parseFloat(w.marginTop),g+=parseFloat(w.marginBottom)):(g=parseFloat(w.marginRight),g+=parseFloat(w.marginLeft));var y=o[parseInt(m.toString(),10)]===this.tbarEle[0];y&&(this.tbarEleMrgn=g),r=this.options.isVertical?o[parseInt(m.toString(),10)].offsetHeight:o[parseInt(m.toString(),10)].offsetWidth;var v=y?r+g:r;f(o[parseInt(m.toString(),10)],["e-popup-alone"])&&d&&(o[parseInt(m.toString(),10)].classList.add(n),this.options.isVertical?sf.base.setStyleAttribute(o[parseInt(m.toString(),10)],{display:"none",minHeight:v+"px"}):sf.base.setStyleAttribute(o[parseInt(m.toString(),10)],{display:"none",minWidth:v+"px"}),u++),l=this.options.isVertical?o[parseInt(m.toString(),10)].offsetTop+o[parseInt(m.toString(),10)].offsetHeight+g>s:o[parseInt(m.toString(),10)].offsetLeft+o[parseInt(m.toString(),10)].offsetWidth+g>s;var b=t.querySelector("."+e);if(t.querySelector(".e-spacer")?b.offsetWidth<this.getItemsWidth(b):l){if(this.nonFocusableElements(o[parseInt(m.toString(),10)])){if("Extended"===this.options.overflowMode){if(c===u)(f(S=o[parseInt(m.toString(),10)],["e-separator","e-ignore"])||f(S,["e-spacer","e-ignore"]))&&(o[parseInt(m.toString(),10)].classList.add(n),u++);c++}else if("Popup"===this.options.overflowMode){var S;if(p>0&&c===u)(f(S=o[m+c+(p-1)],["e-separator","e-ignore"])||f(S,["e-spacer","e-ignore"])||f(S,["e-spacer","e-ignore"]))&&sf.base.setStyleAttribute(S,{display:"none"});p++,c=0,u=0}}else c++;o[parseInt(m.toString(),10)].classList.contains("e-overflow-show")&&a||f(o[parseInt(m.toString(),10)],["e-separator","e-ignore"])||f(o[parseInt(m.toString(),10)],["e-spacer","e-ignore"])?s-=(this.options.isVertical?o[parseInt(m.toString(),10)].offsetHeight:o[parseInt(m.toString(),10)].offsetWidth)+g:(o[parseInt(m.toString(),10)].classList.add(n),this.options.isVertical?sf.base.setStyleAttribute(o[parseInt(m.toString(),10)],{display:"none",minHeight:v+"px"}):sf.base.setStyleAttribute(o[parseInt(m.toString(),10)],{display:"none",minWidth:v+"px"}),u++)}}if(a){var A=sf.base.selectAll("."+i+":not(."+n+")",this.element);this.checkPriority(t,A,h,!1)}},s.prototype.createPopupIcon=function(e){var t=e.id.concat("_nav"),i="e-"+e.id.concat("_nav e-hor-nav");i="Extended"===this.options.overflowMode?i+" e-expended-nav":i;var n=sf.base.createElement("div",{id:t,className:i});"msie"!==sf.base.Browser.info.name&&"edge"!==sf.base.Browser.info.name||n.classList.add("e-ie-align");var o=sf.base.createElement("div",{className:"e-popup-down-icon e-icons"});n.appendChild(o),n.setAttribute("tabindex","0"),n.setAttribute("role","button"),e.appendChild(n),e.classList.add("e-pop-mode")},s.prototype.tbarPriRef=function(e,t,i,o,s,a,r,l){var d=l,h=this.popObj.element,p=sf.base.selectAll("."+n+":not(.e-overflow-show)",h).length,c=function(e,t){return e.classList.contains(t)};if(0===sf.base.selectAll(".e-toolbar-item:not(.e-separator):not(.e-spacer):not(.e-overflow-show)",e).length){var u=e.children[t-(t-i)-1],f=!sf.base.isNullOrUndefined(u)&&c(u,"e-ignore");if(!sf.base.isNullOrUndefined(u)&&c(u,"e-separator")&&c(u,"e-spacer")&&!sf.base.isVisible(u)||f){u.style.display="inherit";var m=u.offsetWidth+2*parseFloat(window.getComputedStyle(u).marginRight),g=u.previousElementSibling;a+m<r||s?(e.insertBefore(o,e.children[t+d-(t-i)]),sf.base.isNullOrUndefined(g)||(g.style.display="")):this.nonFocusableElements(g)&&(g.style.display="none"),u.style.display=""}else e.insertBefore(o,e.children[t+d-(t-i)])}else e.insertBefore(o,e.children[t+d-p])},s.prototype.popupRefresh=function(t,i){var n=this,o=this.element,s=this.options.isVertical,a=o.querySelector(".e-hor-nav"),r=o.querySelector("."+e);if(!sf.base.isNullOrUndefined(a)&&!sf.base.isNullOrUndefined(r)){var l;r.removeAttribute("style"),t.style.display="block",l=s?o.offsetHeight-(a.offsetHeight+(o.querySelector(".e-spacer")?this.itemWidthCal(r):r.offsetHeight)):o.offsetWidth-(a.offsetWidth+(o.querySelector(".e-spacer")?this.itemWidthCal(r):r.offsetWidth));var d=0;[].slice.call(t.children).forEach((function(e){d+=n.popupEleWidth(e),sf.base.setStyleAttribute(e,{position:""})})),l+(s?a.offsetHeight:a.offsetWidth)>d&&0===this.popupPriCount&&(i=!0),this.popupEleRefresh(l,t,i),t.style.display="",0===t.children.length&&a&&this.popObj&&(sf.base.detach(a),a=null,this.popObj.destroy(),sf.base.detach(this.popObj.element),this.popObj=null,this.element.classList.remove("e-pop-mode"))}},s.prototype.ignoreEleFetch=function(e,t){var i=[].slice.call(t.querySelectorAll(".e-ignore")),n=[],o=0;return i.length>0?(i.forEach((function(e){n.push([].slice.call(t.children).indexOf(e))})),n.forEach((function(t){t<=e&&o++})),o):0},s.prototype.checkPopupRefresh=function(t,i){i.style.display="block";var n=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var o=t.offsetWidth-t.querySelector(".e-hor-nav").offsetWidth,s=t.querySelector("."+e),a=t.querySelector(".e-spacer")?this.itemWidthCal(s):s.offsetWidth;return i.style.removeProperty("display"),o>n+a},s.prototype.popupEleWidth=function(e){e.style.position="absolute";var t=this.options.isVertical?e.offsetHeight:e.offsetWidth,i=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains("e-popup-text")){var n=e.children[0];!sf.base.isNullOrUndefined(i)&&e.classList.contains("e-popup-text")?i.style.display="none":!sf.base.isNullOrUndefined(i)&&e.classList.contains("e-toolbar-text")&&(i.style.display="block"),n.style.minWidth="0%",t=parseFloat(this.options.isVertical?e.style.minHeight:e.style.minWidth),n.style.minWidth="",n.style.minHeight="",sf.base.isNullOrUndefined(i)||(i.style.display="")}return t},s.prototype.popupEleRefresh=function(t,i,o){for(var s,a,r=this,l=this.popupPriCount>0,d=this.tbarEle,h=this.element.querySelector("."+e),p=0,c=function(i){if(i.classList.contains("e-popup-alone")&&l&&!o)return"continue";var c=u.popupEleWidth(i);if(i===u.tbarEle[0]&&(c+=u.tbarEleMrgn),i.style.position="",!(c<t||o))return"break";if(sf.base.setStyleAttribute(i,{minWidth:"",height:"",minHeight:""}),i.classList.contains("e-overflow-hide")||i.classList.remove(n),a=u.tbarEle.indexOf(i),u.tbarAlign){var f=u.options.items[parseInt(a.toString(),10)].align;a=u.tbarAlgEle[(f+"s").toLowerCase()].indexOf(i),d=u.tbarAlgEle[(f+"s").toLowerCase()],h=u.element.querySelector("."+e+" .e-toolbar-"+f.toLowerCase())}var m=0;"Extended"!==u.options.overflowMode&&d.slice(0,a).forEach((function(e){sf.base.isNullOrUndefined(e.classList)||!e.classList.contains("e-overflow-show")&&!r.nonFocusableElements(e)||(r.nonFocusableElements(e)&&(e.style.display="",t-=e.offsetWidth),m++)})),p=u.ignoreEleFetch(a,h),i.classList.contains("e-overflow-show")?(u.tbarPriRef(h,a,m,i,o,c,t,p),t-=i.offsetWidth):0===a?(h.insertBefore(i,h.firstChild),t-=i.offsetWidth):(s=sf.base.selectAll(".e-overflow-show",u.popObj.element).length,h.insertBefore(i,h.children[a+p-s]),t-=i.offsetWidth),i.style.height=""},u=this,f=0,m=[].slice.call(i.children);f<m.length;f++){if("break"===c(m[f]))break}this.checkOverflow(this.element,this.element.getElementsByClassName(e)[0])&&!o&&this.renderOverflowMode()},s.prototype.removePositioning=function(){var t=this.element.querySelector("."+e);if(!sf.base.isNullOrUndefined(t)&&t.classList.contains("e-tbar-pos")){sf.base.removeClass([t],"e-tbar-pos");var i=[].slice.call(t.children);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},s.prototype.refreshPositioning=function(){var t=this.element.querySelector("."+e);sf.base.addClass([t],"e-tbar-pos"),this.itemPositioning()},s.prototype.itemPositioning=function(){var t,i=this.element.querySelector("."+e);if(!sf.base.isNullOrUndefined(i)&&i.classList.contains("e-tbar-pos")){var n,o=this.element.querySelector(".e-hor-nav");if(this.scrollModule){var s=this.options.isVertical?"e-vscroll-content":"e-hscroll-content";n=[].slice.call(i.querySelector("."+s).children)}else n=[].slice.call(i.children);t=this.options.isVertical?n[0].offsetHeight+n[2].offsetHeight:n[0].offsetWidth+n[2].offsetWidth;var a=this.options.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(o){a-=this.options.isVertical?o.offsetHeight:o.offsetWidth;var r=(this.options.isVertical?o.offsetHeight:o.offsetWidth)+"px";n[2].removeAttribute("style"),this.options.isVertical?this.options.enableRtl?n[2].style.top=r:n[2].style.bottom=r:this.options.enableRtl?n[2].style.left=r:n[2].style.right=r}if(!(a<=t)){var l=(a-t-(this.options.isVertical?n[1].offsetHeight:n[1].offsetWidth))/2;n[1].removeAttribute("style");var d=(this.options.isVertical?n[0].offsetHeight:n[0].offsetWidth)+l+"px";this.options.isVertical?this.options.enableRtl?n[1].style.marginBottom=d:n[1].style.marginTop=d:this.options.enableRtl?n[1].style.marginRight=d:n[1].style.marginLeft=d}}},s.prototype.tbarItemAlign=function(e,t,i){var n=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var o=[];if(o.push(sf.base.createElement("div",{className:"e-toolbar-left",attrs:{role:"group"}})),o.push(sf.base.createElement("div",{className:"e-toolbar-center",attrs:{role:"group"}})),o.push(sf.base.createElement("div",{className:"e-toolbar-right",attrs:{role:"group"}})),0===i&&"Left"!==e.align)o.forEach((function(e){t.appendChild(e)})),this.tbarAlign=!0,sf.base.addClass([t],"e-tbar-pos");else if("Left"!==e.align){var s=[].slice.call(t.children),a=o[0];[].slice.call(s).forEach((function(e){n.tbarAlgEle.lefts.push(e),a.appendChild(e)})),t.appendChild(a),t.appendChild(o[1]),t.appendChild(o[2]),this.tbarAlign=!0,sf.base.addClass([t],"e-tbar-pos")}}},s.prototype.renderItems=function(){var t=this.element,i=this.options.items;if(t&&i.length>0){var n=t.querySelector("."+e);this.itemsAlign(i,n,!0)}},s.prototype.setAttr=function(e,t){for(var i,n=Object.keys(e),o=0;o<n.length;o++)"class"===(i=n[parseInt(o.toString(),10)])?sf.base.addClass([t],e[""+i]):t.setAttribute(i,e[""+i])},s.prototype.getDataTabindex=function(e){return sf.base.isNullOrUndefined(e.getAttribute("data-tabindex"))?"-1":e.getAttribute("data-tabindex")},s.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},s.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},s.prototype.activeEleRemove=function(e){if(sf.base.isNullOrUndefined(this.activeEle)||this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),this.activeEle=e,"-1"===this.getDataTabindex(this.activeEle))if(sf.base.isNullOrUndefined(this.trgtEle)&&!e.parentElement.classList.contains("e-template"))this.updateTabIndex("-1"),e.removeAttribute("tabindex");else{var t=parseInt(this.getDataTabindex(this.activeEle),10)+1;this.activeEle.setAttribute("tabindex",t.toString())}},s.prototype.resize=function(){var t=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.options.overflowMode&&this.popObj.hide();var i=this.checkOverflow(t,t.getElementsByClassName(e)[0]);if(!i){this.destroyScroll();var n=t.querySelector("."+e);sf.base.isNullOrUndefined(n)||(sf.base.removeClass([n],"e-multirow-pos"),this.tbarAlign&&sf.base.addClass([n],"e-tbar-pos"))}if(!i||!this.scrollModule||this.offsetWid!==t.offsetWidth){if((this.offsetWid>t.offsetWidth||i)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.options.overflowMode){var o=window.getComputedStyle(this.element);this.popObj.width=parseFloat(o.width)+2*parseFloat(o.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.offsetWid=t.offsetWidth,this.tbResize=!1,this.separator()}},s.prototype.orientationChange=function(){var e=this;setTimeout((function(){e.resize()}),500)},s.prototype.extendedOpen=function(){var e=this.element.querySelector(".e-toolbar-extended");"Extended"===this.options.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains("e-popup-open"))},s.prototype.updateHideEleTabIndex=function(e,t,i,n){for(var o=n[++i];o;){if(!this.eleContains(o)){var s=o.firstElementChild.getAttribute("data-tabindex");t||"-1"!==s?s!==o.firstElementChild.getAttribute("tabindex")&&o.firstElementChild.setAttribute("tabindex",s):o.firstElementChild.setAttribute("tabindex","0");break}o=n[++i]}},s.prototype.disable=function(e){var t=this.element;e?t.classList.add("e-overlay"):t.classList.remove("e-overlay"),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(sf.base.isVisible(this.popObj.element)&&"Extended"!==this.options.overflowMode&&this.popObj.hide(),t.querySelector("#"+t.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},s.prototype.setCssClass=function(e){this.extendedOpen(),this.options.cssClass&&sf.base.removeClass([this.element],this.options.cssClass.split(" ")),e&&sf.base.addClass([this.element],e.split(" ")),this.options.cssClass=e},s.prototype.nonFocusableElements=function(e){return e.classList.contains("e-separator")||e.classList.contains("e-spacer")},s.prototype.getItemsWidth=function(e){return Array.from(e.children).reduce((function(e,t){return e+t.offsetWidth}),0)},s}();return{initialize:function(t,i,n,o){0===n.scrollStep&&(n.scrollStep=null);var a=new s(t,i,n,o);null==a.element.querySelector("."+e).querySelector(".e-spacer")&&a.element.classList.remove("e-spacer-toolbar"),a.render()},hidePopup:function(e,t){var n=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(n)&&!sf.base.isNullOrUndefined(n.element)&&!sf.base.isNullOrUndefined(n.popObj)){var o=n.element.querySelector("."+i+'[data-index="'+t+'"]');sf.base.isNullOrUndefined(o)||sf.base.isNullOrUndefined(sf.base.closest(o,".e-toolbar-pop"))||n.popObj.hide({name:"FadeOut",duration:100})}},setCssClass:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.setCssClass(t)},setWidth:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)&&!sf.base.isNullOrUndefined(i.element)){i.options.width=t,i.extendedOpen();var n=i.element.offsetWidth;sf.base.setStyleAttribute(i.element,{width:sf.base.formatUnit(t)}),i.renderOverflowMode(),i.popObj&&n<i.element.offsetWidth&&i.popupRefresh(i.popObj.element,!1)}},setHeight:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.height=t,i.extendedOpen(),sf.base.setStyleAttribute(i.element,{height:sf.base.formatUnit(t)}))},setOverflowMode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.overflowMode=t,i.extendedOpen(),i.destroyMode(),i.renderOverflowMode(),i.options.enableRtl&&sf.base.addClass([i.element],"e-rtl"),i.refreshOverflow())},setEnableRTL:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.enableRtl=t,i.extendedOpen(),t?sf.base.addClass([i.element],"e-rtl"):sf.base.removeClass([i.element],"e-rtl"),sf.base.isNullOrUndefined(i.scrollModule)||(t?sf.base.addClass([i.scrollModule.element],"e-rtl"):sf.base.removeClass([i.scrollModule.element],"e-rtl")),sf.base.isNullOrUndefined(i.popObj)||(t?sf.base.addClass([i.popObj.element],"e-rtl"):sf.base.removeClass([i.popObj.element],"e-rtl")),i.tbarAlign&&i.itemPositioning())},setScrollStep:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.scrollStep=t,i.extendedOpen(),i.scrollModule&&(i.scrollModule.scrollStep=t))},setEnableCollision:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.enableCollision=t,i.extendedOpen(),i.popObj&&(i.popObj.collision={Y:t?"flip":"none"}))},setAllowKeyboard:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options.allowKeyboard=t,i.extendedOpen(),i.unwireKeyboardEvent(),t&&i.wireKeyboardEvent())},serverItemsRerender:function(t,i,n){var o=window.sfBlazor.getCompInstance(t);if(!sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(o.element)){var s=o.element.querySelector("."+e+" .e-spacer");sf.base.isNullOrUndefined(s)||o.element.classList.contains("e-spacer-toolbar")||o.element.classList.add("e-spacer-toolbar");var a=document.activeElement;o.options.items=i,o.extendedOpen(),o.destroyMode(),o.resetServerItems(n),o.serverItemsRefresh(n),document.activeElement!==a&&a.focus()}},hideItem:function(e,t,n){var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o)&&!sf.base.isNullOrUndefined(o.element)){o.options.items=t;var s=[].slice.call(sf.base.selectAll("."+i,this.element)),a=s[parseInt(n.toString(),10)];a&&(t[parseInt(n.toString(),10)].visible?this.nonFocusableElements(a)||o.updateHideEleTabIndex(a,t[parseInt(n.toString(),10)].visible,n,s):this.nonFocusableElements(a)||(sf.base.isNullOrUndefined(a.firstElementChild.getAttribute("tabindex"))||"-1"!==a.firstElementChild.getAttribute("tabindex"))&&o.updateHideEleTabIndex(a,t[parseInt(n.toString(),10)].visible,n,s)),o.refreshOverflow()}},disable:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||i.disable(t)},refreshOverflow:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.element)||t.refreshOverflow()},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(t.element)||t.destroy()},refresh:function(e,t){var i=window.sfBlazor.getCompInstance(e);0===t.scrollStep&&(t.scrollStep=null),sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(i.element)||(i.options=t,i.destroyMode(),i.resetServerItems(!1),i.serverItemsRefresh(!1))}}}()},"./modules/sf-tooltip.js":function(e,t){window.sfBlazor=window.sfBlazor||{},window.sfBlazor.Tooltip=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},t=function(){function e(e,t,i,n,o){this.popupObj=null,this.tipClass="e-tip-bottom",this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isContinuousOpen=!1,this.isRestrictUpdate=!1,this.showTimer=0,this.hideTimer=0,this.contentTargetValue=null,this.contentEvent=null,this.contentAnimation=null,this.beforeCloseAnimation=null,this.isPopupHidden=!0,this.isMultiTarget=!1,this.mouseAction=!1,this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.isBodyContainer=!0,this.element=t,this.dataId=e,this.properties=n,this.dotnetRef=i,sf.base.isNullOrUndefined(this.element)||(this.ctrlId=this.element.id,window.sfBlazor.setCompInstance(this),this.eventList=o)}return e.prototype.getTriggerList=function(e){return"Auto"===e&&(e=sf.base.Browser.isDevice?"Hover":"Hover Focus"),e.split(" ")},e.prototype.formatPosition=function(){var e,t;0===this.properties.position.indexOf("Top")||0===this.properties.position.indexOf("Bottom")?(e=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(t=this.properties.position.split(/(?=[A-Z])/),this.tooltipPositionX=t[0],this.tooltipPositionY=t[1])},e.prototype.getTargetList=function(e){if(!e||""===e)return[this.element];var t=this.element?[].slice.call(sf.base.selectAll(e,this.element)):[];return t.length>0?t:[].slice.call(sf.base.selectAll(e,document))},e.prototype.wireEvents=function(e){var t=this,i=this.getTriggerList(e),n=this.properties.targetContainer&&sf.base.select(this.properties.targetContainer,document)||this.element;i.forEach((function(e){if("Custom"!==e)switch(e){case"Focus":sf.base.EventHandler.add(n,"focusin",t.targetHover,t);break;case"Click":sf.base.EventHandler.add(n,sf.base.Browser.touchStartEvent,t.targetClick,t);break;case"Hover":sf.base.Browser.isDevice?(t.touchModule=new sf.base.Touch(n,{tapHoldThreshold:500,tapHold:t.tapHoldHandler.bind(t)}),sf.base.EventHandler.add(n,sf.base.Browser.touchEndEvent,t.touchEndHandler,t)):(sf.base.EventHandler.add(n,"mouseover",t.targetHover,t),t.properties.isSticky||sf.base.EventHandler.add(n,"mouseout",t.onMouseOut,t))}})),sf.base.EventHandler.add(document,"touchend",this.touchEnd,this),sf.base.EventHandler.add(document,"scroll wheel",this.scrollHandler.bind(this),{passive:!0}),sf.base.EventHandler.add(document,"keydown",this.keyDown,this),window.addEventListener("resize",this.onWindowResize.bind(this))},e.prototype.getValidTarget=function(e){var t=null;switch(e.type){case"focusin":case"focusout":t=this.properties.target?sf.base.closest(e.target,this.properties.target):e.target===this.element?this.element:null;break;case"mouseover":case sf.base.Browser.touchStartEvent:case sf.base.Browser.touchEndEvent:t=this.properties.target?sf.base.closest(e.target,this.properties.target):e.target===this.element||this.element.contains(e.target)?this.element:null;break;case"mouseout":var i=e.relatedTarget;t=this.properties.target?sf.base.closest(e.target,this.properties.target):e.target!==this.element&&i&&this.element.contains(i)?null:this.element,this.properties.target&&t&&(t=i!==t&&t.contains(i)?null:t)}return t},e.prototype.onWindowResize=function(){this.isHidden()||this.reposition(this.findTarget())},e.prototype.wireMouseEvents=function(e,t){if(this.tooltipEle){if(!this.properties.isSticky){if("focusin"===e.type){var i=this.properties.targetContainer&&sf.base.select(this.properties.targetContainer,document)||this.element;sf.base.EventHandler.add(i,"focusout",this.onMouseOut,this)}this.properties.closeDelay&&(sf.base.EventHandler.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),sf.base.EventHandler.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))}this.properties.mouseTrail&&sf.base.EventHandler.add(t,"mousemove touchstart mouseenter",this.onMouseMove,this)}},e.prototype.unWireEvents=function(e){var t=this,i=this.getTriggerList(e),n=this.properties.targetContainer&&sf.base.select(this.properties.targetContainer,document)||this.element;i.forEach((function(e){if("Custom"!==e)switch(e){case"Focus":sf.base.EventHandler.remove(n,"focusin",t.targetHover);break;case"Click":sf.base.EventHandler.remove(n,sf.base.Browser.touchStartEvent,t.targetClick);break;case"Hover":sf.base.Browser.isDevice?(t.touchModule&&t.touchModule.destroy(),sf.base.EventHandler.remove(n,sf.base.Browser.touchEndEvent,t.touchEndHandler)):(sf.base.EventHandler.remove(n,"mouseover",t.targetHover),t.properties.isSticky||sf.base.EventHandler.remove(n,"mouseout",t.onMouseOut))}})),sf.base.EventHandler.remove(document,"touchend",this.touchEnd),sf.base.EventHandler.remove(document,"scroll wheel",this.scrollHandler),sf.base.EventHandler.remove(document,"keydown",this.keyDown),window.removeEventListener("resize",this.onWindowResize.bind(this))},e.prototype.unWireMouseEvents=function(e){var t=this;if(!this.properties.isSticky){var i=this.getTriggerList(this.properties.opensOn),n=this.properties.targetContainer&&sf.base.select(this.properties.targetContainer,document)||this.element;i.forEach((function(e){"Focus"===e&&sf.base.EventHandler.remove(n,"focusout",t.onMouseOut)})),this.properties.closeDelay&&(sf.base.EventHandler.remove(e,"mouseenter",this.tooltipHover),sf.base.EventHandler.remove(e,"mouseleave",this.tooltipMouseOut))}this.properties.mouseTrail&&sf.base.EventHandler.remove(e,"mousemove touchstart mouseenter",this.onMouseMove)},e.prototype.findTarget=function(){return sf.base.select('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},e.prototype.addDescribedBy=function(e,t){var i=(sf.base.getAttributeOrDefault(e,"aria-describedby",null)||"").split(/\s+/);i.indexOf(t)<0&&i.push(t),sf.base.attributes(e,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":t})},e.prototype.removeDescribedBy=function(e){var t=sf.base.getAttributeOrDefault(e,"data-tooltip-id",null),i=(sf.base.getAttributeOrDefault(e,"aria-describedby",null)||"").split(/\s+/),n=i.indexOf(t);-1!==n&&i.splice(n,1),e.removeAttribute("data-tooltip-id");var o=i.join(" ").trim();o?sf.base.attributes(e,{"aria-describedby":o}):e.removeAttribute("aria-describedby")},e.prototype.clear=function(){if(this.isPopupHidden){if(this.popupObj&&this.popupObj.destroy(),this.tooltipEle){sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],"e-popup-open"),this.tooltipEle.style.display="none";var e=document.getElementById(this.ctrlId+"_content_placeholder");e&&e.appendChild(this.tooltipEle),document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync("CreateTooltip",!1)}this.tooltipEle=null,this.popupObj=null}},e.prototype.tapHoldHandler=function(e){this.getValidTarget(e.originalEvent)&&this.targetHover(e.originalEvent)},e.prototype.touchEndHandler=function(e){this.getValidTarget(e)&&(this.properties.isSticky||this.hideTooltip(this.properties.animation.close))},e.prototype.targetClick=function(e){if(this.getValidTarget(e)){var t=this.properties.target?sf.base.closest(e.target,this.properties.target):this.element,i=e;t&&(null===sf.base.getAttributeOrDefault(t,"data-tooltip-id",null)?"mousedown"===i.type&&2===i.button||this.targetHover(e):this.properties.isSticky||this.hideTooltip(this.properties.animation.close,e,t))}},e.prototype.restoreElement=function(e){this.unWireMouseEvents(e),sf.base.isNullOrUndefined(sf.base.getAttributeOrDefault(e,"data-content",null))||e.removeAttribute("data-content"),this.removeDescribedBy(e)},e.prototype.checkForOpen=function(e,t,i){if(sf.base.isNullOrUndefined(t)||sf.base.isNullOrUndefined(i))return!1;var n=this.properties.target?sf.base.closest(i.target,this.properties.target):this.element;if(sf.base.isNullOrUndefined(n))return!1;var o=!0;return"Hover"===e?o=sf.base.matches(n,":hover"):"Auto"===e?o=sf.base.matches(n,":hover")||sf.base.matches(n,":focus"):"Focus"===e?o=sf.base.matches(n,":focus"):"Click"!==e&&"Custom"!==e||(o=null===sf.base.getAttributeOrDefault(n,"data-tooltip-id",null)),o},e.prototype.targetHover=function(e){var t=this;if(this.getValidTarget(e)&&this.checkForOpen(this.properties.opensOn,this.element,e)){var i=this.properties.target?sf.base.closest(e.target,this.properties.target):this.element,n=i.getAttribute("title");if(i.title="",""!==n&&null!==n&&sf.base.attributes(i,{"sf-tooltip":n}),!sf.base.isNullOrUndefined(i)&&null===sf.base.getAttributeOrDefault(i,"data-tooltip-id",null)){if(this.isMultiTarget=this.getTargetList(this.properties.target).length>1,"focusin"!==e.type&&this.properties.target&&this.isMultiTarget&&e&&!sf.base.isNullOrUndefined(e.target)&&!sf.base.isNullOrUndefined(e.relatedTarget))if(sf.base.closest(e.target,this.properties.target)===sf.base.closest(e.relatedTarget,this.properties.target))return;[].slice.call(sf.base.selectAll('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)).forEach((function(e){t.restoreElement(e)})),this.mouseAction=!1,this.showTooltip(i,this.properties.animation.open,e)}}},e.prototype.isHidden=function(){return!this.tooltipEle||!this.tooltipEle.classList.contains("e-popup-open")},e.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},e.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&sf.base.EventHandler.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},e.prototype.showTooltip=function(e,t,i){var n=this;this.mouseAction=!1,this.clear(),clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.properties.mouseTrail&&this.properties.openDelay&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,sf.base.EventHandler.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this));this.showTimer=setTimeout((function(){n.isContinuousOpen=!sf.base.isNullOrUndefined(n.tooltipEle),n.tooltipEventArgs={type:i?i.type.toString():null,cancel:!1,target:n.getDomObject("target",e),event:i||null,hasText:n.hasText(),element:n.getDomObject("tooltipElement",n.tooltipEle),isInteracted:!sf.base.isNullOrUndefined(i),name:"beforeRender",left:i?n.getXYValue(i,"x"):null,top:i?n.getXYValue(i,"y"):null},n.contentTargetValue=e,n.contentEvent=i,n.contentAnimation=t,n.isRestrictUpdate=n.eventList.beforeRender&&!n.isHidden(),n.eventList.beforeRender?n.triggerEvent("TriggerBeforeRenderEvent",n.tooltipEventArgs):n.beforeRenderCallBack(!1)}),this.properties.openDelay)},e.prototype.triggerEvent=function(e,t){document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync(e,t)},e.prototype.beforeRenderCallBack=function(e){e?(this.isPopupHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isPopupHidden=!1,sf.base.isNullOrUndefined(this.tooltipEle)?document.body.contains(this.element)&&this.dotnetRef.invokeMethodAsync("CreateTooltip",!0):this.isContinuousOpen&&!this.isRestrictUpdate?this.contentUpdated():this.isRestrictUpdate=!1)},e.prototype.checkCollision=function(e,t,i){var n={left:t,top:i,position:this.properties.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY,isCollided:!1},o=sf.popups.isCollide(this.tooltipEle,this.checkCollideTarget(),t,i);return o.length>0&&(n.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,this.properties.windowCollision&&0===this.properties.position.indexOf("Left")||0===this.properties.position.indexOf("Right")?(n.vertical=o.indexOf("top")>=0||o.indexOf("bottom")>=0?"Center":this.tooltipPositionY,n.isCollided=!0):n.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},e.prototype.checkCollideTarget=function(){return!this.properties.windowCollision&&this.properties.target?this.element:null},e.prototype.calculateElementPosition=function(e,t){return[this.isBodyContainer?e.left+t.left:e.left-this.containerElement.offsetLeft+t.left+window.scrollX+this.containerElement.scrollLeft,this.isBodyContainer?e.top+t.top:e.top-this.containerElement.offsetTop+t.top+window.scrollY+this.containerElement.scrollTop]},e.prototype.getScalingFactor=function(e){if(!e)return{x:1,y:1};var t={x:1,y:1},i=e.closest('[style*="transform: scale"]');if(i&&i!==this.tooltipEle&&i.contains(this.tooltipEle)){var n=window.getComputedStyle(i).getPropertyValue("transform").match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);t.x=n[0],t.y=n[3]}return t},e.prototype.collisionFlipFit=function(e,t,i){var n=this.checkCollision(e,t,i),o=n.position;this.tooltipPositionY!==n.vertical&&(o=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===o.indexOf("Left")&&(n.vertical="LeftTop"===o||"LeftCenter"===o?"Top":"Bottom",o=n.vertical+"Left"),0===o.indexOf("Right")&&(n.vertical="RightTop"===o||"RightCenter"===o?"Top":"Bottom",o=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:this.getDomObject("target",e),event:null,isInteracted:!1,hasText:this.hasText(),element:this.getDomObject("tooltipElement",this.tooltipEle),collidedPosition:o,name:"beforeCollision",left:null,top:null},this.isRestrictUpdate=this.eventList.beforeCollision&&!this.isHidden(),this.eventList.beforeCollision&&this.triggerEvent("TriggerBeforeCollisionEvent",this.tooltipEventArgs);var s=n.vertical,a=n.horizontal;if(n.position!==o){var r=sf.popups.calculatePosition(e,a,s,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,o,a,s,n.isCollided);var l=this.getScalingFactor(e),d=this.calculateTooltipOffset(o,l.x,l.y);d.top-=this.getOffSetPosition("TopBottom",o,this.properties.offsetY),d.left-=this.getOffSetPosition("RightLeft",o,this.properties.offsetX),n.position=o;var h=this.calculateElementPosition(r,d),p=h[0],c=h[1];n.left=p,n.top=c}else this.adjustArrow(e,o,a,s,n.isCollided);var u={left:n.left,top:n.top},f=sf.popups.fit(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:this.properties.windowCollision},u);if(sf.base.setStyleAttribute(this.tooltipEle,{display:"block"}),this.properties.showTipPointer&&(0===o.indexOf("Bottom")||0===o.indexOf("Top"))){var m=sf.base.select(".e-arrow-tip",this.tooltipEle),g=parseInt(m.style.left,10)-(f.left-n.left);g<0?g=0:g+m.offsetWidth>this.tooltipEle.clientWidth&&(g=this.tooltipEle.clientWidth-m.offsetWidth),sf.base.setStyleAttribute(m,{left:g.toString()+"px"})}return sf.base.setStyleAttribute(this.tooltipEle,{display:""}),u.left=f.left,window.scrollX&&"BottomRight"===this.properties.position&&(u.left=this.element.getBoundingClientRect().left+window.scrollX-this.element.offsetWidth),u},e.prototype.getOffSetPosition=function(e,t,i){return-1!==e.indexOf(this.properties.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(t.split(/(?=[A-Z])/)[0])?2*i:0},e.prototype.hideTooltip=function(e,t,i){var n=this;clearTimeout(this.hideTimer),clearTimeout(this.showTimer);var o=function(){var o;n.checkForOpen(n.properties.opensOn,n.element,sf.base.isNullOrUndefined(t)||t.isTrusted?t:null)||(n.properties.closeDelay&&n.tooltipEle&&n.isTooltipOpen||(o=t?n.properties.target?i||t.target:n.element:sf.base.select('[data-tooltip-id= "'+n.ctrlId+'_content"]',document),n.tooltipEventArgs={type:t?t.type.toString():null,cancel:!1,target:n.getDomObject("target",o),event:t||null,element:n.getDomObject("tooltipElement",n.tooltipEle),hasText:n.hasText(),isInteracted:!sf.base.isNullOrUndefined(t),name:"beforeClose",collidedPosition:null,left:t?n.getXYValue(t,"x"):null,top:t?n.getXYValue(t,"y"):null},n.beforeCloseTarget=o,n.beforeCloseAnimation=e,n.isRestrictUpdate=n.eventList.beforeClose&&!n.isHidden(),n.eventList.beforeClose?n.triggerEvent("TriggerBeforeCloseEvent",n.tooltipEventArgs):n.beforeCloseCallBack(!1)))};!sf.base.isNullOrUndefined(this.tooltipEle)&&this.properties.closeDelay<=0?o():this.hideTimer=setTimeout(o,this.properties.closeDelay)},e.prototype.beforeCloseCallBack=function(e){if(e)this.isPopupHidden=!1;else{var t=this;t.mouseMoveBeforeRemove();this.popupObj?this.popupHide(this.beforeCloseAnimation,this.beforeCloseTarget):setTimeout((function(){t.isMultiTarget||t.popupHide(t.beforeCloseAnimation,t.beforeCloseTarget)}),200)}},e.prototype.popupHide=function(e,t){t&&this.restoreElement(t),this.isPopupHidden=!0;var i={name:"None"===e.effect&&"Enable"===sf.base.animationMode?"FadeOut":e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};("None"===e.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&(i=void 0),this.popupObj&&this.popupObj.hide(i)},e.prototype.calculateTooltipOffset=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=1);var n=this.tooltipEle.getBoundingClientRect(),o=sf.base.select(".e-arrow-tip",this.tooltipEle),s=o?o.getBoundingClientRect():null,a=o?s.width:0,r=o?s.height:0,l=this.properties.showTipPointer?0:8,d={top:0,left:0},h=r/2+2+(n.height-this.tooltipEle.clientHeight*i),p=a/2+2+(n.width-this.tooltipEle.clientWidth*t);switch(this.properties.mouseTrail&&(l+=2),e){case"RightTop":d.left+=a+l,d.top-=n.height-h;break;case"RightCenter":d.left+=a+l,d.top-=n.height/2;break;case"RightBottom":d.left+=a+l,d.top-=h;break;case"BottomRight":d.top+=r+l,d.left-=p;break;case"BottomCenter":d.top+=r+l,d.left-=n.width/2;break;case"BottomLeft":d.top+=r+l,d.left-=n.width-p;break;case"LeftBottom":d.left-=a+n.width+l,d.top-=h;break;case"LeftCenter":d.left-=a+n.width+l,d.top-=n.height/2;break;case"LeftTop":d.left-=a+n.width+l,d.top-=n.height-h;break;case"TopLeft":d.top-=n.height+r+l,d.left-=n.width-p;break;case"TopRight":d.top-=n.height+r+l,d.left-=p;break;default:d.top-=n.height+r+l,d.left-=n.width/2}return d.left+=this.properties.offsetX,d.top+=this.properties.offsetY,d},e.prototype.setTipClass=function(e){0===e.indexOf("Right")?this.tipClass="e-tip-left":0===e.indexOf("Bottom")?this.tipClass="e-tip-top":0===e.indexOf("Left")?this.tipClass="e-tip-right":this.tipClass="e-tip-bottom"},e.prototype.updateTipPosition=function(e){var t=sf.base.selectAll(".e-arrow-tip,.e-arrow-tip-outer,.e-arrow-tip-inner",this.tooltipEle),i=["e-tip-bottom","e-tip-top","e-tip-left","e-tip-right"];sf.base.removeClass(t,i),this.setTipClass(e),sf.base.addClass(t,this.tipClass)},e.prototype.adjustArrow=function(e,t,i,n,o){if(void 0===o&&(o=!1),!1!==this.properties.showTipPointer){this.updateTipPosition(t),sf.base.setStyleAttribute(this.tooltipEle,{display:"block"});var s,a,r=this.tooltipEle.clientWidth,l=this.tooltipEle.clientHeight,d=sf.base.select(".e-arrow-tip",this.tooltipEle),h=sf.base.select(".e-arrow-tip-inner",this.tooltipEle),p=d.offsetWidth,c=d.offsetHeight;sf.base.setStyleAttribute(this.tooltipEle,{display:""});var u="End"===this.properties.tipPointerPosition,f="Start"===this.properties.tipPointerPosition;if("e-tip-bottom"===this.tipClass||"e-tip-top"===this.tipClass){if(a="e-tip-bottom"===this.tipClass?"99.9%":-(c-1)+"px",sf.base.setStyleAttribute(h,{top:"-"+("e-tip-bottom"===this.tipClass?c-2:c-6)+"px"}),e)s=(m="Center"!==i||r>e.offsetWidth||this.properties.mouseTrail)&&"Left"===i||!m&&u?r-p-2+"px":m&&"Right"===i||!m&&f?"2px":m&&(u||f)?u?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-p/2-2+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-p/2+2+"px":r/2-p/2+"px"}else{s="e-tip-right"===this.tipClass?"99.9%":-(p-1)+"px",sf.base.setStyleAttribute(h,{left:("e-tip-right"===this.tipClass?-(p-2):-2)+"px"});var m,g=e.getBoundingClientRect(),w=this.tooltipEle.getBoundingClientRect();a=(m="Center"!==n||l>e.offsetHeight||this.properties.mouseTrail)&&"Top"===n||!m&&u?l-c-2+"px":m&&"Bottom"===n||!m&&f?"2px":o?g.top-w.top+g.height/2-c/2+"px":l/2-c/2+"px"}window.scrollX&&"BottomRight"===this.properties.position&&(s=this.element.offsetLeft+"px"),sf.base.setStyleAttribute(d,{top:a,left:s})}},e.prototype.tooltipHover=function(){this.tooltipEle&&(this.isTooltipOpen=!0)},e.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.properties.animation.close,e,this.findTarget())},e.prototype.onMouseOut=function(e){if(this.getValidTarget(e)){var t=e.relatedTarget;if(this.mouseAction=!0,t&&!this.properties.mouseTrail){var i=sf.base.closest(t,".e-tooltip-wrap.e-lib.e-popup");i?sf.base.EventHandler.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.properties.animation.close,e,this.findTarget()),0===this.properties.closeDelay&&this.clear())}else this.hideTooltip(this.properties.animation.close,e,this.findTarget()),this.clear()}},e.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.properties.animation.close,e,this.findTarget()),sf.base.EventHandler.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},e.prototype.onMouseMove=function(e){if(this.tooltipEle){var t=0,i=0;e.type.indexOf("touch")>-1?(e.preventDefault(),t=e.touches[0].pageX,i=e.touches[0].pageY):(t=e.pageX,i=e.pageY),sf.base.Animation.stop(this.tooltipEle),sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],"e-popup-open"),this.adjustArrow(e.target,this.properties.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.getScalingFactor(e.target),o=this.calculateTooltipOffset(this.properties.position,n.x,n.y),s=t+o.left+this.properties.offsetX,a=i+o.top+this.properties.offsetY,r=this.checkCollision(e.target,s,a);if(this.tooltipPositionX!==r.horizontal||this.tooltipPositionY!==r.vertical){var l=0===this.properties.position.indexOf("Bottom")||0===this.properties.position.indexOf("Top")?r.vertical+r.horizontal:r.horizontal+r.vertical;r.position=l,this.adjustArrow(e.target,r.position,r.horizontal,r.vertical);var d=this.calculateTooltipOffset(r.position,n.x,n.y);r.left=t+d.left-this.properties.offsetX,r.top=i+d.top-this.properties.offsetY}sf.base.setStyleAttribute(this.tooltipEle,{left:r.left+"px",top:r.top+"px"})}},e.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.hideTooltip(this.properties.animation.close)},e.prototype.touchEnd=function(e){this.tooltipEle&&null===sf.base.closest(e.target,".e-tooltip")&&!this.properties.isSticky&&this.hideTooltip(this.properties.animation.close)},e.prototype.scrollHandler=function(e){this.tooltipEle&&!this.properties.isSticky&&(sf.base.closest(e.target,".e-tooltip-wrap.e-lib.e-popup")||this.hideTooltip(this.properties.animation.close))},e.prototype.renderContent=function(e){var t=sf.base.getAttributeOrDefault(e,"sf-tooltip",null),i=sf.base.getAttributeOrDefault(e,"data-title",null);(!sf.base.isNullOrUndefined(t)&&e?(sf.base.attributes(e,{"data-content":t}),this.isMultiTarget=!0):!sf.base.isNullOrUndefined(i)&&e&&(sf.base.attributes(e,{"data-content":i}),this.isMultiTarget=!0),this.properties.content)||(sf.base.select(".e-tip-content",this.tooltipEle).innerText=e.getAttribute("data-content"))},e.prototype.setHeightWidth=function(e,t,i){this.tooltipEle&&sf.base.setStyleAttribute(this.tooltipEle,{height:t,width:e}),i&&"auto"!==this.tooltipEle.style.width&&(this.tooltipEle.style.maxWidth=e)},e.prototype.appendContainer=function(){"string"==typeof this.properties.container&&("body"===this.properties.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=sf.base.select(this.properties.container,document),sf.base.addClass([this.containerElement],"e-tooltip-popup-container"))),this.containerElement.appendChild(this.tooltipEle)},e.prototype.updateTarget=function(){if(this.contentTargetValue){sf.base.Browser.isDevice&&sf.base.addClass([this.tooltipEle],"e-bigger"),this.appendContainer(),sf.base.removeClass([this.tooltipEle],"e-hidden"),this.addDescribedBy(this.contentTargetValue,this.ctrlId+"_content"),this.renderContent(this.contentTargetValue),sf.base.addClass([this.tooltipEle],"e-popup-open"),this.renderPopup(this.contentTargetValue);var e=this.properties.position;this.adjustArrow(this.contentTargetValue,e,this.tooltipPositionX,this.tooltipPositionY),sf.base.Animation.stop(this.tooltipEle),this.reposition(this.contentTargetValue),this.afterContentRender()}},e.prototype.contentUpdated=function(){if(this.tooltipEle){if(!this.isContinuousOpen||this.isRestrictUpdate)return;this.updateTarget()}else this.ctrlId=this.element.id,this.tooltipEle=sf.base.select("#"+this.ctrlId+"_content",document),this.tooltipEle&&(this.setHeightWidth(sf.base.formatUnit(this.properties.width),sf.base.formatUnit(this.properties.height),this.contentTargetValue),this.updateTarget())},e.prototype.afterContentRender=function(){sf.base.removeClass([this.tooltipEle],"e-popup-open"),sf.base.addClass([this.tooltipEle],"e-popup-close"),this.tooltipEventArgs={type:this.contentEvent?this.contentEvent.type.toString():null,isInteracted:!sf.base.isNullOrUndefined(this.contentEvent),hasText:this.hasText(),target:this.getDomObject("target",this.contentTargetValue),name:"beforeOpen",cancel:!1,event:this.contentEvent?this.contentEvent:null,element:this.getDomObject("tooltipElement",this.tooltipEle),left:this.contentEvent?this.getXYValue(this.contentEvent,"x"):null,top:this.contentEvent?this.getXYValue(this.contentEvent,"y"):null},this.isRestrictUpdate=this.eventList.beforeOpen&&!this.isHidden(),this.eventList.beforeOpen?this.triggerEvent("TriggerBeforeOpenEvent",this.tooltipEventArgs):this.beforeOpenCallBack(!1)},e.prototype.beforeOpenCallBack=function(e){if(e)this.isPopupHidden=!0,this.contentTargetValue&&this.popupHide(this.properties.animation.close,this.contentTargetValue),this.mouseMoveBeforeRemove();else{if(sf.base.isNullOrUndefined(this.contentAnimation))return;var t={name:"None"===this.contentAnimation.effect&&"Enable"===sf.base.animationMode?"FadeIn":this.contentAnimation.effect,duration:this.contentAnimation.duration,delay:this.contentAnimation.delay,timingFunction:"easeOut"};("None"===this.contentAnimation.effect&&"Enable"!==sf.base.animationMode||"Disable"===sf.base.animationMode)&&(t=void 0),this.popupObj&&(this.popupObj.show(t,this.contentTargetValue),this.properties.openDelay&&this.properties.mouseTrail&&this.mouseMoveEvent&&this.onMouseMove(this.mouseMoveEvent))}this.contentEvent&&this.wireMouseEvents(this.contentEvent,this.contentTargetValue),this.contentTargetValue=this.contentEvent=this.contentAnimation=null},e.prototype.reposition=function(e){if(null!==e&&this.tooltipEle){var t=this.getTooltipPosition(e);this.popupObj&&(this.popupObj.position={X:t.left,Y:t.top},this.popupObj.dataBind())}},e.prototype.renderPopup=function(e){var t=this.properties.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove("e-lib"),this.popupObj=new sf.popups.Popup(this.tooltipEle,{height:this.properties.height,width:this.properties.width,position:{X:t.left,Y:t.top},enableRtl:this.properties.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},e.prototype.openPopupHandler=function(){this.tooltipEle&&this.tooltipEle.classList.contains("e-popup-close")&&this.isMultiTarget&&(sf.base.removeClass([this.tooltipEle],"e-popup-close"),sf.base.addClass([this.tooltipEle],"e-popup-open")),this.properties.mouseTrail||this.reposition(this.contentTargetValue?this.contentTargetValue:this.findTarget()),this.tooltipEventArgs.name="Opened",this.isRestrictUpdate=this.eventList.opened&&!this.isHidden(),this.eventList.opened&&this.triggerEvent("TriggerOpenedEvent",this.tooltipEventArgs),this.mouseAction&&!sf.base.isNullOrUndefined(this.tooltipEle)&&this.hideTooltip(this.properties.animation.close)},e.prototype.closePopupHandler=function(){this.clear(),this.tooltipEventArgs.name="Closed",this.isRestrictUpdate=this.eventList.closed&&!this.isHidden(),this.eventList.closed&&this.triggerEvent("TriggerClosedEvent",this.tooltipEventArgs)},e.prototype.getTooltipPosition=function(e){sf.base.setStyleAttribute(this.tooltipEle,{display:"block"}),this.formatPosition();var t=sf.popups.calculatePosition(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),i=this.getScalingFactor(e),n=this.calculateTooltipOffset(this.properties.position,i.x,i.y),o=this.calculateElementPosition(t,n),s=this.collisionFlipFit(e,o[0],o[1]);return s.left=s.left/i.x,s.top=s.top/i.y,sf.base.setStyleAttribute(this.tooltipEle,{display:""}),s},e.prototype.getDomObject=function(e,t){return t?window.sfBlazor.getDomObject(e,t):null},e.prototype.hasText=function(){return!!this.tooltipEle&&""!==this.tooltipEle.innerText.trim()},e.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;if(!(i="x"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var o=e.target.getBoundingClientRect();i=o?"x"===t?o.left:o.top:null}return Math.ceil(i)},e.prototype.destroy=function(){if(this.tooltipEle){var e=sf.base.select("#"+this.ctrlId+"_content_placeholder",document);e&&e.appendChild(this.tooltipEle)}this.popupObj&&this.popupObj.destroy(),sf.base.removeClass([this.element],"e-tooltip"),this.unWireEvents(this.properties.opensOn),this.unWireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null,this.element=null},e}();return{wireEvents:function(e,i,n,o,s){new t(e,i,n,o,s);var a=window.sfBlazor.getCompInstance(e);i&&!sf.base.isNullOrUndefined(a)&&(a.formatPosition(),a.wireEvents(o.opensOn))},contentUpdated:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.contentUpdated()},beforeRenderCallBack:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beforeRenderCallBack(t)},beforeOpenCallBack:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beforeOpenCallBack(t)},beforeCloseCallBack:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beforeCloseCallBack(t)},showTooltip:function(e,t,i,n){var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o)){if(null!==n&&""!==n){var s=o.element?sf.base.select(n,o.element):null,a=sf.base.select(n,document);s?t=s:a&&(t=a)}t&&0===t.offsetWidth||o.showTooltip(t,i,null)}},hideTooltip:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.hideTooltip(t)},destroy:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.destroy()},refresh:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.isPopupHidden||t.hideTooltip(t.properties.animation.close),t.unWireEvents(t.properties.opensOn),t.wireEvents(t.properties.opensOn))},refreshPosition:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||(null===t&&(t=null!==i&&""!==i?sf.base.select(i,n.element):n.element),n.reposition(t))},updateProperties:function(t,i){var n=window.sfBlazor.getCompInstance(t);if(!sf.base.isNullOrUndefined(n))if(n.isRestrictUpdate=!0,(i.target||i.targetContainer||i.opensOn||i.isSticky)&&n.unWireEvents(n.properties.opensOn),n.properties=e(e({},n.properties),i),i.target||i.targetContainer||i.opensOn||i.isSticky)n.wireEvents(n.properties.opensOn),n.formatPosition();else{var o=n.findTarget();if(i.container&&(sf.base.isNullOrUndefined(this.containerElement)||sf.base.removeClass([this.containerElement],"e-tooltip-popup-container"),n.tooltipEle&&o&&n.appendContainer()),(i.height||i.width)&&n.setHeightWidth(sf.base.formatUnit(i.width),sf.base.formatUnit(i.height),o),i.position&&n.formatPosition(),n.tooltipEle&&o){if(i.position&&n.properties.showTipPointer){var s=sf.base.select(".e-arrow-tip-inner",n.tooltipEle),a=sf.base.select(".e-arrow-tip",n.tooltipEle);sf.base.removeClass([a],[n.tipClass]),n.setTipClass(i.position),sf.base.addClass([a],[n.tipClass]),sf.base.setStyleAttribute(s,{top:null,left:null})}sf.base.select(".e-arrow-tip",n.tooltipEle)&&n.reposition(o)}n.isRestrictUpdate=!1}}}}()},"./modules/sf-treeview.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sfBlazor=window.sfBlazor||{},window.sfBlazor.TreeView=function(){"use strict";var e="e-list-item",t="e-list-parent",n="e-hover",o="e-icon-collapsible",s="e-icon-expandable",a="e-icons",r="e-check",l="block",d="e-active",h="e-treeview",p="e-node-focus",c="e-checkbox-wrapper",u="e-text-content",f="e-sibling",m="e-drop-in",g="e-drop-next",w="e-no-drop",y="e-disable",v="e-ul",b=function(){function b(e,t,i,n){this.isHelperElement=!0,this.mouseDownStatus=!1,this.mouseUpStatus=!1,this.preventExpand=!1,this.keyBoardAction=!1,this.isNodeRendered=!1,this.isEdited=!1,this.startTime=0,this.endTime=0,this.isKeyUp=!1,this.timer=0,this.isParentMouseDown=!1,this.isAnimationCompleted=!0,this.prevScrollValue=0,this.element=t,this.dataId=e,this.dotNetRef=n,this.options=i,window.sfBlazor.setCompInstance(this)}return b.prototype.render=function(){this.dragStartAction=!1,this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:s,expandIconPosition:"Left"},this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",shiftSpace:"shift+space",ctrlSpace:"ctrl+space"},this.animationObj=new sf.base.Animation({});var t=this.element.querySelectorAll("."+e);t.length>0&&!sf.base.Browser.isDevice&&t[0].setAttribute("tabindex","0"),this.setDisabledMode(this.options.disabled),this.setMultiSelect(this.options.allowMultiSelection),this.options.hasTemplate&&this.element.classList.add("e-interaction")},b.prototype.setDisabledMode=function(e){this.setDragAndDrop(this.options.allowDragAndDrop),this.wireEditingEvents(this.options.allowEditing),this.checkAllDisabled(e),e?this.unWireEvents():this.wireEvents()},b.prototype.checkAllDisabled=function(e){e?this.element.classList.add("e-disabled"):this.element.classList.remove("e-disabled")},b.prototype.updateWrap=function(t){var i=this;this.options.fullRowSelect&&sf.base.selectAll("."+e,t||this.element).forEach((function(e){var t=sf.base.select(".e-fullrow",e);t&&t.nextElementSibling&&(t.style.height=i.options.allowTextWrap?t.nextElementSibling.offsetHeight+"px":"")}))},b.prototype.setTextWrap=function(){this.options.allowTextWrap&&!this.element.classList.contains("e-text-wrap")?sf.base.addClass([this.element],"e-text-wrap"):!this.options.allowTextWrap&&this.element.classList.contains("e-text-wrap")&&sf.base.removeClass([this.element],"e-text-wrap"),this.updateWrap()},b.prototype.mouseDownHandler=function(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.options.allowMultiSelection&&sf.base.EventHandler.add(this.element,"contextmenu",this.preventContextMenu,this)},b.prototype.mouseupHandler=function(){this.mouseUpStatus=!0},b.prototype.onMouseLeave=function(e){this.removeHover()},b.prototype.unWireEvents=function(){if(this.wireExpandOnEvent(!1),this.options.allowTextWrap){var e=this.getParentElement(this.element);"BODY"!==e.nodeName&&sf.base.EventHandler.remove(e,"mousedown mouseup mousemove",this.resizeHandler)}sf.base.EventHandler.remove(this.element,"mousedown",this.mouseDownHandler),sf.base.EventHandler.remove(this.element,"click",this.clickHandler),sf.base.EventHandler.remove(this.element,"focusin",this.focusIn),sf.base.EventHandler.remove(this.element,"focusout",this.focusOut),sf.base.EventHandler.remove(this.element,"mouseover",this.onMouseOver),sf.base.EventHandler.remove(this.element,"mouseout",this.onMouseLeave),sf.base.EventHandler.remove(this.element,"contextmenu",this.contextLongPress),sf.base.Browser.isDevice&&this.options.allowMultiSelection&&(sf.base.EventHandler.remove(this.element,"touchstart",this.touchStart),sf.base.EventHandler.remove(this.element,"touchend",this.touchEnd)),!this.options.disabled&&this.keyboardModule&&this.keyboardModule.destroy(),this.element.classList.contains("e-virtualization")&&sf.base.EventHandler.remove(this.element,"scroll wheel",this.virtualScrollHandler)},b.prototype.keyboardActionHandler=function(e){if(this.isAnimationCompleted){this.isKeyUp=!0,this.keyAction=e;var t=e.target,i=this.getFocusedNode();if(!t||!t.classList.contains("e-input")&&"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName){e.preventDefault();var n={cancel:!1,event:e},o=i.getAttribute("data-uid");this.dotNetRef.invokeMethodAsync("TriggerKeyboardEvent",n,o,e.action,e.key)}else{var s=t;"enter"===e.action?(s.blur(),i.focus(),sf.base.addClass([i],p)):"escape"===e.action&&(s.value=this.oldText,s.blur(),i.focus(),sf.base.addClass([i],p))}}},b.prototype.setMultiSelect=function(e){this.options.allowMultiSelection=e,e?this.element.setAttribute("aria-multiselectable","true"):this.element.setAttribute("aria-multiselectable","false")},b.prototype.setCssClass=function(e){this.options.cssClass&&sf.base.removeClass([this.element],this.options.cssClass.split(" ")),e&&sf.base.addClass([this.element],e.split(" ")),this.options.cssClass=e},b.prototype.wireEditingEvents=function(e){var t=this;if(e&&!this.options.disabled){var i=this;this.touchEditObj=new sf.base.Touch(this.element,{tap:function(e){t.isDoubleTapped(e)&&2===e.tapCount&&(e.originalEvent.preventDefault(),i.editingHandler(e.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},b.prototype.setDragAndDrop=function(e){e&&!this.options.disabled?this.initializeDrag():this.destroyDrag()},b.prototype.setDragArea=function(e){this.options.allowDragAndDrop&&(this.dragObj.dragArea=e)},b.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},b.prototype.scrollUp=function(e){var t=sf.base.select(this.options.fullRowSelect?".e-fullrow ":".e-list-item",this.element);t&&e.scrollBy(0,-t.offsetHeight/2)},b.prototype.scrollDown=function(e){var t=sf.base.select(this.options.fullRowSelect?".e-fullrow ":".e-list-item",this.element);t&&e.scrollBy(0,t.offsetHeight/2)},b.prototype.clearTimer=function(){window.clearInterval(this.timer),this.virtualEle&&(this.virtualEle.style.position="absolute")},b.prototype.initializeDrag=function(){var i,o=this;this.dragObj=new sf.base.Draggable(this.element,{enableTailMode:!0,dragArea:this.options.dropArea,dragTarget:"."+u,helper:function(n){o.dragTarget=n.sender.target;var r=sf.base.closest(o.dragTarget,"."+h),l=sf.base.closest(o.dragTarget,"."+u);if(o.dragLi=sf.base.closest(o.dragTarget,"."+e),o.options.fullRowSelect&&!l&&o.dragTarget.classList.contains("e-fullrow")&&(l=o.dragTarget.nextElementSibling),!o.dragTarget||!n.element.isSameNode(r)||!l||o.dragTarget.classList.contains(h)||o.dragTarget.classList.contains(t)||o.dragTarget.classList.contains(e)||o.dragLi.classList.contains(y))return!1;var p=l.cloneNode(!0);if(sf.base.isNullOrUndefined(sf.base.select("div."+a,p))){var c=sf.base.createElement("div",{className:a+" "+s});p.insertBefore(c,p.children[0])}var f="e-drag-item "+h+" "+o.options.cssClass+" "+(o.options.enableRtl?"e-rtl":"");(i=sf.base.createElement("div",{className:f})).appendChild(p);var m=o.element.querySelectorAll("."+d).length;if(m>1&&o.options.allowMultiSelection&&o.dragLi.classList.contains(d)){var g=sf.base.createElement("span",{className:"e-drop-count",innerHTML:""+m});i.appendChild(g)}return document.body.appendChild(i),document.body.style.cursor="",o.dragData=o.getNodeData(o.dragLi),o.virtualEle=i,i},drag:function(e){if(o.clearTimer(),o.mouseUpStatus)return sf.base.detach(i),sf.base.removeClass([o.element],"e-dragging"),o.removeVirtualEle(),void(document.body.style.cursor="");o.dragObj.setProperties({cursorAt:{top:!sf.base.isNullOrUndefined(e.event.targetTouches)||sf.base.Browser.isDevice?60:-20}}),o.dragAction(e,i);var t,n=o.getScrollParent(e.target);if(!sf.base.isNullOrUndefined(n)){if(t=n.getBoundingClientRect(),e.event.y<=t.top+30||t.top<0&&e.event.y<=30){o.virtualEle.style.position="fixed";var s=o;o.timer=window.setInterval((function(){s.scrollUp(n)}),200)}if(e.event.y>=(t.top<0?n.clientHeight-60:t.top+n.clientHeight-60)){o.virtualEle.style.position="fixed";var a=o;o.timer=window.setInterval((function(){a.scrollDown(n)}),200)}}},dragStart:function(t){if(!sf.base.isNullOrUndefined(t.target)){sf.base.EventHandler.add(document,"scroll",o.scrollHandler,o),sf.base.addClass([o.element],"e-dragging");var n,s=sf.base.closest(t.target,"."+e);s&&(n=parseInt(s.getAttribute("aria-level"),10),sf.base.EventHandler.add(s,"mouseup",o.mouseupHandler,o)),o.element.classList.contains("e-virtualization")&&(o.dragParent=o.dragLi.parentElement);var a=o.getDragEvent(t.event,o,null,t.target,null,i,n);if(a.draggedNode.classList.contains("e-editing"))o.dragObj.intDestroy(t.event),o.dragCancelAction(i);else{o.dragStartEventArgs=t;var r=o.getXYValue(t.event,"X"),l=o.getXYValue(t.event,"Y");i.style.display="none",o.dotNetRef.invokeMethodAsync("TriggerDragStartEvent",o.updateObjectValues(a),r,l)}}},dragStop:function(t){if(sf.base.EventHandler.remove(document,"scroll",o.scrollHandler),!sf.base.isNullOrUndefined(t.target)){o.clearTimer(),sf.base.removeClass([o.element],"e-dragging");var i,s=sf.base.select("."+n,o.element);t.target.classList.contains(f)&&(t.target=sf.base.isNullOrUndefined(s)?sf.base.closest(t.target,"."+e):s),o.sibEle=sf.base.select("."+f),o.sibEle&&(i=o.sibEle.offsetTop),o.removeVirtualEle();var a=t.target;o.dropRoot=sf.base.closest(a,".e-droppable"),o.isHelperElement=!0,a&&o.dropRoot||(t.helper&&t.helper.parentNode&&sf.base.remove(t.helper),document.body.style.cursor="",o.isHelperElement=!1);var r,l=sf.base.closest(a,"."+e),d=l;d&&(o.isUp=d.offsetTop>i),sf.base.isNullOrUndefined(o.sibEle)&&(o.isUp=!0),l&&(r=parseInt(l.getAttribute("aria-level"),10)),o.mouseUpStatus=!1,o.dragLi&&sf.base.EventHandler.remove(o.dragLi,"mouseup",o.mouseupHandler);var h=a,p=o.getDragEvent(t.event,o,a,h,null,t.helper,r);o.dragStopEventArgs=t,p.preventTargetExpand=!1;var c=o.getXYValue(t.event,"X"),u=o.getXYValue(t.event,"Y");sf.base.isNullOrUndefined(p.dropIndicator)&&(p.dropIndicator=w,document.body.style.cursor="not-allowed");var m=o.isExternalDrop(p.draggedNode),g=o.dropRoot&&m?window.sfBlazor.getCompInstance(o.dropRoot.getAttribute("data-id")):null;o.dotNetRef.invokeMethodAsync("TriggerDragStopEvent",o.updateObjectValues(p),c,u,g?g.dotNetRef:null)}}}),this.dropObj=new sf.base.Droppable(this.element,{out:function(e){sf.base.isNullOrUndefined(e&&e.target)||e.target.classList.contains(f)||(document.body.style.cursor="not-allowed")},over:function(e){document.body.style.cursor=""}})},b.prototype.scrollHandler=function(){if(this.virtualEle){var e=parseFloat(window.getComputedStyle(this.virtualEle).getPropertyValue("top")),t=this.getScrollParent(this.element);if(!sf.base.isNullOrUndefined(e)&&!sf.base.isNullOrUndefined(t)&&e>t.clientHeight){var i=e-t.scrollTop;this.virtualEle.style.top=i+"px"}this.virtualEle.style.position="fixed"}},b.prototype.updateObjectValues=function(e){return e.clonedNode=null,e.draggedNode=null,e.draggedParentNode=null,e.dropTarget=null,e.droppedNode=null,e.target=null,e},b.prototype.dragNodeStop=function(e){this.dragParent=e.draggedParentNode,this.preventExpand=e.preventTargetExpand,(e.cancel||e.dropIndicator===w)&&(this.dragStopEventArgs.helper.parentNode&&sf.base.remove(this.dragStopEventArgs.helper),document.body.style.cursor="",this.isHelperElement=!1),this.dragStartAction=!1,this.isHelperElement&&this.dropAction(this.dragStopEventArgs)},b.prototype.dragStartActionContinue=function(e){e?(this.dragObj.intDestroy(this.dragStartEventArgs.event),this.dragCancelAction(this.virtualEle)):(this.virtualEle.style.display=l,this.dragStartAction=!0,this.dragStartEventArgs.bindEvents(sf.base.getElement(this.dragStartEventArgs.dragElement)))},b.prototype.getId=function(e){return sf.base.isNullOrUndefined(e)?null:"string"==typeof e?e:"object"===i(e)?sf.base.getElement(e).getAttribute("data-uid"):null},b.prototype.getOffsetValue=function(e,t){var i,n=e.target.classList;if("mozilla"!==sf.base.Browser.info.name||sf.base.isNullOrUndefined(n))i="Y"===t?e.event.offsetY:e.event.offsetX;else{var o=e.target.getBoundingClientRect();i=Math.ceil("Y"===t?e.event.clientY-o.top:e.event.clientX-o.left)}return i},b.prototype.dropAction=function(t){var i,n=this.getOffsetValue(t,"Y"),o=t.target,s=!1,a=window.sfBlazor.getCompInstance(this.dataId);if(a&&a.dragTarget){var r=a.dragTarget,l=sf.base.closest(r,"."+e),p=sf.base.closest(o,"."+e);if(null==p&&o.classList.contains(h)&&(p=o.firstElementChild),sf.base.remove(t.helper),o&&!o.closest("."+h+".e-droppable"))return;if(document.body.style.cursor="",!p||p.isSameNode(l)||this.isDescendant(l,p))return;if(a.options.allowMultiSelection&&l.classList.contains(d)){var c=sf.base.selectAll("."+d,a.element);if(t.target.offsetHeight<=33&&n>t.target.offsetHeight-10&&n>6)for(var u=c.length-1;u>=0;u--)p.isSameNode(c[u])||this.isDescendant(c[u],p)||this.appendNode(o,c[u],p,t,a,n);else for(u=0;u<c.length;u++)p.isSameNode(c[u])||this.isDescendant(c[u],p)||this.appendNode(o,c[u],p,t,a,n)}else this.appendNode(o,l,p,t,a,n);i=parseInt(l.getAttribute("aria-level"),10),s=!0}var f=t.element,m=this.getDragEvent(t.event,a,o,t.target,f,null,i,s),g=this.getXYValue(t.event,"X"),w=this.getXYValue(t.event,"Y");this.dotNetRef.invokeMethodAsync("TriggerNodeDropped",this.updateObjectValues(m),g,w)},b.prototype.isDoubleTapped=function(t){var i,n=t.originalEvent.target;return n&&t.tapCount&&(1===t.tapCount?this.firstTap=sf.base.closest(n,"."+e):2===t.tapCount&&(i=sf.base.closest(n,"."+e))),this.firstTap===i},b.prototype.isDescendant=function(e,t){for(var i=t.parentNode;!sf.base.isNullOrUndefined(i);){if(i===e)return!0;i=i.parentNode}return!1},b.prototype.appendNode=function(t,i,n,a,r,l){var d=sf.base.closest(t,"."+c),p=sf.base.closest(a.target,"."+o),u=sf.base.closest(a.target,"."+s),f=this.getOffsetValue(a,"X");i.classList.contains(y)||d||!(u&&l<5||p&&f<3||u&&l>19||p&&f>19||!u&&!p)?this.dropAsChildNode(i,n,r,null,a,l,!0):t.classList.contains(e)?this.dropAsSiblingNode(i,n,a,r):t.firstElementChild&&t.classList.contains(h)?t.firstElementChild.classList.contains(v)&&this.dropAsSiblingNode(i,n,a,r):t.classList.contains(o)||t.classList.contains(s)?this.dropAsSiblingNode(i,n,a,r):this.dropAsChildNode(i,n,r,null,a,l)},b.prototype.dropAsSiblingNode=function(i,n,a,r){var l,d=sf.base.closest(n,"."+t),h=sf.base.closest(i,"."+t),p=sf.base.closest(h,"."+e),c=sf.base.closest(d,"."+e),u=null,m=null,g=this.getOffsetValue(a,"X"),w=this.getOffsetValue(a,"Y");a.target.offsetHeight>0&&w>a.target.offsetHeight-2?l=!1:w<2?l=!0:(a.target.classList.contains(s)||a.target.classList.contains(o))&&(w<5||g<3?l=!0:(w>15||g>17)&&(l=!1)),a.event.target.classList.contains(f)&&this.isUp&&(l=!0),c&&(u=c.getAttribute("data-uid")),p&&(m=p.getAttribute("data-uid"));var y=this.isExternalDrop(i),v=this.dropRoot?window.sfBlazor.getCompInstance(this.dataId):null,b=y?v:this,S=this.getDropArgs(i,n,m,r,u,l);b.dotNetRef.invokeMethodAsync("DropNodeAsSibling",S),this.updateAriaLevel(i)},b.prototype.updateAriaLevel=function(e){var i=this.parents(e,"."+t).length;e.setAttribute("aria-level",""+i),this.updateChildAriaLevel(sf.base.select("."+t,e),i+1)},b.prototype.updateChildAriaLevel=function(i,n){if(!sf.base.isNullOrUndefined(i))for(var o=0,s=i.querySelectorAll("."+e);o<s.length;o++){var a=s[o];a.setAttribute("aria-level",String(n)),this.updateChildAriaLevel(sf.base.select("."+t,a),n+1)}},b.prototype.dropAsChildNode=function(i,n,o,s,a,r,l){var d=sf.base.closest(i,"."+t),p=d?sf.base.closest(d,"."+e):null,c=sf.base.closest(n,"."+t),u=sf.base.closest(c,"."+e),f=null,m=null;u&&(f=u.getAttribute("data-uid")),p&&(m=p.getAttribute("data-uid"));var g,w=this.isExternalDrop(i),y=sf.base.closest(i,"."+h)||this.element?window.sfBlazor.getCompInstance(this.dataId):null,v=this.dropRoot?window.sfBlazor.getCompInstance(this.dropRoot.getAttribute("data-id")):null,b=w?v:this;a&&r<7&&!l?(g=this.getDropArgs(i,n,m,y,f,!0),b.dotNetRef.invokeMethodAsync("DropNodeAsSibling",g)):a&&a.target.offsetHeight>0&&r>a.target.offsetHeight-10&&!l?(g=this.getDropArgs(i,n,m,y,f,!1),b.dotNetRef.invokeMethodAsync("DropNodeAsSibling",g)):(g=this.getDropArgs(i,n,m,y),b.dotNetRef.invokeMethodAsync("DropNodeAsChild",g)),this.updateAriaLevel(i)},b.prototype.isExternalDrop=function(e){var t=!1,i=sf.base.closest(e,"."+h)?sf.base.closest(e,"."+h):this.element,n=this.dropRoot;return null==i||null==n||i.isSameNode(n)||(t=!0),t},b.prototype.getDropArgs=function(e,t,i,n,o,s){return{dragLi:e.getAttribute("data-uid"),dropLi:t.getAttribute("data-uid"),dragParentLi:i,dropParentLi:o,pre:s,srcTree:n.dotNetRef,isExternalDrag:this.isExternalDrop(e)}},b.prototype.dragCancelAction=function(e){sf.base.detach(e),sf.base.removeClass([this.element],"e-dragging"),this.dragStartAction=!1},b.prototype.removeVirtualEle=function(){var e=sf.base.select("."+f);e&&sf.base.detach(e)},b.prototype.dragAction=function(t,i){if(!sf.base.isNullOrUndefined(t.target)){var n=sf.base.closest(t.target,".e-droppable"),r=sf.base.closest(t.target,"."+u),l=sf.base.select("div."+a,i),d=this.getOffsetValue(t,"X"),p=this.getOffsetValue(t,"Y");sf.base.removeClass([l],[m,g,"e-drop-out",w]),this.removeVirtualEle(),document.body.style.cursor="";var y=t.target.classList;if(this.options.fullRowSelect&&!r&&!sf.base.isNullOrUndefined(y)&&y.contains("e-fullrow")&&(r=t.target.nextElementSibling),n){var v=sf.base.closest(t.target,"."+e),b=sf.base.closest(t.target,"."+c),S=sf.base.closest(t.target,"."+o),A=sf.base.closest(t.target,"."+s);if(!n.classList.contains(h)||r&&!v.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,v))if(v&&t&&!A&&!S&&p<7&&!b||A&&p<5||S&&d<3){sf.base.addClass([l],g);var x=sf.base.createElement("div",{className:f}),V=this.options.fullRowSelect?1:0;v.insertBefore(x,v.children[V])}else if(v&&t&&!A&&!S&&t.target.offsetHeight>0&&p>t.target.offsetHeight-10&&!b||A&&p>19||S&&d>19){sf.base.addClass([l],g);x=sf.base.createElement("div",{className:f}),V=this.options.fullRowSelect?2:1;v.insertBefore(x,v.children[V])}else sf.base.addClass([l],m);else!t.target.classList.contains(e)||v.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,v)?t.target.classList.contains(f)?sf.base.addClass([l],g):t.target.classList.contains("e-droppable")?sf.base.addClass([l],m):sf.base.addClass([l],"e-drop-out"):(sf.base.addClass([l],g),this.renderVirtualEle(t))}else sf.base.addClass([l],w),document.body.style.cursor="not-allowed";var C,I=sf.base.closest(t.target,e);I&&(C=parseInt(I.getAttribute("aria-level"),10));var k=this.getDragEvent(t.event,this,t.target,t.target,null,i,C);k.dropIndicator&&sf.base.removeClass([l],k.dropIndicator),this.iconElement=l,this.draggingEventArgs=k;var M=this.getXYValue(t.event,"X"),T=this.getXYValue(t.event,"Y");this.options.draggedEvent?this.dotNetRef.invokeMethodAsync("TriggerNodeDraggingEvent",this.updateObjectValues(k),M,T):this.nodeDragging()}},b.prototype.nodeDragging=function(){this.draggingEventArgs.dropIndicator&&sf.base.addClass([this.iconElement],this.draggingEventArgs.dropIndicator)},b.prototype.renderVirtualEle=function(e){var t,i=this.getOffsetValue(e,"Y");i>e.target.offsetHeight-2?t=!1:i<2&&(t=!0);var n=sf.base.createElement("div",{className:f}),o=this.options.fullRowSelect?t?1:2:t?0:1;this.dropTargetElement=e.target.children[o],e.target.insertBefore(n,e.target.children[o])},b.prototype.parents=function(e,t){for(var i=[],n=e.parentNode;!sf.base.isNullOrUndefined(n);)sf.base.matches(n,t)&&i.push(n),n=n.parentNode;return i},b.prototype.getDragEvent=function(t,i,n,o,s,r,l,d){var p=n?sf.base.closest(n,"."+e):null,c=p?this.getNodeData(p):null,u=i?i.dragLi:s,f=i?i.dragData:null,y=n?this.parents(n,"."+e):null,v=i.dragLi.parentElement,b=i.dragLi&&v?sf.base.closest(v,"."+e):null,S=null,A=null,x=[g,m,"e-drop-out",w],V=null,C=d?u:p,I=C?sf.base.closest(C,".e-list-parent"):null,k=0;if(b=i.dragLi&&null===b&&v?sf.base.closest(v,"."+h):b,b=d?this.dragParent:b,r)for(;k<4;){if(sf.base.select("."+a,r).classList.contains(x[k])){V=x[k];break}k++}if(I){for(var M=void 0,T=i.element.querySelectorAll("."+p.classList[1]),E=0;E<T.length&&(T[E]===p&&(A=E),T[E]===u&&(M=E),sf.base.isNullOrUndefined(M)||sf.base.isNullOrUndefined(A));E++);if(sf.base.isNullOrUndefined(this.sibEle)){if(M>A&&(A+=1),u.classList[1]!==p.classList[1]?A=0!==A?A===T.length-1?T.length:A+1:0:t.offsetY<=5&&0!==A&&(A-=1),V===m&&(A=0,p.classList.contains("e-has-child"))){var B=parseInt(p.getAttribute("aria-level"),10)+1,P=p.querySelectorAll('[aria-level="'+B+'"]');A=-1===Array.from(P).findIndex((function(e){return e===u}))?P.length:P.length-1}}else M>(A=u.classList[1]===p.classList[1]?this.isUp?A-1:A:A===T.length-1?this.isUp?A:T.length:this.isUp?A:A+1)&&(A+=1);null!=V&&V!==w||(A=null)}if(n&&(S=0===y.length?null:n.classList.contains(e)?y[0]:y[1]),p===u&&(S=p),n&&o.offsetHeight<=33&&t.offsetY<o.offsetHeight-10&&t.offsetY>6&&(S=p,!d)){l=++l;var D=S?sf.base.select(".e-list-parent",S):null;A=D?D.children.length:0}return{cancel:!1,clonedNode:r,event:t,draggedNode:u,draggedNodeData:f,droppedNode:p,droppedNodeData:c,dropIndex:A,dropLevel:l,draggedParentNode:b,dropTarget:S,dropIndicator:V,target:o}},b.prototype.editingHandler=function(i){var n=i.target;!n||n.classList.contains(h)||n.classList.contains(t)||n.classList.contains(e)||n.classList.contains(a)||n.classList.contains("e-input")||n.classList.contains("e-input-group")||this.createTextbox(sf.base.closest(n,"."+e),i)},b.prototype.createTextbox=function(e,t){this.editEventArgs=this.getEditEvent(e,null,null),sf.base.addClass([e],"e-editing"),this.isEdited=!0,this.options.allowDragAndDrop&&(this.dragObj.intDestroy(null),this.destroyDrag()),this.dotNetRef.invokeMethodAsync("TriggerNodeEditingEvent",this.editEventArgs)},b.prototype.getEditEvent=function(e,t,i){return{newText:t,nodeData:this.getNodeData(e),oldText:this.oldText,innerHtml:i}},b.prototype.focusIn=function(){if("INPUT"===document.activeElement.nodeName||"TEXTAREA"===document.activeElement.nodeName){var e=document.activeElement;this.updateOldText(e.value)}this.mouseDownStatus||sf.base.addClass([this.getFocusedNode()],p),this.mouseDownStatus=!1},b.prototype.focusOut=function(){this.removeHover(),sf.base.removeClass([this.getFocusedNode()],p)},b.prototype.touchStart=function(e){this.startTime=e.timeStamp},b.prototype.touchEnd=function(t){if(this.endTime=t.timeStamp,this.endTime-this.startTime>500&&!this.dragStartAction){var i=t.target,n=sf.base.closest(i,"."+e);t.preventDefault(),this.toggleSelect(n,t,!0)}},b.prototype.getParentElement=function(e){var t=e.parentElement;return"none"!==window.getComputedStyle(t).resize||"BODY"!==t.nodeName&&(t=this.getParentElement(t)),t},b.prototype.resizeHandler=function(e){switch(e.type){case"mousedown":this.isParentMouseDown=!0;break;case"mouseup":this.isParentMouseDown=!1;break;case"mousemove":this.isParentMouseDown&&this.updateWrap()}},b.prototype.wireEvents=function(){if(!this.options.disabled){if(this.setExpandOnType(),this.options.allowTextWrap){var e=this.getParentElement(this.element);"BODY"!==e.nodeName&&sf.base.EventHandler.add(e,"mousedown mouseup mousemove",this.resizeHandler,this)}if(sf.base.EventHandler.add(this.element,"mousedown",this.mouseDownHandler,this),sf.base.EventHandler.add(this.element,"click",this.clickHandler,this),sf.base.EventHandler.add(this.element,"mouseover",this.onMouseOver,this),sf.base.EventHandler.add(this.element,"focusin",this.focusIn,this),sf.base.EventHandler.add(this.element,"focusout",this.focusOut,this),sf.base.EventHandler.add(this.element,"mouseout",this.onMouseLeave,this),sf.base.EventHandler.add(this.element,"contextmenu",this.contextLongPress,this),sf.base.Browser.isDevice&&this.options.allowMultiSelection&&(sf.base.EventHandler.add(this.element,"touchstart",this.touchStart,this),sf.base.EventHandler.add(this.element,"touchend",this.touchEnd,this)),this.options.showCheckBox){var t=sf.base.select(".e-frame",this.element);sf.base.isNullOrUndefined(t)||(sf.base.EventHandler.add(t,"mousedown",this.frameMouseHandler,this),sf.base.EventHandler.add(t,"mouseup",this.frameMouseHandler,this))}"None"!==this.options.expandOnType&&this.wireExpandOnEvent(!0),this.keyboardModule=new sf.base.KeyboardEvents(this.element,{keyAction:this.keyboardActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.element.classList.contains("e-virtualization")&&sf.base.EventHandler.add(this.element,"scroll wheel",this.virtualScrollHandler,this)}},b.prototype.virtualScrollHandler=function(){var e=sf.base.select(".e-mask-parent",this.element),t=sf.base.select(".e-list-parent",this.element);if(Math.abs(this.prevScrollValue-this.element.scrollTop)>150){e.style.display="block",t.style.visibility="hidden";var i=this.element.scrollTop;this.prevScrollValue>this.element.scrollTop&&(i-=300),e.style.transform="translate(0px,"+i+"px)",setTimeout((function(){e.style.display="none",e.style.transform="",t.style.visibility=""}),200)}this.prevScrollValue=this.element.scrollTop},b.prototype.frameMouseHandler=function(e){var t=sf.base.select(".e-ripple-container",e.target.parentElement);this.rippleMouseHandler(e,t)},b.prototype.rippleMouseHandler=function(e,t){if(t){var i=new MouseEvent(e.type,{bubbles:!1,cancelable:!0});t.dispatchEvent(i)}},b.prototype.setExpandOnType=function(){var e=this.options.expandOnType;this.options.expandOnType="DoubleClick"===e?sf.base.Browser.isDevice?"Click":"DoubleClick":e},b.prototype.expandHandler=function(i){var n=i.originalEvent.target;!n||n.classList.contains("e-input")||n.classList.contains(h)||n.classList.contains(t)||n.classList.contains(e)||n.classList.contains(a)||this.options.showCheckBox&&sf.base.closest(n,"."+c)||this.expandCollapseAction(sf.base.closest(n,"."+e),i)},b.prototype.expandCollapseAction=function(e,t){var i=sf.base.select("div."+a,e);i&&!i.classList.contains("e-process")&&(i.classList.contains(s)?this.expandAction(e,t):i.classList.contains(o)&&(this.tapEvent=t,this.expandArgs=this.getExpandEvent(e,t),this.dotNetRef.invokeMethodAsync("NodeCollapsingEventCallback",this.expandArgs,!1)))},b.prototype.animateHeight=function(e,t,i){var n=(i-t)*((e.duration-e.timeStamp)/e.duration)+t;e.element.parentElement.style.height=n+"px"},b.prototype.expandAction=function(e,i){if(this.expandArgs=this.getExpandEvent(e,i),this.options.allowTextWrap){var n=sf.base.select("."+t,e);this.isNodeRendered=!!n}e&&e.classList.contains("e-process")&&sf.base.removeClass([e],"e-process"),this.dotNetRef.invokeMethodAsync("TriggerNodeExpandingEvent",this.expandArgs)},b.prototype.collapseAction=function(i,n,r,l){var h=this;if(sf.base.isNullOrUndefined(n)&&(n=this.tapEvent),this.expandArgs=this.getExpandEvent(i,n),!l){var p=0,c=0,f=this,m=sf.base.select("."+t,i),g=i,w=sf.base.select("."+e+"."+d,i);if(m){var y=sf.base.select("div."+a,g);sf.base.removeClass([y],o),sf.base.addClass([y],s)}sf.base.isNullOrUndefined(i.getAttribute("aria-expanded"))||i.setAttribute("aria-expanded","false"),0===this.options.animation.collapse.duration?(m.style.display="none",f.dotNetRef.invokeMethodAsync("TriggerNodeCollapsingEvent",f.expandArgs),r&&f.triggerClickEvent(n,i)):this.animationObj.animate(m,{name:"None"===this.options.animation.collapse.effect&&"Enable"===sf.base.animationMode?"SlideUp":this.options.animation.collapse.effect,duration:this.options.animation.collapse.duration,timingFunction:this.options.animation.collapse.easing,begin:function(e){f.isAnimationCompleted=!1,h.element.classList.contains("e-virtualization")||(g.style.overflow="hidden"),!sf.base.isNullOrUndefined(w)&&w instanceof HTMLElement&&w.classList.add("e-animation-active"),p=sf.base.select("."+u,i).offsetHeight,c=g.offsetHeight},progress:function(e){f.animateHeight(e,p,c)},end:function(e){e.element.style.display="none",!sf.base.isNullOrUndefined(w)&&w instanceof HTMLElement&&w.classList.remove("e-animation-active"),f.dotNetRef.invokeMethodAsync("TriggerNodeCollapsingEvent",f.expandArgs),r&&f.triggerClickEvent(n,i),f.isAnimationCompleted=!0}})}},b.prototype.wireExpandOnEvent=function(e){var t=this;if(e){var i=this;this.touchExpandObj=new sf.base.Touch(this.element,{tap:function(e){("Click"===t.options.expandOnType||"DoubleClick"===t.options.expandOnType&&t.isDoubleTapped(e)&&2===e.tapCount)&&3!==e.originalEvent.which&&i.expandHandler(e)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},b.prototype.getNodeData=function(t,i){if(!sf.base.isNullOrUndefined(t)&&t.classList.contains(e)&&!sf.base.isNullOrUndefined(sf.base.closest(t,".e-control"))&&sf.base.closest(t,".e-control").classList.contains(h)){var n=t.getAttribute("data-uid"),o=sf.base.closest(t.parentNode,"."+e),s=o?o.getAttribute("data-uid"):null,a=t.classList.contains(d),r="true"===t.getAttribute("aria-expanded"),l=null===t.getAttribute("aria-expanded"),p=null;return this.options.showCheckBox&&(p=sf.base.select("."+c,t).getAttribute("aria-checked")),{id:n,text:null,parentID:s,selected:a,expanded:r,isChecked:p,hasChildren:l}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},b.prototype.getExpandEvent=function(e,t){var i=this.getNodeData(e);return{isInteracted:!sf.base.isNullOrUndefined(t),nodeData:i,event:t,isLoaded:null!=e.querySelector("."+v),nodeLevel:parseInt(e.getAttribute("aria-level"),10)}},b.prototype.updateSpinnerClass=function(){var e=this.element.querySelector(".e-icons-spinner");e&&sf.base.removeClass([e],"e-icons-spinner")},b.prototype.expandedNode=function(i){var n=this,r=this.element.querySelector('[data-uid="'+i.nodeData.id+'"]');if(!sf.base.isNullOrUndefined(r)){this.focussedElement=r;var h=sf.base.select("."+t,r);if(h){h.classList.remove("e-display-none");var p=sf.base.select("div."+a,r);this.expandArgs=this.getExpandEvent(r,i.event);var c=r,f=sf.base.select("."+e+"."+d,r),m=0,g=0,w=this;this.setHeight(c,h),0===this.options.animation.expand.duration?(sf.base.removeClass([p],s),sf.base.addClass([p],o),w.updateSpinnerClass(),w.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",w.expandArgs),h.style.display=l,c.style.display=l,c.style.overflow="",c.style.height="",sf.base.removeClass([p],"e-icons-spinner"),this.options.allowTextWrap&&(!this.isNodeRendered||this.isEdited?(this.isEdited=!1,this.updateWrap(h)):this.isNodeRendered&&this.updateWrap())):this.animationObj.animate(h,{name:"None"===this.options.animation.expand.effect&&"Enable"===sf.base.animationMode?"SlideDown":this.options.animation.expand.effect,duration:this.options.animation.expand.duration,timingFunction:this.options.animation.expand.easing,begin:function(e){w.isAnimationCompleted=!1,n.element.classList.contains("e-virtualization")||(c.style.overflow="hidden"),!sf.base.isNullOrUndefined(f)&&f instanceof HTMLElement&&f.classList.add("e-animation-active"),m=c.offsetHeight,g=sf.base.select("."+u,r).offsetHeight},progress:function(e){sf.base.removeClass([p],s),sf.base.addClass([p],o),e.element.style.display=l,w.animateHeight(e,m,g)},end:function(e){e.element.style.display=l,!sf.base.isNullOrUndefined(f)&&f instanceof HTMLElement&&f.classList.remove("e-animation-active"),w.updateSpinnerClass(),w.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",w.expandArgs),h.style.display=l,c.style.display=l,c.style.overflow="",c.style.height="",sf.base.removeClass([p],"e-icons-spinner"),n.options.allowTextWrap&&(!n.isNodeRendered||n.isEdited?(n.isEdited=!1,n.updateWrap(h)):n.isNodeRendered&&n.updateWrap()),w.isAnimationCompleted=!0}})}h||(this.expandArgs=this.getExpandEvent(r,i.event),this.updateSpinnerClass(),this.dotNetRef.invokeMethodAsync("TriggerNodeExpandedEvent",this.expandArgs)),this.setHover(this.getFocusedNode())}},b.prototype.setHeight=function(e,t){t.style.display=l,t.style.visibility="hidden",e.style.height=e.offsetHeight+"px",t.style.display="none",t.style.visibility=""},b.prototype.collapsedNode=function(e){var t=this.element.querySelector('[data-uid="'+e.nodeData.id+'"]');this.focussedElement=t;var i=t.querySelector("."+v);i&&(i.style.display="none",i.classList.add("e-display-none")),t.style.overflow="",t.style.height="",this.expandArgs=this.getExpandEvent(t,null);var n=sf.base.select("div."+a,t);sf.base.removeClass([n],o),sf.base.addClass([n],s),this.dotNetRef.invokeMethodAsync("TriggerNodeCollapsedEvent",this.expandArgs)},b.prototype.preventContextMenu=function(e){e.preventDefault()},b.prototype.contextLongPress=function(t){var i=t.target,n={event:t,node:null},o=sf.base.closest(i,"."+e);this.dotNetRef.invokeMethodAsync("TriggerNodeClickingEvent",n,o.getAttribute("data-uid"),this.getXYValue(n.event,"X"),this.getXYValue(n.event,"Y"))},b.prototype.clickHandler=function(i){this.tapEvent=i;var n=i.target,l=!1;if(sf.base.EventHandler.remove(this.element,"contextmenu",this.preventContextMenu),n){if("INPUT"===n.nodeName||"TEXTAREA"===n.nodeName){var d=n;this.updateOldText(d.value)}var h=n.classList,p=sf.base.closest(n,"."+e);if(p){if(3!==i.which){var u=sf.base.select(".e-ripple-element",p),f=sf.base.select("."+a,p);if(this.removeHover(),this.focussedElement=p,this.setFocusElement(p),this.options.showCheckBox&&!p.classList.contains(y)){var m=sf.base.closest(n,"."+c);if(!sf.base.isNullOrUndefined(m)){var g=sf.base.select(".e-frame",m);return this.validateCheckNode(m,g.classList.contains(r),p,i),void this.triggerClickEvent(i,p)}}h.contains(s)?this.expandAction(p,i):h.contains(o)?(this.expandArgs=this.getExpandEvent(p,i),this.dotNetRef.invokeMethodAsync("NodeCollapsingEventCallback",this.expandArgs,!0),l=!0):u&&f?f.classList.contains("e-ripple")&&f.classList.contains(s)?this.expandAction(p,i):f.classList.contains("e-ripple")&&f.classList.contains(o)?(this.collapseAction(p,i,!0),l=!0):h.contains(t)||h.contains(e)||this.toggleSelect(p,i,!1):h.contains(t)||h.contains(e)||this.toggleSelect(p,i,!1)}l||this.triggerClickEvent(i,p)}}},b.prototype.getXYValue=function(e,t){var i,n=e.changedTouches;if(!(i="X"===t?n?n[0].clientX:e.clientX:n?n[0].clientY:e.clientY)&&"focus"===e.type&&e.target){var o=e.target.getBoundingClientRect();i=o?"X"===t?o.left:o.top:null}return Math.ceil(i)},b.prototype.triggerClickEvent=function(e,t){var i={event:e,node:null};this.dotNetRef.invokeMethodAsync("TriggerNodeClickingEvent",i,t.getAttribute("data-uid"),this.getXYValue(e,"X"),this.getXYValue(e,"Y"))},b.prototype.getCheckEvent=function(e,t,i){return{action:t,isInteracted:!sf.base.isNullOrUndefined(i),nodeData:this.getNodeData(e)}},b.prototype.validateCheckNode=function(t,i,n,o){var s=sf.base.closest(t,"."+e),a=i?"false":"true";sf.base.isNullOrUndefined(a)||t.setAttribute("aria-checked",a);var r=this.getCheckEvent(s,i?"uncheck":"check",o);this.dotNetRef.invokeMethodAsync("TriggerNodeCheckingEvent",r,null)},b.prototype.toggleSelect=function(e,t,i){e.classList.contains(y)||(this.options.allowMultiSelection&&(t&&t.ctrlKey||i)&&e.classList.contains(d)?this.unselectNode(e,t,i):(this.selectNode(e,t,i),this.options.allowMultiSelection&&t&&(t.ctrlKey||t.shiftKey)&&(this.setFocusElement(e),this.focussedElement=e)))},b.prototype.unselectNode=function(e,t,i){var n=this.getSelectEvent(e,"un-select",t,i,[]);this.dotNetRef.invokeMethodAsync("TriggerNodeSelectingEvent",n)},b.prototype.getSelectEvent=function(e,t,i,n,o){var s=this.getNodeData(e);return{action:t,isInteracted:!sf.base.isNullOrUndefined(i),nodeData:s,isMultiSelect:n,isCtrKey:!(sf.base.isNullOrUndefined(i)||!i.ctrlKey),isShiftKey:!(sf.base.isNullOrUndefined(i)||!i.shiftKey),nodes:o}},b.prototype.selectNode=function(t,i,n){var o;if(sf.base.isNullOrUndefined(t)||!this.options.allowMultiSelection&&t.classList.contains(d)&&!sf.base.isNullOrUndefined(i))return this.setFocusElement(t),void(this.focussedElement=t);var s=[];if(this.options.allowMultiSelection&&i&&i.shiftKey){var a=sf.base.selectAll("."+e+"."+d,this.element),r=a?a.length:0;this.startNode=r>0?a[r-1]:t;var l=Array.prototype.slice.call(sf.base.selectAll("."+e,this.element)),h=l.indexOf(this.startNode),p=l.indexOf(t);h>p&&(h=(o=[p,h])[0],p=o[1]);for(var c=h;c<=p;c++){var u=l[c];sf.base.isVisible(u)&&!u.classList.contains(y)&&s.push(u.getAttribute("data-uid"))}}else this.startNode=t;var f=this.getSelectEvent(t,"select",i,n,s);this.dotNetRef.invokeMethodAsync("TriggerNodeSelectingEvent",f)},b.prototype.setFocusElement=function(e){if(!sf.base.isNullOrUndefined(e)){var t=this.getFocusedNode();t&&(sf.base.removeClass([t],p),sf.base.Browser.isDevice||t.setAttribute("tabindex","-1")),sf.base.addClass([e],p),sf.base.Browser.isDevice||e.setAttribute("tabindex","0"),this.focussedElement=e,this.updateIdAttr(t,e)}},b.prototype.updateIdAttr=function(e,t){this.element.removeAttribute("aria-activedescendant");var i=this.element.querySelectorAll("[id=_active]");i[0]!==e&&i.forEach((function(e){e.removeAttribute("id")})),e&&e.removeAttribute("id"),t.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},b.prototype.getFocusedNode=function(){var t,i;return i=sf.base.select("."+e+'[tabindex="0"]',this.element),!this.isKeyUp&&sf.base.isNullOrUndefined(i)&&(i=sf.base.select("."+e+"."+d,this.element)),sf.base.isNullOrUndefined(i)&&(i=this.focussedElement?this.focussedElement:sf.base.select("."+e+"."+p,this.element)),sf.base.isNullOrUndefined(i)&&(t=sf.base.select("."+e,this.element)),sf.base.isNullOrUndefined(i)?sf.base.isNullOrUndefined(t)?this.element.firstElementChild:t:i},b.prototype.setFullRow=function(e){(e?sf.base.addClass:sf.base.removeClass)([this.element],"e-fullrow-wrap"),this.options.fullRowSelect=e},b.prototype.onMouseOver=function(i){var n=i.target,o=n.classList,s=sf.base.closest(n,"."+e);!s||o.contains(t)||o.contains(e)?this.removeHover():s&&!s.classList.contains(y)&&this.setHover(s)},b.prototype.setHover=function(e){e.classList.contains(n)||(this.removeHover(),sf.base.addClass([e],n))},b.prototype.removeHover=function(){var e=sf.base.selectAll("."+n,this.element);e&&e.length&&sf.base.removeClass(e,n)},b.prototype.checkNode=function(e){var t=this.getFocusedNode(),i=sf.base.select("."+c,t),n=sf.base.select(" .e-frame",i).classList.contains(r);t.classList.contains(y)||0!==t.getElementsByClassName("e-checkbox-disabled").length||this.validateCheckNode(i,n,t,e)},b.prototype.openNode=function(i,n){var r=this.getFocusedNode(),l=sf.base.select("div."+a,r);if(i){if(!l)return;l.classList.contains(s)?this.expandAction(r,n):this.focusNextNode(r,!0)}else if(l&&l.classList.contains(o))this.tapEvent=n,this.expandArgs=this.getExpandEvent(r,n),this.dotNetRef.invokeMethodAsync("NodeCollapsingEventCallback",this.expandArgs,!1);else{var d=sf.base.closest(sf.base.closest(r,"."+t),"."+e);if(!d)return;d.classList.contains(y)||(this.setNodeFocus(r,d),this.navigateToFocus(!0),d.focus())}},b.prototype.getScrollParent=function(e){return sf.base.isNullOrUndefined(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)},b.prototype.navigateToFocus=function(e){var t=this.getFocusedNode().querySelector("."+u),i=t.getBoundingClientRect(),n=this.getScrollParent(this.element);if(!sf.base.isNullOrUndefined(n)){var o=n.getBoundingClientRect();i.bottom>o.bottom?n.scrollTop+=i.bottom-o.bottom:i.top<o.top&&(n.scrollTop-=o.top-i.top)}this.isVisibleInViewport(t)||t.scrollIntoView(e)},b.prototype.isVisibleInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},b.prototype.setNodeFocus=function(e,t){sf.base.removeClass([e],p),sf.base.Browser.isDevice||e.setAttribute("tabindex","-1"),t.classList.contains(y)||(this.focussedElement=t,sf.base.addClass([t],p),sf.base.Browser.isDevice||t.setAttribute("tabindex","0"),this.updateIdAttr(e,t))},b.prototype.focusNextNode=function(e,t){var i=t?this.getNextNode(e):this.getPrevNode(e);if(this.setNodeFocus(e,i),this.navigateToFocus(!t),i.classList.contains(y)){var n=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&n.classList.contains(u)?this.focusNextNode(i,!1):this.focusNextNode(i,t)}i.focus()},b.prototype.shiftKeySelect=function(e,t){if(this.options.allowMultiSelection){var i=this.getFocusedNode(),n=e?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(n),this.focussedElement=n,this.toggleSelect(n,t,!1),this.navigateToFocus(!e)}else this.navigateNode(e)},b.prototype.getNextNode=function(e){var t,i=this.liList.indexOf(e);do{if(i++,t=this.liList[i],sf.base.isNullOrUndefined(t))return e}while(!sf.base.isVisible(t));return t},b.prototype.getPrevNode=function(e){var t,i=this.liList.indexOf(e);do{if(i--,t=this.liList[i],sf.base.isNullOrUndefined(t))return e}while(!sf.base.isVisible(t));return t},b.prototype.getRootNode=function(){var e,t=0;do{e=this.liList[t],t++}while(!sf.base.isVisible(e));return e},b.prototype.getEndNode=function(){var e,t=this.liList.length-1;do{e=this.liList[t],t--}while(!sf.base.isVisible(e));return e},b.prototype.navigateNode=function(e){this.focusNextNode(this.getFocusedNode(),e)},b.prototype.updateOldText=function(e){this.oldText=e},b.prototype.onPropertyChanged=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){switch(i[t]){case"showCheckBox":this.options.showCheckBox=e.showCheckBox;break;case"allowDragAndDrop":this.setDragAndDrop(e.allowDragAndDrop);break;case"allowTextWrap":this.options.allowTextWrap=e.allowTextWrap,this.setTextWrap();break;case"allowEditing":this.wireEditingEvents(e.allowEditing);break;case"disabled":this.options.disabled!==e.disabled&&(this.options.disabled=e.disabled,this.setDisabledMode(e.disabled));break;case"dragArea":this.setDragArea(e.dropArea);break;case"cssClass":this.setCssClass(e.cssClass);break;case"fullRowSelect":this.setFullRow(e.fullRowSelect);break;case"expandOnType":this.options.expandOnType=e.expandOnType,this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"===this.options.expandOnType||this.options.disabled||this.wireExpandOnEvent(!0);break;case"enableRtl":this.options.enableRtl=e.enableRtl,(this.options.enableRtl?sf.base.addClass:sf.base.removeClass)([this.element],"e-rtl");break;case"animation":this.options.animation=e.animation}}},b.prototype.navigateRootNode=function(e){var t=this.getFocusedNode(),i=e?this.getRootNode():this.getEndNode();i.classList.contains(y)||(this.setNodeFocus(t,i),this.navigateToFocus(e))},b.prototype.selectGivenNodes=function(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];n.classList.contains(y)||this.selectNode(n,null,!0)}},b.prototype.beginEdit=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');sf.base.isNullOrUndefined(t)||this.options.disabled||this.createTextbox(t,null)},b.prototype.ensureVisible=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');sf.base.isNullOrUndefined(t)||setTimeout((function(){t.scrollIntoView(!0)}),450)},b.prototype.nodeCollapse=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');this.collapseAction(t,null,!1)},b.prototype.nodeExpand=function(e){var t=this.element.querySelector('[data-uid="'+e+'"]');this.expandAction(t,null)},b.prototype.nodeSelection=function(t){var i=[];if(t)for(var n=sf.base.selectAll("."+e,this.element),o=new Set(t),s=0,a=n;s<a.length;s++){var r=a[s],l=r.closest(".e-list-item").getAttribute("data-uid");o.has(l)&&i.push(r)}var h=sf.base.selectAll("."+e+"."+d,this.element);sf.base.removeClass(h,d),sf.base.addClass(i,d)},b.prototype.nodeCheck=function(t,i){var n=[],o=[];if(t)for(var s=sf.base.selectAll(".e-frame",this.element),a=new Set(t),l=new Set(i),d=0,h=s;d<h.length;d++){var p=h[d],c=p.closest("."+e).getAttribute("data-uid");a.has(c)&&n.push(p),l.size&&l.has(c)&&o.push(p)}var u=sf.base.selectAll("."+r,this.element);sf.base.removeClass(u,r);var f=sf.base.selectAll(".e-stop",this.element);sf.base.removeClass(f,"e-stop"),sf.base.addClass(n,r),sf.base.addClass(o,"e-stop")},b.prototype.KeyActionHandler=function(t,i){this.liList=Array.prototype.slice.call(sf.base.selectAll("."+e,this.element));var n=this.element.querySelector('[data-uid="'+i+'"]'),o=sf.base.isNullOrUndefined(n)?this.getFocusedNode():n;switch(t.action){case"space":this.options.showCheckBox?this.checkNode(this.keyAction):this.toggleSelect(o,this.keyAction,!1);break;case"moveRight":this.keyBoardAction=!0,this.openNode(!this.options.enableRtl,this.keyAction);break;case"moveLeft":this.keyBoardAction=!0,this.openNode(this.options.enableRtl,this.keyAction);break;case"shiftDown":this.shiftKeySelect(!0,this.keyAction);break;case"moveDown":case"ctrlDown":case"csDown":this.navigateNode(!0);break;case"shiftUp":this.shiftKeySelect(!1,this.keyAction);break;case"moveUp":case"ctrlUp":case"csUp":this.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":this.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":this.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":case"shiftSpace":case"ctrlSpace":this.toggleSelect(o,this.keyAction,!1);break;case"f2":this.options.allowEditing&&!o.classList.contains(y)&&this.createTextbox(o,this.keyAction);break;case"ctrlA":if(this.options.allowMultiSelection){var s=sf.base.selectAll("."+e+":not(."+d+")",this.element);this.selectGivenNodes(s)}}this.isKeyUp=!1;var a=this;setTimeout((function(){a.keyBoardAction&&(a.setHover(a.getFocusedNode()),a.keyBoardAction=!1)}),100)},b}();return{initialize:function(e,t,i,n){new b(e,t,i,n);var o=window.sfBlazor.getCompInstance(e);o.render(),t&&!sf.base.isNullOrUndefined(o)&&o.options.allowTextWrap&&o.updateWrap(),document.getElementById(t.id)&&o.dotNetRef.invokeMethodAsync("CreatedEvent",null)},updateTextWrap:function(e){var t=window.sfBlazor.getCompInstance(e);!sf.base.isNullOrUndefined(t)&&t.options.allowTextWrap&&t.updateWrap()},dataSourceChanged:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||(t.unWireEvents(),t.wireEvents())},collapseAction:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)){var n=i.element.querySelector('[data-uid="'+t+'"]');i.collapseAction(n,null,!1)}},NodeCollapseAction:function(e,t,i,n){var o=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(o)){var s=o.element.querySelector('[data-uid="'+t+'"]');o.collapseAction(s,null,n,i)}},expandAction:function(e,t){var i=window.sfBlazor.getCompInstance(e);if(!sf.base.isNullOrUndefined(i)){var n=i.element.querySelector('[data-uid="'+t+'"]');i.expandAction(n,null)}},expandedNode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||setTimeout((function(){i.expandedNode(t)}),10)},collapsedNode:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.collapsedNode(t)},KeyActionHandler:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||setTimeout((function(){n.KeyActionHandler(t,i)}),n.isAnimationCompleted?0:n.animationObj.duration)},setMultiSelect:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.setMultiSelect(t)},dragStartActionContinue:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.dragStartActionContinue(t)},dragNodeStop:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.dragNodeStop(t)},nodeDragging:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.nodeDragging()},setFocus:function(e,t,i,n){if(!sf.base.isNullOrUndefined(t)&&!sf.base.isNullOrUndefined(i)){var o=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(o)||o.updateOldText(n);var s=document.getElementById(t.id);s.focus(),s.setSelectionRange(0,s.value.length)}},nodeEdited:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||sf.base.isNullOrUndefined(t)||(i.options.allowTextWrap&&i.updateWrap(),i.unWireEvents(),i.wireEvents(),i.options.allowDragAndDrop&&i.initializeDrag(),sf.base.removeClass([t],"e-editing"))},updateSpinnerClass:function(e){var t=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(t)||t.updateSpinnerClass()},onPropertyChanged:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.onPropertyChanged(t)},beginEdit:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.beginEdit(t)},ensureVisible:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.ensureVisible(t)},nodeCollapse:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.nodeCollapse(t)},nodeExpand:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.nodeExpand(t)},nodeSelection:function(e,t){var i=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(i)||i.nodeSelection(t)},nodeCheck:function(e,t,i){var n=window.sfBlazor.getCompInstance(e);sf.base.isNullOrUndefined(n)||n.nodeCheck(t,i)},getAriaLevel:function(e,t){var i=window.sfBlazor.getCompInstance(e),n=0;if(!sf.base.isNullOrUndefined(i)){var o=i.element.querySelector('[data-uid="'+t.nodeData.id+'"]');n=parseInt(o.getAttribute("aria-level"),10)}return n}}}()},"./modules/splitbuttonsbase.js":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}window.sf=window.sf||{};window.sf.splitbuttons=window.sf.base.extend({},window.sf.splitbuttons,function(e){"use strict";var t,n=(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,i)},function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}),o=function(e,t,n,o){var s,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===("undefined"==typeof Reflect?"undefined":i(Reflect))&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(a<3?s(r):a>3?s(t,n,r):s(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),o([sf.base.Property("")],t.prototype,"iconCss",void 0),o([sf.base.Property("")],t.prototype,"id",void 0),o([sf.base.Property(!1)],t.prototype,"separator",void 0),o([sf.base.Property("")],t.prototype,"text",void 0),o([sf.base.Property("")],t.prototype,"url",void 0),o([sf.base.Property(!1)],t.prototype,"disabled",void 0),t}(sf.base.ChildProperty);return e.Item=s,e.getModel=function(e,t){for(var i=sf.base.extend({},e),n=0,o=Object.keys(i);n<o.length;n++){var s=o[n];t.indexOf(s)<0&&sf.base.deleteObject(i,s)}return i},e.setBlankIconStyle=function(e,t){var i=[].slice.call(e.getElementsByClassName("e-blank-icon"));if(t&&[].slice.call(e.getElementsByClassName("e-item")).forEach((function(e){(e.style.paddingLeft||e.style.paddingRight)&&e.removeAttribute("style")})),i.length){var n=e.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!sf.base.isNullOrUndefined(n)){n.classList.contains("e-url")&&(n=n.querySelector(".e-menu-url"));var o,s=n.querySelector(".e-menu-icon"),a=e.classList.contains("e-rtl");o=a?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var r=parseInt(getComputedStyle(s).fontSize,10)+parseInt(getComputedStyle(s)[o.margin],10)+parseInt(getComputedStyle(n).paddingLeft,10)+"px";i.forEach((function(e){e.classList.contains("e-url")&&e.querySelector(".e-menu-url")?e.querySelector(".e-menu-url").style[o.padding]=r:e.style[o.padding]=r}))}}},e.upDownKeyHandler=function(e,t){var i=40===t?0:e.childElementCount-1,n=i,o=e.querySelector(".e-selected");o&&o.classList.remove("e-selected");for(var s=0,a=e.children.length;s<a;s++)e.children[s].classList.contains("e-focused")&&(n=s,e.children[s].classList.remove("e-focused"),40===t?n++:n--,n===(40===t?e.childElementCount:-1)&&(n=i));-1!==(n=function e(t,i,n,o,s){void 0===s&&(s=0);(i.classList.contains("e-separator")||i.classList.contains("e-disabled"))&&(n===(40===o?t.childElementCount-1:0)?n=40===o?0:t.childElementCount-1:40===o?n++:n--);if((i=t.children[n]).classList.contains("e-separator")||i.classList.contains("e-disabled")){if(++s===t.childElementCount)return n=-1;n=e(t,i,n,o,s)}return n}(e,e.children[n],n,t))&&(sf.base.addClass([e.children[n]],"e-focused"),e.children[n].focus())},e}({}))},"./modules/syncfusion-blazor-extended.js":function(e,t,i){"use strict";i("./syncfusion-blazor-extended.js")},"./single-sfpdfviewer-bundle.js":function(e,t,i){"use strict";i.r(t);i("./modules/base.js"),i("./syncfusion-blazor.js"),i("./modules/syncfusion-blazor-extended.js"),i("./modules/popupsbase.js"),i("./modules/popup.js"),i("./modules/drawings.js"),i("./modules/sf-pdfviewer2.js"),i("./modules/navigationsbase.js"),i("./modules/splitbuttonsbase.js"),i("./modules/sf-toast.js"),i("./modules/sf-listview.js"),i("./modules/sf-drop-down-button.js"),i("./modules/sf-tooltip.js"),i("./modules/sf-dialog.js"),i("./modules/sf-contextmenu.js"),i("./modules/sf-menu.js"),i("./modules/sf-toolbar.js"),i("./modules/sf-colorpicker.js"),i("./modules/sf-numerictextbox.js"),i("./modules/sf-textbox.js"),i("./modules/sf-slider.js"),i("./modules/sf-dropdownlist.js"),i("./modules/sf-listbox.js"),i("./modules/sf-treeview.js")},"./syncfusion-blazor-extended.js":function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function s(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}function r(e,t,i){return t=l(t),function(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,i||[],l(e).constructor):t.apply(e,i))}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",o=i.toStringTag||"@@toStringTag";function s(i,n,o,s){var l=n&&n.prototype instanceof r?n:r,d=Object.create(l.prototype);return f(d,"_invoke",function(i,n,o){var s,r,l,d=0,h=o||[],p=!1,c={p:0,n:0,v:e,a:u,f:u.bind(e,4),d:function(t,i){return s=t,r=0,l=e,c.n=i,a}};function u(i,n){for(r=i,l=n,t=0;!p&&d&&!o&&t<h.length;t++){var o,s=h[t],u=c.p,f=s[2];i>3?(o=f===n)&&(l=s[(r=s[4])?5:(r=3,3)],s[4]=s[5]=e):s[0]<=u&&((o=i<2&&u<s[1])?(r=0,c.v=n,c.n=s[1]):u<f&&(o=i<3||s[0]>n||n>f)&&(s[4]=i,s[5]=n,c.n=f,r=0))}if(o||i>1)return a;throw p=!0,n}return function(o,h,f){if(d>1)throw TypeError("Generator is already running");for(p&&1===h&&u(h,f),r=h,l=f;(t=r<2?e:l)||!p;){s||(r?r<3?(r>1&&(c.n=-1),u(r,l)):c.n=l:c.v=l);try{if(d=2,s){if(r||(o="next"),t=s[o]){if(!(t=t.call(s,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,r<2&&(r=0)}else 1===r&&(t=s.return)&&t.call(s),r<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),r=1);s=e}else if((t=(p=c.n<0)?l:i.call(n,c))!==a)break}catch(t){s=e,r=1,l=t}finally{d=1}}return{value:t,done:p}}}(i,o,s),!0),d}var a={};function r(){}function l(){}function d(){}t=Object.getPrototypeOf;var h=[][n]?t(t([][n]())):(f(t={},n,(function(){return this})),t),p=d.prototype=r.prototype=Object.create(h);function c(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,f(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=d,f(p,"constructor",d),f(d,"constructor",l),l.displayName="GeneratorFunction",f(d,o,"GeneratorFunction"),f(p),f(p,o,"Generator"),f(p,n,(function(){return this})),f(p,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:s,m:c}})()}function f(e,t,i,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}(f=function(e,t,i,n){if(t)o?o(e,t,{value:i,enumerable:!n,configurable:!n,writable:!n}):e[t]=i;else{var s=function(t,i){f(e,t,(function(e){return this._invoke(t,i,e)}))};s("next",0),s("throw",1),s("return",2)}})(e,t,i,n)}function m(e,t,i,n,o,s,a){try{var r=e[s](a),l=r.value}catch(e){return void i(e)}r.done?t(l):Promise.resolve(l).then(n,o)}function g(e){return function(){var t=this,i=arguments;return new Promise((function(n,o){var s=e.apply(t,i);function a(e){m(s,n,o,a,r,"next",e)}function r(e){m(s,n,o,a,r,"throw",e)}a(void 0)}))}}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y,v,b,S,A,x,V,C={modules:{},tempCallBacks:[],dataSourceProperties:["dataSource","dataSource_custom","shapeData"],enableRtl:function(e){sf.base.enableRtl(e)},loadCldr:function(e){sf.base.loadCldr(JSON.parse(e))},setCulture:function(e,t){sf.base.setCulture(e),sf.base.extend(sf.base.blazorCultureFormats,t)},convertOptions:function(e,t){var i={};for(var n in e){for(var o=n.trim().split("."),s=i,a=0;a<o.length-1;a++){var r=o[a].match(/^(\w+)\[(\d+)\]$/);if(r){var l=s[r[1]];l||(l=s[r[1]]=[]),s=l[r[2]]=l[r[2]]||{}}else s=s[o[a]]=s[o[a]]||{}}s[o[a]]=e[n],t&&delete e[n]}return i},convertInitialOptions:function(e){return e=sfBlazor.convertOptions(JSON.parse(e),!0),JSON.stringify(e)},initialize:function(e,t,i,n,o,s,a,r,l){try{if(null==n)return;if("sf.popups.Spinner"==n)return;sf.base.enableBlazorMode(),!window.BlazorAdaptor&&sf.data&&"object"===w(sf.data)&&sfBlazor.initBlazorAdaptor(),t=sfBlazor.convertInitialOptions(t);var d={dotnetInstance:o,templateRefs:r};(t=JSON.parse(t,sfBlazor.parseRevive.bind(d))).elementID="_ejs"+e;var h=sf.base.getValue(n,window);if(sfBlazor.bindEvents(t,i,o,n),h)var p=new h(t);if(p){if(p.isServerRendered=!0,p._dotnetInstance=o,p.templateDotnetInstance=r,p.interopAdaptor=l,p.bindableProps=s=JSON.parse(s),a){var c=document.getElementById(e);for(var u in a)c.setAttribute(u,a[u])}"sf.pdfviewer.PdfViewer"==n&&null==p.serviceUrl&&(sf.pdfviewer.AjaxHandler.prototype.send=sfBlazor.requestHandler.bind(p)),"sf.documenteditor.DocumentEditorContainer"!=n&&"sf.documenteditor.DocumentEditor"!=n||null!=p.serviceUrl&&""!=p.serviceUrl&&null!=p.serviceUrl||(sf.documenteditor.XmlHttpRequestHandler.prototype.send=sfBlazor.docEditRequestHandler.bind(p)),p.appendTo("#"+e)}}catch(e){sfBlazor.throwError(e,n)}},renderComplete:function(e,t){null!=e&&(window[e]&&(window[e.id]instanceof e||window[e.id]instanceof HTMLElement)&&delete window[e.id],e.classList.remove("e-blazor-hidden"))},isDataSourceProperty:function(e){return-1!==sfBlazor.dataSourceProperties.indexOf(e)},setModel:function(e,t,i){try{var n=document.getElementById(e);if(!n)return;var o,s=n.ej2_instances[0];s.preventUpdate=!0,sfBlazor.updateOldProperties(s,t);var a={dotnetInstance:s._dotnetInstance};o=sfBlazor.getCompObject(s,t,a,i),s.setProperties(o),s.dataBind(),s.preventUpdate=!1}catch(e){window.sfBlazor.throwError(e,s)}},getCompObject:function(e,t,i,n){var o=sfBlazor.getModelObject(e,t,i,!1);if(o){for(var s=Object.keys(o),a=0;a<s.length;a++){var r=s[a],l=e[r],d=o[r],h=l&&l.isComplexArray,p=d&&"object"===w(d)&&Object.keys(d)[0];if((l instanceof sf.base.ChildProperty||h)&&!isNaN(p)){var c,u=d[p];if(!Array.isArray(d)&&u&&u.isNewComponent){var f=r.charAt(0).toUpperCase()+r.substring(1,r.length),m=n.split(".").splice(0,2).join(".")+"."+f,g=sf.base.getValue(m,window);g&&(c=sf.base.createInstance(g,[e,r,u,h]))}c&&(o[r][p]=c,e[r]&&Array.isArray(e[r])&&e[r].filter((function(e,t){p!==t&&(o[r][t]=e)})))}}return o}},getModelObject:function(e,t,i,n){for(var o={},s=t.match(/"(.*?)":/g),a=0;a<s.length;a++){var r=s[a].replace(":","").replace(/"/g,""),l=sfBlazor.convertInitialOptions(t),d=n?sf.base.getValue(r,e):sf.base.getValue(r,JSON.parse(l,sfBlazor.parseRevive.bind(i)));if(void 0!==d){r=r.split(/\[(\d+)\]/).join(".").replace(/\.\./g,".");var h=sfBlazor.getNestedObject(e,r,d);sf.base.extend(o,{},h.model,!0),n||(e.deepMerge=e.deepMerge?Array.from(new Set(e.deepMerge.concat(h.deepMerge))):h.deepMerge)}}return o},updateOldProperties:function(e,t){var i=sfBlazor.getModelObject(e,t,null,!0);sf.base.extend(e.oldProperties,{},i,!0)},getNestedObject:function(e,t,i,n){var o=n||{},s=[];if(-1!==t.indexOf(".")){var a=t.split(".");-1===s.indexOf(a[0])&&s.push(a[0]);for(var r=0;r<a.length;r++){var l=r===a.length-1?i:{},d=0===r?o:d[a[r-1]];e=0===r?e:e[a[r-1]],d=sfBlazor.getNestedObject(e,a[r],l,d,a[r+1]).model}}else o[t]=i;return{model:o,deepMerge:s}},updateModel:(V=g(u().m((function e(t){var i,n,o;return u().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,t.isRendered&&!t.preventUpdate&&t._dotnetInstance){e.n=1;break}return e.a(2);case 1:return i=sfBlazor.copyWithoutCircularReferences([t.bulkChanges],t.bulkChanges),n=sfBlazor.getUpdatedValue(t,i),e.n=2,t._dotnetInstance.invokeMethodAsync("UpdateModel",n);case 2:t.preventUpdate=!1,e.n=4;break;case 3:e.p=3,o=e.v,window.sfBlazor.throwError(o,t);case 4:return e.a(2)}}),e,null,[[0,3]])}))),function(e){return V.apply(this,arguments)}),getUpdatedValue:function(e,t){for(var i={},n=["query","formatter"],o=Object.keys(t),s=0;s<o.length;s++){var a=o[s],r=t[a];-1===n.indexOf(a)&&(sfBlazor.isChildProperty(e,a)?i[a]=sfBlazor.getUpdatedValue(e,r):("object"!==w(r)||null===r||r instanceof Date||Array.isArray(r)&&r[0]instanceof Date||(r=JSON.stringify(r)),i[a]=r))}return i},isChildProperty:function(e,t){return e.properties&&e.properties[t]&&void 0!==e.properties[t].parentObj},updateBlazorProperties:function(e,t){t._dotnetInstance.invokeMethodAsync("UpdateBlazorDiagramObjects",e)},updateBlazorDiagramEvents:(x=g(u().m((function e(t,i){var n,o;return u().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,i._dotnetInstance.invokeMethodAsync("UpdateBlazorDiagramEvents",t);case 1:(n=e.v)&&"string"==typeof n&&(n=JSON.parse(n)),e.n=3;break;case 2:e.p=2,o=e.v,window.sfBlazor.throwError(o,this);case 3:return e.a(2,n)}}),e,this,[[0,2]])}))),function(e,t){return x.apply(this,arguments)}),callDiagramMethod:(A=g(u().m((function e(t,i){var n;return u().w((function(e){for(;;)switch(e.n){case 0:return n=document.getElementById(i)&&document.getElementById(i).ej2_instances[0],"updateDiagramObjects"===t.methodName&&(t.obj=JSON.parse(t.obj,sfBlazor.parseRevive)),e.a(2,n.callFromServer(t))}}),e)}))),function(e,t){return A.apply(this,arguments)}),diagramSetTemplateInstance:function(e,t,i){sfBlazor.templateDotnetInstance||(sfBlazor.templateDotnetInstance=[]),sfBlazor.templateDotnetInstance[i||e]=t},diagramSetTemplate:function(e,t){setTimeout((function(){if(null!=e)for(var t=document.getElementsByClassName("blazor-template"),i=0;i<t.length;i++){for(var n=t[i].getElementsByClassName("blazor-inner-template"),o=0;o<n.length;o++)for(var s=document.getElementsByClassName("e-blazor-template"),a=0;a<s.length;a++){var r=s[a];r&&n[o].children.length?0==r.children.length&&a===o&&r.appendChild(n[o].children[0].cloneNode(!0)):r&&(r.innerHTML=n[o].innerHTML)}if(window.sfBlazor.tempCallBacks.length)for(var l=0;l<window.sfBlazor.tempCallBacks.length;l++)window.sfBlazor.tempCallBacks[l].Id==e&&(window.sfBlazor.tempCallBacks[l].Promise(window.sfBlazor.tempCallBacks[l].Id),window.sfBlazor.tempCallBacks.splice(l,1))}}),100)},updateTemplate:function(e,t,i,n,o){void 0===n&&(n={}),o&&window.sfBlazor.tempCallBacks.push({Id:i,Promise:o});var s=[],a=[],r=[];if(sf.base.isNullOrUndefined(t)||!t.length||sf.base.isNullOrUndefined(t[0].BlazId)){if(!sf.base.isNullOrUndefined(t))for(l=0;l<t.length;l++)r.push(t[l].BlazorTemplateId),s.push(JSON.parse(window.sfBlazor.cleanStringify(t[l]))),delete s[l].BlazorTemplateId}else for(var l=0;l<t.length;l++)a.push(t[l].BlazId),r.push(t[l].BlazorTemplateId);var d=setInterval((function(){var t=n.templateDotnetInstance?n.templateDotnetInstance[e]||window.sfBlazor.templateDotnetInstance[n.guid||e]:window.sfBlazor.templateDotnetInstance?window.sfBlazor.templateDotnetInstance[n.guid||e]:null;if(!t){if(n.templateDotnetInstance&&!window.sfBlazor.templateDotnetInstance[n.guid||e])return;if(!(n.parentObj&&n.parentObj.templateDotnetInstance&&n.parentObj.templateDotnetInstance[e]))return;t=n.parentObj.templateDotnetInstance[e]}t&&(t.invokeMethodAsync("UpdateTemplate",e,JSON.stringify(s),i,r,a),clearInterval(d))}),10)},setTemplateInstance:function(e,t,i){sfBlazor.templateDotnetInstance||(sfBlazor.templateDotnetInstance=[]),sfBlazor.templateDotnetInstance[i||e]=t},setTemplate:function(e,t){setTimeout((function(){if(null!=e){for(var t=document.getElementById(e).getElementsByClassName("blazor-inner-template"),i=0;i<t.length;i++){var n=t[i].getAttribute("data-templateid"),o=document.getElementById(n);if(o&&t[i].childNodes)for(var s=t[i].childNodes.length,a=0;a<s;a++)o.appendChild(t[i].childNodes[0]);else o&&(o.innerHTML=t[i].innerHTML)}if(window.sfBlazor.tempCallBacks.length)for(var r=0;r<window.sfBlazor.tempCallBacks.length;r++)window.sfBlazor.tempCallBacks[r].Id==e&&(window.sfBlazor.tempCallBacks[r].Promise(window.sfBlazor.tempCallBacks[r].Id),window.sfBlazor.tempCallBacks.splice(r,1))}}),100)},invokeMethod:(S=g(u().m((function e(t,i,n,o,s){var a,r,l;return u().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,a=null,o=JSON.parse(o,sfBlazor.parseRevive),r=document.getElementById(t)&&document.getElementById(t).ej2_instances&&document.getElementById(t).ej2_instances[0],"destroy"===i&&r&&(r._dotnetInstance=null),s&&o.push(s),!r){e.n=6;break}if(null!==n){e.n=1;break}a=r[i].apply(r,o),e.n=3;break;case 1:return r=sfBlazor.getDocEditor(r,n),r=window.sfBlazor.getChildModule(r,n),a=r[i].apply(r,o),e.n=2,sfBlazor.promiseHandler(a);case 2:a=e.v;case 3:if(!a||"object"!==w(a)||a instanceof Promise||(a=sfBlazor.cleanStringify(a)),!("PdfViewer"==r.getModuleName()&&"saveAsBlob"==i&&a instanceof Promise)){e.n=5;break}return e.n=4,sfBlazor.promiseHandler(a);case 4:a=e.v;case 5:return e.a(2,a);case 6:e.n=8;break;case 7:return e.p=7,l=e.v,e.a(2,window.sfBlazor.throwError(l,r));case 8:return e.a(2)}}),e,null,[[0,7]])}))),function(e,t,i,n,o){return S.apply(this,arguments)}),promiseHandler:(b=g(u().m((function e(t){return u().w((function(e){for(;;)switch(e.n){case 0:if(!(t instanceof Promise)){e.n=1;break}return e.n=1,t.then(function(){var e=g(u().m((function e(i){return u().w((function(e){for(;;)switch(e.n){case 0:if(!(i instanceof Blob)){e.n=2;break}return e.n=1,window.sfBlazor.docEditFileReader(i).then((function(e){t=JSON.stringify({data:e.substring(e.indexOf(",")+1)})}));case 1:e.n=3;break;case 2:t=i;case 3:return e.a(2)}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:return e.a(2,t)}}),e)}))),function(e){return b.apply(this,arguments)}),getDocEditor:function(e,t){return"DocumentEditorContainer"===e.getModuleName()&&"documentEditor"!==t?e.documentEditor:e},getChildModule:function(e,t){try{for(var i=t.split(","),n=0;n<i.length;n++)e=e[i[n]];return e}catch(t){window.sfBlazor.throwError(t,e)}},getMethodCall:function(e,t,i){try{var n=document.getElementById(e)&&document.getElementById(e).ej2_instances[0];return n=sfBlazor.getDocEditor(n),null==t||"null"==t?n[i]:(n=window.sfBlazor.getChildModule(n,t))[i]}catch(e){window.sfBlazor.throwError(e,n)}},setMethodCall:function(e,t,i,n){try{var o=document.getElementById(e)&&document.getElementById(e).ej2_instances[0];o=sfBlazor.getDocEditor(o),(o=window.sfBlazor.getChildModule(o,t))[i]=n[0]}catch(e){window.sfBlazor.throwError(e,o)}},methodCall:function(e,t,i,n){try{var o=document.getElementById(e)&&document.getElementById(e).ej2_instances[0];(o=window.sfBlazor.getChildModule(o,t))[i].apply(o,[n])}catch(e){window.sfBlazor.throwError(e,o)}},parseRevive:function(e,t){var n=new RegExp(/(\d{4})-(\d{2})-(\d{2})T(\d{2})\:(\d{2})\:(\d{2}).*/),o=new RegExp(/^\[.*?\]$/),s=new RegExp(/^\{.*?\}$/);if(""===e&&t&&t.dataSource_custom&&(t.dataSource_custom.key=t.dataSource.key,t.dataSource=t.dataSource_custom),!t||"string"!=typeof t||-1===t.indexOf("sf.data.Query()")&&"formatter"!==e){if(sfBlazor.isDataSourceProperty(e)){if(null===t)return;if(!(t="string"==typeof t?JSON.parse(t):t).adaptor||t instanceof sf.data.DataManager)return t;var a=t.offline;t.offline=!1,t.adaptor=sfBlazor.getAdaptor(t.adaptor);var r=new sf.data.DataManager(t);return r.offline=a,this.dotnetInstance&&(r.dotnetInstance=this.dotnetInstance,r.key=t.key,r.adaptor instanceof BlazorAdaptor&&(r.adaptorName=t.adaptorName,r.dataSource.offline=!1)),(this[t.guid]||this.templateRefs&&this.templateRefs[t.guid])&&(r.baseAdaptorInstance=this[t.guid]||this.templateRefs[t.guid],r.adaptorName="CustomAdaptor"),r}if("string"==typeof t&&n.test(t)){if(o.test(t)){var l=JSON.parse(t),d=[];for(i=0;i<l.length;i++)d.push(new Date(l[i]));return d}return isNaN(Date.parse(t))?t:new Date(t)}if("string"==typeof t&&(o.test(t)||s.test(t))&&sfBlazor.isJson(t))return JSON.parse(t)}else try{return t}catch(e){return sfBlazor.getEvaluatedFunc(t)}return t},getEvaluatedFunc:function(e){var t=new RegExp(/\(+[^\)]+\)+/g),i=e.split("new sf.data.Query().")[1],n=e.trim().split("new sf.richtexteditor.MarkdownFormatter")[1];if(i){var o=i.split(t)[0],s=i.match(t)[0],a=new RegExp(/(\([a-z])+[^\)]+\)+/g),r=e.match(a);if(null!==r)var l=r[0],d=l.match(/\{+[^\)]+\}/g)[0],h=l.split(/\{+[^\)]+\}/g)[0];if(-1!==s.indexOf("sf"))var c=(S=h.match(/[^(]+/g)[0]).split("."),u=(new sf.data.Query)[o](sf[c[1]][c[2]][c[3]](JSON.parse(d)));else if(i.split(".").length>1){t=new RegExp(/([^\"]([A-Z]|[a-z])+[\"\]])/g);if(null!==i.match(t)){a=new RegExp(/([^\"]([A-Z]|[a-z])+[\"\]])|[0-9]/g);for(var f=i.match(a),m=i.split("."),g=[],w=0;w<m.length;w++){var y=m[w].match(/([A-z])+/g)[0];g.push(y)}u=(new sf.data.Query)[g[0]]()[g[1]](f[0].slice(0,-1))[g[2]](Number(f[1]))}else{var v=new RegExp(/([^\']+([A-Z]|[a-z])+[\'\)])|[0-9]/g);for(f=i.match(v),m=i.split("."),g=[],w=0;w<m.length;w++){y=m[w].match(/([A-z])+/g)[0];g.push(y)}u=(new sf.data.Query)[g[0]](f[0].slice(0,-1))[g[1]](f[1].slice(0,-1))[g[2]](Number(f[2]))}}else{var b,S=s.match(/([A-z]+|[0-9]+)+/g);u=(b=new sf.data.Query)[o].apply(b,p(S))}}else if(n){var A=n.trim(),x=A.substring(1,A.length-1).trim();if(x.length>0){var V=x.replace(/'/g,'"'),C=JSON.parse(V);u=new sf.richtexteditor.MarkdownFormatter(C)}else u=new sf.richtexteditor.MarkdownFormatter({})}else u=new sf.data.Query;return u},triggerEJEvents:(v=g(u().m((function e(t){var i,n;return u().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,!t){e.n=2;break}return t.elementID=this.elementID,e.n=1,this.dotnet.invokeMethodAsync("Trigger",this.eventName,window.sfBlazor.cleanStringify(t));case 1:i=e.v,e.n=4;break;case 2:return e.n=3,this.dotnet.invokeMethodAsync("Trigger",this.eventName,"");case 3:i=e.v;case 4:e.n=6;break;case 5:e.p=5,n=e.v,window.sfBlazor.throwError(n,this);case 6:return e.a(2,i)}}),e,this,[[0,5]])}))),function(e){return v.apply(this,arguments)}),copyWithoutCircularReferences:function(e,t){try{var i=t&&Array.isArray(t),n=i?[]:{};return(i?t:t instanceof Node?[t]:sfBlazor.getObjectKeys(t)).forEach(function(){var o=g(u().m((function o(s){var a,r,l,d,h,p,c,f,m;return u().w((function(o){for(;;)switch(o.n){case 0:if(a=t.hasOwnProperty("parentObj")&&t.properties?t.properties:t,r=i?s:a[s],!i||"string"!=typeof r&&"number"!=typeof r)if(r instanceof Node)l=sfBlazor.getDomObject(s,r,t),i?n.push(l):n[s]=l;else if(r&&Array.isArray(r))if(r.length>0)for(d=0;d<r.length;d++)n[s]||(n[s]=[]),"ej2_instances"!==s&&(!r[d]||"object"!==w(r[d])||r[d]instanceof Date?n[s].push(r[d]):n[s].push(window.sfBlazor.copyWithoutCircularReferences(e,r[d])));else n[s]=[];else if(r&&window.sfBlazor.isJson(r)&&new RegExp(/^\[.*?\]$/).test(r))for(h=JSON.parse(r),n[s]||(n[s]=[]),p=0;p<h.length;p++)n[s].push(h[p]);else if(r&&r instanceof Event){for(f in c={},r)(m=r[f])instanceof Node||m instanceof Window||"path"===f||(c[f]=m);n[s]=c}else r&&"object"===w(r)?r instanceof File?n[s]=r:e.indexOf(r)<0?(e.push(r),r&&r instanceof Date?n[s]=r:sfBlazor.isJsonStringfy(r)&&!sfBlazor.doesHaveFileObject(r)?i?n.push(r):n[s]=r:sfBlazor.isIgnoreProperty(s.toString())?n[s]="###_Circular_###":n[s]=window.sfBlazor.copyWithoutCircularReferences(e,r),e.pop()):n[s]="###_Circular_###":"function"!=typeof r&&(n[s]=r);else n.push(r);case 1:return o.a(2)}}),o)})));return function(e){return o.apply(this,arguments)}}()),n}catch(e){return console.log(e),{}}},doesHaveFileObject:function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)if(e[t[i]]instanceof File)return!0;return!1},isJsonStringfy:function(e){try{return JSON.stringify(e)&&!0}catch(e){return!1}},getObjectKeys:function(e){var t=[];if(e instanceof Event)t=Object.keys(e);else for(var i in e)t.push(i);return t},isIgnoreProperty:function(e){return["parentObj","controlParent","modelObserver","localObserver","moduleLoader"].indexOf(e)>=0},isJson:function(e){try{return JSON.parse(e)}catch(e){return!1}},cleanStringify:function(e){try{return e&&"object"===w(e)&&(e=window.sfBlazor.copyWithoutCircularReferences([e],e)),JSON.stringify(e)}catch(e){return console.log(e),""}},bindEvents:function(e,t,i,n){if(t)for(var o=0;o<t.length;o+=1){var s=t[o],a={dotnet:i,eventName:s,elementID:e.elementID,namespace:n};if(s.indexOf(".")>0){for(var r=s.split("."),l=e,d=0;d<r.length-1;d++){var h=new RegExp(/\[.*?\]/);if(h.test(r[d])){var p=r[d].match(h)[0],c=r[d].replace(p,"");p=p.match(/\[(.*?)\]/)[1],d+=1,l=l[c][p]}else l=l[r[d]]}l[r[r.length-1]]=window.sfBlazor.triggerEJEvents.bind(a)}else e[s]=window.sfBlazor.triggerEJEvents.bind(a)}},tryParseInt:function(e){return/^-?\d+\.?\d*$/.test(e)},throwError:function(e,t){console.error(e.message+"\n"+e.stack)},getAdaptor:function(e){var t;switch(e){case"ODataAdaptor":t=new sf.data.ODataAdaptor;break;case"ODataV4Adaptor":t=new sf.data.ODataV4Adaptor;break;case"UrlAdaptor":t=new sf.data.UrlAdaptor;break;case"WebApiAdaptor":t=new sf.data.WebApiAdaptor;break;case"JsonAdaptor":t=new sf.data.JsonAdaptor;break;case"RemoteSaveAdaptor":t=new sf.data.RemoteSaveAdaptor;break;case"CustomAdaptor":sfBlazor.initCustomAdaptor(),t=new window.CustomAdaptor;break;default:t=new window.BlazorAdaptor}return t},spinnerUtility:function(e,t,i,n){try{sf.popups.Spinner(e,t,i,n)}catch(e){return window.sfBlazor.throwError(e)}},initBlazorAdaptor:function(){var e=sf.data?sf.data.UrlAdaptor:function(){};window.BlazorAdaptor=function(e){function t(){return n(this,t),r(this,t,arguments)}return d(t,e),s(t,[{key:"processQuery",value:function(e,t,i){var n=sf.data.UrlAdaptor.prototype.processQuery.apply(this,arguments);return n.dotnetInstance=e.dotnetInstance,n.key=e.key,n}},{key:"makeRequest",value:function(e,t,i,n){var o=JSON.parse(e.data);o.serverSideGroup=!1;var s=this;e.dotnetInstance.invokeMethodAsync("DataProcess",JSON.stringify(o),e.key).then((function(i){null===(i=sf.data.DataUtil.parse.parseJson(i))?i=[]:null===i.result&&(i.result=[]),function(e,i,n){var o={};o.count=e.count?parseInt(e.count.toString(),10):0,o.result=e.result?e.result:e,o.aggregates=e.aggregates,o.virtualSelectRecords=n,t.resolve(o)}(s.processResponse(i,{},n,null,e))})).catch((function(e){!function(e){i.error=e,t.reject(i)}(e)}))}},{key:"insert",value:function(e,t,i,n,o){var s={};return s.dm=e,s.data=t,s.tableName=i,s.query=n,s.requestType="insert",s.position=o,s}},{key:"remove",value:function(e,t,i,n,o){var s={};return s.dm=e,s.data=i,s.keyField=t,s.tableName=n,s.query=o,s.requestType="remove",s}},{key:"update",value:function(e,t,i,n,o){var s={};return s.dm=e,s.data=i,s.keyField=t,s.tableName=n,s.query=o,s.requestType="update",s}},{key:"batchRequest",value:function(e,t,i,n,o){var s={};return s.dm=e,s.changed=t.changedRecords,s.added=t.addedRecords,s.deleted=t.deletedRecords,s.requestType="batchsave",s.keyField=i.key,s.dropIndex=sf.base.isNullOrUndefined(n)?null:n.dragDropDestinationIndex,s.query=n,s}},{key:"doAjaxRequest",value:function(e){var t=new sf.data.Deferred,i=e.dm,n=sf.data.UrlAdaptor.prototype.processQuery.apply(this,[i,e.query,!1]),o=function(i){e.error=i,t.reject(e)};if("insert"===e.requestType&&i.dotnetInstance.invokeMethodAsync("Insert",JSON.stringify(e.data),i.key,e.position?e.position:0,n.data).then((function(e){t.resolve(e)})).catch((function(e){o(e)})),"remove"===e.requestType){var s="string"==typeof e.data?e.data:JSON.stringify(e.data);e.data instanceof Date&&(s=e.data.toJSON()),i.dotnetInstance.invokeMethodAsync("Remove",s,e.keyField,i.key,n.data).then((function(e){t.resolve()})).catch((function(e){o(e)}))}return"update"===e.requestType&&i.dotnetInstance.invokeMethodAsync("Update",JSON.stringify(e.data),e.keyField,i.key,n.data).then((function(e){var i=sf.data.DataUtil.parse.parseJson(e);t.resolve(i)})).catch((function(e){o(e)})),"batchsave"===e.requestType&&i.dotnetInstance.invokeMethodAsync("BatchUpdate",JSON.stringify(e.changed),JSON.stringify(e.added),JSON.stringify(e.deleted),e.keyField,i.key,e.dropIndex,n.data).then((function(e){var i=sf.data.DataUtil.parse.parseJson(e);t.resolve(i)})).catch((function(e){o(e)})),t.promise}}])}(e)},initCustomAdaptor:function(){window.CustomAdaptor=function(e){function t(){return n(this,t),r(this,t,arguments)}return d(t,window.BlazorAdaptor),s(t,[{key:"processQuery",value:function(e,t,i){var n=sf.data.UrlAdaptor.prototype.processQuery.apply(this,arguments);return n.dotnetInstance=e.dotnetInstance,n.baseAdaptorInstance=e.baseAdaptorInstance,n.key=e.key,n}},{key:"makeRequest",value:function(e,t,i,n){var o=JSON.parse(e.data);o.serverSideGroup=!1;var s=this;e.baseAdaptorInstance.invokeMethodAsync("BaseRead",JSON.stringify(o),e.key).then((function(i){null===(i=sf.data.DataUtil.parse.parseJson(i)).result&&(i.result=[]),function(e,i,n){var o={};o.count=e.count?parseInt(e.count.toString(),10):0,o.result=e.result?e.result:e,o.aggregates=i,o.virtualSelectRecords=n,t.resolve(o)}(s.processResponse(i,{},n,null,e))})).catch((function(e){!function(e){i.error=e,t.reject(i)}(e)}))}},{key:"doAjaxRequest",value:function(e){var t=new sf.data.Deferred,i=e.dm,n=function(i){e.error=i,t.reject(e)};return"insert"===e.requestType&&i.baseAdaptorInstance.invokeMethodAsync("BaseInsert",JSON.stringify(e.data),i.key).then((function(e){e=sf.data.DataUtil.parse.parseJson(e),t.resolve(e)})).catch((function(e){n(e)})),"remove"===e.requestType&&i.baseAdaptorInstance.invokeMethodAsync("BaseRemove",JSON.stringify(e.data),e.keyField,i.key).then((function(e){e=sf.data.DataUtil.parse.parseJson(e),t.resolve(e)})).catch((function(e){n(e)})),"update"===e.requestType&&i.baseAdaptorInstance.invokeMethodAsync("BaseUpdate",JSON.stringify(e.data),e.keyField,i.key).then((function(e){e=sf.data.DataUtil.parse.parseJson(e),t.resolve(e)})).catch((function(e){n(e)})),"batchsave"===e.requestType&&i.baseAdaptorInstance.invokeMethodAsync("BaseBatchUpdate",JSON.stringify(e.changed),JSON.stringify(e.added),JSON.stringify(e.deleted),e.keyField,i.key,e.dropIndex).then((function(e){e=sf.data.DataUtil.parse.parseJson(e),t.resolve(e)})).catch((function(e){n(e)})),t.promise}}])}()},requestHandler:function(e){try{var t=document.getElementById(e.elementId);if(null!=t)if(t.ej2_instances.length>0)t.ej2_instances[0]._dotnetInstance.invokeMethodAsync("GetPDFInfo",e);else"Unload"==e.action&&DotNet.invokeMethodAsync("Syncfusion.Blazor.PdfViewerServer","Unload",e)}catch(e){window.sfBlazor.throwError(e,this)}},ioSuccessHandler:function(e,t,i,n){try{var o=document.getElementById(e);if(o){var s=o.ej2_instances[0],a={data:n};if("sf.pdfviewer.PdfViewer"==t)switch(i){case"Load":s.viewerBase.loadRequestHandler.successHandler(a);break;case"RenderPdfPages":s.viewerBase.pageRequestHandler.successHandler(a);break;case"VirtualLoad":s.viewerBase.virtualLoadRequestHandler.successHandler(a);break;case"Download":s.viewerBase.dowonloadRequestHandler.successHandler(a);break;case"PrintImages":s.printModule.printRequestHandler.successHandler(a);break;case"Search":s.textSearchModule.searchRequestHandler.successHandler(a);break;case"Bookmarks":s.bookmarkViewModule.bookmarkRequestHandler.successHandler(a);break;case"RenderThumbnailImages":s.thumbnailViewModule.thumbnailRequestHandler.successHandler(a);break;case"RenderAnnotationComments":s.annotationModule.stickyNotesAnnotationModule.commentsRequestHandler.successHandler(a);break;case"RenderPdfTexts":s.textSearchModule.searchRequestHandler.successHandler(a);break;case"ImportAnnotations":s.viewerBase.importAnnotationRequestHandler.successHandler(a);break;case"ExportAnnotations":s.viewerBase.exportAnnotationRequestHandler.successHandler(a);break;case"ExportFormFields":s.viewerBase.exportFormFieldsRequestHandler.successHandler(a);break;case"ImportFormFields":s.viewerBase.importFormFieldsRequestHandler.successHandler(a)}if("sf.documenteditor.DocumentEditorContainer"==t||"sf.documenteditor.DocumentEditor"==t){var r=sfBlazor.getDocEditor(s);switch(i){case"SystemClipboard":a.data=JSON.parse(a.data),r.editor.pasteRequestHandler.successHandler(a);break;case"Import":s.toolbarModule.importHandler.successHandler(a);break;case"EnforceProtection":r.editor.enforceProtectionInternal(a);break;case"UnprotectDocument":r.editor.onUnProtectionSuccess(a)}}}}catch(e){window.sfBlazor.throwError(e,this)}},docEditRequestHandler:(y=g(u().m((function e(t){var i,n,o,s;return u().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,!(t instanceof FormData)){e.n=2;break}return i=t.get("files"),n="",e.n=1,window.sfBlazor.docEditFileReader(i).then((function(e){n=e}));case 1:o={documentData:n.substring(n.indexOf(",")+1),fileName:i.name,action:"Import"},this._dotnetInstance.invokeMethodAsync("GetDocumentInfo",o),e.n=3;break;case 2:t.hasOwnProperty("saltBase64")?t.action=""===t.saltBase64?"EnforceProtection":"UnprotectDocument":t.hasOwnProperty("type")&&t.hasOwnProperty("content")&&(t.action="SystemClipboard"),this._dotnetInstance.invokeMethodAsync("GetDocumentInfo",t);case 3:e.n=5;break;case 4:e.p=4,s=e.v,window.sfBlazor.throwError(s,this);case 5:return e.a(2)}}),e,this,[[0,4]])}))),function(e){return y.apply(this,arguments)}),docEditFileReader:function(e){try{return new Promise((function(t,i){var n=new FileReader;n.onload=function(){t(n.result)},n.readAsDataURL(e)}))}catch(e){window.sfBlazor.throwError(e,this)}}};sf.base.enableBlazorMode(),window.sfBlazor=window.sfBlazor||{},Object.assign(window.sfBlazor,C)},"./syncfusion-blazor.js":function(e,t){var i={instances:[],getElementByXpath:function(e){return document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue},getElement:function(e,t,i){var n=null!=e&&null!=window[e]?window[e][t]:null;return null!=n?n:window.sfBlazor.getElementByXpath(i)},getAttribute:function(e,t,i,n){var o=window.sfBlazor.getElement(e,t,i);if(null!=o)return o.getAttribute(n)},setAttribute:function(e,t,i,n,o){window.sfBlazor.getElement(e,t,i).setAttribute(n,o)},addClass:function(e,t,i,n){sf.base.addClass([window.sfBlazor.getElement(e,t,i)],n)},removeClass:function(e,t,i,n){sf.base.removeClass([window.sfBlazor.getElement(e,t,i)],n)},getClassList:function(e,t,i){return Array.prototype.slice.call(window.sfBlazor.getElement(e,t,i).classList)},enableRipple:function(e){sf.base.enableRipple(e)},isDevice:function(e){return e&&this.enableRtl(e),{IsDevice:sf.base.Browser.isDevice,IsIos:sf.base.Browser.isIos}},animate:function(e,t){new sf.base.Animation(t).animate(e)},setGlobalAnimationValue:function(e){sf.base.setGlobalAnimation(e)},callRipple:function(e,t){sf.base.rippleEffect(e,t)},createXPathFromElement:function(e){for(var t=document.getElementsByTagName("*"),i=[];e&&1===e.nodeType;e=e.parentNode)if(e.hasAttribute("id")){for(var n=0,o=0;o<t.length&&(t[o].hasAttribute("id")&&t[o].id===e.id&&n++,!(n>1));o++);if(1===n)return i.unshift('id("'+e.getAttribute("id")+'")'),i.join("/");i.unshift(e.localName.toLowerCase()+'[@id="'+e.getAttribute("id")+'"]')}else{for(var s=1,a=e.previousSibling;a;a=a.previousSibling)a.localName===e.localName&&s++;i.unshift(e.localName.toLowerCase()+"["+s+"]")}return i.length?"/"+i.join("/"):null},getDomObject:function(e,t,i){var n=e+sf.base.getUniqueID(e),o={id:t.id,class:t.className,xPath:window.sfBlazor.createXPathFromElement(t),domUUID:n},s=i&&i.elementID;return s&&(window[s]=sf.base.isNullOrUndefined(window[s])?{}:window[s],window[s][n]=t,o.elementID=s),o},focusButton:function(e){e.focus()},setCompInstance:function(e){window.sfBlazor.instances[e.dataId]=e},getCompInstance:function(e){return window.sfBlazor.instances[e]},disposeWindowsInstance:function(e){e&&delete window.sfBlazor.instances[e]},setProgress:function(e,t,i,n,o,s){if(i)return i=i.querySelector(".e-spinner"),window.requestAnimationFrame((function(){o&&(e.style[s?"height":"width"]=n+"%"),t.parentElement.setAttribute("aria-valuenow",n.toString()),100===n&&(t.classList.remove("e-cont-animate","e-animate-end"),i.style.width="auto",i.style.height="auto")}))},setAnimation:function(e,t,i,n,o,s){t=t.querySelector(".e-spinner"),new sf.base.Animation({}).animate(e,{duration:n,name:"Progress"+i,timingFunction:o,begin:function(){s&&(t.style.width=Math.max(t.offsetWidth,e.offsetWidth)+"px",t.style.height=Math.max(t.offsetHeight,e.offsetHeight)+"px",e.classList.add("e-cont-animate"))},end:function(){e.classList.add("e-animate-end")}})},cancelAnimation:function(e){window.cancelAnimationFrame(e)},getSpinnerTheme:function(e){var t=e?window.getComputedStyle(e,":after").getPropertyValue("content"):"Material";return t&&t.replace(/['"]+/g,"")},chipKeydownHandler:function(e){e&&e.addEventListener("keydown",(function(e){e.target&&e.target.classList.contains("e-chip")&&" "==e.key&&e.preventDefault()}))},MediaQuery:{initialize:function(e){return e.dataId?(sf.base.extend(e,this,e),window.sfBlazor.setCompInstance(e),e.activeBreakpoint="",e.isMediaChanged=!1,e.initializeMediaQueries(e),e.updateActiveBreakpoint(e,!0),e.activeBreakpoint):null},initializeMediaQueries:function(e){for(var t=0;t<e.mediaBreakpoints.length;t++){var i=window.matchMedia(e.mediaBreakpoints[t].mediaQuery);e.mediaBreakpoints[t].mq=i,sf.base.EventHandler.add(i,"change",e.mediaQueryChangeHandler,e)}},updateActiveBreakpoint:function(e,t){for(var i=!1,n=0;n<e.mediaBreakpoints.length;n++){if(e.mediaBreakpoints[n].mq.matches){e.isMediaChanged&&!i||t||(e.isMediaChanged=e.activeBreakpoint!=e.mediaBreakpoints[n].breakpoint),e.activeBreakpoint=e.mediaBreakpoints[n].breakpoint;break}e.activeBreakpoint==e.mediaBreakpoints[n].breakpoint&&(i=e.isMediaChanged=!0,e.activeBreakpoint="")}},mediaQueryChangeHandler:function(){this.updateActiveBreakpoint(this),this.isMediaChanged&&(this.dotNetRef.invokeMethodAsync("UpdateActiveBreakpoint",this.activeBreakpoint),this.isMediaChanged=!1)},destroyComponent:function(){for(var e=0;e<this.mediaBreakpoints.length;e++)sf.base.EventHandler.remove(this.mediaBreakpoints[e].mq,"change",this.mediaQueryChangeHandler)},destroy:function(e){e&&window.sfBlazor.getCompInstance(e).destroyComponent()}},validateBlazorLicense:function(e,t,i){if(i){var n=sf.base.createElement("div",{innerHTML:'<div style="position: fixed;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 99999;">\n                    <div style="background: #FFFFFF;\n                    height: 490px;\n                    width: 840px;\n                    font-family: Helvetica Neue, Helvetica, Arial;\n                    color: #000000;\n                    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n                    display: block;\n                    margin: 6% auto;\n                    border-radius: 20px;">\n                        <div style="\n                        position: absolute;\n                        width: 838px;\n                        height: 80px;\n                        background-color: #F9F9F9;\n                        border: 1px solid #EEEEEE;\n                        border-top-left-radius: 20px;\n                        border-top-right-radius: 20px;">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n                text-align: left;\n                width: 146px;\n                position: absolute;\n                top: 24px;\n                left: 40px;"></div>\n                <div style="position: relative;\n                top: 104px;\n                left: 32px;\n                font-size: 20px;\n                text-align: left;\n                font-weight: 700;\n                letter-spacing: 0.02em;\n                font-style: normal;\n                line-height: 125%;">Claim your FREE account and get a key in less than a minute</div>\n                        <ul style="font-size: 15px;\n                        margin-top: 15px;\n                        font-weight: 400;\n                        color: #333333;\n                        letter-spacing: 0.01em;\n                        position: relative;\n                        left: 40px;\n                        top: 103px;\n                        line-height: 180%;">\n                            <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                            <li><span>Access to 24x5 support by developers via the <a\n                                        href="https://support.syncfusion.com/create"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">support tickets</a>, <a\n                                        href="https://www.syncfusion.com/forums"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">forum</a>, <a\n                                        href="https://www.syncfusion.com/feedback"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">feature & feedback page</a> and chat.</span></li>\n                            <li><span>200+ <a\n                                        href="https://www.syncfusion.com/succinctly-free-ebooks"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">ebooks</a> on the latest technologies, industry trends, and research topics.</span>\n                            </li>\n                            <li><span>Largest collection of over 7,500 flat and wireframe icons for free with Syncfusion <a\n                                        href="https://www.syncfusion.com/downloads/metrostudio"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">Metro Studio</a>.</span></li>\n                            <li><span>Free and unlimited access to Syncfusion technical <a\n                                        href="https://www.syncfusion.com/blogs/"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">blogs</a> and <a\n                                        href="https://www.syncfusion.com/resources/techportal/whitepapers"\n                                        style="text-decoration: none;\n                            color: #0D6EFD;\n                            font-weight: 500;">white papers.</a></span></li>\n                        </ul>\n                        <div style="font-size: 18px;\n                        font-weight: 700;\n                        position: relative;\n                        line-height: 125%;\n                        letter-spacing: 0.02em;\n                        top: 113px;\n                        left: 32px;">Trusted by the world\'s leading companies</div>\n                <img src=\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAACLYAAACcCAYAAABoBLARAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAKnWSURBVHgB7f0LeBvneSd8388MSUuObUFrN5HXNjnQWcrmE5RNuo0dm2Dr7Ftn30T0da2T7tvtEnSTXj3ForbNt7HkhFAqyf426YpyNmm3TS3w2rfvNvFen6nkfePu1bQC40P6NWkENo2tk82R7NR26tRQndqySMzzPfczBwxAHAYHHgD+f5cggMBgZjAEgTn8576JAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOpwgAAAAAAAAAAAAAAAAAFixZi0rFhNiHd+el6ZVa9geUbD5ev3s7AUCAADoAgi2AAAAAAAAAAAAAAAAACyj1+LxgbekmTDIiDkkE4JETBIlSIiYetiiJqkDgXkppa1u5QXxNdmSnJyp7v8Jzc/EbTtPAAAAKxyCLQAAAAAAAAAAAAAAAABLhEMsc7I3yQEWIiMhBCUkUYyWg5Q59b+tDhjmDHKyCLsAAMBKhGALAAAAAAAAAAAAAAAAwCJ5Jb51l5CCgyxJIURy2UIsUUmZ46CLJGfqKlHIoaURAAAsNwRbAAAAAAAAAAAAAH7j1gGaN2LqkiByYmrPqXvQUUhLX0thu9eUJ6FuC3U9Z85QJouz2gEAoMSsZcXeRn17JFFSfWcMtznIYtcbQB38i7V1mrqqi8yaJKd+yj4/TQAAAEsMwRYAAAAAAAAAAABYXVLJGPUUBokPOHIbCEmJIMjSKB10IXXAT3Arh+yhu0dyD/ybj+HMdgCAVcYNs1w14hANN9NaSB2w46Ck7bcGcsi4YJCTV9f8M91on7apCS9Z2y11ZalxxQSJAYcci4SR8MIvCWqU5LZFMqvGl0HIBQAAlgqCLQAAAAAAAAAAAND9OMxizo+oPaLDpAMtiyqrDvxNETlT9EdPI+QCANDF/t7aPFggM91ImIVDLGrYHEknJ8mcUXdlmw2utILDOGtoTcIkuUty0FOIRENhFy/k0ifm0mhXBAAAiwnBFgAAAAAAAAAAAOhOOszi7CHhpKjJMIt1/QYaUJfpszlqxg3XrMu9+np+Qn75yRNCCLQtAgDoIq/Et73WQGWWrJAy65AxfZku5+K2veA7gYMmV4u+AcGVxEjEuLqKUNc8javE3Fij4ZEfWVvdCjJeNRg1rrygQs4RRv4ds2dnKj2HK7wY5HC4ZY8UIqmurQiTIvXa0u+wzx4kAACARYBgCwBA+wyoC5/1lfAufBspdQAAgEUkv0eDJNV3ruS+5WpnovRKNxNNkaF2Gr57eb+L5Sm9g3MPFfSBtIQ3jzbxPJo0JXbTCQIAAID2062G5veq792xplsMeY6P3k+xtdfS3V/aTy2R0iau5EIyjSouAADd4WVr20n1PZOs9JhflUVKMXmZLk+VB1lei8cH5mRv0uFKKWQk6lZ8kZTdYJ8Zoohei2/d9ZbbJq86r+2RmtecQU72JzQ/Uz6fP7J2qvkrDEpBqVrVXNTrHLrRPp0lAACARYBgCwBA67gnd5oWnvnFGxlZAgAAgLbTgRaHJqh+ieQMGZRe6oCLDrQ45B5Mq332nq0uafEemiQAAABoXRsDLYyrtcw+9Ki+vX7vXZR/4yfUDv983Q2Zv8v/CAEXAIAOp9sQCTNbdnfWkDT1T/TWZDgk4gZZ+oa9lj/DDVR6CajxTrzdPrOv3nBcdUUIeZIiVlspocMuMmuSnPop+/z0gvFSYS8JY7hk3JLsDfaZOAEAACwSBFsAAJpXLdDi203cJxUAAADaxguMjHuBkahsMigl3k3TtATk92iXmr8pdbEaeNqyBHAAAAC6ysffv1etJ6TbEWjxjdz685QZPaBvp7/2CB38+nFqGyntLe+4eeLcka8cIwAA6FhctYWrrajP9Yk36MqxcJiFgy8OGUnJ1b2FqHdiRjTSGdtgn6v63cHtjNaKq05RM6GWitOTUwbRVK+Yy4ZbIb1kbU8a5IxIIVKGlKm322dxwgYAACwaBFsAABrHO8jG1aXeAbX15PYuBVgU8Xh8oNL98jV5yc7beO8BQNfRoZYC8Rlnze4MHBPvoUU9cCS/SyPqiivJNHNAjQM4SYRbAAAAGpRKWtQzz4mTJLXZ7ENfJev6G/VtrtYSv/+etlVtCegWRTKJ6i0AAJ2JgyR87Qda+OerqW+vJJGs1qaoVaYsJMurqfh+ZG076oiGTgaJTsopIiezwT4ftNXl11vevghAe2jrLiqYSZI61JXwwsdWaIi8vvC6kNC3syRkjvafXpITkxr20DvV65HDNYeZe+MYpfH3sGiObB8hR6S8oCC3+87oNp8PPLt469GHdu4hUWtfpMzTgWcRVF8CCLYAADSGV7yiHFDjFZf1BNAiK2bFzOtoD/evFUKv9LsrbNEOmOa9i83XUupr23EoJ6TIz/5wdoYAADpEG0ItLkFp8S/pIC0CL9SSodYg3AIAANCINlVpGbh+g247FLv6Gvey9hpK9G+h1K0fLBlu6tQTlD3zPcq/+ROyX31Z38dBl5kXz1MbpOnLTy7KegoAACw+tzqLOSYFDdOik/mraC4RrqDCXrG2jksh0rTY9H5GZ+IqMT9VPg+wyqWtGPWu2UtkpKj5qkF5boflBqlEdlFDC404vDOl/q9dvk9Ka8XMbzd5cLtFBXGchEgufFDadODZxWuFdngn/85TNYZQ038GrdiWAIItAADR8U6yqCUc1QoX3U0ATeAwi3EdjQh3IzhJi4dDLzkpKeeoa1EQOYRdAGClkt/VoZYktUdKvIfaWiJZfo8G1UG1LLWHTSbtFrtR+Q0AAKCqVDJG5rzaud2eg4fjHxql9IfvpWa0uUWROojjpFC9BQCgs7xmWbG32tn+JwpJ9pv01m6/WsrL1uY9JMwpWkJCyvQ77LMIZYLr8I696l2RJmotcLwAV+UwnMyyV3JBsGV56LDUWvX5KqzqA83tpgPncrQYEGxZMQwCAICo+MvLijjskm5AQPewbrH2mOvolBC6jUWSFhdvYCTVtMZMQRmjR+Y2Dlizmwasx6x+ayR+Y+VWRwAAS03+tW4BmKwxSJYc2i3eow5tmRTnqixU24T8Hu2ids3fKbV+IOtUauHPdZPWh+ax1vAWFahtR8cAAAC6DrceMgunqI1nxHMwJXX8CDVq7E8ebmeohSX1mcm/fCu2xwAAOsh6285LKYZEG1rTi2IFZrvOgNZa6tNfQi9Z2y0hzAzVZvOlHfOoJy9lBqEW0LiaxqEdJ9W7otnWzLUJSpE0snTonSMEq0/v1Udrh1oUx2z/+w5WHARbAACi4QNqUXeY2epyggAatLHfGjcNHYqyaJkId9rDOujSJ20Ouqj5OmrdbA0SAMAykKdoD8kaQRX1eSXeQ0Pip0mflSF2q510bquhsRqjjZFDU7q9UTs4dFLNo0XV55HbH+3zK7B48zhaJ4AzLL9LewkAAABK3fv+XWTOn1JH0yxqs8mnH6fEwVHdWqgeHmb4i/vp2J8/Sm0nhEXCyNHHbt9DAADQMW60T9t9JJNUL5BCQXgla0gaE1LeLaWIvynfWr9h9ox4x+wZvo7zhcMjtUckhl+2thwVQp6UdQIFahqjPE5v/IIvPE1Dmrt5Hkg6E1HmXU/WDbWMEgCHWhxxsnKLGIAW8furdrUUlxCzBF2vhwAAoB6LqO6Z32EZIrQOgMZwqEVUPsCZl6EzKaQs3bhUz7H827zxKtwNWIvaRAdduKKLSWMbByxbTSQrC2ICLYsAYCnoSiiOrmBVjRsQqUC8h47Jv9aVVKoFXHjcHFzdR63MI1eTqR9qqXgGG98vv6sr0SSrPDstv0dT4t2EErYAAACMgx58gE8swpnAnpkXz9Puz47Sqc8cp9jV11QchkMtyc99Qg+7iNRrlFP0K7el6A+eamsLRQAAWDzrZ8/OvGRtH+KgCVXZRyckTb1Bb436LYTqsOsOIYwxiuBG+3S2/D5vHnLehU+42/cja+uII3Q7GaviiKQz8Q77XEvb0tBFCuK4DuUCLIaCsYsPUtQkZJYOoP3TaoBgCwBAfeMNDGsT1WlFAFDG2mBZZaEWbqkxWTApayvUBMuyYupLPsFhF+nodhuWF4JJUJPlIL2QS0r0yBSHXBypDtbOiezsS7NYaQSAxeHUCY0YtVu2cZUULziSqDiApDEvONJUj2YdvCnUDL/a1UItAZNG1Ti4D3ulz2auLJNR10MEAACw2v3KbSPk6FBLU0Zu/XmKrb2Gci+cp+mzubrDVwu1+I/l3/xJ3efvunkzJW7ZTLw11XRlF0dktuz/aOzcka8cIwAA6AhcueU1y9o9R1eNO2LByRbZd9hn7o46LpNEbp5aJyTV//LzvN0+O/lafGvuLTXtknHwCXiykNpgn0e1cnAd2T5CEpVaYBHpKo21NgBEXm0jpAhWBQRbAABqsyhKmbOitLrgID80xOwtHpjl6ixyXoy1WhHFds+2yHo/ToUf22JZCUe9t6VDg0Log71JahCHXLhdEfVJrjaTWclVXLiNkqEOfnuvNQj2eJVw7IJUB7UR0AFYcbzQSKrGIJlIlUwMtRPRCT4PF3KDI3FqBrcgqsWkumfNcVsi+dc0UaPdUlJ+T31eNxm+AQAA6Arcfshp7SSS6TO5kiosU6eeoMzT36ATuScXDDu4LVF3fKlb76KDXz++8LlbEzR250coqcYRu/pafZ/1qXuoFed+9MMJ+pXb8qjcAgDQOda7++b2vWhtmewRxmPkVT+RUhxsZDxzJGYE78VqkSRpNzI8V5552dqWVTsBk+4InIk3aO5gxCozsFpIXdknOiGy5Dg5dR3aj2ysI1mwyDAS6o2qVsLkolXmgw4kenLq/VHtwbx6bIweOI39+qtEk+c4AACsGryXKhVx2LS6NLRhAsAsyxo0ZelBVw5dqP+mnr9oL3pZT7+6i+PQHiFomJpvZZQtSMrYF+1l39lqxayYcR3tFe5ZMXU3hrzlnVHLG3/DACuE/K4OjSSrDmCQFbVFT91x1WgXVHWcp2iECjUPsGXFe6JVWlHjiqlxcS/gap9XthpXc+EbAACATpdKWmTOn2pH+6HxD41S+sP3ltxnv/oSjX3l4ZKAy+xDXyXr+huDn7n1EFdosa7fUHLf+r13BT9zoIXHndy2u2T86a89UjEA04yhrbuTJ//fX0DYFQCgA3ntfVIbZs80XJHzlfi21yS19j0opEy/wz7b0HavnmeSiavE/MT6WZwQBmUO7+Qk8KmIQ9vkGKP06b/N1h3yd/5FkgxnhNz9OFbJY1Kk6IEfLN++58M7U+QeM6pOSoseQFuctjq8k7sqpEvuc0NSqSVZ1od31jtOaNOBZ7DfbgkYBAAAtSQjDscVMXBAHJpi2/Y0Sb1ilFUXfdaDcFsH1T9NsD3Tz5+37SyHaJ67YMcLguJS6kBIlhqT5CouGwesWavfGqFlwIGWjf3WuLmOZr32TpE2+r3lnVbPPR6/Kb6LAGBZcYUSqv0dnIkaatGMmu2C3JZEpxrcSejUGadJExSR2K0++0XN4S351w21RgQAAOgOOtRSONmOUAvjdkAcSAmzbriRpn7jQTr60U/onzmgEg612K++TInPjtLQ5z5BuRfOBfdz5RcelvFzs5/8woJQCz838/Tj1C4nz56aol++dYAAAKDjcHufZkItmlQHTVtklrUVikLPs31uH0ItUJkcjDaY2uchZTJSqIXxcAeeGdVBAcfgv5kMwep24JmD7nvB4GMWozTnxGn/D4YQIFp9ULEFAKA6S11mIwyXVRfui4oyjNB1LMVwK7nwSqPVyHO5Corj0Jj9gr0kfXc5kGL0SA6ZWdQiv2KO84900M6jxCrAUqtbYUXSkHhvY+G7dlZtiVCtpeEKK17VltdqDJJXeyLjOgQDAACwWnzs/XwWcMOBfz90wsGSmRfPlzxWqWqLj4MrXMFlePcd+ueJb35VV1sJh2HCz8+ecU9SLg+0+CpVaxm4fgMlbtlM02dzC0I2kUhpU6F3N2WyWCfocP37pvcKKYdpCTjCmHjh6B3Btnn/2PRRQXJJTqYpk5ckbClE9nVZmM5PDDX0Pl6s+S4II/3i0Ttaroa0WPN3YSLZXBgCusYr1tbj6u8mRS2Yl87um+1zDYdbAKo69M6jJGTdFsxqmCztf7a1z7EHt1skzUH1iW3T/tPLV70OFVtWJ1RsWTF6CAAAqolStYHPrl70VjEAy8VW1NUxvmy2rKR01MFcEa09F1dBMQ2a2thvZeScSM++tHhnd3CFGENI/ntsy5mcPO/qvzFjHQ1bZO1GuAVg6ehqLU7Nai12o6EWDwffklUfdau2HIsUHKlXrYXqPr4AT1d+V7+uZJVBOPjC1bCOEQAAwGrwsfdztbKmDhBzYCR16wdpePft6vbrNHXqCV05hcMkXLVl7M6P6PBLucQtW/SFn8+hFB62HAdVOAAz8Qt7qwZafH61Fg7Z8Lykbr1LTfdaHYgJtz5qiBAW9RR42WBfRKeTHIAQSVoCgmSm7Oclm/bCedEtUcbWkUHXjWUzc2Zv+qXfvS3S/oLFmm9TOml11dJB1w1jJy312sZwLjEsBkEiJ6kVMo9QC7SdkNH2wzqi9cDf/adtotYrFwFAZ0OwBQCguvU1HuODXmnCwSVYRbhdkbrKWpZ10HBoRLgBF6ve83g40SdTG/utCTknJtodcLFusfZwC6QKD9lS0pSavqVuN3UWHAdcjOtor/qLR6sxgKXiUO2zfYQOqDTOpEkq1Gz3E1PT3kt1Wgt61VqsWsOoffRZak7t8I3eUY51j27xrLXdEtKpUx1Q5rdfOLeeIjpnbR4sSCNbb7g+Y87aWKec+OmBbWrepEWLy95+4eyCs5qivo52EpJS2y6eXdCr/Uw/nx0bLdTbClkwhna8eDpbfn+U30O1eW+X0wNb6x5HqfeeOj2w5WSUA5FmwUluefF85DMwo/5+1AHUzLaL50YJOge3IKL5NLVgNHOEEv3Hybp+A6Vu+6C+6GosX9yvK7FUq9rC7B+/pAMupz7zyIIADFeB4eALj4vHXU3mqcf145nR/SUBGH5+6vgRao0co4/dnqUvP7Ek1TEBFos6WJ/qK8yn+semJ/6RnIONVnBp45wkYmMnY61Mv08Yg9Ra8gCgKkGFHG/UtjAGhFpg+XBLyUM7jtIDz66sUG7ailF6GU5mXK7pLodOeq0rYV5X03ujSQi2QMBKpmPiyjXrwvfJPvOSnd2HPyKAIv574INixwith2CV8qq48IHfg5v6La7gkqZoAZcx6pPDVr+Vti/abTn4Ym2wuCpMpuzurJrWQQ7ibOy3+CB1qsYo8lJSRhg0XSDSG/le66WJkvkmBFsAloI8pT5LCnWCaAVq6vMjQkUUXbWF6v2916/WkhXvpuYCfPXDNxZXtFHjX76yu7DEROzczZsHGznQD7ASGdKYcoRM1huuYAj+Doj0fp+1rNhbsmYYMNBrthaQgGVgFk5Si3TVlkcOU/aTXwjus264kXLjx4MWQtX4lVsqsa6/kaKwbthQMm0fV4K58OOXqXUyQ6lkHC2JoBtwpZN1JIbX/tZTyajVW9osdp0wRvIthMi5Cg2qtcBi6aH5mUIrwRbpINgCi0DmIn/uCTFGh3Zw5ZbUkrfp4bBA79oRkiKhZjdJbsVvt9rM4Z3uMFLtFxbS1iEw4WTb2u6I2yhxFXRpDKvpJ0LTzZNUy5BP4JLqUm+56PEYIzWHMeen6FNnZ4Kfg9eu9rUJXTmnWGVH6n3hOeqZnyh5TrOObOeAZ1It56SuMOgfLwgvY73/XS3f+csnGgpwHN6xl/ePVH2cx/3AM9ED3zyvjt72TJQsF3debd36M+rvpVmHdgyoafA8JDlgS5WWF78npZxSj2cbno9ml5m7bNKh5aJ+TzJLXC1/OduAeVZcsMWyhmPUs7ZK+496s9vjDjK/cFAhDHv22T9q+5svvvu3BiQ5lv6hwnQrzbN96nMLfvHxn/5Pu6Q0YpWe47+kol6itzkzdjbd9IZr/P0P7RJkJIX+EBXqtohTQayTet3I/SJSjwn1ASQ3D07wQT/1Ryz4zPdpwxS58yfvW5Q3b/xnvzxgmobl/tRTcjWvFkJPj7+Y3Tvn33xLLYdRbMBDVAPq0sjnwGvqkiU3wGKTu4PV/7mSmDcN/8uCh2t9hQBgBXvODahMRg246PZEgjIb+61kO9oTmVcR7/AOVtDU91T6+Yu2PiitpnHUC6VUwt9tE45Bx+wLC1aij6nnWqHnVl8BBID2cmi8zhC2+GlqZYec2hiseRA0Vis44rVJsqi2DDUpUvjGDdYMEawajRzoB1ipeo23Jq/IvrSst14lKHUqZh3cHaEN5BWnbw+J+uFq3glYr0IRrDC6BZFbqYirpXBApVnceojbEHEboLB6LYTaodI0uIrL5Lcfp1aElknsn18fO/p3RKhG1KEMkvvUe31JTqIQsnRfltrpe7ea9orb1r2qcKXmEdLFnO/yZdTw8915I4DFsN628y/Ht9lEUdZ9KrIJoN1ET45koYHhdQVHmw7tzJDhZBb9IHnxAH3SnX6NYd1jpXwgf5ik4YUL5JQ6RpppKDARxqGSnrXjah7Gqkw/5s1bkvgky8Pb03TgdPX1Atmrjj0V0lTLfK9N/jEpN9iQdqdTYVg3ZJOgQk9K/05IppsKcfjLWdZZzv70yEhR79V5Nc2pyNPkYJSs+fmXUZf6v6fwvFZ/P1heMMf9vRzakaV2Hh8of19W478nhXBPAGz0d9TMMju887h6Tqps2ajXruZBqksr75M2WXkVW4yrxg3yDyQJd01QuEtQSkfdFHr1UAhDSEUYhigOK/mAlvosFe51yWMkrB0fO8UrmG0NuBTms6ZhWGp6UphC8LU3Tfd/w5sB7341T/xBvWBHtCiYjxlC/7EIfViOiqvB6kVyFle/QMPg1+1Q4Z+It44b2qlvve8/DxqGo/4ABCcTY35wRS9TGSxmda3u5H96niXfv14t75j6IaEmP6wmT5uTD/PTH1O/kRMFmjvRalUX6wOPDJpSjqvlk/RmwlsCUs2cwfMhekxeNEKqXy8vA714etZexcsSO3mhHH/J7CG3F3eS3BX+8BcP/+3Y5B7cylL1sMsJqv1lyOMc8aaRpOpfblGnB9CxGg64cMn4Ppm0brHG7BfspjYO9LRC02kg1JJ1DJGarX2AA6FJgOWRrPN4llpRvyJK7eCIjNCOxGhxHuuHb5LyFMU4BEOwOjRwoB9gpYqrgzFn+7dkpBBjtYcUsbXX9Y6oT7i6Z8xLUbeCljtGKTMEnaOsBdFjv36Eci+co31f+QI1i1sSJbc9uqClUDXchih38bzbbkjdZn6FlQGv9RBXbeGKLDzOapVdKkl//RFqxfiHRnVgZujz9+mf/+7Sqyn6+O0Z+sMnsG+sA9lu25tl+X5fzmm3YiXPt5o3mwAWk5A5tQJkURMkmTj5Etrvinpf9Rb4M7mxg/68X1gaKTq8w9YV6HR4pI0HynWVkquPVjhA3yB1IN/QYcrG911zdZWCeMyrehGRkaZDO4dp/o2hltrRuIGax6K0gg247V2T9NDW4cjVW/zp1A6JVBMLpnloe5oeOD1Ji43bYUm1PdrovIoGlmMtftCpmXnQ87HIy+vwTvWeqVNF258HtYlPy2TlBVsccUwdiJomQ+yRXBaKpPdHr4MOLBR6cO/xn8oBDeGmM4QOaziODr7wIILTGuogtxDGrLXtY3fbZ77ccg9a61371IFzZ0AHbNwJ8zR0ACWIp3BCRM+s+y4t0MIdKlbiU3xWeNwbj/favPHxjLv3u2EXDptIumR/Jx051GK978igIfjsVycp9Iy4iRWpQy3SX2DebLvT8UIu3rwT+Y+5y5L0aKR+g8vhHur5WWrhIMPmOx/Zo+boMWH4i9DHk3ZDLe6s+I8b0p8/4ej3BzbewTdI7gdvimqvTHnJ0OBDOktuOpGv661A+WEWr0RYJOXT4wNWfFAN713oOhxwsSxr2nBoRNQ52KCrtxg0tbHfCgIpDRHFA8zqS8IOhVrGq4VawuGXOuMOr8RlCQAWnTylvl8Ldc4+k821IfJFqohSJTjitUlKUW25ptsQ+Uy1w6R++IbbrDX+uQkdSsSuuaZnl3pHYt0ROpow9BmPY/UH1OthNYMt56zNgwVZ5zvDZW+7eHbxd5JC+5iFkupt9o9fprE7P0KxtdfQaOZBagYHVCa++VVKf/jeio9zeGXq1JM0ffaUblHUaIUYP9yyJ3E7JbclqgZdWm1BxKEWfg0L2ihJmSZUcwMA6HqGI2ynyYP0l+ly5ONJAJGlc3l1MJz3X6SpKcLSFUV4H7KuiqGOn7Z6wF636xEnqfnqRq0zJM9Dxqv60Riu0qFDKU2u24mCRb1rT7nLtuEnq/1e5pT6XSSjtUXi5aye0xLBBR8ydFiNr1a1mla4gZKTjYWM2mylL6/DO3kbbDji0Mv6fbLigi22/Sc2FSsbkLX9FyzTMQf1wStHDHohFXLDHgbpnw1Dh0j0bdIHt3TwQYhiSx0/AKOjEqbIWFYqbtuZltLdhuGk/ACKP34vQCOKIZXifKg7bPuv//PCD+UecxdXICm+LlFx9UR4yQ6dzI3ASqZjxlt96uCe2EvuuHmugySQu1yCxEoQbvEDL+Frr3KLN2NGSU3FeZpv+k1sJX/PUq99ws8FudPy580L3siSIo6yuHTUzBs6Kdd071PoGhw2OUoU4SzqypJUPMA1RQsrqzQTZqll2LtkyF3pa+0AGECbxOPxgdk2lGm3FXV10LKsSZPbiojaf5scgNk4YA3LK2I4amsiNe6Y7tnpk+5BYC/Ukq70nKihFj0OomBFl6u7EAAsvkKE7/GeNmw8CTUOWef7vHJwZJDqjztLLRK7yZbfpdpnPEkd3kOwZRUpmLp8MA5aQkfbYp+fPj2wJVv/zEGRPHfz5sEtL56vGuZyHCMV6Sw3KScIOgdXaxHzqfBdllchJXXbByn3wnk69uePUjP4eTog41Vt8cMuk0//aVCVpRwPu+vmzZS4ZTNZN9wYPI+DJdziyOff5wdOeJ455DL2gY8E82+/+jJlnm6+BdHen7unajCHeD/Fx28fRNWWznPzvm8NGl7brcU2Z/RkX/rd24Lt7Vv2fWuPWIGtiMLU3uj8C0fvKDk5dbHnu9I069kwdtLqE0b9bYUWXDw6iJAmqE1mMSOaaXclyebqeQSwGOb6jlHvFd5H0dpns66KoS6Hd6TVe9Y9MbjRKi4PvXMXFWS25XlpFVegIWFRs3hZHN62lw6cafzYpzS4GkgLr19Y5BZoqL7/oW0hjTAjrV5zvqnXXE/v1ccptK9/yS3a8tpObQm3cGsk2UA4TRpTtIxWXsWWMvbpIOgyaW1PqV/+3KAhpdqB4YZcWLFoSxAk8fIt5KY5QkER77GYsaanpbMcrcSYpca9x5+OX1GF/PBJkQz6/MjK5aoMx0kKo1ihxXtNfjCm2GLJD55ESENZP/OgZV6RJ9XcDLiBkaDyCnkFV/zwjRdqMSgIloRrpkjdCcl7vpB+2ZigQo2gGftk822Ienp671PjHHB/8kMtQVEZ8iu1iND8+mV69HBC7iJY7fjvMEPtW1nxQyfM/1tbrC+9lDetNCGgBctMt/VxZGbjgJVzLtGQ3YZ2B17AZVSNO1uvPZEOkvTJbPzGeDJiuGVX2fPzdUItY89ftOv+nZW3MOIwTDvCPgBQm1cNJVlnsGxb2u8ItYNEVm1V5s1QheBIoc5zmEMtV4XU3HlM1RgiJr9Hg+LdqOCxiiROxawY2hFBpzPUTjBHyGS94QqG7iNe8TPu2Q3bLSn4RKP6+sz5Zd3pBg0qq9bCwu2DJn7hPprKPdFU1RMOn3DFlOHdt9PBrx9fUPWEAyi8r4nHzdPkIMnYnfeo29dWGd/rNHXqCUqrcfnPWbf2Gn2bq8xwkIYvI7feRSl14XZKzVZr4Xkb+8A9JT8vgKotHcmQTkrt8kzREuh1dGhsMjTtMWqkRcEy4AP4t+z71nA4aLLY883TvHnft5IvHr0j8np2H4lxIZs+2S4qBFuAZakZQh9fA1gcXLXlyPYxdbA7Q20hLHL3zY6pA/fpyAfudesfZ4orntKyExa1SpppauaY0YJQi8ir46hZ9fWW1xVkZP1tMR2s4bDD/tOVvwujhDSEyFJBHKTCT3K6rRJXTel72x5vnbXKc80JNd1c1ek24/AOzgIMRxs4vKyIT6rl44IWtcptSWXVHKap5WWk1fLKtry8dBCrEU6WlpFBHcQ+nbHts388+dy5/3PI7Cm8Wx14ClbohCjWOQm1J/K6AUm/gosbinD7GbWUojYcZ8SdjAxyFt6FygI3+n6+LWVv5TOFBOmKLeQHcYiCVkDkZjn8qIkOdzhu4rCqrT/90C5TON8jL/GvwyneY14yxWs/FA7hFFsAhU960sN4VV3cHIvO2/hVanj2WjxrVg4bhrt8vJ/JHa/f8kh6y46CNk3+Y/oX6ZBlJY+v6LMLYFHxTi/eUblY7wG/hdBi4nnnz4ZxAlhOXusdDpiY6+g4tRG3JyoI2i1l7dYa3JrI6JM56xZrDzVK0EQroZb4TfFdGwesUyWhFqJcUy2SAKAZS1INxRsP9wquFw7QwRH/Bx28ibJO0NO2cpz1N0pl5BKh0BVEbO11vSME0OF6jbcmBUUIKQpKcZir0kNmXyHSuqLaaZDZiIBy59DVWmSq/G7r+htLfk5/aJSaxUGToc/fF4RaBryACAdFjo/up0tv/kRXaDn1mUd0dZRqoRbGj3EVmexvP6yfo4MzH7qX9iTe7z3uBnImn35cT3PfV75AzRr/8GjJcuDqMeHAj8et2gLQZdwgy1JPM8JBvxDRnurOAHXdaJ+2I61HlZNOu7ZTASrbr9sHpantuCrFjll6aGv9E9wd42j0QInIe5UdecVyN805cX3tmHe794v2/c1IvZ9oNJiG0IFWu+7zOFjB4ZKWpq1ey9w/xWn/M3fTgWdGaf8PhtTB7Xik6Tui8j4n3bJGWFT7yWk9rU//bVaHNBhf7//BpJoPnn6m6lMbDlnUwGEnoijrEbZ6/wzRgR+sLy4rfe3+zmrNbz0crKnbAqnO8pKi+jEVXl5pq/njo0e2jzQUxOLgT6OVlNqso4ItYeee+b9yz5/976PSNDeqHy+EwixkFKue+EkOPy/iV/oQ6pXvphaoEaX8aicld4fTLG7pEfc+ISZnTx2u+MtWg+0W4Xn2rr2RSS+Y41ZI4eH7+qp+qFo/k7YK5pw+0O+NIgiIuNPS/0uS4UCLX21GBPe5QZJwpRd9fzCMXwin4BSy1KStP/flETVnluN405COCLePCg8rvIBLELsJzVfPVWux4b46cRAkTd0jTQi3wPJKhm4PWzdbbf1stW07//xFe19B6OnYNQaNmQZNcfUVqm2m/HmVBvLaD1UNtfDr3NRvHTd6ZE6EDlpzqMUROOMRYMlEaUPktKc6iVf1pf5OinBwpEBRDqK2p6IMMyKEeBb/rFBYaQTCTND5vDL42fpDitjaa6+quD6q9hxEOsjpOOYkQeeoUK2FWwCVBziGd9+x4D7+mQMlI7f+vL4Mbk0EoZVq9v7cv9XXHGo5+cmHKXX8CMXWXkNZdbs8TFMLh0yyn/yCDrfs++rDlBk9oG+zox/9RKUASsPzndy2cBemP40S7hmdAF1GJGJjJ5f0pEYR7SCYZu371mBbzswHiEo2Xn2lh4wsASy2A88cVG9Q/vxsz36RgLCo0JOjw9ur7yvWB+cjbi/7YY8Hnt2n5jmjLjlKn7b19ae/P+Xe/4PdXgAkozY+bGoWT+uBZ3br6fjT4LCC4fA+5/rLqVq4JBInrV9Luqzq6/1qPoSZqvt0UaE6mhsUSdd8nlTLrF6VHQ6OSJGt/KCw6ND29pzU4xhRQhs2zb2xW4dKKuHfGc9vM+GWKMGaKMvrgR/sq7m8etc2v7ykbnvdwPC60MCyWvGtiOrhKi7W9tSQIeVJ8srxyGL7IRkUO/GqfQi3KArfvy6+4zcGZp/9YsPJIutdnxhUo7MoaOUTLhLDkzLcnkF+OyTuOOXIijtUtiT2JwpOYZ0wDHKrtgTz57Yf8vrwBBMQwp59+oGq82yQ+RfecpAcBqFQXsaL2YSGFrJYFUXoIItfXKbYfshV2sqIvNZF6pCf4cxQkwrCGXFn0WuBRP5ic2977ZeC6avFqm/qZUPuYzyMQ1eS6sf2lH2HTtFtoRZfmrzWawSwhLbcZCWcsmCI+lqqWv69FbZtT1uWNWRKOko1Nji4+srGfouqVUzhoMymAStLtc+Mypc/3+Izf6+hXer1JYUbsqn0/Kz6hrvbRv9hgCURsQ1RO6uh8Bp2Tq1QJmsO4wZH9nk/pSjKONtE7CZbflfv5Ki1Ex/tiFYdkVxx7YjUjjppmE1vi5lkVHwtPTQ/My/W1A2Y6kqqou7fZ05tTO6rMwy9KS43/TestmAzjmG0tA5/uedy+z7jVjhDOBMFadTfSWvos/RL3l9n+reOyGjloO0dL57OEnSSZPkdg1sXBjrcMMjtdCL3hG4XxKGPSsEPlnnqGzSaeTD4mcMgMy+e14GT3MXzujUQV2fJns7p27MPfbVmlZZqeJ6mfuMI7f6de2nim18Nbh/75qP02K8fobu/tF8Px1VdfOMfGtVVYSqxX32JMk8/ri8cvKkUtOGWStNnF3xsJCmVjFEmi+2YDqG+n6bUd6lNS6AgjFzptEVGre9mqcMs1XxzmCY/MVT3b2me9JnDaQJYMjLHga9GnnGZnIaPgQE05cCzx9TB/BPkmI+p92pD79P6uHrLtjwdOLPwBEbHTAXn7dckx+iBZ6O19+EACFdaaboaBgdLqgQWeNyHd05Q3e8P0fy0a4Ul9n9/Wk2f1wuq/45khW2ugrm3/nKOGLQ21O9TViucoKvatOEYGVeDFHUGkckF4Z92kRQh/NqG5eWemNdM26rhCu+xNM05kzqIxe9985qE2i7n4EzKmxaCLe2gwy3b/sOE+ns66lUkKfYB4pBJWZpD+G10xFv8R9vwl7pR3LEtwiMsdgyS0i844oZszAvnT30uW2lcjil3eckVb+aE8IM5Xn7DH7ef0KkaJLH+1Wc/Q8VwD49Cx1EkhSqd+DPujzyYY7caixduIel4pV5EsaKLnxXyli8//zV7el9TO9+s5O9Z+mCCX0HGnQtdmMXNA7ndhrwb+sp9UeRVkykue/UbqV+GDLoJn7WXpu5U7wAWwKKYM2jALL/TPSu87kGgZtiKurqbq7JUax+kZ6FOuOW5C/aQevxouH1QmdimAYu/S2zvZ4vq4HZJXFmGAGApRakQlWtbNRTGFVEKdc/EdNsRCbW9UIjQhsho+w72LNU740guTggRVq6rr+vbq/4SDtIKoTbLctvt9ocHolb1ONO/NcLnh8jvsBc94GAvwTS6xhb7/PSZga15WXfbRySfj8cHwu2EpIiwc5L0XoY0Qef45TtGSDhW+d1jH7in4uBjd95DE7oaSvUQCgdMDn79ePAzh2Cmck/oQEls7bU0+e3HdZWUxC1baPiL+3XlFPvVl2nq1JOUf+N1XYmFAzNWlcovHFKZOvUE5d/8ia70Yt2wQQduuN3R2J0foaMf+YQO1XDbI/82zwM/zvx5qxRu4Wnz/Twe+8cvVZx+6tYPVm5v1DO/l0dP0BFeOHoHh/eW5WS9i0cHO/KkqpU23y8evYPXxbE+DkuG17+jHL4Pu9k+t2oC1LACuIGQ3XTknSNeNTmL2sacoCPbc7T/dPFzl6tiOBFayOnqKc82fvC/udDDVN0qHHN9x6j3SrrmMIa0qHF23WkzrgAiaoSPuBUSBxvCr184wzW3xbhNzYGIbWrccE3l42FcLebQjoGWWt4cedcgyYJVcxiulrKYbXXqB65ykadfb3kd3pKgAw1/1ofGJfLkiLtLKtekg/0yWfV3dlC3+1rmNkSsK4It2lvGpLhK90STQXkSClr6eG2BgiyHW0WFDP6jbWjjwdo+ZpEojJBXT6WYmfFb6BSn40+3IJ101RFKJ+lXVSm24QmqtohQpRZvlOqDodJ8JdKWKfSGq/Qqsbijp2LVE3cSfvUXXbtG8Cej99gFwWey6QPrwvunPjSFEVNPSAivmoofKvHG23S1ll7THA9m0p87r/2REHqe5MLqMuHKMoZX4EbHglpqKwUdxaJW+tmtbPylwwenlv2LAVYfQyw8YCvautFRGQdWNvZbefU5PlFtmHrhFvVVkDVF3YPTVp3H+fvSVsth9LkLdpYAYGkVIrXUsam9oq3HukFsO+Kw7d5ZmKVowRaE8VYRtTmUJBywhG4g1fqfqB8+mSv0psh7zz+7gUs5q30o9dlv/OMVVHXtJIbaSV62z5fb8lRrCcRhlFrSX3tkQaiF8V4oDoxYn3J/5tscPOFqLXw5kXtStwLi2+HnTvzCfSXjH/uTh4OASiWZp7+hQykT33xUDzf74KM6VMPTOp66P6giw/PIAZny8fu4Ekzi6i1VH+NlVF61ZdNP3ZR6Dt8TAABdy1DrOU4Dw4v2b6cCRMMtd7jqxu/8i2RJxYdWSZFR/8eDnx0RpXU0m6AlM1d/XSydy9ORnXbFyiitiNpaRsj6gZ2etevIb5l0eCcfP7BqDu80/HljU7WqMaLJKiQ+OZ+oe0KEmGt+/PWkEzESuttIDQ1X7ctS1f2EPXzSTwuf906aPv1sturDbmDtbloBuibYYtuZ/MZtIyfJK13qlfMQpdVOdKkRCkIoTZTCMk1nsCRu4U2HFgQxyCu6ImaJ5qvuUJF8MDFU7cWv/BLMsFscJWDIyq1/zDVi0Hs++ckadzzFiiv6Omjv47jtfwznmDMnj9l/eb9NNWxOHk06jtxlCN3TLemOVzb1R7I9+XvWHMkR4bdAIv+1ClFSvYXcx9zX4ldq8dsWFReKun9d/IN/PDD7jV9EIKD7jdMSHGxfBhlyD0q170x0gAYIUXkFMh6PD8yGzpBdDM9ftI9ZlpUz3TJ2sSrzl7b6Ldu+aE8ueNBUfzeNnqpSKs9VWhyDjj2P1kMAyyUZYZgstVHEVj9usKVAUeTFu9scTjXVBn79aVvyezTQ9mnDCiaS527ePLjlxfPTBNDB+owrx96Sfel6w6nNfw4w6x3DRp8zHmW1T+00yK6oll1Qk9qPFRMfv33BDtpqbXrqST1yRFdj8XHFldRtd9Huz95Lx0fvD4IsXK2FgzNcdcUfjtsScRUYrtjC9+/76hd0MIWrsXBQhWWeejwItXD1F64ew8/h9kFc+YVbHfE0eHieLldV4eoxEx+9j+L3f0RXeAlXbuHr3AvnaOo3HtRhlUbwMhr6fGko5rm//6FFv3HrAH3xaawbAAB0IZPemp6nqyIPL2lp2p0BVOVWgHArPkiTj2OmdPuXpgmLDu3cQw884x13Fcn6z5FTS1ppQva8Fm24DjoeJGmgbuFMIcbo8M56J6BGnZ5FLanTso2X/QOLWM2qr7Cr/jELdbz98M7Wjmz4ZGMt6kqfqyvXLF7Ip826p2KLa0ZtECfLQiJuqRPH8VrrBP10+D3V8C9aGjJdLKLi9dEpTsdv2RP8eTtCTtunJip+OFmJdIzkG7u4XZI/v+SNecF0vWnMz/+k4h+aQ7TXoNI/k6AdUfE2eS9dz7ZhyJ89/8T9WYrgfHYfD8eXY9uTR615EnuJ+8A2YY6MQTeosrAGkz+fbojFq4jj/Qrd2RYUiv0Ei8pwz1ycJOhmFrUr1buyZIh7NQIsr4oHdtVn8HpagipCtm1Px+PxpOHoqmQV58UUlInfFM/N/nC26WphZYJAi30BBz4Alotu9RPldDNJ7frbD8tSvYoo0UI3bDE2hqO9ZqfFs1ig4ziGkSSUvIcOx+2mTg9sydbfES1iHObq6ZmfeUtG+0zuNefTBB3jvYc/vqClGIdOuA1Qo8pDLezoR++jiT971A243PpBPQwbTtyhr7Nn3K9wDpXYP36FMl87Tpfe/AntumWLDq5wMGXmhfPB+LJnT+lrrpbCgRZ+fN3aa3SIZf3b3NZI/vDDidv145NPP65DKNzuiKu0nPr0cT2fXK2FcdWV5Oc+QdlPfqGhcAsvIx4nV5opccXAukGXGBjL8kmcVpRh1Y7T7MWJZNv2L6lpz0YdVu3Nnbo4MRi5imAjr0uPX4iJi0cHI72nGx13HbkLE8mKZydvGDtpXUXiJLVJI68RVrf1ah3qlfi2CC0dfZU7AAAsObfiA18m3fZBhl/FxaKG6fC7G2yRIlan3QvL0kokRT7CvK8MovHj6S1Oz6JWSGHVXLai7ZWhy6ZfiNNSaq5tlUe3DOsYXRVscQrOlDAE95J1EyduHkT6BVCE14LIbxGkrgcsKxXjai9Rxm+969fUxra0ikVUpAiXMgoHWvzpyBpln3rEP+2SwiCvrVFQ/MWv2uKHPPzbjhSn7NzCkIyVTMeMN9WHiqBQeKXYjoik41VCcYL5VT8ce+7JaKGWcqez+2xqpeS54aQ5IaQ3e9zX782f97OUXoUW73fn5Vp0iyIp/Wo0bpDIW3Ri3uEPVQRbuts4dR+bEGqBFYA3hisFrnvmo24kt252dnbGC7dUPTgseuRU/MZ4cvalkioyJcEbDqsYBp1wHBr0KtHEQo/Z6iqnHp85b6PlEMCKIOsGS1w9ixAc4Y3Ydu0/EO2fv8hVZQjBltUmXMECoJOZjjFRMOqfrVkwRdpx+jLRdm6K7MZFrjgI7fV3r/19W6q1cHug8lALh0+4bdHdX9oftCPygymJ/s36mkMsLPfCedr92fDm+eMVp+O3KeIwSrgNULg1ke0NY91wo25txD9ziIWruHAIhSu08PyE2yVxpZexrzxMmdH91AiuBMPz4Ydk2E+9LTb891g36BLCoogH/IQ7bLunHZFscN+BHrdFi6Kt447Fxk7G8hNDC/bH9wljsK3tI+TS7X+Bzqe2B7Lqv0jb0pLMxThJBKA1bsjloL4ceeeI2mmbpoY+u0PVKfiAfr19O9LASY2dRizy92KUVkytGaClxEGepp6nq7V01PazQd1k3v2Slh6+7QVY3KolQajFHVxfrendFXX0hiNS3riCQjD+Y+E+RMVp0/Tsqd+t+oZwDCMRRGTcFIw/hmD2yK0I47Y1ElUO9r1leK9BtwcSXvaD3NvSq35CXnhE6DsMIZel37T1gT9QBxqN0B+0H7ohL7PivgZ9n5AX9H3uIveDOd5r4fv0xR3eaKHMEnQCi7qvWgt/cSYJYAUQVTYcpLG0K2AcblEf7alqj/N8Gn0yE77PVshP3asVsecv2vs4tKKuDz53wb5bXYb8i7pvlFsfdWKoZdOA9ZjVb40QQLeJdvZ9TuxelPKs7dvBZyza2T9RAjMJeQo7wlcXt4IFAXS4HvOtaRGpHatIqq3+NEWgdoJkCDrKlcJ8yf4crpLCLYIakf7aIyXBEh8HSbgtEBvefbsOf/jBFH8as6++pK+5UgpXP+EgSvnPXJHF5z/OoRn/NuMqM5WqrcRvcKfDYRYO2TBuTcTzVj68ruyiXksjODzDyyzs73+Sxz4y6CqGdKZpecSuE0bF7XD1fZMigGWijlPZUYddI96aJYCVbP8PJunAM3F1Kx35ORx6OLRjaYMDAN1IzHVcGL6rKrZw5ZX4ll+aJiEGRbEfUVDdw29rE27RY7hnc9ddOba2/6qlBh4RVByvWx5FciLeLTdCfgAjaKmTqTVOQ8qkLAZYZDBe/0ZxpOQO5lTe+e6EU/GSqEKjMzfc4oZevKzPsnzo9xScMS8ZRMXuTWoXFc+XoXNW7kLk5SfFmHrkMX/e/WXrLpqghpT0yvFgo727deOO+wlaghYvABFVbkVES3+g9LmL9uTGfssS1Q9eJNXj4xxcCZ5zwR7aYlmJcxfsxWgFsuwshatamIKG1WtPcHiHALqAPEUWFSKtwy3OWRQcRilQe8wt0nc6V4KpH/6JqWE46L5cO/xhGRQMfYYmfufQ0bgd0dn+LRnJvdjrsyIMY2+7eHaSoGOofT8x8fHbg3UBDos0Wq1l6tQTJZVPfBwa4TDL8BfdCijctsf2QixWKJDi43AIh02Y/eOXKLb2Gt1qiOXfeD0Yjp/L88ltg8qH5cAKtx6qhKu28Dwkbt6sq7Pw/O1St8NVXxi/FusGt21SVH6AJ9SSKHbPF/cnHv2NI125fbS68MHryCUG273ObEcfVDQ47cZelz0x1MB7uaFx1yflgu0Va+xkTO2btoja2MZALNI2D3SlAokZEel9LvPrUckOFhsHTNpR8eHAMwfp0Du5rVCUbYMiGeHzUzg4GWhJyCm1sNuz/ukYNi0mbmG1uBPIVzpWXzZM+5YXNVWBJkcHznXc9kJXBVuYECIr9UHwYsjEf8RPjXiZFzdVIUTEii3CO7Du52OCVIbXMkeIshmxn8sdrblDRT0t4QdX3Kd7fYSK4/JCG+6PZpUdl6Yj16sd8+66jDBk6ZyUtPvxRiV5wYxbyfQJO5tespXm7cnfs+aFHHYLyUivP5TOBAl3Ht1AkFuVRU6f/+Yvn9j8r//okjrqsI50liUIDIVbNXkVecS6LR/448S5P/tFbLR3p0ilFTuITSgfDyuEF5qoZllCgxxa2TRgJalKVSMOvcRvik/N/nA2CHyes7sz1OIJvqvVax/b2G/FuPoMAXS+aOvhi9DmR4/WbfXTnnH9NC3WZ1C0qjJu+AUhh9VEUOpUzDq4O2/jIAh0NLULY0rtEmhs53U1Uk4QdJSf/dx9wboAB0Yy91Zvw8PVVji8wdccCuELV13h9j2VcGiEXXj1pYqVVHxcRYWruPghFndeSivGhB/jsEzqtrsqDhtbe603fPXpDdxwI+VePK8DMTyu8mAL43BMctu7daAmd/G8O50bNujqLJVCOSwzeoASnx0NKtI8+r1pXrbYR9bhLkzcMUTL5MLEYJwWyWK+rqVYZrbbmmjRlg9APQUq5HoiNWMQ+B6AJWBk6NBOW62Mp1sOuMz3HqTeK41uG9hUbx+2RMeHNojyu83SgWdWRgUQIe2aj7eznWDF8Qu7bq5luZeX7Mxthe5qRaQ4jswGfYJ0Gx7/4ujAiFe6hbyGReRIJ9IHmmGKNIXaAtHC6He4A5Kaj9oHra3EmCVLe2yJknItodZG/h3nvlP5TIuC4bzmv0x/XH4LIu/Zovi4V7VFUtyYW/O9+K2fX7LKLXOGM+7ND3nthIQXZHHv9V4yPyYFZbxhbf/5xTZSXOGl2PnJLf4iyDFl5LZS0HGS1F2yBLBC9M5Vr8qiPlqHrZi1LIn2giAOblQ9WGf0rJ4DF7atD1qGwy2pjf3WXlqh+D0TvzG+LJXhoMM4Eb/fjUX83hRtOcty8TYECxHHLbtuXQnqEur46VXdWNUQVpkt9vlp9SGWpTboM+enCDpK31V9ep8cB0FOfvLhBYESDrFMfPNRGvr8fbR+711095f202jmiL7m++L33xMEOcr5bX/sf3hZV1QJ4+opPG53uM3etF6nKHi89Vol+aEaPd5/cse7YB5efbnqeHje4p+6h3Z/9l79evmiX6+6j68zTz8ezL+Pl2H2tx8uhmqEgQM4AABd6m00Z0caUDoItsDSUPsq1SVLh7aP0FKZf/OSdyvK+3yY0suzj7uL1F/OciWdoC5rzy+3szqyffH2qZhO/RPVVtTy6hxdV7GF5s0ZMpy8Ouqzzg1PeBkXcsMhxQ5FbqBCSJmwrFSM2xhVG6X1rl8b1OmtcJsgCiqGFMfn5V30TdPM1pxP6tkl/HIsbvWRYhUSIq8SCRXbGpGofgamMLj0nPDmye3tI4xw8satCuMO7LX1MXhGLUFXTm1830MHn//2pxY9FaYmO+jOm7+c1D0GFUNCwTJUq1w93gEMIbJuyUcRCumIoCqN9yvRhW+EWxpykqDb8O+121Y68D6FZcfhA/E2MVAw5UiN8HDMXEevbVpn8W3bu09fq89f27uddxzKqU/mfLiCSqtsZWO/lVaf99UCLEnrZmvQftGu+v1o3WLtMQQl5ZyYmH2p8dKr8Zviu4Qpk8SfQ4ISwv0ssqoMbqsvo7waJi/dtLPd5uXC40z6P3DVGvU7nLRbPFNfvw/Wi3VyTlq8Qm8K9/O2wGU8/VKeP6GZqNOxNliWeRWd9DYe7iaAWqKGMebpEi2erLqkqDU2LZZeNe5o7ZJw8Go1Mhw+k+0EAXQ4QxpTjtDrXE1T+wMyG1Fqv+M888NZi6+Pp+4vCXm4gZav0rE/f3RBgCMqP+ARfj5XPPHlXjinWwPxhdv/zLxwvuq40l97pGQ83C6pUlUWHicLV3Th6izh+bn0ZnE8fqimEVy1hi8Hr99AexK309gHPhJUceHX99ivuyGYd1wXs14hAADoRuttO/9yfJtN9Vs12gSwZITatygydHhHWq2cp2j/6caryvZd3kMyQj0G3meZ9vZVCnUsVtbZccL7O3vX8EmCBwmac+CZHB3eycu8xrE6kdABovQKqCwrenJ13xeLWf34/tM2Hdlp164Ms4KWVwfpumALB1TiW34pJ4RI+vcVQyelt4MCLr29FtVImxmOTHk5Fgq3CSK/BIrXRqjYVogmnz/1uzV3qKiP5qRXgYSLyfjzJLxwiw6nuEMKL/lRPV1r/2Xa3viv0q+p4daL4CnuzAmj/EtAlhy/FMKIqaGPbrztob0OiYP2U/9pUQ64b0r+1xE1O1axYo4fZiGvJ5G7GKWecWdy9hu/opefcIwZKRzvRfmhFq/qjPBzS24HJzJMnLHYnbrtrH/+ksoSwBLTlVeupUEOeqiPzaTQG7+ykdCYFb4Ot70zTf5f0qYBi9/fOQ52OA5N1QqdRPH8RfuYGicnl5OVHjdMXd0rXukxy7JipiT3rN0+yZVndkcJZ3BYRn11DnNVlEaXj79IhHDn118uGwcsDrmM2S/YTR98VMs064/XEzOuo73qE6XuBlk87lZPkfMyoX7/FhWDOnw7RrweYpY+xwz9fuU6suNr48l64aBiqIUs6S97gCrkKfXeK0QMY/QsamnM1jcexeLtLBS7KS+/S3V2HGgx+Vfq7/qn0XJgdRHJU+r7He2IoNP1Gm9NXpF9adnCCQ2OY+LkgQ50ZX7O2vtz9+i2O9yah9vucGhj8tulFUk4FMJVUDgIwm2BuLrK5Lf/NFLoZeD6Dbqqi9/CaHBrQrf/4en4wRYe91TuCTpeZRy6TdKZx/XzeXiq0st1Wo2TucMQTZ16InjMvy+o4FKjXVHYnsT7g+BK7oXzNPPief1auOoMB3/4MnLrXTScuN1rV7SBeJn+97/8U4Reu0D/vum96u0W7bNRrZNePDrYts/C/rHpcVpmFycGGz4A2dAya0DBMKZ++F9un1HjH1mM9gWOENkXj96xOAfXoCupAyRZdYAkVWsYSWbbTkADiE5Y6nBdlg7vUAf1ZZrmL5+IdOCeq2dI3TkjwiRCFR/3f3+6fuCCGWl6aOsUfeos/i6aJUVGLfuxqo9zgKhnLa8/7KNWPPTOXeQUYk2Fo3xR3hfSGKNDOzItt9CqOn597CJd9fF2La8Ht1tUkLvogTOr4sSn7qvYQhzmEFPqAzNZFmDxa6kEJUL8Kimm6VTtO2tt/1VLDTtCbqiFvKeVDONXbtExCyGkIUSEjQi5S6gZ9X8Qwfx41Vq8pIc/boeMbO3ROcckGeNumx836CGCSjDuXToMQm5tE6GLnoigIgx/2ZgGZTa+//8z7ghjn/3EJ9v6ByAMY68/LTeQUuwm5N0XdCUq8O/PM2dStsfx55O8Ci/uzFPod+G+PidhJY/H7Owodux2l27bGYMDTrBkvIojw14gIkmLj1cUkzw906QxDnSoL52sLIiJZquWFASlTVk5DMbBjKpVWwo06Ddc5OHqhUB4PGqe07QIy4mnr75jU1R2Vr0XBDleUCu59kW75rqDY1DWLNt/rpbzmBWzjlUK7Gzst45yKymejA6usCYbUOoATJ/M1goHhUMten4jftb5QSK+3WxlHehQkqK2kMxzuIMWT+s7NBa/J61NUdaHDOKQN9YzVpm11/WOqL+Q5exhbZ27efOCEwwcw7AqDay22fLbXzjffTtb1Hfy6YGtqUae0mfMJVFhxBW37fzZ/i0ZtaE/1twYyN7x4uksQcd55R9fi/nhjEo4hDJ250couS2hAy0+Dowc+/P/SVFYXrAlXKGFgy2TTz+uK6+w4d2366otftilXOq2D+pLLTx+rs4ycuvPB9Vn/GALvw7GgRS/ggsP41d4qYVbH/nz6ePxckUbfh2MXwtfwtZffW3bD+zD0lN7RPlz0Yo0MB9EbGOFYFHrQMwSUFuxE9SEhpZZA0yHT7ykGcEHaUlY1GaGHu8inTUOXUkdHsnJOsNcpsvYPoRlJCxdwaX3aqJDO7LE+ysMQ70nC3YwiMMn3ktLt2SRxWIFdXHAohR/Z6TrPm++J0uHt6XpwJlo29A6bGOMqQ3ZsUULPzRCFi6p5cp/11aDJ2S2h2GoY++F2ttsvE13aHuOHjjd+DoJVy/hyjoF9Z0ozRS1/r1Y+33BwRKpjkenraGa4SsOjjhcYVRQQ+b6jlHvFV5e1X9XrSwvdnj7uPo7GiO36j2CLZ3KKcicYXhZFi/O4nb80YkKWQxXeKEOKWq0sHEGhTCLVVr8LkFe0MW/w3uIsxe587lj2TqzyM/Rp3i482IESRSvCIwU6gX4BWX08H21d1I7V4xj6oASh0fWB9VMSqqc6I5HXigkVL3GWzR63h09XctwnMc23vbQlJQ9+2af/u2WP6w3D31pUE0rIbyEjZtf8V6uLAZxvMCKbf+vjwd/fPafjtqb/7c/ykuHYt5rkn47Ih3R0RVp3NZKPM6etSYfJMFGQHexqLsgeAWLiiuzGNfRiBtqaK2ke6t0IEJQSvTI1KYBK+vMi7FGAy62bU/zc6lK4MQLowyV32+UVjfh77qKB4W95TXOIRFaRIUKFUw41KKukmotI8mVadSmyWi14Ii3HMpT5lWrtrgVZ9p3lpoXDhpX01qQIOdlGA616OFNvVO1qkpBItEnx7j91PMX7YME3c+JHFxd3B1xBd6xQq2RtLg7N4SaRxlpeeHM7NXIDTEuW7BFbYSlC2YDf0TCsKkLd7Z4lUZwELkFwpBqJ2lzwRa1dyBN0JG2vP1m69yPXlxwP1dQmfiF+yqGTFi1IEwYh1kYB0PKK7RwiIUrnvj3cXiGx8kth7Kf/EIwDg6eHPvmo7rqix+s4WoxPG6ukhKev4k/c+cpdasbgLFffVlXntH3ea2J/CCLW3nmmkgVZ3i+eP7CFV44iMMXnn+eZz/gEvbaG6/jMwk6We7ixGBrZy9HnA5FXIdW28Rj1r5vZdW+bIsikfZiBGAAfAa3wK7xuFo/ynF4mABWArfDRtI93BnafvQ7MjSWF7DpgWdKtyndAEGK6h1L0i3YzQk6vDNF0pmgHidXUsHl0I4BMowkOU6CuCJSsQLYou43Ds2fPklULSP1/eRcUttHpSt53A6IqLgCenhnQoeDDNpFwlHLV1i0mLgKyqF3TtSs2sKEkaHD2y06cDraPl4OtPSt2eNW7BEWtUukYIlaD+hde4oe2jpcsZrPke0jahlPUDPb++lcXv2O6oeuGl1e/ny1e3l1iK4Mttjn//v0xq3/QR/8cSuWGDrEUWwVJPyiLcIrHFJ1BVYNMC4dR4aqv1CxYovwP2+DyidqwLo7FbckxhJqpWMdFUMdflBGepVVSE/TTedw+uO12aeP1NxhbufS+S3vO3jQceio8EIiXquj8GvxYjLSC9D488/Duu1+gs5KZKodpM7w5vd/7uD5Jz/Z0gEmIZ2ULFluROHlGSadwoJQinTkDJ/9786zu5yKzy19rY6jQ0oItnSXbtsZgw0KWBReQGOvF9BYiX83SaNH5jb2Wxk5J9KNVObgtjZlbXhKxsuvvTwQUh5kqfRdz1VGjKvoMbF4B4PzkvQGyYKKLJv6rREqDesMG+vUxleedlcdG4dj3MBKoFrVFrXMJtRjaWojPS3LmrRtu2SjyryOjlJow1FNOzNb5Qz0ekEinmf1HslzGyqCbpeMONzifm/2qvEXqDUmzdLisiMOlyRYhdCOCLrDFvv89OmBbbZak7CoMfYb/3hlVZyZ1o3OvfLDkgMZXNmEq5NUC7QwDnNkvZY/tfjDcACEwyHZUJsgvx2RH2Th0Ai37ymv2sKhGA618P1hbvuk4jz6IRYer39/5ulv6Gse93DiDve+p9ygy65bNpfMYy0cfuFxcbilHE+L55/HwxVcTuSeLHlc7Svjk8Tw/QAdRmQFFe6mJcF/H06W16ciDKyOM6iDoBGPvqo91VNiqQ6Ewqo0R2JGUPWaLVKHqwC6kKxwIicHCI68K0WykKVoEjpMUDA4HFI+fiLRWNKmaULm1fQmSPZMU+H1bKSWTWFu0IVlaalOeJnvPUi9V/gEG6v2gEaaDu9IEVdNETK3oK2QG2bZRY4YLgsRtY8OluxIqwU9UXtAYVGhJ0eHdvLyVBf1eyER0ycStTpfbriGl1ed4w/+8pIZNd1s1eUled8fVxFavSfWdGWwhakv9ayUbmn7Ynse8tY9vRIu5LfBMSqWQrfe9WuDwpFx93nCa5Tjt/PRzxahsAWnRGbtv3l4kupwyNwVzKY/gxSuoGIUS6q4lVYiBTXOfXv82MZ/lbbUM/b6BWB0FZRgXrl6Dc+mX7VFessgSLOI4m130uq/8c3v/9xIwRFDzVRvsZJHLckH4UIpm3CYxX+JXHHFnebCvthqceSkQ4PCr7AjqDi7usqMW3GGL4YRuaw9dI5V+wENEEUHBFpK6EoifTIZvzGejBpucQyaNN0zcSu+Pq5QU6ENg1Uy3QrPLa8yUkfeu9jqq8guuy+vvoUuqYPbeTWd/Lx7EDpv1zozpiyg4t5FCW4h9PxFu+KZaeqLLldhsypW6fVz1ZNN/ZZNbrjFovbIqy/g18J3qPndW/5apFm5H255u6JqONyi3teTNg7Sdjsr0lBicSu2iN3qb/q7VF4NqbFxvHuRK7ZQ5PFb8hTFFrl1E6xAV1/XV7PdHkCnUFv4GdlgMFc9J4tgV+c6+cljFl9z+MMKVUUJc4Mdj9PMC+d0lZXX/un1KKPWw/JzOZzC4w9XbeGwC//MFx6Op5269S4dYBk9foROfeZ4UCHFbwPE7X/yb/5EDxduDcTTSH7+E/q2X5mFZbzWQHsS7w/GlT3rBln8qi4zXluierhqzMwL7rC71Ovh+ed59vmVaLiaTE4NF6oEs45wck1HE+SMNjB4W3/XatpDtAzsiaEstaCJZZZvLFRZr/mLPx96OyZy8FJED7MDaDfap+1X4tvyssq2rECbWuhKNVoCcTWRwzvG6ocYVpADz9QOcnKYYU3fADm9xVCEI/PUM29XrC6yFDgs8uD2IbXDPsJ+dcGPT+hD0W6AyN+X7lY89Y+6L6YDzx6jQ+8cVhuOybrDuifKJto6U+7yujv68lL71Xm5VFte0L3BFilEloJgS/Fd6FZwEe51sXjL+viOXx6YffaPSj4QjYKTIuFnKXScImhtJLxeR156ROrxGSJSAIVbQ3gZluBtyGEWdxyGV7OlmG1RQ0VeCXn+/5fet/FfpXkB7A2vaHvVWqQbItHFa7xKJ27Exw3V+BVjgoo0XthEWMKQJ7e+/3fvPvvkbzX0YdlHxqBTssYvi68uaI+k7+cEzuxz3/x4tnwcwqEZSX5QUnd9kjqdE4RieL6DkNGybHQBACwHr51LhhoLLtj8nyQ3hEFuWrjaAV2ulHKMN5Klo4ODMa6Ewj+3UuWE29qIPpmhiJ/ZHBDZNGDxd2Gy4vjcai41gy1U9hotyxpUC8GiKpPUVWIkzRgm5eb0LLTvgAkHPKj6axmzbrGy9gv2gh1gjkEnTLmwz7io0obiObdKzKSuDlM94OKvIIffE1oowJMzDJo5b9tZKnsd5VVhqlVr8d6rUxQtPBAzr6M9ak4mCboShy+oEPEzRC7BDl6h3m3Nn+mw+DsL1Tpy5I3XOf13jh2Yq4x0vwcQbIGO12dcOfaW7Es38pxec76h4WFlqVWZhaugjH3lYTqRe4KaNaWey0GUwa279Xj8YAsHS/Z9xW05lHnqGzqoYt1wY1DJZfiL95e0JOLHw2GWsLE/eVi3JnLDMW5ghUMwfiuk8vs45MLzwK8vSsUWxuEbPyhD9Lia94f1OI5+9BM6uOPjYFCtZQqdp9WQR6dOuxVNzrdNiyNLAItI8nGjKhWOTRLYLoQlInlfpUXtO7GuAqH22xTG6IHTtfcVcojh8A7qqHBLGAdZeq4eVLeGvb9ty60yHO6GoS6FHjf4IGVWV/iot1za7f7TdvRwS4kYRdo3rH7fRsGmdpnvvZt6r/C8Nn08oyWLvryooRxBp2u1o/yK5TjzOmTi96nxAy0i3FIo+DTQD5a8oa1EKiZJ7qHSqirFgIzjyGC85AVcDCdNEUgSCeGlarznUlBVxkuYUJD9EKQOJkUMzLg43KJGd9APjZRWSPFfs5DF+fEyJl5xF0H+onKruvAsGUJYjpAn4+9/qKGKKJLTZf74QvPiz4e7BL0uTk7lA1imaWT9EYTbGYmgGI1f6UZPcMBKHm/2wASsTG07mLxC4P0JbcGVMkxT7ySxyh/jyh4cMFCXMfWhfndBUFxd1j93wRbqEufL8xfs3ep6SLe3qUY9xmGG52x7iiuAcCURfo73XK4vtlt99g7p6ah9tbKxg6lJDjtEHVjWmM/yNkOWpYMjC8Tj8QH/tuEsXJHltkHecorr1/qCnTln2zm7zT2JjT7aU+tx06AMV+Ipv5/TNVR5h1ui0vA+L+Cy4Hfjvd54+XvCv6hlMOpdjpWHWvR8XqVbEJVMt1K1FqvfGvHeq5E//yRaqnQ32UCFPbno1VBa3fhb/PUU0cAyMCjy5yp0lHrv0cS5mzfjdw8dL67XuXjnbFQiu3F2dvG/J2BJceAj9cgRit9/T0uhFjYdtB9yV/0nvXAIh0s4xBK+j3ElFP08L9wSqnyyAD/G88ktiNjgtuLmBYdYfH7QxL/Pn27UUEs1/Pzdn72XUseP6OALAACsPkaN7YTL5GAdCZbGA8+coAPPxHU7mcUICnIRA1PtJ4wa3uBwi+HEiTqoEtaR7YN0aMdR6r16Vu0D8lvRW3WfJ0RSt1Q6vGOWDm0foaXEYQ1DV3fLUDvpohVOYkErnlZw1ZS5vhbmVbf2tKkVvLzm+narw+XtDV3x8nKMIf13uEp0bcUW+9z/ldu47T+8Vjz7UhZDEUIU//dyHYbuS1UsD2he7tsjDf3coHxJePzCTaboTIUOfqht1OdPfbHuyoKVGIupZ+3SsQxvhnQoJnTbm61gdguFyw3vbH/+r8YPbn7fZ7M6rccfgLraCeeYiu2TgtfhVm8hLwOkJ+6GYtwqLqHRqnk3H4vf+vlIbYk23XFsRApjwKvSIt2yN9KrsCJCbYjcFyvX9GQqjef0n47am/71l/PqqTH3NRR5VWiCax5fz1rd6ql9H3qw3Lot2LI8qVDoKl6ljPBKUJ6DLIZBJ+bVRm27gxjVcOjDu5klr2KIZVkxtXKRcBx1cFXQcK3KLmp++bFIn9eOJNsUlR/jCjAc7Ai1rhmoNJz6rllPxZYesUrjMSUd39hvZdX859S3VX72h7NtL+voVViphdsLjatPv4UtiaRa1gvbGMXoGtqlhq+4LLfcZCUcWjhNaYikPTvb1HvFusXicE7JONV7MF1erUWHWkTtjQZ+nmNQ1pTFs9m8ZTRK0J2cBr4L5ZIER/ItlPO0aZF57ZIiDtzQmR/QKaTMqO2ntKwRECwYgj83sQ0EHc8UMl2QaudcBNy6iKCjnXvlh3Zvj2Hx7ezpnA6JlAc+/BAKX5/IPVkzbFIuGwRb3HAJB0DsH79E1vU36konfisiHiePfzhxe1DJhae1+7OjNP7he3XVl/LxcqDkQihQEq6U4rcc8kMs4fv84RoNtvD8cVsjnlduN+RPm4M5fOHxjqj5TNyyOWh9pF7nJYKOFv+tpwaiDvta4cql/MRQ29adG5l2O83+7m0tHYxvdpm16/X644yNnYytN/vWNfo8AmhAgcSMqLIxe7N9rpUTOAAat/8HHDyZpN951zCZhZFQR43m8AH7gjhIn/7bLDWKQwTqo52OvJPnY0xtVDd3TEaofT5qnzvNv7k461QcaHG49QwHVKgFwlLLK0OHt1t04PRBWiruch6lB7cfJMcYV7dT1KxWft9RcLiF5/XIO7NqH0uaIrdI5+AId3fRJ3OmqBXuPOxTy+vYil9eK1jXBls0KU6o/0bKypYEQQovUOIOKdwN6YAp9pIsWynwkxh+O59gHCQLcmELgIpE7y4pCzo14rXR8QrGuPVMiIqRFg5xOHyAMjfR1Ert+W9/ZtpKpHf3rBXj6gDdXrfCiRtUKYn2uBN1my3pzkrhj1A3COMvPoOXk6lLi91ddwaEGPEWmfsj+dP32zkFIR6ebnb2Gx+rvuHiqJ20gs9w92ZPB2VEULVFcDTJfRm8NCMfKIWO0G0bdRa5ByWwsQpNM/uKZ+RztRSuqEFN4qodLa03l/FCNVnvcpCrp5gOjVcIY7DoGxVm7QPPYr1Yp4ao+XfVM188ICi4CkTlFz7MoQrT5JuSNg1YfMP2LnmvPY/NQRt9wP0nNBMK1NRVqw1RmG5JdLM1Zb9ol3yfcVWcSrNtGFT1gGbBpJHy5/B4Zls4w9k0dJWe8PhsaaoNqJD4TfFdhpA1U+hq/SlluxVlaFO/lQm9T2JlYSXoJsINXUfSuyRn2NjULLFEZwC5O1OsusNJVDvqRmqrJ682c9SOabWzq/pAKaIKgUiADuM4ap9DxJXTN/7xyqo5K61b/ZuHf5vO/ejFio9xa5/xD4/qsAm32NH3feqehoItfmiFgyzBfa++rH+2btgQ3Jd74ZwOhnA7ovLnjx4/Qge/9ggl+rdQbO01lD2T0+GYhfNbfK4fOvEDJjwP/n3+cBf+obEqKzwO3TLJez4HY9Jqvjic4/+8ICzz5SexLt3hnMJ8liIeeFlHZjbfxhbtato2LYP+semJixODTa/TNLvM1PP4jylGLbqODN6Rvy8mzF3evER9XjqP1pLQoAIVcj2VmzJkCWC5fPr7U+r/Kd1Wx7wmQaKwR+24TLhFCGoETNz9Hlm1lzNHc/MnKK1DE63xwzaHd6rpGoNqh/Cwmoa6LSt83vtVOXjbu8Y8CHNWHRHO1JxuvSAML5veq4+qeUm1FmgpZ6Tp0E6LHnim/smCbiuzTM1hogZ6wgEXaarjFrychRX99/2TSUrX2wcspir/3oLHsxSF/57g0JM7n8kF4/XnzTEmg+CIG4ipPl4ho693+8srbe2jvrftUeNNqhEk2ru89JPas8xWmK4OtjiykDOEMRJEIbymO36ohfxSJfouJyiJvmXnxxMFKXfLcN+bYjUTPyMj/BwKv6Hs7//XbJR5MqSTEF64xrvLD9n4N9150wETnX1p6UxxO5fWCTDrZ9LHTNnDBxZHvMmKICRCQShEB0Wk5LSILL4+KmZ6vJDLns23/5fB80/8x6rhke3Jo9a82vHqviCjWFWFQlVidGbGrbKixp6p9ToMQVk1bLF1gx8uIi+IUwzm8Ewmiajpg7yw4tjUffi9PEkATZK6gpb+XM20EmqpRzittwDx2ueMbhrQrXJaS+rXYM7JOHnVWMwCxStt10ujWMmlYNIUV2ehaCzvEoQ1g+ox64g2rbP4u5bbP+UctYIp5kVu9qUqoZE1ah4iHtA3TN2SaHc43OEYlDMrPF/NV8UVXw6HVKoQw9Vp4jfGB8Lz6bczqhcmqRTOUa87bYeCMjyM0aNbCVRdeeZQlh9q0T+XhayihJWgQ8nIoba82L0k74HmP+vkEq2nRK9cYxF0JemYk8JwktWHEDG0I4JuoPYUpKMOe/V1fXvVpyMOAnYwIYwF328cBhn/0CiN3fmRkvs5kHKhiZY7+TdfLwmdBNNZey1F5VZ6iTbtcPBmvRfIyb/xenG6Xthl9tWXqFEcqknd6r4WDuJkP/kFyjz1DUp//fiCZaOmnX+NADqP2iYc6x/Lxi5OJOsflGsjtT2a4WlTi0yzZ4IAlsjbaM5+i65a+ICU2JcCyy9dcvJj6H7e/7gmtL/wcj7aQfoWHHiGw4t8Ke5HT2+3SoaJGqTZ/30+LjpNzTq0bQ8JM0NtCFNWxCe9HN6WowNnah8zcFvXtPdEATewwZfisa92/b73/6C9J/L4ARdWMo9V5i88fLu40ykd74LlRdR0yKvdy2yF6O6KLWbPCXKco15kJBxmYdLPtXiVV+KWlYrZdiZfcJy9khMeftub4tOkHz8RoV46UjiRd6QIWUhy0EM6jroygvZIxXBLOZmjNrD/Mm2rq1HrZ9IHTeoZV7dTOsBSzPf4VVmC6/A8+bf9QUhUPzOcFUiMl782v72R1wrJXcQ6mCKkI80s1TAnpW166Rgm/MovRGXLTSdvoh4sgc7QjaVzU4RgC7TAMeiEKaljdpZ4QYgFn83OMp5BwpVlrFusYdPQy9Gi1vDKZlJ9HSVNoXaE9UnaOGDZ6qt+zH7BLtlAMLgFS9nXPQc6uKylKDuQw+GTCi2JqgVeS5avDpb00Z4aPVljRp/MbRqw/BX1YBgO6qiv24nnL9oV12/MPhovn/9wQIWnbV5FJ6l2qCVdIZRVMnw4rARdJ+q6mk1LwaDX1Mprc+QSvUeF2gETLRAUk9+jAfFu/O10mzXm5akrsu9orXZEjiFSBi1faxbBlc3cs9xqsakLqdc+5ThGQzsFL12SaBFS5twt2/YUSFpRh5fufgkEWzrY2R+9wPu89PfbwPUbdMufsTvvCSq0+Dgs0mjrHsZVXzjUwqEYnx8sCVddCVdW8XHbHw7XcDWXqVNPBMEWrtqS3JZQl3frxw5+/XjJc3lcfOGfX/MCLVwJxr/Prw7DF24h1AheBm4Fm2uC+1K3fVBfOOCSUePzK7ioadsE0KHUft9U/77p3MWjg0t24qIhxJTah91qsCXXaislgEasV/u2Xo5vs2nBfh99ohHAyuQezF/+8FU7KsI0ND0rRj1rx9UBzZZDlHVJM62mN7nogaEoVsrvu5aVNI+dsLyWWVcHW+zTGTu+9ZcuqJXhAeG11wmFNbzqI6GSJGsEV22ZJmEkg3ZDoeoqhmEIGbQNckuE8OPCNLIUlRe68NoguQEZ3ZHID5W4pWG8MZNTcJpP/lVQDLg8eNAUDh90GiC/NZAoHmqTXqsfN5xSPALnZ1XUI1xxomLay0oejXGZ7JLqLwERVH7x2hLxb2Bq9i8+Vnulf75nWvQWuLJLsZWRCM2u93v1fqdW/IN/PDD7jV/EhkR3aEu4a4VJqgufUdvWv29YPbgKysZ+a8JrV5Mpb1fToMVJh3vU/A2aJk2VT0dX5zCjl7urFAgJm+8prvCpb5Z1FaOiZRv6XujkxGbLSuoDhQV1QFgEVV0stXx5nmNehRyLGlhWPLxp0BSHZ8rCLVaFGZviEMmmAStJZZVQylsScSDHC6OUz0tJ6x7zKl2NJkm1xajya+IqL2n1HstXrAgkFlZrCf9sXEWPUY2wULXQTHnVmfDvFLqHPOX+rUUcfGneA3N0oXL15hUl+rJw/5awHtxl4urz//TAllytdkT6IH/BnPIKci4JtXWW2nbx7CStdpJyO144nSFoScFwxqjWCt9CCa5UtOXF89iu6lDyD76V54AJh0XKwyws89TjNPntx5sKtbCRW+/S1/7zOeiSuGWLvu0HQML3cejEx6EWP4BSXj3Gx4/5wRZ+7vDu2/XtXTdv1uPnC4dZOIgy8r676NifP6pDMjw+DvE0Gmzh4fnC87v3znvc9knXuy2V/IAL42W6tmeNveHL/4ygs0ldQj7qurOwqY3qVddedLKB1sUlT2tumdlH75juH5tOq/ssapJaF5vyb1+WhQt9pM/Ij/rcbtz/CUtByJzb8qNIktlSFwAAaLMHt1tUEI/RUp2Uz/u0e9fsJZwEAF2ouyu2kN4lkpVSjnjVUbgKi1+CJAiX6OE4tOKIhLX9ly31JCu432875IUnZOh5fO04hYx96vcj7Ti2to9Z6mogqGDi3u3mahzHC7cIL+ziTtDOfW5RVmrtv7zfVlfxjbc+OK4mNK5nx82LBG0W3HZEhg6fcEDFDwJ5O5osDrDY2X0LdrL3OcYex/BbNghvuQdBIuEVWvFfOomCkY3/7JcHas9xgSMxtvu7CbVHMvgohLfIilV5uA0Fduh3D/4bqHQQt9OlqY29j2H1UZ+zB01Jwxwaid8UT87+cLapjVaxiH9bG/utcVG5nHxeGmJ4dnY28ue0ELVDGrZth78vG3pN5207G3XYLZaV4KCL+trmMCyvMyRFjeoTpqHbCcX9wEmVlkH6sYJaVqZcWMVG/Y7TFPq88Fr2LBxPTM1PPtgZZtEi2HKTlXDKxh0OKKnf+dFay4Pnnd+75fdblhVTDyZL7sx351n9q56kXQ0MbdNS6FXvtmYrtpg0S0sjerCl0HXrTOAxhUwXZK1QqIg5whluMBgAsCI8u4FLgddqt1VZQa1TEk4Y6GQzldoEcRAldfxIU62HfBz4SH/4Xl2tJf31R/R9x0f3B+P3wy7jHx4NnsNBGsZBFA6N1MPDDW5N6AALB054eoyvhz5/nw61THzzq/pnvnBIh4flafP49/7cPTrs0igO0Yyq5cOvcVyNN+UFeIqvXS9Tm6DjXZy4Y9lKyKtpj1IHamWZXZwYbNsBwJcnhmx11ZHLEDqL4QjbKVv9v0yXEZQCWCk41OKIk2qnsNXI02JXXUu73rGdEurCt+vJfP8EXbj0w+Id0hgjBFugC3V/sMVQOzgckZKOI6lYaUWX/TDcgEowrKEONkn14cLDctCFyEuzEJGfnPCugvCJ6DPTUeeFep1dUhpl1VqKVWG8zEhQFUZdFn3nzPNP339w4/sOqx3lcqK4AzR4eX7FFj+IIvxQiZ6/K4V1VGEnuxoqzUEY76eSSjD+EMVqLYZ0DHnUFHN6+n6lGJdX3cWbviS/Ioug4q/NH5cfnPEXZSFJ7e4PB8vJJmruTI0VLKkuXPkI71Noim6lY1kpDkIYPTLbSrhlsVQIo9jqszrjGHTMnp1ttBJDssZjWYrGqvpAzIrRNbTLMGiYK39xdZdQ6Mfm/9S85+YKlBXzIjf70mw2eK5iOjRIboinfBox4zoaUd+WuvKJV/2lhPDGr36n05sGLB5vsmyQ5MZ+a69fPUV96+WoQkCmZ754MFvN6xRXe6EWSFNMld9XMGmwtAEg5fyAkhdkqjpNDrWola9kpd+9Wn57ytYW8n4YCLqM08D3uViaAzJit3pvfpeasoQtf6JPx/18mCToOj00P+NQX75WOyL15TtMAB3I6HPGm6o1JCh1KmYd3I31hk5VcuCNAx9cAaXZCi0+Dnyc/OTD+jYHSzggM/6h0SCswqEZf7jUrV6Vk1df1sETxtVVovJDLNyqiKflV3rxQyt84UoqOoSi5mHfV76gQymnPnOcJn7hPh1S8avHNIqnyeM6+LVHKgVcsgQAAF2vQGJGUHgtSua52iMBwPLzQy0krKhPGex/L+197y9RUl3H1tQPtLD85dfp4JNfKr2Tq7Yc2T5I+09XP87MjztGihoi8/TAs9VDpIe2qWNeprdfojBFD5zB8S9oq64PthQum1Oit/BI+D4/OOJw2IV43x9Xa+Ewi7lHPRgTfnJCuNVTvD43XnjCb0WkMxbTs6e+FHknsyGMJPkhFr+fkU5o6EoywXChSjJLkqx9/tsHjm1636Fh9eqS7jGloHY1Lwi3908QKnEruoQDQWGbb/8vg2qpDvCic6u96NHI0LqVHpcXMZJu8MWtVFPe9sjvGOXeFl61nGL6Rg/rdoRyWx4Fw3AWputCEKtdlrov2MIyRKguBM3jIMTGfivNVVGMHplTt8cqto5ZJs9dsIeoDTb1WyNU4yBeQeq/paZxaMSrLBNMoyx8Yun7BCVNDm70SeIACk/XvmhPcmsocsMpk964JsJPFtwagtxgi6jzWVatagvPX/zG+NTsS7MX1DdfPsK5+HaNx7I6+CLpkn9HqAUTyxsGzVSpqGOVzJc3HUv9jqpU5wlwyyK7wjh1qGjhc3F2UbfiDeuoRy7lEraj4hCNrB5+q2Lp5s+g1yJXlWn8dUCH4B3UZ/q3TvGB/GrDyO6rcgirAFdrkcJJUVNE7Orr+vaoT2QE+jqTffeX9uvKJhzw4OswrojCbX0St2ymqdyTkSu4HP3oJ3TVEg6acLCEx+FXUxn7k4f1eMLhF5b8/Cf0tVvpZZSi4hCLX7WFQznDu+8IqsVM5Z7Q00o9cpiyn/yCDr1wgIbnaewrD1NmdL++JD9/X+TXtvfn/q0OtPhtjpgfcNmnxum3Vfqpq6/FfgYAgNUhW/qjwP4UgJWgwVALV2X5zO2/TmPv/SVq1MyPTld+QOrWR9WDLdKI19q/UJlu41c92CJMnmbK/cHkYRFsgbbq+mCLbWfyG7f90gXp0IAoDaaQXzaEyK8C4ng7AYMORcXiITIc8HAfa7TXqENyl0EimIDwysAUJ1LsTsQPFZxaZabbS81MVk12UM+EkN6iKpm34rA6PGKQ7DMuLXjMkClv6cry8IvbNsidmtdyqVh5JTysbjHkV7Xxira4WSDpzZc7PuH/CkVp+yQ9DgRbugxXDWip8sAKxZ85WXKrM2CnEzTl+Yv2wU39lsUroRyo2NhvJeScSHMAItIIRPUDoPM9S3jQtpY6gYlwKxxP5IN6OjRTFkSJiEMuyY0DVlp952T498B3crBI/Q5iZSEP/Z3ktfGpSVdt6bcyFTYqYkafzKjrIRHh9VVr3aS+Q9P+vDajvJWSGl8+flN8lyFkzWUovRBQpceM62icygIzHLwh6E6NraOt9LPMbFoqc2o9wYg8NNaDu5hhOJmCbPSMKoCVzewr7HFaaKGl9takCJWqOpLaz5O/Ye+/yb36T5cWfHdxdZOxO++h2NXumarTZ3KRNpr5eRwu4QAJB004ZDL1m26FFj/owvzwC/PDLozDLv40owqHU4b/6/2UGz+uQznZ336Ydv/OvTqEwtPgCi184Yo03LqIAzscduHnc9WXKMY+8JFgvjNPfYPS6jX6885BF6/aTZ6+/CQObHaB/rHscRGxzazam5q7ODHYttZFA2PZk1GHVdPONtLGp5HXpeQvTCTvjjhsy8vsln3f2mNIp+F9kJdI3p2fGAq2X+L/8YldjlOIvK9B7fnOXDw6iO8yaNiN9mn7lfi2YlVH6eDzH2C5NRhqsdb9c/qL/0Ott8ZuomZkL3yn8gM48an7ue+1o+p3zd8BKXrg2a4/ztj1wRbmODSlVmj36qCEYfhVPfgh6bcYcmuCuEGOYqiluGPFC8D49wsyhD37/d9raGUzdJa29CqPBG2IQvMUmpxcsjegXuH3qqFIh5cTeUESouIy8dv8cNcfJ29nf6vkYMP25IPWvLuTVXov0VueXghFOryApTteGcoVVd6B5QVfQlVdpB9fCS0/yZX2JAUhF5e6sS7+wT8emP3GLyIs0B24vQq/37rxDFSLEG6BFj130R7d1G+RF25JUZ9MWv1WulqQIKpwa5vlsrHfOko1dkpxYKK8ski14IeoEOJR3yJj3pdLnselvklmvPt3eZVWLKrB+/5Mb77Zmj7/op3l+xyDsmZptjMWj8cH5qRcZ0aoVFEw6KAajqdd/jqSmwasx9T1cKXn+UEka4NlVRtGmo2Fcuvh95vokZXmtThNbkFkinSlx6q1L6rUBgm6RvTPFbmE34tSh1QsaszSBW961bSiVmxBxY6uFqkdEUCHcYRo8SQGkTwVs2JoR9SZttx4c/bV88VgC1c/ydy7Pwhv+F578yd1x+VXSuGAB1dg4Ws/wMJBF24DxPzwC6sWdmmEdcONNPUbR2j3Z++lmRfPByEWvv94aj9xVRqeRqJ/s259pIf9nXv1/HDFl3DrokZwiyN+bvprj9Dkt/80uP+nronl/p6gG6jdnUmKuI4qWggIVhljMvqw0qYGNPK6WPy3nhqY/d3bIm0btLrMTFmYlmRkqIF1LbVrOhMOtej7pIw1tAwl2odBC3h71jsRqYeMLAHA8iqI42qnqRVl0FZDLWz6YpVgC4lG9sHlo538KbHNtZL4ASr3iPmq6A6xKoItpkkz0vGKgrgBEq+XULF6C3kJC/c+I3icdELDC8O4FUfct4fjNHTAZUtiLDHvyJhfxqQY1AhVgAk37CGRt3Ofq5qutRKfsqhXDNjfeXCaWmQl0zH5Fh9U9/r6eMvE78ZEkvzl5P6nQypypnw8V+b7Rjg3xLkTv8BNMYDi1XEpjjsUWNH3BL8WPR3pjicIqwThFb8qiyGD5ec/7t0S3jwa8/NJwllb3YK/LPnvIUndySI33JImvGehSSXhFvWeMgVlNg1YKeeKSNWp3mLRClUt9BCSrxaYiMKyrJjwqkc4hkhUaL2zb7NlJdU6xEiNsoxZNY8H/VALh0rMKq2RzALFo1Rc4NZG6rVPVGntM1z1iXm3eoTZpyugVJzXKu2FIuMDqRV2l9bcSKrWgohDSxVDLRXCStBVolcTWfpWRI1asvkTu8mW3408eEx+jwbEuxGY7Ubcjuhs/5aMbDkIALAynOnfOiLbsD569XV9e9Wn8kGCjvPt556ZGtyaGOMKJ1y9hIMaYVyBhC+XIgRb/NZCHPTgKiYjt/68DpKw0lZDblsiv6oL42F5+s3iFkAcmOHxcUBlePft+rXw9cj7fl4HTzjIMpy4QwdeOMjCw979xf00+9CjJa2Lask89bh+Po+bXwvfztx7QD+fXze3JXr1J69lEGyBblJwlm4frz0xlB8Yy2bVGvhw1OdIYeDEDFhmUu031y1H6DI52A4EWEbHZx4bt/M/TIbvsy/9HU1+v/JXxfj7fz1yqCXzNyfowqUfLrg/98ppaplQW1MHnsH2VMcRlnfDpvk3Ws4LdIJVEWwpXDanjL7C8aACSbFCivDKt1BpxRQ34OG2xDG8Qi4iVFpEknR6IiTXihzH2VXSeic0I3o+vHkLAjSCZmqNr88UgwUpMhvfu992HJmmwpsn7NxEwzvXOdRiXu55jIS0KAid+IEfniVDejNG4fZB6npB6MY0RIpbLHitg/zlq9sWhV6vDp2EskVUuth1LMWfpPTaIvlPlX4XKS8MJP2CO9y6yBsm+F2qwXllDiGB7sHf/EnqXpa6ZMh9jWlC9RZoAodbNvZb+VBYIGn0SQ5JZGq0J1qRZ3x7oZZ0rWG4rU7bAhCXK9993taBlaxlWQdNhwale1Cel1lefV2f4Metm61Bb36TVOVzSr4mL8nraJ2gaByDjplSh2msKMOr+crZeTvPYR2SVaq1RDgDzIpZMbFerOP5tSuc9Szc1iuRgwlcraW8chAvL9PUv9tkxee0EFaClU2eUn87hQY+c3roNVrZlvoslejV6+ZpPWFdomsJQ06pLSEEW6A7iPa0nJVC8niwI7YDyT/4VsUKrRxmSR0/Ujfo4duTeH9QmcWvfOIHWDgM4o9n/MOjwXM4CMJVXcLDtoKDMTxtHueomncOrPjj5mAL38/T5Gou/rAcRMk8/Tilbr1Lt17yq8pU4wdxONQyop7jz7cfcPFkxWf/mAC6xhK3UlD7sifU/uWowRb7haN3nCCAZaQOt+T8w0432+dyBADLQn13WOqSLr9/9P9+oOLwXK1l5P8V7esm98oZuvf/OUCNQXWVRcMtgArqWPZyt/4RIqU2hmM095NJSq+OCqarIthi25l8fMsvnVIHnPi0D+87XpZXSHH/DxIdXtDFL7FCQbkS/nFy9tkvNvRmLZBIGF53HT11L9DiZWtkeB74hizIbK3xzQsjIXRRExowDeM4ibdd2vSeB7IFWZgSZk9u9q9+p2YwhgMtxmVzr3hL7UQSvPNASAqXXwyWjd/qx10sfluhQsEoCfZsuuPzI+pRS4da/GCJDFoueS+Zd8LqPkbSW7REovQQnxtKcSuyiPL7vTZSXisit1mTdMitqBOEXrzhSarBo58RDJ2AD4ymqfvLrqe8S5qwYxaa8PxFe58Xbkn79+l2MX0yxQEXx6GM/aKt07teCKJ6CxmDBmiJ6YonVxHvrU3WGo6reqjXeoxaYNt2ftOAlSUvAKRuTxUkTYmCyM3+cHambFibr+LxeFbOy4QhKKnmYdxrDVTzc0mHO/J2fuN1VuTPL5439ftJmVHLEUtyd1wUaJCMyvNjOBSktrk1kvc6LPVjwgvlWPpBhxv6qe/2dVb2uQv2UMlkJNkiajrHHVXav10v0OKNP41qLV1sTr3HIlQt8i1xxRGbGiWaeE4r+OwZGXE9yKBdRIQdml1qi31++szAVrQjgo53zto8WJDt2m4XsXM3bx7c8uL5VXGWWjdR+4/yal9PUKHVD3802pbHr/SSefob+jpxy+agrdDktx8PhvMruITvDw/bCq46M/K+u4LASu6Fc7qSC4dOuMXS9NmcniYHW8LDZp76hg62DCdurxts8fH4OeQy+fTjdPKTX9BBF09OLVOsT3eJCxODcVomatoNbPk1PO5Fe13tGLd99A7+Lmnp9bdjHABRCSqo71GTj8xgGxBgGZ39B/vklvULd6dnq7QK2vveX6Kopi/8FTVsqfdbrRYcauEWQFJyYn5517v3/2DVFXdYFcEWptYip9WGckKEqrOUVk/xgi5+coNLtPhtgwxDhzH8n03HafiNoqaW9DodhcIzPE4dzHB/9hv9qGGMHqqzM4bHR34VGemGU2iPIcw9fMemn/50Xj1kq3FdkoZh+1VQ1KRjUoqEuExxWWwR5LX18eZVGLLYesmtuBKEe9wKKtnZp3/7QunrEyN+hRVZbF0UqrpCFFRX8Zatvxy8ZRJUxAk/h1saCV0oRs2LdIQfavHaEPnBGU7fCD+o5FaI0eGYXQTdhNOGWarVhqO7WATQpOcv2gfj8fiU4UiudGT593PAxTQptXHAsnX/Zkf3zqxqKQ+YcaUQ4zra61WbqRsUcQzaV+PxfNS9RwWHJkwjCFoMm0J9xvRI2jRg8c922eCWDn00cGDem6Gsd6tialo4lVeAbdue9loS1T2T2a9yYojqB4cck46r18U7ORLqdUQJGCQ5jOIHofS8SpppZNecWp4pNU3+3E5S/d9rjt+7BN2rh9aRQ9CsxlozIfDQ5dTGD9oRQcdzHCMVZb1CcPvJCJ9rBUO3jUCwpQOdPH8qfeGVl7McBOHgh19FpRF+MIXDI4wDJT4erztMEP4g+9WXgtsDoftbZd2wITTd88F8cLiF541fm/3jl/T8+sP688zDNIoDLvFP3aOrt/C0PrDj3RMEAACrSg/NzxTI5INbNgHAslDHOUe4Ykv5/dMXv1OxfRDb9fbtFNWJc39R8jNXe/nM+3+95nOuyIL9qwfuIWgjP9RCwqImeppD61ZNsEUdh5oyDNobajnk5yyC1IUfyPASJ9KtBCKD1jxezMU+f/rLWWqQmsYuKoZayC/SEgRogtCH+1BhvlA7XSudXZxmKT49yOG4aRchuPx4zEt+JCkIsQgKXrcbUgna/gQLpeSP0WvfVGz34+58CtmefNCaK1DSr9ISPNNvI6QrvoRCK9503GGln+XRDwtvFoOXEcyD/2siLxRj6DALFQeVpY/rq9iWDxxPnPuzUSSVuwfvoFktwZY0AbRgdnZ2xrKsIdOhcfVRmQo/JjigUXZfFRYtskYCLYxDLdIQSXt2ttYB3sgHf+0X7BMb+610lbZHFrUu74dO1DfVpUoHb+Z7qs8vV+DZNGBxWCVZbRiuXhOlyolwX49FDTANPXxwgKhg0pQp6ShFP2iejDIQh1ocQUME3U1SvIGhbVpadf+GFpBLPo/Rgy0CAdluh3ZE0Ome3bDdksJJRRlWOiKl3vOZuuEWtX57KmYd3J1fHSWYu8nQ5t0z//J//HL+exfPlvyOucoJt9rhiircrqdaNRMeLtG/Wd9uZ0ilGeFQTmztNRXvr2X8Q6NBu6Fy/Dqzn/yCDupM/NlXdXsjH1dumaTHia5ysgQAAKvKetvOvxzfZgtU7QRYHg9ut8SRnelGC3UlB94bedjcK6dLfh7sfy+l6rQx4ip+v0od5sj2QXL4hAWR1AUdJAf2hE2Gk6H9p5s7iSFtxah3zV41noR7IXLHqz4zed9K1PGWhFqIF/A4Hdo5UjqQTNdsT3Rox1GuNloybDB/6ti7ni+ZoQdOT1IU4fHNv7GvoXZEh3buIfd4ayJY1rpaNJ8sLbLL3mapilUTbKF5c4b6CvqmFwAJWgH5wqX1/fALUahYibrPEfIgNch61ycGi1VipAxGRn4VGJ3kEORnXkjk7NxE1Teftfv+QbeSil+txG/hYwTplqAiintH0BKoGGDhAIgIWi754/IyNm7gxRu4+Jhu73OsvFrLXMEcFyXL0J8ttwpLuH2QngeSOfXICb7X4NPFvaIxjuMud/dkeG9go/iYwRVkdA5GqD82udufvveK/fkmv82RYQhRMAy1rLBC10X4C8atNtDdsrTcJcygK3jtc0a3WNYx9dnKLXMsasyinfHPlUDUx/qwcAM2kabD4QdpiOF6IQ71HXOhke0IrhKysd+iKuGWlhQcStkX3Pk1HMo5FaqkqF9Tze+pgqC7TUmnqPLvLwjO+D9T+2QdU63EhnCLJK+KTJraxA+18LgJut1AA8Pi/VCOS8hGPRlELt7nN6wMaEcEnc7oc8YjfqTZ2184c+Js/5YIVYpEbO11vSPqG6SldpWw9LgdkfWpf8snsqT5Z27Tc/SjnyhpG1SpVRAPt/fn7tHhl+JwbrAle+ZUcN+umzfrqihc3YQDJvw8ro7C1/yzXzGlHbhKi88P27ALXoUYnj//teQuusNyYMXHr4WHSX/9OF1Q8xvmV3/h68y9B/Swyc/fVxxOqJ3gX3wa+xI6yE3/8YldpnSWZB+Xow4Kvei2x9Fu2fetPWrHcUesR/yjdE7kJ4b09kE7l1n5MilXbxkVhJH74X+5fabSYxvGTlp9Qu+XbovwMgCoSMicKQWOgwAsB0mDQdghIg6mRMVVX/JvvV5y38i76p7/bat17M75TNDhjquPq2U5XLJfXwhLX0sjRYd2TNADz+5raLyHd3CgJU3l+07c8Sb1CUOHd6bpwDO1j/2Xh1rccSQXDOdIDqRUXx/nKqPS28fPwz64XZSFZSwd6jm8I62GS9YNl4TH17M2TVH2pz70zl3qoMUUlR9rEME8+G+uxpJaS2TVBFtsO5OPb/n3vKI66LX+YeX7UYJYhn5QOtJtaxOEPvL0xtwJapAhZEIGdWGEN263CkzJz14SxKhzQNswOFFWLIyin2sYwg+peBVbKJigWwalWAHFq5biD+uHUIrVbETZcvHaB5GTO//E/SUfGlytZb5gDBMVWxDp8YSmExqPW6CGjGPns785SU3afOcfxtQEdqslIYuhFuEtPr/VlMEBGa5K0+0BiNWId3ZlqLtlCKCNzrnBifimfmuE3ECCFeV56pN1OH5jPD37Uv1qIPXE4/EBUZA6AczjpUYPxEnKcPuhOpVatGoBklo43LLFsk40GQBagCvLqG/mUfsFO+vfN9dLtrnwCE623rg48KGr70g6WTZveccQyXDQR73unNmGKojqq3SCq8VUeky0s5KP/3tFqGW1aOTvfmnfEwa9RoUGnyNXdAjVIuh6nd6O6Hm1bsDXG2dnV/LfUkdQW+OpM/1bku5Pwg49pG8bjqOvHWnke/vm8pdek5eWs6qJV60lGWVYtZWf1tdRqxS565kItnQg++VXj8WuuybNIZSJX7gvCHFw8ISrtfitgziMwsMM776dUrfepX6+tmQ8yW27dcUTDrFwZRMeDw/nh1cyT3+Dxu78iL498r676NifP6qnwUEYfm5Lr+HVl+lE7gl9m6vM+AEWvj/3ohdi2VbcTZU964ZvUrfdVTKe1G0f1JepU0+oy7fUcDkdXuEWRhPffFS/dh2QueFGyv72w5T+2iNu9RYpmt7XBsvDdJxhsUQVe9We0gyFqnEa0hnTB046w3r/RjuXmelujw9Ve1ytayVqTatXzlf90FgjzAG1jzpDbXKNms98hP0HsHoZjrAvk4P1aoDlIEtOOowk8Y7obYiyF75T8nNszbUUj91EFy79XdXn9Jm9WWoEnyB1eOd43eGEk226ckotPWt5v3dxRZlP7uJtW33ilnecl/d/HNpBkcMt7utJL3xAqK/UBsK9lUIt7VJ1vEaMFqOfuw61yGyxaozHPZnOog6weiq2EB+kETnD4JL4ukqKV0nEDUH4pVT8qh/kBU+8NjdeWEKcmLUzje/8kXqaZSGPINDi/uQGaPyWR9laoxNUSHrzJEMvzu9HVEzPePPuvVwvzOIP6od49FP0/UEopjhSPx7DNVNyTu+VBSv6jtPLyfN13lBensXwKtEU2y15c8gjtJ9rIdTizpWcEWrzK1ge4WozJSEdXZVmF0G34fdPmrr3gI1N7msEaLvnLtr83ppsIOASM/qkvWnAsolbALltN/iSVx+2+YLk0nShg8+CYqa6eGePW/x8dV9CByEcGWsy45tX000/f9GOfIDi3A/tnJrnPDUYnikLAKUoYhudMlk1v1OOQZPPl4U1OLyh5isbHq9ahpkoI+XqO5Zl7TYdOqrmLcnTkKaYKK9eowab9n5fFjXBD+Q8d6EYyAmzNlgWRWtjVU/Dv1foAit5A0l2RIUYu4FhLYKutxLaEalNvNiZm7buMoQTcwzD8u62+H7htsaNuTuMhH5M3+d9P19x99HY6hInaJFIyhrrWQWzmPi94vTSWrUFf3rdVv59cNWffJ8xl1zKgJHR5wzKaJ9T9raLZ/W2EVcpOj2wJVv/IKxIcmgKgakOlMnmf3Dp1cw/v+76lH8XBztGM0eCNj6zD321YuWWMA6ncAUUDrJwCCQzul+HRPwKKDxOP9gyduc9NPntx/X4ORzCbX5awePw7VXjrnS/X10m89TjQaWVaoEaDrDwxWd96h46kXuS9n3lYd2ySFd3ueFGXb3l8x/5zdxPXRvLEkDXEdnlqlRikHNMkpGu8nDOnhhCdQxYMdSqdfZm+xzekwBL7A9PPbrn5wbeZ1V6LH/5H+ndx/9txecl+99DUXHFltLxvk7xL/3r2k+SMk2NEHo7PV13OKm/F9sbbHEDKH6oxSbHGKVP/202ePzQu/aQKGRIH2tQ+0CObK/fPujI9hGSodcjKafmfV8wXq4Q0/e2PZGXk2OO6mvDOVqcV2NMffiWVm4rvBH9c5hbGekAi5qHOWeSevk27VWXlJpgelFaAelKLX6oRQd8JmjujWNBC6Pf+RdJ9RpH3HlYmVZVsEWZklLuLXb9CfjlVGTQwse73w2jSK/USF+amiFEgkIZlFD7o6BbULFaito/SYWZOiMcoGL1FxkKyUi/HZEIJiS9KiaODs/4WRjptgYSpdVayO1B5AZQdKsiPYwUU07fW6N2Nr1gI8KRctxdTkIW2zdJb8reSEOvW7bhA6/XLGTnC17qSAavxV9+3rzzC9Xhl4SVPB6zs6M4E7y7pKl7q5qkCWCR+QGXjf3WeMSWMhZfyr47yaxyAKW5/EpFWccQqdkmDkxwaELN70TornzBKfm5Kn/5WIrpEB944SozvMJqUVnFFHIDGll1nVPHjKbP1W8rNOpXXuEQie1OKxKvqsloveHU6xxT8zJFjeHXMeEYdOz5GtVTzD5qRynlpn+v0PEaCZvZtJTm6RI1WOlphWso2AedaUW0IxJiQqq9CoUFf0AidFZH6NQJgpXEe+8s+ftHRmxpqDbss+GfDWlMOUIm6z1vrtCbUlcHCTrOP7/uev69pfj2xDe/Svu+Uho0CYdSauHAx9Dn76PJpx8PWvtwwIXvcwMvX9Xj4VAItzLiCi98P48/HCRpBFdl4ZAMG7n154M2SuH7OYziB3PSX38kGLZeWMcfT7g1Ec8zB3K4ug274Zp1kbZ1ADqNFO2retIoe2IoPzCWzVYKVarvsgwBrCAb7DMNdxoAgNZ9cNMdwzde81MVH8v8zXeqPm/X26NVbOEQS/bid6ghQm1HHXi2M/a76moo4QCK2t779N+WzvsD3z9Bh3am1K4Fd3+3Y6So3rFmaRRPAuJQy/wbQ0F4g7m39TEAPQ+13H/aJn8/5aF35oOmJ878DH36dJaaxa2MHDFEn/5BNnTvKB15Z5b2PxP5mEFkOuwjrOBnbu1YHp5xgz9ZtUxW7Pb06gq2zJsz4qpCXjr6jDH9zvOLifgVXERJGMSv2uJWUZk9/cWGPwisxFiMCvOWF5rxiqi4AZCgSIw7Db/qiHwuN5GtNT7JZRCFKC2uErRLCtonaV6xlqCES9AqKKhy4k3Zreiiwz1u1RMdClEHueTB57/9qYpnU1vv+8+D6vG43+3IeznSz7fwqLxXLP2ZUfPW8h/j6T/9NXvzB/7QPxNf+pVivMXgV4bxgi+SetaaXLWl5UANrCj8PuIvpgR1F5tQrQWWELff2TRg8d/SSjsAmlWf4wfP25WrhkTBlUAsyzrR4wVR5vlsqhcaK7nPVVKozX+XfuUVNV+JgponWgTqdZ7Y2G+lI4aWgkCLfSHC8hFNh+943LlWf6/Q4YT6e1ypR7V71Xu00VZEJs3S0mpkWwTBllWi09sRwepzpn/rSMRqLdRrzqdLfjbemrwi+9L1wlxqTwT/TSDY0oHU/iX7a7mnMv/lz/4kxa2Bwgau3xB5POGqLalHDutKLHzfnsT7dcUTDoVw8ITbGnHwhQMtMy+e19Vhktse1fc3Kvn5T+hrDtH4VVmq3c8VXPyQSnjYWvJvvh68Jh+3UeLWRyO3fTB78MP3Yl9CB3KEyBqNnlHdJCmMXOnPIkNy5be2uXh0sOS93dZlJqRdb5CCMNKGXBiqNI2emieTXJaFC33Vq700rNfsW+ptDwAAiOAqsy9Z7bETZ/+i4v2Jd2wjK3YTRTF9ocFQCyvIxreFuJKxiHCipGzz/mwZPolSTlWtUvLAMyfo8E7/uPAw1Tr50w3LhI4dyuGSUEs5N7iy9LiSe7gyjW//DxZnvd4xU0Eoh6ddqyLMci2TCFZVsMW2M/n4ln8/ozaU+Q+l/MRz6edbvJ91VsO/LU0jQ80ozA1yRREv1FEsrVKstOL3C9JXgmTNAEYv9VqOCPUxcoM4bpshw/DzK0Ewx5t9XdjEe5LXosdvP6TvE27Qx10EavDXDBLHCle9daxSlRafaVDKHY+g4pR8ftEYL2Ci/5MXnst+IkttIPWHpxzUlXQ4TOMvzCC0YwTtiISj+68h2NJ9eGdllrpLmgCWmPqozKjPypVyQCzbzuBDKJiyoniVV7K0iDi0ZFnWJFecUd+KvLLvt4diOW4rZRh0opFlrcY3GKGVjO3f4NYGvLGjvqinCyZN2XZjwSLoQrKBsIVYeX+7nUZ+jwbEuxsKw0AHWgntiAAaIYVMRanvx6Gt8nZCcbUucaZ/61T9togidu7mzYNbXjyP/QAd6MMTB/ZRz7y//qpDJo/9+pGq7Xoqyb1wnmwvOBKuxJIZPUDx++/RlU5Sxw/T1G88qIfJ3Lufdn/23gX3RxUOqox/OFSVJXT/yU8+rK+58goHa3zckihKuCVxyxYd0LFffYmSn78vGC+/zoP/68spgo704tE7+HNqWT6rygMjnWKpl1mz03t5YsgmhCwBALrb4Z2Jr58/aVV7+MS5P694/8C6aKEWVqlay/O/9r9qBWPUPl8jS40Saj/ugWdGaak5ZoKKh+WJjrxzpOqwxQPRMTq0Y6BqMKNg7AptcuYWpaVPW4gsLaVw9VMxd4w61GprRcR/H1n1hh7kyiZukMTvSySDCh8kiqEQr33OrP2DP2hqZd+QIkFBQqa0yEqxygnJ4GdH1ky7nct9Lmclxtab5to9avhhSRzSkTGvpxHJUHVnN/RRrJYiySnOlfDDLD6dc8mq+Zly1hQmn88+UPPg0/bkg9bcPI24jZr8MEkQ1HGnKEtfp7qqn/aLSPBBOfKSfPq1+ZViyP/9BfNUILmLoBvxRmWGVnCvtwZlCNVaYBmob4KZdvYOaoL67qEpx6BJBB/aq90VZ0yHUrXeKxySev6ivfQbQNBJuquKiKBLBLDMuB3R6YFttvoUtghghXt2A5d4dpJRhnUcs+L6i2E4mYLUpadrKpi69DSCLZ0ok80nP/ebE9kzuTRXOeFAiB8U4eBJ/s2f6Oon1XCbIb9Njy9ciYXbAXGLI67cwlVhODDDoRG+n5/H9zfSkigcVOGKMOEWRP794XZDY195uOT5/rxyuKVapRh+3P7xS3o+uX1S7jPHafiL97vVW7hNyxefRpAVAAAAYKlJGhj9vx+gRg1v+dnIw06XBVvqVXtRh4XT1EmEDO8rHFY7mIejPW9+PVWrbCxKqrXYtFLJwtKtw7tVbIoOnFuUSvJLYdUFW5yenkmTChecgiDTNPV9XHWcb3Ewwr0tg9sGhyZMeYqa5PSKLM0XLrjTUlMuFPR0+f3DDYMcQaFu5EJNyzhZb5x2bqLY+0vZ8t79CUfIXdKhhCAjIQXFhDQs9VexrthqyYudCMMPtdkknZw0yFbDzhSuKkzVqs5S7q35vnWGc+VePU7DJMGvqcCd1dW1moC6S/1NupMWhqGX5/yV3rqvLaqenvljcwVzRr3eoPSOP129HL0wkXq13If7NYJutU9dkhSxlPUKZhOqtcAyKZg0a1ZpDcJBBfURPuk4tEt91ibJPSidoOYPTtvkVQtRX0fT6msiizBLZ7AsK6a+UmtuWBgOwnlQnVqbjjXc6mcJid1ky+829BR+ztJ+fgmabaiVU4HiRKjYshq47YiwLgkrn9HnjEf8GLN3vFi5V3n0MJdMnopZsd15rGt2ouwn/+vBD3/hPw0f+3d7ExwI0cGPrz2iW+9wOx6uXLLgOWdO6ZBIeQsjxs/nwAuHR8bu/IgOrnAoZPT4ETr1meM6UML3Z55+XFdCaaQlEQ/rm/iF+4LbPL8s3IKIq7Nw6yDG4/bDN35LoXE1XOrWuxZMI/P0N3QYxw36uNe8DO77HxP2F556NE0AAAAAsPRKAhTRDfa/N9Jw9qW/o9yPTpfcN/Ku6rtnpdo3YBhG5+6flTKrDvja0QbujTaYFNge7DKrLthin87Y5FZGWJrpnfrCopdHPPedI5ys4suCDyzrZ9JWyR1rKN9IgKWa2Sd/a0ZdzdAyOf2nv2bTEv4eYcXi93KKOr8lUZpw4AmWD3+W+/0pS3BQ4fxF3aqGL0F5Og45qFVHSx2YiMmCGyxTB9TWhcaRF9KtZCBMsufdQEseIZbOZTq0R5d5rEK9F+znXmxPCynoWo0F4iRaEbVM0ADBqmAYTrYgDQJYybhaixROKsqwaj0yXfvxKGEuEVt7Xe+IWsvt2BLLq92J33wopa5yHP5Ifu4TNPPieX0/B1I4pMIVVfix7JmcDoVUCrSwkff9PE1++091eITDK36IhcfDbXz8wIt7/z06QBIOwtTCQRV/uuGqLHzf5Lcf17cHtyWC+4+pcTIOpnDllfA887xw0Obg1x6hPYnb9euzbtigK79MfPPRYJghtSz8cMvD/24s/YX/Yx/2JXSw/rHpcbFEJzpJkpmLE8mgwubAWPak+qxM0sqSF+TcbU8MZasN0N5lJrIXJu4YijLkwNg0nziptmnk1IWJ5N31hrf2fWtQ8gG6NimQM/RijeUCAADLwqr2wJ6tP0uxq65bcP/Iu/bUrLgSdvCJLy24L/fK6Yr3/7M1Mfu+n/7FNHUaDp4Um4vk6MAz+6hlMl/snoLqthXVauW0wq26YMtqY/9l2iaA7sbBsQl1GaPOxPOOKgewbDhssrHfmhBlBwe4Wku1oIIXUOnYcnXQlGTNR6X+LAOoTiJk0bJ5ukTILkAFaEe0uAwpppw65YsNx8kS1GT2FfY60fpf2tsunq25fdRnXDn2luxLUz1CV5tDsKVDCSFmzr78wtg9v//pCT/UwjiAkrt4TgdQokjd9kEdbOGwylTuCV0RhdsP+RVTJp9+PAiwcBshvzUQB2HqBVv88ArjsIyPAy/B9L3WRLkXzlHOex0jah50G6EKOLzC0+aLO+zPL3icwy0P/7t9mQ8nbsO+BOgiImuYZmr2d29bkQdZ1CG3jPoWG5NCTBEAAEAdx//3wxS76lpqFldrmfz+wq+cye+fqPwEUwzv/Vf/vvOCCkKGCiiIFLldGlocZ0/ObSmif0hQ2opRepWfcHv/aZsO7yye3NzB28oItgBAN+AvOy77lqTOYqvLQQJYZs9ftA9u7Lf0Co3gKiySMo6BgwAQImq3IZImdu5Bm5m0HBucFatXrRi9av4aa+e0cl8LtF1ntiPSJYZtasEbxpVja2jN5A5b7aRZJFteOMN7Dk/QMlEH0IaKZ5uVnRHoVc4zhVwnKehN7g4jREwWPwcsoR6Xy/i54AgRqVe6iHB2e9y286cHtmTrVxoQyXM3bx7c8uL5Ra2iC4tn64Zbjr3jP34oqW7q98+umzfT1G8e0RVQOOBRLRzi46omiVu2BD/br76krznUYv2zDZR747wej/3jl/Q4+X6eBo/XrQZzSodgKvEf98cXns6JmSeC2/7zufJK+D6ebj1+GyOet7E/eTgIu9j/8JL94cyBNpzNCrASiKygwkF7hVcjMYSYklKmLh4dRKAMAABq4lZDrYZahv54tIFnOGn61Oll67DRkrm+Keq9cpR4W5WrhR/ePk4HTtc+ZnZk+yDtP119G++KOUO9hXwwzp6149SOwEw5YayjTiJFRm1w+wUCxujQjqlOrNqCYAsAdAv+pj9JNcq/rTD8xZr0rgGWHYdbCEErqMCyrEGSNdsQ5WZnZ1ECHWoTDR5MnXfbmS0pob6TZeT5tGmlEwi2rCaOYUwKqXZmLROh1mklibxwS/7aJKX6WaqfRd6RxgXDdPIOGbzea1+my/ndbWpP6I2nq9eny0I7NrXBs9Z2yyQjViBHf05cek0u6mfumf6tIzLidlqvOZ+OMpwpZLogRbbecOpvI0mL3B4aFtcr//D66D9bd23iujVvs7KffJhiV19LuRfO62BJPdwGqJrY24oHG/S4rndvc4sgPzBTK3ySf+P14rjWXlP2WO1548eHE7frajH1cKul1K030sQv3OdWmPnLb9jUJ5M0kcW+hG7grn/atCREyXuG28mKZVunFTkpZNaQzrQ9MdRYNdj2LrPIf0f20Tum+/dNp6MOPycLl3rIsAkAALqZXenOZP97qVnTF79Dd/9Ptd731usRn6H2A9QLgkTF7WmiaGcYIp3L0+GdXAk87d5hpOnwdjeEEZ4OV13pW7OLHJFWjyWJapQDLR+nEGN0aCe3E0wvmHd+zcIZpgNnop3kK0LVXIVMUfgkGHce99D+0yszBGsWjqkNZC/YIiw1/1k6sj21ICSkX8fb9hBXpl2BwRcEWwCgW9jknsWVpc44QzmlLjgQDAArnuGoz9ZanQMkZQigHofWEyw1BFtWEQ4/RKtgEZ0gmZMkbCGlHQ6p6AdNve5t+9Mm6CiN/s62XzgrTllWbA2tifmBGENdhCMGvEoxVq1wTNRqQlx5aGPEsCy34DozsDVfrwqNdM9IQ3i7k2Wy+X/41eTQX+7/w5Oxq6+1ONQy9PlPRAq2cLUTbgHkC1dfCd/PFVF84fGWB1aiGrh+A13wQjF+NZjyafO8hYerhIM1o8eP6EozPHzm3v35yb96fJi++BT2JXSJi0cH+SDKslRLvTiRbORU8BVjWZeZO+1IfugGduIEAADdrOI62WATwRau0nLwiS9VbD9UQ6ZtoRY+EUHoqqr1HdphtTXwMNd3jHqvpCg4GcJIE29DHtqpvkv1yTNcecXSJ6NF6m6rHHjmIB3eyccL3aS74ONxIqXmPatDsu6dCXeapk1R1y2EmSFZSHk/DKtpnFLzlfOmMeydMLcygy26HdEOtX0sJtw7hFqmIqvus9UPOXWbl0vCXdZqO1/KIVqBxzARbAGAbsLl1pK08sMtvHN12cqZAwA0RNRu8+YYOAsaIpDUWeU5V6bGzsyWCLasNkLtkJCiXmtOwWdn56JU6Nh24ezdBOBppTqOFMaoH4RxyLGEMCwvkGKpRy1/OMcxG9sBKGmC6oZmRAztiLrA72ftLb9309Dzr/7dqaHPfyIWJdQy/qFRHShJnziuf+a2Pn64hFsI+eNI3LJZtxLyhQMvif7NVcfPlV34eTweDqDwtT8ersbitw2aOvUEjd35Ef3Y4NaErgbDj+mgyuh+Gvr8fVTPwa8fV9PbQKlbP5ii//ZkZ5aZBwAAAOg2hpPlHaNhsTXXUnIgWrDlwqW/o+zFv6LJvzmhrr9DDcrQgWc6MqS6AFdYeXD7kFqWpR0ZBIdSKiRZop5kOdc3RD1zj6mdJcniOFs8GWj/96fp0DuzoXEm3PnsEAeePUaHuXpNeDtaWKSDTdQREGwBgG7TjnCL7T2fr/2dtzwuL8HZ0hdVilZqYhMAoIxlWTEhq3/mcflqpbHS0bA6cVscSdACsZvy8rsEUJXbjkgmucKK+tH2WwAJ6rEL5ORRWQWWi3rvZWs9ftbameAqMDterD1cOWHIE1KKdL3hCqYeZoigowkh7I/+/qeTgnQLKr2tP/K+uyh1211095f2l1Ra4RALB0fsV1+myW+77X7GP1zc7595qtgCaO+d9wS3eXi/ggoHXsKVXCrh6fsBlszT39ABFja8e2GwhfE8cZCF5zXz9OOUuvUu2vtz9wTD+o5+1K1Iw4EW3+jkkdTobf8GJ8gAAAAArBRcAaM05ED5y6+T8eC/oEUl5QQ98Ow+apU0XyOjYFOjau7fM/IkHNsdzoh+YsT9en9FnI68c0S9vjQtaGUr8iSdjJrnE/Tpv81SFByY4e1AHicfl5OhgIs/TkE5chqsRj7fezf1zI27VWBk8RikUNspUtQpuSNs9X6h9gmNL+pouZrNg9sn1U6kcV11Jvwa9CjVcVFHTqnXM0srUIfkbwAAGmapS2nCs7asd+HQiU31xz1IbqrRomhsclsl4ewqAOgYlmUNmlJ/NlYkJWWev2h3x9kBsKjkX9O42sBKR36CQZZ499KWu1TzOKvm0Yo4uC3es/SlxeV3G4oHZdQ84u9zBXvW2m4J6dTdUaD2UaS2XTyLYDRABWf6tx7nks/1WhK9eenK+t15u6mKM7CyfPT3P73rK3+dndp10yYrN+4GP4a/uJ9O5J7Qt7kyyqnPPKJDKalHjuhgCwddTn7yYX0fh1fi97thFr5/9qFiqMQfnh0fvZ8rpNScF6784ldc4Wos2U9+IXgs+blP6Oos7ORvPxxUi/Hv52mf+sxxPb+Jg6M08+L5YJ5OqvHw9difPOyGXgyZoj94Ct8DAAAAACuNG8TI0JKRY7rqRrdLWzEyr0mQ4eRpTl3SbThRh8fZe7Wlb7drnId3uieEzr1hU7pDtzfT2y0yeywqzNtEl/Mr/XUg2AIA3Y7TmGmqHEDhD+gMuW2BstQc/uLa611Xqmpge9M4Rk2W7gYAWC4b+629QtBEtccLDg3bL9g4cxTqQrClPRoMtmTVPKJCwQq2MNjCbYJk3uvPrCuukEn2Zbqc89rAAEAVpywrtobWJExH7uKWXBx0UX9PiSDwIuXY9ovnun8H8Grxq0nr7MH/8+SWt99kpb/2SEllEz+QwlVZRjNHSu5j1cIrtQIvtVQLsIRDL7tu3kx+CCd8P7dLcivLvES7f+feoOpMaPi8+NU7UvTfnsD6NgAAAMBKdXjnKaJFb0djk2OMRq5WAtCl0IoIALrdpHdJqssudbnk3Z+l+pVZouA9WP7Z0OF2RXnvMZsAADqXVfPR12maAKKxCABKrKHL+cvOmlHTNHL/RG/YCK8ANM/7+8l6lyDA4gdecFpXl/n9rL3l924a+qMn/5/HDn79eHAQgaum+EGV9Ncf0dccUgmHV/xQS/h+xq2EfOG2RfX47YX07a89ElRt4YALzw+HXrgai996KHw/B3JSt32QrBtu1C2J/IAOD3/f/5iwH/53Y0n6b08sadAXAAAAABpkihQVZJbqVJFsGrcemn/zYMdWBAFoI4MAAFaHLLk7ODPexab283emZtRlihBqAYAOJ0TNsw2yNkr6AwA0La4OxO944XRmq/0MKrIALBL+29phn87yhaCrCCHsj93+v3N5lLR/H4dMGFdrufDjl/XtcEiFgye+8P0ceOHgCSsPvNTjB1UYh1W4Ikv5/LB9X3k4qMgSvj/1yGF9PXbnR3RbIk/2C089mlSvEaEWAAAAgJXuUz+YIeGMUbsJkSXHGKIHnt2HUAuAC8EWAAAAAGiYdFtlAHQN8S8pLt6jdhtEuyx5GyJ3JhGaBQAAKPHlJw+SYaS2vP1m228D5Fdr4aDIcOIOfTv3wrma1VoqBWGiCgdVwuGZcOiFQy0T3/zqgvs5DMOP8bzuSdzO3/Vj6jUN0RefRqgFAAAAoFPsPz1JpuAVPJta5Qda9v9gCK2HAEoh2AIAAAAADXOkrlAFACuXRQAAAKvBH3xr8hdv/9+G1K0MV0zxQyp7Eu8PqqBM/NmjweDl4RW/WgvzwzGN4Of406lVteVE7ong9vDu20PT122QspnR/Rb94ZPHCAAAAAA6D1duMRxeJ01TwwEXkdcthxBoAagJwRYAAAAAaJjoEajYAgAAAAArQvquUVsIMXryTC5FQth8n1+thfnVWlg4vBJuW8RVVKzrb6Rm7P25e4LbU6eeKJmWH3rJvXA+CL0MJ4JgS/5LJ/+/Y2reh9B6CAAAAKDD3X/apgPPHKS5N3arddKUuiej9qLmdHAloG5zRV5BU+ow/ZgOsxz4wXrdcgiBFoCaeggAAAAAoBKpN7Iq3E327OwsdrwDAAAAwIry2T33TqqrSfqVO0ZujF2fVretcAWVxC2bS8IrU1WqqDSKAywHv35c3+YQzcQv3Bc8xi2GJr2qMNwSiYe1briRD25M0DU9x84d+UqeAACgY/y9tXnQISMZdXi1W8V+u312Mnzfq9a2PQWSiSjPN8jJ/pR9fjp832uWFZujvj1Rnt8rKLd+9uxMpecLcuzycdfzirV1POqw77DPHiSA1Sht8/rdpHcBgDZBsAUAAAAAKpJq33uFXAvvlEG1FgAAAABYuf7gW5M/8wfvnJRSjvzNi8+nyWvRN3D9hpLBps+GQy9bqFnh5+bf+AnZP34pCNBwmMY/ovHU+b/Nj935kQl18xh9+cnSQMsv3zpAhmkFP8+ZM9Rb2EV/+ETxgOPHbx8s+RkAAJbcPPVcEEKmKGL7V0eKofL7JBXyUpjpuk+WZPeIQqb87su0JqbmIRPl+URXktWfb2bVj0PUIClEuv5AzgQBAAC0EYItAAAAAFCRY9CkKWnBjggpEWyBhrllVqE1VaooVR0WAABglRNCBBVc1AG24fVXXzscfpxDKD7rhg3ULG43xBd/fParLwfBltjaa/kqy+Xm/+eZJybVPFWu0NJjxGiO4mTIEXLUfPcWeMV7ij5++7AOs/yyeg1OIa2GjBMAACybG+3T9kvW9iGDnJHivSIhBQ2r7bCsIJn17+1Tn/3r7TMz5ePgKilqHPHScZQSJPK94srU+loVc9V2n5peptrz/4nemtwwa7e1MhhXYfmRtdWWNYI9PO232+eOEQAAQBsh2AIAAAAAFdm2nd80YGXVzWT4fgfBFmiQ+Je0T13tI2iJeE/jZ9IBAAAA6Qou6v/J43/wRExdc+sGDrgk1SVGbbJubTHYMl8o8EFEXmeeuvD3F07Ql5+0647gvz3JBz5n6OO3DdIjT2boV5OWGlGGHCel7p9WRy+TZFCWAABg2XG4RV0FbXZesranBMlhDrVEbb9TPo6mCLLfMbv07X7KWysBAAAsBQRbAAAAAKCqgqBRUxLXaC/u9DfpAgEAAAAAdBivWsqkdyH62PuT6v9BdUm+8o95y7r+RouaY1/48cs2GSJHBZq+c+d7slUrszRE5skwYnTv+3eR6WRJlgbOAQCgM/3I2joiKeJnuqCJd8yenan8oEy8Ym09XuvpkpypDfb5E9QmanrjFKENk1u15QxOcAEAgLZBsAUAAAAAqrKVeDyeNBw5Rd6OC3UXKrYAAAAAQOf78pNZIl0F5eDPfHmnvktKmSA31G2pyzpaWNWFAyuXvGteL86Xh1jEH0XtHRhJRldq6VXzdUUkCQAAOl6BjGkhZJrqBUQk2W/Kt2qEQ0RMCkpRDUIatrpqW7BFkvouEvVDOZJ0e1wEWwAAoG0QbAEAAACAmmZnZ/nMoPimfovPKGpbuXYAAAAAgJVGCLG8IW7htRu6THm6Ss3Lf3timn7ltjH64tMX1HWWAACg43Ebopes7UMGOQmHjKr7WS7T5am4bS+oALaGLucvyzU1W9WqcQ9KIdK0SAxJYwUSlyo9JoQ8TgAAAAAAAAAAAAAAAAAAAACw/F6ytqdejm+TXpueFaHWPKnHLH5MXU5Sg162tp3k574Wjw9UHcYd9ywBAAC0ESq2AAAAAAAAAAAAAAAAACyBl63NewQZw5EGFjTxjtmzM+V3czhFUGGvIFGx4oskaVFdMvGKtbVmdZV32GdHCQAAYAVAsAUAAAAAAAAAAAAAAABgCUjqmSEhJ9RNq/aAMrehWqhFyJNEhiWpFSImBaWqPiydCQIAAFghEGwBAAAAAAAAAAAAAAAAaE5WSjEkSdhRBr7RPs3DxV+ytierDWOSkX+7/Uyu0mMFKsRMaUaqpFJpntbQ5fxluWao1vPc6Z9ZMP15cvapacfW27MXqj2XlwU/nwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKDo/w8kUiuZ9iBwQAAAAABJRU5ErkJggg==\'style="width: 742.5px;\n                    position: relative;\n                    top: 123px;\n                    left: 32px;"/>\n                    <a href="'.concat(t,'" style="float: left;\n                    border-radius: 56px;\n                    background: #0D6EFD;\n                    padding-top: 12px;\n                    width: 280px;\n                    height: 45px;\n                    text-align: center;\n                    position: relative;\n                    top: 141px;\n                    left: 270px;\n                    font-size: 17px;\n                    color: white;\n                    text-decoration: none;\n                    line-height: 125%;\n                    letter-spacing: 0.02em;">Claim your free account</a>\n                        <div style="\n                        font-size: 14px;\n                        position: relative;\n                        top: 197px;\n                        left: 15px;\n                        letter-spacing: 0.02em;\n                        font-weight: 500;\n                        line-height: 125%;">have a Syncfusion account? <a\n                href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login"\n                style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Sign In</a></div>\n                    </div>\n                </div>')});document.body.appendChild(n)}else{var o=sf.base.createElement("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"\n            position: absolute;\n            left: 16px;\n            height: 24px;\"/><span>".concat(e,' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href="').concat(t,'">Claim your free account</a>.</span>')});o.setAttribute("style","position: fixed;\n            top: 10px;\n            left: 10px;\n            right: 10px;\n            font-size: 14px;\n            background: #EEF2FF;\n            color: #222222;\n            z-index: 999999999;\n            text-align: left;\n            border: 1px solid #EEEEEE;\n            padding: 10px 11px 10px 50px;\n            border-radius: 8px;\n            font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(o)}}};sf.base.enableBlazorMode(),window.sfBlazor=window.sfBlazor||{},Object.assign(window.sfBlazor,i)}});